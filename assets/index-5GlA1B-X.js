function Jre(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var Zre=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xh(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Zj={exports:{}},TC={},e$={exports:{}},ai={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x=Symbol.for("react.element"),ese=Symbol.for("react.portal"),tse=Symbol.for("react.fragment"),nse=Symbol.for("react.strict_mode"),ise=Symbol.for("react.profiler"),rse=Symbol.for("react.provider"),sse=Symbol.for("react.context"),ose=Symbol.for("react.forward_ref"),ase=Symbol.for("react.suspense"),lse=Symbol.for("react.memo"),use=Symbol.for("react.lazy"),yk=Symbol.iterator;function cse(i){return i===null||typeof i!="object"?null:(i=yk&&i[yk]||i["@@iterator"],typeof i=="function"?i:null)}var t$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n$=Object.assign,i$={};function ky(i,e,t){this.props=i,this.context=e,this.refs=i$,this.updater=t||t$}ky.prototype.isReactComponent={};ky.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};ky.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function r$(){}r$.prototype=ky.prototype;function aD(i,e,t){this.props=i,this.context=e,this.refs=i$,this.updater=t||t$}var lD=aD.prototype=new r$;lD.constructor=aD;n$(lD,ky.prototype);lD.isPureReactComponent=!0;var vk=Array.isArray,s$=Object.prototype.hasOwnProperty,uD={current:null},o$={key:!0,ref:!0,__self:!0,__source:!0};function a$(i,e,t){var n,r={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)s$.call(e,n)&&!o$.hasOwnProperty(n)&&(r[n]=e[n]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(i&&i.defaultProps)for(n in a=i.defaultProps,a)r[n]===void 0&&(r[n]=a[n]);return{$$typeof:$x,type:i,key:s,ref:o,props:r,_owner:uD.current}}function hse(i,e){return{$$typeof:$x,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function cD(i){return typeof i=="object"&&i!==null&&i.$$typeof===$x}function fse(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var _k=/\/+/g;function H5(i,e){return typeof i=="object"&&i!==null&&i.key!=null?fse(""+i.key):e.toString(36)}function lM(i,e,t,n,r){var s=typeof i;(s==="undefined"||s==="boolean")&&(i=null);var o=!1;if(i===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(i.$$typeof){case $x:case ese:o=!0}}if(o)return o=i,r=r(o),i=n===""?"."+H5(o,0):n,vk(r)?(t="",i!=null&&(t=i.replace(_k,"$&/")+"/"),lM(r,e,t,"",function(u){return u})):r!=null&&(cD(r)&&(r=hse(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(_k,"$&/")+"/")+i)),e.push(r)),1;if(o=0,n=n===""?".":n+":",vk(i))for(var a=0;a<i.length;a++){s=i[a];var l=n+H5(s,a);o+=lM(s,e,t,l,r)}else if(l=cse(i),typeof l=="function")for(i=l.call(i),a=0;!(s=i.next()).done;)s=s.value,l=n+H5(s,a++),o+=lM(s,e,t,l,r);else if(s==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nw(i,e,t){if(i==null)return i;var n=[],r=0;return lM(i,n,"","",function(s){return e.call(t,s,r++)}),n}function dse(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var wa={current:null},uM={transition:null},pse={ReactCurrentDispatcher:wa,ReactCurrentBatchConfig:uM,ReactCurrentOwner:uD};function l$(){throw Error("act(...) is not supported in production builds of React.")}ai.Children={map:Nw,forEach:function(i,e,t){Nw(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return Nw(i,function(){e++}),e},toArray:function(i){return Nw(i,function(e){return e})||[]},only:function(i){if(!cD(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};ai.Component=ky;ai.Fragment=tse;ai.Profiler=ise;ai.PureComponent=aD;ai.StrictMode=nse;ai.Suspense=ase;ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pse;ai.act=l$;ai.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=n$({},i.props),r=i.key,s=i.ref,o=i._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=uD.current),e.key!==void 0&&(r=""+e.key),i.type&&i.type.defaultProps)var a=i.type.defaultProps;for(l in e)s$.call(e,l)&&!o$.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:$x,type:i.type,key:r,ref:s,props:n,_owner:o}};ai.createContext=function(i){return i={$$typeof:sse,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:rse,_context:i},i.Consumer=i};ai.createElement=a$;ai.createFactory=function(i){var e=a$.bind(null,i);return e.type=i,e};ai.createRef=function(){return{current:null}};ai.forwardRef=function(i){return{$$typeof:ose,render:i}};ai.isValidElement=cD;ai.lazy=function(i){return{$$typeof:use,_payload:{_status:-1,_result:i},_init:dse}};ai.memo=function(i,e){return{$$typeof:lse,type:i,compare:e===void 0?null:e}};ai.startTransition=function(i){var e=uM.transition;uM.transition={};try{i()}finally{uM.transition=e}};ai.unstable_act=l$;ai.useCallback=function(i,e){return wa.current.useCallback(i,e)};ai.useContext=function(i){return wa.current.useContext(i)};ai.useDebugValue=function(){};ai.useDeferredValue=function(i){return wa.current.useDeferredValue(i)};ai.useEffect=function(i,e){return wa.current.useEffect(i,e)};ai.useId=function(){return wa.current.useId()};ai.useImperativeHandle=function(i,e,t){return wa.current.useImperativeHandle(i,e,t)};ai.useInsertionEffect=function(i,e){return wa.current.useInsertionEffect(i,e)};ai.useLayoutEffect=function(i,e){return wa.current.useLayoutEffect(i,e)};ai.useMemo=function(i,e){return wa.current.useMemo(i,e)};ai.useReducer=function(i,e,t){return wa.current.useReducer(i,e,t)};ai.useRef=function(i){return wa.current.useRef(i)};ai.useState=function(i){return wa.current.useState(i)};ai.useSyncExternalStore=function(i,e,t){return wa.current.useSyncExternalStore(i,e,t)};ai.useTransition=function(){return wa.current.useTransition()};ai.version="18.3.1";e$.exports=ai;var W=e$.exports;const ge=xh(W),Ase=Jre({__proto__:null,default:ge},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mse=W,gse=Symbol.for("react.element"),yse=Symbol.for("react.fragment"),vse=Object.prototype.hasOwnProperty,_se=mse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xse={key:!0,ref:!0,__self:!0,__source:!0};function u$(i,e,t){var n,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)vse.call(e,n)&&!xse.hasOwnProperty(n)&&(r[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:gse,type:i,key:s,ref:o,props:r,_owner:_se.current}}TC.Fragment=yse;TC.jsx=u$;TC.jsxs=u$;Zj.exports=TC;var Y=Zj.exports,c$={exports:{}},Xl={},h$={exports:{}},f$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(j,ie){var ae=j.length;j.push(ie);e:for(;0<ae;){var pe=ae-1>>>1,Pe=j[pe];if(0<r(Pe,ie))j[pe]=ie,j[ae]=Pe,ae=pe;else break e}}function t(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var ie=j[0],ae=j.pop();if(ae!==ie){j[0]=ae;e:for(var pe=0,Pe=j.length,He=Pe>>>1;pe<He;){var Se=2*(pe+1)-1,Oe=j[Se],Ye=Se+1,it=j[Ye];if(0>r(Oe,ae))Ye<Pe&&0>r(it,Oe)?(j[pe]=it,j[Ye]=ae,pe=Ye):(j[pe]=Oe,j[Se]=ae,pe=Se);else if(Ye<Pe&&0>r(it,ae))j[pe]=it,j[Ye]=ae,pe=Ye;else break e}}return ie}function r(j,ie){var ae=j.sortIndex-ie.sortIndex;return ae!==0?ae:j.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,d=!1,p=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(j){for(var ie=t(u);ie!==null;){if(ie.callback===null)n(u);else if(ie.startTime<=j)n(u),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=t(u)}}function R(j){if(v=!1,E(j),!p)if(t(l)!==null)p=!0,Z(L);else{var ie=t(u);ie!==null&&he(R,ie.startTime-j)}}function L(j,ie){p=!1,v&&(v=!1,_(k),k=-1),d=!0;var ae=f;try{for(E(ie),h=t(l);h!==null&&(!(h.expirationTime>ie)||j&&!U());){var pe=h.callback;if(typeof pe=="function"){h.callback=null,f=h.priorityLevel;var Pe=pe(h.expirationTime<=ie);ie=i.unstable_now(),typeof Pe=="function"?h.callback=Pe:h===t(l)&&n(l),E(ie)}else n(l);h=t(l)}if(h!==null)var He=!0;else{var Se=t(u);Se!==null&&he(R,Se.startTime-ie),He=!1}return He}finally{h=null,f=ae,d=!1}}var I=!1,D=null,k=-1,G=5,O=-1;function U(){return!(i.unstable_now()-O<G)}function Q(){if(D!==null){var j=i.unstable_now();O=j;var ie=!0;try{ie=D(!0,j)}finally{ie?X():(I=!1,D=null)}}else I=!1}var X;if(typeof M=="function")X=function(){M(Q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,K=ee.port2;ee.port1.onmessage=Q,X=function(){K.postMessage(null)}}else X=function(){b(Q,0)};function Z(j){D=j,I||(I=!0,X())}function he(j,ie){k=b(function(){j(i.unstable_now())},ie)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){p||d||(p=!0,Z(L))},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return f},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(j){switch(f){case 1:case 2:case 3:var ie=3;break;default:ie=f}var ae=f;f=ie;try{return j()}finally{f=ae}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,ie){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ae=f;f=j;try{return ie()}finally{f=ae}},i.unstable_scheduleCallback=function(j,ie,ae){var pe=i.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?pe+ae:pe):ae=pe,j){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ae+Pe,j={id:c++,callback:ie,priorityLevel:j,startTime:ae,expirationTime:Pe,sortIndex:-1},ae>pe?(j.sortIndex=ae,e(u,j),t(l)===null&&j===t(u)&&(v?(_(k),k=-1):v=!0,he(R,ae-pe))):(j.sortIndex=Pe,e(l,j),p||d||(p=!0,Z(L))),j},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(j){var ie=f;return function(){var ae=f;f=ie;try{return j.apply(this,arguments)}finally{f=ae}}}})(f$);h$.exports=f$;var bse=h$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wse=W,Hl=bse;function _t(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d$=new Set,D_={};function lm(i,e){Z1(i,e),Z1(i+"Capture",e)}function Z1(i,e){for(D_[i]=e,i=0;i<e.length;i++)d$.add(e[i])}var Pf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x6=Object.prototype.hasOwnProperty,Sse=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xk={},bk={};function Mse(i){return x6.call(bk,i)?!0:x6.call(xk,i)?!1:Sse.test(i)?bk[i]=!0:(xk[i]=!0,!1)}function Tse(i,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function Ese(i,e,t,n){if(e===null||typeof e>"u"||Tse(i,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sa(i,e,t,n,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var fo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){fo[i]=new Sa(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];fo[e]=new Sa(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){fo[i]=new Sa(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){fo[i]=new Sa(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){fo[i]=new Sa(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){fo[i]=new Sa(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){fo[i]=new Sa(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){fo[i]=new Sa(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){fo[i]=new Sa(i,5,!1,i.toLowerCase(),null,!1,!1)});var hD=/[\-:]([a-z])/g;function fD(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(hD,fD);fo[e]=new Sa(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(hD,fD);fo[e]=new Sa(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(hD,fD);fo[e]=new Sa(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){fo[i]=new Sa(i,1,!1,i.toLowerCase(),null,!1,!1)});fo.xlinkHref=new Sa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){fo[i]=new Sa(i,1,!1,i.toLowerCase(),null,!0,!0)});function dD(i,e,t,n){var r=fo.hasOwnProperty(e)?fo[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ese(e,t,r,n)&&(t=null),n||r===null?Mse(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):r.mustUseProperty?i[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,n=r.attributeNamespace,t===null?i.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,n?i.setAttributeNS(n,e,t):i.setAttribute(e,t))))}var Yf=wse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dw=Symbol.for("react.element"),Xg=Symbol.for("react.portal"),Yg=Symbol.for("react.fragment"),pD=Symbol.for("react.strict_mode"),b6=Symbol.for("react.profiler"),p$=Symbol.for("react.provider"),A$=Symbol.for("react.context"),AD=Symbol.for("react.forward_ref"),w6=Symbol.for("react.suspense"),S6=Symbol.for("react.suspense_list"),mD=Symbol.for("react.memo"),$d=Symbol.for("react.lazy"),m$=Symbol.for("react.offscreen"),wk=Symbol.iterator;function Lv(i){return i===null||typeof i!="object"?null:(i=wk&&i[wk]||i["@@iterator"],typeof i=="function"?i:null)}var Pr=Object.assign,q5;function k2(i){if(q5===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);q5=e&&e[1]||""}return`
`+q5+i}var V5=!1;function j5(i,e){if(!i||V5)return"";V5=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(i,[],e)}else{try{e.call()}catch(u){n=u}i.call(e.prototype)}else{try{throw Error()}catch(u){n=u}i()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=n.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return i.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",i.displayName)),l}while(1<=o&&0<=a);break}}}finally{V5=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?k2(i):""}function Cse(i){switch(i.tag){case 5:return k2(i.type);case 16:return k2("Lazy");case 13:return k2("Suspense");case 19:return k2("SuspenseList");case 0:case 2:case 15:return i=j5(i.type,!1),i;case 11:return i=j5(i.type.render,!1),i;case 1:return i=j5(i.type,!0),i;default:return""}}function M6(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Yg:return"Fragment";case Xg:return"Portal";case b6:return"Profiler";case pD:return"StrictMode";case w6:return"Suspense";case S6:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case A$:return(i.displayName||"Context")+".Consumer";case p$:return(i._context.displayName||"Context")+".Provider";case AD:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case mD:return e=i.displayName||null,e!==null?e:M6(i.type)||"Memo";case $d:e=i._payload,i=i._init;try{return M6(i(e))}catch{}}return null}function Rse(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M6(e);case 8:return e===pD?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xp(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function g$(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Pse(i){var e=g$(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Lw(i){i._valueTracker||(i._valueTracker=Pse(i))}function y$(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=g$(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function jM(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function T6(i,e){var t=e.checked;return Pr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function Sk(i,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=xp(e.value!=null?e.value:t),i._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function v$(i,e){e=e.checked,e!=null&&dD(i,"checked",e,!1)}function E6(i,e){v$(i,e);var t=xp(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?C6(i,e.type,t):e.hasOwnProperty("defaultValue")&&C6(i,e.type,xp(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function Mk(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function C6(i,e,t){(e!=="number"||jM(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var U2=Array.isArray;function C1(i,e,t,n){if(i=i.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<i.length;t++)r=e.hasOwnProperty("$"+i[t].value),i[t].selected!==r&&(i[t].selected=r),r&&n&&(i[t].defaultSelected=!0)}else{for(t=""+xp(t),e=null,r=0;r<i.length;r++){if(i[r].value===t){i[r].selected=!0,n&&(i[r].defaultSelected=!0);return}e!==null||i[r].disabled||(e=i[r])}e!==null&&(e.selected=!0)}}function R6(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_t(91));return Pr({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Tk(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(_t(92));if(U2(t)){if(1<t.length)throw Error(_t(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:xp(t)}}function _$(i,e){var t=xp(e.value),n=xp(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),n!=null&&(i.defaultValue=""+n)}function Ek(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function x$(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function P6(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?x$(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ow,b$=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return i(e,t,n,r)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(Ow=Ow||document.createElement("div"),Ow.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ow.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function L_(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var e_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bse=["Webkit","ms","Moz","O"];Object.keys(e_).forEach(function(i){Bse.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),e_[e]=e_[i]})});function w$(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||e_.hasOwnProperty(i)&&e_[i]?(""+e).trim():e+"px"}function S$(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,r=w$(t,e[t],n);t==="float"&&(t="cssFloat"),n?i.setProperty(t,r):i[t]=r}}var Ise=Pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function B6(i,e){if(e){if(Ise[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_t(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_t(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(_t(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_t(62))}}function I6(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var N6=null;function gD(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var D6=null,R1=null,P1=null;function Ck(i){if(i=Yx(i)){if(typeof D6!="function")throw Error(_t(280));var e=i.stateNode;e&&(e=BC(e),D6(i.stateNode,i.type,e))}}function M$(i){R1?P1?P1.push(i):P1=[i]:R1=i}function T$(){if(R1){var i=R1,e=P1;if(P1=R1=null,Ck(i),e)for(i=0;i<e.length;i++)Ck(e[i])}}function E$(i,e){return i(e)}function C$(){}var $5=!1;function R$(i,e,t){if($5)return i(e,t);$5=!0;try{return E$(i,e,t)}finally{$5=!1,(R1!==null||P1!==null)&&(C$(),T$())}}function O_(i,e){var t=i.stateNode;if(t===null)return null;var n=BC(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(_t(231,e,typeof t));return t}var L6=!1;if(Pf)try{var Ov={};Object.defineProperty(Ov,"passive",{get:function(){L6=!0}}),window.addEventListener("test",Ov,Ov),window.removeEventListener("test",Ov,Ov)}catch{L6=!1}function Nse(i,e,t,n,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var t_=!1,$M=null,WM=!1,O6=null,Dse={onError:function(i){t_=!0,$M=i}};function Lse(i,e,t,n,r,s,o,a,l){t_=!1,$M=null,Nse.apply(Dse,arguments)}function Ose(i,e,t,n,r,s,o,a,l){if(Lse.apply(this,arguments),t_){if(t_){var u=$M;t_=!1,$M=null}else throw Error(_t(198));WM||(WM=!0,O6=u)}}function um(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function P$(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function Rk(i){if(um(i)!==i)throw Error(_t(188))}function Fse(i){var e=i.alternate;if(!e){if(e=um(i),e===null)throw Error(_t(188));return e!==i?null:i}for(var t=i,n=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){t=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return Rk(r),i;if(s===n)return Rk(r),e;s=s.sibling}throw Error(_t(188))}if(t.return!==n.return)t=r,n=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,n=s;break}if(a===n){o=!0,n=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,n=r;break}if(a===n){o=!0,n=s,t=r;break}a=a.sibling}if(!o)throw Error(_t(189))}}if(t.alternate!==n)throw Error(_t(190))}if(t.tag!==3)throw Error(_t(188));return t.stateNode.current===t?i:e}function B$(i){return i=Fse(i),i!==null?I$(i):null}function I$(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=I$(i);if(e!==null)return e;i=i.sibling}return null}var N$=Hl.unstable_scheduleCallback,Pk=Hl.unstable_cancelCallback,kse=Hl.unstable_shouldYield,Use=Hl.unstable_requestPaint,Kr=Hl.unstable_now,zse=Hl.unstable_getCurrentPriorityLevel,yD=Hl.unstable_ImmediatePriority,D$=Hl.unstable_UserBlockingPriority,XM=Hl.unstable_NormalPriority,Gse=Hl.unstable_LowPriority,L$=Hl.unstable_IdlePriority,EC=null,eh=null;function Hse(i){if(eh&&typeof eh.onCommitFiberRoot=="function")try{eh.onCommitFiberRoot(EC,i,void 0,(i.current.flags&128)===128)}catch{}}var yc=Math.clz32?Math.clz32:jse,qse=Math.log,Vse=Math.LN2;function jse(i){return i>>>=0,i===0?32:31-(qse(i)/Vse|0)|0}var Fw=64,kw=4194304;function z2(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function YM(i,e){var t=i.pendingLanes;if(t===0)return 0;var n=0,r=i.suspendedLanes,s=i.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?n=z2(a):(s&=o,s!==0&&(n=z2(s)))}else o=t&~r,o!==0?n=z2(o):s!==0&&(n=z2(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=n;0<e;)t=31-yc(e),r=1<<t,n|=i[t],e&=~r;return n}function $se(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wse(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,r=i.expirationTimes,s=i.pendingLanes;0<s;){var o=31-yc(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&n)&&(r[o]=$se(a,e)):l<=e&&(i.expiredLanes|=a),s&=~a}}function F6(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function O$(){var i=Fw;return Fw<<=1,!(Fw&4194240)&&(Fw=64),i}function W5(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function Wx(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-yc(e),i[e]=t}function Xse(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<t;){var r=31-yc(t),s=1<<r;e[r]=0,n[r]=-1,i[r]=-1,t&=~s}}function vD(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-yc(t),r=1<<n;r&e|i[n]&e&&(i[n]|=e),t&=~r}}var ki=0;function F$(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var k$,_D,U$,z$,G$,k6=!1,Uw=[],cp=null,hp=null,fp=null,F_=new Map,k_=new Map,Kd=[],Yse="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bk(i,e){switch(i){case"focusin":case"focusout":cp=null;break;case"dragenter":case"dragleave":hp=null;break;case"mouseover":case"mouseout":fp=null;break;case"pointerover":case"pointerout":F_.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":k_.delete(e.pointerId)}}function Fv(i,e,t,n,r,s){return i===null||i.nativeEvent!==s?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Yx(e),e!==null&&_D(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),i)}function Qse(i,e,t,n,r){switch(e){case"focusin":return cp=Fv(cp,i,e,t,n,r),!0;case"dragenter":return hp=Fv(hp,i,e,t,n,r),!0;case"mouseover":return fp=Fv(fp,i,e,t,n,r),!0;case"pointerover":var s=r.pointerId;return F_.set(s,Fv(F_.get(s)||null,i,e,t,n,r)),!0;case"gotpointercapture":return s=r.pointerId,k_.set(s,Fv(k_.get(s)||null,i,e,t,n,r)),!0}return!1}function H$(i){var e=s0(i.target);if(e!==null){var t=um(e);if(t!==null){if(e=t.tag,e===13){if(e=P$(t),e!==null){i.blockedOn=e,G$(i.priority,function(){U$(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function cM(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=U6(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);N6=n,t.target.dispatchEvent(n),N6=null}else return e=Yx(t),e!==null&&_D(e),i.blockedOn=t,!1;e.shift()}return!0}function Ik(i,e,t){cM(i)&&t.delete(e)}function Kse(){k6=!1,cp!==null&&cM(cp)&&(cp=null),hp!==null&&cM(hp)&&(hp=null),fp!==null&&cM(fp)&&(fp=null),F_.forEach(Ik),k_.forEach(Ik)}function kv(i,e){i.blockedOn===e&&(i.blockedOn=null,k6||(k6=!0,Hl.unstable_scheduleCallback(Hl.unstable_NormalPriority,Kse)))}function U_(i){function e(r){return kv(r,i)}if(0<Uw.length){kv(Uw[0],i);for(var t=1;t<Uw.length;t++){var n=Uw[t];n.blockedOn===i&&(n.blockedOn=null)}}for(cp!==null&&kv(cp,i),hp!==null&&kv(hp,i),fp!==null&&kv(fp,i),F_.forEach(e),k_.forEach(e),t=0;t<Kd.length;t++)n=Kd[t],n.blockedOn===i&&(n.blockedOn=null);for(;0<Kd.length&&(t=Kd[0],t.blockedOn===null);)H$(t),t.blockedOn===null&&Kd.shift()}var B1=Yf.ReactCurrentBatchConfig,QM=!0;function Jse(i,e,t,n){var r=ki,s=B1.transition;B1.transition=null;try{ki=1,xD(i,e,t,n)}finally{ki=r,B1.transition=s}}function Zse(i,e,t,n){var r=ki,s=B1.transition;B1.transition=null;try{ki=4,xD(i,e,t,n)}finally{ki=r,B1.transition=s}}function xD(i,e,t,n){if(QM){var r=U6(i,e,t,n);if(r===null)iR(i,e,n,KM,t),Bk(i,n);else if(Qse(r,i,e,t,n))n.stopPropagation();else if(Bk(i,n),e&4&&-1<Yse.indexOf(i)){for(;r!==null;){var s=Yx(r);if(s!==null&&k$(s),s=U6(i,e,t,n),s===null&&iR(i,e,n,KM,t),s===r)break;r=s}r!==null&&n.stopPropagation()}else iR(i,e,n,null,t)}}var KM=null;function U6(i,e,t,n){if(KM=null,i=gD(n),i=s0(i),i!==null)if(e=um(i),e===null)i=null;else if(t=e.tag,t===13){if(i=P$(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return KM=i,null}function q$(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zse()){case yD:return 1;case D$:return 4;case XM:case Gse:return 16;case L$:return 536870912;default:return 16}default:return 16}}var rp=null,bD=null,hM=null;function V$(){if(hM)return hM;var i,e=bD,t=e.length,n,r="value"in rp?rp.value:rp.textContent,s=r.length;for(i=0;i<t&&e[i]===r[i];i++);var o=t-i;for(n=1;n<=o&&e[t-n]===r[s-n];n++);return hM=r.slice(i,1<n?1-n:void 0)}function fM(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function zw(){return!0}function Nk(){return!1}function Yl(i){function e(t,n,r,s,o){this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in i)i.hasOwnProperty(a)&&(t=i[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zw:Nk,this.isPropagationStopped=Nk,this}return Pr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=zw)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=zw)},persist:function(){},isPersistent:zw}),e}var Uy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wD=Yl(Uy),Xx=Pr({},Uy,{view:0,detail:0}),eoe=Yl(Xx),X5,Y5,Uv,CC=Pr({},Xx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SD,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Uv&&(Uv&&i.type==="mousemove"?(X5=i.screenX-Uv.screenX,Y5=i.screenY-Uv.screenY):Y5=X5=0,Uv=i),X5)},movementY:function(i){return"movementY"in i?i.movementY:Y5}}),Dk=Yl(CC),toe=Pr({},CC,{dataTransfer:0}),noe=Yl(toe),ioe=Pr({},Xx,{relatedTarget:0}),Q5=Yl(ioe),roe=Pr({},Uy,{animationName:0,elapsedTime:0,pseudoElement:0}),soe=Yl(roe),ooe=Pr({},Uy,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),aoe=Yl(ooe),loe=Pr({},Uy,{data:0}),Lk=Yl(loe),uoe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},coe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hoe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function foe(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=hoe[i])?!!e[i]:!1}function SD(){return foe}var doe=Pr({},Xx,{key:function(i){if(i.key){var e=uoe[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=fM(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?coe[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SD,charCode:function(i){return i.type==="keypress"?fM(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?fM(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),poe=Yl(doe),Aoe=Pr({},CC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ok=Yl(Aoe),moe=Pr({},Xx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SD}),goe=Yl(moe),yoe=Pr({},Uy,{propertyName:0,elapsedTime:0,pseudoElement:0}),voe=Yl(yoe),_oe=Pr({},CC,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),xoe=Yl(_oe),boe=[9,13,27,32],MD=Pf&&"CompositionEvent"in window,n_=null;Pf&&"documentMode"in document&&(n_=document.documentMode);var woe=Pf&&"TextEvent"in window&&!n_,j$=Pf&&(!MD||n_&&8<n_&&11>=n_),Fk=" ",kk=!1;function $$(i,e){switch(i){case"keyup":return boe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W$(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Qg=!1;function Soe(i,e){switch(i){case"compositionend":return W$(e);case"keypress":return e.which!==32?null:(kk=!0,Fk);case"textInput":return i=e.data,i===Fk&&kk?null:i;default:return null}}function Moe(i,e){if(Qg)return i==="compositionend"||!MD&&$$(i,e)?(i=V$(),hM=bD=rp=null,Qg=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return j$&&e.locale!=="ko"?null:e.data;default:return null}}var Toe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uk(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!Toe[i.type]:e==="textarea"}function X$(i,e,t,n){M$(n),e=JM(e,"onChange"),0<e.length&&(t=new wD("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var i_=null,z_=null;function Eoe(i){sW(i,0)}function RC(i){var e=Zg(i);if(y$(e))return i}function Coe(i,e){if(i==="change")return e}var Y$=!1;if(Pf){var K5;if(Pf){var J5="oninput"in document;if(!J5){var zk=document.createElement("div");zk.setAttribute("oninput","return;"),J5=typeof zk.oninput=="function"}K5=J5}else K5=!1;Y$=K5&&(!document.documentMode||9<document.documentMode)}function Gk(){i_&&(i_.detachEvent("onpropertychange",Q$),z_=i_=null)}function Q$(i){if(i.propertyName==="value"&&RC(z_)){var e=[];X$(e,z_,i,gD(i)),R$(Eoe,e)}}function Roe(i,e,t){i==="focusin"?(Gk(),i_=e,z_=t,i_.attachEvent("onpropertychange",Q$)):i==="focusout"&&Gk()}function Poe(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return RC(z_)}function Boe(i,e){if(i==="click")return RC(e)}function Ioe(i,e){if(i==="input"||i==="change")return RC(e)}function Noe(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var _c=typeof Object.is=="function"?Object.is:Noe;function G_(i,e){if(_c(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var r=t[n];if(!x6.call(e,r)||!_c(i[r],e[r]))return!1}return!0}function Hk(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function qk(i,e){var t=Hk(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Hk(t)}}function K$(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?K$(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function J$(){for(var i=window,e=jM();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=jM(i.document)}return e}function TD(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Doe(i){var e=J$(),t=i.focusedElem,n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&K$(t.ownerDocument.documentElement,t)){if(n!==null&&TD(t)){if(e=n.start,i=n.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var r=t.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!i.extend&&s>n&&(r=n,n=s,s=r),r=qk(t,s);var o=qk(t,n);r&&o&&(i.rangeCount!==1||i.anchorNode!==r.node||i.anchorOffset!==r.offset||i.focusNode!==o.node||i.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),i.removeAllRanges(),s>n?(i.addRange(e),i.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Loe=Pf&&"documentMode"in document&&11>=document.documentMode,Kg=null,z6=null,r_=null,G6=!1;function Vk(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;G6||Kg==null||Kg!==jM(n)||(n=Kg,"selectionStart"in n&&TD(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),r_&&G_(r_,n)||(r_=n,n=JM(z6,"onSelect"),0<n.length&&(e=new wD("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=Kg)))}function Gw(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var Jg={animationend:Gw("Animation","AnimationEnd"),animationiteration:Gw("Animation","AnimationIteration"),animationstart:Gw("Animation","AnimationStart"),transitionend:Gw("Transition","TransitionEnd")},Z5={},Z$={};Pf&&(Z$=document.createElement("div").style,"AnimationEvent"in window||(delete Jg.animationend.animation,delete Jg.animationiteration.animation,delete Jg.animationstart.animation),"TransitionEvent"in window||delete Jg.transitionend.transition);function PC(i){if(Z5[i])return Z5[i];if(!Jg[i])return i;var e=Jg[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in Z$)return Z5[i]=e[t];return i}var eW=PC("animationend"),tW=PC("animationiteration"),nW=PC("animationstart"),iW=PC("transitionend"),rW=new Map,jk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gp(i,e){rW.set(i,e),lm(e,[i])}for(var eR=0;eR<jk.length;eR++){var tR=jk[eR],Ooe=tR.toLowerCase(),Foe=tR[0].toUpperCase()+tR.slice(1);Gp(Ooe,"on"+Foe)}Gp(eW,"onAnimationEnd");Gp(tW,"onAnimationIteration");Gp(nW,"onAnimationStart");Gp("dblclick","onDoubleClick");Gp("focusin","onFocus");Gp("focusout","onBlur");Gp(iW,"onTransitionEnd");Z1("onMouseEnter",["mouseout","mouseover"]);Z1("onMouseLeave",["mouseout","mouseover"]);Z1("onPointerEnter",["pointerout","pointerover"]);Z1("onPointerLeave",["pointerout","pointerover"]);lm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lm("onBeforeInput",["compositionend","keypress","textInput","paste"]);lm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var G2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),koe=new Set("cancel close invalid load scroll toggle".split(" ").concat(G2));function $k(i,e,t){var n=i.type||"unknown-event";i.currentTarget=t,Ose(n,e,void 0,i),i.currentTarget=null}function sW(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],r=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;$k(r,a,u),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;$k(r,a,u),s=l}}}if(WM)throw i=O6,WM=!1,O6=null,i}function tr(i,e){var t=e[$6];t===void 0&&(t=e[$6]=new Set);var n=i+"__bubble";t.has(n)||(oW(e,i,2,!1),t.add(n))}function nR(i,e,t){var n=0;e&&(n|=4),oW(t,i,n,e)}var Hw="_reactListening"+Math.random().toString(36).slice(2);function H_(i){if(!i[Hw]){i[Hw]=!0,d$.forEach(function(t){t!=="selectionchange"&&(koe.has(t)||nR(t,!1,i),nR(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[Hw]||(e[Hw]=!0,nR("selectionchange",!1,e))}}function oW(i,e,t,n){switch(q$(e)){case 1:var r=Jse;break;case 4:r=Zse;break;default:r=xD}t=r.bind(null,e,t,i),r=void 0,!L6||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?i.addEventListener(e,t,{capture:!0,passive:r}):i.addEventListener(e,t,!0):r!==void 0?i.addEventListener(e,t,{passive:r}):i.addEventListener(e,t,!1)}function iR(i,e,t,n,r){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=s0(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}R$(function(){var u=s,c=gD(t),h=[];e:{var f=rW.get(i);if(f!==void 0){var d=wD,p=i;switch(i){case"keypress":if(fM(t)===0)break e;case"keydown":case"keyup":d=poe;break;case"focusin":p="focus",d=Q5;break;case"focusout":p="blur",d=Q5;break;case"beforeblur":case"afterblur":d=Q5;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Dk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=noe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=goe;break;case eW:case tW:case nW:d=soe;break;case iW:d=voe;break;case"scroll":d=eoe;break;case"wheel":d=xoe;break;case"copy":case"cut":case"paste":d=aoe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Ok}var v=(e&4)!==0,b=!v&&i==="scroll",_=v?f!==null?f+"Capture":null:f;v=[];for(var M=u,E;M!==null;){E=M;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,_!==null&&(R=O_(M,_),R!=null&&v.push(q_(M,R,E)))),b)break;M=M.return}0<v.length&&(f=new d(f,p,null,t,c),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=i==="mouseover"||i==="pointerover",d=i==="mouseout"||i==="pointerout",f&&t!==N6&&(p=t.relatedTarget||t.fromElement)&&(s0(p)||p[Bf]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(p=t.relatedTarget||t.toElement,d=u,p=p?s0(p):null,p!==null&&(b=um(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=u),d!==p)){if(v=Dk,R="onMouseLeave",_="onMouseEnter",M="mouse",(i==="pointerout"||i==="pointerover")&&(v=Ok,R="onPointerLeave",_="onPointerEnter",M="pointer"),b=d==null?f:Zg(d),E=p==null?f:Zg(p),f=new v(R,M+"leave",d,t,c),f.target=b,f.relatedTarget=E,R=null,s0(c)===u&&(v=new v(_,M+"enter",p,t,c),v.target=E,v.relatedTarget=b,R=v),b=R,d&&p)t:{for(v=d,_=p,M=0,E=v;E;E=jm(E))M++;for(E=0,R=_;R;R=jm(R))E++;for(;0<M-E;)v=jm(v),M--;for(;0<E-M;)_=jm(_),E--;for(;M--;){if(v===_||_!==null&&v===_.alternate)break t;v=jm(v),_=jm(_)}v=null}else v=null;d!==null&&Wk(h,f,d,v,!1),p!==null&&b!==null&&Wk(h,b,p,v,!0)}}e:{if(f=u?Zg(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var L=Coe;else if(Uk(f))if(Y$)L=Ioe;else{L=Poe;var I=Roe}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(L=Boe);if(L&&(L=L(i,u))){X$(h,L,t,c);break e}I&&I(i,f,u),i==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&C6(f,"number",f.value)}switch(I=u?Zg(u):window,i){case"focusin":(Uk(I)||I.contentEditable==="true")&&(Kg=I,z6=u,r_=null);break;case"focusout":r_=z6=Kg=null;break;case"mousedown":G6=!0;break;case"contextmenu":case"mouseup":case"dragend":G6=!1,Vk(h,t,c);break;case"selectionchange":if(Loe)break;case"keydown":case"keyup":Vk(h,t,c)}var D;if(MD)e:{switch(i){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Qg?$$(i,t)&&(k="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(k="onCompositionStart");k&&(j$&&t.locale!=="ko"&&(Qg||k!=="onCompositionStart"?k==="onCompositionEnd"&&Qg&&(D=V$()):(rp=c,bD="value"in rp?rp.value:rp.textContent,Qg=!0)),I=JM(u,k),0<I.length&&(k=new Lk(k,i,null,t,c),h.push({event:k,listeners:I}),D?k.data=D:(D=W$(t),D!==null&&(k.data=D)))),(D=woe?Soe(i,t):Moe(i,t))&&(u=JM(u,"onBeforeInput"),0<u.length&&(c=new Lk("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=D))}sW(h,e)})}function q_(i,e,t){return{instance:i,listener:e,currentTarget:t}}function JM(i,e){for(var t=e+"Capture",n=[];i!==null;){var r=i,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=O_(i,t),s!=null&&n.unshift(q_(i,s,r)),s=O_(i,e),s!=null&&n.push(q_(i,s,r))),i=i.return}return n}function jm(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Wk(i,e,t,n,r){for(var s=e._reactName,o=[];t!==null&&t!==n;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,r?(l=O_(t,s),l!=null&&o.unshift(q_(t,l,a))):r||(l=O_(t,s),l!=null&&o.push(q_(t,l,a)))),t=t.return}o.length!==0&&i.push({event:e,listeners:o})}var Uoe=/\r\n?/g,zoe=/\u0000|\uFFFD/g;function Xk(i){return(typeof i=="string"?i:""+i).replace(Uoe,`
`).replace(zoe,"")}function qw(i,e,t){if(e=Xk(e),Xk(i)!==e&&t)throw Error(_t(425))}function ZM(){}var H6=null,q6=null;function V6(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var j6=typeof setTimeout=="function"?setTimeout:void 0,Goe=typeof clearTimeout=="function"?clearTimeout:void 0,Yk=typeof Promise=="function"?Promise:void 0,Hoe=typeof queueMicrotask=="function"?queueMicrotask:typeof Yk<"u"?function(i){return Yk.resolve(null).then(i).catch(qoe)}:j6;function qoe(i){setTimeout(function(){throw i})}function rR(i,e){var t=e,n=0;do{var r=t.nextSibling;if(i.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(n===0){i.removeChild(r),U_(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=r}while(t);U_(e)}function dp(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function Qk(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var zy=Math.random().toString(36).slice(2),Xc="__reactFiber$"+zy,V_="__reactProps$"+zy,Bf="__reactContainer$"+zy,$6="__reactEvents$"+zy,Voe="__reactListeners$"+zy,joe="__reactHandles$"+zy;function s0(i){var e=i[Xc];if(e)return e;for(var t=i.parentNode;t;){if(e=t[Bf]||t[Xc]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=Qk(i);i!==null;){if(t=i[Xc])return t;i=Qk(i)}return e}i=t,t=i.parentNode}return null}function Yx(i){return i=i[Xc]||i[Bf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Zg(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(_t(33))}function BC(i){return i[V_]||null}var W6=[],e1=-1;function Hp(i){return{current:i}}function sr(i){0>e1||(i.current=W6[e1],W6[e1]=null,e1--)}function Zi(i,e){e1++,W6[e1]=i.current,i.current=e}var bp={},Vo=Hp(bp),Xa=Hp(!1),L0=bp;function ey(i,e){var t=i.type.contextTypes;if(!t)return bp;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=r),r}function Ya(i){return i=i.childContextTypes,i!=null}function eT(){sr(Xa),sr(Vo)}function Kk(i,e,t){if(Vo.current!==bp)throw Error(_t(168));Zi(Vo,e),Zi(Xa,t)}function aW(i,e,t){var n=i.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(_t(108,Rse(i)||"Unknown",r));return Pr({},t,n)}function tT(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||bp,L0=Vo.current,Zi(Vo,i),Zi(Xa,Xa.current),!0}function Jk(i,e,t){var n=i.stateNode;if(!n)throw Error(_t(169));t?(i=aW(i,e,L0),n.__reactInternalMemoizedMergedChildContext=i,sr(Xa),sr(Vo),Zi(Vo,i)):sr(Xa),Zi(Xa,t)}var tf=null,IC=!1,sR=!1;function lW(i){tf===null?tf=[i]:tf.push(i)}function $oe(i){IC=!0,lW(i)}function qp(){if(!sR&&tf!==null){sR=!0;var i=0,e=ki;try{var t=tf;for(ki=1;i<t.length;i++){var n=t[i];do n=n(!0);while(n!==null)}tf=null,IC=!1}catch(r){throw tf!==null&&(tf=tf.slice(i+1)),N$(yD,qp),r}finally{ki=e,sR=!1}}return null}var t1=[],n1=0,nT=null,iT=0,_u=[],xu=0,O0=null,pf=1,Af="";function jA(i,e){t1[n1++]=iT,t1[n1++]=nT,nT=i,iT=e}function uW(i,e,t){_u[xu++]=pf,_u[xu++]=Af,_u[xu++]=O0,O0=i;var n=pf;i=Af;var r=32-yc(n)-1;n&=~(1<<r),t+=1;var s=32-yc(e)+r;if(30<s){var o=r-r%5;s=(n&(1<<o)-1).toString(32),n>>=o,r-=o,pf=1<<32-yc(e)+r|t<<r|n,Af=s+i}else pf=1<<s|t<<r|n,Af=i}function ED(i){i.return!==null&&(jA(i,1),uW(i,1,0))}function CD(i){for(;i===nT;)nT=t1[--n1],t1[n1]=null,iT=t1[--n1],t1[n1]=null;for(;i===O0;)O0=_u[--xu],_u[xu]=null,Af=_u[--xu],_u[xu]=null,pf=_u[--xu],_u[xu]=null}var kl=null,Ll=null,fr=!1,hc=null;function cW(i,e){var t=Su(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function Zk(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,kl=i,Ll=dp(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,kl=i,Ll=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=O0!==null?{id:pf,overflow:Af}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Su(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,kl=i,Ll=null,!0):!1;default:return!1}}function X6(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Y6(i){if(fr){var e=Ll;if(e){var t=e;if(!Zk(i,e)){if(X6(i))throw Error(_t(418));e=dp(t.nextSibling);var n=kl;e&&Zk(i,e)?cW(n,t):(i.flags=i.flags&-4097|2,fr=!1,kl=i)}}else{if(X6(i))throw Error(_t(418));i.flags=i.flags&-4097|2,fr=!1,kl=i}}}function e9(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;kl=i}function Vw(i){if(i!==kl)return!1;if(!fr)return e9(i),fr=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!V6(i.type,i.memoizedProps)),e&&(e=Ll)){if(X6(i))throw hW(),Error(_t(418));for(;e;)cW(i,e),e=dp(e.nextSibling)}if(e9(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_t(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){Ll=dp(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}Ll=null}}else Ll=kl?dp(i.stateNode.nextSibling):null;return!0}function hW(){for(var i=Ll;i;)i=dp(i.nextSibling)}function ty(){Ll=kl=null,fr=!1}function RD(i){hc===null?hc=[i]:hc.push(i)}var Woe=Yf.ReactCurrentBatchConfig;function zv(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(_t(309));var n=t.stateNode}if(!n)throw Error(_t(147,i));var r=n,s=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof i!="string")throw Error(_t(284));if(!t._owner)throw Error(_t(290,i))}return i}function jw(i,e){throw i=Object.prototype.toString.call(e),Error(_t(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function t9(i){var e=i._init;return e(i._payload)}function fW(i){function e(_,M){if(i){var E=_.deletions;E===null?(_.deletions=[M],_.flags|=16):E.push(M)}}function t(_,M){if(!i)return null;for(;M!==null;)e(_,M),M=M.sibling;return null}function n(_,M){for(_=new Map;M!==null;)M.key!==null?_.set(M.key,M):_.set(M.index,M),M=M.sibling;return _}function r(_,M){return _=gp(_,M),_.index=0,_.sibling=null,_}function s(_,M,E){return _.index=E,i?(E=_.alternate,E!==null?(E=E.index,E<M?(_.flags|=2,M):E):(_.flags|=2,M)):(_.flags|=1048576,M)}function o(_){return i&&_.alternate===null&&(_.flags|=2),_}function a(_,M,E,R){return M===null||M.tag!==6?(M=fR(E,_.mode,R),M.return=_,M):(M=r(M,E),M.return=_,M)}function l(_,M,E,R){var L=E.type;return L===Yg?c(_,M,E.props.children,R,E.key):M!==null&&(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===$d&&t9(L)===M.type)?(R=r(M,E.props),R.ref=zv(_,M,E),R.return=_,R):(R=vM(E.type,E.key,E.props,null,_.mode,R),R.ref=zv(_,M,E),R.return=_,R)}function u(_,M,E,R){return M===null||M.tag!==4||M.stateNode.containerInfo!==E.containerInfo||M.stateNode.implementation!==E.implementation?(M=dR(E,_.mode,R),M.return=_,M):(M=r(M,E.children||[]),M.return=_,M)}function c(_,M,E,R,L){return M===null||M.tag!==7?(M=v0(E,_.mode,R,L),M.return=_,M):(M=r(M,E),M.return=_,M)}function h(_,M,E){if(typeof M=="string"&&M!==""||typeof M=="number")return M=fR(""+M,_.mode,E),M.return=_,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Dw:return E=vM(M.type,M.key,M.props,null,_.mode,E),E.ref=zv(_,null,M),E.return=_,E;case Xg:return M=dR(M,_.mode,E),M.return=_,M;case $d:var R=M._init;return h(_,R(M._payload),E)}if(U2(M)||Lv(M))return M=v0(M,_.mode,E,null),M.return=_,M;jw(_,M)}return null}function f(_,M,E,R){var L=M!==null?M.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:a(_,M,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Dw:return E.key===L?l(_,M,E,R):null;case Xg:return E.key===L?u(_,M,E,R):null;case $d:return L=E._init,f(_,M,L(E._payload),R)}if(U2(E)||Lv(E))return L!==null?null:c(_,M,E,R,null);jw(_,E)}return null}function d(_,M,E,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(E)||null,a(M,_,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Dw:return _=_.get(R.key===null?E:R.key)||null,l(M,_,R,L);case Xg:return _=_.get(R.key===null?E:R.key)||null,u(M,_,R,L);case $d:var I=R._init;return d(_,M,E,I(R._payload),L)}if(U2(R)||Lv(R))return _=_.get(E)||null,c(M,_,R,L,null);jw(M,R)}return null}function p(_,M,E,R){for(var L=null,I=null,D=M,k=M=0,G=null;D!==null&&k<E.length;k++){D.index>k?(G=D,D=null):G=D.sibling;var O=f(_,D,E[k],R);if(O===null){D===null&&(D=G);break}i&&D&&O.alternate===null&&e(_,D),M=s(O,M,k),I===null?L=O:I.sibling=O,I=O,D=G}if(k===E.length)return t(_,D),fr&&jA(_,k),L;if(D===null){for(;k<E.length;k++)D=h(_,E[k],R),D!==null&&(M=s(D,M,k),I===null?L=D:I.sibling=D,I=D);return fr&&jA(_,k),L}for(D=n(_,D);k<E.length;k++)G=d(D,_,k,E[k],R),G!==null&&(i&&G.alternate!==null&&D.delete(G.key===null?k:G.key),M=s(G,M,k),I===null?L=G:I.sibling=G,I=G);return i&&D.forEach(function(U){return e(_,U)}),fr&&jA(_,k),L}function v(_,M,E,R){var L=Lv(E);if(typeof L!="function")throw Error(_t(150));if(E=L.call(E),E==null)throw Error(_t(151));for(var I=L=null,D=M,k=M=0,G=null,O=E.next();D!==null&&!O.done;k++,O=E.next()){D.index>k?(G=D,D=null):G=D.sibling;var U=f(_,D,O.value,R);if(U===null){D===null&&(D=G);break}i&&D&&U.alternate===null&&e(_,D),M=s(U,M,k),I===null?L=U:I.sibling=U,I=U,D=G}if(O.done)return t(_,D),fr&&jA(_,k),L;if(D===null){for(;!O.done;k++,O=E.next())O=h(_,O.value,R),O!==null&&(M=s(O,M,k),I===null?L=O:I.sibling=O,I=O);return fr&&jA(_,k),L}for(D=n(_,D);!O.done;k++,O=E.next())O=d(D,_,k,O.value,R),O!==null&&(i&&O.alternate!==null&&D.delete(O.key===null?k:O.key),M=s(O,M,k),I===null?L=O:I.sibling=O,I=O);return i&&D.forEach(function(Q){return e(_,Q)}),fr&&jA(_,k),L}function b(_,M,E,R){if(typeof E=="object"&&E!==null&&E.type===Yg&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Dw:e:{for(var L=E.key,I=M;I!==null;){if(I.key===L){if(L=E.type,L===Yg){if(I.tag===7){t(_,I.sibling),M=r(I,E.props.children),M.return=_,_=M;break e}}else if(I.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===$d&&t9(L)===I.type){t(_,I.sibling),M=r(I,E.props),M.ref=zv(_,I,E),M.return=_,_=M;break e}t(_,I);break}else e(_,I);I=I.sibling}E.type===Yg?(M=v0(E.props.children,_.mode,R,E.key),M.return=_,_=M):(R=vM(E.type,E.key,E.props,null,_.mode,R),R.ref=zv(_,M,E),R.return=_,_=R)}return o(_);case Xg:e:{for(I=E.key;M!==null;){if(M.key===I)if(M.tag===4&&M.stateNode.containerInfo===E.containerInfo&&M.stateNode.implementation===E.implementation){t(_,M.sibling),M=r(M,E.children||[]),M.return=_,_=M;break e}else{t(_,M);break}else e(_,M);M=M.sibling}M=dR(E,_.mode,R),M.return=_,_=M}return o(_);case $d:return I=E._init,b(_,M,I(E._payload),R)}if(U2(E))return p(_,M,E,R);if(Lv(E))return v(_,M,E,R);jw(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,M!==null&&M.tag===6?(t(_,M.sibling),M=r(M,E),M.return=_,_=M):(t(_,M),M=fR(E,_.mode,R),M.return=_,_=M),o(_)):t(_,M)}return b}var ny=fW(!0),dW=fW(!1),rT=Hp(null),sT=null,i1=null,PD=null;function BD(){PD=i1=sT=null}function ID(i){var e=rT.current;sr(rT),i._currentValue=e}function Q6(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function I1(i,e){sT=i,PD=i1=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Ha=!0),i.firstContext=null)}function Nu(i){var e=i._currentValue;if(PD!==i)if(i={context:i,memoizedValue:e,next:null},i1===null){if(sT===null)throw Error(_t(308));i1=i,sT.dependencies={lanes:0,firstContext:i}}else i1=i1.next=i;return e}var o0=null;function ND(i){o0===null?o0=[i]:o0.push(i)}function pW(i,e,t,n){var r=e.interleaved;return r===null?(t.next=t,ND(e)):(t.next=r.next,r.next=t),e.interleaved=t,If(i,n)}function If(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var Wd=!1;function DD(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AW(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function vf(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function pp(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,_i&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,If(i,t)}return r=n.interleaved,r===null?(e.next=e,ND(n)):(e.next=r.next,r.next=e),n.interleaved=e,If(i,t)}function dM(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,vD(i,t)}}function n9(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function oT(i,e,t,n){var r=i.updateQueue;Wd=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=i.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,d=a.eventTime;if((n&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=i,v=a;switch(f=e,d=t,v.tag){case 1:if(p=v.payload,typeof p=="function"){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,f=typeof p=="function"?p.call(d,h,f):p,f==null)break e;h=Pr({},h,f);break e;case 2:Wd=!0}}a.callback!==null&&a.lane!==0&&(i.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=d,l=h):c=c.next=d,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(c===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);k0|=o,i.lanes=o,i.memoizedState=h}}function i9(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var n=i[e],r=n.callback;if(r!==null){if(n.callback=null,n=t,typeof r!="function")throw Error(_t(191,r));r.call(n)}}}var Qx={},th=Hp(Qx),j_=Hp(Qx),$_=Hp(Qx);function a0(i){if(i===Qx)throw Error(_t(174));return i}function LD(i,e){switch(Zi($_,e),Zi(j_,i),Zi(th,Qx),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:P6(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=P6(e,i)}sr(th),Zi(th,e)}function iy(){sr(th),sr(j_),sr($_)}function mW(i){a0($_.current);var e=a0(th.current),t=P6(e,i.type);e!==t&&(Zi(j_,i),Zi(th,t))}function OD(i){j_.current===i&&(sr(th),sr(j_))}var _r=Hp(0);function aT(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var oR=[];function FD(){for(var i=0;i<oR.length;i++)oR[i]._workInProgressVersionPrimary=null;oR.length=0}var pM=Yf.ReactCurrentDispatcher,aR=Yf.ReactCurrentBatchConfig,F0=0,Cr=null,Ms=null,zs=null,lT=!1,s_=!1,W_=0,Xoe=0;function wo(){throw Error(_t(321))}function kD(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!_c(i[t],e[t]))return!1;return!0}function UD(i,e,t,n,r,s){if(F0=s,Cr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pM.current=i===null||i.memoizedState===null?Joe:Zoe,i=t(n,r),s_){s=0;do{if(s_=!1,W_=0,25<=s)throw Error(_t(301));s+=1,zs=Ms=null,e.updateQueue=null,pM.current=eae,i=t(n,r)}while(s_)}if(pM.current=uT,e=Ms!==null&&Ms.next!==null,F0=0,zs=Ms=Cr=null,lT=!1,e)throw Error(_t(300));return i}function zD(){var i=W_!==0;return W_=0,i}function qc(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zs===null?Cr.memoizedState=zs=i:zs=zs.next=i,zs}function Du(){if(Ms===null){var i=Cr.alternate;i=i!==null?i.memoizedState:null}else i=Ms.next;var e=zs===null?Cr.memoizedState:zs.next;if(e!==null)zs=e,Ms=i;else{if(i===null)throw Error(_t(310));Ms=i,i={memoizedState:Ms.memoizedState,baseState:Ms.baseState,baseQueue:Ms.baseQueue,queue:Ms.queue,next:null},zs===null?Cr.memoizedState=zs=i:zs=zs.next=i}return zs}function X_(i,e){return typeof e=="function"?e(i):e}function lR(i){var e=Du(),t=e.queue;if(t===null)throw Error(_t(311));t.lastRenderedReducer=i;var n=Ms,r=n.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}n.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,n=n.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((F0&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:i(n,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Cr.lanes|=c,k0|=c}u=u.next}while(u!==null&&u!==s);l===null?o=n:l.next=a,_c(n,e.memoizedState)||(Ha=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,t.lastRenderedState=n}if(i=t.interleaved,i!==null){r=i;do s=r.lane,Cr.lanes|=s,k0|=s,r=r.next;while(r!==i)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function uR(i){var e=Du(),t=e.queue;if(t===null)throw Error(_t(311));t.lastRenderedReducer=i;var n=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=i(s,o.action),o=o.next;while(o!==r);_c(s,e.memoizedState)||(Ha=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function gW(){}function yW(i,e){var t=Cr,n=Du(),r=e(),s=!_c(n.memoizedState,r);if(s&&(n.memoizedState=r,Ha=!0),n=n.queue,GD(xW.bind(null,t,n,i),[i]),n.getSnapshot!==e||s||zs!==null&&zs.memoizedState.tag&1){if(t.flags|=2048,Y_(9,_W.bind(null,t,n,r,e),void 0,null),Vs===null)throw Error(_t(349));F0&30||vW(t,e,r)}return r}function vW(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=Cr.updateQueue,e===null?(e={lastEffect:null,stores:null},Cr.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function _W(i,e,t,n){e.value=t,e.getSnapshot=n,bW(e)&&wW(i)}function xW(i,e,t){return t(function(){bW(e)&&wW(i)})}function bW(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!_c(i,t)}catch{return!0}}function wW(i){var e=If(i,1);e!==null&&vc(e,i,1,-1)}function r9(i){var e=qc();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:X_,lastRenderedState:i},e.queue=i,i=i.dispatch=Koe.bind(null,Cr,i),[e.memoizedState,i]}function Y_(i,e,t,n){return i={tag:i,create:e,destroy:t,deps:n,next:null},e=Cr.updateQueue,e===null?(e={lastEffect:null,stores:null},Cr.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i)),i}function SW(){return Du().memoizedState}function AM(i,e,t,n){var r=qc();Cr.flags|=i,r.memoizedState=Y_(1|e,t,void 0,n===void 0?null:n)}function NC(i,e,t,n){var r=Du();n=n===void 0?null:n;var s=void 0;if(Ms!==null){var o=Ms.memoizedState;if(s=o.destroy,n!==null&&kD(n,o.deps)){r.memoizedState=Y_(e,t,s,n);return}}Cr.flags|=i,r.memoizedState=Y_(1|e,t,s,n)}function s9(i,e){return AM(8390656,8,i,e)}function GD(i,e){return NC(2048,8,i,e)}function MW(i,e){return NC(4,2,i,e)}function TW(i,e){return NC(4,4,i,e)}function EW(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function CW(i,e,t){return t=t!=null?t.concat([i]):null,NC(4,4,EW.bind(null,e,i),t)}function HD(){}function RW(i,e){var t=Du();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&kD(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function PW(i,e){var t=Du();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&kD(e,n[1])?n[0]:(i=i(),t.memoizedState=[i,e],i)}function BW(i,e,t){return F0&21?(_c(t,e)||(t=O$(),Cr.lanes|=t,k0|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Ha=!0),i.memoizedState=t)}function Yoe(i,e){var t=ki;ki=t!==0&&4>t?t:4,i(!0);var n=aR.transition;aR.transition={};try{i(!1),e()}finally{ki=t,aR.transition=n}}function IW(){return Du().memoizedState}function Qoe(i,e,t){var n=mp(i);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},NW(i))DW(e,t);else if(t=pW(i,e,t,n),t!==null){var r=xa();vc(t,i,n,r),LW(t,e,n)}}function Koe(i,e,t){var n=mp(i),r={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(NW(i))DW(e,r);else{var s=i.alternate;if(i.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,_c(a,o)){var l=e.interleaved;l===null?(r.next=r,ND(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=pW(i,e,r,n),t!==null&&(r=xa(),vc(t,i,n,r),LW(t,e,n))}}function NW(i){var e=i.alternate;return i===Cr||e!==null&&e===Cr}function DW(i,e){s_=lT=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function LW(i,e,t){if(t&4194240){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,vD(i,t)}}var uT={readContext:Nu,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},Joe={readContext:Nu,useCallback:function(i,e){return qc().memoizedState=[i,e===void 0?null:e],i},useContext:Nu,useEffect:s9,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,AM(4194308,4,EW.bind(null,e,i),t)},useLayoutEffect:function(i,e){return AM(4194308,4,i,e)},useInsertionEffect:function(i,e){return AM(4,2,i,e)},useMemo:function(i,e){var t=qc();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var n=qc();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},n.queue=i,i=i.dispatch=Qoe.bind(null,Cr,i),[n.memoizedState,i]},useRef:function(i){var e=qc();return i={current:i},e.memoizedState=i},useState:r9,useDebugValue:HD,useDeferredValue:function(i){return qc().memoizedState=i},useTransition:function(){var i=r9(!1),e=i[0];return i=Yoe.bind(null,i[1]),qc().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var n=Cr,r=qc();if(fr){if(t===void 0)throw Error(_t(407));t=t()}else{if(t=e(),Vs===null)throw Error(_t(349));F0&30||vW(n,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,s9(xW.bind(null,n,s,i),[i]),n.flags|=2048,Y_(9,_W.bind(null,n,s,t,e),void 0,null),t},useId:function(){var i=qc(),e=Vs.identifierPrefix;if(fr){var t=Af,n=pf;t=(n&~(1<<32-yc(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=W_++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Xoe++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Zoe={readContext:Nu,useCallback:RW,useContext:Nu,useEffect:GD,useImperativeHandle:CW,useInsertionEffect:MW,useLayoutEffect:TW,useMemo:PW,useReducer:lR,useRef:SW,useState:function(){return lR(X_)},useDebugValue:HD,useDeferredValue:function(i){var e=Du();return BW(e,Ms.memoizedState,i)},useTransition:function(){var i=lR(X_)[0],e=Du().memoizedState;return[i,e]},useMutableSource:gW,useSyncExternalStore:yW,useId:IW,unstable_isNewReconciler:!1},eae={readContext:Nu,useCallback:RW,useContext:Nu,useEffect:GD,useImperativeHandle:CW,useInsertionEffect:MW,useLayoutEffect:TW,useMemo:PW,useReducer:uR,useRef:SW,useState:function(){return uR(X_)},useDebugValue:HD,useDeferredValue:function(i){var e=Du();return Ms===null?e.memoizedState=i:BW(e,Ms.memoizedState,i)},useTransition:function(){var i=uR(X_)[0],e=Du().memoizedState;return[i,e]},useMutableSource:gW,useSyncExternalStore:yW,useId:IW,unstable_isNewReconciler:!1};function lc(i,e){if(i&&i.defaultProps){e=Pr({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function K6(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:Pr({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var DC={isMounted:function(i){return(i=i._reactInternals)?um(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var n=xa(),r=mp(i),s=vf(n,r);s.payload=e,t!=null&&(s.callback=t),e=pp(i,s,r),e!==null&&(vc(e,i,r,n),dM(e,i,r))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=xa(),r=mp(i),s=vf(n,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=pp(i,s,r),e!==null&&(vc(e,i,r,n),dM(e,i,r))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=xa(),n=mp(i),r=vf(t,n);r.tag=2,e!=null&&(r.callback=e),e=pp(i,r,n),e!==null&&(vc(e,i,n,t),dM(e,i,n))}};function o9(i,e,t,n,r,s,o){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!G_(t,n)||!G_(r,s):!0}function OW(i,e,t){var n=!1,r=bp,s=e.contextType;return typeof s=="object"&&s!==null?s=Nu(s):(r=Ya(e)?L0:Vo.current,n=e.contextTypes,s=(n=n!=null)?ey(i,r):bp),e=new e(t,s),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=DC,i.stateNode=e,e._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=s),e}function a9(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&DC.enqueueReplaceState(e,e.state,null)}function J6(i,e,t,n){var r=i.stateNode;r.props=t,r.state=i.memoizedState,r.refs={},DD(i);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Nu(s):(s=Ya(e)?L0:Vo.current,r.context=ey(i,s)),r.state=i.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(K6(i,e,s,t),r.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&DC.enqueueReplaceState(r,r.state,null),oT(i,t,r,n),r.state=i.memoizedState),typeof r.componentDidMount=="function"&&(i.flags|=4194308)}function ry(i,e){try{var t="",n=e;do t+=Cse(n),n=n.return;while(n);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:i,source:e,stack:r,digest:null}}function cR(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function Z6(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var tae=typeof WeakMap=="function"?WeakMap:Map;function FW(i,e,t){t=vf(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){hT||(hT=!0,uB=n),Z6(i,e)},t}function kW(i,e,t){t=vf(-1,t),t.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;t.payload=function(){return n(r)},t.callback=function(){Z6(i,e)}}var s=i.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Z6(i,e),typeof n!="function"&&(Ap===null?Ap=new Set([this]):Ap.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function l9(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new tae;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(t)||(r.add(t),i=Aae.bind(null,i,e,t),e.then(i,i))}function u9(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function c9(i,e,t,n,r){return i.mode&1?(i.flags|=65536,i.lanes=r,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=vf(-1,1),e.tag=2,pp(t,e,1))),t.lanes|=1),i)}var nae=Yf.ReactCurrentOwner,Ha=!1;function aa(i,e,t,n){e.child=i===null?dW(e,null,t,n):ny(e,i.child,t,n)}function h9(i,e,t,n,r){t=t.render;var s=e.ref;return I1(e,r),n=UD(i,e,t,n,s,r),t=zD(),i!==null&&!Ha?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Nf(i,e,r)):(fr&&t&&ED(e),e.flags|=1,aa(i,e,n,r),e.child)}function f9(i,e,t,n,r){if(i===null){var s=t.type;return typeof s=="function"&&!QD(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,UW(i,e,s,n,r)):(i=vM(t.type,null,n,e,e.mode,r),i.ref=e.ref,i.return=e,e.child=i)}if(s=i.child,!(i.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:G_,t(o,n)&&i.ref===e.ref)return Nf(i,e,r)}return e.flags|=1,i=gp(s,n),i.ref=e.ref,i.return=e,e.child=i}function UW(i,e,t,n,r){if(i!==null){var s=i.memoizedProps;if(G_(s,n)&&i.ref===e.ref)if(Ha=!1,e.pendingProps=n=s,(i.lanes&r)!==0)i.flags&131072&&(Ha=!0);else return e.lanes=i.lanes,Nf(i,e,r)}return eB(i,e,t,n,r)}function zW(i,e,t){var n=e.pendingProps,r=n.children,s=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zi(s1,Tl),Tl|=t;else{if(!(t&1073741824))return i=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,Zi(s1,Tl),Tl|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,Zi(s1,Tl),Tl|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,Zi(s1,Tl),Tl|=n;return aa(i,e,r,t),e.child}function GW(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function eB(i,e,t,n,r){var s=Ya(t)?L0:Vo.current;return s=ey(e,s),I1(e,r),t=UD(i,e,t,n,s,r),n=zD(),i!==null&&!Ha?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Nf(i,e,r)):(fr&&n&&ED(e),e.flags|=1,aa(i,e,t,r),e.child)}function d9(i,e,t,n,r){if(Ya(t)){var s=!0;tT(e)}else s=!1;if(I1(e,r),e.stateNode===null)mM(i,e),OW(e,t,n),J6(e,t,n,r),n=!0;else if(i===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Nu(u):(u=Ya(t)?L0:Vo.current,u=ey(e,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&a9(e,o,n,u),Wd=!1;var f=e.memoizedState;o.state=f,oT(e,n,o,r),l=e.memoizedState,a!==n||f!==l||Xa.current||Wd?(typeof c=="function"&&(K6(e,t,c,n),l=e.memoizedState),(a=Wd||o9(e,t,a,n,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,AW(i,e),a=e.memoizedProps,u=e.type===e.elementType?a:lc(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Nu(l):(l=Ya(t)?L0:Vo.current,l=ey(e,l));var d=t.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&a9(e,o,n,l),Wd=!1,f=e.memoizedState,o.state=f,oT(e,n,o,r);var p=e.memoizedState;a!==h||f!==p||Xa.current||Wd?(typeof d=="function"&&(K6(e,t,d,n),p=e.memoizedState),(u=Wd||o9(e,t,u,n,f,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===i.memoizedProps&&f===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&f===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===i.memoizedProps&&f===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&f===i.memoizedState||(e.flags|=1024),n=!1)}return tB(i,e,t,n,s,r)}function tB(i,e,t,n,r,s){GW(i,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&Jk(e,t,!1),Nf(i,e,s);n=e.stateNode,nae.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,i!==null&&o?(e.child=ny(e,i.child,null,s),e.child=ny(e,null,a,s)):aa(i,e,a,s),e.memoizedState=n.state,r&&Jk(e,t,!0),e.child}function HW(i){var e=i.stateNode;e.pendingContext?Kk(i,e.pendingContext,e.pendingContext!==e.context):e.context&&Kk(i,e.context,!1),LD(i,e.containerInfo)}function p9(i,e,t,n,r){return ty(),RD(r),e.flags|=256,aa(i,e,t,n),e.child}var nB={dehydrated:null,treeContext:null,retryLane:0};function iB(i){return{baseLanes:i,cachePool:null,transitions:null}}function qW(i,e,t){var n=e.pendingProps,r=_r.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=i!==null&&i.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(r|=1),Zi(_r,r&1),i===null)return Y6(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,i=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=FC(o,n,0,null),i=v0(i,n,t,null),s.return=e,i.return=e,s.sibling=i,e.child=s,e.child.memoizedState=iB(t),e.memoizedState=nB,i):qD(e,o));if(r=i.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return iae(i,e,o,n,a,r,t);if(s){s=n.fallback,o=e.mode,r=i.child,a=r.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=gp(r,l),n.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=gp(a,s):(s=v0(s,o,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=i.child.memoizedState,o=o===null?iB(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=i.childLanes&~t,e.memoizedState=nB,n}return s=i.child,i=s.sibling,n=gp(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=n,e.memoizedState=null,n}function qD(i,e){return e=FC({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function $w(i,e,t,n){return n!==null&&RD(n),ny(e,i.child,null,t),i=qD(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function iae(i,e,t,n,r,s,o){if(t)return e.flags&256?(e.flags&=-257,n=cR(Error(_t(422))),$w(i,e,o,n)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(s=n.fallback,r=e.mode,n=FC({mode:"visible",children:n.children},r,0,null),s=v0(s,r,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&ny(e,i.child,null,o),e.child.memoizedState=iB(o),e.memoizedState=nB,s);if(!(e.mode&1))return $w(i,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(_t(419)),n=cR(s,n,void 0),$w(i,e,o,n)}if(a=(o&i.childLanes)!==0,Ha||a){if(n=Vs,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,If(i,r),vc(n,i,r,-1))}return YD(),n=cR(Error(_t(421))),$w(i,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=i.child,e=mae.bind(null,i),r._reactRetry=e,null):(i=s.treeContext,Ll=dp(r.nextSibling),kl=e,fr=!0,hc=null,i!==null&&(_u[xu++]=pf,_u[xu++]=Af,_u[xu++]=O0,pf=i.id,Af=i.overflow,O0=e),e=qD(e,n.children),e.flags|=4096,e)}function A9(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),Q6(i.return,e,t)}function hR(i,e,t,n,r){var s=i.memoizedState;s===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=r)}function VW(i,e,t){var n=e.pendingProps,r=n.revealOrder,s=n.tail;if(aa(i,e,n.children,t),n=_r.current,n&2)n=n&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&A9(i,t,e);else if(i.tag===19)A9(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(Zi(_r,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)i=t.alternate,i!==null&&aT(i)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),hR(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(i=r.alternate,i!==null&&aT(i)===null){e.child=r;break}i=r.sibling,r.sibling=t,t=r,r=i}hR(e,!0,t,null,s);break;case"together":hR(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mM(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Nf(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),k0|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(_t(153));if(e.child!==null){for(i=e.child,t=gp(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=gp(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function rae(i,e,t){switch(e.tag){case 3:HW(e),ty();break;case 5:mW(e);break;case 1:Ya(e.type)&&tT(e);break;case 4:LD(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;Zi(rT,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Zi(_r,_r.current&1),e.flags|=128,null):t&e.child.childLanes?qW(i,e,t):(Zi(_r,_r.current&1),i=Nf(i,e,t),i!==null?i.sibling:null);Zi(_r,_r.current&1);break;case 19:if(n=(t&e.childLanes)!==0,i.flags&128){if(n)return VW(i,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Zi(_r,_r.current),n)break;return null;case 22:case 23:return e.lanes=0,zW(i,e,t)}return Nf(i,e,t)}var jW,rB,$W,WW;jW=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};rB=function(){};$W=function(i,e,t,n){var r=i.memoizedProps;if(r!==n){i=e.stateNode,a0(th.current);var s=null;switch(t){case"input":r=T6(i,r),n=T6(i,n),s=[];break;case"select":r=Pr({},r,{value:void 0}),n=Pr({},n,{value:void 0}),s=[];break;case"textarea":r=R6(i,r),n=R6(i,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=ZM)}B6(t,n);var o;t=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(D_.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(a=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(D_.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&tr("scroll",i),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};WW=function(i,e,t,n){t!==n&&(e.flags|=4)};function Gv(i,e){if(!fr)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function So(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=i,r=r.sibling;else for(r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=i,r=r.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function sae(i,e,t){var n=e.pendingProps;switch(CD(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return So(e),null;case 1:return Ya(e.type)&&eT(),So(e),null;case 3:return n=e.stateNode,iy(),sr(Xa),sr(Vo),FD(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(Vw(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hc!==null&&(fB(hc),hc=null))),rB(i,e),So(e),null;case 5:OD(e);var r=a0($_.current);if(t=e.type,i!==null&&e.stateNode!=null)$W(i,e,t,n,r),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(_t(166));return So(e),null}if(i=a0(th.current),Vw(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[Xc]=e,n[V_]=s,i=(e.mode&1)!==0,t){case"dialog":tr("cancel",n),tr("close",n);break;case"iframe":case"object":case"embed":tr("load",n);break;case"video":case"audio":for(r=0;r<G2.length;r++)tr(G2[r],n);break;case"source":tr("error",n);break;case"img":case"image":case"link":tr("error",n),tr("load",n);break;case"details":tr("toggle",n);break;case"input":Sk(n,s),tr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},tr("invalid",n);break;case"textarea":Tk(n,s),tr("invalid",n)}B6(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&qw(n.textContent,a,i),r=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&qw(n.textContent,a,i),r=["children",""+a]):D_.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tr("scroll",n)}switch(t){case"input":Lw(n),Mk(n,s,!0);break;case"textarea":Lw(n),Ek(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=ZM)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=x$(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=o.createElement(t,{is:n.is}):(i=o.createElement(t),t==="select"&&(o=i,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):i=o.createElementNS(i,t),i[Xc]=e,i[V_]=n,jW(i,e,!1,!1),e.stateNode=i;e:{switch(o=I6(t,n),t){case"dialog":tr("cancel",i),tr("close",i),r=n;break;case"iframe":case"object":case"embed":tr("load",i),r=n;break;case"video":case"audio":for(r=0;r<G2.length;r++)tr(G2[r],i);r=n;break;case"source":tr("error",i),r=n;break;case"img":case"image":case"link":tr("error",i),tr("load",i),r=n;break;case"details":tr("toggle",i),r=n;break;case"input":Sk(i,n),r=T6(i,n),tr("invalid",i);break;case"option":r=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},r=Pr({},n,{value:void 0}),tr("invalid",i);break;case"textarea":Tk(i,n),r=R6(i,n),tr("invalid",i);break;default:r=n}B6(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?S$(i,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&b$(i,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&L_(i,l):typeof l=="number"&&L_(i,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(D_.hasOwnProperty(s)?l!=null&&s==="onScroll"&&tr("scroll",i):l!=null&&dD(i,s,l,o))}switch(t){case"input":Lw(i),Mk(i,n,!1);break;case"textarea":Lw(i),Ek(i);break;case"option":n.value!=null&&i.setAttribute("value",""+xp(n.value));break;case"select":i.multiple=!!n.multiple,s=n.value,s!=null?C1(i,!!n.multiple,s,!1):n.defaultValue!=null&&C1(i,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(i.onclick=ZM)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return So(e),null;case 6:if(i&&e.stateNode!=null)WW(i,e,i.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(_t(166));if(t=a0($_.current),a0(th.current),Vw(e)){if(n=e.stateNode,t=e.memoizedProps,n[Xc]=e,(s=n.nodeValue!==t)&&(i=kl,i!==null))switch(i.tag){case 3:qw(n.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&qw(n.nodeValue,t,(i.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Xc]=e,e.stateNode=n}return So(e),null;case 13:if(sr(_r),n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(fr&&Ll!==null&&e.mode&1&&!(e.flags&128))hW(),ty(),e.flags|=98560,s=!1;else if(s=Vw(e),n!==null&&n.dehydrated!==null){if(i===null){if(!s)throw Error(_t(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(_t(317));s[Xc]=e}else ty(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;So(e),s=!1}else hc!==null&&(fB(hc),hc=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(i===null||_r.current&1?Ts===0&&(Ts=3):YD())),e.updateQueue!==null&&(e.flags|=4),So(e),null);case 4:return iy(),rB(i,e),i===null&&H_(e.stateNode.containerInfo),So(e),null;case 10:return ID(e.type._context),So(e),null;case 17:return Ya(e.type)&&eT(),So(e),null;case 19:if(sr(_r),s=e.memoizedState,s===null)return So(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Gv(s,!1);else{if(Ts!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(o=aT(i),o!==null){for(e.flags|=128,Gv(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,i=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return Zi(_r,_r.current&1|2),e.child}i=i.sibling}s.tail!==null&&Kr()>sy&&(e.flags|=128,n=!0,Gv(s,!1),e.lanes=4194304)}else{if(!n)if(i=aT(o),i!==null){if(e.flags|=128,n=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Gv(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!fr)return So(e),null}else 2*Kr()-s.renderingStartTime>sy&&t!==1073741824&&(e.flags|=128,n=!0,Gv(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Kr(),e.sibling=null,t=_r.current,Zi(_r,n?t&1|2:t&1),e):(So(e),null);case 22:case 23:return XD(),n=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Tl&1073741824&&(So(e),e.subtreeFlags&6&&(e.flags|=8192)):So(e),null;case 24:return null;case 25:return null}throw Error(_t(156,e.tag))}function oae(i,e){switch(CD(e),e.tag){case 1:return Ya(e.type)&&eT(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return iy(),sr(Xa),sr(Vo),FD(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return OD(e),null;case 13:if(sr(_r),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(_t(340));ty()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return sr(_r),null;case 4:return iy(),null;case 10:return ID(e.type._context),null;case 22:case 23:return XD(),null;case 24:return null;default:return null}}var Ww=!1,Do=!1,aae=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function r1(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Fr(i,e,n)}else t.current=null}function sB(i,e,t){try{t()}catch(n){Fr(i,e,n)}}var m9=!1;function lae(i,e){if(H6=QM,i=J$(),TD(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=i,f=null;t:for(;;){for(var d;h!==t||r!==0&&h.nodeType!==3||(a=o+r),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===i)break t;if(f===t&&++u===r&&(a=o),f===s&&++c===n&&(l=o),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(q6={focusedElem:i,selectionRange:t},QM=!1,Zt=e;Zt!==null;)if(e=Zt,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,Zt=i;else for(;Zt!==null;){e=Zt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,b=p.memoizedState,_=e.stateNode,M=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:lc(e.type,v),b);_.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_t(163))}}catch(R){Fr(e,e.return,R)}if(i=e.sibling,i!==null){i.return=e.return,Zt=i;break}Zt=e.return}return p=m9,m9=!1,p}function o_(i,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&i)===i){var s=r.destroy;r.destroy=void 0,s!==void 0&&sB(e,t,s)}r=r.next}while(r!==n)}}function LC(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function oB(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function XW(i){var e=i.alternate;e!==null&&(i.alternate=null,XW(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Xc],delete e[V_],delete e[$6],delete e[Voe],delete e[joe])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function YW(i){return i.tag===5||i.tag===3||i.tag===4}function g9(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||YW(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function aB(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=ZM));else if(n!==4&&(i=i.child,i!==null))for(aB(i,e,t),i=i.sibling;i!==null;)aB(i,e,t),i=i.sibling}function lB(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(lB(i,e,t),i=i.sibling;i!==null;)lB(i,e,t),i=i.sibling}var no=null,cc=!1;function wd(i,e,t){for(t=t.child;t!==null;)QW(i,e,t),t=t.sibling}function QW(i,e,t){if(eh&&typeof eh.onCommitFiberUnmount=="function")try{eh.onCommitFiberUnmount(EC,t)}catch{}switch(t.tag){case 5:Do||r1(t,e);case 6:var n=no,r=cc;no=null,wd(i,e,t),no=n,cc=r,no!==null&&(cc?(i=no,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):no.removeChild(t.stateNode));break;case 18:no!==null&&(cc?(i=no,t=t.stateNode,i.nodeType===8?rR(i.parentNode,t):i.nodeType===1&&rR(i,t),U_(i)):rR(no,t.stateNode));break;case 4:n=no,r=cc,no=t.stateNode.containerInfo,cc=!0,wd(i,e,t),no=n,cc=r;break;case 0:case 11:case 14:case 15:if(!Do&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&sB(t,e,o),r=r.next}while(r!==n)}wd(i,e,t);break;case 1:if(!Do&&(r1(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){Fr(t,e,a)}wd(i,e,t);break;case 21:wd(i,e,t);break;case 22:t.mode&1?(Do=(n=Do)||t.memoizedState!==null,wd(i,e,t),Do=n):wd(i,e,t);break;default:wd(i,e,t)}}function y9(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new aae),e.forEach(function(n){var r=gae.bind(null,i,n);t.has(n)||(t.add(n),n.then(r,r))})}}function Wu(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];try{var s=i,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:no=a.stateNode,cc=!1;break e;case 3:no=a.stateNode.containerInfo,cc=!0;break e;case 4:no=a.stateNode.containerInfo,cc=!0;break e}a=a.return}if(no===null)throw Error(_t(160));QW(s,o,r),no=null,cc=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Fr(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)KW(e,i),e=e.sibling}function KW(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Wu(e,i),Uc(i),n&4){try{o_(3,i,i.return),LC(3,i)}catch(v){Fr(i,i.return,v)}try{o_(5,i,i.return)}catch(v){Fr(i,i.return,v)}}break;case 1:Wu(e,i),Uc(i),n&512&&t!==null&&r1(t,t.return);break;case 5:if(Wu(e,i),Uc(i),n&512&&t!==null&&r1(t,t.return),i.flags&32){var r=i.stateNode;try{L_(r,"")}catch(v){Fr(i,i.return,v)}}if(n&4&&(r=i.stateNode,r!=null)){var s=i.memoizedProps,o=t!==null?t.memoizedProps:s,a=i.type,l=i.updateQueue;if(i.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&v$(r,s),I6(a,o);var u=I6(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?S$(r,h):c==="dangerouslySetInnerHTML"?b$(r,h):c==="children"?L_(r,h):dD(r,c,h,u)}switch(a){case"input":E6(r,s);break;case"textarea":_$(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?C1(r,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?C1(r,!!s.multiple,s.defaultValue,!0):C1(r,!!s.multiple,s.multiple?[]:"",!1))}r[V_]=s}catch(v){Fr(i,i.return,v)}}break;case 6:if(Wu(e,i),Uc(i),n&4){if(i.stateNode===null)throw Error(_t(162));r=i.stateNode,s=i.memoizedProps;try{r.nodeValue=s}catch(v){Fr(i,i.return,v)}}break;case 3:if(Wu(e,i),Uc(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{U_(e.containerInfo)}catch(v){Fr(i,i.return,v)}break;case 4:Wu(e,i),Uc(i);break;case 13:Wu(e,i),Uc(i),r=i.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||($D=Kr())),n&4&&y9(i);break;case 22:if(c=t!==null&&t.memoizedState!==null,i.mode&1?(Do=(u=Do)||c,Wu(e,i),Do=u):Wu(e,i),Uc(i),n&8192){if(u=i.memoizedState!==null,(i.stateNode.isHidden=u)&&!c&&i.mode&1)for(Zt=i,c=i.child;c!==null;){for(h=Zt=c;Zt!==null;){switch(f=Zt,d=f.child,f.tag){case 0:case 11:case 14:case 15:o_(4,f,f.return);break;case 1:r1(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){Fr(n,t,v)}}break;case 5:r1(f,f.return);break;case 22:if(f.memoizedState!==null){_9(h);continue}}d!==null?(d.return=f,Zt=d):_9(h)}c=c.sibling}e:for(c=null,h=i;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=w$("display",o))}catch(v){Fr(i,i.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Fr(i,i.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===i)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wu(e,i),Uc(i),n&4&&y9(i);break;case 21:break;default:Wu(e,i),Uc(i)}}function Uc(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(YW(t)){var n=t;break e}t=t.return}throw Error(_t(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(L_(r,""),n.flags&=-33);var s=g9(i);lB(i,s,r);break;case 3:case 4:var o=n.stateNode.containerInfo,a=g9(i);aB(i,a,o);break;default:throw Error(_t(161))}}catch(l){Fr(i,i.return,l)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function uae(i,e,t){Zt=i,JW(i)}function JW(i,e,t){for(var n=(i.mode&1)!==0;Zt!==null;){var r=Zt,s=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||Ww;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Do;a=Ww;var u=Do;if(Ww=o,(Do=l)&&!u)for(Zt=r;Zt!==null;)o=Zt,l=o.child,o.tag===22&&o.memoizedState!==null?x9(r):l!==null?(l.return=o,Zt=l):x9(r);for(;s!==null;)Zt=s,JW(s),s=s.sibling;Zt=r,Ww=a,Do=u}v9(i)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Zt=s):v9(i)}}function v9(i){for(;Zt!==null;){var e=Zt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Do||LC(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Do)if(t===null)n.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:lc(e.type,t.memoizedProps);n.componentDidUpdate(r,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&i9(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}i9(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&U_(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_t(163))}Do||e.flags&512&&oB(e)}catch(f){Fr(e,e.return,f)}}if(e===i){Zt=null;break}if(t=e.sibling,t!==null){t.return=e.return,Zt=t;break}Zt=e.return}}function _9(i){for(;Zt!==null;){var e=Zt;if(e===i){Zt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Zt=t;break}Zt=e.return}}function x9(i){for(;Zt!==null;){var e=Zt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{LC(4,e)}catch(l){Fr(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(l){Fr(e,r,l)}}var s=e.return;try{oB(e)}catch(l){Fr(e,s,l)}break;case 5:var o=e.return;try{oB(e)}catch(l){Fr(e,o,l)}}}catch(l){Fr(e,e.return,l)}if(e===i){Zt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Zt=a;break}Zt=e.return}}var cae=Math.ceil,cT=Yf.ReactCurrentDispatcher,VD=Yf.ReactCurrentOwner,Pu=Yf.ReactCurrentBatchConfig,_i=0,Vs=null,hs=null,co=0,Tl=0,s1=Hp(0),Ts=0,Q_=null,k0=0,OC=0,jD=0,a_=null,za=null,$D=0,sy=1/0,Kh=null,hT=!1,uB=null,Ap=null,Xw=!1,sp=null,fT=0,l_=0,cB=null,gM=-1,yM=0;function xa(){return _i&6?Kr():gM!==-1?gM:gM=Kr()}function mp(i){return i.mode&1?_i&2&&co!==0?co&-co:Woe.transition!==null?(yM===0&&(yM=O$()),yM):(i=ki,i!==0||(i=window.event,i=i===void 0?16:q$(i.type)),i):1}function vc(i,e,t,n){if(50<l_)throw l_=0,cB=null,Error(_t(185));Wx(i,t,n),(!(_i&2)||i!==Vs)&&(i===Vs&&(!(_i&2)&&(OC|=t),Ts===4&&Jd(i,co)),Qa(i,n),t===1&&_i===0&&!(e.mode&1)&&(sy=Kr()+500,IC&&qp()))}function Qa(i,e){var t=i.callbackNode;Wse(i,e);var n=YM(i,i===Vs?co:0);if(n===0)t!==null&&Pk(t),i.callbackNode=null,i.callbackPriority=0;else if(e=n&-n,i.callbackPriority!==e){if(t!=null&&Pk(t),e===1)i.tag===0?$oe(b9.bind(null,i)):lW(b9.bind(null,i)),Hoe(function(){!(_i&6)&&qp()}),t=null;else{switch(F$(n)){case 1:t=yD;break;case 4:t=D$;break;case 16:t=XM;break;case 536870912:t=L$;break;default:t=XM}t=oX(t,ZW.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function ZW(i,e){if(gM=-1,yM=0,_i&6)throw Error(_t(327));var t=i.callbackNode;if(N1()&&i.callbackNode!==t)return null;var n=YM(i,i===Vs?co:0);if(n===0)return null;if(n&30||n&i.expiredLanes||e)e=dT(i,n);else{e=n;var r=_i;_i|=2;var s=tX();(Vs!==i||co!==e)&&(Kh=null,sy=Kr()+500,y0(i,e));do try{dae();break}catch(a){eX(i,a)}while(!0);BD(),cT.current=s,_i=r,hs!==null?e=0:(Vs=null,co=0,e=Ts)}if(e!==0){if(e===2&&(r=F6(i),r!==0&&(n=r,e=hB(i,r))),e===1)throw t=Q_,y0(i,0),Jd(i,n),Qa(i,Kr()),t;if(e===6)Jd(i,n);else{if(r=i.current.alternate,!(n&30)&&!hae(r)&&(e=dT(i,n),e===2&&(s=F6(i),s!==0&&(n=s,e=hB(i,s))),e===1))throw t=Q_,y0(i,0),Jd(i,n),Qa(i,Kr()),t;switch(i.finishedWork=r,i.finishedLanes=n,e){case 0:case 1:throw Error(_t(345));case 2:$A(i,za,Kh);break;case 3:if(Jd(i,n),(n&130023424)===n&&(e=$D+500-Kr(),10<e)){if(YM(i,0)!==0)break;if(r=i.suspendedLanes,(r&n)!==n){xa(),i.pingedLanes|=i.suspendedLanes&r;break}i.timeoutHandle=j6($A.bind(null,i,za,Kh),e);break}$A(i,za,Kh);break;case 4:if(Jd(i,n),(n&4194240)===n)break;for(e=i.eventTimes,r=-1;0<n;){var o=31-yc(n);s=1<<o,o=e[o],o>r&&(r=o),n&=~s}if(n=r,n=Kr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*cae(n/1960))-n,10<n){i.timeoutHandle=j6($A.bind(null,i,za,Kh),n);break}$A(i,za,Kh);break;case 5:$A(i,za,Kh);break;default:throw Error(_t(329))}}}return Qa(i,Kr()),i.callbackNode===t?ZW.bind(null,i):null}function hB(i,e){var t=a_;return i.current.memoizedState.isDehydrated&&(y0(i,e).flags|=256),i=dT(i,e),i!==2&&(e=za,za=t,e!==null&&fB(e)),i}function fB(i){za===null?za=i:za.push.apply(za,i)}function hae(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var r=t[n],s=r.getSnapshot;r=r.value;try{if(!_c(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jd(i,e){for(e&=~jD,e&=~OC,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-yc(e),n=1<<t;i[t]=-1,e&=~n}}function b9(i){if(_i&6)throw Error(_t(327));N1();var e=YM(i,0);if(!(e&1))return Qa(i,Kr()),null;var t=dT(i,e);if(i.tag!==0&&t===2){var n=F6(i);n!==0&&(e=n,t=hB(i,n))}if(t===1)throw t=Q_,y0(i,0),Jd(i,e),Qa(i,Kr()),t;if(t===6)throw Error(_t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,$A(i,za,Kh),Qa(i,Kr()),null}function WD(i,e){var t=_i;_i|=1;try{return i(e)}finally{_i=t,_i===0&&(sy=Kr()+500,IC&&qp())}}function U0(i){sp!==null&&sp.tag===0&&!(_i&6)&&N1();var e=_i;_i|=1;var t=Pu.transition,n=ki;try{if(Pu.transition=null,ki=1,i)return i()}finally{ki=n,Pu.transition=t,_i=e,!(_i&6)&&qp()}}function XD(){Tl=s1.current,sr(s1)}function y0(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,Goe(t)),hs!==null)for(t=hs.return;t!==null;){var n=t;switch(CD(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&eT();break;case 3:iy(),sr(Xa),sr(Vo),FD();break;case 5:OD(n);break;case 4:iy();break;case 13:sr(_r);break;case 19:sr(_r);break;case 10:ID(n.type._context);break;case 22:case 23:XD()}t=t.return}if(Vs=i,hs=i=gp(i.current,null),co=Tl=e,Ts=0,Q_=null,jD=OC=k0=0,za=a_=null,o0!==null){for(e=0;e<o0.length;e++)if(t=o0[e],n=t.interleaved,n!==null){t.interleaved=null;var r=n.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,n.next=o}t.pending=n}o0=null}return i}function eX(i,e){do{var t=hs;try{if(BD(),pM.current=uT,lT){for(var n=Cr.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}lT=!1}if(F0=0,zs=Ms=Cr=null,s_=!1,W_=0,VD.current=null,t===null||t.return===null){Ts=1,Q_=e,hs=null;break}e:{var s=i,o=t.return,a=t,l=e;if(e=co,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=u9(o);if(d!==null){d.flags&=-257,c9(d,o,a,s,e),d.mode&1&&l9(s,u,e),e=d,l=u;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){l9(s,u,e),YD();break e}l=Error(_t(426))}}else if(fr&&a.mode&1){var b=u9(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),c9(b,o,a,s,e),RD(ry(l,a));break e}}s=l=ry(l,a),Ts!==4&&(Ts=2),a_===null?a_=[s]:a_.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=FW(s,l,e);n9(s,_);break e;case 1:a=l;var M=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof M.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ap===null||!Ap.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=kW(s,a,e);n9(s,R);break e}}s=s.return}while(s!==null)}iX(t)}catch(L){e=L,hs===t&&t!==null&&(hs=t=t.return);continue}break}while(!0)}function tX(){var i=cT.current;return cT.current=uT,i===null?uT:i}function YD(){(Ts===0||Ts===3||Ts===2)&&(Ts=4),Vs===null||!(k0&268435455)&&!(OC&268435455)||Jd(Vs,co)}function dT(i,e){var t=_i;_i|=2;var n=tX();(Vs!==i||co!==e)&&(Kh=null,y0(i,e));do try{fae();break}catch(r){eX(i,r)}while(!0);if(BD(),_i=t,cT.current=n,hs!==null)throw Error(_t(261));return Vs=null,co=0,Ts}function fae(){for(;hs!==null;)nX(hs)}function dae(){for(;hs!==null&&!kse();)nX(hs)}function nX(i){var e=sX(i.alternate,i,Tl);i.memoizedProps=i.pendingProps,e===null?iX(i):hs=e,VD.current=null}function iX(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=oae(t,e),t!==null){t.flags&=32767,hs=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ts=6,hs=null;return}}else if(t=sae(t,e,Tl),t!==null){hs=t;return}if(e=e.sibling,e!==null){hs=e;return}hs=e=i}while(e!==null);Ts===0&&(Ts=5)}function $A(i,e,t){var n=ki,r=Pu.transition;try{Pu.transition=null,ki=1,pae(i,e,t,n)}finally{Pu.transition=r,ki=n}return null}function pae(i,e,t,n){do N1();while(sp!==null);if(_i&6)throw Error(_t(327));t=i.finishedWork;var r=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(_t(177));i.callbackNode=null,i.callbackPriority=0;var s=t.lanes|t.childLanes;if(Xse(i,s),i===Vs&&(hs=Vs=null,co=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Xw||(Xw=!0,oX(XM,function(){return N1(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Pu.transition,Pu.transition=null;var o=ki;ki=1;var a=_i;_i|=4,VD.current=null,lae(i,t),KW(t,i),Doe(q6),QM=!!H6,q6=H6=null,i.current=t,uae(t),Use(),_i=a,ki=o,Pu.transition=s}else i.current=t;if(Xw&&(Xw=!1,sp=i,fT=r),s=i.pendingLanes,s===0&&(Ap=null),Hse(t.stateNode),Qa(i,Kr()),e!==null)for(n=i.onRecoverableError,t=0;t<e.length;t++)r=e[t],n(r.value,{componentStack:r.stack,digest:r.digest});if(hT)throw hT=!1,i=uB,uB=null,i;return fT&1&&i.tag!==0&&N1(),s=i.pendingLanes,s&1?i===cB?l_++:(l_=0,cB=i):l_=0,qp(),null}function N1(){if(sp!==null){var i=F$(fT),e=Pu.transition,t=ki;try{if(Pu.transition=null,ki=16>i?16:i,sp===null)var n=!1;else{if(i=sp,sp=null,fT=0,_i&6)throw Error(_t(331));var r=_i;for(_i|=4,Zt=i.current;Zt!==null;){var s=Zt,o=s.child;if(Zt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Zt=u;Zt!==null;){var c=Zt;switch(c.tag){case 0:case 11:case 15:o_(8,c,s)}var h=c.child;if(h!==null)h.return=c,Zt=h;else for(;Zt!==null;){c=Zt;var f=c.sibling,d=c.return;if(XW(c),c===u){Zt=null;break}if(f!==null){f.return=d,Zt=f;break}Zt=d}}}var p=s.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}Zt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Zt=o;else e:for(;Zt!==null;){if(s=Zt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:o_(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,Zt=_;break e}Zt=s.return}}var M=i.current;for(Zt=M;Zt!==null;){o=Zt;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Zt=E;else e:for(o=M;Zt!==null;){if(a=Zt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:LC(9,a)}}catch(L){Fr(a,a.return,L)}if(a===o){Zt=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,Zt=R;break e}Zt=a.return}}if(_i=r,qp(),eh&&typeof eh.onPostCommitFiberRoot=="function")try{eh.onPostCommitFiberRoot(EC,i)}catch{}n=!0}return n}finally{ki=t,Pu.transition=e}}return!1}function w9(i,e,t){e=ry(t,e),e=FW(i,e,1),i=pp(i,e,1),e=xa(),i!==null&&(Wx(i,1,e),Qa(i,e))}function Fr(i,e,t){if(i.tag===3)w9(i,i,t);else for(;e!==null;){if(e.tag===3){w9(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ap===null||!Ap.has(n))){i=ry(t,i),i=kW(e,i,1),e=pp(e,i,1),i=xa(),e!==null&&(Wx(e,1,i),Qa(e,i));break}}e=e.return}}function Aae(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),e=xa(),i.pingedLanes|=i.suspendedLanes&t,Vs===i&&(co&t)===t&&(Ts===4||Ts===3&&(co&130023424)===co&&500>Kr()-$D?y0(i,0):jD|=t),Qa(i,e)}function rX(i,e){e===0&&(i.mode&1?(e=kw,kw<<=1,!(kw&130023424)&&(kw=4194304)):e=1);var t=xa();i=If(i,e),i!==null&&(Wx(i,e,t),Qa(i,t))}function mae(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),rX(i,t)}function gae(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,r=i.memoizedState;r!==null&&(t=r.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(_t(314))}n!==null&&n.delete(e),rX(i,t)}var sX;sX=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||Xa.current)Ha=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return Ha=!1,rae(i,e,t);Ha=!!(i.flags&131072)}else Ha=!1,fr&&e.flags&1048576&&uW(e,iT,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;mM(i,e),i=e.pendingProps;var r=ey(e,Vo.current);I1(e,t),r=UD(null,e,n,i,r,t);var s=zD();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ya(n)?(s=!0,tT(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,DD(e),r.updater=DC,e.stateNode=r,r._reactInternals=e,J6(e,n,i,t),e=tB(null,e,n,!0,s,t)):(e.tag=0,fr&&s&&ED(e),aa(null,e,r,t),e=e.child),e;case 16:n=e.elementType;e:{switch(mM(i,e),i=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=vae(n),i=lc(n,i),r){case 0:e=eB(null,e,n,i,t);break e;case 1:e=d9(null,e,n,i,t);break e;case 11:e=h9(null,e,n,i,t);break e;case 14:e=f9(null,e,n,lc(n.type,i),t);break e}throw Error(_t(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:lc(n,r),eB(i,e,n,r,t);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:lc(n,r),d9(i,e,n,r,t);case 3:e:{if(HW(e),i===null)throw Error(_t(387));n=e.pendingProps,s=e.memoizedState,r=s.element,AW(i,e),oT(e,n,null,t);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=ry(Error(_t(423)),e),e=p9(i,e,n,t,r);break e}else if(n!==r){r=ry(Error(_t(424)),e),e=p9(i,e,n,t,r);break e}else for(Ll=dp(e.stateNode.containerInfo.firstChild),kl=e,fr=!0,hc=null,t=dW(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ty(),n===r){e=Nf(i,e,t);break e}aa(i,e,n,t)}e=e.child}return e;case 5:return mW(e),i===null&&Y6(e),n=e.type,r=e.pendingProps,s=i!==null?i.memoizedProps:null,o=r.children,V6(n,r)?o=null:s!==null&&V6(n,s)&&(e.flags|=32),GW(i,e),aa(i,e,o,t),e.child;case 6:return i===null&&Y6(e),null;case 13:return qW(i,e,t);case 4:return LD(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=ny(e,null,n,t):aa(i,e,n,t),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:lc(n,r),h9(i,e,n,r,t);case 7:return aa(i,e,e.pendingProps,t),e.child;case 8:return aa(i,e,e.pendingProps.children,t),e.child;case 12:return aa(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Zi(rT,n._currentValue),n._currentValue=o,s!==null)if(_c(s.value,o)){if(s.children===r.children&&!Xa.current){e=Nf(i,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=vf(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Q6(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(_t(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Q6(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}aa(i,e,r.children,t),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,I1(e,t),r=Nu(r),n=n(r),e.flags|=1,aa(i,e,n,t),e.child;case 14:return n=e.type,r=lc(n,e.pendingProps),r=lc(n.type,r),f9(i,e,n,r,t);case 15:return UW(i,e,e.type,e.pendingProps,t);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:lc(n,r),mM(i,e),e.tag=1,Ya(n)?(i=!0,tT(e)):i=!1,I1(e,t),OW(e,n,r),J6(e,n,r,t),tB(null,e,n,!0,i,t);case 19:return VW(i,e,t);case 22:return zW(i,e,t)}throw Error(_t(156,e.tag))};function oX(i,e){return N$(i,e)}function yae(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Su(i,e,t,n){return new yae(i,e,t,n)}function QD(i){return i=i.prototype,!(!i||!i.isReactComponent)}function vae(i){if(typeof i=="function")return QD(i)?1:0;if(i!=null){if(i=i.$$typeof,i===AD)return 11;if(i===mD)return 14}return 2}function gp(i,e){var t=i.alternate;return t===null?(t=Su(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function vM(i,e,t,n,r,s){var o=2;if(n=i,typeof i=="function")QD(i)&&(o=1);else if(typeof i=="string")o=5;else e:switch(i){case Yg:return v0(t.children,r,s,e);case pD:o=8,r|=8;break;case b6:return i=Su(12,t,e,r|2),i.elementType=b6,i.lanes=s,i;case w6:return i=Su(13,t,e,r),i.elementType=w6,i.lanes=s,i;case S6:return i=Su(19,t,e,r),i.elementType=S6,i.lanes=s,i;case m$:return FC(t,r,s,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case p$:o=10;break e;case A$:o=9;break e;case AD:o=11;break e;case mD:o=14;break e;case $d:o=16,n=null;break e}throw Error(_t(130,i==null?i:typeof i,""))}return e=Su(o,t,e,r),e.elementType=i,e.type=n,e.lanes=s,e}function v0(i,e,t,n){return i=Su(7,i,n,e),i.lanes=t,i}function FC(i,e,t,n){return i=Su(22,i,n,e),i.elementType=m$,i.lanes=t,i.stateNode={isHidden:!1},i}function fR(i,e,t){return i=Su(6,i,null,e),i.lanes=t,i}function dR(i,e,t){return e=Su(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function _ae(i,e,t,n,r){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=W5(0),this.expirationTimes=W5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=W5(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function KD(i,e,t,n,r,s,o,a,l){return i=new _ae(i,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Su(3,null,null,e),i.current=s,s.stateNode=i,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},DD(s),i}function xae(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xg,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}function aX(i){if(!i)return bp;i=i._reactInternals;e:{if(um(i)!==i||i.tag!==1)throw Error(_t(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ya(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(_t(171))}if(i.tag===1){var t=i.type;if(Ya(t))return aW(i,t,e)}return e}function lX(i,e,t,n,r,s,o,a,l){return i=KD(t,n,!0,i,r,s,o,a,l),i.context=aX(null),t=i.current,n=xa(),r=mp(t),s=vf(n,r),s.callback=e??null,pp(t,s,r),i.current.lanes=r,Wx(i,r,n),Qa(i,n),i}function kC(i,e,t,n){var r=e.current,s=xa(),o=mp(r);return t=aX(t),e.context===null?e.context=t:e.pendingContext=t,e=vf(s,o),e.payload={element:i},n=n===void 0?null:n,n!==null&&(e.callback=n),i=pp(r,e,o),i!==null&&(vc(i,r,o,s),dM(i,r,o)),o}function pT(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function S9(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function JD(i,e){S9(i,e),(i=i.alternate)&&S9(i,e)}function bae(){return null}var uX=typeof reportError=="function"?reportError:function(i){console.error(i)};function ZD(i){this._internalRoot=i}UC.prototype.render=ZD.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(_t(409));kC(i,e,null,null)};UC.prototype.unmount=ZD.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;U0(function(){kC(null,i,null,null)}),e[Bf]=null}};function UC(i){this._internalRoot=i}UC.prototype.unstable_scheduleHydration=function(i){if(i){var e=z$();i={blockedOn:null,target:i,priority:e};for(var t=0;t<Kd.length&&e!==0&&e<Kd[t].priority;t++);Kd.splice(t,0,i),t===0&&H$(i)}};function eL(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function zC(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function M9(){}function wae(i,e,t,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var u=pT(o);s.call(u)}}var o=lX(e,n,i,0,null,!1,!1,"",M9);return i._reactRootContainer=o,i[Bf]=o.current,H_(i.nodeType===8?i.parentNode:i),U0(),o}for(;r=i.lastChild;)i.removeChild(r);if(typeof n=="function"){var a=n;n=function(){var u=pT(l);a.call(u)}}var l=KD(i,0,!1,null,null,!1,!1,"",M9);return i._reactRootContainer=l,i[Bf]=l.current,H_(i.nodeType===8?i.parentNode:i),U0(function(){kC(e,l,t,n)}),l}function GC(i,e,t,n,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=pT(o);a.call(l)}}kC(e,o,i,r)}else o=wae(t,e,i,r,n);return pT(o)}k$=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=z2(e.pendingLanes);t!==0&&(vD(e,t|1),Qa(e,Kr()),!(_i&6)&&(sy=Kr()+500,qp()))}break;case 13:U0(function(){var n=If(i,1);if(n!==null){var r=xa();vc(n,i,1,r)}}),JD(i,1)}};_D=function(i){if(i.tag===13){var e=If(i,134217728);if(e!==null){var t=xa();vc(e,i,134217728,t)}JD(i,134217728)}};U$=function(i){if(i.tag===13){var e=mp(i),t=If(i,e);if(t!==null){var n=xa();vc(t,i,e,n)}JD(i,e)}};z$=function(){return ki};G$=function(i,e){var t=ki;try{return ki=i,e()}finally{ki=t}};D6=function(i,e,t){switch(e){case"input":if(E6(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var r=BC(n);if(!r)throw Error(_t(90));y$(n),E6(n,r)}}}break;case"textarea":_$(i,t);break;case"select":e=t.value,e!=null&&C1(i,!!t.multiple,e,!1)}};E$=WD;C$=U0;var Sae={usingClientEntryPoint:!1,Events:[Yx,Zg,BC,M$,T$,WD]},Hv={findFiberByHostInstance:s0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mae={bundleType:Hv.bundleType,version:Hv.version,rendererPackageName:Hv.rendererPackageName,rendererConfig:Hv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yf.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=B$(i),i===null?null:i.stateNode},findFiberByHostInstance:Hv.findFiberByHostInstance||bae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yw.isDisabled&&Yw.supportsFiber)try{EC=Yw.inject(Mae),eh=Yw}catch{}}Xl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sae;Xl.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eL(e))throw Error(_t(200));return xae(i,e,null,t)};Xl.createRoot=function(i,e){if(!eL(i))throw Error(_t(299));var t=!1,n="",r=uX;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=KD(i,1,!1,null,null,t,!1,n,r),i[Bf]=e.current,H_(i.nodeType===8?i.parentNode:i),new ZD(e)};Xl.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(_t(188)):(i=Object.keys(i).join(","),Error(_t(268,i)));return i=B$(e),i=i===null?null:i.stateNode,i};Xl.flushSync=function(i){return U0(i)};Xl.hydrate=function(i,e,t){if(!zC(e))throw Error(_t(200));return GC(null,i,e,!0,t)};Xl.hydrateRoot=function(i,e,t){if(!eL(i))throw Error(_t(405));var n=t!=null&&t.hydratedSources||null,r=!1,s="",o=uX;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=lX(e,null,i,1,t??null,r,!1,s,o),i[Bf]=e.current,H_(i),n)for(i=0;i<n.length;i++)t=n[i],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new UC(e)};Xl.render=function(i,e,t){if(!zC(e))throw Error(_t(200));return GC(null,i,e,!1,t)};Xl.unmountComponentAtNode=function(i){if(!zC(i))throw Error(_t(40));return i._reactRootContainer?(U0(function(){GC(null,null,i,!1,function(){i._reactRootContainer=null,i[Bf]=null})}),!0):!1};Xl.unstable_batchedUpdates=WD;Xl.unstable_renderSubtreeIntoContainer=function(i,e,t,n){if(!zC(t))throw Error(_t(200));if(i==null||i._reactInternals===void 0)throw Error(_t(38));return GC(i,e,t,!1,n)};Xl.version="18.3.1-next-f1338f8080-20240426";function cX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cX)}catch(i){console.error(i)}}cX(),c$.exports=Xl;var HC=c$.exports;const Tae=xh(HC);var tL,T9=HC;tL=T9.createRoot,T9.hydrateRoot;const Eae=[{id:1,name:"Home",href:"#home"},{id:2,name:"About",href:"#about"},{id:3,name:"Projects",href:"#projects"},{id:4,name:"Work",href:"#work"},{id:5,name:"Clients",href:"#clients"},{id:6,name:"Contact",href:"#contact"}],Cae=[{id:1,name:"Emily Johnson",position:"Marketing Director at GreenLeaf",img:"assets/review1.png",review:"Working with Miguel was a fantastic experience. He transformed our outdated website into a modern, user-friendly platform. His attention to detail and commitment to quality are unmatched. Highly recommend him for any web dev projects."},{id:2,name:"Mark Rogers",position:"Founder of TechGear Shop",img:"assets/review2.png",review:"Miguel’s expertise in web development is truly impressive. He delivered a robust and scalable solution for our e-commerce site, and our online sales have significantly increased since the launch. He’s a true professional! Fantastic work."},{id:3,name:"John Dohsas",position:"Project Manager at UrbanTech ",img:"assets/review3.png",review:"I can’t say enough good things about Miguel. He was able to take our complex project requirements and turn them into a seamless, functional website. His problem-solving abilities are outstanding."},{id:4,name:"Ether Smith",position:"CEO of BrightStar Enterprises",img:"assets/review4.png",review:"Miguel was a pleasure to work with. He understood our requirements perfectly and delivered a website that exceeded our expectations. His skills in both frontend backend dev are top-notch."}],dB=[{title:"YouTube Mockup",desc:"This project is a custom-built mockup of the YouTube homepage, designed using HTML for structure and CSS for styling. It replicates key features and design elements of YouTube’s user interface, focusing on responsiveness and visual accuracy. ",subdesc:"Built using HTML, and CSS techiques, such as flexbox, gird and media queries, to ensure responsiveness and cross-device compatibility.  ",href:"https://coderfo.github.io/YoutubeMockUp/Youtube.html",texture:"/textures/project/YouTube.mp4",logo:"/assets/youtube.png",logoStyle:{backgroundColor:"#2A1816",border:"0.2px solid #36201D",boxShadow:"0px 0px 60px 0px #AA3C304D"},spotlight:"/assets/spotlight1.png",tags:[{id:1,name:"HTML",path:"https://www.freepnglogos.com/download/31813"},{id:2,name:"CSS",path:"https://www.pngitem.com/pimgs/b/11-119330_php-icon-png.png"}]},{title:"Rock, Paper, Scissors Game",desc:"An interactive Rock, Paper, Scissors game built using HTML, CSS, and JavaScript. The project provides a user-friendly interface where players can select their choice (rock, paper, or scissors) and compete against a computer-generated opponent. The game dynamically displays the results—win, lose, or draw—based on classic game rules, and includes features like score tracking, reset functionality, and responsive design for an optimal experience on any device",subdesc:"HTML is used to structure the game elements, CSS adds vibrant styling and animations to enhance the visuals, and JavaScript powers the games logic, interactivity, and real-time updates. This project is perfect for demonstrating foundational web development skills and creating a fun, engaging user experience.",href:"https://coderfo.github.io/Rock-Paper-Scissors-Game/rps.html",texture:"/textures/project/RPSgame.mp4",logo:"https://cdn-icons-png.freepik.com/512/6831/6831874.png?fd=1&filename=rock-paper-scissors_6831874.png",logoStyle:{backgroundColor:"#13202F",border:"0.2px solid #17293E",boxShadow:"0px 0px 60px 0px #2F6DB54D"},spotlight:"/assets/spotlight2.png",tags:[{id:1,name:"HTML",path:"https://www.freepnglogos.com/download/31813"},{id:2,name:"CSS",path:"https://www.pngitem.com/pimgs/b/11-119330_php-icon-png.png"},{id:3,name:"JavaScript",path:"https://www.freepnglogos.com/download/39404"}]},{title:"Real Estate - Landing Page",desc:"A modern, responsive, and user-friendly real estate landing page built using React.js. This high-performance web application showcases a sleek design, optimized navigation, and dynamic functionality to provide an exceptional user experience.",subdesc:" With React.js at its core, the site delivers speed, scalability, and maintainability for a cutting-edge digital presence in the competitive real estate market",href:"https://coderfo.github.io/RealState-Project/",texture:"/textures/project/RealEstateLandingPage.mp4",logo:"https://www.pngitem.com/pimgs/b/234-2340089_real-estate-icon-png.png",logoStyle:{backgroundColor:"#60f5a1",background:"linear-gradient(0deg, #60F5A150, #60F5A150), linear-gradient(180deg, rgba(255, 255, 255, 0.9) 0%, rgba(208, 213, 221, 0.8) 100%)",border:"0.2px solid rgba(208, 213, 221, 1)",boxShadow:"0px 0px 60px 0px rgba(35, 131, 96, 0.3)"},spotlight:"/assets/spotlight3.png",tags:[{id:1,name:"HTML",path:"https://www.freepnglogos.com/download/31813"},{id:2,name:"CSS",path:"https://www.pngitem.com/pimgs/b/11-119330_php-icon-png.png"},{id:3,name:"JavaScript",path:"https://www.freepnglogos.com/download/39404"},{id:4,name:"React",path:"https://www.pngitem.com/pimgs/b/664-6644509_expert-icon-png.png"}]},{title:"Al Gemini-Clone ",desc:"The AI Gemini website is an innovative, dynamic web platform designed and developed using React for a seamless user experience, paired with powerful Web API integrations. This project showcases a modern and responsive design, leveraging React’s component-based architecture for efficient state management and interactivity.",subdesc:"This project demonstrates proficiency in combining front-end technologies with backend integration to deliver a robust and user-focused web application. The AI Gemini website is a testament to effective problem-solving, clean coding principles, and innovative design thinking. ( It no longer works because google blocked the web api)",href:"https://coderfo.github.io/gemini-clone/",texture:"/textures/project/Gemini-Clone.mp4",logo:"/assets/google-gemini.svg",logoStyle:{backgroundColor:"#0E1F38",border:"0.2px solid #0E2D58",boxShadow:"0px 0px 60px 0px #2F67B64D"},spotlight:"/assets/spotlight4.png",tags:[{id:1,name:"HTML",path:"https://www.freepnglogos.com/download/31813"},{id:2,name:"CSS",path:"https://www.pngitem.com/pimgs/b/11-119330_php-icon-png.png"},{id:3,name:"JavaScript",path:"https://www.freepnglogos.com/download/39404"},{id:4,name:"React",path:"https://www.pngitem.com/pimgs/b/664-6644509_expert-icon-png.png"}]}],Rae=(i,e,t)=>({deskScale:i?.05:e?.06:.065,deskPosition:e?[.5,-4.5,0]:[.25,-5.5,0],cubePosition:i?[4,-5,0]:e?[5,-5,0]:t?[5,-5,0]:[9,-5.5,0],reactLogoPosition:i?[3,4,0]:e?[5,4,0]:t?[5,4,0]:[12,3,0],ringPosition:i?[-5,7,0]:e?[-10,10,0]:t?[-12,10,0]:[-24,10,0],targetPosition:i?[-5,-10,-10]:e?[-9,-10,-10]:t?[-11,-7,-10]:[-13,-13,-10]}),Pae=[{id:1,name:"MW Components",pos:"Promoted to CNC Operator",duration:"09/2024 - Present",title:" Knowledge of machine operations, components, and capabilities.  Ability to read and interpret engineering drawings and schematics. Familiar with CNC programming along with other different programming languages. Accuracy in measurements and adherence to specifications. Detected and corrected errors during setup and operation. Maintained tight tolerances and high-quality standards. Quickly diagnosing and addressing machine malfunctions or production errors. Adapting to unexpected challenges, such as material inconsistencies or tooling failures.",icon:"/assets/framer.svg",animation:"victory"},{id:2,name:"MW Componets",pos:"Machine Operator",duration:"09/11/2023 - 09/2024",title:"Used computer-controlled equipment to select, position and secure automatic or semi-automatic machines. Operates various types of machines to complete tasks accurately, according to specifications, and in a timely fashion. Operate a forklift to move heavy material within the warehouse. ",icon:"/assets/figma.svg",animation:"clapping"},{id:3,name:"HEB",pos:"Cashier/Customer Service",duration:"2017 - 2022",title:"Provided excellent customer service by staying attentive to customers’ needs while processing transactions of goods and services. Collaborated with coworkers to create a welcoming, friendly, and pleasant environment for customers. Operated cash register with high accuracy, and speed to provide a fast customer service experience.  ",icon:"/assets/notion.svg",animation:"salute"}],E9=({onClick:i=()=>{}})=>Y.jsx("ul",{className:"nav-ul",children:Eae.map(e=>Y.jsx("li",{className:"nav-li",children:Y.jsx("a",{href:e.href,className:"nav-li_a",onClick:i,children:e.name})},e.id))}),Bae=()=>{const[i,e]=W.useState(!1),t=()=>e(n=>!n);return Y.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-black/90",children:[Y.jsx("div",{className:"max-w-7xl mx-auto",children:Y.jsxs("div",{className:"flex justify-between items-center py-5 mx-auto c-space",children:[Y.jsx("a",{href:"/",className:"text-neutral-500 font-bold text-xl hover:text-white transition-colors",children:"Miguel Guzman"}),Y.jsx("button",{onClick:t,className:"text-n hover:text-white focus:outline-none sm:hidden flex","aria-label":"Toggle menu",children:Y.jsx("img",{src:i?"assets/close.svg":"assets/menu.svg",alt:"toggle",className:"w-6 h-6"})}),Y.jsx("div",{className:"sm:flex hidden",children:Y.jsx(E9,{})})]})}),Y.jsx("div",{className:`nav-sidebar ${i?"max-h-screen":"max-h-0"}`,children:Y.jsx("nav",{className:"p-5",children:Y.jsx(E9,{})})})]})};function $s(){return $s=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},$s.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Gy="169",us={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Pl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},hX=0,pB=1,fX=2,Iae=3,dX=0,qC=1,u_=2,uc=3,fh=0,ho=1,ao=2,nh=0,_f=1,AB=2,mB=3,gB=4,pX=5,Zd=100,AX=101,mX=102,gX=103,yX=104,vX=200,_X=201,xX=202,bX=203,AT=204,mT=205,wX=206,SX=207,MX=208,TX=209,EX=210,CX=211,RX=212,PX=213,BX=214,gT=0,yT=1,vT=2,z0=3,_T=4,xT=5,bT=6,wT=7,Kx=0,IX=1,NX=2,ih=0,DX=1,LX=2,OX=3,nL=4,FX=5,kX=6,UX=7,yB="attached",zX="detached",VC=300,Df=301,wp=302,oy=303,K_=304,Hy=306,dh=1e3,ga=1001,ay=1002,Es=1003,jC=1004,Nae=1004,l0=1005,Dae=1005,pr=1006,D1=1007,Lae=1007,Mu=1008,Oae=1008,xc=1009,iL=1010,rL=1011,ly=1012,$C=1013,Lf=1014,ya=1015,Vp=1016,WC=1017,XC=1018,G0=1020,sL=35902,oL=1021,aL=1022,Fo=1023,lL=1024,uL=1025,_0=1026,H0=1027,YC=1028,Jx=1029,cL=1030,QC=1031,Fae=1032,KC=1033,c_=33776,h_=33777,f_=33778,d_=33779,ST=35840,MT=35841,TT=35842,ET=35843,CT=36196,RT=37492,PT=37496,BT=37808,IT=37809,NT=37810,DT=37811,LT=37812,OT=37813,FT=37814,kT=37815,UT=37816,zT=37817,GT=37818,HT=37819,qT=37820,VT=37821,p_=36492,jT=36494,$T=36495,hL=36283,WT=36284,XT=36285,YT=36286,GX=2200,HX=2201,qX=2202,uy=2300,cy=2301,_M=2302,u0=2400,c0=2401,J_=2402,JC=2500,fL=2501,dL=0,ZC=1,hy=2,VX=3200,jX=3201,kae=3202,Uae=3203,jp=0,$X=1,uf="",Ua="srgb",Qf="srgb-linear",e4="display-p3",Zx="display-p3-linear",Z_="linear",Qi="srgb",ex="rec709",tx="p3",zae=0,WA=7680,Gae=7681,Hae=7682,qae=7683,Vae=34055,jae=34056,$ae=5386,Wae=512,Xae=513,Yae=514,Qae=515,Kae=516,Jae=517,Zae=518,vB=519,WX=512,XX=513,YX=514,pL=515,QX=516,KX=517,JX=518,ZX=519,nx=35044,ele=35048,tle=35040,nle=35045,ile=35049,rle=35041,sle=35046,ole=35050,ale=35042,lle="100",_B="300 es",Kc=2e3,ix=2001;let Fu=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const Mo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let C9=1234567;const x0=Math.PI/180,fy=180/Math.PI;function Ul(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Mo[i&255]+Mo[i>>8&255]+Mo[i>>16&255]+Mo[i>>24&255]+"-"+Mo[e&255]+Mo[e>>8&255]+"-"+Mo[e>>16&15|64]+Mo[e>>24&255]+"-"+Mo[t&63|128]+Mo[t>>8&255]+"-"+Mo[t>>16&255]+Mo[t>>24&255]+Mo[n&255]+Mo[n>>8&255]+Mo[n>>16&255]+Mo[n>>24&255]).toLowerCase()}function Ur(i,e,t){return Math.max(e,Math.min(t,i))}function AL(i,e){return(i%e+e)%e}function ule(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function cle(i,e,t){return i!==e?(t-i)/(e-i):0}function A_(i,e,t){return(1-t)*i+t*e}function hle(i,e,t,n){return A_(i,e,1-Math.exp(-t*n))}function fle(i,e=1){return e-Math.abs(AL(i,e*2)-e)}function dle(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function ple(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function Ale(i,e){return i+Math.floor(Math.random()*(e-i+1))}function mle(i,e){return i+Math.random()*(e-i)}function gle(i){return i*(.5-Math.random())}function yle(i){i!==void 0&&(C9=i);let e=C9+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function vle(i){return i*x0}function _le(i){return i*fy}function xle(i){return(i&i-1)===0&&i!==0}function ble(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function wle(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Sle(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+n)/2),c=o((e+n)/2),h=s((e-n)/2),f=o((e-n)/2),d=s((n-e)/2),p=o((n-e)/2);switch(r){case"XYX":i.set(a*c,l*h,l*f,a*u);break;case"YZY":i.set(l*f,a*c,l*h,a*u);break;case"ZXZ":i.set(l*h,l*f,a*c,a*u);break;case"XZX":i.set(a*c,l*p,l*d,a*u);break;case"YXY":i.set(l*d,a*c,l*p,a*u);break;case"ZYZ":i.set(l*p,l*d,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function pa(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Un(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const lo={DEG2RAD:x0,RAD2DEG:fy,generateUUID:Ul,clamp:Ur,euclideanModulo:AL,mapLinear:ule,inverseLerp:cle,lerp:A_,damp:hle,pingpong:fle,smoothstep:dle,smootherstep:ple,randInt:Ale,randFloat:mle,randFloatSpread:gle,seededRandom:yle,degToRad:vle,radToDeg:_le,isPowerOfTwo:xle,ceilPowerOfTwo:ble,floorPowerOfTwo:wle,setQuaternionFromProperEuler:Sle,normalize:Un,denormalize:pa};let je=class eY{constructor(e=0,t=0){eY.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ur(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},qn=class tY{constructor(e,t,n,r,s,o,a,l,u){tY.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,u)}set(e,t,n,r,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=n,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],u=n[1],c=n[4],h=n[7],f=n[2],d=n[5],p=n[8],v=r[0],b=r[3],_=r[6],M=r[1],E=r[4],R=r[7],L=r[2],I=r[5],D=r[8];return s[0]=o*v+a*M+l*L,s[3]=o*b+a*E+l*I,s[6]=o*_+a*R+l*D,s[1]=u*v+c*M+h*L,s[4]=u*b+c*E+h*I,s[7]=u*_+c*R+h*D,s[2]=f*v+d*M+p*L,s[5]=f*b+d*E+p*I,s[8]=f*_+d*R+p*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-n*s*c+n*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=c*o-a*u,f=a*l-c*s,d=u*s-o*l,p=t*h+n*f+r*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/p;return e[0]=h*v,e[1]=(r*u-c*n)*v,e[2]=(a*n-r*o)*v,e[3]=f*v,e[4]=(c*t-r*l)*v,e[5]=(r*s-a*t)*v,e[6]=d*v,e[7]=(n*l-u*t)*v,e[8]=(o*t-n*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(n*l,n*u,-n*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(pR.makeScale(e,t)),this}rotate(e){return this.premultiply(pR.makeRotation(-e)),this}translate(e,t){return this.premultiply(pR.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const pR=new qn;function nY(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const Mle={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function o1(i,e){return new Mle[i](e)}function rx(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function iY(){const i=rx("canvas");return i.style.display="block",i}const R9={};function xM(i){i in R9||(R9[i]=!0,console.warn(i))}function Tle(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function Ele(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Cle(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const P9=new qn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),B9=new qn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),qv={[Qf]:{transfer:Z_,primaries:ex,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i,fromReference:i=>i},[Ua]:{transfer:Qi,primaries:ex,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[Zx]:{transfer:Z_,primaries:tx,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.applyMatrix3(B9),fromReference:i=>i.applyMatrix3(P9)},[e4]:{transfer:Qi,primaries:tx,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.convertSRGBToLinear().applyMatrix3(B9),fromReference:i=>i.applyMatrix3(P9).convertLinearToSRGB()}},Rle=new Set([Qf,Zx]),Mi={enabled:!0,_workingColorSpace:Qf,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!Rle.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;const n=qv[e].toReference,r=qv[t].fromReference;return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this._workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this._workingColorSpace)},getPrimaries:function(i){return qv[i].primaries},getTransfer:function(i){return i===uf?Z_:qv[i].transfer},getLuminanceCoefficients:function(i,e=this._workingColorSpace){return i.fromArray(qv[e].luminanceCoefficients)}};function L1(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function AR(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let $m,rY=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{$m===void 0&&($m=rx("canvas")),$m.width=e.width,$m.height=e.height;const n=$m.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=$m}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=rx("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=L1(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(L1(t[n]/255)*255):t[n]=L1(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Ple=0,h0=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ple++}),this.uuid=Ul(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(mR(r[o].image)):s.push(mR(r[o]))}else s=mR(r);n.url=s}return t||(e.images[this.uuid]=n),n}};function mR(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?rY.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ble=0,or=class bM extends Fu{constructor(e=bM.DEFAULT_IMAGE,t=bM.DEFAULT_MAPPING,n=ga,r=ga,s=pr,o=Mu,a=Fo,l=xc,u=bM.DEFAULT_ANISOTROPY,c=uf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ble++}),this.uuid=Ul(),this.name="",this.source=new h0(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new je(0,0),this.repeat=new je(1,1),this.center=new je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new qn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==VC)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case dh:e.x=e.x-Math.floor(e.x);break;case ga:e.x=e.x<0?0:1;break;case ay:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case dh:e.y=e.y-Math.floor(e.y);break;case ga:e.y=e.y<0?0:1;break;case ay:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};or.DEFAULT_IMAGE=null;or.DEFAULT_MAPPING=VC;or.DEFAULT_ANISOTROPY=1;let In=class sY{constructor(e=0,t=0,n=0,r=1){sY.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,u=l[0],c=l[4],h=l[8],f=l[1],d=l[5],p=l[9],v=l[2],b=l[6],_=l[10];if(Math.abs(c-f)<.01&&Math.abs(h-v)<.01&&Math.abs(p-b)<.01){if(Math.abs(c+f)<.1&&Math.abs(h+v)<.1&&Math.abs(p+b)<.1&&Math.abs(u+d+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(u+1)/2,R=(d+1)/2,L=(_+1)/2,I=(c+f)/4,D=(h+v)/4,k=(p+b)/4;return E>R&&E>L?E<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(E),r=I/n,s=D/n):R>L?R<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(R),n=I/r,s=k/r):L<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(L),n=D/s,r=k/s),this.set(n,r,s,t),this}let M=Math.sqrt((b-p)*(b-p)+(h-v)*(h-v)+(f-c)*(f-c));return Math.abs(M)<.001&&(M=1),this.x=(b-p)/M,this.y=(h-v)/M,this.z=(f-c)/M,this.w=Math.acos((u+d+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},oY=class extends Fu{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new In(0,0,e,t),this.scissorTest=!1,this.viewport=new In(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:pr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new or(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new h0(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},ql=class extends oY{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}},t4=class extends or{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Es,this.minFilter=Es,this.wrapR=ga,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};class Ile extends ql{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new t4(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class mL extends or{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Es,this.minFilter=Es,this.wrapR=ga,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Nle extends ql{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new mL(null,e,t,n),this.texture.isRenderTargetTexture=!0}}let xi=class{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],u=n[r+1],c=n[r+2],h=n[r+3];const f=s[o+0],d=s[o+1],p=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h;return}if(a===1){e[t+0]=f,e[t+1]=d,e[t+2]=p,e[t+3]=v;return}if(h!==v||l!==f||u!==d||c!==p){let b=1-a;const _=l*f+u*d+c*p+h*v,M=_>=0?1:-1,E=1-_*_;if(E>Number.EPSILON){const L=Math.sqrt(E),I=Math.atan2(L,_*M);b=Math.sin(b*I)/L,a=Math.sin(a*I)/L}const R=a*M;if(l=l*b+f*R,u=u*b+d*R,c=c*b+p*R,h=h*b+v*R,b===1-a){const L=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=L,u*=L,c*=L,h*=L}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],u=n[r+2],c=n[r+3],h=s[o],f=s[o+1],d=s[o+2],p=s[o+3];return e[t]=a*p+c*h+l*d-u*f,e[t+1]=l*p+c*f+u*h-a*d,e[t+2]=u*p+c*d+a*f-l*h,e[t+3]=c*p-a*h-l*f-u*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(n/2),c=a(r/2),h=a(s/2),f=l(n/2),d=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=f*c*h+u*d*p,this._y=u*d*h-f*c*p,this._z=u*c*p+f*d*h,this._w=u*c*h-f*d*p;break;case"YXZ":this._x=f*c*h+u*d*p,this._y=u*d*h-f*c*p,this._z=u*c*p-f*d*h,this._w=u*c*h+f*d*p;break;case"ZXY":this._x=f*c*h-u*d*p,this._y=u*d*h+f*c*p,this._z=u*c*p+f*d*h,this._w=u*c*h-f*d*p;break;case"ZYX":this._x=f*c*h-u*d*p,this._y=u*d*h+f*c*p,this._z=u*c*p-f*d*h,this._w=u*c*h+f*d*p;break;case"YZX":this._x=f*c*h+u*d*p,this._y=u*d*h+f*c*p,this._z=u*c*p-f*d*h,this._w=u*c*h-f*d*p;break;case"XZY":this._x=f*c*h-u*d*p,this._y=u*d*h-f*c*p,this._z=u*c*p+f*d*h,this._w=u*c*h+f*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],h=t[10],f=n+a+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-l)*d,this._y=(s-u)*d,this._z=(o-r)*d}else if(n>a&&n>h){const d=2*Math.sqrt(1+n-a-h);this._w=(c-l)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(s+u)/d}else if(a>h){const d=2*Math.sqrt(1+a-n-h);this._w=(s-u)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+h-n-a);this._w=(o-r)/d,this._x=(s+u)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ur(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=n*c+o*a+r*u-s*l,this._y=r*c+o*l+s*a-n*u,this._z=s*c+o*u+n*l-r*a,this._w=o*c-n*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*n+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),h=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=o*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},ne=class aY{constructor(e=0,t=0,n=0){aY.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(I9.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(I9.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*n),c=2*(a*t-s*r),h=2*(s*n-o*t);return this.x=t+l*u+o*h-a*c,this.y=n+l*c+a*u-s*h,this.z=r+l*h+s*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return gR.copy(this).projectOnVector(e),this.sub(gR)}reflect(e){return this.sub(gR.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ur(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const gR=new ne,I9=new xi;let Zr=class{constructor(e=new ne(1/0,1/0,1/0),t=new ne(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Xu.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Xu.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Xu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Xu):Xu.fromBufferAttribute(s,o),Xu.applyMatrix4(e.matrixWorld),this.expandByPoint(Xu);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Qw.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Qw.copy(n.boundingBox)),Qw.applyMatrix4(e.matrixWorld),this.union(Qw)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Xu),Xu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Vv),Kw.subVectors(this.max,Vv),Wm.subVectors(e.a,Vv),Xm.subVectors(e.b,Vv),Ym.subVectors(e.c,Vv),Sd.subVectors(Xm,Wm),Md.subVectors(Ym,Xm),wA.subVectors(Wm,Ym);let t=[0,-Sd.z,Sd.y,0,-Md.z,Md.y,0,-wA.z,wA.y,Sd.z,0,-Sd.x,Md.z,0,-Md.x,wA.z,0,-wA.x,-Sd.y,Sd.x,0,-Md.y,Md.x,0,-wA.y,wA.x,0];return!yR(t,Wm,Xm,Ym,Kw)||(t=[1,0,0,0,1,0,0,0,1],!yR(t,Wm,Xm,Ym,Kw))?!1:(Jw.crossVectors(Sd,Md),t=[Jw.x,Jw.y,Jw.z],yR(t,Wm,Xm,Ym,Kw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Xu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Xu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Oh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Oh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Oh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Oh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Oh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Oh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Oh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Oh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Oh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const Oh=[new ne,new ne,new ne,new ne,new ne,new ne,new ne,new ne],Xu=new ne,Qw=new Zr,Wm=new ne,Xm=new ne,Ym=new ne,Sd=new ne,Md=new ne,wA=new ne,Vv=new ne,Kw=new ne,Jw=new ne,SA=new ne;function yR(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){SA.fromArray(i,s);const a=r.x*Math.abs(SA.x)+r.y*Math.abs(SA.y)+r.z*Math.abs(SA.z),l=e.dot(SA),u=t.dot(SA),c=n.dot(SA);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const Dle=new Zr,jv=new ne,vR=new ne;let ds=class{constructor(e=new ne,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Dle.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;jv.subVectors(e,this.center);const t=jv.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(jv,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(vR.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(jv.copy(e.center).add(vR)),this.expandByPoint(jv.copy(e.center).sub(vR))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Fh=new ne,_R=new ne,Zw=new ne,Td=new ne,xR=new ne,eS=new ne,bR=new ne;let $p=class{constructor(e=new ne,t=new ne(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Fh)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Fh.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Fh.copy(this.origin).addScaledVector(this.direction,t),Fh.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){_R.copy(e).add(t).multiplyScalar(.5),Zw.copy(t).sub(e).normalize(),Td.copy(this.origin).sub(_R);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Zw),a=Td.dot(this.direction),l=-Td.dot(Zw),u=Td.lengthSq(),c=Math.abs(1-o*o);let h,f,d,p;if(c>0)if(h=o*l-a,f=o*a-l,p=s*c,h>=0)if(f>=-p)if(f<=p){const v=1/c;h*=v,f*=v,d=h*(h+o*f+2*a)+f*(o*h+f+2*l)+u}else f=s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+u;else f=-s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+u;else f<=-p?(h=Math.max(0,-(-o*s+a)),f=h>0?-s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+u):f<=p?(h=0,f=Math.min(Math.max(-s,-l),s),d=f*(f+2*l)+u):(h=Math.max(0,-(o*s+a)),f=h>0?s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+u);else f=o>0?-s:s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(_R).addScaledVector(Zw,f),d}intersectSphere(e,t){Fh.subVectors(e.center,this.origin);const n=Fh.dot(this.direction),r=Fh.dot(Fh)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,f=this.origin;return u>=0?(n=(e.min.x-f.x)*u,r=(e.max.x-f.x)*u):(n=(e.max.x-f.x)*u,r=(e.min.x-f.x)*u),c>=0?(s=(e.min.y-f.y)*c,o=(e.max.y-f.y)*c):(s=(e.max.y-f.y)*c,o=(e.min.y-f.y)*c),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),n>l||a>r)||((a>n||n!==n)&&(n=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Fh)!==null}intersectTriangle(e,t,n,r,s){xR.subVectors(t,e),eS.subVectors(n,e),bR.crossVectors(xR,eS);let o=this.direction.dot(bR),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Td.subVectors(this.origin,e);const l=a*this.direction.dot(eS.crossVectors(Td,eS));if(l<0)return null;const u=a*this.direction.dot(xR.cross(Td));if(u<0||l+u>o)return null;const c=-a*Td.dot(bR);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},kt=class xB{constructor(e,t,n,r,s,o,a,l,u,c,h,f,d,p,v,b){xB.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,u,c,h,f,d,p,v,b)}set(e,t,n,r,s,o,a,l,u,c,h,f,d,p,v,b){const _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=u,_[6]=c,_[10]=h,_[14]=f,_[3]=d,_[7]=p,_[11]=v,_[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new xB().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Qm.setFromMatrixColumn(e,0).length(),s=1/Qm.setFromMatrixColumn(e,1).length(),o=1/Qm.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),u=Math.sin(r),c=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=o*c,d=o*h,p=a*c,v=a*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=d+p*u,t[5]=f-v*u,t[9]=-a*l,t[2]=v-f*u,t[6]=p+d*u,t[10]=o*l}else if(e.order==="YXZ"){const f=l*c,d=l*h,p=u*c,v=u*h;t[0]=f+v*a,t[4]=p*a-d,t[8]=o*u,t[1]=o*h,t[5]=o*c,t[9]=-a,t[2]=d*a-p,t[6]=v+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*c,d=l*h,p=u*c,v=u*h;t[0]=f-v*a,t[4]=-o*h,t[8]=p+d*a,t[1]=d+p*a,t[5]=o*c,t[9]=v-f*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*c,d=o*h,p=a*c,v=a*h;t[0]=l*c,t[4]=p*u-d,t[8]=f*u+v,t[1]=l*h,t[5]=v*u+f,t[9]=d*u-p,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,d=o*u,p=a*l,v=a*u;t[0]=l*c,t[4]=v-f*h,t[8]=p*h+d,t[1]=h,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=d*h+p,t[10]=f-v*h}else if(e.order==="XZY"){const f=o*l,d=o*u,p=a*l,v=a*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=f*h+v,t[5]=o*c,t[9]=d*h-p,t[2]=p*h-d,t[6]=a*c,t[10]=v*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Lle,e,Ole)}lookAt(e,t,n){const r=this.elements;return gl.subVectors(e,t),gl.lengthSq()===0&&(gl.z=1),gl.normalize(),Ed.crossVectors(n,gl),Ed.lengthSq()===0&&(Math.abs(n.z)===1?gl.x+=1e-4:gl.z+=1e-4,gl.normalize(),Ed.crossVectors(n,gl)),Ed.normalize(),tS.crossVectors(gl,Ed),r[0]=Ed.x,r[4]=tS.x,r[8]=gl.x,r[1]=Ed.y,r[5]=tS.y,r[9]=gl.y,r[2]=Ed.z,r[6]=tS.z,r[10]=gl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],u=n[12],c=n[1],h=n[5],f=n[9],d=n[13],p=n[2],v=n[6],b=n[10],_=n[14],M=n[3],E=n[7],R=n[11],L=n[15],I=r[0],D=r[4],k=r[8],G=r[12],O=r[1],U=r[5],Q=r[9],X=r[13],ee=r[2],K=r[6],Z=r[10],he=r[14],j=r[3],ie=r[7],ae=r[11],pe=r[15];return s[0]=o*I+a*O+l*ee+u*j,s[4]=o*D+a*U+l*K+u*ie,s[8]=o*k+a*Q+l*Z+u*ae,s[12]=o*G+a*X+l*he+u*pe,s[1]=c*I+h*O+f*ee+d*j,s[5]=c*D+h*U+f*K+d*ie,s[9]=c*k+h*Q+f*Z+d*ae,s[13]=c*G+h*X+f*he+d*pe,s[2]=p*I+v*O+b*ee+_*j,s[6]=p*D+v*U+b*K+_*ie,s[10]=p*k+v*Q+b*Z+_*ae,s[14]=p*G+v*X+b*he+_*pe,s[3]=M*I+E*O+R*ee+L*j,s[7]=M*D+E*U+R*K+L*ie,s[11]=M*k+E*Q+R*Z+L*ae,s[15]=M*G+E*X+R*he+L*pe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],h=e[6],f=e[10],d=e[14],p=e[3],v=e[7],b=e[11],_=e[15];return p*(+s*l*h-r*u*h-s*a*f+n*u*f+r*a*d-n*l*d)+v*(+t*l*d-t*u*f+s*o*f-r*o*d+r*u*c-s*l*c)+b*(+t*u*h-t*a*d-s*o*h+n*o*d+s*a*c-n*u*c)+_*(-r*a*c-t*l*h+t*a*f+r*o*h-n*o*f+n*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],b=e[14],_=e[15],M=h*b*u-v*f*u+v*l*d-a*b*d-h*l*_+a*f*_,E=p*f*u-c*b*u-p*l*d+o*b*d+c*l*_-o*f*_,R=c*v*u-p*h*u+p*a*d-o*v*d-c*a*_+o*h*_,L=p*h*l-c*v*l-p*a*f+o*v*f+c*a*b-o*h*b,I=t*M+n*E+r*R+s*L;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/I;return e[0]=M*D,e[1]=(v*f*s-h*b*s-v*r*d+n*b*d+h*r*_-n*f*_)*D,e[2]=(a*b*s-v*l*s+v*r*u-n*b*u-a*r*_+n*l*_)*D,e[3]=(h*l*s-a*f*s-h*r*u+n*f*u+a*r*d-n*l*d)*D,e[4]=E*D,e[5]=(c*b*s-p*f*s+p*r*d-t*b*d-c*r*_+t*f*_)*D,e[6]=(p*l*s-o*b*s-p*r*u+t*b*u+o*r*_-t*l*_)*D,e[7]=(o*f*s-c*l*s+c*r*u-t*f*u-o*r*d+t*l*d)*D,e[8]=R*D,e[9]=(p*h*s-c*v*s-p*n*d+t*v*d+c*n*_-t*h*_)*D,e[10]=(o*v*s-p*a*s+p*n*u-t*v*u-o*n*_+t*a*_)*D,e[11]=(c*a*s-o*h*s-c*n*u+t*h*u+o*n*d-t*a*d)*D,e[12]=L*D,e[13]=(c*v*r-p*h*r+p*n*f-t*v*f-c*n*b+t*h*b)*D,e[14]=(p*a*r-o*v*r-p*n*l+t*v*l+o*n*b-t*a*b)*D,e[15]=(o*h*r-c*a*r+c*n*l-t*h*l-o*n*f+t*a*f)*D,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+n,u*a-r*l,u*l+r*a,0,u*a+r*l,c*a+n,c*l-r*o,0,u*l-r*a,c*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,h=a+a,f=s*u,d=s*c,p=s*h,v=o*c,b=o*h,_=a*h,M=l*u,E=l*c,R=l*h,L=n.x,I=n.y,D=n.z;return r[0]=(1-(v+_))*L,r[1]=(d+R)*L,r[2]=(p-E)*L,r[3]=0,r[4]=(d-R)*I,r[5]=(1-(f+_))*I,r[6]=(b+M)*I,r[7]=0,r[8]=(p+E)*D,r[9]=(b-M)*D,r[10]=(1-(f+v))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=Qm.set(r[0],r[1],r[2]).length();const o=Qm.set(r[4],r[5],r[6]).length(),a=Qm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Yu.copy(this);const u=1/s,c=1/o,h=1/a;return Yu.elements[0]*=u,Yu.elements[1]*=u,Yu.elements[2]*=u,Yu.elements[4]*=c,Yu.elements[5]*=c,Yu.elements[6]*=c,Yu.elements[8]*=h,Yu.elements[9]*=h,Yu.elements[10]*=h,t.setFromRotationMatrix(Yu),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o,a=Kc){const l=this.elements,u=2*s/(t-e),c=2*s/(n-r),h=(t+e)/(t-e),f=(n+r)/(n-r);let d,p;if(a===Kc)d=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===ix)d=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,o,a=Kc){const l=this.elements,u=1/(t-e),c=1/(n-r),h=1/(o-s),f=(t+e)*u,d=(n+r)*c;let p,v;if(a===Kc)p=(o+s)*h,v=-2*h;else if(a===ix)p=s*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=v,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}};const Qm=new ne,Yu=new kt,Lle=new ne(0,0,0),Ole=new ne(1,1,1),Ed=new ne,tS=new ne,gl=new ne,N9=new kt,D9=new xi;let Jr=class lY{constructor(e=0,t=0,n=0,r=lY.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],c=r[9],h=r[2],f=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Ur(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ur(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ur(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ur(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Ur(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Ur(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return N9.makeRotationFromQuaternion(e),this.setFromRotationMatrix(N9,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return D9.setFromEuler(this),this.setFromQuaternion(D9,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Jr.DEFAULT_ORDER="XYZ";let b0=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Fle=0;const L9=new ne,Km=new xi,kh=new kt,nS=new ne,$v=new ne,kle=new ne,Ule=new xi,O9=new ne(1,0,0),F9=new ne(0,1,0),k9=new ne(0,0,1),U9={type:"added"},zle={type:"removed"},Jm={type:"childadded",child:null},wR={type:"childremoved",child:null};let Qn=class wM extends Fu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Fle++}),this.uuid=Ul(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=wM.DEFAULT_UP.clone();const e=new ne,t=new Jr,n=new xi,r=new ne(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new kt},normalMatrix:{value:new qn}}),this.matrix=new kt,this.matrixWorld=new kt,this.matrixAutoUpdate=wM.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=wM.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new b0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Km.setFromAxisAngle(e,t),this.quaternion.multiply(Km),this}rotateOnWorldAxis(e,t){return Km.setFromAxisAngle(e,t),this.quaternion.premultiply(Km),this}rotateX(e){return this.rotateOnAxis(O9,e)}rotateY(e){return this.rotateOnAxis(F9,e)}rotateZ(e){return this.rotateOnAxis(k9,e)}translateOnAxis(e,t){return L9.copy(e).applyQuaternion(this.quaternion),this.position.add(L9.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(O9,e)}translateY(e){return this.translateOnAxis(F9,e)}translateZ(e){return this.translateOnAxis(k9,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(kh.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?nS.copy(e):nS.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),$v.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?kh.lookAt($v,nS,this.up):kh.lookAt(nS,$v,this.up),this.quaternion.setFromRotationMatrix(kh),r&&(kh.extractRotation(r.matrixWorld),Km.setFromRotationMatrix(kh),this.quaternion.premultiply(Km.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(U9),Jm.child=e,this.dispatchEvent(Jm),Jm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(zle),wR.child=e,this.dispatchEvent(wR),wR.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),kh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),kh.multiply(e.parent.matrixWorld)),e.applyMatrix4(kh),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(U9),Jm.child=e,this.dispatchEvent(Jm),Jm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($v,e,kle),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($v,Ule,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),h=o(e.shapes),f=o(e.skeletons),d=o(e.animations),p=o(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),c.length>0&&(n.images=c),h.length>0&&(n.shapes=h),f.length>0&&(n.skeletons=f),d.length>0&&(n.animations=d),p.length>0&&(n.nodes=p)}return n.object=r,n;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}};Qn.DEFAULT_UP=new ne(0,1,0);Qn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Qn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Qu=new ne,Uh=new ne,SR=new ne,zh=new ne,Zm=new ne,eg=new ne,z9=new ne,MR=new ne,TR=new ne,ER=new ne,CR=new In,RR=new In,PR=new In;let ep=class Vg{constructor(e=new ne,t=new ne,n=new ne){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Qu.subVectors(e,t),r.cross(Qu);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){Qu.subVectors(r,t),Uh.subVectors(n,t),SR.subVectors(e,t);const o=Qu.dot(Qu),a=Qu.dot(Uh),l=Qu.dot(SR),u=Uh.dot(Uh),c=Uh.dot(SR),h=o*u-a*a;if(h===0)return s.set(0,0,0),null;const f=1/h,d=(u*l-a*c)*f,p=(o*c-a*l)*f;return s.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,zh)===null?!1:zh.x>=0&&zh.y>=0&&zh.x+zh.y<=1}static getInterpolation(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,zh)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,zh.x),l.addScaledVector(o,zh.y),l.addScaledVector(a,zh.z),l)}static getInterpolatedAttribute(e,t,n,r,s,o){return CR.setScalar(0),RR.setScalar(0),PR.setScalar(0),CR.fromBufferAttribute(e,t),RR.fromBufferAttribute(e,n),PR.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(CR,s.x),o.addScaledVector(RR,s.y),o.addScaledVector(PR,s.z),o}static isFrontFacing(e,t,n,r){return Qu.subVectors(n,t),Uh.subVectors(e,t),Qu.cross(Uh).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Qu.subVectors(this.c,this.b),Uh.subVectors(this.a,this.b),Qu.cross(Uh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Vg.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Vg.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return Vg.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Vg.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Vg.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;Zm.subVectors(r,n),eg.subVectors(s,n),MR.subVectors(e,n);const l=Zm.dot(MR),u=eg.dot(MR);if(l<=0&&u<=0)return t.copy(n);TR.subVectors(e,r);const c=Zm.dot(TR),h=eg.dot(TR);if(c>=0&&h<=c)return t.copy(r);const f=l*h-c*u;if(f<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(n).addScaledVector(Zm,o);ER.subVectors(e,s);const d=Zm.dot(ER),p=eg.dot(ER);if(p>=0&&d<=p)return t.copy(s);const v=d*u-l*p;if(v<=0&&u>=0&&p<=0)return a=u/(u-p),t.copy(n).addScaledVector(eg,a);const b=c*p-d*h;if(b<=0&&h-c>=0&&d-p>=0)return z9.subVectors(s,r),a=(h-c)/(h-c+(d-p)),t.copy(r).addScaledVector(z9,a);const _=1/(b+v+f);return o=v*_,a=f*_,t.copy(n).addScaledVector(Zm,o).addScaledVector(eg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}};const uY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cd={h:0,s:0,l:0},iS={h:0,s:0,l:0};function BR(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let vt=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ua){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Mi.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Mi.workingColorSpace){return this.r=e,this.g=t,this.b=n,Mi.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Mi.workingColorSpace){if(e=AL(e,1),t=Ur(t,0,1),n=Ur(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=BR(o,s,e+1/3),this.g=BR(o,s,e),this.b=BR(o,s,e-1/3)}return Mi.toWorkingColorSpace(this,r),this}setStyle(e,t=Ua){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ua){const n=uY[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=L1(e.r),this.g=L1(e.g),this.b=L1(e.b),this}copyLinearToSRGB(e){return this.r=AR(e.r),this.g=AR(e.g),this.b=AR(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ua){return Mi.fromWorkingColorSpace(To.copy(this),e),Math.round(Ur(To.r*255,0,255))*65536+Math.round(Ur(To.g*255,0,255))*256+Math.round(Ur(To.b*255,0,255))}getHexString(e=Ua){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Mi.workingColorSpace){Mi.fromWorkingColorSpace(To.copy(this),t);const n=To.r,r=To.g,s=To.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const h=o-a;switch(u=c<=.5?h/(o+a):h/(2-o-a),o){case n:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-n)/h+2;break;case s:l=(n-r)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Mi.workingColorSpace){return Mi.fromWorkingColorSpace(To.copy(this),t),e.r=To.r,e.g=To.g,e.b=To.b,e}getStyle(e=Ua){Mi.fromWorkingColorSpace(To.copy(this),e);const t=To.r,n=To.g,r=To.b;return e!==Ua?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Cd),this.setHSL(Cd.h+e,Cd.s+t,Cd.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Cd),e.getHSL(iS);const n=A_(Cd.h,iS.h,t),r=A_(Cd.s,iS.s,t),s=A_(Cd.l,iS.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const To=new vt;vt.NAMES=uY;let Gle=0,ps=class extends Fu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Gle++}),this.uuid=Ul(),this.name="",this.type="Material",this.blending=_f,this.side=fh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=AT,this.blendDst=mT,this.blendEquation=Zd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new vt(0,0,0),this.blendAlpha=0,this.depthFunc=z0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=vB,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=WA,this.stencilZFail=WA,this.stencilZPass=WA,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==_f&&(n.blending=this.blending),this.side!==fh&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==AT&&(n.blendSrc=this.blendSrc),this.blendDst!==mT&&(n.blendDst=this.blendDst),this.blendEquation!==Zd&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==z0&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==vB&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==WA&&(n.stencilFail=this.stencilFail),this.stencilZFail!==WA&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==WA&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},va=class extends ps{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.combine=Kx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const cf=Hle();function Hle(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(n[l]=0,n[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(n[l]=1024>>-u-14,n[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(n[l]=u+15<<10,n[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(n[l]=31744,n[l|256]=64512,r[l]=24,r[l|256]=24):(n[l]=31744,n[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Oa(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Ur(i,-65504,65504),cf.floatView[0]=i;const e=cf.uint32View[0],t=e>>23&511;return cf.baseTable[t]+((e&8388607)>>cf.shiftTable[t])}function H2(i){const e=i>>10;return cf.uint32View[0]=cf.mantissaTable[cf.offsetTable[e]+(i&1023)]+cf.exponentTable[e],cf.floatView[0]}const qle={toHalfFloat:Oa,fromHalfFloat:H2},rs=new ne,rS=new je;let Kn=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=nx,this.updateRanges=[],this.gpuType=ya,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)rS.fromBufferAttribute(this,t),rS.applyMatrix3(e),this.setXY(t,rS.x,rS.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)rs.fromBufferAttribute(this,t),rs.applyMatrix3(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)rs.fromBufferAttribute(this,t),rs.applyMatrix4(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)rs.fromBufferAttribute(this,t),rs.applyNormalMatrix(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)rs.fromBufferAttribute(this,t),rs.transformDirection(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=pa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Un(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=pa(t,this.array)),t}setX(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=pa(t,this.array)),t}setY(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=pa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=pa(t,this.array)),t}setW(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),n=Un(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),n=Un(n,this.array),r=Un(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),n=Un(n,this.array),r=Un(r,this.array),s=Un(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==nx&&(e.usage=this.usage),e}};class Vle extends Kn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class jle extends Kn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class $le extends Kn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Wle extends Kn{constructor(e,t,n){super(new Int16Array(e),t,n)}}let n4=class extends Kn{constructor(e,t,n){super(new Uint16Array(e),t,n)}};class Xle extends Kn{constructor(e,t,n){super(new Int32Array(e),t,n)}}let gL=class extends Kn{constructor(e,t,n){super(new Uint32Array(e),t,n)}},Yle=class extends Kn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=H2(this.array[e*this.itemSize]);return this.normalized&&(t=pa(t,this.array)),t}setX(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize]=Oa(t),this}getY(e){let t=H2(this.array[e*this.itemSize+1]);return this.normalized&&(t=pa(t,this.array)),t}setY(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+1]=Oa(t),this}getZ(e){let t=H2(this.array[e*this.itemSize+2]);return this.normalized&&(t=pa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+2]=Oa(t),this}getW(e){let t=H2(this.array[e*this.itemSize+3]);return this.normalized&&(t=pa(t,this.array)),t}setW(e,t){return this.normalized&&(t=Un(t,this.array)),this.array[e*this.itemSize+3]=Oa(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),n=Un(n,this.array)),this.array[e+0]=Oa(t),this.array[e+1]=Oa(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),n=Un(n,this.array),r=Un(r,this.array)),this.array[e+0]=Oa(t),this.array[e+1]=Oa(n),this.array[e+2]=Oa(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Un(t,this.array),n=Un(n,this.array),r=Un(r,this.array),s=Un(s,this.array)),this.array[e+0]=Oa(t),this.array[e+1]=Oa(n),this.array[e+2]=Oa(r),this.array[e+3]=Oa(s),this}},Ht=class extends Kn{constructor(e,t,n){super(new Float32Array(e),t,n)}},Qle=0;const du=new kt,IR=new Qn,tg=new ne,yl=new Zr,Wv=new Zr,ks=new ne;let fn=class cY extends Fu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Qle++}),this.uuid=Ul(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(nY(e)?gL:n4)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new qn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return du.makeRotationFromQuaternion(e),this.applyMatrix4(du),this}rotateX(e){return du.makeRotationX(e),this.applyMatrix4(du),this}rotateY(e){return du.makeRotationY(e),this.applyMatrix4(du),this}rotateZ(e){return du.makeRotationZ(e),this.applyMatrix4(du),this}translate(e,t,n){return du.makeTranslation(e,t,n),this.applyMatrix4(du),this}scale(e,t,n){return du.makeScale(e,t,n),this.applyMatrix4(du),this}lookAt(e){return IR.lookAt(e),IR.updateMatrix(),this.applyMatrix4(IR.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tg).negate(),this.translate(tg.x,tg.y,tg.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ht(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ne(-1/0,-1/0,-1/0),new ne(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];yl.setFromBufferAttribute(s),this.morphTargetsRelative?(ks.addVectors(this.boundingBox.min,yl.min),this.boundingBox.expandByPoint(ks),ks.addVectors(this.boundingBox.max,yl.max),this.boundingBox.expandByPoint(ks)):(this.boundingBox.expandByPoint(yl.min),this.boundingBox.expandByPoint(yl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ds);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ne,1/0);return}if(e){const n=this.boundingSphere.center;if(yl.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Wv.setFromBufferAttribute(a),this.morphTargetsRelative?(ks.addVectors(yl.min,Wv.min),yl.expandByPoint(ks),ks.addVectors(yl.max,Wv.max),yl.expandByPoint(ks)):(yl.expandByPoint(Wv.min),yl.expandByPoint(Wv.max))}yl.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)ks.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(ks));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)ks.fromBufferAttribute(a,u),l&&(tg.fromBufferAttribute(e,u),ks.add(tg)),r=Math.max(r,n.distanceToSquared(ks))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Kn(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let k=0;k<n.count;k++)a[k]=new ne,l[k]=new ne;const u=new ne,c=new ne,h=new ne,f=new je,d=new je,p=new je,v=new ne,b=new ne;function _(k,G,O){u.fromBufferAttribute(n,k),c.fromBufferAttribute(n,G),h.fromBufferAttribute(n,O),f.fromBufferAttribute(s,k),d.fromBufferAttribute(s,G),p.fromBufferAttribute(s,O),c.sub(u),h.sub(u),d.sub(f),p.sub(f);const U=1/(d.x*p.y-p.x*d.y);isFinite(U)&&(v.copy(c).multiplyScalar(p.y).addScaledVector(h,-d.y).multiplyScalar(U),b.copy(h).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(U),a[k].add(v),a[G].add(v),a[O].add(v),l[k].add(b),l[G].add(b),l[O].add(b))}let M=this.groups;M.length===0&&(M=[{start:0,count:e.count}]);for(let k=0,G=M.length;k<G;++k){const O=M[k],U=O.start,Q=O.count;for(let X=U,ee=U+Q;X<ee;X+=3)_(e.getX(X+0),e.getX(X+1),e.getX(X+2))}const E=new ne,R=new ne,L=new ne,I=new ne;function D(k){L.fromBufferAttribute(r,k),I.copy(L);const G=a[k];E.copy(G),E.sub(L.multiplyScalar(L.dot(G))).normalize(),R.crossVectors(I,G);const U=R.dot(l[k])<0?-1:1;o.setXYZW(k,E.x,E.y,E.z,U)}for(let k=0,G=M.length;k<G;++k){const O=M[k],U=O.start,Q=O.count;for(let X=U,ee=U+Q;X<ee;X+=3)D(e.getX(X+0)),D(e.getX(X+1)),D(e.getX(X+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Kn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let f=0,d=n.count;f<d;f++)n.setXYZ(f,0,0,0);const r=new ne,s=new ne,o=new ne,a=new ne,l=new ne,u=new ne,c=new ne,h=new ne;if(e)for(let f=0,d=e.count;f<d;f+=3){const p=e.getX(f+0),v=e.getX(f+1),b=e.getX(f+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,b),c.subVectors(o,s),h.subVectors(r,s),c.cross(h),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,v),u.fromBufferAttribute(n,b),a.add(c),l.add(c),u.add(c),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(b,u.x,u.y,u.z)}else for(let f=0,d=t.count;f<d;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),c.subVectors(o,s),h.subVectors(r,s),c.cross(h),n.setXYZ(f+0,c.x,c.y,c.z),n.setXYZ(f+1,c.x,c.y,c.z),n.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ks.fromBufferAttribute(e,t),ks.normalize(),e.setXYZ(t,ks.x,ks.y,ks.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,h=a.normalized,f=new u.constructor(l.length*c);let d=0,p=0;for(let v=0,b=l.length;v<b;v++){a.isInterleavedBufferAttribute?d=l[v]*a.data.stride+a.offset:d=l[v]*c;for(let _=0;_<c;_++)f[p++]=u[d++]}return new Kn(f,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new cY,n=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,n);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,h=u.length;c<h;c++){const f=u[c],d=e(f,n);l.push(d)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const u=n[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,f=u.length;h<f;h++){const d=u[h];c.push(d.toJSON(e.data))}c.length>0&&(r[l]=c,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const u in r){const c=r[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],h=s[u];for(let f=0,d=h.length;f<d;f++)c.push(h[f].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};const G9=new kt,MA=new $p,sS=new ds,H9=new ne,oS=new ne,aS=new ne,lS=new ne,NR=new ne,uS=new ne,q9=new ne,cS=new ne;let fi=class extends Qn{constructor(e=new fn,t=new va){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){uS.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],h=s[l];c!==0&&(NR.fromBufferAttribute(h,e),o?uS.addScaledVector(NR,c):uS.addScaledVector(NR.sub(t),c))}t.add(uS)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),sS.copy(n.boundingSphere),sS.applyMatrix4(s),MA.copy(e.ray).recast(e.near),!(sS.containsPoint(MA.origin)===!1&&(MA.intersectSphere(sS,H9)===null||MA.origin.distanceToSquared(H9)>(e.far-e.near)**2))&&(G9.copy(s).invert(),MA.copy(e.ray).applyMatrix4(G9),!(n.boundingBox!==null&&MA.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,MA)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,h=s.attributes.normal,f=s.groups,d=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,v=f.length;p<v;p++){const b=f[p],_=o[b.materialIndex],M=Math.max(b.start,d.start),E=Math.min(a.count,Math.min(b.start+b.count,d.start+d.count));for(let R=M,L=E;R<L;R+=3){const I=a.getX(R),D=a.getX(R+1),k=a.getX(R+2);r=hS(this,_,e,n,u,c,h,I,D,k),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const p=Math.max(0,d.start),v=Math.min(a.count,d.start+d.count);for(let b=p,_=v;b<_;b+=3){const M=a.getX(b),E=a.getX(b+1),R=a.getX(b+2);r=hS(this,o,e,n,u,c,h,M,E,R),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,v=f.length;p<v;p++){const b=f[p],_=o[b.materialIndex],M=Math.max(b.start,d.start),E=Math.min(l.count,Math.min(b.start+b.count,d.start+d.count));for(let R=M,L=E;R<L;R+=3){const I=R,D=R+1,k=R+2;r=hS(this,_,e,n,u,c,h,I,D,k),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const p=Math.max(0,d.start),v=Math.min(l.count,d.start+d.count);for(let b=p,_=v;b<_;b+=3){const M=b,E=b+1,R=b+2;r=hS(this,o,e,n,u,c,h,M,E,R),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}}};function Kle(i,e,t,n,r,s,o,a){let l;if(e.side===ho?l=n.intersectTriangle(o,s,r,!0,a):l=n.intersectTriangle(r,s,o,e.side===fh,a),l===null)return null;cS.copy(a),cS.applyMatrix4(i.matrixWorld);const u=t.ray.origin.distanceTo(cS);return u<t.near||u>t.far?null:{distance:u,point:cS.clone(),object:i}}function hS(i,e,t,n,r,s,o,a,l,u){i.getVertexPosition(a,oS),i.getVertexPosition(l,aS),i.getVertexPosition(u,lS);const c=Kle(i,e,t,n,oS,aS,lS,q9);if(c){const h=new ne;ep.getBarycoord(q9,oS,aS,lS,h),r&&(c.uv=ep.getInterpolatedAttribute(r,a,l,u,h,new je)),s&&(c.uv1=ep.getInterpolatedAttribute(s,a,l,u,h,new je)),o&&(c.normal=ep.getInterpolatedAttribute(o,a,l,u,h,new ne),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const f={a,b:l,c:u,normal:new ne,materialIndex:0};ep.getNormal(oS,aS,lS,f.normal),c.face=f,c.barycoord=h}return c}let qy=class hY extends fn{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],h=[];let f=0,d=0;p("z","y","x",-1,-1,n,t,e,o,s,0),p("z","y","x",1,-1,n,t,-e,o,s,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,s,4),p("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new Ht(u,3)),this.setAttribute("normal",new Ht(c,3)),this.setAttribute("uv",new Ht(h,2));function p(v,b,_,M,E,R,L,I,D,k,G){const O=R/D,U=L/k,Q=R/2,X=L/2,ee=I/2,K=D+1,Z=k+1;let he=0,j=0;const ie=new ne;for(let ae=0;ae<Z;ae++){const pe=ae*U-X;for(let Pe=0;Pe<K;Pe++){const He=Pe*O-Q;ie[v]=He*M,ie[b]=pe*E,ie[_]=ee,u.push(ie.x,ie.y,ie.z),ie[v]=0,ie[b]=0,ie[_]=I>0?1:-1,c.push(ie.x,ie.y,ie.z),h.push(Pe/D),h.push(1-ae/k),he+=1}}for(let ae=0;ae<k;ae++)for(let pe=0;pe<D;pe++){const Pe=f+pe+K*ae,He=f+pe+K*(ae+1),Se=f+(pe+1)+K*(ae+1),Oe=f+(pe+1)+K*ae;l.push(Pe,He,Oe),l.push(He,Se,Oe),j+=6}a.addGroup(d,j,G),d+=j,f+=he}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hY(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function dy(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function sa(i){const e={};for(let t=0;t<i.length;t++){const n=dy(i[t]);for(const r in n)e[r]=n[r]}return e}function Jle(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function fY(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Mi.workingColorSpace}const eb={clone:dy,merge:sa};var Zle=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,eue=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let po=class extends ps{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Zle,this.fragmentShader=eue,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=dy(e.uniforms),this.uniformsGroups=Jle(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},tb=class extends Qn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new kt,this.projectionMatrix=new kt,this.projectionMatrixInverse=new kt,this.coordinateSystem=Kc}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const Rd=new ne,V9=new je,j9=new je;let $i=class extends tb{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=fy*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(x0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return fy*2*Math.atan(Math.tan(x0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Rd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Rd.x,Rd.y).multiplyScalar(-e/Rd.z),Rd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Rd.x,Rd.y).multiplyScalar(-e/Rd.z)}getViewSize(e,t){return this.getViewBounds(e,V9,j9),t.subVectors(j9,V9)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(x0*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/u,r*=o.width/l,n*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const ng=-90,ig=1;let dY=class extends Qn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new $i(ng,ig,e,t);r.layers=this.layers,this.add(r);const s=new $i(ng,ig,e,t);s.layers=this.layers,this.add(s);const o=new $i(ng,ig,e,t);o.layers=this.layers,this.add(o);const a=new $i(ng,ig,e,t);a.layers=this.layers,this.add(a);const l=new $i(ng,ig,e,t);l.layers=this.layers,this.add(l);const u=new $i(ng,ig,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Kc)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===ix)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,c]=this.children,h=e.getRenderTarget(),f=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const v=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,l),e.setRenderTarget(n,4,r),e.render(t,u),n.texture.generateMipmaps=v,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(h,f,d),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}},nb=class extends or{constructor(e,t,n,r,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:Df,super(e,t,n,r,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},pY=class extends ql{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new nb(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:pr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new qy(5,5,5),s=new po({name:"CubemapFromEquirect",uniforms:dy(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ho,blending:nh});s.uniforms.tEquirect.value=t;const o=new fi(r,s),a=t.minFilter;return t.minFilter===Mu&&(t.minFilter=pr),new dY(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}};const DR=new ne,tue=new ne,nue=new qn;let jc=class{constructor(e=new ne(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=DR.subVectors(n,t).cross(tue.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(DR),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||nue.getNormalMatrix(e),r=this.coplanarPoint(DR).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const TA=new ds,fS=new ne;let ib=class{constructor(e=new jc,t=new jc,n=new jc,r=new jc,s=new jc,o=new jc){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Kc){const n=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],c=r[5],h=r[6],f=r[7],d=r[8],p=r[9],v=r[10],b=r[11],_=r[12],M=r[13],E=r[14],R=r[15];if(n[0].setComponents(l-s,f-u,b-d,R-_).normalize(),n[1].setComponents(l+s,f+u,b+d,R+_).normalize(),n[2].setComponents(l+o,f+c,b+p,R+M).normalize(),n[3].setComponents(l-o,f-c,b-p,R-M).normalize(),n[4].setComponents(l-a,f-h,b-v,R-E).normalize(),t===Kc)n[5].setComponents(l+a,f+h,b+v,R+E).normalize();else if(t===ix)n[5].setComponents(a,h,v,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),TA.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),TA.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(TA)}intersectsSprite(e){return TA.center.set(0,0,0),TA.radius=.7071067811865476,TA.applyMatrix4(e.matrixWorld),this.intersectsSphere(TA)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(fS.x=r.normal.x>0?e.max.x:e.min.x,fS.y=r.normal.y>0?e.max.y:e.min.y,fS.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(fS)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function AY(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function iue(i){const e=new WeakMap;function t(a,l){const u=a.array,c=a.usage,h=u.byteLength,f=i.createBuffer();i.bindBuffer(l,f),i.bufferData(l,u,c),a.onUploadCallback();let d;if(u instanceof Float32Array)d=i.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?d=i.HALF_FLOAT:d=i.UNSIGNED_SHORT;else if(u instanceof Int16Array)d=i.SHORT;else if(u instanceof Uint32Array)d=i.UNSIGNED_INT;else if(u instanceof Int32Array)d=i.INT;else if(u instanceof Int8Array)d=i.BYTE;else if(u instanceof Uint8Array)d=i.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)d=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:d,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:h}}function n(a,l,u){const c=l.array,h=l.updateRanges;if(i.bindBuffer(u,a),h.length===0)i.bufferSubData(u,0,c);else{h.sort((d,p)=>d.start-p.start);let f=0;for(let d=1;d<h.length;d++){const p=h[f],v=h[d];v.start<=p.start+p.count+1?p.count=Math.max(p.count,v.start+v.count-p.start):(++f,h[f]=v)}h.length=f+1;for(let d=0,p=h.length;d<p;d++){const v=h[d];i.bufferSubData(u,v.start*c.BYTES_PER_ELEMENT,c,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(i.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const c=e.get(a);(!c||c.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,a,l),u.version=a.version}}return{get:r,remove:s,update:o}}class Vy extends fn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),u=a+1,c=l+1,h=e/a,f=t/l,d=[],p=[],v=[],b=[];for(let _=0;_<c;_++){const M=_*f-o;for(let E=0;E<u;E++){const R=E*h-s;p.push(R,-M,0),v.push(0,0,1),b.push(E/a),b.push(1-_/l)}}for(let _=0;_<l;_++)for(let M=0;M<a;M++){const E=M+u*_,R=M+u*(_+1),L=M+1+u*(_+1),I=M+1+u*_;d.push(E,R,I),d.push(R,L,I)}this.setIndex(d),this.setAttribute("position",new Ht(p,3)),this.setAttribute("normal",new Ht(v,3)),this.setAttribute("uv",new Ht(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vy(e.width,e.height,e.widthSegments,e.heightSegments)}}var rue=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,sue=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,oue=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,aue=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,lue=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,uue=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,cue=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,hue=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,fue=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,due=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,pue=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Aue=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,mue=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,gue=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,yue=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,vue=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,_ue=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,xue=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,bue=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,wue=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Sue=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Mue=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Tue=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Eue=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Cue=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Rue=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Pue=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Bue=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Iue=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Nue=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Due="gl_FragColor = linearToOutputTexel( gl_FragColor );",Lue=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Oue=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Fue=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,kue=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Uue=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,zue=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Gue=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Hue=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,que=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Vue=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,jue=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,$ue=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Wue=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Xue=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Yue=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Que=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Kue=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Jue=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Zue=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,ece=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,tce=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,nce=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ice=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,rce=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,sce=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,oce=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,ace=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,lce=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,uce=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,cce=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,hce=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,fce=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,dce=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,pce=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Ace=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,mce=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,gce=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,yce=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,vce=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,_ce=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,xce=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,bce=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,wce=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Sce=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Mce=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Tce=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Ece=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Cce=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Rce=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Pce=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Bce=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Ice=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Nce=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Dce=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Lce=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Oce=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Fce=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,kce=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Uce=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,zce=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Gce=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Hce=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,qce=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Vce=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,jce=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,$ce=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Wce=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Xce=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Yce=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Qce=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Kce=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Jce=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Zce=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ehe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,the=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,nhe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const ihe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,rhe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,she=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ohe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ahe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,lhe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uhe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,che=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,hhe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fhe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,dhe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,phe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ahe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,mhe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ghe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,yhe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vhe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_he=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xhe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,bhe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,whe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,She=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Mhe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,The=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ehe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Che=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rhe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Phe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Bhe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Ihe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Nhe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Dhe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Lhe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ohe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Hn={alphahash_fragment:rue,alphahash_pars_fragment:sue,alphamap_fragment:oue,alphamap_pars_fragment:aue,alphatest_fragment:lue,alphatest_pars_fragment:uue,aomap_fragment:cue,aomap_pars_fragment:hue,batching_pars_vertex:fue,batching_vertex:due,begin_vertex:pue,beginnormal_vertex:Aue,bsdfs:mue,iridescence_fragment:gue,bumpmap_pars_fragment:yue,clipping_planes_fragment:vue,clipping_planes_pars_fragment:_ue,clipping_planes_pars_vertex:xue,clipping_planes_vertex:bue,color_fragment:wue,color_pars_fragment:Sue,color_pars_vertex:Mue,color_vertex:Tue,common:Eue,cube_uv_reflection_fragment:Cue,defaultnormal_vertex:Rue,displacementmap_pars_vertex:Pue,displacementmap_vertex:Bue,emissivemap_fragment:Iue,emissivemap_pars_fragment:Nue,colorspace_fragment:Due,colorspace_pars_fragment:Lue,envmap_fragment:Oue,envmap_common_pars_fragment:Fue,envmap_pars_fragment:kue,envmap_pars_vertex:Uue,envmap_physical_pars_fragment:Que,envmap_vertex:zue,fog_vertex:Gue,fog_pars_vertex:Hue,fog_fragment:que,fog_pars_fragment:Vue,gradientmap_pars_fragment:jue,lightmap_pars_fragment:$ue,lights_lambert_fragment:Wue,lights_lambert_pars_fragment:Xue,lights_pars_begin:Yue,lights_toon_fragment:Kue,lights_toon_pars_fragment:Jue,lights_phong_fragment:Zue,lights_phong_pars_fragment:ece,lights_physical_fragment:tce,lights_physical_pars_fragment:nce,lights_fragment_begin:ice,lights_fragment_maps:rce,lights_fragment_end:sce,logdepthbuf_fragment:oce,logdepthbuf_pars_fragment:ace,logdepthbuf_pars_vertex:lce,logdepthbuf_vertex:uce,map_fragment:cce,map_pars_fragment:hce,map_particle_fragment:fce,map_particle_pars_fragment:dce,metalnessmap_fragment:pce,metalnessmap_pars_fragment:Ace,morphinstance_vertex:mce,morphcolor_vertex:gce,morphnormal_vertex:yce,morphtarget_pars_vertex:vce,morphtarget_vertex:_ce,normal_fragment_begin:xce,normal_fragment_maps:bce,normal_pars_fragment:wce,normal_pars_vertex:Sce,normal_vertex:Mce,normalmap_pars_fragment:Tce,clearcoat_normal_fragment_begin:Ece,clearcoat_normal_fragment_maps:Cce,clearcoat_pars_fragment:Rce,iridescence_pars_fragment:Pce,opaque_fragment:Bce,packing:Ice,premultiplied_alpha_fragment:Nce,project_vertex:Dce,dithering_fragment:Lce,dithering_pars_fragment:Oce,roughnessmap_fragment:Fce,roughnessmap_pars_fragment:kce,shadowmap_pars_fragment:Uce,shadowmap_pars_vertex:zce,shadowmap_vertex:Gce,shadowmask_pars_fragment:Hce,skinbase_vertex:qce,skinning_pars_vertex:Vce,skinning_vertex:jce,skinnormal_vertex:$ce,specularmap_fragment:Wce,specularmap_pars_fragment:Xce,tonemapping_fragment:Yce,tonemapping_pars_fragment:Qce,transmission_fragment:Kce,transmission_pars_fragment:Jce,uv_pars_fragment:Zce,uv_pars_vertex:ehe,uv_vertex:the,worldpos_vertex:nhe,background_vert:ihe,background_frag:rhe,backgroundCube_vert:she,backgroundCube_frag:ohe,cube_vert:ahe,cube_frag:lhe,depth_vert:uhe,depth_frag:che,distanceRGBA_vert:hhe,distanceRGBA_frag:fhe,equirect_vert:dhe,equirect_frag:phe,linedashed_vert:Ahe,linedashed_frag:mhe,meshbasic_vert:ghe,meshbasic_frag:yhe,meshlambert_vert:vhe,meshlambert_frag:_he,meshmatcap_vert:xhe,meshmatcap_frag:bhe,meshnormal_vert:whe,meshnormal_frag:She,meshphong_vert:Mhe,meshphong_frag:The,meshphysical_vert:Ehe,meshphysical_frag:Che,meshtoon_vert:Rhe,meshtoon_frag:Phe,points_vert:Bhe,points_frag:Ihe,shadow_vert:Nhe,shadow_frag:Dhe,sprite_vert:Lhe,sprite_frag:Ohe},Ot={common:{diffuse:{value:new vt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new qn},alphaMap:{value:null},alphaMapTransform:{value:new qn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new qn}},envmap:{envMap:{value:null},envMapRotation:{value:new qn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new qn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new qn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new qn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new qn},normalScale:{value:new je(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new qn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new qn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new qn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new qn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new qn},alphaTest:{value:0},uvTransform:{value:new qn}},sprite:{diffuse:{value:new vt(16777215)},opacity:{value:1},center:{value:new je(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new qn},alphaMap:{value:null},alphaMapTransform:{value:new qn},alphaTest:{value:0}}},ua={basic:{uniforms:sa([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.fog]),vertexShader:Hn.meshbasic_vert,fragmentShader:Hn.meshbasic_frag},lambert:{uniforms:sa([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,Ot.lights,{emissive:{value:new vt(0)}}]),vertexShader:Hn.meshlambert_vert,fragmentShader:Hn.meshlambert_frag},phong:{uniforms:sa([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,Ot.lights,{emissive:{value:new vt(0)},specular:{value:new vt(1118481)},shininess:{value:30}}]),vertexShader:Hn.meshphong_vert,fragmentShader:Hn.meshphong_frag},standard:{uniforms:sa([Ot.common,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.roughnessmap,Ot.metalnessmap,Ot.fog,Ot.lights,{emissive:{value:new vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Hn.meshphysical_vert,fragmentShader:Hn.meshphysical_frag},toon:{uniforms:sa([Ot.common,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.gradientmap,Ot.fog,Ot.lights,{emissive:{value:new vt(0)}}]),vertexShader:Hn.meshtoon_vert,fragmentShader:Hn.meshtoon_frag},matcap:{uniforms:sa([Ot.common,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,{matcap:{value:null}}]),vertexShader:Hn.meshmatcap_vert,fragmentShader:Hn.meshmatcap_frag},points:{uniforms:sa([Ot.points,Ot.fog]),vertexShader:Hn.points_vert,fragmentShader:Hn.points_frag},dashed:{uniforms:sa([Ot.common,Ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Hn.linedashed_vert,fragmentShader:Hn.linedashed_frag},depth:{uniforms:sa([Ot.common,Ot.displacementmap]),vertexShader:Hn.depth_vert,fragmentShader:Hn.depth_frag},normal:{uniforms:sa([Ot.common,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,{opacity:{value:1}}]),vertexShader:Hn.meshnormal_vert,fragmentShader:Hn.meshnormal_frag},sprite:{uniforms:sa([Ot.sprite,Ot.fog]),vertexShader:Hn.sprite_vert,fragmentShader:Hn.sprite_frag},background:{uniforms:{uvTransform:{value:new qn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Hn.background_vert,fragmentShader:Hn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new qn}},vertexShader:Hn.backgroundCube_vert,fragmentShader:Hn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Hn.cube_vert,fragmentShader:Hn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Hn.equirect_vert,fragmentShader:Hn.equirect_frag},distanceRGBA:{uniforms:sa([Ot.common,Ot.displacementmap,{referencePosition:{value:new ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Hn.distanceRGBA_vert,fragmentShader:Hn.distanceRGBA_frag},shadow:{uniforms:sa([Ot.lights,Ot.fog,{color:{value:new vt(0)},opacity:{value:1}}]),vertexShader:Hn.shadow_vert,fragmentShader:Hn.shadow_frag}};ua.physical={uniforms:sa([ua.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new qn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new qn},clearcoatNormalScale:{value:new je(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new qn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new qn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new qn},sheen:{value:0},sheenColor:{value:new vt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new qn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new qn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new qn},transmissionSamplerSize:{value:new je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new qn},attenuationDistance:{value:0},attenuationColor:{value:new vt(0)},specularColor:{value:new vt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new qn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new qn},anisotropyVector:{value:new je},anisotropyMap:{value:null},anisotropyMapTransform:{value:new qn}}]),vertexShader:Hn.meshphysical_vert,fragmentShader:Hn.meshphysical_frag};const dS={r:0,b:0,g:0},EA=new Jr,Fhe=new kt;function khe(i,e,t,n,r,s,o){const a=new vt(0);let l=s===!0?0:1,u,c,h=null,f=0,d=null;function p(M){let E=M.isScene===!0?M.background:null;return E&&E.isTexture&&(E=(M.backgroundBlurriness>0?t:e).get(E)),E}function v(M){let E=!1;const R=p(M);R===null?_(a,l):R&&R.isColor&&(_(R,1),E=!0);const L=i.xr.getEnvironmentBlendMode();L==="additive"?n.buffers.color.setClear(0,0,0,1,o):L==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||E)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function b(M,E){const R=p(E);R&&(R.isCubeTexture||R.mapping===Hy)?(c===void 0&&(c=new fi(new qy(1,1,1),new po({name:"BackgroundCubeMaterial",uniforms:dy(ua.backgroundCube.uniforms),vertexShader:ua.backgroundCube.vertexShader,fragmentShader:ua.backgroundCube.fragmentShader,side:ho,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(L,I,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),EA.copy(E.backgroundRotation),EA.x*=-1,EA.y*=-1,EA.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(EA.y*=-1,EA.z*=-1),c.material.uniforms.envMap.value=R,c.material.uniforms.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(Fhe.makeRotationFromEuler(EA)),c.material.toneMapped=Mi.getTransfer(R.colorSpace)!==Qi,(h!==R||f!==R.version||d!==i.toneMapping)&&(c.material.needsUpdate=!0,h=R,f=R.version,d=i.toneMapping),c.layers.enableAll(),M.unshift(c,c.geometry,c.material,0,0,null)):R&&R.isTexture&&(u===void 0&&(u=new fi(new Vy(2,2),new po({name:"BackgroundMaterial",uniforms:dy(ua.background.uniforms),vertexShader:ua.background.vertexShader,fragmentShader:ua.background.fragmentShader,side:fh,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=R,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.toneMapped=Mi.getTransfer(R.colorSpace)!==Qi,R.matrixAutoUpdate===!0&&R.updateMatrix(),u.material.uniforms.uvTransform.value.copy(R.matrix),(h!==R||f!==R.version||d!==i.toneMapping)&&(u.material.needsUpdate=!0,h=R,f=R.version,d=i.toneMapping),u.layers.enableAll(),M.unshift(u,u.geometry,u.material,0,0,null))}function _(M,E){M.getRGB(dS,fY(i)),n.buffers.color.setClear(dS.r,dS.g,dS.b,E,o)}return{getClearColor:function(){return a},setClearColor:function(M,E=1){a.set(M),l=E,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,_(a,l)},render:v,addToRenderList:b}}function Uhe(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=f(null);let s=r,o=!1;function a(O,U,Q,X,ee){let K=!1;const Z=h(X,Q,U);s!==Z&&(s=Z,u(s.object)),K=d(O,X,Q,ee),K&&p(O,X,Q,ee),ee!==null&&e.update(ee,i.ELEMENT_ARRAY_BUFFER),(K||o)&&(o=!1,R(O,U,Q,X),ee!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(ee).buffer))}function l(){return i.createVertexArray()}function u(O){return i.bindVertexArray(O)}function c(O){return i.deleteVertexArray(O)}function h(O,U,Q){const X=Q.wireframe===!0;let ee=n[O.id];ee===void 0&&(ee={},n[O.id]=ee);let K=ee[U.id];K===void 0&&(K={},ee[U.id]=K);let Z=K[X];return Z===void 0&&(Z=f(l()),K[X]=Z),Z}function f(O){const U=[],Q=[],X=[];for(let ee=0;ee<t;ee++)U[ee]=0,Q[ee]=0,X[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:Q,attributeDivisors:X,object:O,attributes:{},index:null}}function d(O,U,Q,X){const ee=s.attributes,K=U.attributes;let Z=0;const he=Q.getAttributes();for(const j in he)if(he[j].location>=0){const ae=ee[j];let pe=K[j];if(pe===void 0&&(j==="instanceMatrix"&&O.instanceMatrix&&(pe=O.instanceMatrix),j==="instanceColor"&&O.instanceColor&&(pe=O.instanceColor)),ae===void 0||ae.attribute!==pe||pe&&ae.data!==pe.data)return!0;Z++}return s.attributesNum!==Z||s.index!==X}function p(O,U,Q,X){const ee={},K=U.attributes;let Z=0;const he=Q.getAttributes();for(const j in he)if(he[j].location>=0){let ae=K[j];ae===void 0&&(j==="instanceMatrix"&&O.instanceMatrix&&(ae=O.instanceMatrix),j==="instanceColor"&&O.instanceColor&&(ae=O.instanceColor));const pe={};pe.attribute=ae,ae&&ae.data&&(pe.data=ae.data),ee[j]=pe,Z++}s.attributes=ee,s.attributesNum=Z,s.index=X}function v(){const O=s.newAttributes;for(let U=0,Q=O.length;U<Q;U++)O[U]=0}function b(O){_(O,0)}function _(O,U){const Q=s.newAttributes,X=s.enabledAttributes,ee=s.attributeDivisors;Q[O]=1,X[O]===0&&(i.enableVertexAttribArray(O),X[O]=1),ee[O]!==U&&(i.vertexAttribDivisor(O,U),ee[O]=U)}function M(){const O=s.newAttributes,U=s.enabledAttributes;for(let Q=0,X=U.length;Q<X;Q++)U[Q]!==O[Q]&&(i.disableVertexAttribArray(Q),U[Q]=0)}function E(O,U,Q,X,ee,K,Z){Z===!0?i.vertexAttribIPointer(O,U,Q,ee,K):i.vertexAttribPointer(O,U,Q,X,ee,K)}function R(O,U,Q,X){v();const ee=X.attributes,K=Q.getAttributes(),Z=U.defaultAttributeValues;for(const he in K){const j=K[he];if(j.location>=0){let ie=ee[he];if(ie===void 0&&(he==="instanceMatrix"&&O.instanceMatrix&&(ie=O.instanceMatrix),he==="instanceColor"&&O.instanceColor&&(ie=O.instanceColor)),ie!==void 0){const ae=ie.normalized,pe=ie.itemSize,Pe=e.get(ie);if(Pe===void 0)continue;const He=Pe.buffer,Se=Pe.type,Oe=Pe.bytesPerElement,Ye=Se===i.INT||Se===i.UNSIGNED_INT||ie.gpuType===$C;if(ie.isInterleavedBufferAttribute){const it=ie.data,Ct=it.stride,qt=ie.offset;if(it.isInstancedInterleavedBuffer){for(let xt=0;xt<j.locationSize;xt++)_(j.location+xt,it.meshPerAttribute);O.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=it.meshPerAttribute*it.count)}else for(let xt=0;xt<j.locationSize;xt++)b(j.location+xt);i.bindBuffer(i.ARRAY_BUFFER,He);for(let xt=0;xt<j.locationSize;xt++)E(j.location+xt,pe/j.locationSize,Se,ae,Ct*Oe,(qt+pe/j.locationSize*xt)*Oe,Ye)}else{if(ie.isInstancedBufferAttribute){for(let it=0;it<j.locationSize;it++)_(j.location+it,ie.meshPerAttribute);O.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let it=0;it<j.locationSize;it++)b(j.location+it);i.bindBuffer(i.ARRAY_BUFFER,He);for(let it=0;it<j.locationSize;it++)E(j.location+it,pe/j.locationSize,Se,ae,pe*Oe,pe/j.locationSize*it*Oe,Ye)}}else if(Z!==void 0){const ae=Z[he];if(ae!==void 0)switch(ae.length){case 2:i.vertexAttrib2fv(j.location,ae);break;case 3:i.vertexAttrib3fv(j.location,ae);break;case 4:i.vertexAttrib4fv(j.location,ae);break;default:i.vertexAttrib1fv(j.location,ae)}}}}M()}function L(){k();for(const O in n){const U=n[O];for(const Q in U){const X=U[Q];for(const ee in X)c(X[ee].object),delete X[ee];delete U[Q]}delete n[O]}}function I(O){if(n[O.id]===void 0)return;const U=n[O.id];for(const Q in U){const X=U[Q];for(const ee in X)c(X[ee].object),delete X[ee];delete U[Q]}delete n[O.id]}function D(O){for(const U in n){const Q=n[U];if(Q[O.id]===void 0)continue;const X=Q[O.id];for(const ee in X)c(X[ee].object),delete X[ee];delete Q[O.id]}}function k(){G(),o=!0,s!==r&&(s=r,u(s.object))}function G(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:k,resetDefaultState:G,dispose:L,releaseStatesOfGeometry:I,releaseStatesOfProgram:D,initAttributes:v,enableAttribute:b,disableUnusedAttributes:M}}function zhe(i,e,t){let n;function r(u){n=u}function s(u,c){i.drawArrays(n,u,c),t.update(c,n,1)}function o(u,c,h){h!==0&&(i.drawArraysInstanced(n,u,c,h),t.update(c,n,h))}function a(u,c,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,u,0,c,0,h);let d=0;for(let p=0;p<h;p++)d+=c[p];t.update(d,n,1)}function l(u,c,h,f){if(h===0)return;const d=e.get("WEBGL_multi_draw");if(d===null)for(let p=0;p<u.length;p++)o(u[p],c[p],f[p]);else{d.multiDrawArraysInstancedWEBGL(n,u,0,c,0,f,0,h);let p=0;for(let v=0;v<h;v++)p+=c[v];for(let v=0;v<f.length;v++)t.update(p,n,f[v])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Ghe(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const D=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(D){return!(D!==Fo&&n.convert(D)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(D){const k=D===Vp&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(D!==xc&&n.convert(D)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&D!==ya&&!k)}function l(D){if(D==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";D="mediump"}return D==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const h=t.logarithmicDepthBuffer===!0,f=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(f===!0){const D=e.get("EXT_clip_control");D.clipControlEXT(D.LOWER_LEFT_EXT,D.ZERO_TO_ONE_EXT)}const d=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),p=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=i.getParameter(i.MAX_TEXTURE_SIZE),b=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),_=i.getParameter(i.MAX_VERTEX_ATTRIBS),M=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),E=i.getParameter(i.MAX_VARYING_VECTORS),R=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),L=p>0,I=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:h,reverseDepthBuffer:f,maxTextures:d,maxVertexTextures:p,maxTextureSize:v,maxCubemapSize:b,maxAttributes:_,maxVertexUniforms:M,maxVaryings:E,maxFragmentUniforms:R,vertexTextures:L,maxSamples:I}}function Hhe(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new jc,a=new qn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const d=h.length!==0||f||n!==0||r;return r=f,n=h.length,d},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){t=c(h,f,0)},this.setState=function(h,f,d){const p=h.clippingPlanes,v=h.clipIntersection,b=h.clipShadows,_=i.get(h);if(!r||p===null||p.length===0||s&&!b)s?c(null):u();else{const M=s?0:n,E=M*4;let R=_.clippingState||null;l.value=R,R=c(p,f,E,d);for(let L=0;L!==E;++L)R[L]=t[L];_.clippingState=R,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=M}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(h,f,d,p){const v=h!==null?h.length:0;let b=null;if(v!==0){if(b=l.value,p!==!0||b===null){const _=d+v*4,M=f.matrixWorldInverse;a.getNormalMatrix(M),(b===null||b.length<_)&&(b=new Float32Array(_));for(let E=0,R=d;E!==v;++E,R+=4)o.copy(h[E]).applyMatrix4(M,a),o.normal.toArray(b,R),b[R+3]=o.constant}l.value=b,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,b}}function qhe(i){let e=new WeakMap;function t(o,a){return a===oy?o.mapping=Df:a===K_&&(o.mapping=wp),o}function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===oy||a===K_)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new pY(l.height);return u.fromEquirectangularTexture(i,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}let qa=class extends tb{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const a1=4,$9=[.125,.215,.35,.446,.526,.582],t0=20,LR=new qa,W9=new vt;let OR=null,FR=0,kR=0,UR=!1;const XA=(1+Math.sqrt(5))/2,rg=1/XA,X9=[new ne(-XA,rg,0),new ne(XA,rg,0),new ne(-rg,0,XA),new ne(rg,0,XA),new ne(0,XA,-rg),new ne(0,XA,rg),new ne(-1,1,-1),new ne(1,1,-1),new ne(-1,1,1),new ne(1,1,1)];let bB=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){OR=this._renderer.getRenderTarget(),FR=this._renderer.getActiveCubeFace(),kR=this._renderer.getActiveMipmapLevel(),UR=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=K9(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Q9(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(OR,FR,kR),this._renderer.xr.enabled=UR,e.scissorTest=!1,pS(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Df||e.mapping===wp?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),OR=this._renderer.getRenderTarget(),FR=this._renderer.getActiveCubeFace(),kR=this._renderer.getActiveMipmapLevel(),UR=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:pr,minFilter:pr,generateMipmaps:!1,type:Vp,format:Fo,colorSpace:Qf,depthBuffer:!1},r=Y9(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Y9(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Vhe(s)),this._blurMaterial=jhe(s,e,t)}return r}_compileMaterial(e){const t=new fi(this._lodPlanes[0],e);this._renderer.compile(t,LR)}_sceneToCubeUV(e,t,n,r){const a=new $i(90,1,t,n),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,f=c.toneMapping;c.getClearColor(W9),c.toneMapping=ih,c.autoClear=!1;const d=new va({name:"PMREM.Background",side:ho,depthWrite:!1,depthTest:!1}),p=new fi(new qy,d);let v=!1;const b=e.background;b?b.isColor&&(d.color.copy(b),e.background=null,v=!0):(d.color.copy(W9),v=!0);for(let _=0;_<6;_++){const M=_%3;M===0?(a.up.set(0,l[_],0),a.lookAt(u[_],0,0)):M===1?(a.up.set(0,0,l[_]),a.lookAt(0,u[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,u[_]));const E=this._cubeSize;pS(r,M*E,_>2?E:0,E,E),c.setRenderTarget(r),v&&c.render(p,a),c.render(e,a)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=f,c.autoClear=h,e.background=b}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Df||e.mapping===wp;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=K9()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Q9());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new fi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;pS(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,LR)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=X9[(r-s-1)%X9.length];this._blur(e,s-1,s,o,a)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new fi(this._lodPlanes[r],u),f=u.uniforms,d=this._sizeLods[n]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*t0-1),v=s/p,b=isFinite(s)?1+Math.floor(c*v):t0;b>t0&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${t0}`);const _=[];let M=0;for(let D=0;D<t0;++D){const k=D/v,G=Math.exp(-k*k/2);_.push(G),D===0?M+=G:D<b&&(M+=2*G)}for(let D=0;D<_.length;D++)_[D]=_[D]/M;f.envMap.value=e.texture,f.samples.value=b,f.weights.value=_,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:E}=this;f.dTheta.value=p,f.mipInt.value=E-n;const R=this._sizeLods[r],L=3*R*(r>E-a1?r-E+a1:0),I=4*(this._cubeSize-R);pS(t,L,I,3*R,2*R),l.setRenderTarget(t),l.render(h,LR)}};function Vhe(i){const e=[],t=[],n=[];let r=i;const s=i-a1+1+$9.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>i-a1?l=$9[o-i+a1-1]:o===0&&(l=0),n.push(l);const u=1/(a-2),c=-u,h=1+u,f=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,p=6,v=3,b=2,_=1,M=new Float32Array(v*p*d),E=new Float32Array(b*p*d),R=new Float32Array(_*p*d);for(let I=0;I<d;I++){const D=I%3*2/3-1,k=I>2?0:-1,G=[D,k,0,D+2/3,k,0,D+2/3,k+1,0,D,k,0,D+2/3,k+1,0,D,k+1,0];M.set(G,v*p*I),E.set(f,b*p*I);const O=[I,I,I,I,I,I];R.set(O,_*p*I)}const L=new fn;L.setAttribute("position",new Kn(M,v)),L.setAttribute("uv",new Kn(E,b)),L.setAttribute("faceIndex",new Kn(R,_)),e.push(L),r>a1&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Y9(i,e,t){const n=new ql(i,e,t);return n.texture.mapping=Hy,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function pS(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function jhe(i,e,t){const n=new Float32Array(t0),r=new ne(0,1,0);return new po({name:"SphericalGaussianBlur",defines:{n:t0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:yL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:nh,depthTest:!1,depthWrite:!1})}function Q9(){return new po({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:yL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:nh,depthTest:!1,depthWrite:!1})}function K9(){return new po({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:yL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:nh,depthTest:!1,depthWrite:!1})}function yL(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function $he(i){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const l=a.mapping,u=l===oy||l===K_,c=l===Df||l===wp;if(u||c){let h=e.get(a);const f=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return t===null&&(t=new bB(i)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const d=a.image;return u&&d&&d.height>0||c&&d&&r(d)?(t===null&&(t=new bB(i)),h=u?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a}function r(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function Whe(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&xM("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Xhe(i,e,t,n){const r={},s=new WeakMap;function o(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);for(const p in f.morphAttributes){const v=f.morphAttributes[p];for(let b=0,_=v.length;b<_;b++)e.remove(v[b])}f.removeEventListener("dispose",o),delete r[f.id];const d=s.get(f);d&&(e.remove(d),s.delete(f)),n.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(h,f){return r[f.id]===!0||(f.addEventListener("dispose",o),r[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const p in f)e.update(f[p],i.ARRAY_BUFFER);const d=h.morphAttributes;for(const p in d){const v=d[p];for(let b=0,_=v.length;b<_;b++)e.update(v[b],i.ARRAY_BUFFER)}}function u(h){const f=[],d=h.index,p=h.attributes.position;let v=0;if(d!==null){const M=d.array;v=d.version;for(let E=0,R=M.length;E<R;E+=3){const L=M[E+0],I=M[E+1],D=M[E+2];f.push(L,I,I,D,D,L)}}else if(p!==void 0){const M=p.array;v=p.version;for(let E=0,R=M.length/3-1;E<R;E+=3){const L=E+0,I=E+1,D=E+2;f.push(L,I,I,D,D,L)}}else return;const b=new(nY(f)?gL:n4)(f,1);b.version=v;const _=s.get(h);_&&e.remove(_),s.set(h,b)}function c(h){const f=s.get(h);if(f){const d=h.index;d!==null&&f.version<d.version&&u(h)}else u(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:c}}function Yhe(i,e,t){let n;function r(f){n=f}let s,o;function a(f){s=f.type,o=f.bytesPerElement}function l(f,d){i.drawElements(n,d,s,f*o),t.update(d,n,1)}function u(f,d,p){p!==0&&(i.drawElementsInstanced(n,d,s,f*o,p),t.update(d,n,p))}function c(f,d,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,d,0,s,f,0,p);let b=0;for(let _=0;_<p;_++)b+=d[_];t.update(b,n,1)}function h(f,d,p,v){if(p===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let _=0;_<f.length;_++)u(f[_]/o,d[_],v[_]);else{b.multiDrawElementsInstancedWEBGL(n,d,0,s,f,0,v,0,p);let _=0;for(let M=0;M<p;M++)_+=d[M];for(let M=0;M<v.length;M++)t.update(_,n,v[M])}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=h}function Qhe(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=a*(s/3);break;case i.LINES:t.lines+=a*(s/2);break;case i.LINE_STRIP:t.lines+=a*(s-1);break;case i.LINE_LOOP:t.lines+=a*s;break;case i.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function Khe(i,e,t){const n=new WeakMap,r=new In;function s(o,a,l){const u=o.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=c!==void 0?c.length:0;let f=n.get(a);if(f===void 0||f.count!==h){let G=function(){D.dispose(),n.delete(a),a.removeEventListener("dispose",G)};f!==void 0&&f.texture.dispose();const d=a.morphAttributes.position!==void 0,p=a.morphAttributes.normal!==void 0,v=a.morphAttributes.color!==void 0,b=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],M=a.morphAttributes.color||[];let E=0;d===!0&&(E=1),p===!0&&(E=2),v===!0&&(E=3);let R=a.attributes.position.count*E,L=1;R>e.maxTextureSize&&(L=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const I=new Float32Array(R*L*4*h),D=new t4(I,R,L,h);D.type=ya,D.needsUpdate=!0;const k=E*4;for(let O=0;O<h;O++){const U=b[O],Q=_[O],X=M[O],ee=R*L*4*O;for(let K=0;K<U.count;K++){const Z=K*k;d===!0&&(r.fromBufferAttribute(U,K),I[ee+Z+0]=r.x,I[ee+Z+1]=r.y,I[ee+Z+2]=r.z,I[ee+Z+3]=0),p===!0&&(r.fromBufferAttribute(Q,K),I[ee+Z+4]=r.x,I[ee+Z+5]=r.y,I[ee+Z+6]=r.z,I[ee+Z+7]=0),v===!0&&(r.fromBufferAttribute(X,K),I[ee+Z+8]=r.x,I[ee+Z+9]=r.y,I[ee+Z+10]=r.z,I[ee+Z+11]=X.itemSize===4?r.w:1)}}f={count:h,texture:D,size:new je(R,L)},n.set(a,f),a.addEventListener("dispose",G)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let d=0;for(let v=0;v<u.length;v++)d+=u[v];const p=a.morphTargetsRelative?1:1-d;l.getUniforms().setValue(i,"morphTargetBaseInfluence",p),l.getUniforms().setValue(i,"morphTargetInfluences",u)}l.getUniforms().setValue(i,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",f.size)}return{update:s}}function Jhe(i,e,t,n){let r=new WeakMap;function s(l){const u=n.render.frame,c=l.geometry,h=e.get(l,c);if(r.get(h)!==u&&(e.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==u&&(f.update(),r.set(f,u))}return h}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}let i4=class extends or{constructor(e,t,n,r,s,o,a,l,u,c=_0){if(c!==_0&&c!==H0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===_0&&(n=Lf),n===void 0&&c===H0&&(n=G0),super(null,r,s,o,a,l,c,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Es,this.minFilter=l!==void 0?l:Es,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};const mY=new or,J9=new i4(1,1),gY=new t4,yY=new mL,vY=new nb,Z9=[],e7=[],t7=new Float32Array(16),n7=new Float32Array(9),i7=new Float32Array(4);function jy(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=Z9[r];if(s===void 0&&(s=new Float32Array(r),Z9[r]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function Ps(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Bs(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function r4(i,e){let t=e7[e];t===void 0&&(t=new Int32Array(e),e7[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function Zhe(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function efe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ps(t,e))return;i.uniform2fv(this.addr,e),Bs(t,e)}}function tfe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ps(t,e))return;i.uniform3fv(this.addr,e),Bs(t,e)}}function nfe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ps(t,e))return;i.uniform4fv(this.addr,e),Bs(t,e)}}function ife(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ps(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Bs(t,e)}else{if(Ps(t,n))return;i7.set(n),i.uniformMatrix2fv(this.addr,!1,i7),Bs(t,n)}}function rfe(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ps(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Bs(t,e)}else{if(Ps(t,n))return;n7.set(n),i.uniformMatrix3fv(this.addr,!1,n7),Bs(t,n)}}function sfe(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ps(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Bs(t,e)}else{if(Ps(t,n))return;t7.set(n),i.uniformMatrix4fv(this.addr,!1,t7),Bs(t,n)}}function ofe(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function afe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ps(t,e))return;i.uniform2iv(this.addr,e),Bs(t,e)}}function lfe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ps(t,e))return;i.uniform3iv(this.addr,e),Bs(t,e)}}function ufe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ps(t,e))return;i.uniform4iv(this.addr,e),Bs(t,e)}}function cfe(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function hfe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ps(t,e))return;i.uniform2uiv(this.addr,e),Bs(t,e)}}function ffe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ps(t,e))return;i.uniform3uiv(this.addr,e),Bs(t,e)}}function dfe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ps(t,e))return;i.uniform4uiv(this.addr,e),Bs(t,e)}}function pfe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(J9.compareFunction=pL,s=J9):s=mY,t.setTexture2D(e||s,r)}function Afe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||yY,r)}function mfe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||vY,r)}function gfe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||gY,r)}function yfe(i){switch(i){case 5126:return Zhe;case 35664:return efe;case 35665:return tfe;case 35666:return nfe;case 35674:return ife;case 35675:return rfe;case 35676:return sfe;case 5124:case 35670:return ofe;case 35667:case 35671:return afe;case 35668:case 35672:return lfe;case 35669:case 35673:return ufe;case 5125:return cfe;case 36294:return hfe;case 36295:return ffe;case 36296:return dfe;case 35678:case 36198:case 36298:case 36306:case 35682:return pfe;case 35679:case 36299:case 36307:return Afe;case 35680:case 36300:case 36308:case 36293:return mfe;case 36289:case 36303:case 36311:case 36292:return gfe}}function vfe(i,e){i.uniform1fv(this.addr,e)}function _fe(i,e){const t=jy(e,this.size,2);i.uniform2fv(this.addr,t)}function xfe(i,e){const t=jy(e,this.size,3);i.uniform3fv(this.addr,t)}function bfe(i,e){const t=jy(e,this.size,4);i.uniform4fv(this.addr,t)}function wfe(i,e){const t=jy(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function Sfe(i,e){const t=jy(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function Mfe(i,e){const t=jy(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Tfe(i,e){i.uniform1iv(this.addr,e)}function Efe(i,e){i.uniform2iv(this.addr,e)}function Cfe(i,e){i.uniform3iv(this.addr,e)}function Rfe(i,e){i.uniform4iv(this.addr,e)}function Pfe(i,e){i.uniform1uiv(this.addr,e)}function Bfe(i,e){i.uniform2uiv(this.addr,e)}function Ife(i,e){i.uniform3uiv(this.addr,e)}function Nfe(i,e){i.uniform4uiv(this.addr,e)}function Dfe(i,e,t){const n=this.cache,r=e.length,s=r4(t,r);Ps(n,s)||(i.uniform1iv(this.addr,s),Bs(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||mY,s[o])}function Lfe(i,e,t){const n=this.cache,r=e.length,s=r4(t,r);Ps(n,s)||(i.uniform1iv(this.addr,s),Bs(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||yY,s[o])}function Ofe(i,e,t){const n=this.cache,r=e.length,s=r4(t,r);Ps(n,s)||(i.uniform1iv(this.addr,s),Bs(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||vY,s[o])}function Ffe(i,e,t){const n=this.cache,r=e.length,s=r4(t,r);Ps(n,s)||(i.uniform1iv(this.addr,s),Bs(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||gY,s[o])}function kfe(i){switch(i){case 5126:return vfe;case 35664:return _fe;case 35665:return xfe;case 35666:return bfe;case 35674:return wfe;case 35675:return Sfe;case 35676:return Mfe;case 5124:case 35670:return Tfe;case 35667:case 35671:return Efe;case 35668:case 35672:return Cfe;case 35669:case 35673:return Rfe;case 5125:return Pfe;case 36294:return Bfe;case 36295:return Ife;case 36296:return Nfe;case 35678:case 36198:case 36298:case 36306:case 35682:return Dfe;case 35679:case 36299:case 36307:return Lfe;case 35680:case 36300:case 36308:case 36293:return Ofe;case 36289:case 36303:case 36311:case 36292:return Ffe}}class Ufe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=yfe(t.type)}}class zfe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=kfe(t.type)}}class Gfe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const zR=/(\w+)(\])?(\[|\.)?/g;function r7(i,e){i.seq.push(e),i.map[e.id]=e}function Hfe(i,e,t){const n=i.name,r=n.length;for(zR.lastIndex=0;;){const s=zR.exec(n),o=zR.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){r7(t,u===void 0?new Ufe(a,i,e):new zfe(a,i,e));break}else{let h=t.map[a];h===void 0&&(h=new Gfe(a),r7(t,h)),t=h}}}class SM{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Hfe(s,o,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function s7(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const qfe=37297;let Vfe=0;function jfe(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}function $fe(i){const e=Mi.getPrimaries(Mi.workingColorSpace),t=Mi.getPrimaries(i);let n;switch(e===t?n="":e===tx&&t===ex?n="LinearDisplayP3ToLinearSRGB":e===ex&&t===tx&&(n="LinearSRGBToLinearDisplayP3"),i){case Qf:case Zx:return[n,"LinearTransferOETF"];case Ua:case e4:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[n,"LinearTransferOETF"]}}function o7(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+jfe(i.getShaderSource(e),o)}else return r}function Wfe(i,e){const t=$fe(e);return`vec4 ${i}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Xfe(i,e){let t;switch(e){case DX:t="Linear";break;case LX:t="Reinhard";break;case OX:t="Cineon";break;case nL:t="ACESFilmic";break;case kX:t="AgX";break;case UX:t="Neutral";break;case FX:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const AS=new ne;function Yfe(){Mi.getLuminanceCoefficients(AS);const i=AS.x.toFixed(4),e=AS.y.toFixed(4),t=AS.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Qfe(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(q2).join(`
`)}function Kfe(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Jfe(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;s.type===i.FLOAT_MAT2&&(a=2),s.type===i.FLOAT_MAT3&&(a=3),s.type===i.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}function q2(i){return i!==""}function a7(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function l7(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Zfe=/^[ \t]*#include +<([\w\d./]+)>/gm;function wB(i){return i.replace(Zfe,tde)}const ede=new Map;function tde(i,e){let t=Hn[e];if(t===void 0){const n=ede.get(e);if(n!==void 0)t=Hn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return wB(t)}const nde=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function u7(i){return i.replace(nde,ide)}function ide(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function c7(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function rde(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===qC?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===u_?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===uc&&(e="SHADOWMAP_TYPE_VSM"),e}function sde(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Df:case wp:e="ENVMAP_TYPE_CUBE";break;case Hy:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ode(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case wp:e="ENVMAP_MODE_REFRACTION";break}return e}function ade(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Kx:e="ENVMAP_BLENDING_MULTIPLY";break;case IX:e="ENVMAP_BLENDING_MIX";break;case NX:e="ENVMAP_BLENDING_ADD";break}return e}function lde(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function ude(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=rde(t),u=sde(t),c=ode(t),h=ade(t),f=lde(t),d=Qfe(t),p=Kfe(s),v=r.createProgram();let b,_,M=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(q2).join(`
`),b.length>0&&(b+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(q2).join(`
`),_.length>0&&(_+=`
`)):(b=[c7(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(q2).join(`
`),_=[c7(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ih?"#define TONE_MAPPING":"",t.toneMapping!==ih?Hn.tonemapping_pars_fragment:"",t.toneMapping!==ih?Xfe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Hn.colorspace_pars_fragment,Wfe("linearToOutputTexel",t.outputColorSpace),Yfe(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(q2).join(`
`)),o=wB(o),o=a7(o,t),o=l7(o,t),a=wB(a),a=a7(a,t),a=l7(a,t),o=u7(o),a=u7(a),t.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,b=[d,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,_=["#define varying in",t.glslVersion===_B?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===_B?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const E=M+b+o,R=M+_+a,L=s7(r,r.VERTEX_SHADER,E),I=s7(r,r.FRAGMENT_SHADER,R);r.attachShader(v,L),r.attachShader(v,I),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v);function D(U){if(i.debug.checkShaderErrors){const Q=r.getProgramInfoLog(v).trim(),X=r.getShaderInfoLog(L).trim(),ee=r.getShaderInfoLog(I).trim();let K=!0,Z=!0;if(r.getProgramParameter(v,r.LINK_STATUS)===!1)if(K=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,v,L,I);else{const he=o7(r,L,"vertex"),j=o7(r,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+`

Material Name: `+U.name+`
Material Type: `+U.type+`

Program Info Log: `+Q+`
`+he+`
`+j)}else Q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Q):(X===""||ee==="")&&(Z=!1);Z&&(U.diagnostics={runnable:K,programLog:Q,vertexShader:{log:X,prefix:b},fragmentShader:{log:ee,prefix:_}})}r.deleteShader(L),r.deleteShader(I),k=new SM(r,v),G=Jfe(r,v)}let k;this.getUniforms=function(){return k===void 0&&D(this),k};let G;this.getAttributes=function(){return G===void 0&&D(this),G};let O=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=r.getProgramParameter(v,qfe)),O},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Vfe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=L,this.fragmentShader=I,this}let cde=0;class hde{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new fde(e),t.set(e,n)),n}}class fde{constructor(e){this.id=cde++,this.code=e,this.usedTimes=0}}function dde(i,e,t,n,r,s,o){const a=new b0,l=new hde,u=new Set,c=[],h=r.logarithmicDepthBuffer,f=r.reverseDepthBuffer,d=r.vertexTextures;let p=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(O){return u.add(O),O===0?"uv":`uv${O}`}function _(O,U,Q,X,ee){const K=X.fog,Z=ee.geometry,he=O.isMeshStandardMaterial?X.environment:null,j=(O.isMeshStandardMaterial?t:e).get(O.envMap||he),ie=j&&j.mapping===Hy?j.image.height:null,ae=v[O.type];O.precision!==null&&(p=r.getMaxPrecision(O.precision),p!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",p,"instead."));const pe=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,Pe=pe!==void 0?pe.length:0;let He=0;Z.morphAttributes.position!==void 0&&(He=1),Z.morphAttributes.normal!==void 0&&(He=2),Z.morphAttributes.color!==void 0&&(He=3);let Se,Oe,Ye,it;if(ae){const qi=ua[ae];Se=qi.vertexShader,Oe=qi.fragmentShader}else Se=O.vertexShader,Oe=O.fragmentShader,l.update(O),Ye=l.getVertexShaderID(O),it=l.getFragmentShaderID(O);const Ct=i.getRenderTarget(),qt=ee.isInstancedMesh===!0,xt=ee.isBatchedMesh===!0,yt=!!O.map,Qe=!!O.matcap,ce=!!j,dt=!!O.aoMap,pt=!!O.lightMap,ut=!!O.bumpMap,ft=!!O.normalMap,Wt=!!O.displacementMap,Rt=!!O.emissiveMap,fe=!!O.metalnessMap,te=!!O.roughnessMap,De=O.anisotropy>0,Te=O.clearcoat>0,Fe=O.dispersion>0,We=O.iridescence>0,Bt=O.sheen>0,ct=O.transmission>0,Ft=De&&!!O.anisotropyMap,vn=Te&&!!O.clearcoatMap,At=Te&&!!O.clearcoatNormalMap,zt=Te&&!!O.clearcoatRoughnessMap,hn=We&&!!O.iridescenceMap,an=We&&!!O.iridescenceThicknessMap,Vt=Bt&&!!O.sheenColorMap,Me=Bt&&!!O.sheenRoughnessMap,Ze=!!O.specularMap,Nt=!!O.specularColorMap,ye=!!O.specularIntensityMap,wt=ct&&!!O.transmissionMap,$e=ct&&!!O.thicknessMap,at=!!O.gradientMap,jt=!!O.alphaMap,Le=O.alphaTest>0,_n=!!O.alphaHash,li=!!O.extensions;let ar=ih;O.toneMapped&&(Ct===null||Ct.isXRRenderTarget===!0)&&(ar=i.toneMapping);const kn={shaderID:ae,shaderType:O.type,shaderName:O.name,vertexShader:Se,fragmentShader:Oe,defines:O.defines,customVertexShaderID:Ye,customFragmentShaderID:it,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:p,batching:xt,batchingColor:xt&&ee._colorsTexture!==null,instancing:qt,instancingColor:qt&&ee.instanceColor!==null,instancingMorph:qt&&ee.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:Ct===null?i.outputColorSpace:Ct.isXRRenderTarget===!0?Ct.texture.colorSpace:Qf,alphaToCoverage:!!O.alphaToCoverage,map:yt,matcap:Qe,envMap:ce,envMapMode:ce&&j.mapping,envMapCubeUVHeight:ie,aoMap:dt,lightMap:pt,bumpMap:ut,normalMap:ft,displacementMap:d&&Wt,emissiveMap:Rt,normalMapObjectSpace:ft&&O.normalMapType===$X,normalMapTangentSpace:ft&&O.normalMapType===jp,metalnessMap:fe,roughnessMap:te,anisotropy:De,anisotropyMap:Ft,clearcoat:Te,clearcoatMap:vn,clearcoatNormalMap:At,clearcoatRoughnessMap:zt,dispersion:Fe,iridescence:We,iridescenceMap:hn,iridescenceThicknessMap:an,sheen:Bt,sheenColorMap:Vt,sheenRoughnessMap:Me,specularMap:Ze,specularColorMap:Nt,specularIntensityMap:ye,transmission:ct,transmissionMap:wt,thicknessMap:$e,gradientMap:at,opaque:O.transparent===!1&&O.blending===_f&&O.alphaToCoverage===!1,alphaMap:jt,alphaTest:Le,alphaHash:_n,combine:O.combine,mapUv:yt&&b(O.map.channel),aoMapUv:dt&&b(O.aoMap.channel),lightMapUv:pt&&b(O.lightMap.channel),bumpMapUv:ut&&b(O.bumpMap.channel),normalMapUv:ft&&b(O.normalMap.channel),displacementMapUv:Wt&&b(O.displacementMap.channel),emissiveMapUv:Rt&&b(O.emissiveMap.channel),metalnessMapUv:fe&&b(O.metalnessMap.channel),roughnessMapUv:te&&b(O.roughnessMap.channel),anisotropyMapUv:Ft&&b(O.anisotropyMap.channel),clearcoatMapUv:vn&&b(O.clearcoatMap.channel),clearcoatNormalMapUv:At&&b(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:zt&&b(O.clearcoatRoughnessMap.channel),iridescenceMapUv:hn&&b(O.iridescenceMap.channel),iridescenceThicknessMapUv:an&&b(O.iridescenceThicknessMap.channel),sheenColorMapUv:Vt&&b(O.sheenColorMap.channel),sheenRoughnessMapUv:Me&&b(O.sheenRoughnessMap.channel),specularMapUv:Ze&&b(O.specularMap.channel),specularColorMapUv:Nt&&b(O.specularColorMap.channel),specularIntensityMapUv:ye&&b(O.specularIntensityMap.channel),transmissionMapUv:wt&&b(O.transmissionMap.channel),thicknessMapUv:$e&&b(O.thicknessMap.channel),alphaMapUv:jt&&b(O.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(ft||De),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,pointsUvs:ee.isPoints===!0&&!!Z.attributes.uv&&(yt||jt),fog:!!K,useFog:O.fog===!0,fogExp2:!!K&&K.isFogExp2,flatShading:O.flatShading===!0,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:f,skinning:ee.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:Pe,morphTextureStride:He,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:O.dithering,shadowMapEnabled:i.shadowMap.enabled&&Q.length>0,shadowMapType:i.shadowMap.type,toneMapping:ar,decodeVideoTexture:yt&&O.map.isVideoTexture===!0&&Mi.getTransfer(O.map.colorSpace)===Qi,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===ao,flipSided:O.side===ho,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:li&&O.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(li&&O.extensions.multiDraw===!0||xt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return kn.vertexUv1s=u.has(1),kn.vertexUv2s=u.has(2),kn.vertexUv3s=u.has(3),u.clear(),kn}function M(O){const U=[];if(O.shaderID?U.push(O.shaderID):(U.push(O.customVertexShaderID),U.push(O.customFragmentShaderID)),O.defines!==void 0)for(const Q in O.defines)U.push(Q),U.push(O.defines[Q]);return O.isRawShaderMaterial===!1&&(E(U,O),R(U,O),U.push(i.outputColorSpace)),U.push(O.customProgramCacheKey),U.join()}function E(O,U){O.push(U.precision),O.push(U.outputColorSpace),O.push(U.envMapMode),O.push(U.envMapCubeUVHeight),O.push(U.mapUv),O.push(U.alphaMapUv),O.push(U.lightMapUv),O.push(U.aoMapUv),O.push(U.bumpMapUv),O.push(U.normalMapUv),O.push(U.displacementMapUv),O.push(U.emissiveMapUv),O.push(U.metalnessMapUv),O.push(U.roughnessMapUv),O.push(U.anisotropyMapUv),O.push(U.clearcoatMapUv),O.push(U.clearcoatNormalMapUv),O.push(U.clearcoatRoughnessMapUv),O.push(U.iridescenceMapUv),O.push(U.iridescenceThicknessMapUv),O.push(U.sheenColorMapUv),O.push(U.sheenRoughnessMapUv),O.push(U.specularMapUv),O.push(U.specularColorMapUv),O.push(U.specularIntensityMapUv),O.push(U.transmissionMapUv),O.push(U.thicknessMapUv),O.push(U.combine),O.push(U.fogExp2),O.push(U.sizeAttenuation),O.push(U.morphTargetsCount),O.push(U.morphAttributeCount),O.push(U.numDirLights),O.push(U.numPointLights),O.push(U.numSpotLights),O.push(U.numSpotLightMaps),O.push(U.numHemiLights),O.push(U.numRectAreaLights),O.push(U.numDirLightShadows),O.push(U.numPointLightShadows),O.push(U.numSpotLightShadows),O.push(U.numSpotLightShadowsWithMaps),O.push(U.numLightProbes),O.push(U.shadowMapType),O.push(U.toneMapping),O.push(U.numClippingPlanes),O.push(U.numClipIntersection),O.push(U.depthPacking)}function R(O,U){a.disableAll(),U.supportsVertexTextures&&a.enable(0),U.instancing&&a.enable(1),U.instancingColor&&a.enable(2),U.instancingMorph&&a.enable(3),U.matcap&&a.enable(4),U.envMap&&a.enable(5),U.normalMapObjectSpace&&a.enable(6),U.normalMapTangentSpace&&a.enable(7),U.clearcoat&&a.enable(8),U.iridescence&&a.enable(9),U.alphaTest&&a.enable(10),U.vertexColors&&a.enable(11),U.vertexAlphas&&a.enable(12),U.vertexUv1s&&a.enable(13),U.vertexUv2s&&a.enable(14),U.vertexUv3s&&a.enable(15),U.vertexTangents&&a.enable(16),U.anisotropy&&a.enable(17),U.alphaHash&&a.enable(18),U.batching&&a.enable(19),U.dispersion&&a.enable(20),U.batchingColor&&a.enable(21),O.push(a.mask),a.disableAll(),U.fog&&a.enable(0),U.useFog&&a.enable(1),U.flatShading&&a.enable(2),U.logarithmicDepthBuffer&&a.enable(3),U.reverseDepthBuffer&&a.enable(4),U.skinning&&a.enable(5),U.morphTargets&&a.enable(6),U.morphNormals&&a.enable(7),U.morphColors&&a.enable(8),U.premultipliedAlpha&&a.enable(9),U.shadowMapEnabled&&a.enable(10),U.doubleSided&&a.enable(11),U.flipSided&&a.enable(12),U.useDepthPacking&&a.enable(13),U.dithering&&a.enable(14),U.transmission&&a.enable(15),U.sheen&&a.enable(16),U.opaque&&a.enable(17),U.pointsUvs&&a.enable(18),U.decodeVideoTexture&&a.enable(19),U.alphaToCoverage&&a.enable(20),O.push(a.mask)}function L(O){const U=v[O.type];let Q;if(U){const X=ua[U];Q=eb.clone(X.uniforms)}else Q=O.uniforms;return Q}function I(O,U){let Q;for(let X=0,ee=c.length;X<ee;X++){const K=c[X];if(K.cacheKey===U){Q=K,++Q.usedTimes;break}}return Q===void 0&&(Q=new ude(i,U,O,s),c.push(Q)),Q}function D(O){if(--O.usedTimes===0){const U=c.indexOf(O);c[U]=c[c.length-1],c.pop(),O.destroy()}}function k(O){l.remove(O)}function G(){l.dispose()}return{getParameters:_,getProgramCacheKey:M,getUniforms:L,acquireProgram:I,releaseProgram:D,releaseShaderCache:k,programs:c,dispose:G}}function pde(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let a=i.get(o);return a===void 0&&(a={},i.set(o,a)),a}function n(o){i.delete(o)}function r(o,a,l){i.get(o)[a]=l}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function Ade(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function h7(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function f7(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function o(h,f,d,p,v,b){let _=i[e];return _===void 0?(_={id:h.id,object:h,geometry:f,material:d,groupOrder:p,renderOrder:h.renderOrder,z:v,group:b},i[e]=_):(_.id=h.id,_.object=h,_.geometry=f,_.material=d,_.groupOrder=p,_.renderOrder=h.renderOrder,_.z=v,_.group=b),e++,_}function a(h,f,d,p,v,b){const _=o(h,f,d,p,v,b);d.transmission>0?n.push(_):d.transparent===!0?r.push(_):t.push(_)}function l(h,f,d,p,v,b){const _=o(h,f,d,p,v,b);d.transmission>0?n.unshift(_):d.transparent===!0?r.unshift(_):t.unshift(_)}function u(h,f){t.length>1&&t.sort(h||Ade),n.length>1&&n.sort(f||h7),r.length>1&&r.sort(f||h7)}function c(){for(let h=e,f=i.length;h<f;h++){const d=i[h];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:a,unshift:l,finish:c,sort:u}}function mde(){let i=new WeakMap;function e(n,r){const s=i.get(n);let o;return s===void 0?(o=new f7,i.set(n,[o])):r>=s.length?(o=new f7,s.push(o)):o=s[r],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function gde(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ne,color:new vt};break;case"SpotLight":t={position:new ne,direction:new ne,color:new vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ne,color:new vt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ne,skyColor:new vt,groundColor:new vt};break;case"RectAreaLight":t={color:new vt,position:new ne,halfWidth:new ne,halfHeight:new ne};break}return i[e.id]=t,t}}}function yde(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let vde=0;function _de(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function xde(i){const e=new gde,t=yde(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new ne);const r=new ne,s=new kt,o=new kt;function a(u){let c=0,h=0,f=0;for(let G=0;G<9;G++)n.probe[G].set(0,0,0);let d=0,p=0,v=0,b=0,_=0,M=0,E=0,R=0,L=0,I=0,D=0;u.sort(_de);for(let G=0,O=u.length;G<O;G++){const U=u[G],Q=U.color,X=U.intensity,ee=U.distance,K=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)c+=Q.r*X,h+=Q.g*X,f+=Q.b*X;else if(U.isLightProbe){for(let Z=0;Z<9;Z++)n.probe[Z].addScaledVector(U.sh.coefficients[Z],X);D++}else if(U.isDirectionalLight){const Z=e.get(U);if(Z.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){const he=U.shadow,j=t.get(U);j.shadowIntensity=he.intensity,j.shadowBias=he.bias,j.shadowNormalBias=he.normalBias,j.shadowRadius=he.radius,j.shadowMapSize=he.mapSize,n.directionalShadow[d]=j,n.directionalShadowMap[d]=K,n.directionalShadowMatrix[d]=U.shadow.matrix,M++}n.directional[d]=Z,d++}else if(U.isSpotLight){const Z=e.get(U);Z.position.setFromMatrixPosition(U.matrixWorld),Z.color.copy(Q).multiplyScalar(X),Z.distance=ee,Z.coneCos=Math.cos(U.angle),Z.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),Z.decay=U.decay,n.spot[v]=Z;const he=U.shadow;if(U.map&&(n.spotLightMap[L]=U.map,L++,he.updateMatrices(U),U.castShadow&&I++),n.spotLightMatrix[v]=he.matrix,U.castShadow){const j=t.get(U);j.shadowIntensity=he.intensity,j.shadowBias=he.bias,j.shadowNormalBias=he.normalBias,j.shadowRadius=he.radius,j.shadowMapSize=he.mapSize,n.spotShadow[v]=j,n.spotShadowMap[v]=K,R++}v++}else if(U.isRectAreaLight){const Z=e.get(U);Z.color.copy(Q).multiplyScalar(X),Z.halfWidth.set(U.width*.5,0,0),Z.halfHeight.set(0,U.height*.5,0),n.rectArea[b]=Z,b++}else if(U.isPointLight){const Z=e.get(U);if(Z.color.copy(U.color).multiplyScalar(U.intensity),Z.distance=U.distance,Z.decay=U.decay,U.castShadow){const he=U.shadow,j=t.get(U);j.shadowIntensity=he.intensity,j.shadowBias=he.bias,j.shadowNormalBias=he.normalBias,j.shadowRadius=he.radius,j.shadowMapSize=he.mapSize,j.shadowCameraNear=he.camera.near,j.shadowCameraFar=he.camera.far,n.pointShadow[p]=j,n.pointShadowMap[p]=K,n.pointShadowMatrix[p]=U.shadow.matrix,E++}n.point[p]=Z,p++}else if(U.isHemisphereLight){const Z=e.get(U);Z.skyColor.copy(U.color).multiplyScalar(X),Z.groundColor.copy(U.groundColor).multiplyScalar(X),n.hemi[_]=Z,_++}}b>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ot.LTC_FLOAT_1,n.rectAreaLTC2=Ot.LTC_FLOAT_2):(n.rectAreaLTC1=Ot.LTC_HALF_1,n.rectAreaLTC2=Ot.LTC_HALF_2)),n.ambient[0]=c,n.ambient[1]=h,n.ambient[2]=f;const k=n.hash;(k.directionalLength!==d||k.pointLength!==p||k.spotLength!==v||k.rectAreaLength!==b||k.hemiLength!==_||k.numDirectionalShadows!==M||k.numPointShadows!==E||k.numSpotShadows!==R||k.numSpotMaps!==L||k.numLightProbes!==D)&&(n.directional.length=d,n.spot.length=v,n.rectArea.length=b,n.point.length=p,n.hemi.length=_,n.directionalShadow.length=M,n.directionalShadowMap.length=M,n.pointShadow.length=E,n.pointShadowMap.length=E,n.spotShadow.length=R,n.spotShadowMap.length=R,n.directionalShadowMatrix.length=M,n.pointShadowMatrix.length=E,n.spotLightMatrix.length=R+L-I,n.spotLightMap.length=L,n.numSpotLightShadowsWithMaps=I,n.numLightProbes=D,k.directionalLength=d,k.pointLength=p,k.spotLength=v,k.rectAreaLength=b,k.hemiLength=_,k.numDirectionalShadows=M,k.numPointShadows=E,k.numSpotShadows=R,k.numSpotMaps=L,k.numLightProbes=D,n.version=vde++)}function l(u,c){let h=0,f=0,d=0,p=0,v=0;const b=c.matrixWorldInverse;for(let _=0,M=u.length;_<M;_++){const E=u[_];if(E.isDirectionalLight){const R=n.directional[h];R.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(b),h++}else if(E.isSpotLight){const R=n.spot[d];R.position.setFromMatrixPosition(E.matrixWorld),R.position.applyMatrix4(b),R.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(b),d++}else if(E.isRectAreaLight){const R=n.rectArea[p];R.position.setFromMatrixPosition(E.matrixWorld),R.position.applyMatrix4(b),o.identity(),s.copy(E.matrixWorld),s.premultiply(b),o.extractRotation(s),R.halfWidth.set(E.width*.5,0,0),R.halfHeight.set(0,E.height*.5,0),R.halfWidth.applyMatrix4(o),R.halfHeight.applyMatrix4(o),p++}else if(E.isPointLight){const R=n.point[f];R.position.setFromMatrixPosition(E.matrixWorld),R.position.applyMatrix4(b),f++}else if(E.isHemisphereLight){const R=n.hemi[v];R.direction.setFromMatrixPosition(E.matrixWorld),R.direction.transformDirection(b),v++}}}return{setup:a,setupView:l,state:n}}function d7(i){const e=new xde(i),t=[],n=[];function r(c){u.camera=c,t.length=0,n.length=0}function s(c){t.push(c)}function o(c){n.push(c)}function a(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function bde(i){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new d7(i),e.set(r,[a])):s>=o.length?(a=new d7(i),o.push(a)):a=o[s],a}function n(){e=new WeakMap}return{get:t,dispose:n}}class vL extends ps{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=VX,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class _L extends ps{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const wde=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Sde=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Mde(i,e,t){let n=new ib;const r=new je,s=new je,o=new In,a=new vL({depthPacking:jX}),l=new _L,u={},c=t.maxTextureSize,h={[fh]:ho,[ho]:fh,[ao]:ao},f=new po({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new je},radius:{value:4}},vertexShader:wde,fragmentShader:Sde}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const p=new fn;p.setAttribute("position",new Kn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new fi(p,f),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=qC;let _=this.type;this.render=function(I,D,k){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||I.length===0)return;const G=i.getRenderTarget(),O=i.getActiveCubeFace(),U=i.getActiveMipmapLevel(),Q=i.state;Q.setBlending(nh),Q.buffers.color.setClear(1,1,1,1),Q.buffers.depth.setTest(!0),Q.setScissorTest(!1);const X=_!==uc&&this.type===uc,ee=_===uc&&this.type!==uc;for(let K=0,Z=I.length;K<Z;K++){const he=I[K],j=he.shadow;if(j===void 0){console.warn("THREE.WebGLShadowMap:",he,"has no shadow.");continue}if(j.autoUpdate===!1&&j.needsUpdate===!1)continue;r.copy(j.mapSize);const ie=j.getFrameExtents();if(r.multiply(ie),s.copy(j.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/ie.x),r.x=s.x*ie.x,j.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/ie.y),r.y=s.y*ie.y,j.mapSize.y=s.y)),j.map===null||X===!0||ee===!0){const pe=this.type!==uc?{minFilter:Es,magFilter:Es}:{};j.map!==null&&j.map.dispose(),j.map=new ql(r.x,r.y,pe),j.map.texture.name=he.name+".shadowMap",j.camera.updateProjectionMatrix()}i.setRenderTarget(j.map),i.clear();const ae=j.getViewportCount();for(let pe=0;pe<ae;pe++){const Pe=j.getViewport(pe);o.set(s.x*Pe.x,s.y*Pe.y,s.x*Pe.z,s.y*Pe.w),Q.viewport(o),j.updateMatrices(he,pe),n=j.getFrustum(),R(D,k,j.camera,he,this.type)}j.isPointLightShadow!==!0&&this.type===uc&&M(j,k),j.needsUpdate=!1}_=this.type,b.needsUpdate=!1,i.setRenderTarget(G,O,U)};function M(I,D){const k=e.update(v);f.defines.VSM_SAMPLES!==I.blurSamples&&(f.defines.VSM_SAMPLES=I.blurSamples,d.defines.VSM_SAMPLES=I.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new ql(r.x,r.y)),f.uniforms.shadow_pass.value=I.map.texture,f.uniforms.resolution.value=I.mapSize,f.uniforms.radius.value=I.radius,i.setRenderTarget(I.mapPass),i.clear(),i.renderBufferDirect(D,null,k,f,v,null),d.uniforms.shadow_pass.value=I.mapPass.texture,d.uniforms.resolution.value=I.mapSize,d.uniforms.radius.value=I.radius,i.setRenderTarget(I.map),i.clear(),i.renderBufferDirect(D,null,k,d,v,null)}function E(I,D,k,G){let O=null;const U=k.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(U!==void 0)O=U;else if(O=k.isPointLight===!0?l:a,i.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const Q=O.uuid,X=D.uuid;let ee=u[Q];ee===void 0&&(ee={},u[Q]=ee);let K=ee[X];K===void 0&&(K=O.clone(),ee[X]=K,D.addEventListener("dispose",L)),O=K}if(O.visible=D.visible,O.wireframe=D.wireframe,G===uc?O.side=D.shadowSide!==null?D.shadowSide:D.side:O.side=D.shadowSide!==null?D.shadowSide:h[D.side],O.alphaMap=D.alphaMap,O.alphaTest=D.alphaTest,O.map=D.map,O.clipShadows=D.clipShadows,O.clippingPlanes=D.clippingPlanes,O.clipIntersection=D.clipIntersection,O.displacementMap=D.displacementMap,O.displacementScale=D.displacementScale,O.displacementBias=D.displacementBias,O.wireframeLinewidth=D.wireframeLinewidth,O.linewidth=D.linewidth,k.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const Q=i.properties.get(O);Q.light=k}return O}function R(I,D,k,G,O){if(I.visible===!1)return;if(I.layers.test(D.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&O===uc)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,I.matrixWorld);const X=e.update(I),ee=I.material;if(Array.isArray(ee)){const K=X.groups;for(let Z=0,he=K.length;Z<he;Z++){const j=K[Z],ie=ee[j.materialIndex];if(ie&&ie.visible){const ae=E(I,ie,G,O);I.onBeforeShadow(i,I,D,k,X,ae,j),i.renderBufferDirect(k,null,X,ae,I,j),I.onAfterShadow(i,I,D,k,X,ae,j)}}}else if(ee.visible){const K=E(I,ee,G,O);I.onBeforeShadow(i,I,D,k,X,K,null),i.renderBufferDirect(k,null,X,K,I,null),I.onAfterShadow(i,I,D,k,X,K,null)}}const Q=I.children;for(let X=0,ee=Q.length;X<ee;X++)R(Q[X],D,k,G,O)}function L(I){I.target.removeEventListener("dispose",L);for(const k in u){const G=u[k],O=I.target.uuid;O in G&&(G[O].dispose(),delete G[O])}}}const Tde={[gT]:yT,[vT]:bT,[_T]:wT,[z0]:xT,[yT]:gT,[bT]:vT,[wT]:_T,[xT]:z0};function Ede(i){function e(){let ye=!1;const wt=new In;let $e=null;const at=new In(0,0,0,0);return{setMask:function(jt){$e!==jt&&!ye&&(i.colorMask(jt,jt,jt,jt),$e=jt)},setLocked:function(jt){ye=jt},setClear:function(jt,Le,_n,li,ar){ar===!0&&(jt*=li,Le*=li,_n*=li),wt.set(jt,Le,_n,li),at.equals(wt)===!1&&(i.clearColor(jt,Le,_n,li),at.copy(wt))},reset:function(){ye=!1,$e=null,at.set(-1,0,0,0)}}}function t(){let ye=!1,wt=!1,$e=null,at=null,jt=null;return{setReversed:function(Le){wt=Le},setTest:function(Le){Le?Ye(i.DEPTH_TEST):it(i.DEPTH_TEST)},setMask:function(Le){$e!==Le&&!ye&&(i.depthMask(Le),$e=Le)},setFunc:function(Le){if(wt&&(Le=Tde[Le]),at!==Le){switch(Le){case gT:i.depthFunc(i.NEVER);break;case yT:i.depthFunc(i.ALWAYS);break;case vT:i.depthFunc(i.LESS);break;case z0:i.depthFunc(i.LEQUAL);break;case _T:i.depthFunc(i.EQUAL);break;case xT:i.depthFunc(i.GEQUAL);break;case bT:i.depthFunc(i.GREATER);break;case wT:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}at=Le}},setLocked:function(Le){ye=Le},setClear:function(Le){jt!==Le&&(i.clearDepth(Le),jt=Le)},reset:function(){ye=!1,$e=null,at=null,jt=null}}}function n(){let ye=!1,wt=null,$e=null,at=null,jt=null,Le=null,_n=null,li=null,ar=null;return{setTest:function(kn){ye||(kn?Ye(i.STENCIL_TEST):it(i.STENCIL_TEST))},setMask:function(kn){wt!==kn&&!ye&&(i.stencilMask(kn),wt=kn)},setFunc:function(kn,qi,es){($e!==kn||at!==qi||jt!==es)&&(i.stencilFunc(kn,qi,es),$e=kn,at=qi,jt=es)},setOp:function(kn,qi,es){(Le!==kn||_n!==qi||li!==es)&&(i.stencilOp(kn,qi,es),Le=kn,_n=qi,li=es)},setLocked:function(kn){ye=kn},setClear:function(kn){ar!==kn&&(i.clearStencil(kn),ar=kn)},reset:function(){ye=!1,wt=null,$e=null,at=null,jt=null,Le=null,_n=null,li=null,ar=null}}}const r=new e,s=new t,o=new n,a=new WeakMap,l=new WeakMap;let u={},c={},h=new WeakMap,f=[],d=null,p=!1,v=null,b=null,_=null,M=null,E=null,R=null,L=null,I=new vt(0,0,0),D=0,k=!1,G=null,O=null,U=null,Q=null,X=null;const ee=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let K=!1,Z=0;const he=i.getParameter(i.VERSION);he.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(he)[1]),K=Z>=1):he.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(he)[1]),K=Z>=2);let j=null,ie={};const ae=i.getParameter(i.SCISSOR_BOX),pe=i.getParameter(i.VIEWPORT),Pe=new In().fromArray(ae),He=new In().fromArray(pe);function Se(ye,wt,$e,at){const jt=new Uint8Array(4),Le=i.createTexture();i.bindTexture(ye,Le),i.texParameteri(ye,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ye,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let _n=0;_n<$e;_n++)ye===i.TEXTURE_3D||ye===i.TEXTURE_2D_ARRAY?i.texImage3D(wt,0,i.RGBA,1,1,at,0,i.RGBA,i.UNSIGNED_BYTE,jt):i.texImage2D(wt+_n,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,jt);return Le}const Oe={};Oe[i.TEXTURE_2D]=Se(i.TEXTURE_2D,i.TEXTURE_2D,1),Oe[i.TEXTURE_CUBE_MAP]=Se(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Oe[i.TEXTURE_2D_ARRAY]=Se(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Oe[i.TEXTURE_3D]=Se(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ye(i.DEPTH_TEST),s.setFunc(z0),pt(!1),ut(pB),Ye(i.CULL_FACE),ce(nh);function Ye(ye){u[ye]!==!0&&(i.enable(ye),u[ye]=!0)}function it(ye){u[ye]!==!1&&(i.disable(ye),u[ye]=!1)}function Ct(ye,wt){return c[ye]!==wt?(i.bindFramebuffer(ye,wt),c[ye]=wt,ye===i.DRAW_FRAMEBUFFER&&(c[i.FRAMEBUFFER]=wt),ye===i.FRAMEBUFFER&&(c[i.DRAW_FRAMEBUFFER]=wt),!0):!1}function qt(ye,wt){let $e=f,at=!1;if(ye){$e=h.get(wt),$e===void 0&&($e=[],h.set(wt,$e));const jt=ye.textures;if($e.length!==jt.length||$e[0]!==i.COLOR_ATTACHMENT0){for(let Le=0,_n=jt.length;Le<_n;Le++)$e[Le]=i.COLOR_ATTACHMENT0+Le;$e.length=jt.length,at=!0}}else $e[0]!==i.BACK&&($e[0]=i.BACK,at=!0);at&&i.drawBuffers($e)}function xt(ye){return d!==ye?(i.useProgram(ye),d=ye,!0):!1}const yt={[Zd]:i.FUNC_ADD,[AX]:i.FUNC_SUBTRACT,[mX]:i.FUNC_REVERSE_SUBTRACT};yt[gX]=i.MIN,yt[yX]=i.MAX;const Qe={[vX]:i.ZERO,[_X]:i.ONE,[xX]:i.SRC_COLOR,[AT]:i.SRC_ALPHA,[EX]:i.SRC_ALPHA_SATURATE,[MX]:i.DST_COLOR,[wX]:i.DST_ALPHA,[bX]:i.ONE_MINUS_SRC_COLOR,[mT]:i.ONE_MINUS_SRC_ALPHA,[TX]:i.ONE_MINUS_DST_COLOR,[SX]:i.ONE_MINUS_DST_ALPHA,[CX]:i.CONSTANT_COLOR,[RX]:i.ONE_MINUS_CONSTANT_COLOR,[PX]:i.CONSTANT_ALPHA,[BX]:i.ONE_MINUS_CONSTANT_ALPHA};function ce(ye,wt,$e,at,jt,Le,_n,li,ar,kn){if(ye===nh){p===!0&&(it(i.BLEND),p=!1);return}if(p===!1&&(Ye(i.BLEND),p=!0),ye!==pX){if(ye!==v||kn!==k){if((b!==Zd||E!==Zd)&&(i.blendEquation(i.FUNC_ADD),b=Zd,E=Zd),kn)switch(ye){case _f:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case AB:i.blendFunc(i.ONE,i.ONE);break;case mB:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case gB:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ye);break}else switch(ye){case _f:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case AB:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case mB:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case gB:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ye);break}_=null,M=null,R=null,L=null,I.set(0,0,0),D=0,v=ye,k=kn}return}jt=jt||wt,Le=Le||$e,_n=_n||at,(wt!==b||jt!==E)&&(i.blendEquationSeparate(yt[wt],yt[jt]),b=wt,E=jt),($e!==_||at!==M||Le!==R||_n!==L)&&(i.blendFuncSeparate(Qe[$e],Qe[at],Qe[Le],Qe[_n]),_=$e,M=at,R=Le,L=_n),(li.equals(I)===!1||ar!==D)&&(i.blendColor(li.r,li.g,li.b,ar),I.copy(li),D=ar),v=ye,k=!1}function dt(ye,wt){ye.side===ao?it(i.CULL_FACE):Ye(i.CULL_FACE);let $e=ye.side===ho;wt&&($e=!$e),pt($e),ye.blending===_f&&ye.transparent===!1?ce(nh):ce(ye.blending,ye.blendEquation,ye.blendSrc,ye.blendDst,ye.blendEquationAlpha,ye.blendSrcAlpha,ye.blendDstAlpha,ye.blendColor,ye.blendAlpha,ye.premultipliedAlpha),s.setFunc(ye.depthFunc),s.setTest(ye.depthTest),s.setMask(ye.depthWrite),r.setMask(ye.colorWrite);const at=ye.stencilWrite;o.setTest(at),at&&(o.setMask(ye.stencilWriteMask),o.setFunc(ye.stencilFunc,ye.stencilRef,ye.stencilFuncMask),o.setOp(ye.stencilFail,ye.stencilZFail,ye.stencilZPass)),Wt(ye.polygonOffset,ye.polygonOffsetFactor,ye.polygonOffsetUnits),ye.alphaToCoverage===!0?Ye(i.SAMPLE_ALPHA_TO_COVERAGE):it(i.SAMPLE_ALPHA_TO_COVERAGE)}function pt(ye){G!==ye&&(ye?i.frontFace(i.CW):i.frontFace(i.CCW),G=ye)}function ut(ye){ye!==hX?(Ye(i.CULL_FACE),ye!==O&&(ye===pB?i.cullFace(i.BACK):ye===fX?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):it(i.CULL_FACE),O=ye}function ft(ye){ye!==U&&(K&&i.lineWidth(ye),U=ye)}function Wt(ye,wt,$e){ye?(Ye(i.POLYGON_OFFSET_FILL),(Q!==wt||X!==$e)&&(i.polygonOffset(wt,$e),Q=wt,X=$e)):it(i.POLYGON_OFFSET_FILL)}function Rt(ye){ye?Ye(i.SCISSOR_TEST):it(i.SCISSOR_TEST)}function fe(ye){ye===void 0&&(ye=i.TEXTURE0+ee-1),j!==ye&&(i.activeTexture(ye),j=ye)}function te(ye,wt,$e){$e===void 0&&(j===null?$e=i.TEXTURE0+ee-1:$e=j);let at=ie[$e];at===void 0&&(at={type:void 0,texture:void 0},ie[$e]=at),(at.type!==ye||at.texture!==wt)&&(j!==$e&&(i.activeTexture($e),j=$e),i.bindTexture(ye,wt||Oe[ye]),at.type=ye,at.texture=wt)}function De(){const ye=ie[j];ye!==void 0&&ye.type!==void 0&&(i.bindTexture(ye.type,null),ye.type=void 0,ye.texture=void 0)}function Te(){try{i.compressedTexImage2D.apply(i,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Fe(){try{i.compressedTexImage3D.apply(i,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function We(){try{i.texSubImage2D.apply(i,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Bt(){try{i.texSubImage3D.apply(i,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function ct(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Ft(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function vn(){try{i.texStorage2D.apply(i,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function At(){try{i.texStorage3D.apply(i,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function zt(){try{i.texImage2D.apply(i,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function hn(){try{i.texImage3D.apply(i,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function an(ye){Pe.equals(ye)===!1&&(i.scissor(ye.x,ye.y,ye.z,ye.w),Pe.copy(ye))}function Vt(ye){He.equals(ye)===!1&&(i.viewport(ye.x,ye.y,ye.z,ye.w),He.copy(ye))}function Me(ye,wt){let $e=l.get(wt);$e===void 0&&($e=new WeakMap,l.set(wt,$e));let at=$e.get(ye);at===void 0&&(at=i.getUniformBlockIndex(wt,ye.name),$e.set(ye,at))}function Ze(ye,wt){const at=l.get(wt).get(ye);a.get(wt)!==at&&(i.uniformBlockBinding(wt,at,ye.__bindingPointIndex),a.set(wt,at))}function Nt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),u={},j=null,ie={},c={},h=new WeakMap,f=[],d=null,p=!1,v=null,b=null,_=null,M=null,E=null,R=null,L=null,I=new vt(0,0,0),D=0,k=!1,G=null,O=null,U=null,Q=null,X=null,Pe.set(0,0,i.canvas.width,i.canvas.height),He.set(0,0,i.canvas.width,i.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:Ye,disable:it,bindFramebuffer:Ct,drawBuffers:qt,useProgram:xt,setBlending:ce,setMaterial:dt,setFlipSided:pt,setCullFace:ut,setLineWidth:ft,setPolygonOffset:Wt,setScissorTest:Rt,activeTexture:fe,bindTexture:te,unbindTexture:De,compressedTexImage2D:Te,compressedTexImage3D:Fe,texImage2D:zt,texImage3D:hn,updateUBOMapping:Me,uniformBlockBinding:Ze,texStorage2D:vn,texStorage3D:At,texSubImage2D:We,texSubImage3D:Bt,compressedTexSubImage2D:ct,compressedTexSubImage3D:Ft,scissor:an,viewport:Vt,reset:Nt}}function Cde(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function Rde(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function Pde(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function SB(i,e,t,n){const r=Bde(n);switch(t){case oL:return i*e;case lL:return i*e;case uL:return i*e*2;case YC:return i*e/r.components*r.byteLength;case Jx:return i*e/r.components*r.byteLength;case cL:return i*e*2/r.components*r.byteLength;case QC:return i*e*2/r.components*r.byteLength;case aL:return i*e*3/r.components*r.byteLength;case Fo:return i*e*4/r.components*r.byteLength;case KC:return i*e*4/r.components*r.byteLength;case c_:case h_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case f_:case d_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case MT:case ET:return Math.max(i,16)*Math.max(e,8)/4;case ST:case TT:return Math.max(i,8)*Math.max(e,8)/2;case CT:case RT:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case PT:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case BT:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case IT:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case NT:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case DT:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case LT:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case OT:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case FT:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case kT:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case UT:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case zT:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case GT:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case HT:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case qT:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case VT:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case p_:case jT:case $T:return Math.ceil(i/4)*Math.ceil(e/4)*16;case hL:case WT:return Math.ceil(i/4)*Math.ceil(e/4)*8;case XT:case YT:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Bde(i){switch(i){case xc:case iL:return{byteLength:1,components:1};case ly:case rL:case Vp:return{byteLength:2,components:1};case WC:case XC:return{byteLength:2,components:4};case Lf:case $C:case ya:return{byteLength:4,components:1};case sL:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}const Ide={contain:Cde,cover:Rde,fill:Pde,getByteLength:SB};function Nde(i,e,t,n,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new je,c=new WeakMap;let h;const f=new WeakMap;let d=!1;try{d=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(fe,te){return d?new OffscreenCanvas(fe,te):rx("canvas")}function v(fe,te,De){let Te=1;const Fe=Rt(fe);if((Fe.width>De||Fe.height>De)&&(Te=De/Math.max(Fe.width,Fe.height)),Te<1)if(typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&fe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&fe instanceof ImageBitmap||typeof VideoFrame<"u"&&fe instanceof VideoFrame){const We=Math.floor(Te*Fe.width),Bt=Math.floor(Te*Fe.height);h===void 0&&(h=p(We,Bt));const ct=te?p(We,Bt):h;return ct.width=We,ct.height=Bt,ct.getContext("2d").drawImage(fe,0,0,We,Bt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Fe.width+"x"+Fe.height+") to ("+We+"x"+Bt+")."),ct}else return"data"in fe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Fe.width+"x"+Fe.height+")."),fe;return fe}function b(fe){return fe.generateMipmaps&&fe.minFilter!==Es&&fe.minFilter!==pr}function _(fe){i.generateMipmap(fe)}function M(fe,te,De,Te,Fe=!1){if(fe!==null){if(i[fe]!==void 0)return i[fe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+fe+"'")}let We=te;if(te===i.RED&&(De===i.FLOAT&&(We=i.R32F),De===i.HALF_FLOAT&&(We=i.R16F),De===i.UNSIGNED_BYTE&&(We=i.R8)),te===i.RED_INTEGER&&(De===i.UNSIGNED_BYTE&&(We=i.R8UI),De===i.UNSIGNED_SHORT&&(We=i.R16UI),De===i.UNSIGNED_INT&&(We=i.R32UI),De===i.BYTE&&(We=i.R8I),De===i.SHORT&&(We=i.R16I),De===i.INT&&(We=i.R32I)),te===i.RG&&(De===i.FLOAT&&(We=i.RG32F),De===i.HALF_FLOAT&&(We=i.RG16F),De===i.UNSIGNED_BYTE&&(We=i.RG8)),te===i.RG_INTEGER&&(De===i.UNSIGNED_BYTE&&(We=i.RG8UI),De===i.UNSIGNED_SHORT&&(We=i.RG16UI),De===i.UNSIGNED_INT&&(We=i.RG32UI),De===i.BYTE&&(We=i.RG8I),De===i.SHORT&&(We=i.RG16I),De===i.INT&&(We=i.RG32I)),te===i.RGB_INTEGER&&(De===i.UNSIGNED_BYTE&&(We=i.RGB8UI),De===i.UNSIGNED_SHORT&&(We=i.RGB16UI),De===i.UNSIGNED_INT&&(We=i.RGB32UI),De===i.BYTE&&(We=i.RGB8I),De===i.SHORT&&(We=i.RGB16I),De===i.INT&&(We=i.RGB32I)),te===i.RGBA_INTEGER&&(De===i.UNSIGNED_BYTE&&(We=i.RGBA8UI),De===i.UNSIGNED_SHORT&&(We=i.RGBA16UI),De===i.UNSIGNED_INT&&(We=i.RGBA32UI),De===i.BYTE&&(We=i.RGBA8I),De===i.SHORT&&(We=i.RGBA16I),De===i.INT&&(We=i.RGBA32I)),te===i.RGB&&De===i.UNSIGNED_INT_5_9_9_9_REV&&(We=i.RGB9_E5),te===i.RGBA){const Bt=Fe?Z_:Mi.getTransfer(Te);De===i.FLOAT&&(We=i.RGBA32F),De===i.HALF_FLOAT&&(We=i.RGBA16F),De===i.UNSIGNED_BYTE&&(We=Bt===Qi?i.SRGB8_ALPHA8:i.RGBA8),De===i.UNSIGNED_SHORT_4_4_4_4&&(We=i.RGBA4),De===i.UNSIGNED_SHORT_5_5_5_1&&(We=i.RGB5_A1)}return(We===i.R16F||We===i.R32F||We===i.RG16F||We===i.RG32F||We===i.RGBA16F||We===i.RGBA32F)&&e.get("EXT_color_buffer_float"),We}function E(fe,te){let De;return fe?te===null||te===Lf||te===G0?De=i.DEPTH24_STENCIL8:te===ya?De=i.DEPTH32F_STENCIL8:te===ly&&(De=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):te===null||te===Lf||te===G0?De=i.DEPTH_COMPONENT24:te===ya?De=i.DEPTH_COMPONENT32F:te===ly&&(De=i.DEPTH_COMPONENT16),De}function R(fe,te){return b(fe)===!0||fe.isFramebufferTexture&&fe.minFilter!==Es&&fe.minFilter!==pr?Math.log2(Math.max(te.width,te.height))+1:fe.mipmaps!==void 0&&fe.mipmaps.length>0?fe.mipmaps.length:fe.isCompressedTexture&&Array.isArray(fe.image)?te.mipmaps.length:1}function L(fe){const te=fe.target;te.removeEventListener("dispose",L),D(te),te.isVideoTexture&&c.delete(te)}function I(fe){const te=fe.target;te.removeEventListener("dispose",I),G(te)}function D(fe){const te=n.get(fe);if(te.__webglInit===void 0)return;const De=fe.source,Te=f.get(De);if(Te){const Fe=Te[te.__cacheKey];Fe.usedTimes--,Fe.usedTimes===0&&k(fe),Object.keys(Te).length===0&&f.delete(De)}n.remove(fe)}function k(fe){const te=n.get(fe);i.deleteTexture(te.__webglTexture);const De=fe.source,Te=f.get(De);delete Te[te.__cacheKey],o.memory.textures--}function G(fe){const te=n.get(fe);if(fe.depthTexture&&fe.depthTexture.dispose(),fe.isWebGLCubeRenderTarget)for(let Te=0;Te<6;Te++){if(Array.isArray(te.__webglFramebuffer[Te]))for(let Fe=0;Fe<te.__webglFramebuffer[Te].length;Fe++)i.deleteFramebuffer(te.__webglFramebuffer[Te][Fe]);else i.deleteFramebuffer(te.__webglFramebuffer[Te]);te.__webglDepthbuffer&&i.deleteRenderbuffer(te.__webglDepthbuffer[Te])}else{if(Array.isArray(te.__webglFramebuffer))for(let Te=0;Te<te.__webglFramebuffer.length;Te++)i.deleteFramebuffer(te.__webglFramebuffer[Te]);else i.deleteFramebuffer(te.__webglFramebuffer);if(te.__webglDepthbuffer&&i.deleteRenderbuffer(te.__webglDepthbuffer),te.__webglMultisampledFramebuffer&&i.deleteFramebuffer(te.__webglMultisampledFramebuffer),te.__webglColorRenderbuffer)for(let Te=0;Te<te.__webglColorRenderbuffer.length;Te++)te.__webglColorRenderbuffer[Te]&&i.deleteRenderbuffer(te.__webglColorRenderbuffer[Te]);te.__webglDepthRenderbuffer&&i.deleteRenderbuffer(te.__webglDepthRenderbuffer)}const De=fe.textures;for(let Te=0,Fe=De.length;Te<Fe;Te++){const We=n.get(De[Te]);We.__webglTexture&&(i.deleteTexture(We.__webglTexture),o.memory.textures--),n.remove(De[Te])}n.remove(fe)}let O=0;function U(){O=0}function Q(){const fe=O;return fe>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+fe+" texture units while this GPU supports only "+r.maxTextures),O+=1,fe}function X(fe){const te=[];return te.push(fe.wrapS),te.push(fe.wrapT),te.push(fe.wrapR||0),te.push(fe.magFilter),te.push(fe.minFilter),te.push(fe.anisotropy),te.push(fe.internalFormat),te.push(fe.format),te.push(fe.type),te.push(fe.generateMipmaps),te.push(fe.premultiplyAlpha),te.push(fe.flipY),te.push(fe.unpackAlignment),te.push(fe.colorSpace),te.join()}function ee(fe,te){const De=n.get(fe);if(fe.isVideoTexture&&ft(fe),fe.isRenderTargetTexture===!1&&fe.version>0&&De.__version!==fe.version){const Te=fe.image;if(Te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{He(De,fe,te);return}}t.bindTexture(i.TEXTURE_2D,De.__webglTexture,i.TEXTURE0+te)}function K(fe,te){const De=n.get(fe);if(fe.version>0&&De.__version!==fe.version){He(De,fe,te);return}t.bindTexture(i.TEXTURE_2D_ARRAY,De.__webglTexture,i.TEXTURE0+te)}function Z(fe,te){const De=n.get(fe);if(fe.version>0&&De.__version!==fe.version){He(De,fe,te);return}t.bindTexture(i.TEXTURE_3D,De.__webglTexture,i.TEXTURE0+te)}function he(fe,te){const De=n.get(fe);if(fe.version>0&&De.__version!==fe.version){Se(De,fe,te);return}t.bindTexture(i.TEXTURE_CUBE_MAP,De.__webglTexture,i.TEXTURE0+te)}const j={[dh]:i.REPEAT,[ga]:i.CLAMP_TO_EDGE,[ay]:i.MIRRORED_REPEAT},ie={[Es]:i.NEAREST,[jC]:i.NEAREST_MIPMAP_NEAREST,[l0]:i.NEAREST_MIPMAP_LINEAR,[pr]:i.LINEAR,[D1]:i.LINEAR_MIPMAP_NEAREST,[Mu]:i.LINEAR_MIPMAP_LINEAR},ae={[WX]:i.NEVER,[ZX]:i.ALWAYS,[XX]:i.LESS,[pL]:i.LEQUAL,[YX]:i.EQUAL,[JX]:i.GEQUAL,[QX]:i.GREATER,[KX]:i.NOTEQUAL};function pe(fe,te){if(te.type===ya&&e.has("OES_texture_float_linear")===!1&&(te.magFilter===pr||te.magFilter===D1||te.magFilter===l0||te.magFilter===Mu||te.minFilter===pr||te.minFilter===D1||te.minFilter===l0||te.minFilter===Mu)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(fe,i.TEXTURE_WRAP_S,j[te.wrapS]),i.texParameteri(fe,i.TEXTURE_WRAP_T,j[te.wrapT]),(fe===i.TEXTURE_3D||fe===i.TEXTURE_2D_ARRAY)&&i.texParameteri(fe,i.TEXTURE_WRAP_R,j[te.wrapR]),i.texParameteri(fe,i.TEXTURE_MAG_FILTER,ie[te.magFilter]),i.texParameteri(fe,i.TEXTURE_MIN_FILTER,ie[te.minFilter]),te.compareFunction&&(i.texParameteri(fe,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(fe,i.TEXTURE_COMPARE_FUNC,ae[te.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(te.magFilter===Es||te.minFilter!==l0&&te.minFilter!==Mu||te.type===ya&&e.has("OES_texture_float_linear")===!1)return;if(te.anisotropy>1||n.get(te).__currentAnisotropy){const De=e.get("EXT_texture_filter_anisotropic");i.texParameterf(fe,De.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(te.anisotropy,r.getMaxAnisotropy())),n.get(te).__currentAnisotropy=te.anisotropy}}}function Pe(fe,te){let De=!1;fe.__webglInit===void 0&&(fe.__webglInit=!0,te.addEventListener("dispose",L));const Te=te.source;let Fe=f.get(Te);Fe===void 0&&(Fe={},f.set(Te,Fe));const We=X(te);if(We!==fe.__cacheKey){Fe[We]===void 0&&(Fe[We]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,De=!0),Fe[We].usedTimes++;const Bt=Fe[fe.__cacheKey];Bt!==void 0&&(Fe[fe.__cacheKey].usedTimes--,Bt.usedTimes===0&&k(te)),fe.__cacheKey=We,fe.__webglTexture=Fe[We].texture}return De}function He(fe,te,De){let Te=i.TEXTURE_2D;(te.isDataArrayTexture||te.isCompressedArrayTexture)&&(Te=i.TEXTURE_2D_ARRAY),te.isData3DTexture&&(Te=i.TEXTURE_3D);const Fe=Pe(fe,te),We=te.source;t.bindTexture(Te,fe.__webglTexture,i.TEXTURE0+De);const Bt=n.get(We);if(We.version!==Bt.__version||Fe===!0){t.activeTexture(i.TEXTURE0+De);const ct=Mi.getPrimaries(Mi.workingColorSpace),Ft=te.colorSpace===uf?null:Mi.getPrimaries(te.colorSpace),vn=te.colorSpace===uf||ct===Ft?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,te.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,te.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,vn);let At=v(te.image,!1,r.maxTextureSize);At=Wt(te,At);const zt=s.convert(te.format,te.colorSpace),hn=s.convert(te.type);let an=M(te.internalFormat,zt,hn,te.colorSpace,te.isVideoTexture);pe(Te,te);let Vt;const Me=te.mipmaps,Ze=te.isVideoTexture!==!0,Nt=Bt.__version===void 0||Fe===!0,ye=We.dataReady,wt=R(te,At);if(te.isDepthTexture)an=E(te.format===H0,te.type),Nt&&(Ze?t.texStorage2D(i.TEXTURE_2D,1,an,At.width,At.height):t.texImage2D(i.TEXTURE_2D,0,an,At.width,At.height,0,zt,hn,null));else if(te.isDataTexture)if(Me.length>0){Ze&&Nt&&t.texStorage2D(i.TEXTURE_2D,wt,an,Me[0].width,Me[0].height);for(let $e=0,at=Me.length;$e<at;$e++)Vt=Me[$e],Ze?ye&&t.texSubImage2D(i.TEXTURE_2D,$e,0,0,Vt.width,Vt.height,zt,hn,Vt.data):t.texImage2D(i.TEXTURE_2D,$e,an,Vt.width,Vt.height,0,zt,hn,Vt.data);te.generateMipmaps=!1}else Ze?(Nt&&t.texStorage2D(i.TEXTURE_2D,wt,an,At.width,At.height),ye&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,At.width,At.height,zt,hn,At.data)):t.texImage2D(i.TEXTURE_2D,0,an,At.width,At.height,0,zt,hn,At.data);else if(te.isCompressedTexture)if(te.isCompressedArrayTexture){Ze&&Nt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,wt,an,Me[0].width,Me[0].height,At.depth);for(let $e=0,at=Me.length;$e<at;$e++)if(Vt=Me[$e],te.format!==Fo)if(zt!==null)if(Ze){if(ye)if(te.layerUpdates.size>0){const jt=SB(Vt.width,Vt.height,te.format,te.type);for(const Le of te.layerUpdates){const _n=Vt.data.subarray(Le*jt/Vt.data.BYTES_PER_ELEMENT,(Le+1)*jt/Vt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,$e,0,0,Le,Vt.width,Vt.height,1,zt,_n,0,0)}te.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,$e,0,0,0,Vt.width,Vt.height,At.depth,zt,Vt.data,0,0)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,$e,an,Vt.width,Vt.height,At.depth,0,Vt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ze?ye&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,$e,0,0,0,Vt.width,Vt.height,At.depth,zt,hn,Vt.data):t.texImage3D(i.TEXTURE_2D_ARRAY,$e,an,Vt.width,Vt.height,At.depth,0,zt,hn,Vt.data)}else{Ze&&Nt&&t.texStorage2D(i.TEXTURE_2D,wt,an,Me[0].width,Me[0].height);for(let $e=0,at=Me.length;$e<at;$e++)Vt=Me[$e],te.format!==Fo?zt!==null?Ze?ye&&t.compressedTexSubImage2D(i.TEXTURE_2D,$e,0,0,Vt.width,Vt.height,zt,Vt.data):t.compressedTexImage2D(i.TEXTURE_2D,$e,an,Vt.width,Vt.height,0,Vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ze?ye&&t.texSubImage2D(i.TEXTURE_2D,$e,0,0,Vt.width,Vt.height,zt,hn,Vt.data):t.texImage2D(i.TEXTURE_2D,$e,an,Vt.width,Vt.height,0,zt,hn,Vt.data)}else if(te.isDataArrayTexture)if(Ze){if(Nt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,wt,an,At.width,At.height,At.depth),ye)if(te.layerUpdates.size>0){const $e=SB(At.width,At.height,te.format,te.type);for(const at of te.layerUpdates){const jt=At.data.subarray(at*$e/At.data.BYTES_PER_ELEMENT,(at+1)*$e/At.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,at,At.width,At.height,1,zt,hn,jt)}te.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,At.width,At.height,At.depth,zt,hn,At.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,an,At.width,At.height,At.depth,0,zt,hn,At.data);else if(te.isData3DTexture)Ze?(Nt&&t.texStorage3D(i.TEXTURE_3D,wt,an,At.width,At.height,At.depth),ye&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,At.width,At.height,At.depth,zt,hn,At.data)):t.texImage3D(i.TEXTURE_3D,0,an,At.width,At.height,At.depth,0,zt,hn,At.data);else if(te.isFramebufferTexture){if(Nt)if(Ze)t.texStorage2D(i.TEXTURE_2D,wt,an,At.width,At.height);else{let $e=At.width,at=At.height;for(let jt=0;jt<wt;jt++)t.texImage2D(i.TEXTURE_2D,jt,an,$e,at,0,zt,hn,null),$e>>=1,at>>=1}}else if(Me.length>0){if(Ze&&Nt){const $e=Rt(Me[0]);t.texStorage2D(i.TEXTURE_2D,wt,an,$e.width,$e.height)}for(let $e=0,at=Me.length;$e<at;$e++)Vt=Me[$e],Ze?ye&&t.texSubImage2D(i.TEXTURE_2D,$e,0,0,zt,hn,Vt):t.texImage2D(i.TEXTURE_2D,$e,an,zt,hn,Vt);te.generateMipmaps=!1}else if(Ze){if(Nt){const $e=Rt(At);t.texStorage2D(i.TEXTURE_2D,wt,an,$e.width,$e.height)}ye&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,zt,hn,At)}else t.texImage2D(i.TEXTURE_2D,0,an,zt,hn,At);b(te)&&_(Te),Bt.__version=We.version,te.onUpdate&&te.onUpdate(te)}fe.__version=te.version}function Se(fe,te,De){if(te.image.length!==6)return;const Te=Pe(fe,te),Fe=te.source;t.bindTexture(i.TEXTURE_CUBE_MAP,fe.__webglTexture,i.TEXTURE0+De);const We=n.get(Fe);if(Fe.version!==We.__version||Te===!0){t.activeTexture(i.TEXTURE0+De);const Bt=Mi.getPrimaries(Mi.workingColorSpace),ct=te.colorSpace===uf?null:Mi.getPrimaries(te.colorSpace),Ft=te.colorSpace===uf||Bt===ct?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,te.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,te.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ft);const vn=te.isCompressedTexture||te.image[0].isCompressedTexture,At=te.image[0]&&te.image[0].isDataTexture,zt=[];for(let at=0;at<6;at++)!vn&&!At?zt[at]=v(te.image[at],!0,r.maxCubemapSize):zt[at]=At?te.image[at].image:te.image[at],zt[at]=Wt(te,zt[at]);const hn=zt[0],an=s.convert(te.format,te.colorSpace),Vt=s.convert(te.type),Me=M(te.internalFormat,an,Vt,te.colorSpace),Ze=te.isVideoTexture!==!0,Nt=We.__version===void 0||Te===!0,ye=Fe.dataReady;let wt=R(te,hn);pe(i.TEXTURE_CUBE_MAP,te);let $e;if(vn){Ze&&Nt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,wt,Me,hn.width,hn.height);for(let at=0;at<6;at++){$e=zt[at].mipmaps;for(let jt=0;jt<$e.length;jt++){const Le=$e[jt];te.format!==Fo?an!==null?Ze?ye&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,jt,0,0,Le.width,Le.height,an,Le.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,jt,Me,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ze?ye&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,jt,0,0,Le.width,Le.height,an,Vt,Le.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,jt,Me,Le.width,Le.height,0,an,Vt,Le.data)}}}else{if($e=te.mipmaps,Ze&&Nt){$e.length>0&&wt++;const at=Rt(zt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,wt,Me,at.width,at.height)}for(let at=0;at<6;at++)if(At){Ze?ye&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,0,0,zt[at].width,zt[at].height,an,Vt,zt[at].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,Me,zt[at].width,zt[at].height,0,an,Vt,zt[at].data);for(let jt=0;jt<$e.length;jt++){const _n=$e[jt].image[at].image;Ze?ye&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,jt+1,0,0,_n.width,_n.height,an,Vt,_n.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,jt+1,Me,_n.width,_n.height,0,an,Vt,_n.data)}}else{Ze?ye&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,0,0,an,Vt,zt[at]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,Me,an,Vt,zt[at]);for(let jt=0;jt<$e.length;jt++){const Le=$e[jt];Ze?ye&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,jt+1,0,0,an,Vt,Le.image[at]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,jt+1,Me,an,Vt,Le.image[at])}}}b(te)&&_(i.TEXTURE_CUBE_MAP),We.__version=Fe.version,te.onUpdate&&te.onUpdate(te)}fe.__version=te.version}function Oe(fe,te,De,Te,Fe,We){const Bt=s.convert(De.format,De.colorSpace),ct=s.convert(De.type),Ft=M(De.internalFormat,Bt,ct,De.colorSpace);if(!n.get(te).__hasExternalTextures){const At=Math.max(1,te.width>>We),zt=Math.max(1,te.height>>We);Fe===i.TEXTURE_3D||Fe===i.TEXTURE_2D_ARRAY?t.texImage3D(Fe,We,Ft,At,zt,te.depth,0,Bt,ct,null):t.texImage2D(Fe,We,Ft,At,zt,0,Bt,ct,null)}t.bindFramebuffer(i.FRAMEBUFFER,fe),ut(te)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Te,Fe,n.get(De).__webglTexture,0,pt(te)):(Fe===i.TEXTURE_2D||Fe>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Fe<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Te,Fe,n.get(De).__webglTexture,We),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Ye(fe,te,De){if(i.bindRenderbuffer(i.RENDERBUFFER,fe),te.depthBuffer){const Te=te.depthTexture,Fe=Te&&Te.isDepthTexture?Te.type:null,We=E(te.stencilBuffer,Fe),Bt=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ct=pt(te);ut(te)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ct,We,te.width,te.height):De?i.renderbufferStorageMultisample(i.RENDERBUFFER,ct,We,te.width,te.height):i.renderbufferStorage(i.RENDERBUFFER,We,te.width,te.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Bt,i.RENDERBUFFER,fe)}else{const Te=te.textures;for(let Fe=0;Fe<Te.length;Fe++){const We=Te[Fe],Bt=s.convert(We.format,We.colorSpace),ct=s.convert(We.type),Ft=M(We.internalFormat,Bt,ct,We.colorSpace),vn=pt(te);De&&ut(te)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,vn,Ft,te.width,te.height):ut(te)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,vn,Ft,te.width,te.height):i.renderbufferStorage(i.RENDERBUFFER,Ft,te.width,te.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function it(fe,te){if(te&&te.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,fe),!(te.depthTexture&&te.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(te.depthTexture).__webglTexture||te.depthTexture.image.width!==te.width||te.depthTexture.image.height!==te.height)&&(te.depthTexture.image.width=te.width,te.depthTexture.image.height=te.height,te.depthTexture.needsUpdate=!0),ee(te.depthTexture,0);const Te=n.get(te.depthTexture).__webglTexture,Fe=pt(te);if(te.depthTexture.format===_0)ut(te)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Te,0,Fe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Te,0);else if(te.depthTexture.format===H0)ut(te)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Te,0,Fe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Te,0);else throw new Error("Unknown depthTexture format")}function Ct(fe){const te=n.get(fe),De=fe.isWebGLCubeRenderTarget===!0;if(te.__boundDepthTexture!==fe.depthTexture){const Te=fe.depthTexture;if(te.__depthDisposeCallback&&te.__depthDisposeCallback(),Te){const Fe=()=>{delete te.__boundDepthTexture,delete te.__depthDisposeCallback,Te.removeEventListener("dispose",Fe)};Te.addEventListener("dispose",Fe),te.__depthDisposeCallback=Fe}te.__boundDepthTexture=Te}if(fe.depthTexture&&!te.__autoAllocateDepthBuffer){if(De)throw new Error("target.depthTexture not supported in Cube render targets");it(te.__webglFramebuffer,fe)}else if(De){te.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)if(t.bindFramebuffer(i.FRAMEBUFFER,te.__webglFramebuffer[Te]),te.__webglDepthbuffer[Te]===void 0)te.__webglDepthbuffer[Te]=i.createRenderbuffer(),Ye(te.__webglDepthbuffer[Te],fe,!1);else{const Fe=fe.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,We=te.__webglDepthbuffer[Te];i.bindRenderbuffer(i.RENDERBUFFER,We),i.framebufferRenderbuffer(i.FRAMEBUFFER,Fe,i.RENDERBUFFER,We)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,te.__webglFramebuffer),te.__webglDepthbuffer===void 0)te.__webglDepthbuffer=i.createRenderbuffer(),Ye(te.__webglDepthbuffer,fe,!1);else{const Te=fe.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Fe=te.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Fe),i.framebufferRenderbuffer(i.FRAMEBUFFER,Te,i.RENDERBUFFER,Fe)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function qt(fe,te,De){const Te=n.get(fe);te!==void 0&&Oe(Te.__webglFramebuffer,fe,fe.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),De!==void 0&&Ct(fe)}function xt(fe){const te=fe.texture,De=n.get(fe),Te=n.get(te);fe.addEventListener("dispose",I);const Fe=fe.textures,We=fe.isWebGLCubeRenderTarget===!0,Bt=Fe.length>1;if(Bt||(Te.__webglTexture===void 0&&(Te.__webglTexture=i.createTexture()),Te.__version=te.version,o.memory.textures++),We){De.__webglFramebuffer=[];for(let ct=0;ct<6;ct++)if(te.mipmaps&&te.mipmaps.length>0){De.__webglFramebuffer[ct]=[];for(let Ft=0;Ft<te.mipmaps.length;Ft++)De.__webglFramebuffer[ct][Ft]=i.createFramebuffer()}else De.__webglFramebuffer[ct]=i.createFramebuffer()}else{if(te.mipmaps&&te.mipmaps.length>0){De.__webglFramebuffer=[];for(let ct=0;ct<te.mipmaps.length;ct++)De.__webglFramebuffer[ct]=i.createFramebuffer()}else De.__webglFramebuffer=i.createFramebuffer();if(Bt)for(let ct=0,Ft=Fe.length;ct<Ft;ct++){const vn=n.get(Fe[ct]);vn.__webglTexture===void 0&&(vn.__webglTexture=i.createTexture(),o.memory.textures++)}if(fe.samples>0&&ut(fe)===!1){De.__webglMultisampledFramebuffer=i.createFramebuffer(),De.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,De.__webglMultisampledFramebuffer);for(let ct=0;ct<Fe.length;ct++){const Ft=Fe[ct];De.__webglColorRenderbuffer[ct]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,De.__webglColorRenderbuffer[ct]);const vn=s.convert(Ft.format,Ft.colorSpace),At=s.convert(Ft.type),zt=M(Ft.internalFormat,vn,At,Ft.colorSpace,fe.isXRRenderTarget===!0),hn=pt(fe);i.renderbufferStorageMultisample(i.RENDERBUFFER,hn,zt,fe.width,fe.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.RENDERBUFFER,De.__webglColorRenderbuffer[ct])}i.bindRenderbuffer(i.RENDERBUFFER,null),fe.depthBuffer&&(De.__webglDepthRenderbuffer=i.createRenderbuffer(),Ye(De.__webglDepthRenderbuffer,fe,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(We){t.bindTexture(i.TEXTURE_CUBE_MAP,Te.__webglTexture),pe(i.TEXTURE_CUBE_MAP,te);for(let ct=0;ct<6;ct++)if(te.mipmaps&&te.mipmaps.length>0)for(let Ft=0;Ft<te.mipmaps.length;Ft++)Oe(De.__webglFramebuffer[ct][Ft],fe,te,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ct,Ft);else Oe(De.__webglFramebuffer[ct],fe,te,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0);b(te)&&_(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Bt){for(let ct=0,Ft=Fe.length;ct<Ft;ct++){const vn=Fe[ct],At=n.get(vn);t.bindTexture(i.TEXTURE_2D,At.__webglTexture),pe(i.TEXTURE_2D,vn),Oe(De.__webglFramebuffer,fe,vn,i.COLOR_ATTACHMENT0+ct,i.TEXTURE_2D,0),b(vn)&&_(i.TEXTURE_2D)}t.unbindTexture()}else{let ct=i.TEXTURE_2D;if((fe.isWebGL3DRenderTarget||fe.isWebGLArrayRenderTarget)&&(ct=fe.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(ct,Te.__webglTexture),pe(ct,te),te.mipmaps&&te.mipmaps.length>0)for(let Ft=0;Ft<te.mipmaps.length;Ft++)Oe(De.__webglFramebuffer[Ft],fe,te,i.COLOR_ATTACHMENT0,ct,Ft);else Oe(De.__webglFramebuffer,fe,te,i.COLOR_ATTACHMENT0,ct,0);b(te)&&_(ct),t.unbindTexture()}fe.depthBuffer&&Ct(fe)}function yt(fe){const te=fe.textures;for(let De=0,Te=te.length;De<Te;De++){const Fe=te[De];if(b(Fe)){const We=fe.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,Bt=n.get(Fe).__webglTexture;t.bindTexture(We,Bt),_(We),t.unbindTexture()}}}const Qe=[],ce=[];function dt(fe){if(fe.samples>0){if(ut(fe)===!1){const te=fe.textures,De=fe.width,Te=fe.height;let Fe=i.COLOR_BUFFER_BIT;const We=fe.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Bt=n.get(fe),ct=te.length>1;if(ct)for(let Ft=0;Ft<te.length;Ft++)t.bindFramebuffer(i.FRAMEBUFFER,Bt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ft,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Bt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ft,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Bt.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Bt.__webglFramebuffer);for(let Ft=0;Ft<te.length;Ft++){if(fe.resolveDepthBuffer&&(fe.depthBuffer&&(Fe|=i.DEPTH_BUFFER_BIT),fe.stencilBuffer&&fe.resolveStencilBuffer&&(Fe|=i.STENCIL_BUFFER_BIT)),ct){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Bt.__webglColorRenderbuffer[Ft]);const vn=n.get(te[Ft]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,vn,0)}i.blitFramebuffer(0,0,De,Te,0,0,De,Te,Fe,i.NEAREST),l===!0&&(Qe.length=0,ce.length=0,Qe.push(i.COLOR_ATTACHMENT0+Ft),fe.depthBuffer&&fe.resolveDepthBuffer===!1&&(Qe.push(We),ce.push(We),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,ce)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Qe))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),ct)for(let Ft=0;Ft<te.length;Ft++){t.bindFramebuffer(i.FRAMEBUFFER,Bt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ft,i.RENDERBUFFER,Bt.__webglColorRenderbuffer[Ft]);const vn=n.get(te[Ft]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Bt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ft,i.TEXTURE_2D,vn,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Bt.__webglMultisampledFramebuffer)}else if(fe.depthBuffer&&fe.resolveDepthBuffer===!1&&l){const te=fe.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[te])}}}function pt(fe){return Math.min(r.maxSamples,fe.samples)}function ut(fe){const te=n.get(fe);return fe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&te.__useRenderToTexture!==!1}function ft(fe){const te=o.render.frame;c.get(fe)!==te&&(c.set(fe,te),fe.update())}function Wt(fe,te){const De=fe.colorSpace,Te=fe.format,Fe=fe.type;return fe.isCompressedTexture===!0||fe.isVideoTexture===!0||De!==Qf&&De!==uf&&(Mi.getTransfer(De)===Qi?(Te!==Fo||Fe!==xc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",De)),te}function Rt(fe){return typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement?(u.width=fe.naturalWidth||fe.width,u.height=fe.naturalHeight||fe.height):typeof VideoFrame<"u"&&fe instanceof VideoFrame?(u.width=fe.displayWidth,u.height=fe.displayHeight):(u.width=fe.width,u.height=fe.height),u}this.allocateTextureUnit=Q,this.resetTextureUnits=U,this.setTexture2D=ee,this.setTexture2DArray=K,this.setTexture3D=Z,this.setTextureCube=he,this.rebindTextures=qt,this.setupRenderTarget=xt,this.updateRenderTargetMipmap=yt,this.updateMultisampleRenderTarget=dt,this.setupDepthRenderbuffer=Ct,this.setupFrameBufferTexture=Oe,this.useMultisampledRTT=ut}function _Y(i,e){function t(n,r=uf){let s;const o=Mi.getTransfer(r);if(n===xc)return i.UNSIGNED_BYTE;if(n===WC)return i.UNSIGNED_SHORT_4_4_4_4;if(n===XC)return i.UNSIGNED_SHORT_5_5_5_1;if(n===sL)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===iL)return i.BYTE;if(n===rL)return i.SHORT;if(n===ly)return i.UNSIGNED_SHORT;if(n===$C)return i.INT;if(n===Lf)return i.UNSIGNED_INT;if(n===ya)return i.FLOAT;if(n===Vp)return i.HALF_FLOAT;if(n===oL)return i.ALPHA;if(n===aL)return i.RGB;if(n===Fo)return i.RGBA;if(n===lL)return i.LUMINANCE;if(n===uL)return i.LUMINANCE_ALPHA;if(n===_0)return i.DEPTH_COMPONENT;if(n===H0)return i.DEPTH_STENCIL;if(n===YC)return i.RED;if(n===Jx)return i.RED_INTEGER;if(n===cL)return i.RG;if(n===QC)return i.RG_INTEGER;if(n===KC)return i.RGBA_INTEGER;if(n===c_||n===h_||n===f_||n===d_)if(o===Qi)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===c_)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===h_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===f_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===d_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===c_)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===h_)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===f_)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===d_)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===ST||n===MT||n===TT||n===ET)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===ST)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===MT)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===TT)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ET)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===CT||n===RT||n===PT)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===CT||n===RT)return o===Qi?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===PT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===BT||n===IT||n===NT||n===DT||n===LT||n===OT||n===FT||n===kT||n===UT||n===zT||n===GT||n===HT||n===qT||n===VT)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===BT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===IT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===NT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===DT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===LT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===OT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===FT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===kT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===UT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===zT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===GT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===HT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===qT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===VT)return o===Qi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===p_||n===jT||n===$T)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===p_)return o===Qi?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===jT)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===$T)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===hL||n===WT||n===XT||n===YT)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===p_)return s.COMPRESSED_RED_RGTC1_EXT;if(n===WT)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===XT)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===YT)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===G0?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}class xY extends $i{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Cs=class extends Qn{constructor(){super(),this.isGroup=!0,this.type="Group"}};const Dde={type:"move"};class GR{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Cs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Cs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ne,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ne),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Cs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ne,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ne),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const v of e.hand.values()){const b=t.getJointPose(v,n),_=this._getHandJoint(u,v);b!==null&&(_.matrix.fromArray(b.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=b.radius),_.visible=b!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],f=c.position.distanceTo(h.position),d=.02,p=.005;u.inputState.pinching&&f>d+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=d-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Dde)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Cs;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const Lde=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Ode=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Fde{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const r=new or,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new po({vertexShader:Lde,fragmentShader:Ode,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new fi(new Vy(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class kde extends Fu{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,h=null,f=null,d=null,p=null;const v=new Fde,b=t.getContextAttributes();let _=null,M=null;const E=[],R=[],L=new je;let I=null;const D=new $i;D.layers.enable(1),D.viewport=new In;const k=new $i;k.layers.enable(2),k.viewport=new In;const G=[D,k],O=new xY;O.layers.enable(1),O.layers.enable(2);let U=null,Q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Se){let Oe=E[Se];return Oe===void 0&&(Oe=new GR,E[Se]=Oe),Oe.getTargetRaySpace()},this.getControllerGrip=function(Se){let Oe=E[Se];return Oe===void 0&&(Oe=new GR,E[Se]=Oe),Oe.getGripSpace()},this.getHand=function(Se){let Oe=E[Se];return Oe===void 0&&(Oe=new GR,E[Se]=Oe),Oe.getHandSpace()};function X(Se){const Oe=R.indexOf(Se.inputSource);if(Oe===-1)return;const Ye=E[Oe];Ye!==void 0&&(Ye.update(Se.inputSource,Se.frame,u||o),Ye.dispatchEvent({type:Se.type,data:Se.inputSource}))}function ee(){r.removeEventListener("select",X),r.removeEventListener("selectstart",X),r.removeEventListener("selectend",X),r.removeEventListener("squeeze",X),r.removeEventListener("squeezestart",X),r.removeEventListener("squeezeend",X),r.removeEventListener("end",ee),r.removeEventListener("inputsourceschange",K);for(let Se=0;Se<E.length;Se++){const Oe=R[Se];Oe!==null&&(R[Se]=null,E[Se].disconnect(Oe))}U=null,Q=null,v.reset(),e.setRenderTarget(_),d=null,f=null,h=null,r=null,M=null,He.stop(),n.isPresenting=!1,e.setPixelRatio(I),e.setSize(L.width,L.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Se){s=Se,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Se){a=Se,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(Se){u=Se},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(Se){if(r=Se,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",X),r.addEventListener("selectstart",X),r.addEventListener("selectend",X),r.addEventListener("squeeze",X),r.addEventListener("squeezestart",X),r.addEventListener("squeezeend",X),r.addEventListener("end",ee),r.addEventListener("inputsourceschange",K),b.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(L),r.renderState.layers===void 0){const Oe={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(r,t,Oe),r.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),M=new ql(d.framebufferWidth,d.framebufferHeight,{format:Fo,type:xc,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil})}else{let Oe=null,Ye=null,it=null;b.depth&&(it=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Oe=b.stencil?H0:_0,Ye=b.stencil?G0:Lf);const Ct={colorFormat:t.RGBA8,depthFormat:it,scaleFactor:s};h=new XRWebGLBinding(r,t),f=h.createProjectionLayer(Ct),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),M=new ql(f.textureWidth,f.textureHeight,{format:Fo,type:xc,depthTexture:new i4(f.textureWidth,f.textureHeight,Ye,void 0,void 0,void 0,void 0,void 0,void 0,Oe),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}M.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),He.setContext(r),He.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function K(Se){for(let Oe=0;Oe<Se.removed.length;Oe++){const Ye=Se.removed[Oe],it=R.indexOf(Ye);it>=0&&(R[it]=null,E[it].disconnect(Ye))}for(let Oe=0;Oe<Se.added.length;Oe++){const Ye=Se.added[Oe];let it=R.indexOf(Ye);if(it===-1){for(let qt=0;qt<E.length;qt++)if(qt>=R.length){R.push(Ye),it=qt;break}else if(R[qt]===null){R[qt]=Ye,it=qt;break}if(it===-1)break}const Ct=E[it];Ct&&Ct.connect(Ye)}}const Z=new ne,he=new ne;function j(Se,Oe,Ye){Z.setFromMatrixPosition(Oe.matrixWorld),he.setFromMatrixPosition(Ye.matrixWorld);const it=Z.distanceTo(he),Ct=Oe.projectionMatrix.elements,qt=Ye.projectionMatrix.elements,xt=Ct[14]/(Ct[10]-1),yt=Ct[14]/(Ct[10]+1),Qe=(Ct[9]+1)/Ct[5],ce=(Ct[9]-1)/Ct[5],dt=(Ct[8]-1)/Ct[0],pt=(qt[8]+1)/qt[0],ut=xt*dt,ft=xt*pt,Wt=it/(-dt+pt),Rt=Wt*-dt;if(Oe.matrixWorld.decompose(Se.position,Se.quaternion,Se.scale),Se.translateX(Rt),Se.translateZ(Wt),Se.matrixWorld.compose(Se.position,Se.quaternion,Se.scale),Se.matrixWorldInverse.copy(Se.matrixWorld).invert(),Ct[10]===-1)Se.projectionMatrix.copy(Oe.projectionMatrix),Se.projectionMatrixInverse.copy(Oe.projectionMatrixInverse);else{const fe=xt+Wt,te=yt+Wt,De=ut-Rt,Te=ft+(it-Rt),Fe=Qe*yt/te*fe,We=ce*yt/te*fe;Se.projectionMatrix.makePerspective(De,Te,Fe,We,fe,te),Se.projectionMatrixInverse.copy(Se.projectionMatrix).invert()}}function ie(Se,Oe){Oe===null?Se.matrixWorld.copy(Se.matrix):Se.matrixWorld.multiplyMatrices(Oe.matrixWorld,Se.matrix),Se.matrixWorldInverse.copy(Se.matrixWorld).invert()}this.updateCamera=function(Se){if(r===null)return;let Oe=Se.near,Ye=Se.far;v.texture!==null&&(v.depthNear>0&&(Oe=v.depthNear),v.depthFar>0&&(Ye=v.depthFar)),O.near=k.near=D.near=Oe,O.far=k.far=D.far=Ye,(U!==O.near||Q!==O.far)&&(r.updateRenderState({depthNear:O.near,depthFar:O.far}),U=O.near,Q=O.far);const it=Se.parent,Ct=O.cameras;ie(O,it);for(let qt=0;qt<Ct.length;qt++)ie(Ct[qt],it);Ct.length===2?j(O,D,k):O.projectionMatrix.copy(D.projectionMatrix),ae(Se,O,it)};function ae(Se,Oe,Ye){Ye===null?Se.matrix.copy(Oe.matrixWorld):(Se.matrix.copy(Ye.matrixWorld),Se.matrix.invert(),Se.matrix.multiply(Oe.matrixWorld)),Se.matrix.decompose(Se.position,Se.quaternion,Se.scale),Se.updateMatrixWorld(!0),Se.projectionMatrix.copy(Oe.projectionMatrix),Se.projectionMatrixInverse.copy(Oe.projectionMatrixInverse),Se.isPerspectiveCamera&&(Se.fov=fy*2*Math.atan(1/Se.projectionMatrix.elements[5]),Se.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(f===null&&d===null))return l},this.setFoveation=function(Se){l=Se,f!==null&&(f.fixedFoveation=Se),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=Se)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(O)};let pe=null;function Pe(Se,Oe){if(c=Oe.getViewerPose(u||o),p=Oe,c!==null){const Ye=c.views;d!==null&&(e.setRenderTargetFramebuffer(M,d.framebuffer),e.setRenderTarget(M));let it=!1;Ye.length!==O.cameras.length&&(O.cameras.length=0,it=!0);for(let qt=0;qt<Ye.length;qt++){const xt=Ye[qt];let yt=null;if(d!==null)yt=d.getViewport(xt);else{const ce=h.getViewSubImage(f,xt);yt=ce.viewport,qt===0&&(e.setRenderTargetTextures(M,ce.colorTexture,f.ignoreDepthValues?void 0:ce.depthStencilTexture),e.setRenderTarget(M))}let Qe=G[qt];Qe===void 0&&(Qe=new $i,Qe.layers.enable(qt),Qe.viewport=new In,G[qt]=Qe),Qe.matrix.fromArray(xt.transform.matrix),Qe.matrix.decompose(Qe.position,Qe.quaternion,Qe.scale),Qe.projectionMatrix.fromArray(xt.projectionMatrix),Qe.projectionMatrixInverse.copy(Qe.projectionMatrix).invert(),Qe.viewport.set(yt.x,yt.y,yt.width,yt.height),qt===0&&(O.matrix.copy(Qe.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),it===!0&&O.cameras.push(Qe)}const Ct=r.enabledFeatures;if(Ct&&Ct.includes("depth-sensing")){const qt=h.getDepthInformation(Ye[0]);qt&&qt.isValid&&qt.texture&&v.init(e,qt,r.renderState)}}for(let Ye=0;Ye<E.length;Ye++){const it=R[Ye],Ct=E[Ye];it!==null&&Ct!==void 0&&Ct.update(it,Oe,u||o)}pe&&pe(Se,Oe),Oe.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Oe}),p=null}const He=new AY;He.setAnimationLoop(Pe),this.setAnimationLoop=function(Se){pe=Se},this.dispose=function(){}}}const CA=new Jr,Ude=new kt;function zde(i,e){function t(b,_){b.matrixAutoUpdate===!0&&b.updateMatrix(),_.value.copy(b.matrix)}function n(b,_){_.color.getRGB(b.fogColor.value,fY(i)),_.isFog?(b.fogNear.value=_.near,b.fogFar.value=_.far):_.isFogExp2&&(b.fogDensity.value=_.density)}function r(b,_,M,E,R){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(b,_):_.isMeshToonMaterial?(s(b,_),h(b,_)):_.isMeshPhongMaterial?(s(b,_),c(b,_)):_.isMeshStandardMaterial?(s(b,_),f(b,_),_.isMeshPhysicalMaterial&&d(b,_,R)):_.isMeshMatcapMaterial?(s(b,_),p(b,_)):_.isMeshDepthMaterial?s(b,_):_.isMeshDistanceMaterial?(s(b,_),v(b,_)):_.isMeshNormalMaterial?s(b,_):_.isLineBasicMaterial?(o(b,_),_.isLineDashedMaterial&&a(b,_)):_.isPointsMaterial?l(b,_,M,E):_.isSpriteMaterial?u(b,_):_.isShadowMaterial?(b.color.value.copy(_.color),b.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(b,_){b.opacity.value=_.opacity,_.color&&b.diffuse.value.copy(_.color),_.emissive&&b.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(b.map.value=_.map,t(_.map,b.mapTransform)),_.alphaMap&&(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.bumpMap&&(b.bumpMap.value=_.bumpMap,t(_.bumpMap,b.bumpMapTransform),b.bumpScale.value=_.bumpScale,_.side===ho&&(b.bumpScale.value*=-1)),_.normalMap&&(b.normalMap.value=_.normalMap,t(_.normalMap,b.normalMapTransform),b.normalScale.value.copy(_.normalScale),_.side===ho&&b.normalScale.value.negate()),_.displacementMap&&(b.displacementMap.value=_.displacementMap,t(_.displacementMap,b.displacementMapTransform),b.displacementScale.value=_.displacementScale,b.displacementBias.value=_.displacementBias),_.emissiveMap&&(b.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,b.emissiveMapTransform)),_.specularMap&&(b.specularMap.value=_.specularMap,t(_.specularMap,b.specularMapTransform)),_.alphaTest>0&&(b.alphaTest.value=_.alphaTest);const M=e.get(_),E=M.envMap,R=M.envMapRotation;E&&(b.envMap.value=E,CA.copy(R),CA.x*=-1,CA.y*=-1,CA.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(CA.y*=-1,CA.z*=-1),b.envMapRotation.value.setFromMatrix4(Ude.makeRotationFromEuler(CA)),b.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=_.reflectivity,b.ior.value=_.ior,b.refractionRatio.value=_.refractionRatio),_.lightMap&&(b.lightMap.value=_.lightMap,b.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,b.lightMapTransform)),_.aoMap&&(b.aoMap.value=_.aoMap,b.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,b.aoMapTransform))}function o(b,_){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,_.map&&(b.map.value=_.map,t(_.map,b.mapTransform))}function a(b,_){b.dashSize.value=_.dashSize,b.totalSize.value=_.dashSize+_.gapSize,b.scale.value=_.scale}function l(b,_,M,E){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,b.size.value=_.size*M,b.scale.value=E*.5,_.map&&(b.map.value=_.map,t(_.map,b.uvTransform)),_.alphaMap&&(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.alphaTest>0&&(b.alphaTest.value=_.alphaTest)}function u(b,_){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,b.rotation.value=_.rotation,_.map&&(b.map.value=_.map,t(_.map,b.mapTransform)),_.alphaMap&&(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.alphaTest>0&&(b.alphaTest.value=_.alphaTest)}function c(b,_){b.specular.value.copy(_.specular),b.shininess.value=Math.max(_.shininess,1e-4)}function h(b,_){_.gradientMap&&(b.gradientMap.value=_.gradientMap)}function f(b,_){b.metalness.value=_.metalness,_.metalnessMap&&(b.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,b.metalnessMapTransform)),b.roughness.value=_.roughness,_.roughnessMap&&(b.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,b.roughnessMapTransform)),_.envMap&&(b.envMapIntensity.value=_.envMapIntensity)}function d(b,_,M){b.ior.value=_.ior,_.sheen>0&&(b.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),b.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(b.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,b.sheenColorMapTransform)),_.sheenRoughnessMap&&(b.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,b.sheenRoughnessMapTransform))),_.clearcoat>0&&(b.clearcoat.value=_.clearcoat,b.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(b.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,b.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(b.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===ho&&b.clearcoatNormalScale.value.negate())),_.dispersion>0&&(b.dispersion.value=_.dispersion),_.iridescence>0&&(b.iridescence.value=_.iridescence,b.iridescenceIOR.value=_.iridescenceIOR,b.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(b.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,b.iridescenceMapTransform)),_.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),_.transmission>0&&(b.transmission.value=_.transmission,b.transmissionSamplerMap.value=M.texture,b.transmissionSamplerSize.value.set(M.width,M.height),_.transmissionMap&&(b.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,b.transmissionMapTransform)),b.thickness.value=_.thickness,_.thicknessMap&&(b.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=_.attenuationDistance,b.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(b.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(b.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=_.specularIntensity,b.specularColor.value.copy(_.specularColor),_.specularColorMap&&(b.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,b.specularColorMapTransform)),_.specularIntensityMap&&(b.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,b.specularIntensityMapTransform))}function p(b,_){_.matcap&&(b.matcap.value=_.matcap)}function v(b,_){const M=e.get(_).light;b.referencePosition.value.setFromMatrixPosition(M.matrixWorld),b.nearDistance.value=M.shadow.camera.near,b.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function Gde(i,e,t,n){let r={},s={},o=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(M,E){const R=E.program;n.uniformBlockBinding(M,R)}function u(M,E){let R=r[M.id];R===void 0&&(p(M),R=c(M),r[M.id]=R,M.addEventListener("dispose",b));const L=E.program;n.updateUBOMapping(M,L);const I=e.render.frame;s[M.id]!==I&&(f(M),s[M.id]=I)}function c(M){const E=h();M.__bindingPointIndex=E;const R=i.createBuffer(),L=M.__size,I=M.usage;return i.bindBuffer(i.UNIFORM_BUFFER,R),i.bufferData(i.UNIFORM_BUFFER,L,I),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,E,R),R}function h(){for(let M=0;M<a;M++)if(o.indexOf(M)===-1)return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(M){const E=r[M.id],R=M.uniforms,L=M.__cache;i.bindBuffer(i.UNIFORM_BUFFER,E);for(let I=0,D=R.length;I<D;I++){const k=Array.isArray(R[I])?R[I]:[R[I]];for(let G=0,O=k.length;G<O;G++){const U=k[G];if(d(U,I,G,L)===!0){const Q=U.__offset,X=Array.isArray(U.value)?U.value:[U.value];let ee=0;for(let K=0;K<X.length;K++){const Z=X[K],he=v(Z);typeof Z=="number"||typeof Z=="boolean"?(U.__data[0]=Z,i.bufferSubData(i.UNIFORM_BUFFER,Q+ee,U.__data)):Z.isMatrix3?(U.__data[0]=Z.elements[0],U.__data[1]=Z.elements[1],U.__data[2]=Z.elements[2],U.__data[3]=0,U.__data[4]=Z.elements[3],U.__data[5]=Z.elements[4],U.__data[6]=Z.elements[5],U.__data[7]=0,U.__data[8]=Z.elements[6],U.__data[9]=Z.elements[7],U.__data[10]=Z.elements[8],U.__data[11]=0):(Z.toArray(U.__data,ee),ee+=he.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,Q,U.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function d(M,E,R,L){const I=M.value,D=E+"_"+R;if(L[D]===void 0)return typeof I=="number"||typeof I=="boolean"?L[D]=I:L[D]=I.clone(),!0;{const k=L[D];if(typeof I=="number"||typeof I=="boolean"){if(k!==I)return L[D]=I,!0}else if(k.equals(I)===!1)return k.copy(I),!0}return!1}function p(M){const E=M.uniforms;let R=0;const L=16;for(let D=0,k=E.length;D<k;D++){const G=Array.isArray(E[D])?E[D]:[E[D]];for(let O=0,U=G.length;O<U;O++){const Q=G[O],X=Array.isArray(Q.value)?Q.value:[Q.value];for(let ee=0,K=X.length;ee<K;ee++){const Z=X[ee],he=v(Z),j=R%L,ie=j%he.boundary,ae=j+ie;R+=ie,ae!==0&&L-ae<he.storage&&(R+=L-ae),Q.__data=new Float32Array(he.storage/Float32Array.BYTES_PER_ELEMENT),Q.__offset=R,R+=he.storage}}}const I=R%L;return I>0&&(R+=L-I),M.__size=R,M.__cache={},this}function v(M){const E={boundary:0,storage:0};return typeof M=="number"||typeof M=="boolean"?(E.boundary=4,E.storage=4):M.isVector2?(E.boundary=8,E.storage=8):M.isVector3||M.isColor?(E.boundary=16,E.storage=12):M.isVector4?(E.boundary=16,E.storage=16):M.isMatrix3?(E.boundary=48,E.storage=48):M.isMatrix4?(E.boundary=64,E.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),E}function b(M){const E=M.target;E.removeEventListener("dispose",b);const R=o.indexOf(E.__bindingPointIndex);o.splice(R,1),i.deleteBuffer(r[E.id]),delete r[E.id],delete s[E.id]}function _(){for(const M in r)i.deleteBuffer(r[M]);o=[],r={},s={}}return{bind:l,update:u,dispose:_}}class xL{constructor(e={}){const{canvas:t=iY(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let f;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=n.getContextAttributes().alpha}else f=o;const d=new Uint32Array(4),p=new Int32Array(4);let v=null,b=null;const _=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ua,this.toneMapping=ih,this.toneMappingExposure=1;const E=this;let R=!1,L=0,I=0,D=null,k=-1,G=null;const O=new In,U=new In;let Q=null;const X=new vt(0);let ee=0,K=t.width,Z=t.height,he=1,j=null,ie=null;const ae=new In(0,0,K,Z),pe=new In(0,0,K,Z);let Pe=!1;const He=new ib;let Se=!1,Oe=!1;const Ye=new kt,it=new kt,Ct=new ne,qt=new In,xt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let yt=!1;function Qe(){return D===null?he:1}let ce=n;function dt(re,xe){return t.getContext(re,xe)}try{const re={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Gy}`),t.addEventListener("webglcontextlost",at,!1),t.addEventListener("webglcontextrestored",jt,!1),t.addEventListener("webglcontextcreationerror",Le,!1),ce===null){const xe="webgl2";if(ce=dt(xe,re),ce===null)throw dt(xe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(re){throw console.error("THREE.WebGLRenderer: "+re.message),re}let pt,ut,ft,Wt,Rt,fe,te,De,Te,Fe,We,Bt,ct,Ft,vn,At,zt,hn,an,Vt,Me,Ze,Nt,ye;function wt(){pt=new Whe(ce),pt.init(),Ze=new _Y(ce,pt),ut=new Ghe(ce,pt,e,Ze),ft=new Ede(ce),ut.reverseDepthBuffer&&ft.buffers.depth.setReversed(!0),Wt=new Qhe(ce),Rt=new pde,fe=new Nde(ce,pt,ft,Rt,ut,Ze,Wt),te=new qhe(E),De=new $he(E),Te=new iue(ce),Nt=new Uhe(ce,Te),Fe=new Xhe(ce,Te,Wt,Nt),We=new Jhe(ce,Fe,Te,Wt),an=new Khe(ce,ut,fe),At=new Hhe(Rt),Bt=new dde(E,te,De,pt,ut,Nt,At),ct=new zde(E,Rt),Ft=new mde,vn=new bde(pt),hn=new khe(E,te,De,ft,We,f,l),zt=new Mde(E,We,ut),ye=new Gde(ce,Wt,ut,ft),Vt=new zhe(ce,pt,Wt),Me=new Yhe(ce,pt,Wt),Wt.programs=Bt.programs,E.capabilities=ut,E.extensions=pt,E.properties=Rt,E.renderLists=Ft,E.shadowMap=zt,E.state=ft,E.info=Wt}wt();const $e=new kde(E,ce);this.xr=$e,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const re=pt.get("WEBGL_lose_context");re&&re.loseContext()},this.forceContextRestore=function(){const re=pt.get("WEBGL_lose_context");re&&re.restoreContext()},this.getPixelRatio=function(){return he},this.setPixelRatio=function(re){re!==void 0&&(he=re,this.setSize(K,Z,!1))},this.getSize=function(re){return re.set(K,Z)},this.setSize=function(re,xe,qe=!0){if($e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}K=re,Z=xe,t.width=Math.floor(re*he),t.height=Math.floor(xe*he),qe===!0&&(t.style.width=re+"px",t.style.height=xe+"px"),this.setViewport(0,0,re,xe)},this.getDrawingBufferSize=function(re){return re.set(K*he,Z*he).floor()},this.setDrawingBufferSize=function(re,xe,qe){K=re,Z=xe,he=qe,t.width=Math.floor(re*qe),t.height=Math.floor(xe*qe),this.setViewport(0,0,re,xe)},this.getCurrentViewport=function(re){return re.copy(O)},this.getViewport=function(re){return re.copy(ae)},this.setViewport=function(re,xe,qe,Ne){re.isVector4?ae.set(re.x,re.y,re.z,re.w):ae.set(re,xe,qe,Ne),ft.viewport(O.copy(ae).multiplyScalar(he).round())},this.getScissor=function(re){return re.copy(pe)},this.setScissor=function(re,xe,qe,Ne){re.isVector4?pe.set(re.x,re.y,re.z,re.w):pe.set(re,xe,qe,Ne),ft.scissor(U.copy(pe).multiplyScalar(he).round())},this.getScissorTest=function(){return Pe},this.setScissorTest=function(re){ft.setScissorTest(Pe=re)},this.setOpaqueSort=function(re){j=re},this.setTransparentSort=function(re){ie=re},this.getClearColor=function(re){return re.copy(hn.getClearColor())},this.setClearColor=function(){hn.setClearColor.apply(hn,arguments)},this.getClearAlpha=function(){return hn.getClearAlpha()},this.setClearAlpha=function(){hn.setClearAlpha.apply(hn,arguments)},this.clear=function(re=!0,xe=!0,qe=!0){let Ne=0;if(re){let ve=!1;if(D!==null){const mt=D.texture.format;ve=mt===KC||mt===QC||mt===Jx}if(ve){const mt=D.texture.type,Gt=mt===xc||mt===Lf||mt===ly||mt===G0||mt===WC||mt===XC,Jt=hn.getClearColor(),Qt=hn.getClearAlpha(),nn=Jt.r,ln=Jt.g,Kt=Jt.b;Gt?(d[0]=nn,d[1]=ln,d[2]=Kt,d[3]=Qt,ce.clearBufferuiv(ce.COLOR,0,d)):(p[0]=nn,p[1]=ln,p[2]=Kt,p[3]=Qt,ce.clearBufferiv(ce.COLOR,0,p))}else Ne|=ce.COLOR_BUFFER_BIT}xe&&(Ne|=ce.DEPTH_BUFFER_BIT,ce.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),qe&&(Ne|=ce.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ce.clear(Ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",at,!1),t.removeEventListener("webglcontextrestored",jt,!1),t.removeEventListener("webglcontextcreationerror",Le,!1),Ft.dispose(),vn.dispose(),Rt.dispose(),te.dispose(),De.dispose(),We.dispose(),Nt.dispose(),ye.dispose(),Bt.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",nA),$e.removeEventListener("sessionend",iA),Ma.stop()};function at(re){re.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function jt(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const re=Wt.autoReset,xe=zt.enabled,qe=zt.autoUpdate,Ne=zt.needsUpdate,ve=zt.type;wt(),Wt.autoReset=re,zt.enabled=xe,zt.autoUpdate=qe,zt.needsUpdate=Ne,zt.type=ve}function Le(re){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",re.statusMessage)}function _n(re){const xe=re.target;xe.removeEventListener("dispose",_n),li(xe)}function li(re){ar(re),Rt.remove(re)}function ar(re){const xe=Rt.get(re).programs;xe!==void 0&&(xe.forEach(function(qe){Bt.releaseProgram(qe)}),re.isShaderMaterial&&Bt.releaseShaderCache(re))}this.renderBufferDirect=function(re,xe,qe,Ne,ve,mt){xe===null&&(xe=xt);const Gt=ve.isMesh&&ve.matrixWorld.determinant()<0,Jt=Jn(re,xe,qe,Ne,ve);ft.setMaterial(Ne,Gt);let Qt=qe.index,nn=1;if(Ne.wireframe===!0){if(Qt=Fe.getWireframeAttribute(qe),Qt===void 0)return;nn=2}const ln=qe.drawRange,Kt=qe.attributes.position;let ni=ln.start*nn,Ai=(ln.start+ln.count)*nn;mt!==null&&(ni=Math.max(ni,mt.start*nn),Ai=Math.min(Ai,(mt.start+mt.count)*nn)),Qt!==null?(ni=Math.max(ni,0),Ai=Math.min(Ai,Qt.count)):Kt!=null&&(ni=Math.max(ni,0),Ai=Math.min(Ai,Kt.count));const Xn=Ai-ni;if(Xn<0||Xn===1/0)return;Nt.setup(ve,Ne,Jt,qe,Qt);let Dt,se=Vt;if(Qt!==null&&(Dt=Te.get(Qt),se=Me,se.setIndex(Dt)),ve.isMesh)Ne.wireframe===!0?(ft.setLineWidth(Ne.wireframeLinewidth*Qe()),se.setMode(ce.LINES)):se.setMode(ce.TRIANGLES);else if(ve.isLine){let lt=Ne.linewidth;lt===void 0&&(lt=1),ft.setLineWidth(lt*Qe()),ve.isLineSegments?se.setMode(ce.LINES):ve.isLineLoop?se.setMode(ce.LINE_LOOP):se.setMode(ce.LINE_STRIP)}else ve.isPoints?se.setMode(ce.POINTS):ve.isSprite&&se.setMode(ce.TRIANGLES);if(ve.isBatchedMesh)if(ve._multiDrawInstances!==null)se.renderMultiDrawInstances(ve._multiDrawStarts,ve._multiDrawCounts,ve._multiDrawCount,ve._multiDrawInstances);else if(pt.get("WEBGL_multi_draw"))se.renderMultiDraw(ve._multiDrawStarts,ve._multiDrawCounts,ve._multiDrawCount);else{const lt=ve._multiDrawStarts,ii=ve._multiDrawCounts,wn=ve._multiDrawCount,Vr=Qt?Te.get(Qt).bytesPerElement:1,Xo=Rt.get(Ne).currentProgram.getUniforms();for(let Ei=0;Ei<wn;Ei++)Xo.setValue(ce,"_gl_DrawID",Ei),se.render(lt[Ei]/Vr,ii[Ei])}else if(ve.isInstancedMesh)se.renderInstances(ni,Xn,ve.count);else if(qe.isInstancedBufferGeometry){const lt=qe._maxInstanceCount!==void 0?qe._maxInstanceCount:1/0,ii=Math.min(qe.instanceCount,lt);se.renderInstances(ni,Xn,ii)}else se.render(ni,Xn)};function kn(re,xe,qe){re.transparent===!0&&re.side===ao&&re.forceSinglePass===!1?(re.side=ho,re.needsUpdate=!0,sn(re,xe,qe),re.side=fh,re.needsUpdate=!0,sn(re,xe,qe),re.side=ao):sn(re,xe,qe)}this.compile=function(re,xe,qe=null){qe===null&&(qe=re),b=vn.get(qe),b.init(xe),M.push(b),qe.traverseVisible(function(ve){ve.isLight&&ve.layers.test(xe.layers)&&(b.pushLight(ve),ve.castShadow&&b.pushShadow(ve))}),re!==qe&&re.traverseVisible(function(ve){ve.isLight&&ve.layers.test(xe.layers)&&(b.pushLight(ve),ve.castShadow&&b.pushShadow(ve))}),b.setupLights();const Ne=new Set;return re.traverse(function(ve){if(!(ve.isMesh||ve.isPoints||ve.isLine||ve.isSprite))return;const mt=ve.material;if(mt)if(Array.isArray(mt))for(let Gt=0;Gt<mt.length;Gt++){const Jt=mt[Gt];kn(Jt,qe,ve),Ne.add(Jt)}else kn(mt,qe,ve),Ne.add(mt)}),M.pop(),b=null,Ne},this.compileAsync=function(re,xe,qe=null){const Ne=this.compile(re,xe,qe);return new Promise(ve=>{function mt(){if(Ne.forEach(function(Gt){Rt.get(Gt).currentProgram.isReady()&&Ne.delete(Gt)}),Ne.size===0){ve(re);return}setTimeout(mt,10)}pt.get("KHR_parallel_shader_compile")!==null?mt():setTimeout(mt,10)})};let qi=null;function es(re){qi&&qi(re)}function nA(){Ma.stop()}function iA(){Ma.start()}const Ma=new AY;Ma.setAnimationLoop(es),typeof self<"u"&&Ma.setContext(self),this.setAnimationLoop=function(re){qi=re,$e.setAnimationLoop(re),re===null?Ma.stop():Ma.start()},$e.addEventListener("sessionstart",nA),$e.addEventListener("sessionend",iA),this.render=function(re,xe){if(xe!==void 0&&xe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;if(re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),xe.parent===null&&xe.matrixWorldAutoUpdate===!0&&xe.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&($e.cameraAutoUpdate===!0&&$e.updateCamera(xe),xe=$e.getCamera()),re.isScene===!0&&re.onBeforeRender(E,re,xe,D),b=vn.get(re,M.length),b.init(xe),M.push(b),it.multiplyMatrices(xe.projectionMatrix,xe.matrixWorldInverse),He.setFromProjectionMatrix(it),Oe=this.localClippingEnabled,Se=At.init(this.clippingPlanes,Oe),v=Ft.get(re,_.length),v.init(),_.push(v),$e.enabled===!0&&$e.isPresenting===!0){const mt=E.xr.getDepthSensingMesh();mt!==null&&Pc(mt,xe,-1/0,E.sortObjects)}Pc(re,xe,0,E.sortObjects),v.finish(),E.sortObjects===!0&&v.sort(j,ie),yt=$e.enabled===!1||$e.isPresenting===!1||$e.hasDepthSensing()===!1,yt&&hn.addToRenderList(v,re),this.info.render.frame++,Se===!0&&At.beginShadows();const qe=b.state.shadowsArray;zt.render(qe,re,xe),Se===!0&&At.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ne=v.opaque,ve=v.transmissive;if(b.setupLights(),xe.isArrayCamera){const mt=xe.cameras;if(ve.length>0)for(let Gt=0,Jt=mt.length;Gt<Jt;Gt++){const Qt=mt[Gt];Ue(Ne,ve,re,Qt)}yt&&hn.render(re);for(let Gt=0,Jt=mt.length;Gt<Jt;Gt++){const Qt=mt[Gt];Ta(v,re,Qt,Qt.viewport)}}else ve.length>0&&Ue(Ne,ve,re,xe),yt&&hn.render(re),Ta(v,re,xe);D!==null&&(fe.updateMultisampleRenderTarget(D),fe.updateRenderTargetMipmap(D)),re.isScene===!0&&re.onAfterRender(E,re,xe),Nt.resetDefaultState(),k=-1,G=null,M.pop(),M.length>0?(b=M[M.length-1],Se===!0&&At.setGlobalState(E.clippingPlanes,b.state.camera)):b=null,_.pop(),_.length>0?v=_[_.length-1]:v=null};function Pc(re,xe,qe,Ne){if(re.visible===!1)return;if(re.layers.test(xe.layers)){if(re.isGroup)qe=re.renderOrder;else if(re.isLOD)re.autoUpdate===!0&&re.update(xe);else if(re.isLight)b.pushLight(re),re.castShadow&&b.pushShadow(re);else if(re.isSprite){if(!re.frustumCulled||He.intersectsSprite(re)){Ne&&qt.setFromMatrixPosition(re.matrixWorld).applyMatrix4(it);const Gt=We.update(re),Jt=re.material;Jt.visible&&v.push(re,Gt,Jt,qe,qt.z,null)}}else if((re.isMesh||re.isLine||re.isPoints)&&(!re.frustumCulled||He.intersectsObject(re))){const Gt=We.update(re),Jt=re.material;if(Ne&&(re.boundingSphere!==void 0?(re.boundingSphere===null&&re.computeBoundingSphere(),qt.copy(re.boundingSphere.center)):(Gt.boundingSphere===null&&Gt.computeBoundingSphere(),qt.copy(Gt.boundingSphere.center)),qt.applyMatrix4(re.matrixWorld).applyMatrix4(it)),Array.isArray(Jt)){const Qt=Gt.groups;for(let nn=0,ln=Qt.length;nn<ln;nn++){const Kt=Qt[nn],ni=Jt[Kt.materialIndex];ni&&ni.visible&&v.push(re,Gt,ni,qe,qt.z,Kt)}}else Jt.visible&&v.push(re,Gt,Jt,qe,qt.z,null)}}const mt=re.children;for(let Gt=0,Jt=mt.length;Gt<Jt;Gt++)Pc(mt[Gt],xe,qe,Ne)}function Ta(re,xe,qe,Ne){const ve=re.opaque,mt=re.transmissive,Gt=re.transparent;b.setupLightsView(qe),Se===!0&&At.setGlobalState(E.clippingPlanes,qe),Ne&&ft.viewport(O.copy(Ne)),ve.length>0&&tt(ve,xe,qe),mt.length>0&&tt(mt,xe,qe),Gt.length>0&&tt(Gt,xe,qe),ft.buffers.depth.setTest(!0),ft.buffers.depth.setMask(!0),ft.buffers.color.setMask(!0),ft.setPolygonOffset(!1)}function Ue(re,xe,qe,Ne){if((qe.isScene===!0?qe.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[Ne.id]===void 0&&(b.state.transmissionRenderTarget[Ne.id]=new ql(1,1,{generateMipmaps:!0,type:pt.has("EXT_color_buffer_half_float")||pt.has("EXT_color_buffer_float")?Vp:xc,minFilter:Mu,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Mi.workingColorSpace}));const mt=b.state.transmissionRenderTarget[Ne.id],Gt=Ne.viewport||O;mt.setSize(Gt.z,Gt.w);const Jt=E.getRenderTarget();E.setRenderTarget(mt),E.getClearColor(X),ee=E.getClearAlpha(),ee<1&&E.setClearColor(16777215,.5),E.clear(),yt&&hn.render(qe);const Qt=E.toneMapping;E.toneMapping=ih;const nn=Ne.viewport;if(Ne.viewport!==void 0&&(Ne.viewport=void 0),b.setupLightsView(Ne),Se===!0&&At.setGlobalState(E.clippingPlanes,Ne),tt(re,qe,Ne),fe.updateMultisampleRenderTarget(mt),fe.updateRenderTargetMipmap(mt),pt.has("WEBGL_multisampled_render_to_texture")===!1){let ln=!1;for(let Kt=0,ni=xe.length;Kt<ni;Kt++){const Ai=xe[Kt],Xn=Ai.object,Dt=Ai.geometry,se=Ai.material,lt=Ai.group;if(se.side===ao&&Xn.layers.test(Ne.layers)){const ii=se.side;se.side=ho,se.needsUpdate=!0,Et(Xn,qe,Ne,Dt,se,lt),se.side=ii,se.needsUpdate=!0,ln=!0}}ln===!0&&(fe.updateMultisampleRenderTarget(mt),fe.updateRenderTargetMipmap(mt))}E.setRenderTarget(Jt),E.setClearColor(X,ee),nn!==void 0&&(Ne.viewport=nn),E.toneMapping=Qt}function tt(re,xe,qe){const Ne=xe.isScene===!0?xe.overrideMaterial:null;for(let ve=0,mt=re.length;ve<mt;ve++){const Gt=re[ve],Jt=Gt.object,Qt=Gt.geometry,nn=Ne===null?Gt.material:Ne,ln=Gt.group;Jt.layers.test(qe.layers)&&Et(Jt,xe,qe,Qt,nn,ln)}}function Et(re,xe,qe,Ne,ve,mt){re.onBeforeRender(E,xe,qe,Ne,ve,mt),re.modelViewMatrix.multiplyMatrices(qe.matrixWorldInverse,re.matrixWorld),re.normalMatrix.getNormalMatrix(re.modelViewMatrix),ve.onBeforeRender(E,xe,qe,Ne,re,mt),ve.transparent===!0&&ve.side===ao&&ve.forceSinglePass===!1?(ve.side=ho,ve.needsUpdate=!0,E.renderBufferDirect(qe,xe,Ne,ve,re,mt),ve.side=fh,ve.needsUpdate=!0,E.renderBufferDirect(qe,xe,Ne,ve,re,mt),ve.side=ao):E.renderBufferDirect(qe,xe,Ne,ve,re,mt),re.onAfterRender(E,xe,qe,Ne,ve,mt)}function sn(re,xe,qe){xe.isScene!==!0&&(xe=xt);const Ne=Rt.get(re),ve=b.state.lights,mt=b.state.shadowsArray,Gt=ve.state.version,Jt=Bt.getParameters(re,ve.state,mt,xe,qe),Qt=Bt.getProgramCacheKey(Jt);let nn=Ne.programs;Ne.environment=re.isMeshStandardMaterial?xe.environment:null,Ne.fog=xe.fog,Ne.envMap=(re.isMeshStandardMaterial?De:te).get(re.envMap||Ne.environment),Ne.envMapRotation=Ne.environment!==null&&re.envMap===null?xe.environmentRotation:re.envMapRotation,nn===void 0&&(re.addEventListener("dispose",_n),nn=new Map,Ne.programs=nn);let ln=nn.get(Qt);if(ln!==void 0){if(Ne.currentProgram===ln&&Ne.lightsStateVersion===Gt)return le(re,Jt),ln}else Jt.uniforms=Bt.getUniforms(re),re.onBeforeCompile(Jt,E),ln=Bt.acquireProgram(Jt,Qt),nn.set(Qt,ln),Ne.uniforms=Jt.uniforms;const Kt=Ne.uniforms;return(!re.isShaderMaterial&&!re.isRawShaderMaterial||re.clipping===!0)&&(Kt.clippingPlanes=At.uniform),le(re,Jt),Ne.needsLights=Br(re),Ne.lightsStateVersion=Gt,Ne.needsLights&&(Kt.ambientLightColor.value=ve.state.ambient,Kt.lightProbe.value=ve.state.probe,Kt.directionalLights.value=ve.state.directional,Kt.directionalLightShadows.value=ve.state.directionalShadow,Kt.spotLights.value=ve.state.spot,Kt.spotLightShadows.value=ve.state.spotShadow,Kt.rectAreaLights.value=ve.state.rectArea,Kt.ltc_1.value=ve.state.rectAreaLTC1,Kt.ltc_2.value=ve.state.rectAreaLTC2,Kt.pointLights.value=ve.state.point,Kt.pointLightShadows.value=ve.state.pointShadow,Kt.hemisphereLights.value=ve.state.hemi,Kt.directionalShadowMap.value=ve.state.directionalShadowMap,Kt.directionalShadowMatrix.value=ve.state.directionalShadowMatrix,Kt.spotShadowMap.value=ve.state.spotShadowMap,Kt.spotLightMatrix.value=ve.state.spotLightMatrix,Kt.spotLightMap.value=ve.state.spotLightMap,Kt.pointShadowMap.value=ve.state.pointShadowMap,Kt.pointShadowMatrix.value=ve.state.pointShadowMatrix),Ne.currentProgram=ln,Ne.uniformsList=null,ln}function g(re){if(re.uniformsList===null){const xe=re.currentProgram.getUniforms();re.uniformsList=SM.seqWithValue(xe.seq,re.uniforms)}return re.uniformsList}function le(re,xe){const qe=Rt.get(re);qe.outputColorSpace=xe.outputColorSpace,qe.batching=xe.batching,qe.batchingColor=xe.batchingColor,qe.instancing=xe.instancing,qe.instancingColor=xe.instancingColor,qe.instancingMorph=xe.instancingMorph,qe.skinning=xe.skinning,qe.morphTargets=xe.morphTargets,qe.morphNormals=xe.morphNormals,qe.morphColors=xe.morphColors,qe.morphTargetsCount=xe.morphTargetsCount,qe.numClippingPlanes=xe.numClippingPlanes,qe.numIntersection=xe.numClipIntersection,qe.vertexAlphas=xe.vertexAlphas,qe.vertexTangents=xe.vertexTangents,qe.toneMapping=xe.toneMapping}function Jn(re,xe,qe,Ne,ve){xe.isScene!==!0&&(xe=xt),fe.resetTextureUnits();const mt=xe.fog,Gt=Ne.isMeshStandardMaterial?xe.environment:null,Jt=D===null?E.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:Qf,Qt=(Ne.isMeshStandardMaterial?De:te).get(Ne.envMap||Gt),nn=Ne.vertexColors===!0&&!!qe.attributes.color&&qe.attributes.color.itemSize===4,ln=!!qe.attributes.tangent&&(!!Ne.normalMap||Ne.anisotropy>0),Kt=!!qe.morphAttributes.position,ni=!!qe.morphAttributes.normal,Ai=!!qe.morphAttributes.color;let Xn=ih;Ne.toneMapped&&(D===null||D.isXRRenderTarget===!0)&&(Xn=E.toneMapping);const Dt=qe.morphAttributes.position||qe.morphAttributes.normal||qe.morphAttributes.color,se=Dt!==void 0?Dt.length:0,lt=Rt.get(Ne),ii=b.state.lights;if(Se===!0&&(Oe===!0||re!==G)){const Xs=re===G&&Ne.id===k;At.setState(Ne,re,Xs)}let wn=!1;Ne.version===lt.__version?(lt.needsLights&&lt.lightsStateVersion!==ii.state.version||lt.outputColorSpace!==Jt||ve.isBatchedMesh&&lt.batching===!1||!ve.isBatchedMesh&&lt.batching===!0||ve.isBatchedMesh&&lt.batchingColor===!0&&ve.colorTexture===null||ve.isBatchedMesh&&lt.batchingColor===!1&&ve.colorTexture!==null||ve.isInstancedMesh&&lt.instancing===!1||!ve.isInstancedMesh&&lt.instancing===!0||ve.isSkinnedMesh&&lt.skinning===!1||!ve.isSkinnedMesh&&lt.skinning===!0||ve.isInstancedMesh&&lt.instancingColor===!0&&ve.instanceColor===null||ve.isInstancedMesh&&lt.instancingColor===!1&&ve.instanceColor!==null||ve.isInstancedMesh&&lt.instancingMorph===!0&&ve.morphTexture===null||ve.isInstancedMesh&&lt.instancingMorph===!1&&ve.morphTexture!==null||lt.envMap!==Qt||Ne.fog===!0&&lt.fog!==mt||lt.numClippingPlanes!==void 0&&(lt.numClippingPlanes!==At.numPlanes||lt.numIntersection!==At.numIntersection)||lt.vertexAlphas!==nn||lt.vertexTangents!==ln||lt.morphTargets!==Kt||lt.morphNormals!==ni||lt.morphColors!==Ai||lt.toneMapping!==Xn||lt.morphTargetsCount!==se)&&(wn=!0):(wn=!0,lt.__version=Ne.version);let Vr=lt.currentProgram;wn===!0&&(Vr=sn(Ne,xe,ve));let Xo=!1,Ei=!1,oe=!1;const Wi=Vr.getUniforms(),cl=lt.uniforms;if(ft.useProgram(Vr.program)&&(Xo=!0,Ei=!0,oe=!0),Ne.id!==k&&(k=Ne.id,Ei=!0),Xo||G!==re){ut.reverseDepthBuffer?(Ye.copy(re.projectionMatrix),Ele(Ye),Cle(Ye),Wi.setValue(ce,"projectionMatrix",Ye)):Wi.setValue(ce,"projectionMatrix",re.projectionMatrix),Wi.setValue(ce,"viewMatrix",re.matrixWorldInverse);const Xs=Wi.map.cameraPosition;Xs!==void 0&&Xs.setValue(ce,Ct.setFromMatrixPosition(re.matrixWorld)),ut.logarithmicDepthBuffer&&Wi.setValue(ce,"logDepthBufFC",2/(Math.log(re.far+1)/Math.LN2)),(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial)&&Wi.setValue(ce,"isOrthographic",re.isOrthographicCamera===!0),G!==re&&(G=re,Ei=!0,oe=!0)}if(ve.isSkinnedMesh){Wi.setOptional(ce,ve,"bindMatrix"),Wi.setOptional(ce,ve,"bindMatrixInverse");const Xs=ve.skeleton;Xs&&(Xs.boneTexture===null&&Xs.computeBoneTexture(),Wi.setValue(ce,"boneTexture",Xs.boneTexture,fe))}ve.isBatchedMesh&&(Wi.setOptional(ce,ve,"batchingTexture"),Wi.setValue(ce,"batchingTexture",ve._matricesTexture,fe),Wi.setOptional(ce,ve,"batchingIdTexture"),Wi.setValue(ce,"batchingIdTexture",ve._indirectTexture,fe),Wi.setOptional(ce,ve,"batchingColorTexture"),ve._colorsTexture!==null&&Wi.setValue(ce,"batchingColorTexture",ve._colorsTexture,fe));const Bc=qe.morphAttributes;if((Bc.position!==void 0||Bc.normal!==void 0||Bc.color!==void 0)&&an.update(ve,qe,Vr),(Ei||lt.receiveShadow!==ve.receiveShadow)&&(lt.receiveShadow=ve.receiveShadow,Wi.setValue(ce,"receiveShadow",ve.receiveShadow)),Ne.isMeshGouraudMaterial&&Ne.envMap!==null&&(cl.envMap.value=Qt,cl.flipEnvMap.value=Qt.isCubeTexture&&Qt.isRenderTargetTexture===!1?-1:1),Ne.isMeshStandardMaterial&&Ne.envMap===null&&xe.environment!==null&&(cl.envMapIntensity.value=xe.environmentIntensity),Ei&&(Wi.setValue(ce,"toneMappingExposure",E.toneMappingExposure),lt.needsLights&&pi(cl,oe),mt&&Ne.fog===!0&&ct.refreshFogUniforms(cl,mt),ct.refreshMaterialUniforms(cl,Ne,he,Z,b.state.transmissionRenderTarget[re.id]),SM.upload(ce,g(lt),cl,fe)),Ne.isShaderMaterial&&Ne.uniformsNeedUpdate===!0&&(SM.upload(ce,g(lt),cl,fe),Ne.uniformsNeedUpdate=!1),Ne.isSpriteMaterial&&Wi.setValue(ce,"center",ve.center),Wi.setValue(ce,"modelViewMatrix",ve.modelViewMatrix),Wi.setValue(ce,"normalMatrix",ve.normalMatrix),Wi.setValue(ce,"modelMatrix",ve.matrixWorld),Ne.isShaderMaterial||Ne.isRawShaderMaterial){const Xs=Ne.uniformsGroups;for(let Ys=0,dv=Xs.length;Ys<dv;Ys++){const rA=Xs[Ys];ye.update(rA,Vr),ye.bind(rA,Vr)}}return Vr}function pi(re,xe){re.ambientLightColor.needsUpdate=xe,re.lightProbe.needsUpdate=xe,re.directionalLights.needsUpdate=xe,re.directionalLightShadows.needsUpdate=xe,re.pointLights.needsUpdate=xe,re.pointLightShadows.needsUpdate=xe,re.spotLights.needsUpdate=xe,re.spotLightShadows.needsUpdate=xe,re.rectAreaLights.needsUpdate=xe,re.hemisphereLights.needsUpdate=xe}function Br(re){return re.isMeshLambertMaterial||re.isMeshToonMaterial||re.isMeshPhongMaterial||re.isMeshStandardMaterial||re.isShadowMaterial||re.isShaderMaterial&&re.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(re,xe,qe){Rt.get(re.texture).__webglTexture=xe,Rt.get(re.depthTexture).__webglTexture=qe;const Ne=Rt.get(re);Ne.__hasExternalTextures=!0,Ne.__autoAllocateDepthBuffer=qe===void 0,Ne.__autoAllocateDepthBuffer||pt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ne.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(re,xe){const qe=Rt.get(re);qe.__webglFramebuffer=xe,qe.__useDefaultFramebuffer=xe===void 0},this.setRenderTarget=function(re,xe=0,qe=0){D=re,L=xe,I=qe;let Ne=!0,ve=null,mt=!1,Gt=!1;if(re){const Qt=Rt.get(re);if(Qt.__useDefaultFramebuffer!==void 0)ft.bindFramebuffer(ce.FRAMEBUFFER,null),Ne=!1;else if(Qt.__webglFramebuffer===void 0)fe.setupRenderTarget(re);else if(Qt.__hasExternalTextures)fe.rebindTextures(re,Rt.get(re.texture).__webglTexture,Rt.get(re.depthTexture).__webglTexture);else if(re.depthBuffer){const Kt=re.depthTexture;if(Qt.__boundDepthTexture!==Kt){if(Kt!==null&&Rt.has(Kt)&&(re.width!==Kt.image.width||re.height!==Kt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");fe.setupDepthRenderbuffer(re)}}const nn=re.texture;(nn.isData3DTexture||nn.isDataArrayTexture||nn.isCompressedArrayTexture)&&(Gt=!0);const ln=Rt.get(re).__webglFramebuffer;re.isWebGLCubeRenderTarget?(Array.isArray(ln[xe])?ve=ln[xe][qe]:ve=ln[xe],mt=!0):re.samples>0&&fe.useMultisampledRTT(re)===!1?ve=Rt.get(re).__webglMultisampledFramebuffer:Array.isArray(ln)?ve=ln[qe]:ve=ln,O.copy(re.viewport),U.copy(re.scissor),Q=re.scissorTest}else O.copy(ae).multiplyScalar(he).floor(),U.copy(pe).multiplyScalar(he).floor(),Q=Pe;if(ft.bindFramebuffer(ce.FRAMEBUFFER,ve)&&Ne&&ft.drawBuffers(re,ve),ft.viewport(O),ft.scissor(U),ft.setScissorTest(Q),mt){const Qt=Rt.get(re.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Qt.__webglTexture,qe)}else if(Gt){const Qt=Rt.get(re.texture),nn=xe||0;ce.framebufferTextureLayer(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Qt.__webglTexture,qe||0,nn)}k=-1},this.readRenderTargetPixels=function(re,xe,qe,Ne,ve,mt,Gt){if(!(re&&re.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Jt=Rt.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&Gt!==void 0&&(Jt=Jt[Gt]),Jt){ft.bindFramebuffer(ce.FRAMEBUFFER,Jt);try{const Qt=re.texture,nn=Qt.format,ln=Qt.type;if(!ut.textureFormatReadable(nn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ut.textureTypeReadable(ln)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}xe>=0&&xe<=re.width-Ne&&qe>=0&&qe<=re.height-ve&&ce.readPixels(xe,qe,Ne,ve,Ze.convert(nn),Ze.convert(ln),mt)}finally{const Qt=D!==null?Rt.get(D).__webglFramebuffer:null;ft.bindFramebuffer(ce.FRAMEBUFFER,Qt)}}},this.readRenderTargetPixelsAsync=async function(re,xe,qe,Ne,ve,mt,Gt){if(!(re&&re.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Jt=Rt.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&Gt!==void 0&&(Jt=Jt[Gt]),Jt){const Qt=re.texture,nn=Qt.format,ln=Qt.type;if(!ut.textureFormatReadable(nn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ut.textureTypeReadable(ln))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(xe>=0&&xe<=re.width-Ne&&qe>=0&&qe<=re.height-ve){ft.bindFramebuffer(ce.FRAMEBUFFER,Jt);const Kt=ce.createBuffer();ce.bindBuffer(ce.PIXEL_PACK_BUFFER,Kt),ce.bufferData(ce.PIXEL_PACK_BUFFER,mt.byteLength,ce.STREAM_READ),ce.readPixels(xe,qe,Ne,ve,Ze.convert(nn),Ze.convert(ln),0);const ni=D!==null?Rt.get(D).__webglFramebuffer:null;ft.bindFramebuffer(ce.FRAMEBUFFER,ni);const Ai=ce.fenceSync(ce.SYNC_GPU_COMMANDS_COMPLETE,0);return ce.flush(),await Tle(ce,Ai,4),ce.bindBuffer(ce.PIXEL_PACK_BUFFER,Kt),ce.getBufferSubData(ce.PIXEL_PACK_BUFFER,0,mt),ce.deleteBuffer(Kt),ce.deleteSync(Ai),mt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(re,xe=null,qe=0){re.isTexture!==!0&&(xM("WebGLRenderer: copyFramebufferToTexture function signature has changed."),xe=arguments[0]||null,re=arguments[1]);const Ne=Math.pow(2,-qe),ve=Math.floor(re.image.width*Ne),mt=Math.floor(re.image.height*Ne),Gt=xe!==null?xe.x:0,Jt=xe!==null?xe.y:0;fe.setTexture2D(re,0),ce.copyTexSubImage2D(ce.TEXTURE_2D,qe,0,0,Gt,Jt,ve,mt),ft.unbindTexture()},this.copyTextureToTexture=function(re,xe,qe=null,Ne=null,ve=0){re.isTexture!==!0&&(xM("WebGLRenderer: copyTextureToTexture function signature has changed."),Ne=arguments[0]||null,re=arguments[1],xe=arguments[2],ve=arguments[3]||0,qe=null);let mt,Gt,Jt,Qt,nn,ln;qe!==null?(mt=qe.max.x-qe.min.x,Gt=qe.max.y-qe.min.y,Jt=qe.min.x,Qt=qe.min.y):(mt=re.image.width,Gt=re.image.height,Jt=0,Qt=0),Ne!==null?(nn=Ne.x,ln=Ne.y):(nn=0,ln=0);const Kt=Ze.convert(xe.format),ni=Ze.convert(xe.type);fe.setTexture2D(xe,0),ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,xe.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,xe.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,xe.unpackAlignment);const Ai=ce.getParameter(ce.UNPACK_ROW_LENGTH),Xn=ce.getParameter(ce.UNPACK_IMAGE_HEIGHT),Dt=ce.getParameter(ce.UNPACK_SKIP_PIXELS),se=ce.getParameter(ce.UNPACK_SKIP_ROWS),lt=ce.getParameter(ce.UNPACK_SKIP_IMAGES),ii=re.isCompressedTexture?re.mipmaps[ve]:re.image;ce.pixelStorei(ce.UNPACK_ROW_LENGTH,ii.width),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,ii.height),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,Jt),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,Qt),re.isDataTexture?ce.texSubImage2D(ce.TEXTURE_2D,ve,nn,ln,mt,Gt,Kt,ni,ii.data):re.isCompressedTexture?ce.compressedTexSubImage2D(ce.TEXTURE_2D,ve,nn,ln,ii.width,ii.height,Kt,ii.data):ce.texSubImage2D(ce.TEXTURE_2D,ve,nn,ln,mt,Gt,Kt,ni,ii),ce.pixelStorei(ce.UNPACK_ROW_LENGTH,Ai),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,Xn),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,Dt),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,se),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,lt),ve===0&&xe.generateMipmaps&&ce.generateMipmap(ce.TEXTURE_2D),ft.unbindTexture()},this.copyTextureToTexture3D=function(re,xe,qe=null,Ne=null,ve=0){re.isTexture!==!0&&(xM("WebGLRenderer: copyTextureToTexture3D function signature has changed."),qe=arguments[0]||null,Ne=arguments[1]||null,re=arguments[2],xe=arguments[3],ve=arguments[4]||0);let mt,Gt,Jt,Qt,nn,ln,Kt,ni,Ai;const Xn=re.isCompressedTexture?re.mipmaps[ve]:re.image;qe!==null?(mt=qe.max.x-qe.min.x,Gt=qe.max.y-qe.min.y,Jt=qe.max.z-qe.min.z,Qt=qe.min.x,nn=qe.min.y,ln=qe.min.z):(mt=Xn.width,Gt=Xn.height,Jt=Xn.depth,Qt=0,nn=0,ln=0),Ne!==null?(Kt=Ne.x,ni=Ne.y,Ai=Ne.z):(Kt=0,ni=0,Ai=0);const Dt=Ze.convert(xe.format),se=Ze.convert(xe.type);let lt;if(xe.isData3DTexture)fe.setTexture3D(xe,0),lt=ce.TEXTURE_3D;else if(xe.isDataArrayTexture||xe.isCompressedArrayTexture)fe.setTexture2DArray(xe,0),lt=ce.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,xe.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,xe.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,xe.unpackAlignment);const ii=ce.getParameter(ce.UNPACK_ROW_LENGTH),wn=ce.getParameter(ce.UNPACK_IMAGE_HEIGHT),Vr=ce.getParameter(ce.UNPACK_SKIP_PIXELS),Xo=ce.getParameter(ce.UNPACK_SKIP_ROWS),Ei=ce.getParameter(ce.UNPACK_SKIP_IMAGES);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,Xn.width),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,Xn.height),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,Qt),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,nn),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,ln),re.isDataTexture||re.isData3DTexture?ce.texSubImage3D(lt,ve,Kt,ni,Ai,mt,Gt,Jt,Dt,se,Xn.data):xe.isCompressedArrayTexture?ce.compressedTexSubImage3D(lt,ve,Kt,ni,Ai,mt,Gt,Jt,Dt,Xn.data):ce.texSubImage3D(lt,ve,Kt,ni,Ai,mt,Gt,Jt,Dt,se,Xn),ce.pixelStorei(ce.UNPACK_ROW_LENGTH,ii),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,wn),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,Vr),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,Xo),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,Ei),ve===0&&xe.generateMipmaps&&ce.generateMipmap(lt),ft.unbindTexture()},this.initRenderTarget=function(re){Rt.get(re).__webglFramebuffer===void 0&&fe.setupRenderTarget(re)},this.initTexture=function(re){re.isCubeTexture?fe.setTextureCube(re,0):re.isData3DTexture?fe.setTexture3D(re,0):re.isDataArrayTexture||re.isCompressedArrayTexture?fe.setTexture2DArray(re,0):fe.setTexture2D(re,0),ft.unbindTexture()},this.resetState=function(){L=0,I=0,D=null,ft.reset(),Nt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Kc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===e4?"display-p3":"srgb",t.unpackColorSpace=Mi.workingColorSpace===Zx?"display-p3":"srgb"}}class s4{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new vt(e),this.density=t}clone(){return new s4(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class o4{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new vt(e),this.near=t,this.far=n}clone(){return new o4(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let sx=class extends Qn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Jr,this.environmentIntensity=1,this.environmentRotation=new Jr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},$y=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=nx,this.updateRanges=[],this.version=0,this.uuid=Ul()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ul()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ul()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}};const ta=new ne;let Ol=class bY{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ta.fromBufferAttribute(this,t),ta.applyMatrix4(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ta.fromBufferAttribute(this,t),ta.applyNormalMatrix(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ta.fromBufferAttribute(this,t),ta.transformDirection(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=pa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Un(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Un(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=pa(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=pa(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=pa(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=pa(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Un(t,this.array),n=Un(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Un(t,this.array),n=Un(n,this.array),r=Un(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Un(t,this.array),n=Un(n,this.array),r=Un(r,this.array),s=Un(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Kn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new bY(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},bL=class extends ps{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},sg;const Xv=new ne,og=new ne,ag=new ne,lg=new je,Yv=new je,wY=new kt,mS=new ne,Qv=new ne,gS=new ne,p7=new je,HR=new je,A7=new je;class SY extends Qn{constructor(e=new bL){if(super(),this.isSprite=!0,this.type="Sprite",sg===void 0){sg=new fn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new $y(t,5);sg.setIndex([0,1,2,0,2,3]),sg.setAttribute("position",new Ol(n,3,0,!1)),sg.setAttribute("uv",new Ol(n,2,3,!1))}this.geometry=sg,this.material=e,this.center=new je(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),og.setFromMatrixScale(this.matrixWorld),wY.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ag.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&og.multiplyScalar(-ag.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;yS(mS.set(-.5,-.5,0),ag,o,og,r,s),yS(Qv.set(.5,-.5,0),ag,o,og,r,s),yS(gS.set(.5,.5,0),ag,o,og,r,s),p7.set(0,0),HR.set(1,0),A7.set(1,1);let a=e.ray.intersectTriangle(mS,Qv,gS,!1,Xv);if(a===null&&(yS(Qv.set(-.5,.5,0),ag,o,og,r,s),HR.set(0,1),a=e.ray.intersectTriangle(mS,gS,Qv,!1,Xv),a===null))return;const l=e.ray.origin.distanceTo(Xv);l<e.near||l>e.far||t.push({distance:l,point:Xv.clone(),uv:ep.getInterpolation(Xv,mS,Qv,gS,p7,HR,A7,new je),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function yS(i,e,t,n,r,s){lg.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(Yv.x=s*lg.x-r*lg.y,Yv.y=r*lg.x+s*lg.y):Yv.copy(lg),i.copy(e),i.x+=Yv.x,i.y+=Yv.y,i.applyMatrix4(wY)}const vS=new ne,m7=new ne;class MY extends Qn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){vS.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(vS);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){vS.setFromMatrixPosition(e.matrixWorld),m7.setFromMatrixPosition(this.matrixWorld);const n=vS.distanceTo(m7)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),n>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const g7=new ne,y7=new In,v7=new In,Hde=new ne,_7=new kt,_S=new ne,qR=new ds,x7=new kt,VR=new $p;class a4 extends fi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=yB,this.bindMatrix=new kt,this.bindMatrixInverse=new kt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Zr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,_S),this.boundingBox.expandByPoint(_S)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ds),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,_S),this.boundingSphere.expandByPoint(_S)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),qR.copy(this.boundingSphere),qR.applyMatrix4(r),e.ray.intersectsSphere(qR)!==!1&&(x7.copy(r).invert(),VR.copy(e.ray).applyMatrix4(x7),!(this.boundingBox!==null&&VR.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,VR)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new In,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===yB?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===zX?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;y7.fromBufferAttribute(r.attributes.skinIndex,e),v7.fromBufferAttribute(r.attributes.skinWeight,e),g7.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=v7.getComponent(s);if(o!==0){const a=y7.getComponent(s);_7.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(Hde.copy(g7).applyMatrix4(_7),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class py extends Qn{constructor(){super(),this.isBone=!0,this.type="Bone"}}let rh=class extends or{constructor(e=null,t=1,n=1,r,s,o,a,l,u=Es,c=Es,h,f){super(null,o,a,l,u,c,r,s,h,f),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};const b7=new kt,qde=new kt;class Wy{constructor(e=[],t=[]){this.uuid=Ul(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new kt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new kt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:qde;b7.multiplyMatrices(a,t[s]),b7.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Wy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new rh(t,e,e,Fo,ya);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new py),this.bones.push(o),this.boneInverses.push(new kt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}let Of=class extends Kn{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}};const ug=new kt,w7=new kt,xS=[],S7=new Zr,Vde=new kt,Kv=new fi,Jv=new ds;class wL extends fi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Of(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Vde)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Zr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,ug),S7.copy(e.boundingBox).applyMatrix4(ug),this.boundingBox.union(S7)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ds),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,ug),Jv.copy(e.boundingSphere).applyMatrix4(ug),this.boundingSphere.union(Jv)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let a=0;a<n.length;a++)n[a]=r[o+a]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Kv.geometry=this.geometry,Kv.material=this.material,Kv.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Jv.copy(this.boundingSphere),Jv.applyMatrix4(n),e.ray.intersectsSphere(Jv)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,ug),w7.multiplyMatrices(n,ug),Kv.matrixWorld=w7,Kv.raycast(e,xS);for(let o=0,a=xS.length;o<a;o++){const l=xS[o];l.instanceId=s,l.object=this,t.push(l)}xS.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Of(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new rh(new Float32Array(r*this.count),r,this.count,YC,ya));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<n.length;u++)o+=n[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function jde(i,e){return i.z-e.z}function $de(i,e){return e.z-i.z}class Wde{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n){const r=this.pool,s=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=n}reset(){this.list.length=0,this.index=0}}const Pd=new kt,jR=new kt,Xde=new kt,Yde=new vt(1,1,1),M7=new kt,$R=new ib,bS=new Zr,RA=new ds,Zv=new ne,T7=new ne,Qde=new ne,WR=new Wde,Eo=new fi,wS=[];function Kde(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,i.getComponent(s,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}class TY extends fi{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,n=t*2,r){super(new fn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new rh(t,e,e,Fo,ya);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new rh(t,e,e,Jx,Lf);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new rh(t,e,e,Fo,ya);n.colorSpace=Mi.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,c=new a.constructor(n*l),h=new Kn(c,l,u);t.setAttribute(s,h)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Kn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zr);const e=this.boundingBox,t=this._drawInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Pd),this.getBoundingBoxAt(s,bS).applyMatrix4(Pd),e.union(bS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ds);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Pd),this.getBoundingSphereAt(s,RA).applyMatrix4(Pd),e.union(RA)}}addInstance(e){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(r=this._availableInstanceIds.pop(),this._drawInfo[r]=n):(r=this._drawInfo.length,this._drawInfo.push(n));const s=this._matricesTexture,o=s.image.data;Xde.toArray(o,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(Yde.toArray(a.image.data,r*4),a.needsUpdate=!0),r}addGeometry(e,t=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),c=u!==null;if(c&&(n===-1?r.indexCount=u.count:r.indexCount=n,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const h=this._geometryCount;return this._geometryCount++,o.push(r),a.push({start:c?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Zr,sphereInitialized:!1,sphere:new ds}),this.setGeometryAt(h,e),h}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.vertexCount;for(const d in n.attributes){const p=t.getAttribute(d),v=n.getAttribute(d);Kde(p,v,l);const b=p.itemSize;for(let _=p.count,M=u;_<M;_++){const E=l+_;for(let R=0;R<b;R++)v.setComponent(E,R,0)}v.needsUpdate=!0,v.addUpdateRange(l*b,u*b)}if(r){const d=a.indexStart;for(let p=0;p<o.count;p++)s.setX(d+p,l+o.getX(p));for(let p=o.count,v=a.indexCount;p<v;p++)s.setX(d+p,l);s.needsUpdate=!0,s.addUpdateRange(d,a.indexCount)}const c=this._bounds[e];t.boundingBox!==null?(c.box.copy(t.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,t.boundingSphere!==null?(c.sphere.copy(t.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const h=this._drawRanges[e],f=t.getAttribute("position");return h.count=r?o.count:f.count,this._visibilityChanged=!0,e}deleteInstance(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],r=n.box,s=this.geometry;if(n.boxInitialized===!1){r.makeEmpty();const o=s.index,a=s.attributes.position,l=this._drawRanges[e];for(let u=l.start,c=l.start+l.count;u<c;u++){let h=u;o&&(h=o.getX(h)),r.expandByPoint(Zv.fromBufferAttribute(a,h))}n.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],r=n.sphere,s=this.geometry;if(n.sphereInitialized===!1){r.makeEmpty(),this.getBoundingBoxAt(e,bS),bS.getCenter(r.center);const o=s.index,a=s.attributes.position,l=this._drawRanges[e];let u=0;for(let c=l.start,h=l.start+l.count;c<h;c++){let f=c;o&&(f=o.getX(f)),Zv.fromBufferAttribute(a,f),u=Math.max(u,r.center.distanceToSquared(Zv))}r.radius=Math.sqrt(u),n.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){const n=this._drawInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const n=this._drawInfo,r=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const n=this._colorsTexture,r=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(r,e*4),n.needsUpdate=!0,this)}getColorAt(e,t){const n=this._colorsTexture.image.data,r=this._drawInfo;return e>=r.length||r[e].active===!1?null:t.fromArray(n,e*4)}setVisibleAt(e,t){const n=this._drawInfo;return e>=n.length||n[e].active===!1||n[e].visible===t?this:(n[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}setGeometryIdAt(e,t){const n=this._drawInfo;return e>=n.length||n[e].active===!1||t<0||t>=this._geometryCount?null:(n[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;const n=this._drawRanges[e];return t.start=n.start,t.count=n.count,t}raycast(e,t){const n=this._drawInfo,r=this._drawRanges,s=this.matrixWorld,o=this.geometry;Eo.material=this.material,Eo.geometry.index=o.index,Eo.geometry.attributes=o.attributes,Eo.geometry.boundingBox===null&&(Eo.geometry.boundingBox=new Zr),Eo.geometry.boundingSphere===null&&(Eo.geometry.boundingSphere=new ds);for(let a=0,l=n.length;a<l;a++){if(!n[a].visible||!n[a].active)continue;const u=n[a].geometryIndex,c=r[u];Eo.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(a,Eo.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Eo.geometry.boundingBox),this.getBoundingSphereAt(u,Eo.geometry.boundingSphere),Eo.raycast(e,wS);for(let h=0,f=wS.length;h<f;h++){const d=wS[h];d.object=this,d.batchId=a,t.push(d)}wS.length=0}Eo.material=null,Eo.geometry.index=null,Eo.geometry.attributes={},Eo.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._drawInfo,u=this._multiDrawStarts,c=this._multiDrawCounts,h=this._drawRanges,f=this.perObjectFrustumCulled,d=this._indirectTexture,p=d.image.data;f&&(M7.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),$R.setFromProjectionMatrix(M7,e.coordinateSystem));let v=0;if(this.sortObjects){jR.copy(this.matrixWorld).invert(),Zv.setFromMatrixPosition(n.matrixWorld).applyMatrix4(jR),T7.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(jR);for(let M=0,E=l.length;M<E;M++)if(l[M].visible&&l[M].active){const R=l[M].geometryIndex;this.getMatrixAt(M,Pd),this.getBoundingSphereAt(R,RA).applyMatrix4(Pd);let L=!1;if(f&&(L=!$R.intersectsSphere(RA)),!L){const I=Qde.subVectors(RA.center,Zv).dot(T7);WR.push(h[R],I,M)}}const b=WR.list,_=this.customSort;_===null?b.sort(s.transparent?$de:jde):_.call(this,b,n);for(let M=0,E=b.length;M<E;M++){const R=b[M];u[v]=R.start*a,c[v]=R.count,p[v]=R.index,v++}WR.reset()}else for(let b=0,_=l.length;b<_;b++)if(l[b].visible&&l[b].active){const M=l[b].geometryIndex;let E=!1;if(f&&(this.getMatrixAt(b,Pd),this.getBoundingSphereAt(M,RA).applyMatrix4(Pd),E=!$R.intersectsSphere(RA)),!E){const R=h[M];u[v]=R.start*a,c[v]=R.count,p[v]=b,v++}}d.needsUpdate=!0,this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,o){this.onBeforeRender(e,null,r,s,o)}}let ys=class extends ps{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new vt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}};const QT=new ne,KT=new ne,E7=new kt,e2=new $p,SS=new ds,XR=new ne,C7=new ne;class Vl extends Qn{constructor(e=new fn,t=new ys){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)QT.fromBufferAttribute(t,r-1),KT.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=QT.distanceTo(KT);e.setAttribute("lineDistance",new Ht(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),SS.copy(n.boundingSphere),SS.applyMatrix4(r),SS.radius+=s,e.ray.intersectsSphere(SS)===!1)return;E7.copy(r).invert(),e2.copy(e.ray).applyMatrix4(E7);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,c=n.index,f=n.attributes.position;if(c!==null){const d=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);for(let v=d,b=p-1;v<b;v+=u){const _=c.getX(v),M=c.getX(v+1),E=MS(this,e,e2,l,_,M);E&&t.push(E)}if(this.isLineLoop){const v=c.getX(p-1),b=c.getX(d),_=MS(this,e,e2,l,v,b);_&&t.push(_)}}else{const d=Math.max(0,o.start),p=Math.min(f.count,o.start+o.count);for(let v=d,b=p-1;v<b;v+=u){const _=MS(this,e,e2,l,v,v+1);_&&t.push(_)}if(this.isLineLoop){const v=MS(this,e,e2,l,p-1,d);v&&t.push(v)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function MS(i,e,t,n,r,s){const o=i.geometry.attributes.position;if(QT.fromBufferAttribute(o,r),KT.fromBufferAttribute(o,s),t.distanceSqToSegment(QT,KT,XR,C7)>n)return;XR.applyMatrix4(i.matrixWorld);const l=e.ray.origin.distanceTo(XR);if(!(l<e.near||l>e.far))return{distance:l,point:C7.clone().applyMatrix4(i.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:i}}const R7=new ne,P7=new ne;class Ql extends Vl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)R7.fromBufferAttribute(t,r),P7.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+R7.distanceTo(P7);e.setAttribute("lineDistance",new Ht(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class SL extends Vl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}let l4=class extends ps{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}};const B7=new kt,MB=new $p,TS=new ds,ES=new ne;class ML extends Qn{constructor(e=new fn,t=new l4){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),TS.copy(n.boundingSphere),TS.applyMatrix4(r),TS.radius+=s,e.ray.intersectsSphere(TS)===!1)return;B7.copy(r).invert(),MB.copy(e.ray).applyMatrix4(B7);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=n.index,h=n.attributes.position;if(u!==null){const f=Math.max(0,o.start),d=Math.min(u.count,o.start+o.count);for(let p=f,v=d;p<v;p++){const b=u.getX(p);ES.fromBufferAttribute(h,b),I7(ES,b,l,r,e,t,this)}}else{const f=Math.max(0,o.start),d=Math.min(h.count,o.start+o.count);for(let p=f,v=d;p<v;p++)ES.fromBufferAttribute(h,p),I7(ES,p,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function I7(i,e,t,n,r,s,o){const a=MB.distanceSqToPoint(i);if(a<t){const l=new ne;MB.closestPointToPoint(i,l),l.applyMatrix4(n);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class EY extends or{constructor(e,t,n,r,s,o,a,l,u){super(e,t,n,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:pr,this.magFilter=s!==void 0?s:pr,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}let Jde=class extends or{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Es,this.minFilter=Es,this.generateMipmaps=!1,this.needsUpdate=!0}};class u4 extends or{constructor(e,t,n,r,s,o,a,l,u,c,h,f){super(null,o,a,l,u,c,r,s,h,f),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Zde extends u4{constructor(e,t,n,r,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ga,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class epe extends u4{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Df),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class tpe extends or{constructor(e,t,n,r,s,o,a,l,u){super(e,t,n,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Kl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=n[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,n[r]===o)return r/(s-1);const c=n[r],f=n[r+1]-c,d=(o-c)/f;return(r+d)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new je:new ne);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new ne,r=[],s=[],o=[],a=new ne,l=new kt;for(let d=0;d<=e;d++){const p=d/e;r[d]=this.getTangentAt(p,new ne)}s[0]=new ne,o[0]=new ne;let u=Number.MAX_VALUE;const c=Math.abs(r[0].x),h=Math.abs(r[0].y),f=Math.abs(r[0].z);c<=u&&(u=c,n.set(1,0,0)),h<=u&&(u=h,n.set(0,1,0)),f<=u&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Ur(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(a,p))}o[d].crossVectors(r[d],s[d])}if(t===!0){let d=Math.acos(Ur(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],d*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class c4 extends Kl{constructor(e=0,t=0,n=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new je){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,d=u-this.aY;l=f*c-d*h+this.aX,u=f*h+d*c+this.aY}return n.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class CY extends c4{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function TL(){let i=0,e=0,t=0,n=0;function r(s,o,a,l){i=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,h){let f=(o-s)/u-(a-s)/(u+c)+(a-o)/c,d=(a-o)/c-(l-o)/(c+h)+(l-a)/h;f*=c,d*=c,r(o,a,f,d)},calc:function(s){const o=s*s,a=o*s;return i+e*s+t*o+n*a}}}const CS=new ne,YR=new TL,QR=new TL,KR=new TL;class RY extends Kl{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new ne){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=r[(a-1)%s]:(CS.subVectors(r[0],r[1]).add(r[0]),u=CS);const h=r[a%s],f=r[(a+1)%s];if(this.closed||a+2<s?c=r[(a+2)%s]:(CS.subVectors(r[s-1],r[s-2]).add(r[s-1]),c=CS),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let p=Math.pow(u.distanceToSquared(h),d),v=Math.pow(h.distanceToSquared(f),d),b=Math.pow(f.distanceToSquared(c),d);v<1e-4&&(v=1),p<1e-4&&(p=v),b<1e-4&&(b=v),YR.initNonuniformCatmullRom(u.x,h.x,f.x,c.x,p,v,b),QR.initNonuniformCatmullRom(u.y,h.y,f.y,c.y,p,v,b),KR.initNonuniformCatmullRom(u.z,h.z,f.z,c.z,p,v,b)}else this.curveType==="catmullrom"&&(YR.initCatmullRom(u.x,h.x,f.x,c.x,this.tension),QR.initCatmullRom(u.y,h.y,f.y,c.y,this.tension),KR.initCatmullRom(u.z,h.z,f.z,c.z,this.tension));return n.set(YR.calc(l),QR.calc(l),KR.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new ne().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function N7(i,e,t,n,r){const s=(n-e)*.5,o=(r-t)*.5,a=i*i,l=i*a;return(2*t-2*n+s+o)*l+(-3*t+3*n-2*s-o)*a+s*i+t}function npe(i,e){const t=1-i;return t*t*e}function ipe(i,e){return 2*(1-i)*i*e}function rpe(i,e){return i*i*e}function m_(i,e,t,n){return npe(i,e)+ipe(i,t)+rpe(i,n)}function spe(i,e){const t=1-i;return t*t*t*e}function ope(i,e){const t=1-i;return 3*t*t*i*e}function ape(i,e){return 3*(1-i)*i*i*e}function lpe(i,e){return i*i*i*e}function g_(i,e,t,n,r){return spe(i,e)+ope(i,t)+ape(i,n)+lpe(i,r)}class EL extends Kl{constructor(e=new je,t=new je,n=new je,r=new je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new je){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(g_(e,r.x,s.x,o.x,a.x),g_(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class CL extends Kl{constructor(e=new ne,t=new ne,n=new ne,r=new ne){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ne){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(g_(e,r.x,s.x,o.x,a.x),g_(e,r.y,s.y,o.y,a.y),g_(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class RL extends Kl{constructor(e=new je,t=new je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new je){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new je){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PY extends Kl{constructor(e=new ne,t=new ne){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ne){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ne){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PL extends Kl{constructor(e=new je,t=new je,n=new je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new je){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(m_(e,r.x,s.x,o.x),m_(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class h4 extends Kl{constructor(e=new ne,t=new ne,n=new ne){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ne){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(m_(e,r.x,s.x,o.x),m_(e,r.y,s.y,o.y),m_(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BL extends Kl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new je){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return n.set(N7(a,l.x,u.x,c.x,h.x),N7(a,l.y,u.y,c.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new je().fromArray(r))}return this}}var JT=Object.freeze({__proto__:null,ArcCurve:CY,CatmullRomCurve3:RY,CubicBezierCurve:EL,CubicBezierCurve3:CL,EllipseCurve:c4,LineCurve:RL,LineCurve3:PY,QuadraticBezierCurve:PL,QuadraticBezierCurve3:h4,SplineCurve:BL});class BY extends Kl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new JT[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];n&&n.equals(c)||(t.push(c),n=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new JT[r.type]().fromJSON(r))}return this}}let ox=class extends BY{constructor(e){super(),this.type="Path",this.currentPoint=new je,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new RL(this.currentPoint.clone(),new je(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new PL(this.currentPoint.clone(),new je(e,t),new je(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const a=new EL(this.currentPoint.clone(),new je(e,t),new je(n,r),new je(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new BL(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,n,r,s,o,a,l),this}absellipse(e,t,n,r,s,o,a,l){const u=new c4(e,t,n,r,s,o,a,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class rb extends fn{constructor(e=[new je(0,-.5),new je(.5,0),new je(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Ur(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,h=new ne,f=new je,d=new ne,p=new ne,v=new ne;let b=0,_=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:b=e[M+1].x-e[M].x,_=e[M+1].y-e[M].y,d.x=_*1,d.y=-b,d.z=_*0,v.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:b=e[M+1].x-e[M].x,_=e[M+1].y-e[M].y,d.x=_*1,d.y=-b,d.z=_*0,p.copy(d),d.x+=v.x,d.y+=v.y,d.z+=v.z,d.normalize(),l.push(d.x,d.y,d.z),v.copy(p)}for(let M=0;M<=t;M++){const E=n+M*c*r,R=Math.sin(E),L=Math.cos(E);for(let I=0;I<=e.length-1;I++){h.x=e[I].x*R,h.y=e[I].y,h.z=e[I].x*L,o.push(h.x,h.y,h.z),f.x=M/t,f.y=I/(e.length-1),a.push(f.x,f.y);const D=l[3*I+0]*R,k=l[3*I+1],G=l[3*I+0]*L;u.push(D,k,G)}}for(let M=0;M<t;M++)for(let E=0;E<e.length-1;E++){const R=E+M*e.length,L=R,I=R+e.length,D=R+e.length+1,k=R+1;s.push(L,I,k),s.push(D,k,I)}this.setIndex(s),this.setAttribute("position",new Ht(o,3)),this.setAttribute("uv",new Ht(a,2)),this.setAttribute("normal",new Ht(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rb(e.points,e.segments,e.phiStart,e.phiLength)}}class f4 extends rb{constructor(e=1,t=1,n=4,r=8){const s=new ox;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new f4(e.radius,e.length,e.capSegments,e.radialSegments)}}class cm extends fn{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new ne,c=new je;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,f=3;h<=t;h++,f+=3){const d=n+h/t*r;u.x=e*Math.cos(d),u.y=e*Math.sin(d),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[f]/e+1)/2,c.y=(o[f+1]/e+1)/2,l.push(c.x,c.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new Ht(o,3)),this.setAttribute("normal",new Ht(a,3)),this.setAttribute("uv",new Ht(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cm(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class hm extends fn{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const c=[],h=[],f=[],d=[];let p=0;const v=[],b=n/2;let _=0;M(),o===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(c),this.setAttribute("position",new Ht(h,3)),this.setAttribute("normal",new Ht(f,3)),this.setAttribute("uv",new Ht(d,2));function M(){const R=new ne,L=new ne;let I=0;const D=(t-e)/n;for(let k=0;k<=s;k++){const G=[],O=k/s,U=O*(t-e)+e;for(let Q=0;Q<=r;Q++){const X=Q/r,ee=X*l+a,K=Math.sin(ee),Z=Math.cos(ee);L.x=U*K,L.y=-O*n+b,L.z=U*Z,h.push(L.x,L.y,L.z),R.set(K,D,Z).normalize(),f.push(R.x,R.y,R.z),d.push(X,1-O),G.push(p++)}v.push(G)}for(let k=0;k<r;k++)for(let G=0;G<s;G++){const O=v[G][k],U=v[G+1][k],Q=v[G+1][k+1],X=v[G][k+1];e>0&&(c.push(O,U,X),I+=3),t>0&&(c.push(U,Q,X),I+=3)}u.addGroup(_,I,0),_+=I}function E(R){const L=p,I=new je,D=new ne;let k=0;const G=R===!0?e:t,O=R===!0?1:-1;for(let Q=1;Q<=r;Q++)h.push(0,b*O,0),f.push(0,O,0),d.push(.5,.5),p++;const U=p;for(let Q=0;Q<=r;Q++){const ee=Q/r*l+a,K=Math.cos(ee),Z=Math.sin(ee);D.x=G*Z,D.y=b*O,D.z=G*K,h.push(D.x,D.y,D.z),f.push(0,O,0),I.x=K*.5+.5,I.y=Z*.5*O+.5,d.push(I.x,I.y),p++}for(let Q=0;Q<r;Q++){const X=L+Q,ee=U+Q;R===!0?c.push(ee,ee+1,X):c.push(ee+1,ee,X),k+=3}u.addGroup(_,k,R===!0?1:2),_+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class d4 extends hm{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new d4(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Wp extends fn{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],o=[];a(r),u(n),c(),this.setAttribute("position",new Ht(s,3)),this.setAttribute("normal",new Ht(s.slice(),3)),this.setAttribute("uv",new Ht(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(M){const E=new ne,R=new ne,L=new ne;for(let I=0;I<t.length;I+=3)d(t[I+0],E),d(t[I+1],R),d(t[I+2],L),l(E,R,L,M)}function l(M,E,R,L){const I=L+1,D=[];for(let k=0;k<=I;k++){D[k]=[];const G=M.clone().lerp(R,k/I),O=E.clone().lerp(R,k/I),U=I-k;for(let Q=0;Q<=U;Q++)Q===0&&k===I?D[k][Q]=G:D[k][Q]=G.clone().lerp(O,Q/U)}for(let k=0;k<I;k++)for(let G=0;G<2*(I-k)-1;G++){const O=Math.floor(G/2);G%2===0?(f(D[k][O+1]),f(D[k+1][O]),f(D[k][O])):(f(D[k][O+1]),f(D[k+1][O+1]),f(D[k+1][O]))}}function u(M){const E=new ne;for(let R=0;R<s.length;R+=3)E.x=s[R+0],E.y=s[R+1],E.z=s[R+2],E.normalize().multiplyScalar(M),s[R+0]=E.x,s[R+1]=E.y,s[R+2]=E.z}function c(){const M=new ne;for(let E=0;E<s.length;E+=3){M.x=s[E+0],M.y=s[E+1],M.z=s[E+2];const R=b(M)/2/Math.PI+.5,L=_(M)/Math.PI+.5;o.push(R,1-L)}p(),h()}function h(){for(let M=0;M<o.length;M+=6){const E=o[M+0],R=o[M+2],L=o[M+4],I=Math.max(E,R,L),D=Math.min(E,R,L);I>.9&&D<.1&&(E<.2&&(o[M+0]+=1),R<.2&&(o[M+2]+=1),L<.2&&(o[M+4]+=1))}}function f(M){s.push(M.x,M.y,M.z)}function d(M,E){const R=M*3;E.x=e[R+0],E.y=e[R+1],E.z=e[R+2]}function p(){const M=new ne,E=new ne,R=new ne,L=new ne,I=new je,D=new je,k=new je;for(let G=0,O=0;G<s.length;G+=9,O+=6){M.set(s[G+0],s[G+1],s[G+2]),E.set(s[G+3],s[G+4],s[G+5]),R.set(s[G+6],s[G+7],s[G+8]),I.set(o[O+0],o[O+1]),D.set(o[O+2],o[O+3]),k.set(o[O+4],o[O+5]),L.copy(M).add(E).add(R).divideScalar(3);const U=b(L);v(I,O+0,M,U),v(D,O+2,E,U),v(k,O+4,R,U)}}function v(M,E,R,L){L<0&&M.x===1&&(o[E]=M.x-1),R.x===0&&R.z===0&&(o[E]=L/2/Math.PI+.5)}function b(M){return Math.atan2(M.z,-M.x)}function _(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wp(e.vertices,e.indices,e.radius,e.details)}}class p4 extends Wp{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new p4(e.radius,e.detail)}}const RS=new ne,PS=new ne,JR=new ne,BS=new ep;class IY extends fn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(x0*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],h=new Array(3),f={},d=[];for(let p=0;p<l;p+=3){o?(u[0]=o.getX(p),u[1]=o.getX(p+1),u[2]=o.getX(p+2)):(u[0]=p,u[1]=p+1,u[2]=p+2);const{a:v,b,c:_}=BS;if(v.fromBufferAttribute(a,u[0]),b.fromBufferAttribute(a,u[1]),_.fromBufferAttribute(a,u[2]),BS.getNormal(JR),h[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,h[1]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,h[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let M=0;M<3;M++){const E=(M+1)%3,R=h[M],L=h[E],I=BS[c[M]],D=BS[c[E]],k=`${R}_${L}`,G=`${L}_${R}`;G in f&&f[G]?(JR.dot(f[G].normal)<=s&&(d.push(I.x,I.y,I.z),d.push(D.x,D.y,D.z)),f[G]=null):k in f||(f[k]={index0:u[M],index1:u[E],normal:JR.clone()})}}for(const p in f)if(f[p]){const{index0:v,index1:b}=f[p];RS.fromBufferAttribute(a,v),PS.fromBufferAttribute(a,b),d.push(RS.x,RS.y,RS.z),d.push(PS.x,PS.y,PS.z)}this.setAttribute("position",new Ht(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class w0 extends ox{constructor(e){super(e),this.uuid=Ul(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new ox().fromJSON(r))}return this}}const upe={triangulate:function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=NY(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,h,f,d;if(n&&(s=ppe(i,e,s,t)),i.length>80*t){a=u=i[0],l=c=i[1];for(let p=t;p<r;p+=t)h=i[p],f=i[p+1],h<a&&(a=h),f<l&&(l=f),h>u&&(u=h),f>c&&(c=f);d=Math.max(u-a,c-l),d=d!==0?32767/d:0}return ax(s,o,t,a,l,d,0),o}};function NY(i,e,t,n,r){let s,o;if(r===Mpe(i,e,t,n)>0)for(s=e;s<t;s+=n)o=D7(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=D7(s,i[s],i[s+1],o);return o&&A4(o,o.next)&&(ux(o),o=o.next),o}function q0(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(A4(t,t.next)||Sr(t.prev,t,t.next)===0)){if(ux(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function ax(i,e,t,n,r,s,o){if(!i)return;!o&&s&&vpe(i,n,r,s);let a=i,l,u;for(;i.prev!==i.next;){if(l=i.prev,u=i.next,s?hpe(i,n,r,s):cpe(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(u.i/t|0),ux(i),i=u.next,a=u.next;continue}if(i=u,i===a){o?o===1?(i=fpe(q0(i),e,t),ax(i,e,t,n,r,s,2)):o===2&&dpe(i,e,t,n,r,s):ax(q0(i),e,t,n,r,s,1);break}}}function cpe(i){const e=i.prev,t=i,n=i.next;if(Sr(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,a=e.y,l=t.y,u=n.y,c=r<s?r<o?r:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,f=r>s?r>o?r:o:s>o?s:o,d=a>l?a>u?a:u:l>u?l:u;let p=n.next;for(;p!==e;){if(p.x>=c&&p.x<=f&&p.y>=h&&p.y<=d&&l1(r,a,s,l,o,u,p.x,p.y)&&Sr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function hpe(i,e,t,n){const r=i.prev,s=i,o=i.next;if(Sr(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,c=r.y,h=s.y,f=o.y,d=a<l?a<u?a:u:l<u?l:u,p=c<h?c<f?c:f:h<f?h:f,v=a>l?a>u?a:u:l>u?l:u,b=c>h?c>f?c:f:h>f?h:f,_=TB(d,p,e,t,n),M=TB(v,b,e,t,n);let E=i.prevZ,R=i.nextZ;for(;E&&E.z>=_&&R&&R.z<=M;){if(E.x>=d&&E.x<=v&&E.y>=p&&E.y<=b&&E!==r&&E!==o&&l1(a,c,l,h,u,f,E.x,E.y)&&Sr(E.prev,E,E.next)>=0||(E=E.prevZ,R.x>=d&&R.x<=v&&R.y>=p&&R.y<=b&&R!==r&&R!==o&&l1(a,c,l,h,u,f,R.x,R.y)&&Sr(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;E&&E.z>=_;){if(E.x>=d&&E.x<=v&&E.y>=p&&E.y<=b&&E!==r&&E!==o&&l1(a,c,l,h,u,f,E.x,E.y)&&Sr(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;R&&R.z<=M;){if(R.x>=d&&R.x<=v&&R.y>=p&&R.y<=b&&R!==r&&R!==o&&l1(a,c,l,h,u,f,R.x,R.y)&&Sr(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function fpe(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!A4(r,s)&&DY(r,n,n.next,s)&&lx(r,s)&&lx(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),ux(n),ux(n.next),n=i=s),n=n.next}while(n!==i);return q0(n)}function dpe(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&bpe(o,a)){let l=LY(o,a);o=q0(o,o.next),l=q0(l,l.next),ax(o,e,t,n,r,s,0),ax(l,e,t,n,r,s,0);return}a=a.next}o=o.next}while(o!==i)}function ppe(i,e,t,n){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,u=NY(i,a,l,n,!1),u===u.next&&(u.steiner=!0),r.push(xpe(u));for(r.sort(Ape),s=0;s<r.length;s++)t=mpe(r[s],t);return t}function Ape(i,e){return i.x-e.x}function mpe(i,e){const t=gpe(i,e);if(!t)return e;const n=LY(t,i);return q0(n,n.next),q0(t,t.next)}function gpe(i,e){let t=e,n=-1/0,r;const s=i.x,o=i.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const f=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=s&&f>n&&(n=f,r=t.x<t.next.x?t:t.next,f===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let c=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&l1(o<u?s:n,o,l,u,o<u?n:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),lx(t,i)&&(h<c||h===c&&(t.x>r.x||t.x===r.x&&ype(r,t)))&&(r=t,c=h)),t=t.next;while(t!==a);return r}function ype(i,e){return Sr(i.prev,i,e.prev)<0&&Sr(e.next,i,i.next)<0}function vpe(i,e,t,n){let r=i;do r.z===0&&(r.z=TB(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,_pe(r)}function _pe(i){let e,t,n,r,s,o,a,l,u=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<u&&(a++,n=n.nextZ,!!n);e++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,u*=2}while(o>1);return i}function TB(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function xpe(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function l1(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function bpe(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!wpe(i,e)&&(lx(i,e)&&lx(e,i)&&Spe(i,e)&&(Sr(i.prev,i,e.prev)||Sr(i,e.prev,e))||A4(i,e)&&Sr(i.prev,i,i.next)>0&&Sr(e.prev,e,e.next)>0)}function Sr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function A4(i,e){return i.x===e.x&&i.y===e.y}function DY(i,e,t,n){const r=NS(Sr(i,e,t)),s=NS(Sr(i,e,n)),o=NS(Sr(t,n,i)),a=NS(Sr(t,n,e));return!!(r!==s&&o!==a||r===0&&IS(i,t,e)||s===0&&IS(i,n,e)||o===0&&IS(t,i,n)||a===0&&IS(t,e,n))}function IS(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function NS(i){return i>0?1:i<0?-1:0}function wpe(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&DY(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function lx(i,e){return Sr(i.prev,i,i.next)<0?Sr(i,e,i.next)>=0&&Sr(i,i.prev,e)>=0:Sr(i,e,i.prev)<0||Sr(i,i.next,e)<0}function Spe(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function LY(i,e){const t=new EB(i.i,i.x,i.y),n=new EB(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function D7(i,e,t,n){const r=new EB(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function ux(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function EB(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Mpe(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}class sh{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return sh.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];L7(e),O7(n,e);let o=e.length;t.forEach(L7);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,O7(n,t[l]);const a=upe.triangulate(n,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function L7(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function O7(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class sb extends fn{constructor(e=new w0([new je(.5,.5),new je(-.5,.5),new je(-.5,-.5),new je(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ht(r,3)),this.setAttribute("uv",new Ht(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:d-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,M=t.UVGenerator!==void 0?t.UVGenerator:Tpe;let E,R=!1,L,I,D,k;_&&(E=_.getSpacedPoints(c),R=!0,f=!1,L=_.computeFrenetFrames(c,!1),I=new ne,D=new ne,k=new ne),f||(b=0,d=0,p=0,v=0);const G=a.extractPoints(u);let O=G.shape;const U=G.holes;if(!sh.isClockWise(O)){O=O.reverse();for(let Qe=0,ce=U.length;Qe<ce;Qe++){const dt=U[Qe];sh.isClockWise(dt)&&(U[Qe]=dt.reverse())}}const X=sh.triangulateShape(O,U),ee=O;for(let Qe=0,ce=U.length;Qe<ce;Qe++){const dt=U[Qe];O=O.concat(dt)}function K(Qe,ce,dt){return ce||console.error("THREE.ExtrudeGeometry: vec does not exist"),Qe.clone().addScaledVector(ce,dt)}const Z=O.length,he=X.length;function j(Qe,ce,dt){let pt,ut,ft;const Wt=Qe.x-ce.x,Rt=Qe.y-ce.y,fe=dt.x-Qe.x,te=dt.y-Qe.y,De=Wt*Wt+Rt*Rt,Te=Wt*te-Rt*fe;if(Math.abs(Te)>Number.EPSILON){const Fe=Math.sqrt(De),We=Math.sqrt(fe*fe+te*te),Bt=ce.x-Rt/Fe,ct=ce.y+Wt/Fe,Ft=dt.x-te/We,vn=dt.y+fe/We,At=((Ft-Bt)*te-(vn-ct)*fe)/(Wt*te-Rt*fe);pt=Bt+Wt*At-Qe.x,ut=ct+Rt*At-Qe.y;const zt=pt*pt+ut*ut;if(zt<=2)return new je(pt,ut);ft=Math.sqrt(zt/2)}else{let Fe=!1;Wt>Number.EPSILON?fe>Number.EPSILON&&(Fe=!0):Wt<-Number.EPSILON?fe<-Number.EPSILON&&(Fe=!0):Math.sign(Rt)===Math.sign(te)&&(Fe=!0),Fe?(pt=-Rt,ut=Wt,ft=Math.sqrt(De)):(pt=Wt,ut=Rt,ft=Math.sqrt(De/2))}return new je(pt/ft,ut/ft)}const ie=[];for(let Qe=0,ce=ee.length,dt=ce-1,pt=Qe+1;Qe<ce;Qe++,dt++,pt++)dt===ce&&(dt=0),pt===ce&&(pt=0),ie[Qe]=j(ee[Qe],ee[dt],ee[pt]);const ae=[];let pe,Pe=ie.concat();for(let Qe=0,ce=U.length;Qe<ce;Qe++){const dt=U[Qe];pe=[];for(let pt=0,ut=dt.length,ft=ut-1,Wt=pt+1;pt<ut;pt++,ft++,Wt++)ft===ut&&(ft=0),Wt===ut&&(Wt=0),pe[pt]=j(dt[pt],dt[ft],dt[Wt]);ae.push(pe),Pe=Pe.concat(pe)}for(let Qe=0;Qe<b;Qe++){const ce=Qe/b,dt=d*Math.cos(ce*Math.PI/2),pt=p*Math.sin(ce*Math.PI/2)+v;for(let ut=0,ft=ee.length;ut<ft;ut++){const Wt=K(ee[ut],ie[ut],pt);it(Wt.x,Wt.y,-dt)}for(let ut=0,ft=U.length;ut<ft;ut++){const Wt=U[ut];pe=ae[ut];for(let Rt=0,fe=Wt.length;Rt<fe;Rt++){const te=K(Wt[Rt],pe[Rt],pt);it(te.x,te.y,-dt)}}}const He=p+v;for(let Qe=0;Qe<Z;Qe++){const ce=f?K(O[Qe],Pe[Qe],He):O[Qe];R?(D.copy(L.normals[0]).multiplyScalar(ce.x),I.copy(L.binormals[0]).multiplyScalar(ce.y),k.copy(E[0]).add(D).add(I),it(k.x,k.y,k.z)):it(ce.x,ce.y,0)}for(let Qe=1;Qe<=c;Qe++)for(let ce=0;ce<Z;ce++){const dt=f?K(O[ce],Pe[ce],He):O[ce];R?(D.copy(L.normals[Qe]).multiplyScalar(dt.x),I.copy(L.binormals[Qe]).multiplyScalar(dt.y),k.copy(E[Qe]).add(D).add(I),it(k.x,k.y,k.z)):it(dt.x,dt.y,h/c*Qe)}for(let Qe=b-1;Qe>=0;Qe--){const ce=Qe/b,dt=d*Math.cos(ce*Math.PI/2),pt=p*Math.sin(ce*Math.PI/2)+v;for(let ut=0,ft=ee.length;ut<ft;ut++){const Wt=K(ee[ut],ie[ut],pt);it(Wt.x,Wt.y,h+dt)}for(let ut=0,ft=U.length;ut<ft;ut++){const Wt=U[ut];pe=ae[ut];for(let Rt=0,fe=Wt.length;Rt<fe;Rt++){const te=K(Wt[Rt],pe[Rt],pt);R?it(te.x,te.y+E[c-1].y,E[c-1].x+dt):it(te.x,te.y,h+dt)}}}Se(),Oe();function Se(){const Qe=r.length/3;if(f){let ce=0,dt=Z*ce;for(let pt=0;pt<he;pt++){const ut=X[pt];Ct(ut[2]+dt,ut[1]+dt,ut[0]+dt)}ce=c+b*2,dt=Z*ce;for(let pt=0;pt<he;pt++){const ut=X[pt];Ct(ut[0]+dt,ut[1]+dt,ut[2]+dt)}}else{for(let ce=0;ce<he;ce++){const dt=X[ce];Ct(dt[2],dt[1],dt[0])}for(let ce=0;ce<he;ce++){const dt=X[ce];Ct(dt[0]+Z*c,dt[1]+Z*c,dt[2]+Z*c)}}n.addGroup(Qe,r.length/3-Qe,0)}function Oe(){const Qe=r.length/3;let ce=0;Ye(ee,ce),ce+=ee.length;for(let dt=0,pt=U.length;dt<pt;dt++){const ut=U[dt];Ye(ut,ce),ce+=ut.length}n.addGroup(Qe,r.length/3-Qe,1)}function Ye(Qe,ce){let dt=Qe.length;for(;--dt>=0;){const pt=dt;let ut=dt-1;ut<0&&(ut=Qe.length-1);for(let ft=0,Wt=c+b*2;ft<Wt;ft++){const Rt=Z*ft,fe=Z*(ft+1),te=ce+pt+Rt,De=ce+ut+Rt,Te=ce+ut+fe,Fe=ce+pt+fe;qt(te,De,Te,Fe)}}}function it(Qe,ce,dt){l.push(Qe),l.push(ce),l.push(dt)}function Ct(Qe,ce,dt){xt(Qe),xt(ce),xt(dt);const pt=r.length/3,ut=M.generateTopUV(n,r,pt-3,pt-2,pt-1);yt(ut[0]),yt(ut[1]),yt(ut[2])}function qt(Qe,ce,dt,pt){xt(Qe),xt(ce),xt(pt),xt(ce),xt(dt),xt(pt);const ut=r.length/3,ft=M.generateSideWallUV(n,r,ut-6,ut-3,ut-2,ut-1);yt(ft[0]),yt(ft[1]),yt(ft[3]),yt(ft[1]),yt(ft[2]),yt(ft[3])}function xt(Qe){r.push(l[Qe*3+0]),r.push(l[Qe*3+1]),r.push(l[Qe*3+2])}function yt(Qe){s.push(Qe.x),s.push(Qe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return Epe(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];n.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new JT[r.type]().fromJSON(r)),new sb(n,e.options)}}const Tpe={generateTopUV:function(i,e,t,n,r){const s=e[t*3],o=e[t*3+1],a=e[n*3],l=e[n*3+1],u=e[r*3],c=e[r*3+1];return[new je(s,o),new je(a,l),new je(u,c)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[n*3],c=e[n*3+1],h=e[n*3+2],f=e[r*3],d=e[r*3+1],p=e[r*3+2],v=e[s*3],b=e[s*3+1],_=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new je(o,1-l),new je(u,1-h),new je(f,1-p),new je(v,1-_)]:[new je(a,1-l),new je(c,1-h),new je(d,1-p),new je(b,1-_)]}};function Epe(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class m4 extends Wp{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new m4(e.radius,e.detail)}}class ob extends Wp{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ob(e.radius,e.detail)}}class g4 extends fn{constructor(e=.5,t=1,n=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const a=[],l=[],u=[],c=[];let h=e;const f=(t-e)/r,d=new ne,p=new je;for(let v=0;v<=r;v++){for(let b=0;b<=n;b++){const _=s+b/n*o;d.x=h*Math.cos(_),d.y=h*Math.sin(_),l.push(d.x,d.y,d.z),u.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,c.push(p.x,p.y)}h+=f}for(let v=0;v<r;v++){const b=v*(n+1);for(let _=0;_<n;_++){const M=_+b,E=M,R=M+n+1,L=M+n+2,I=M+1;a.push(E,R,I),a.push(R,L,I)}}this.setIndex(a),this.setAttribute("position",new Ht(l,3)),this.setAttribute("normal",new Ht(u,3)),this.setAttribute("uv",new Ht(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new g4(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class y4 extends fn{constructor(e=new w0([new je(0,.5),new je(-.5,-.5),new je(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(n),this.setAttribute("position",new Ht(r,3)),this.setAttribute("normal",new Ht(s,3)),this.setAttribute("uv",new Ht(o,2));function u(c){const h=r.length/3,f=c.extractPoints(t);let d=f.shape;const p=f.holes;sh.isClockWise(d)===!1&&(d=d.reverse());for(let b=0,_=p.length;b<_;b++){const M=p[b];sh.isClockWise(M)===!0&&(p[b]=M.reverse())}const v=sh.triangulateShape(d,p);for(let b=0,_=p.length;b<_;b++){const M=p[b];d=d.concat(M)}for(let b=0,_=d.length;b<_;b++){const M=d[b];r.push(M.x,M.y,0),s.push(0,0,1),o.push(M.x,M.y)}for(let b=0,_=v.length;b<_;b++){const M=v[b],E=M[0]+h,R=M[1]+h,L=M[2]+h;n.push(E,R,L),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Cpe(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];n.push(o)}return new y4(n,e.curveSegments)}}function Cpe(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}let Xp=class OY extends fn{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let u=0;const c=[],h=new ne,f=new ne,d=[],p=[],v=[],b=[];for(let _=0;_<=n;_++){const M=[],E=_/n;let R=0;_===0&&o===0?R=.5/t:_===n&&l===Math.PI&&(R=-.5/t);for(let L=0;L<=t;L++){const I=L/t;h.x=-e*Math.cos(r+I*s)*Math.sin(o+E*a),h.y=e*Math.cos(o+E*a),h.z=e*Math.sin(r+I*s)*Math.sin(o+E*a),p.push(h.x,h.y,h.z),f.copy(h).normalize(),v.push(f.x,f.y,f.z),b.push(I+R,1-E),M.push(u++)}c.push(M)}for(let _=0;_<n;_++)for(let M=0;M<t;M++){const E=c[_][M+1],R=c[_][M],L=c[_+1][M],I=c[_+1][M+1];(_!==0||o>0)&&d.push(E,R,I),(_!==n-1||l<Math.PI)&&d.push(R,L,I)}this.setIndex(d),this.setAttribute("position",new Ht(p,3)),this.setAttribute("normal",new Ht(v,3)),this.setAttribute("uv",new Ht(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new OY(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};class v4 extends Wp{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new v4(e.radius,e.detail)}}class _4 extends fn{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],l=[],u=[],c=new ne,h=new ne,f=new ne;for(let d=0;d<=n;d++)for(let p=0;p<=r;p++){const v=p/r*s,b=d/n*Math.PI*2;h.x=(e+t*Math.cos(b))*Math.cos(v),h.y=(e+t*Math.cos(b))*Math.sin(v),h.z=t*Math.sin(b),a.push(h.x,h.y,h.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),f.subVectors(h,c).normalize(),l.push(f.x,f.y,f.z),u.push(p/r),u.push(d/n)}for(let d=1;d<=n;d++)for(let p=1;p<=r;p++){const v=(r+1)*d+p-1,b=(r+1)*(d-1)+p-1,_=(r+1)*(d-1)+p,M=(r+1)*d+p;o.push(v,b,M),o.push(b,_,M)}this.setIndex(o),this.setAttribute("position",new Ht(a,3)),this.setAttribute("normal",new Ht(l,3)),this.setAttribute("uv",new Ht(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _4(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class x4 extends fn{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],l=[],u=[],c=[],h=new ne,f=new ne,d=new ne,p=new ne,v=new ne,b=new ne,_=new ne;for(let E=0;E<=n;++E){const R=E/n*s*Math.PI*2;M(R,s,o,e,d),M(R+.01,s,o,e,p),b.subVectors(p,d),_.addVectors(p,d),v.crossVectors(b,_),_.crossVectors(v,b),v.normalize(),_.normalize();for(let L=0;L<=r;++L){const I=L/r*Math.PI*2,D=-t*Math.cos(I),k=t*Math.sin(I);h.x=d.x+(D*_.x+k*v.x),h.y=d.y+(D*_.y+k*v.y),h.z=d.z+(D*_.z+k*v.z),l.push(h.x,h.y,h.z),f.subVectors(h,d).normalize(),u.push(f.x,f.y,f.z),c.push(E/n),c.push(L/r)}}for(let E=1;E<=n;E++)for(let R=1;R<=r;R++){const L=(r+1)*(E-1)+(R-1),I=(r+1)*E+(R-1),D=(r+1)*E+R,k=(r+1)*(E-1)+R;a.push(L,I,k),a.push(I,D,k)}this.setIndex(a),this.setAttribute("position",new Ht(l,3)),this.setAttribute("normal",new Ht(u,3)),this.setAttribute("uv",new Ht(c,2));function M(E,R,L,I,D){const k=Math.cos(E),G=Math.sin(E),O=L/R*E,U=Math.cos(O);D.x=I*(2+U)*.5*k,D.y=I*(2+U)*G*.5,D.z=I*Math.sin(O)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new x4(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class ab extends fn{constructor(e=new h4(new ne(-1,-1,0),new ne(-1,1,0),new ne(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ne,l=new ne,u=new je;let c=new ne;const h=[],f=[],d=[],p=[];v(),this.setIndex(p),this.setAttribute("position",new Ht(h,3)),this.setAttribute("normal",new Ht(f,3)),this.setAttribute("uv",new Ht(d,2));function v(){for(let E=0;E<t;E++)b(E);b(s===!1?t:0),M(),_()}function b(E){c=e.getPointAt(E/t,c);const R=o.normals[E],L=o.binormals[E];for(let I=0;I<=r;I++){const D=I/r*Math.PI*2,k=Math.sin(D),G=-Math.cos(D);l.x=G*R.x+k*L.x,l.y=G*R.y+k*L.y,l.z=G*R.z+k*L.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=c.x+n*l.x,a.y=c.y+n*l.y,a.z=c.z+n*l.z,h.push(a.x,a.y,a.z)}}function _(){for(let E=1;E<=t;E++)for(let R=1;R<=r;R++){const L=(r+1)*(E-1)+(R-1),I=(r+1)*E+(R-1),D=(r+1)*E+R,k=(r+1)*(E-1)+R;p.push(L,I,k),p.push(I,D,k)}}function M(){for(let E=0;E<=t;E++)for(let R=0;R<=r;R++)u.x=E/t,u.y=R/r,d.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ab(new JT[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class IL extends fn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new ne,s=new ne;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const h=l[u],f=h.start,d=h.count;for(let p=f,v=f+d;p<v;p+=3)for(let b=0;b<3;b++){const _=a.getX(p+b),M=a.getX(p+(b+1)%3);r.fromBufferAttribute(o,_),s.fromBufferAttribute(o,M),F7(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,h=3*a+(u+1)%3;r.fromBufferAttribute(o,c),s.fromBufferAttribute(o,h),F7(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ht(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function F7(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var k7=Object.freeze({__proto__:null,BoxGeometry:qy,CapsuleGeometry:f4,CircleGeometry:cm,ConeGeometry:d4,CylinderGeometry:hm,DodecahedronGeometry:p4,EdgesGeometry:IY,ExtrudeGeometry:sb,IcosahedronGeometry:m4,LatheGeometry:rb,OctahedronGeometry:ob,PlaneGeometry:Vy,PolyhedronGeometry:Wp,RingGeometry:g4,ShapeGeometry:y4,SphereGeometry:Xp,TetrahedronGeometry:v4,TorusGeometry:_4,TorusKnotGeometry:x4,TubeGeometry:ab,WireframeGeometry:IL});let FY=class extends ps{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new vt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}};class kY extends po{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}let lb=class extends ps{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jp,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},ku=class extends lb{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ur(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new vt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new vt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new vt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},O1=class extends ps{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new vt(16777215),this.specular=new vt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jp,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.combine=Kx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},UY=class extends ps{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jp,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},zY=class extends ps{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jp,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}},bh=class extends ps{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jp,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.combine=Kx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},GY=class extends ps{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jp,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}},HY=class extends ys{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}};function f0(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function qY(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function VY(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function CB(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=i[a+l]}return r}function NL(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)}function Rpe(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),h=[],f=[];for(let d=0;d<u.times.length;++d){const p=u.times[d]*r;if(!(p<t||p>=n)){h.push(u.times[d]);for(let v=0;v<c;++v)f.push(u.values[d*c+v])}}h.length!==0&&(u.times=f0(h,u.times.constructor),u.values=f0(f,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Ppe(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=i.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(u===void 0)continue;let c=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let f=0;const d=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const p=a.times.length-1;let v;if(s<=a.times[0]){const _=c,M=h-c;v=a.values.slice(_,M)}else if(s>=a.times[p]){const _=p*h+c,M=_+h-c;v=a.values.slice(_,M)}else{const _=a.createInterpolant(),M=c,E=h-c;_.evaluate(s),v=_.resultBuffer.slice(M,E)}l==="quaternion"&&new xi().fromArray(v).normalize().conjugate().toArray(v);const b=u.times.length;for(let _=0;_<b;++_){const M=_*d+f;if(l==="quaternion")xi.multiplyQuaternionsFlat(u.values,M,v,0,u.values,M);else{const E=d-f*2;for(let R=0;R<E;++R)u.values[M+R]-=v[R]}}}return i.blendMode=fL,i}const Bpe={convertArray:f0,isTypedArray:qY,getKeyframeOrder:VY,sortedArray:CB,flattenJSON:NL,subclip:Rpe,makeClipAdditive:Ppe};class Xy{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class jY extends Xy{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:u0,endingEnd:u0}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case c0:s=e,a=2*t-n;break;case J_:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(l===void 0)switch(this.getSettings_().endingEnd){case c0:o=e,l=2*n-t;break;case J_:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const u=(n-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-n),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),v=p*p,b=v*p,_=-f*b+2*f*v-f*p,M=(1+f)*b+(-1.5-2*f)*v+(-.5+f)*p+1,E=(-1-d)*b+(1.5+d)*v+.5*p,R=d*b-d*v;for(let L=0;L!==a;++L)s[L]=_*o[c+L]+M*o[u+L]+E*o[l+L]+R*o[h+L];return s}}class DL extends Xy{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(n-t)/(r-t),h=1-c;for(let f=0;f!==a;++f)s[f]=o[u+f]*h+o[l+f]*c;return s}}class $Y extends Xy{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ec{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=f0(t,this.TimeBufferType),this.values=f0(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:f0(e.times,Array),values:f0(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new $Y(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new DL(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new jY(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case uy:t=this.InterpolantFactoryMethodDiscrete;break;case cy:t=this.InterpolantFactoryMethodLinear;break;case _M:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return uy;case this.InterpolantFactoryMethodLinear:return cy;case this.InterpolantFactoryMethodSmooth:return _M}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&qY(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===_M,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(r)l=!0;else{const h=a*n,f=h-n,d=h+n;for(let p=0;p!==n;++p){const v=t[h+p];if(v!==t[f+p]||v!==t[d+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*n,f=o*n;for(let d=0;d!==n;++d)t[f+d]=t[h+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,u=0;u!==n;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ec.prototype.TimeBufferType=Float32Array;Ec.prototype.ValueBufferType=Float32Array;Ec.prototype.DefaultInterpolation=cy;class fm extends Ec{constructor(e,t,n){super(e,t,n)}}fm.prototype.ValueTypeName="bool";fm.prototype.ValueBufferType=Array;fm.prototype.DefaultInterpolation=uy;fm.prototype.InterpolantFactoryMethodLinear=void 0;fm.prototype.InterpolantFactoryMethodSmooth=void 0;class LL extends Ec{}LL.prototype.ValueTypeName="color";class Sp extends Ec{}Sp.prototype.ValueTypeName="number";class WY extends Xy{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let u=e*a;for(let c=u+a;u!==c;u+=4)xi.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Mp extends Ec{InterpolantFactoryMethodLinear(e){return new WY(this.times,this.values,this.getValueSize(),e)}}Mp.prototype.ValueTypeName="quaternion";Mp.prototype.InterpolantFactoryMethodSmooth=void 0;class dm extends Ec{constructor(e,t,n){super(e,t,n)}}dm.prototype.ValueTypeName="string";dm.prototype.ValueBufferType=Array;dm.prototype.DefaultInterpolation=uy;dm.prototype.InterpolantFactoryMethodLinear=void 0;dm.prototype.InterpolantFactoryMethodSmooth=void 0;class Tp extends Ec{}Tp.prototype.ValueTypeName="vector";class V0{constructor(e="",t=-1,n=[],r=JC){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Ul(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(Npe(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(Ec.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=VY(l);l=CB(l,1,c),u=CB(u,1,c),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Sp(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const h=c[1];let f=r[h];f||(r[h]=f=[]),f.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(h,f,d,p,v){if(d.length!==0){const b=[],_=[];NL(d,b,_,p),b.length!==0&&v.push(new h(f,b,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const f=u[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let v=0;v<f[p].morphTargets.length;v++)d[f[p].morphTargets[v]]=-1;for(const v in d){const b=[],_=[];for(let M=0;M!==f[p].morphTargets.length;++M){const E=f[p];b.push(E.time),_.push(E.morphTarget===v?1:0)}r.push(new Sp(".morphTargetInfluence["+v+"]",b,_))}l=d.length*o}else{const d=".bones["+t[h].name+"]";n(Tp,d+".position",f,"pos",r),n(Mp,d+".quaternion",f,"rot",r),n(Tp,d+".scale",f,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Ipe(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sp;case"vector":case"vector2":case"vector3":case"vector4":return Tp;case"color":return LL;case"quaternion":return Mp;case"bool":case"boolean":return fm;case"string":return dm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function Npe(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Ipe(i.type);if(i.times===void 0){const t=[],n=[];NL(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const mf={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class OL{constructor(e,t,n){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){a++,s===!1&&r.onStart!==void 0&&r.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,r.onProgress!==void 0&&r.onProgress(c,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,f=u.length;h<f;h+=2){const d=u[h],p=u[h+1];if(d.global&&(d.lastIndex=0),d.test(c))return p}return null}}}const u1=new OL;class Ao{constructor(e){this.manager=e!==void 0?e:u1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ao.DEFAULT_MATERIAL_NAME="__DEFAULT";const Gh={};class Dpe extends Error{constructor(e,t){super(e),this.response=t}}class tl extends Ao{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=mf.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Gh[e]!==void 0){Gh[e].push({onLoad:t,onProgress:n,onError:r});return}Gh[e]=[],Gh[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=Gh[e],h=u.body.getReader(),f=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),d=f?parseInt(f):0,p=d!==0;let v=0;const b=new ReadableStream({start(_){M();function M(){h.read().then(({done:E,value:R})=>{if(E)_.close();else{v+=R.byteLength;const L=new ProgressEvent("progress",{lengthComputable:p,loaded:v,total:d});for(let I=0,D=c.length;I<D;I++){const k=c[I];k.onProgress&&k.onProgress(L)}_.enqueue(R),M()}},E=>{_.error(E)})}}});return new Response(b)}else throw new Dpe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),f=h&&h[1]?h[1].toLowerCase():void 0,d=new TextDecoder(f);return u.arrayBuffer().then(p=>d.decode(p))}}}).then(u=>{mf.add(e,u);const c=Gh[e];delete Gh[e];for(let h=0,f=c.length;h<f;h++){const d=c[h];d.onLoad&&d.onLoad(u)}}).catch(u=>{const c=Gh[e];if(c===void 0)throw this.manager.itemError(e),u;delete Gh[e];for(let h=0,f=c.length;h<f;h++){const d=c[h];d.onError&&d.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Lpe extends Ao{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new tl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=V0.parse(e[n]);t.push(r)}return t}}class Ope extends Ao{constructor(e){super(e)}load(e,t,n,r){const s=this,o=[],a=new u4,l=new tl(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(h){l.load(e[h],function(f){const d=s.parse(f,!0);o[h]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},u+=1,u===6&&(d.mipmapCount===1&&(a.minFilter=pr),a.image=o,a.format=d.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(Array.isArray(e))for(let h=0,f=e.length;h<f;++h)c(h);else l.load(e,function(h){const f=s.parse(h,!0);if(f.isCubemap){const d=f.mipmaps.length/f.mipmapCount;for(let p=0;p<d;p++){o[p]={mipmaps:[]};for(let v=0;v<f.mipmapCount;v++)o[p].mipmaps.push(f.mipmaps[p*f.mipmapCount+v]),o[p].format=f.format,o[p].width=f.width,o[p].height=f.height}a.image=o}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=pr),a.format=f.format,a.needsUpdate=!0,t&&t(a)},n,r);return a}}class cx extends Ao{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=mf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=rx("img");function l(){c(),mf.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(h){c(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Fpe extends Ao{constructor(e){super(e)}load(e,t,n,r){const s=new nb;s.colorSpace=Ua;const o=new cx(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class kpe extends Ao{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new rh,a=new tl(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(r!==void 0)r(c);else{console.error(c);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:ga,o.wrapT=u.wrapT!==void 0?u.wrapT:ga,o.magFilter=u.magFilter!==void 0?u.magFilter:pr,o.minFilter=u.minFilter!==void 0?u.minFilter:pr,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Mu),u.mipmapCount===1&&(o.minFilter=pr),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},n,r),o}}class Yp extends Ao{constructor(e){super(e)}load(e,t,n,r){const s=new or,o=new cx(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}let Qp=class extends Qn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new vt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}},XY=class extends Qp{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Qn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new vt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}};const ZR=new kt,U7=new ne,z7=new ne;let FL=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new je(512,512),this.map=null,this.mapPass=null,this.matrix=new kt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ib,this._frameExtents=new je(1,1),this._viewportCount=1,this._viewports=[new In(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;U7.setFromMatrixPosition(e.matrixWorld),t.position.copy(U7),z7.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(z7),t.updateMatrixWorld(),ZR.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ZR),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ZR)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},Upe=class extends FL{constructor(){super(new $i(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=fy*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},b4=class extends Qp{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Qn.DEFAULT_UP),this.updateMatrix(),this.target=new Qn,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Upe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};const G7=new kt,t2=new ne,e8=new ne;let zpe=class extends FL{constructor(){super(new $i(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new je(4,2),this._viewportCount=6,this._viewports=[new In(2,1,1,1),new In(0,1,1,1),new In(3,1,1,1),new In(1,1,1,1),new In(3,0,1,1),new In(1,0,1,1)],this._cubeDirections=[new ne(1,0,0),new ne(-1,0,0),new ne(0,0,1),new ne(0,0,-1),new ne(0,1,0),new ne(0,-1,0)],this._cubeUps=[new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,0,1),new ne(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),t2.setFromMatrixPosition(e.matrixWorld),n.position.copy(t2),e8.copy(n.position),e8.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(e8),n.updateMatrixWorld(),r.makeTranslation(-t2.x,-t2.y,-t2.z),G7.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(G7)}},hx=class extends Qp{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new zpe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},Gpe=class extends FL{constructor(){super(new qa(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},ub=class extends Qp{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Qn.DEFAULT_UP),this.updateMatrix(),this.target=new Qn,this.shadow=new Gpe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},w4=class extends Qp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}},YY=class extends Qp{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}},QY=class{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ne)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}},KY=class extends Qp{constructor(e=new QY,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}};class S4 extends Ao{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,o=new tl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new vt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=n(o.value);break;case"c":r.uniforms[s].value=new vt().setHex(o.value);break;case"v2":r.uniforms[s].value=new je().fromArray(o.value);break;case"v3":r.uniforms[s].value=new ne().fromArray(o.value);break;case"v4":r.uniforms[s].value=new In().fromArray(o.value);break;case"m3":r.uniforms[s].value=new qn().fromArray(o.value);break;case"m4":r.uniforms[s].value=new kt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new je().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new je().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return S4.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:FY,SpriteMaterial:bL,RawShaderMaterial:kY,ShaderMaterial:po,PointsMaterial:l4,MeshPhysicalMaterial:ku,MeshStandardMaterial:lb,MeshPhongMaterial:O1,MeshToonMaterial:UY,MeshNormalMaterial:zY,MeshLambertMaterial:bh,MeshDepthMaterial:vL,MeshDistanceMaterial:_L,MeshBasicMaterial:va,MeshMatcapMaterial:GY,LineDashedMaterial:HY,LineBasicMaterial:ys,Material:ps};return new t[e]}}class xf{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class kL extends fn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class JY extends Ao{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new tl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(d,p){if(t[p]!==void 0)return t[p];const b=d.interleavedBuffers[p],_=s(d,b.buffer),M=o1(b.type,_),E=new $y(M,b.stride);return E.uuid=b.uuid,t[p]=E,E}function s(d,p){if(n[p]!==void 0)return n[p];const b=d.arrayBuffers[p],_=new Uint32Array(b).buffer;return n[p]=_,_}const o=e.isInstancedBufferGeometry?new kL:new fn,a=e.data.index;if(a!==void 0){const d=o1(a.type,a.array);o.setIndex(new Kn(d,1))}const l=e.data.attributes;for(const d in l){const p=l[d];let v;if(p.isInterleavedBufferAttribute){const b=r(e.data,p.data);v=new Ol(b,p.itemSize,p.offset,p.normalized)}else{const b=o1(p.type,p.array),_=p.isInstancedBufferAttribute?Of:Kn;v=new _(b,p.itemSize,p.normalized)}p.name!==void 0&&(v.name=p.name),p.usage!==void 0&&v.setUsage(p.usage),o.setAttribute(d,v)}const u=e.data.morphAttributes;if(u)for(const d in u){const p=u[d],v=[];for(let b=0,_=p.length;b<_;b++){const M=p[b];let E;if(M.isInterleavedBufferAttribute){const R=r(e.data,M.data);E=new Ol(R,M.itemSize,M.offset,M.normalized)}else{const R=o1(M.type,M.array);E=new Kn(R,M.itemSize,M.normalized)}M.name!==void 0&&(E.name=M.name),v.push(E)}o.morphAttributes[d]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let d=0,p=h.length;d!==p;++d){const v=h[d];o.addGroup(v.start,v.count,v.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const d=new ne;f.center!==void 0&&d.fromArray(f.center),o.boundingSphere=new ds(d,f.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Hpe extends Ao{constructor(e){super(e)}load(e,t,n,r){const s=this,o=this.path===""?xf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new tl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?xf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new tl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,n),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),this.bindLightTargets(u),t!==void 0){let h=!1;for(const f in o)if(o[f].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new w0().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Wy().fromJSON(e[s],r);n[a.uuid]=a}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new JY;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in k7?a=k7[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),n[l.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new S4;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];n[l.uuid]===void 0&&(n[l.uuid]=s.parse(l)),r[l.uuid]=n[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=V0.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function o(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return o(c)}else return l.data?{data:o1(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new OL(t);s=new cx(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const h=e[u],f=h.url;if(Array.isArray(f)){const d=[];for(let p=0,v=f.length;p<v;p++){const b=f[p],_=a(b);_!==null&&(_ instanceof HTMLImageElement?d.push(_):d.push(new rh(_.data,_.width,_.height)))}r[h.uuid]=new h0(d)}else{const d=a(h.url);r[h.uuid]=new h0(d)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:o1(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new cx(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let h=0,f=u.length;h<f;h++){const d=u[h],p=await s(d);p!==null&&(p instanceof HTMLImageElement?c.push(p):c.push(new rh(p.data,p.width,p.height)))}n[l.uuid]=new h0(c)}else{const c=await s(l.url);n[l.uuid]=new h0(c)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new nb,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new rh:c=new or,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=n(a.mapping,qpe)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=n(a.wrap[0],H7),c.wrapT=n(a.wrap[1],H7)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.minFilter!==void 0&&(c.minFilter=n(a.minFilter,q7)),a.magFilter!==void 0&&(c.magFilter=n(a.magFilter,q7)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),r[a.uuid]=c}return r}parseObject(e,t,n,r,s){let o;function a(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const d=[];for(let p=0,v=f.length;p<v;p++){const b=f[p];n[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),d.push(n[b])}return d}return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),n[f]}}function u(f){return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),r[f]}let c,h;switch(e.type){case"Scene":o=new sx,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new vt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new o4(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new s4(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new $i(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new qa(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new w4(e.color,e.intensity);break;case"DirectionalLight":o=new ub(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new hx(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new YY(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new b4(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new XY(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new KY().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),h=l(e.material),o=new a4(c,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),h=l(e.material),o=new fi(c,h);break;case"InstancedMesh":c=a(e.geometry),h=l(e.material);const f=e.count,d=e.instanceMatrix,p=e.instanceColor;o=new wL(c,h,f),o.instanceMatrix=new Of(new Float32Array(d.array),16),p!==void 0&&(o.instanceColor=new Of(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":c=a(e.geometry),h=l(e.material),o=new TY(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=c,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(v=>{const b=new Zr;b.min.fromArray(v.boxMin),b.max.fromArray(v.boxMax);const _=new ds;return _.radius=v.sphereRadius,_.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:b,sphereInitialized:v.sphereInitialized,sphere:_}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new MY;break;case"Line":o=new Vl(a(e.geometry),l(e.material));break;case"LineLoop":o=new SL(a(e.geometry),l(e.material));break;case"LineSegments":o=new Ql(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new ML(a(e.geometry),l(e.material));break;case"Sprite":o=new SY(l(e.material));break;case"Group":o=new Cs;break;case"Bone":o=new py;break;default:o=new Qn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let d=0;d<f.length;d++)o.add(this.parseObject(f[d],t,n,r,s))}if(e.animations!==void 0){const f=e.animations;for(let d=0;d<f.length;d++){const p=f[d];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const f=e.levels;for(let d=0;d<f.length;d++){const p=f[d],v=o.getObjectByProperty("uuid",p.object);v!==void 0&&o.addLevel(v,p.distance,p.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new Qn}})}}const qpe={UVMapping:VC,CubeReflectionMapping:Df,CubeRefractionMapping:wp,EquirectangularReflectionMapping:oy,EquirectangularRefractionMapping:K_,CubeUVReflectionMapping:Hy},H7={RepeatWrapping:dh,ClampToEdgeWrapping:ga,MirroredRepeatWrapping:ay},q7={NearestFilter:Es,NearestMipmapNearestFilter:jC,NearestMipmapLinearFilter:l0,LinearFilter:pr,LinearMipmapNearestFilter:D1,LinearMipmapLinearFilter:Mu};class ZY extends Ao{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=mf.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return mf.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),mf.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});mf.add(e,l),s.manager.itemStart(e)}}let DS;class UL{static getContext(){return DS===void 0&&(DS=new(window.AudioContext||window.webkitAudioContext)),DS}static setContext(e){DS=e}}class Vpe extends Ao{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new tl(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);UL.getContext().decodeAudioData(u,function(h){t(h)}).catch(a)}catch(u){a(u)}},n,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const V7=new kt,j7=new kt,PA=new kt;class jpe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new $i,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new $i,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,PA.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(x0*t.fov*.5)/t.zoom;let a,l;j7.elements[12]=-r,V7.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,PA.elements[0]=2*t.near/(l-a),PA.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(PA),a=-o*t.aspect-s,l=o*t.aspect-s,PA.elements[0]=2*t.near/(l-a),PA.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(PA)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(j7),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(V7)}}class cb{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=$7(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=$7();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function $7(){return performance.now()}const BA=new ne,W7=new xi,$pe=new ne,IA=new ne;class Wpe extends Qn{constructor(){super(),this.type="AudioListener",this.context=UL.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new cb}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(BA,W7,$pe),IA.set(0,0,-1).applyQuaternion(W7),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(BA.x,r),t.positionY.linearRampToValueAtTime(BA.y,r),t.positionZ.linearRampToValueAtTime(BA.z,r),t.forwardX.linearRampToValueAtTime(IA.x,r),t.forwardY.linearRampToValueAtTime(IA.y,r),t.forwardZ.linearRampToValueAtTime(IA.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(BA.x,BA.y,BA.z),t.setOrientation(IA.x,IA.y,IA.z,n.x,n.y,n.z)}}class eQ extends Qn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const NA=new ne,X7=new xi,Xpe=new ne,DA=new ne;class Ype extends eQ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(NA,X7,Xpe),DA.set(0,0,1).applyQuaternion(X7);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(NA.x,n),t.positionY.linearRampToValueAtTime(NA.y,n),t.positionZ.linearRampToValueAtTime(NA.z,n),t.orientationX.linearRampToValueAtTime(DA.x,n),t.orientationY.linearRampToValueAtTime(DA.y,n),t.orientationZ.linearRampToValueAtTime(DA.z,n)}else t.setPosition(NA.x,NA.y,NA.z),t.setOrientation(DA.x,DA.y,DA.z)}}class Qpe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class tQ{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)n[s+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){xi.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;xi.multiplyQuaternionsFlat(e,o,e,t,e,n),xi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*r}}}const zL="\\[\\]\\.:\\/",Kpe=new RegExp("["+zL+"]","g"),GL="[^"+zL+"]",Jpe="[^"+zL.replace("\\.","")+"]",Zpe=/((?:WC+[\/:])*)/.source.replace("WC",GL),eAe=/(WCOD+)?/.source.replace("WCOD",Jpe),tAe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",GL),nAe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",GL),iAe=new RegExp("^"+Zpe+eAe+tAe+nAe+"$"),rAe=["material","materials","bones","map"];class sAe{constructor(e,t,n){const r=n||ei.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class ei{constructor(e,t,n){this.path=t,this.parsedPath=n||ei.parseTrackName(t),this.node=ei.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new ei.Composite(e,t,n):new ei(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Kpe,"")}static parseTrackName(e){const t=iAe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);rAe.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=n(a.children);if(l)return l}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=ei.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ei.Composite=sAe;ei.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ei.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ei.prototype.GetterByBindingType=[ei.prototype._getValue_direct,ei.prototype._getValue_array,ei.prototype._getValue_arrayElement,ei.prototype._getValue_toArray];ei.prototype.SetterByBindingTypeAndVersioning=[[ei.prototype._setValue_direct,ei.prototype._setValue_direct_setNeedsUpdate,ei.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ei.prototype._setValue_array,ei.prototype._setValue_array_setNeedsUpdate,ei.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ei.prototype._setValue_arrayElement,ei.prototype._setValue_arrayElement_setNeedsUpdate,ei.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ei.prototype._setValue_fromArray,ei.prototype._setValue_fromArray_setNeedsUpdate,ei.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class oAe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ul(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const f=arguments[c],d=f.uuid;let p=t[d];if(p===void 0){p=l++,t[d]=p,e.push(f);for(let v=0,b=o;v!==b;++v)s[v].push(new ei(f,n[v],r[v]))}else if(p<u){a=e[p];const v=--u,b=e[v];t[b.uuid]=p,e[p]=b,t[d]=v,e[v]=f;for(let _=0,M=o;_!==M;++_){const E=s[_],R=E[v];let L=E[p];E[p]=R,L===void 0&&(L=new ei(f,n[_],r[_])),E[v]=L}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const h=s++,f=e[h];t[f.uuid]=c,e[c]=f,t[u]=h,e[h]=l;for(let d=0,p=r;d!==p;++d){const v=n[d],b=v[h],_=v[c];v[c]=b,v[h]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,h=t[c];if(h!==void 0)if(delete t[c],h<s){const f=--s,d=e[f],p=--o,v=e[p];t[d.uuid]=h,e[h]=d,t[v.uuid]=f,e[f]=v,e.pop();for(let b=0,_=r;b!==_;++b){const M=n[b],E=M[f],R=M[p];M[h]=E,M[f]=R,M.pop()}}else{const f=--o,d=e[f];f>0&&(t[d.uuid]=h),e[h]=d,e.pop();for(let p=0,v=r;p!==v;++p){const b=n[p];b[h]=b[f],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,h=new Array(u);r=s.length,n[e]=r,o.push(e),a.push(t),s.push(h);for(let f=c,d=l.length;f!==d;++f){const p=l[f];h[f]=new ei(p,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=n,o[n]=l,o.pop(),s[n]=s[a],s.pop(),r[n]=r[a],r.pop()}}}class nQ{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:u0,endingEnd:u0};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=HX,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+n,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case fL:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case JC:default:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===qX;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(n===GX){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=c0,r.endingEnd=c0):(e?r.endingStart=this.zeroSlopeAtStart?c0:u0:r.endingStart=J_,t?r.endingEnd=this.zeroSlopeAtEnd?c0:u0:r.endingEnd=J_)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=n,this}}const aAe=new Float32Array(1);class iQ extends Fu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=n.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let h=0;h!==s;++h){const f=r[h],d=f.name;let p=c[d];if(p!==void 0)++p.referenceCount,o[h]=p;else{if(p=o[h],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,d));continue}const v=t&&t._propertyBindings[h].binding.parsedPath;p=new tQ(ei.create(n,d,v),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,d),o[h]=p}a[h].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new DL(new Float32Array(2),new Float32Array(2),1,aAe),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?V0.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(n===void 0&&(o!==null?n=o.blendMode:n=JC),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===n)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new nQ(this,o,t,n);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?V0.findByName(n,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==n;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}let lAe=class rQ{constructor(e){this.value=e}clone(){return new rQ(this.value.clone===void 0?this.value:this.value.clone())}},uAe=0,cAe=class extends Fu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:uAe++}),this.name="",this.usage=nx,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}},ZT=class extends $y{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}};class hAe{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Y7=new kt;class HL{constructor(e,t,n=0,r=1/0){this.ray=new $p(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new b0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Y7.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Y7),this}intersectObject(e,t=!0,n=[]){return RB(e,this,n,t),n.sort(Q7),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)RB(e[r],this,n,t);return n.sort(Q7),n}}function Q7(i,e){return i.distance-e.distance}function RB(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let o=0,a=s.length;o<a;o++)RB(s[o],e,t,!0)}}class j0{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ur(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class fAe{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class qL{constructor(e,t,n,r){qL.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const K7=new je;class dAe{constructor(e=new je(1/0,1/0),t=new je(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=K7.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,K7).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const J7=new ne,LS=new ne;class sQ{constructor(e=new ne,t=new ne){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){J7.subVectors(e,this.start),LS.subVectors(this.end,this.start);const n=LS.dot(LS);let s=LS.dot(J7)/n;return t&&(s=Ur(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Z7=new ne;class pAe extends Qn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new fn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}n.setAttribute("position",new Ht(r,3));const s=new ys({fog:!1,toneMapped:!1});this.cone=new Ql(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Z7.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Z7),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Bd=new ne,OS=new kt,t8=new kt;class AAe extends Ql{constructor(e){const t=oQ(e),n=new fn,r=[],s=[],o=new vt(0,0,1),a=new vt(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new Ht(r,3)),n.setAttribute("color",new Ht(s,3));const l=new ys({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");t8.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(OS.multiplyMatrices(t8,a.matrixWorld),Bd.setFromMatrixPosition(OS),r.setXYZ(o,Bd.x,Bd.y,Bd.z),OS.multiplyMatrices(t8,a.parent.matrixWorld),Bd.setFromMatrixPosition(OS),r.setXYZ(o+1,Bd.x,Bd.y,Bd.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function oQ(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,oQ(i.children[t]));return e}class mAe extends fi{constructor(e,t,n){const r=new Xp(t,4,2),s=new va({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const gAe=new ne,eU=new vt,tU=new vt;class yAe extends Qn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new ob(t);r.rotateY(Math.PI*.5),this.material=new va({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Kn(o,3)),this.add(new fi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");eU.copy(this.light.color),tU.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?eU:tU;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(gAe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class vAe extends Ql{constructor(e=10,t=10,n=4473924,r=8947848){n=new vt(n),r=new vt(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let f=0,d=0,p=-a;f<=t;f++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const v=f===s?n:r;v.toArray(u,d),d+=3,v.toArray(u,d),d+=3,v.toArray(u,d),d+=3,v.toArray(u,d),d+=3}const c=new fn;c.setAttribute("position",new Ht(l,3)),c.setAttribute("color",new Ht(u,3));const h=new ys({vertexColors:!0,toneMapped:!1});super(c,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class _Ae extends Ql{constructor(e=10,t=16,n=8,r=64,s=4473924,o=8947848){s=new vt(s),o=new vt(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const f=h/t*(Math.PI*2),d=Math.sin(f)*e,p=Math.cos(f)*e;a.push(0,0,0),a.push(d,0,p);const v=h&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let h=0;h<n;h++){const f=h&1?s:o,d=e-e/n*h;for(let p=0;p<r;p++){let v=p/r*(Math.PI*2),b=Math.sin(v)*d,_=Math.cos(v)*d;a.push(b,0,_),l.push(f.r,f.g,f.b),v=(p+1)/r*(Math.PI*2),b=Math.sin(v)*d,_=Math.cos(v)*d,a.push(b,0,_),l.push(f.r,f.g,f.b)}}const u=new fn;u.setAttribute("position",new Ht(a,3)),u.setAttribute("color",new Ht(l,3));const c=new ys({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const nU=new ne,FS=new ne,iU=new ne;class xAe extends Qn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new fn;r.setAttribute("position",new Ht([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ys({fog:!1,toneMapped:!1});this.lightPlane=new Vl(r,s),this.add(this.lightPlane),r=new fn,r.setAttribute("position",new Ht([0,0,0,0,0,1],3)),this.targetLine=new Vl(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),nU.setFromMatrixPosition(this.light.matrixWorld),FS.setFromMatrixPosition(this.light.target.matrixWorld),iU.subVectors(FS,nU),this.lightPlane.lookAt(FS),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(FS),this.targetLine.scale.z=iU.length()}}const kS=new ne,Lr=new tb;class bAe extends Ql{constructor(e){const t=new fn,n=new ys({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,v){l(p),l(v)}function l(p){r.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(r.length/3-1)}t.setAttribute("position",new Ht(r,3)),t.setAttribute("color",new Ht(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new vt(16755200),c=new vt(16711680),h=new vt(43775),f=new vt(16777215),d=new vt(3355443);this.setColors(u,c,h,f,d)}setColors(e,t,n,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;Lr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Xr("c",t,e,Lr,0,0,-1),Xr("t",t,e,Lr,0,0,1),Xr("n1",t,e,Lr,-n,-r,-1),Xr("n2",t,e,Lr,n,-r,-1),Xr("n3",t,e,Lr,-n,r,-1),Xr("n4",t,e,Lr,n,r,-1),Xr("f1",t,e,Lr,-n,-r,1),Xr("f2",t,e,Lr,n,-r,1),Xr("f3",t,e,Lr,-n,r,1),Xr("f4",t,e,Lr,n,r,1),Xr("u1",t,e,Lr,n*.7,r*1.1,-1),Xr("u2",t,e,Lr,-n*.7,r*1.1,-1),Xr("u3",t,e,Lr,0,r*2,-1),Xr("cf1",t,e,Lr,-n,0,1),Xr("cf2",t,e,Lr,n,0,1),Xr("cf3",t,e,Lr,0,-r,1),Xr("cf4",t,e,Lr,0,r,1),Xr("cn1",t,e,Lr,-n,0,-1),Xr("cn2",t,e,Lr,n,0,-1),Xr("cn3",t,e,Lr,0,-r,-1),Xr("cn4",t,e,Lr,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Xr(i,e,t,n,r,s,o){kS.set(r,s,o).unproject(n);const a=e[i];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],kS.x,kS.y,kS.z)}}const US=new Zr;class wAe extends Ql{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new fn;s.setIndex(new Kn(n,1)),s.setAttribute("position",new Kn(r,3)),super(s,new ys({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&US.setFromObject(this.object),US.isEmpty())return;const t=US.min,n=US.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class SAe extends Ql{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new fn;s.setIndex(new Kn(n,1)),s.setAttribute("position",new Ht(r,3)),super(s,new ys({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class MAe extends Vl{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new fn;o.setAttribute("position",new Ht(s,3)),o.computeBoundingSphere(),super(o,new ys({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new fn;l.setAttribute("position",new Ht(a,3)),l.computeBoundingSphere(),this.add(new fi(l,new va({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const rU=new ne;let zS,n8;class TAe extends Qn{constructor(e=new ne(0,0,1),t=new ne(0,0,0),n=1,r=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",zS===void 0&&(zS=new fn,zS.setAttribute("position",new Ht([0,0,0,0,1,0],3)),n8=new hm(0,.5,1,5,1),n8.translate(0,-.5,0)),this.position.copy(t),this.line=new Vl(zS,new ys({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new fi(n8,new va({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{rU.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(rU,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class EAe extends Ql{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new fn;r.setAttribute("position",new Ht(t,3)),r.setAttribute("color",new Ht(n,3));const s=new ys({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new vt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aQ{constructor(){this.type="ShapePath",this.color=new vt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ox,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const M=[];for(let E=0,R=_.length;E<R;E++){const L=_[E],I=new w0;I.curves=L.curves,M.push(I)}return M}function n(_,M){const E=M.length;let R=!1;for(let L=E-1,I=0;I<E;L=I++){let D=M[L],k=M[I],G=k.x-D.x,O=k.y-D.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(D=M[I],G=-G,k=M[L],O=-O),_.y<D.y||_.y>k.y)continue;if(_.y===D.y){if(_.x===D.x)return!0}else{const U=O*(_.x-D.x)-G*(_.y-D.y);if(U===0)return!0;if(U<0)continue;R=!R}}else{if(_.y!==D.y)continue;if(k.x<=_.x&&_.x<=D.x||D.x<=_.x&&_.x<=k.x)return!0}}return R}const r=sh.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new w0,l.curves=a.curves,u.push(l),u;let c=!r(s[0].getPoints());c=e?!c:c;const h=[],f=[];let d=[],p=0,v;f[p]=void 0,d[p]=[];for(let _=0,M=s.length;_<M;_++)a=s[_],v=a.getPoints(),o=r(v),o=e?!o:o,o?(!c&&f[p]&&p++,f[p]={s:new w0,p:v},f[p].s.curves=a.curves,c&&p++,d[p]=[]):d[p].push({h:a,p:v[0]});if(!f[0])return t(s);if(f.length>1){let _=!1,M=0;for(let E=0,R=f.length;E<R;E++)h[E]=[];for(let E=0,R=f.length;E<R;E++){const L=d[E];for(let I=0;I<L.length;I++){const D=L[I];let k=!0;for(let G=0;G<f.length;G++)n(D.p,f[G].p)&&(E!==G&&M++,k?(k=!1,h[G].push(D)):_=!0);k&&h[E].push(D)}}M>0&&_===!1&&(d=h)}let b;for(let _=0,M=f.length;_<M;_++){l=f[_].s,u.push(l),b=d[_];for(let E=0,R=b.length;E<R;E++)l.holes.push(b[E].h)}return u}}class M4 extends Fu{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class CAe extends ql{constructor(e=1,t=1,n=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Gy}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Gy);const RAe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:nL,AddEquation:Zd,AddOperation:NX,AdditiveAnimationBlendMode:fL,AdditiveBlending:AB,AgXToneMapping:kX,AlphaFormat:oL,AlwaysCompare:ZX,AlwaysDepth:yT,AlwaysStencilFunc:vB,AmbientLight:w4,AnimationAction:nQ,AnimationClip:V0,AnimationLoader:Lpe,AnimationMixer:iQ,AnimationObjectGroup:oAe,AnimationUtils:Bpe,ArcCurve:CY,ArrayCamera:xY,ArrowHelper:TAe,AttachedBindMode:yB,Audio:eQ,AudioAnalyser:Qpe,AudioContext:UL,AudioListener:Wpe,AudioLoader:Vpe,AxesHelper:EAe,BackSide:ho,BasicDepthPacking:VX,BasicShadowMap:dX,BatchedMesh:TY,Bone:py,BooleanKeyframeTrack:fm,Box2:dAe,Box3:Zr,Box3Helper:SAe,BoxGeometry:qy,BoxHelper:wAe,BufferAttribute:Kn,BufferGeometry:fn,BufferGeometryLoader:JY,ByteType:iL,Cache:mf,Camera:tb,CameraHelper:bAe,CanvasTexture:tpe,CapsuleGeometry:f4,CatmullRomCurve3:RY,CineonToneMapping:OX,CircleGeometry:cm,ClampToEdgeWrapping:ga,Clock:cb,Color:vt,ColorKeyframeTrack:LL,ColorManagement:Mi,CompressedArrayTexture:Zde,CompressedCubeTexture:epe,CompressedTexture:u4,CompressedTextureLoader:Ope,ConeGeometry:d4,ConstantAlphaFactor:PX,ConstantColorFactor:CX,Controls:M4,CubeCamera:dY,CubeReflectionMapping:Df,CubeRefractionMapping:wp,CubeTexture:nb,CubeTextureLoader:Fpe,CubeUVReflectionMapping:Hy,CubicBezierCurve:EL,CubicBezierCurve3:CL,CubicInterpolant:jY,CullFaceBack:pB,CullFaceFront:fX,CullFaceFrontBack:Iae,CullFaceNone:hX,Curve:Kl,CurvePath:BY,CustomBlending:pX,CustomToneMapping:FX,CylinderGeometry:hm,Cylindrical:fAe,Data3DTexture:mL,DataArrayTexture:t4,DataTexture:rh,DataTextureLoader:kpe,DataUtils:qle,DecrementStencilOp:qae,DecrementWrapStencilOp:jae,DefaultLoadingManager:u1,DepthFormat:_0,DepthStencilFormat:H0,DepthTexture:i4,DetachedBindMode:zX,DirectionalLight:ub,DirectionalLightHelper:xAe,DiscreteInterpolant:$Y,DisplayP3ColorSpace:e4,DodecahedronGeometry:p4,DoubleSide:ao,DstAlphaFactor:wX,DstColorFactor:MX,DynamicCopyUsage:ole,DynamicDrawUsage:ele,DynamicReadUsage:ile,EdgesGeometry:IY,EllipseCurve:c4,EqualCompare:YX,EqualDepth:_T,EqualStencilFunc:Yae,EquirectangularReflectionMapping:oy,EquirectangularRefractionMapping:K_,Euler:Jr,EventDispatcher:Fu,ExtrudeGeometry:sb,FileLoader:tl,Float16BufferAttribute:Yle,Float32BufferAttribute:Ht,FloatType:ya,Fog:o4,FogExp2:s4,FramebufferTexture:Jde,FrontSide:fh,Frustum:ib,GLBufferAttribute:hAe,GLSL1:lle,GLSL3:_B,GreaterCompare:QX,GreaterDepth:bT,GreaterEqualCompare:JX,GreaterEqualDepth:xT,GreaterEqualStencilFunc:Zae,GreaterStencilFunc:Kae,GridHelper:vAe,Group:Cs,HalfFloatType:Vp,HemisphereLight:XY,HemisphereLightHelper:yAe,IcosahedronGeometry:m4,ImageBitmapLoader:ZY,ImageLoader:cx,ImageUtils:rY,IncrementStencilOp:Hae,IncrementWrapStencilOp:Vae,InstancedBufferAttribute:Of,InstancedBufferGeometry:kL,InstancedInterleavedBuffer:ZT,InstancedMesh:wL,Int16BufferAttribute:Wle,Int32BufferAttribute:Xle,Int8BufferAttribute:Vle,IntType:$C,InterleavedBuffer:$y,InterleavedBufferAttribute:Ol,Interpolant:Xy,InterpolateDiscrete:uy,InterpolateLinear:cy,InterpolateSmooth:_M,InvertStencilOp:$ae,KeepStencilOp:WA,KeyframeTrack:Ec,LOD:MY,LatheGeometry:rb,Layers:b0,LessCompare:XX,LessDepth:vT,LessEqualCompare:pL,LessEqualDepth:z0,LessEqualStencilFunc:Qae,LessStencilFunc:Xae,Light:Qp,LightProbe:KY,Line:Vl,Line3:sQ,LineBasicMaterial:ys,LineCurve:RL,LineCurve3:PY,LineDashedMaterial:HY,LineLoop:SL,LineSegments:Ql,LinearDisplayP3ColorSpace:Zx,LinearFilter:pr,LinearInterpolant:DL,LinearMipMapLinearFilter:Oae,LinearMipMapNearestFilter:Lae,LinearMipmapLinearFilter:Mu,LinearMipmapNearestFilter:D1,LinearSRGBColorSpace:Qf,LinearToneMapping:DX,LinearTransfer:Z_,Loader:Ao,LoaderUtils:xf,LoadingManager:OL,LoopOnce:GX,LoopPingPong:qX,LoopRepeat:HX,LuminanceAlphaFormat:uL,LuminanceFormat:lL,MOUSE:us,Material:ps,MaterialLoader:S4,MathUtils:lo,Matrix2:qL,Matrix3:qn,Matrix4:kt,MaxEquation:yX,Mesh:fi,MeshBasicMaterial:va,MeshDepthMaterial:vL,MeshDistanceMaterial:_L,MeshLambertMaterial:bh,MeshMatcapMaterial:GY,MeshNormalMaterial:zY,MeshPhongMaterial:O1,MeshPhysicalMaterial:ku,MeshStandardMaterial:lb,MeshToonMaterial:UY,MinEquation:gX,MirroredRepeatWrapping:ay,MixOperation:IX,MultiplyBlending:gB,MultiplyOperation:Kx,NearestFilter:Es,NearestMipMapLinearFilter:Dae,NearestMipMapNearestFilter:Nae,NearestMipmapLinearFilter:l0,NearestMipmapNearestFilter:jC,NeutralToneMapping:UX,NeverCompare:WX,NeverDepth:gT,NeverStencilFunc:Wae,NoBlending:nh,NoColorSpace:uf,NoToneMapping:ih,NormalAnimationBlendMode:JC,NormalBlending:_f,NotEqualCompare:KX,NotEqualDepth:wT,NotEqualStencilFunc:Jae,NumberKeyframeTrack:Sp,Object3D:Qn,ObjectLoader:Hpe,ObjectSpaceNormalMap:$X,OctahedronGeometry:ob,OneFactor:_X,OneMinusConstantAlphaFactor:BX,OneMinusConstantColorFactor:RX,OneMinusDstAlphaFactor:SX,OneMinusDstColorFactor:TX,OneMinusSrcAlphaFactor:mT,OneMinusSrcColorFactor:bX,OrthographicCamera:qa,P3Primaries:tx,PCFShadowMap:qC,PCFSoftShadowMap:u_,PMREMGenerator:bB,Path:ox,PerspectiveCamera:$i,Plane:jc,PlaneGeometry:Vy,PlaneHelper:MAe,PointLight:hx,PointLightHelper:mAe,Points:ML,PointsMaterial:l4,PolarGridHelper:_Ae,PolyhedronGeometry:Wp,PositionalAudio:Ype,PropertyBinding:ei,PropertyMixer:tQ,QuadraticBezierCurve:PL,QuadraticBezierCurve3:h4,Quaternion:xi,QuaternionKeyframeTrack:Mp,QuaternionLinearInterpolant:WY,RED_GREEN_RGTC2_Format:XT,RED_RGTC1_Format:hL,REVISION:Gy,RGBADepthPacking:jX,RGBAFormat:Fo,RGBAIntegerFormat:KC,RGBA_ASTC_10x10_Format:HT,RGBA_ASTC_10x5_Format:UT,RGBA_ASTC_10x6_Format:zT,RGBA_ASTC_10x8_Format:GT,RGBA_ASTC_12x10_Format:qT,RGBA_ASTC_12x12_Format:VT,RGBA_ASTC_4x4_Format:BT,RGBA_ASTC_5x4_Format:IT,RGBA_ASTC_5x5_Format:NT,RGBA_ASTC_6x5_Format:DT,RGBA_ASTC_6x6_Format:LT,RGBA_ASTC_8x5_Format:OT,RGBA_ASTC_8x6_Format:FT,RGBA_ASTC_8x8_Format:kT,RGBA_BPTC_Format:p_,RGBA_ETC2_EAC_Format:PT,RGBA_PVRTC_2BPPV1_Format:ET,RGBA_PVRTC_4BPPV1_Format:TT,RGBA_S3TC_DXT1_Format:h_,RGBA_S3TC_DXT3_Format:f_,RGBA_S3TC_DXT5_Format:d_,RGBDepthPacking:kae,RGBFormat:aL,RGBIntegerFormat:Fae,RGB_BPTC_SIGNED_Format:jT,RGB_BPTC_UNSIGNED_Format:$T,RGB_ETC1_Format:CT,RGB_ETC2_Format:RT,RGB_PVRTC_2BPPV1_Format:MT,RGB_PVRTC_4BPPV1_Format:ST,RGB_S3TC_DXT1_Format:c_,RGDepthPacking:Uae,RGFormat:cL,RGIntegerFormat:QC,RawShaderMaterial:kY,Ray:$p,Raycaster:HL,Rec709Primaries:ex,RectAreaLight:YY,RedFormat:YC,RedIntegerFormat:Jx,ReinhardToneMapping:LX,RenderTarget:oY,RepeatWrapping:dh,ReplaceStencilOp:Gae,ReverseSubtractEquation:mX,RingGeometry:g4,SIGNED_RED_GREEN_RGTC2_Format:YT,SIGNED_RED_RGTC1_Format:WT,SRGBColorSpace:Ua,SRGBTransfer:Qi,Scene:sx,ShaderChunk:Hn,ShaderLib:ua,ShaderMaterial:po,ShadowMaterial:FY,Shape:w0,ShapeGeometry:y4,ShapePath:aQ,ShapeUtils:sh,ShortType:rL,Skeleton:Wy,SkeletonHelper:AAe,SkinnedMesh:a4,Source:h0,Sphere:ds,SphereGeometry:Xp,Spherical:j0,SphericalHarmonics3:QY,SplineCurve:BL,SpotLight:b4,SpotLightHelper:pAe,Sprite:SY,SpriteMaterial:bL,SrcAlphaFactor:AT,SrcAlphaSaturateFactor:EX,SrcColorFactor:xX,StaticCopyUsage:sle,StaticDrawUsage:nx,StaticReadUsage:nle,StereoCamera:jpe,StreamCopyUsage:ale,StreamDrawUsage:tle,StreamReadUsage:rle,StringKeyframeTrack:dm,SubtractEquation:AX,SubtractiveBlending:mB,TOUCH:Pl,TangentSpaceNormalMap:jp,TetrahedronGeometry:v4,Texture:or,TextureLoader:Yp,TextureUtils:Ide,TorusGeometry:_4,TorusKnotGeometry:x4,Triangle:ep,TriangleFanDrawMode:hy,TriangleStripDrawMode:ZC,TrianglesDrawMode:dL,TubeGeometry:ab,UVMapping:VC,Uint16BufferAttribute:n4,Uint32BufferAttribute:gL,Uint8BufferAttribute:jle,Uint8ClampedBufferAttribute:$le,Uniform:lAe,UniformsGroup:cAe,UniformsLib:Ot,UniformsUtils:eb,UnsignedByteType:xc,UnsignedInt248Type:G0,UnsignedInt5999Type:sL,UnsignedIntType:Lf,UnsignedShort4444Type:WC,UnsignedShort5551Type:XC,UnsignedShortType:ly,VSMShadowMap:uc,Vector2:je,Vector3:ne,Vector4:In,VectorKeyframeTrack:Tp,VideoTexture:EY,WebGL3DRenderTarget:Nle,WebGLArrayRenderTarget:Ile,WebGLCoordinateSystem:Kc,WebGLCubeRenderTarget:pY,WebGLMultipleRenderTargets:CAe,WebGLRenderTarget:ql,WebGLRenderer:xL,WebGLUtils:_Y,WebGPUCoordinateSystem:ix,WireframeGeometry:IL,WrapAroundEnding:J_,ZeroCurvatureEnding:u0,ZeroFactor:vX,ZeroSlopeEnding:c0,ZeroStencilOp:zae,createCanvasElement:iY},Symbol.toStringTag,{value:"Module"}));var lQ={exports:{}},pm={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */pm.ConcurrentRoot=1;pm.ContinuousEventPriority=4;pm.DefaultEventPriority=16;pm.DiscreteEventPriority=1;pm.IdleEventPriority=536870912;pm.LegacyRoot=0;lQ.exports=pm;var c1=lQ.exports;function PAe(i){let e;const t=new Set,n=(u,c)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const f=e;e=c?h:Object.assign({},e,h),t.forEach(d=>d(e,f))}},r=()=>e,s=(u,c=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=c(e);function d(){const p=c(e);if(!h(f,p)){const v=f;u(f=p,v)}}return t.add(d),()=>t.delete(d)},l={setState:n,getState:r,subscribe:(u,c,h)=>c||h?s(u,c,h):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=i(n,r,l),l}const BAe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),sU=BAe?W.useEffect:W.useLayoutEffect;function VL(i){const e=typeof i=="function"?PAe(i):i,t=(n=e.getState,r=Object.is)=>{const[,s]=W.useReducer(b=>b+1,0),o=e.getState(),a=W.useRef(o),l=W.useRef(n),u=W.useRef(r),c=W.useRef(!1),h=W.useRef();h.current===void 0&&(h.current=n(o));let f,d=!1;(a.current!==o||l.current!==n||u.current!==r||c.current)&&(f=n(o),d=!r(h.current,f)),sU(()=>{d&&(h.current=f),a.current=o,l.current=n,u.current=r,c.current=!1});const p=W.useRef(o);sU(()=>{const b=()=>{try{const M=e.getState(),E=l.current(M);u.current(h.current,E)||(a.current=M,h.current=E,s())}catch{c.current=!0,s()}},_=e.subscribe(b);return e.getState()!==p.current&&b(),_},[]);const v=d?f:h.current;return W.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}const IAe=i=>typeof i=="object"&&typeof i.then=="function",d0=[];function uQ(i,e,t=(n,r)=>n===r){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let r=0;r<n;r++)if(!t(i[r],e[r]))return!1;return!0}function cQ(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const s of d0)if(uQ(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:n.equal,remove:()=>{const s=d0.indexOf(r);s!==-1&&d0.splice(s,1)},promise:(IAe(i)?i:i(...e)).then(s=>{r.response=s,n.lifespan&&n.lifespan>0&&(r.timeout=setTimeout(r.remove,n.lifespan))}).catch(s=>r.error=s)};if(d0.push(r),!t)throw r.promise}const hQ=(i,e,t)=>cQ(i,e,!1,t),NAe=(i,e,t)=>void cQ(i,e,!0,t),DAe=i=>{if(i===void 0||i.length===0)d0.splice(0,d0.length);else{const e=d0.find(t=>uQ(i,t.keys,t.equal));e&&e.remove()}};var fQ={exports:{}},i8={exports:{}},r8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oU;function LAe(){return oU||(oU=1,function(i){function e(j,ie){var ae=j.length;j.push(ie);e:for(;0<ae;){var pe=ae-1>>>1,Pe=j[pe];if(0<r(Pe,ie))j[pe]=ie,j[ae]=Pe,ae=pe;else break e}}function t(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var ie=j[0],ae=j.pop();if(ae!==ie){j[0]=ae;e:for(var pe=0,Pe=j.length,He=Pe>>>1;pe<He;){var Se=2*(pe+1)-1,Oe=j[Se],Ye=Se+1,it=j[Ye];if(0>r(Oe,ae))Ye<Pe&&0>r(it,Oe)?(j[pe]=it,j[Ye]=ae,pe=Ye):(j[pe]=Oe,j[Se]=ae,pe=Se);else if(Ye<Pe&&0>r(it,ae))j[pe]=it,j[Ye]=ae,pe=Ye;else break e}}return ie}function r(j,ie){var ae=j.sortIndex-ie.sortIndex;return ae!==0?ae:j.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,d=!1,p=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(j){for(var ie=t(u);ie!==null;){if(ie.callback===null)n(u);else if(ie.startTime<=j)n(u),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=t(u)}}function R(j){if(v=!1,E(j),!p)if(t(l)!==null)p=!0,Z(L);else{var ie=t(u);ie!==null&&he(R,ie.startTime-j)}}function L(j,ie){p=!1,v&&(v=!1,_(k),k=-1),d=!0;var ae=f;try{for(E(ie),h=t(l);h!==null&&(!(h.expirationTime>ie)||j&&!U());){var pe=h.callback;if(typeof pe=="function"){h.callback=null,f=h.priorityLevel;var Pe=pe(h.expirationTime<=ie);ie=i.unstable_now(),typeof Pe=="function"?h.callback=Pe:h===t(l)&&n(l),E(ie)}else n(l);h=t(l)}if(h!==null)var He=!0;else{var Se=t(u);Se!==null&&he(R,Se.startTime-ie),He=!1}return He}finally{h=null,f=ae,d=!1}}var I=!1,D=null,k=-1,G=5,O=-1;function U(){return!(i.unstable_now()-O<G)}function Q(){if(D!==null){var j=i.unstable_now();O=j;var ie=!0;try{ie=D(!0,j)}finally{ie?X():(I=!1,D=null)}}else I=!1}var X;if(typeof M=="function")X=function(){M(Q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,K=ee.port2;ee.port1.onmessage=Q,X=function(){K.postMessage(null)}}else X=function(){b(Q,0)};function Z(j){D=j,I||(I=!0,X())}function he(j,ie){k=b(function(){j(i.unstable_now())},ie)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){p||d||(p=!0,Z(L))},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return f},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(j){switch(f){case 1:case 2:case 3:var ie=3;break;default:ie=f}var ae=f;f=ie;try{return j()}finally{f=ae}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,ie){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ae=f;f=j;try{return ie()}finally{f=ae}},i.unstable_scheduleCallback=function(j,ie,ae){var pe=i.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?pe+ae:pe):ae=pe,j){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ae+Pe,j={id:c++,callback:ie,priorityLevel:j,startTime:ae,expirationTime:Pe,sortIndex:-1},ae>pe?(j.sortIndex=ae,e(u,j),t(l)===null&&j===t(u)&&(v?(_(k),k=-1):v=!0,he(R,ae-pe))):(j.sortIndex=Pe,e(l,j),p||d||(p=!0,Z(L))),j},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(j){var ie=f;return function(){var ae=f;f=ie;try{return j.apply(this,arguments)}finally{f=ae}}}}(r8)),r8}var aU;function OAe(){return aU||(aU=1,i8.exports=LAe()),i8.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FAe=function(e){var t={},n=W,r=OAe(),s=Object.assign;function o(x){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+x,B=1;B<arguments.length;B++)w+="&args[]="+encodeURIComponent(arguments[B]);return"Minified React error #"+x+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),L=Symbol.iterator;function I(x){return x===null||typeof x!="object"?null:(x=L&&x[L]||x["@@iterator"],typeof x=="function"?x:null)}function D(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case c:return"Fragment";case u:return"Portal";case f:return"Profiler";case h:return"StrictMode";case b:return"Suspense";case _:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case p:return(x.displayName||"Context")+".Consumer";case d:return(x._context.displayName||"Context")+".Provider";case v:var w=x.render;return x=x.displayName,x||(x=w.displayName||w.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case M:return w=x.displayName||null,w!==null?w:D(x.type)||"Memo";case E:w=x._payload,x=x._init;try{return D(x(w))}catch{}}return null}function k(x){var w=x.type;switch(x.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=w.render,x=x.displayName||x.name||"",w.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(w);case 8:return w===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function G(x){var w=x,B=x;if(x.alternate)for(;w.return;)w=w.return;else{x=w;do w=x,w.flags&4098&&(B=w.return),x=w.return;while(x)}return w.tag===3?B:null}function O(x){if(G(x)!==x)throw Error(o(188))}function U(x){var w=x.alternate;if(!w){if(w=G(x),w===null)throw Error(o(188));return w!==x?null:x}for(var B=x,F=w;;){var H=B.return;if(H===null)break;var $=H.alternate;if($===null){if(F=H.return,F!==null){B=F;continue}break}if(H.child===$.child){for($=H.child;$;){if($===B)return O(H),x;if($===F)return O(H),w;$=$.sibling}throw Error(o(188))}if(B.return!==F.return)B=H,F=$;else{for(var de=!1,Ce=H.child;Ce;){if(Ce===B){de=!0,B=H,F=$;break}if(Ce===F){de=!0,F=H,B=$;break}Ce=Ce.sibling}if(!de){for(Ce=$.child;Ce;){if(Ce===B){de=!0,B=$,F=H;break}if(Ce===F){de=!0,F=$,B=H;break}Ce=Ce.sibling}if(!de)throw Error(o(189))}}if(B.alternate!==F)throw Error(o(190))}if(B.tag!==3)throw Error(o(188));return B.stateNode.current===B?x:w}function Q(x){return x=U(x),x!==null?X(x):null}function X(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var w=X(x);if(w!==null)return w;x=x.sibling}return null}function ee(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){if(x.tag!==4){var w=ee(x);if(w!==null)return w}x=x.sibling}return null}var K=Array.isArray,Z=e.getPublicInstance,he=e.getRootHostContext,j=e.getChildHostContext,ie=e.prepareForCommit,ae=e.resetAfterCommit,pe=e.createInstance,Pe=e.appendInitialChild,He=e.finalizeInitialChildren,Se=e.prepareUpdate,Oe=e.shouldSetTextContent,Ye=e.createTextInstance,it=e.scheduleTimeout,Ct=e.cancelTimeout,qt=e.noTimeout,xt=e.isPrimaryRenderer,yt=e.supportsMutation,Qe=e.supportsPersistence,ce=e.supportsHydration,dt=e.getInstanceFromNode,pt=e.preparePortalMount,ut=e.getCurrentEventPriority,ft=e.detachDeletedInstance,Wt=e.supportsMicrotasks,Rt=e.scheduleMicrotask,fe=e.supportsTestSelectors,te=e.findFiberRoot,De=e.getBoundingRect,Te=e.getTextContent,Fe=e.isHiddenSubtree,We=e.matchAccessibilityRole,Bt=e.setFocusIfFocusable,ct=e.setupIntersectionObserver,Ft=e.appendChild,vn=e.appendChildToContainer,At=e.commitTextUpdate,zt=e.commitMount,hn=e.commitUpdate,an=e.insertBefore,Vt=e.insertInContainerBefore,Me=e.removeChild,Ze=e.removeChildFromContainer,Nt=e.resetTextContent,ye=e.hideInstance,wt=e.hideTextInstance,$e=e.unhideInstance,at=e.unhideTextInstance,jt=e.clearContainer,Le=e.cloneInstance,_n=e.createContainerChildSet,li=e.appendChildToContainerChildSet,ar=e.finalizeContainerChildren,kn=e.replaceContainerChildren,qi=e.cloneHiddenInstance,es=e.cloneHiddenTextInstance,nA=e.canHydrateInstance,iA=e.canHydrateTextInstance,Ma=e.canHydrateSuspenseInstance,Pc=e.isSuspenseInstancePending,Ta=e.isSuspenseInstanceFallback,Ue=e.registerSuspenseInstanceRetry,tt=e.getNextHydratableSibling,Et=e.getFirstHydratableChild,sn=e.getFirstHydratableChildWithinContainer,g=e.getFirstHydratableChildWithinSuspenseInstance,le=e.hydrateInstance,Jn=e.hydrateTextInstance,pi=e.hydrateSuspenseInstance,Br=e.getNextHydratableInstanceAfterSuspenseInstance,re=e.commitHydratedContainer,xe=e.commitHydratedSuspenseInstance,qe=e.clearSuspenseBoundary,Ne=e.clearSuspenseBoundaryFromContainer,ve=e.shouldDeleteUnhydratedTailInstances,mt=e.didNotMatchHydratedContainerTextInstance,Gt=e.didNotMatchHydratedTextInstance,Jt;function Qt(x){if(Jt===void 0)try{throw Error()}catch(B){var w=B.stack.trim().match(/\n( *(at )?)/);Jt=w&&w[1]||""}return`
`+Jt+x}var nn=!1;function ln(x,w){if(!x||nn)return"";nn=!0;var B=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(St){var F=St}Reflect.construct(x,[],w)}else{try{w.call()}catch(St){F=St}x.call(w.prototype)}else{try{throw Error()}catch(St){F=St}x()}}catch(St){if(St&&F&&typeof St.stack=="string"){for(var H=St.stack.split(`
`),$=F.stack.split(`
`),de=H.length-1,Ce=$.length-1;1<=de&&0<=Ce&&H[de]!==$[Ce];)Ce--;for(;1<=de&&0<=Ce;de--,Ce--)if(H[de]!==$[Ce]){if(de!==1||Ce!==1)do if(de--,Ce--,0>Ce||H[de]!==$[Ce]){var et=`
`+H[de].replace(" at new "," at ");return x.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",x.displayName)),et}while(1<=de&&0<=Ce);break}}}finally{nn=!1,Error.prepareStackTrace=B}return(x=x?x.displayName||x.name:"")?Qt(x):""}var Kt=Object.prototype.hasOwnProperty,ni=[],Ai=-1;function Xn(x){return{current:x}}function Dt(x){0>Ai||(x.current=ni[Ai],ni[Ai]=null,Ai--)}function se(x,w){Ai++,ni[Ai]=x.current,x.current=w}var lt={},ii=Xn(lt),wn=Xn(!1),Vr=lt;function Xo(x,w){var B=x.type.contextTypes;if(!B)return lt;var F=x.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===w)return F.__reactInternalMemoizedMaskedChildContext;var H={},$;for($ in B)H[$]=w[$];return F&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=w,x.__reactInternalMemoizedMaskedChildContext=H),H}function Ei(x){return x=x.childContextTypes,x!=null}function oe(){Dt(wn),Dt(ii)}function Wi(x,w,B){if(ii.current!==lt)throw Error(o(168));se(ii,w),se(wn,B)}function cl(x,w,B){var F=x.stateNode;if(w=w.childContextTypes,typeof F.getChildContext!="function")return B;F=F.getChildContext();for(var H in F)if(!(H in w))throw Error(o(108,k(x)||"Unknown",H));return s({},B,F)}function Bc(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||lt,Vr=ii.current,se(ii,x),se(wn,wn.current),!0}function Xs(x,w,B){var F=x.stateNode;if(!F)throw Error(o(169));B?(x=cl(x,w,Vr),F.__reactInternalMemoizedMergedChildContext=x,Dt(wn),Dt(ii),se(ii,x)):Dt(wn),se(wn,B)}var Ys=Math.clz32?Math.clz32:Fb,dv=Math.log,rA=Math.LN2;function Fb(x){return x>>>=0,x===0?32:31-(dv(x)/rA|0)|0}var sA=64,Ea=4194304;function lr(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function nd(x,w){var B=x.pendingLanes;if(B===0)return 0;var F=0,H=x.suspendedLanes,$=x.pingedLanes,de=B&268435455;if(de!==0){var Ce=de&~H;Ce!==0?F=lr(Ce):($&=de,$!==0&&(F=lr($)))}else de=B&~H,de!==0?F=lr(de):$!==0&&(F=lr($));if(F===0)return 0;if(w!==0&&w!==F&&!(w&H)&&(H=F&-F,$=w&-w,H>=$||H===16&&($&4194240)!==0))return w;if(F&4&&(F|=B&16),w=x.entangledLanes,w!==0)for(x=x.entanglements,w&=F;0<w;)B=31-Ys(w),H=1<<B,F|=x[B],w&=~H;return F}function h5(x,w){switch(x){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f5(x,w){for(var B=x.suspendedLanes,F=x.pingedLanes,H=x.expirationTimes,$=x.pendingLanes;0<$;){var de=31-Ys($),Ce=1<<de,et=H[de];et===-1?(!(Ce&B)||Ce&F)&&(H[de]=h5(Ce,w)):et<=w&&(x.expiredLanes|=Ce),$&=~Ce}}function xm(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function pv(x){for(var w=[],B=0;31>B;B++)w.push(x);return w}function oA(x,w,B){x.pendingLanes|=w,w!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,w=31-Ys(w),x[w]=B}function d5(x,w){var B=x.pendingLanes&~w;x.pendingLanes=w,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=w,x.mutableReadLanes&=w,x.entangledLanes&=w,w=x.entanglements;var F=x.eventTimes;for(x=x.expirationTimes;0<B;){var H=31-Ys(B),$=1<<H;w[H]=0,F[H]=-1,x[H]=-1,B&=~$}}function Ci(x,w){var B=x.entangledLanes|=w;for(x=x.entanglements;B;){var F=31-Ys(B),H=1<<F;H&w|x[F]&w&&(x[F]|=w),B&=~H}}var ui=0;function Av(x){return x&=-x,1<x?4<x?x&268435455?16:536870912:4:1}var mv=r.unstable_scheduleCallback,kb=r.unstable_cancelCallback,p5=r.unstable_shouldYield,Ub=r.unstable_requestPaint,Ir=r.unstable_now,aA=r.unstable_ImmediatePriority,A5=r.unstable_UserBlockingPriority,gv=r.unstable_NormalPriority,zb=r.unstable_IdlePriority,lA=null,hl=null;function m5(x){if(hl&&typeof hl.onCommitFiberRoot=="function")try{hl.onCommitFiberRoot(lA,x,void 0,(x.current.flags&128)===128)}catch{}}function g5(x,w){return x===w&&(x!==0||1/x===1/w)||x!==x&&w!==w}var tu=typeof Object.is=="function"?Object.is:g5,Xi=null,nu=!1,xs=!1;function bm(x){Xi===null?Xi=[x]:Xi.push(x)}function Gb(x){nu=!0,bm(x)}function Yo(){if(!xs&&Xi!==null){xs=!0;var x=0,w=ui;try{var B=Xi;for(ui=1;x<B.length;x++){var F=B[x];do F=F(!0);while(F!==null)}Xi=null,nu=!1}catch(H){throw Xi!==null&&(Xi=Xi.slice(x+1)),mv(aA,Yo),H}finally{ui=w,xs=!1}}return null}var y5=a.ReactCurrentBatchConfig;function wm(x,w){if(tu(x,w))return!0;if(typeof x!="object"||x===null||typeof w!="object"||w===null)return!1;var B=Object.keys(x),F=Object.keys(w);if(B.length!==F.length)return!1;for(F=0;F<B.length;F++){var H=B[F];if(!Kt.call(w,H)||!tu(x[H],w[H]))return!1}return!0}function v5(x){switch(x.tag){case 5:return Qt(x.type);case 16:return Qt("Lazy");case 13:return Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 2:case 15:return x=ln(x.type,!1),x;case 11:return x=ln(x.type.render,!1),x;case 1:return x=ln(x.type,!0),x;default:return""}}function Ca(x,w){if(x&&x.defaultProps){w=s({},w),x=x.defaultProps;for(var B in x)w[B]===void 0&&(w[B]=x[B]);return w}return w}var Mh=Xn(null),iu=null,Th=null,Sm=null;function id(){Sm=Th=iu=null}function Ic(x,w,B){xt?(se(Mh,w._currentValue),w._currentValue=B):(se(Mh,w._currentValue2),w._currentValue2=B)}function ru(x){var w=Mh.current;Dt(Mh),xt?x._currentValue=w:x._currentValue2=w}function Mm(x,w,B){for(;x!==null;){var F=x.alternate;if((x.childLanes&w)!==w?(x.childLanes|=w,F!==null&&(F.childLanes|=w)):F!==null&&(F.childLanes&w)!==w&&(F.childLanes|=w),x===B)break;x=x.return}}function Eh(x,w){iu=x,Sm=Th=null,x=x.dependencies,x!==null&&x.firstContext!==null&&(x.lanes&w&&(ts=!0),x.firstContext=null)}function yo(x){var w=xt?x._currentValue:x._currentValue2;if(Sm!==x)if(x={context:x,memoizedValue:w,next:null},Th===null){if(iu===null)throw Error(o(308));Th=x,iu.dependencies={lanes:0,firstContext:x}}else Th=Th.next=x;return w}var su=null,Nc=!1;function Tm(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hb(x,w){x=x.updateQueue,w.updateQueue===x&&(w.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function zu(x,w){return{eventTime:x,lane:w,tag:0,payload:null,callback:null,next:null}}function Dc(x,w){var B=x.updateQueue;B!==null&&(B=B.shared,ns!==null&&x.mode&1&&!(Yn&2)?(x=B.interleaved,x===null?(w.next=w,su===null?su=[B]:su.push(B)):(w.next=x.next,x.next=w),B.interleaved=w):(x=B.pending,x===null?w.next=w:(w.next=x.next,x.next=w),B.pending=w))}function Em(x,w,B){if(w=w.updateQueue,w!==null&&(w=w.shared,(B&4194240)!==0)){var F=w.lanes;F&=x.pendingLanes,B|=F,w.lanes=B,Ci(x,B)}}function qb(x,w){var B=x.updateQueue,F=x.alternate;if(F!==null&&(F=F.updateQueue,B===F)){var H=null,$=null;if(B=B.firstBaseUpdate,B!==null){do{var de={eventTime:B.eventTime,lane:B.lane,tag:B.tag,payload:B.payload,callback:B.callback,next:null};$===null?H=$=de:$=$.next=de,B=B.next}while(B!==null);$===null?H=$=w:$=$.next=w}else H=$=w;B={baseState:F.baseState,firstBaseUpdate:H,lastBaseUpdate:$,shared:F.shared,effects:F.effects},x.updateQueue=B;return}x=B.lastBaseUpdate,x===null?B.firstBaseUpdate=w:x.next=w,B.lastBaseUpdate=w}function Cm(x,w,B,F){var H=x.updateQueue;Nc=!1;var $=H.firstBaseUpdate,de=H.lastBaseUpdate,Ce=H.shared.pending;if(Ce!==null){H.shared.pending=null;var et=Ce,St=et.next;et.next=null,de===null?$=St:de.next=St,de=et;var en=x.alternate;en!==null&&(en=en.updateQueue,Ce=en.lastBaseUpdate,Ce!==de&&(Ce===null?en.firstBaseUpdate=St:Ce.next=St,en.lastBaseUpdate=et))}if($!==null){var Dn=H.baseState;de=0,en=St=et=null,Ce=$;do{var dn=Ce.lane,Vi=Ce.eventTime;if((F&dn)===dn){en!==null&&(en=en.next={eventTime:Vi,lane:0,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null});e:{var un=x,bo=Ce;switch(dn=w,Vi=B,bo.tag){case 1:if(un=bo.payload,typeof un=="function"){Dn=un.call(Vi,Dn,dn);break e}Dn=un;break e;case 3:un.flags=un.flags&-65537|128;case 0:if(un=bo.payload,dn=typeof un=="function"?un.call(Vi,Dn,dn):un,dn==null)break e;Dn=s({},Dn,dn);break e;case 2:Nc=!0}}Ce.callback!==null&&Ce.lane!==0&&(x.flags|=64,dn=H.effects,dn===null?H.effects=[Ce]:dn.push(Ce))}else Vi={eventTime:Vi,lane:dn,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},en===null?(St=en=Vi,et=Dn):en=en.next=Vi,de|=dn;if(Ce=Ce.next,Ce===null){if(Ce=H.shared.pending,Ce===null)break;dn=Ce,Ce=dn.next,dn.next=null,H.lastBaseUpdate=dn,H.shared.pending=null}}while(!0);if(en===null&&(et=Dn),H.baseState=et,H.firstBaseUpdate=St,H.lastBaseUpdate=en,w=H.shared.interleaved,w!==null){H=w;do de|=H.lane,H=H.next;while(H!==w)}else $===null&&(H.shared.lanes=0);qm|=de,x.lanes=de,x.memoizedState=Dn}}function Vb(x,w,B){if(x=w.effects,w.effects=null,x!==null)for(w=0;w<x.length;w++){var F=x[w],H=F.callback;if(H!==null){if(F.callback=null,F=B,typeof H!="function")throw Error(o(191,H));H.call(F)}}}var jb=new n.Component().refs;function rd(x,w,B,F){w=x.memoizedState,B=B(F,w),B=B==null?w:s({},w,B),x.memoizedState=B,x.lanes===0&&(x.updateQueue.baseState=B)}var Rm={isMounted:function(x){return(x=x._reactInternals)?G(x)===x:!1},enqueueSetState:function(x,w,B){x=x._reactInternals;var F=ea(),H=vd(x),$=zu(F,H);$.payload=w,B!=null&&($.callback=B),Dc(x,$),w=cu(x,H,F),w!==null&&Em(w,x,H)},enqueueReplaceState:function(x,w,B){x=x._reactInternals;var F=ea(),H=vd(x),$=zu(F,H);$.tag=1,$.payload=w,B!=null&&($.callback=B),Dc(x,$),w=cu(x,H,F),w!==null&&Em(w,x,H)},enqueueForceUpdate:function(x,w){x=x._reactInternals;var B=ea(),F=vd(x),H=zu(B,F);H.tag=2,w!=null&&(H.callback=w),Dc(x,H),w=cu(x,F,B),w!==null&&Em(w,x,F)}};function $b(x,w,B,F,H,$,de){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(F,$,de):w.prototype&&w.prototype.isPureReactComponent?!wm(B,F)||!wm(H,$):!0}function Wb(x,w,B){var F=!1,H=lt,$=w.contextType;return typeof $=="object"&&$!==null?$=yo($):(H=Ei(w)?Vr:ii.current,F=w.contextTypes,$=(F=F!=null)?Xo(x,H):lt),w=new w(B,$),x.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Rm,x.stateNode=w,w._reactInternals=x,F&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=H,x.__reactInternalMemoizedMaskedChildContext=$),w}function sd(x,w,B,F){x=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(B,F),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(B,F),w.state!==x&&Rm.enqueueReplaceState(w,w.state,null)}function yv(x,w,B,F){var H=x.stateNode;H.props=B,H.state=x.memoizedState,H.refs=jb,Tm(x);var $=w.contextType;typeof $=="object"&&$!==null?H.context=yo($):($=Ei(w)?Vr:ii.current,H.context=Xo(x,$)),H.state=x.memoizedState,$=w.getDerivedStateFromProps,typeof $=="function"&&(rd(x,w,$,B),H.state=x.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(w=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),w!==H.state&&Rm.enqueueReplaceState(H,H.state,null),Cm(x,B,H,F),H.state=x.memoizedState),typeof H.componentDidMount=="function"&&(x.flags|=4194308)}var Lc=[],Ch=0,Gu=null,Pm=0,vo=[],Qo=0,Rh=null,ou=1,fl="";function Hu(x,w){Lc[Ch++]=Pm,Lc[Ch++]=Gu,Gu=x,Pm=w}function uA(x,w,B){vo[Qo++]=ou,vo[Qo++]=fl,vo[Qo++]=Rh,Rh=x;var F=ou;x=fl;var H=32-Ys(F)-1;F&=~(1<<H),B+=1;var $=32-Ys(w)+H;if(30<$){var de=H-H%5;$=(F&(1<<de)-1).toString(32),F>>=de,H-=de,ou=1<<32-Ys(w)+H|B<<H|F,fl=$+x}else ou=1<<$|B<<H|F,fl=x}function Ri(x){x.return!==null&&(Hu(x,1),uA(x,1,0))}function vv(x){for(;x===Gu;)Gu=Lc[--Ch],Lc[Ch]=null,Pm=Lc[--Ch],Lc[Ch]=null;for(;x===Rh;)Rh=vo[--Qo],vo[Qo]=null,fl=vo[--Qo],vo[Qo]=null,ou=vo[--Qo],vo[Qo]=null}var Ko=null,Jo=null,Yi=!1,cA=!1,dl=null;function Xb(x,w){var B=hu(5,null,null,0);B.elementType="DELETED",B.stateNode=w,B.return=x,w=x.deletions,w===null?(x.deletions=[B],x.flags|=16):w.push(B)}function Qs(x,w){switch(x.tag){case 5:return w=nA(w,x.type,x.pendingProps),w!==null?(x.stateNode=w,Ko=x,Jo=Et(w),!0):!1;case 6:return w=iA(w,x.pendingProps),w!==null?(x.stateNode=w,Ko=x,Jo=null,!0):!1;case 13:if(w=Ma(w),w!==null){var B=Rh!==null?{id:ou,overflow:fl}:null;return x.memoizedState={dehydrated:w,treeContext:B,retryLane:1073741824},B=hu(18,null,null,0),B.stateNode=w,B.return=x,x.child=B,Ko=x,Jo=null,!0}return!1;default:return!1}}function hA(x){return(x.mode&1)!==0&&(x.flags&128)===0}function qu(x){if(Yi){var w=Jo;if(w){var B=w;if(!Qs(x,w)){if(hA(x))throw Error(o(418));w=tt(B);var F=Ko;w&&Qs(x,w)?Xb(F,B):(x.flags=x.flags&-4097|2,Yi=!1,Ko=x)}}else{if(hA(x))throw Error(o(418));x.flags=x.flags&-4097|2,Yi=!1,Ko=x}}}function Yb(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;Ko=x}function Ph(x){if(!ce||x!==Ko)return!1;if(!Yi)return Yb(x),Yi=!0,!1;if(x.tag!==3&&(x.tag!==5||ve(x.type)&&!Oe(x.type,x.memoizedProps))){var w=Jo;if(w){if(hA(x)){for(x=Jo;x;)x=tt(x);throw Error(o(418))}for(;w;)Xb(x,w),w=tt(w)}}if(Yb(x),x.tag===13){if(!ce)throw Error(o(316));if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));Jo=Br(x)}else Jo=Ko?tt(x.stateNode):null;return!0}function od(){ce&&(Jo=Ko=null,cA=Yi=!1)}function _o(x){dl===null?dl=[x]:dl.push(x)}function ad(x,w,B){if(x=B.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(B._owner){if(B=B._owner,B){if(B.tag!==1)throw Error(o(309));var F=B.stateNode}if(!F)throw Error(o(147,x));var H=F,$=""+x;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===$?w.ref:(w=function(de){var Ce=H.refs;Ce===jb&&(Ce=H.refs={}),de===null?delete Ce[$]:Ce[$]=de},w._stringRef=$,w)}if(typeof x!="string")throw Error(o(284));if(!B._owner)throw Error(o(290,x))}return x}function ld(x,w){throw x=Object.prototype.toString.call(w),Error(o(31,x==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":x))}function Bh(x){var w=x._init;return w(x._payload)}function ud(x){function w(Ve,Ie){if(x){var Xe=Ve.deletions;Xe===null?(Ve.deletions=[Ie],Ve.flags|=16):Xe.push(Ie)}}function B(Ve,Ie){if(!x)return null;for(;Ie!==null;)w(Ve,Ie),Ie=Ie.sibling;return null}function F(Ve,Ie){for(Ve=new Map;Ie!==null;)Ie.key!==null?Ve.set(Ie.key,Ie):Ve.set(Ie.index,Ie),Ie=Ie.sibling;return Ve}function H(Ve,Ie){return Ve=xd(Ve,Ie),Ve.index=0,Ve.sibling=null,Ve}function $(Ve,Ie,Xe){return Ve.index=Xe,x?(Xe=Ve.alternate,Xe!==null?(Xe=Xe.index,Xe<Ie?(Ve.flags|=2,Ie):Xe):(Ve.flags|=2,Ie)):(Ve.flags|=1048576,Ie)}function de(Ve){return x&&Ve.alternate===null&&(Ve.flags|=2),Ve}function Ce(Ve,Ie,Xe,Xt){return Ie===null||Ie.tag!==6?(Ie=U5(Xe,Ve.mode,Xt),Ie.return=Ve,Ie):(Ie=H(Ie,Xe),Ie.return=Ve,Ie)}function et(Ve,Ie,Xe,Xt){var on=Xe.type;return on===c?en(Ve,Ie,Xe.props.children,Xt,Xe.key):Ie!==null&&(Ie.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===E&&Bh(on)===Ie.type)?(Xt=H(Ie,Xe.props),Xt.ref=ad(Ve,Ie,Xe),Xt.return=Ve,Xt):(Xt=Bw(Xe.type,Xe.key,Xe.props,null,Ve.mode,Xt),Xt.ref=ad(Ve,Ie,Xe),Xt.return=Ve,Xt)}function St(Ve,Ie,Xe,Xt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Xe.containerInfo||Ie.stateNode.implementation!==Xe.implementation?(Ie=z5(Xe,Ve.mode,Xt),Ie.return=Ve,Ie):(Ie=H(Ie,Xe.children||[]),Ie.return=Ve,Ie)}function en(Ve,Ie,Xe,Xt,on){return Ie===null||Ie.tag!==7?(Ie=bA(Xe,Ve.mode,Xt,on),Ie.return=Ve,Ie):(Ie=H(Ie,Xe),Ie.return=Ve,Ie)}function Dn(Ve,Ie,Xe){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Ie=U5(""+Ie,Ve.mode,Xe),Ie.return=Ve,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case l:return Xe=Bw(Ie.type,Ie.key,Ie.props,null,Ve.mode,Xe),Xe.ref=ad(Ve,null,Ie),Xe.return=Ve,Xe;case u:return Ie=z5(Ie,Ve.mode,Xe),Ie.return=Ve,Ie;case E:var Xt=Ie._init;return Dn(Ve,Xt(Ie._payload),Xe)}if(K(Ie)||I(Ie))return Ie=bA(Ie,Ve.mode,Xe,null),Ie.return=Ve,Ie;ld(Ve,Ie)}return null}function dn(Ve,Ie,Xe,Xt){var on=Ie!==null?Ie.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return on!==null?null:Ce(Ve,Ie,""+Xe,Xt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case l:return Xe.key===on?et(Ve,Ie,Xe,Xt):null;case u:return Xe.key===on?St(Ve,Ie,Xe,Xt):null;case E:return on=Xe._init,dn(Ve,Ie,on(Xe._payload),Xt)}if(K(Xe)||I(Xe))return on!==null?null:en(Ve,Ie,Xe,Xt,null);ld(Ve,Xe)}return null}function Vi(Ve,Ie,Xe,Xt,on){if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number")return Ve=Ve.get(Xe)||null,Ce(Ie,Ve,""+Xt,on);if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case l:return Ve=Ve.get(Xt.key===null?Xe:Xt.key)||null,et(Ie,Ve,Xt,on);case u:return Ve=Ve.get(Xt.key===null?Xe:Xt.key)||null,St(Ie,Ve,Xt,on);case E:var $n=Xt._init;return Vi(Ve,Ie,Xe,$n(Xt._payload),on)}if(K(Xt)||I(Xt))return Ve=Ve.get(Xe)||null,en(Ie,Ve,Xt,on,null);ld(Ie,Xt)}return null}function un(Ve,Ie,Xe,Xt){for(var on=null,$n=null,Ln=Ie,bi=Ie=0,Fs=null;Ln!==null&&bi<Xe.length;bi++){Ln.index>bi?(Fs=Ln,Ln=null):Fs=Ln.sibling;var wi=dn(Ve,Ln,Xe[bi],Xt);if(wi===null){Ln===null&&(Ln=Fs);break}x&&Ln&&wi.alternate===null&&w(Ve,Ln),Ie=$(wi,Ie,bi),$n===null?on=wi:$n.sibling=wi,$n=wi,Ln=Fs}if(bi===Xe.length)return B(Ve,Ln),Yi&&Hu(Ve,bi),on;if(Ln===null){for(;bi<Xe.length;bi++)Ln=Dn(Ve,Xe[bi],Xt),Ln!==null&&(Ie=$(Ln,Ie,bi),$n===null?on=Ln:$n.sibling=Ln,$n=Ln);return Yi&&Hu(Ve,bi),on}for(Ln=F(Ve,Ln);bi<Xe.length;bi++)Fs=Vi(Ln,Ve,bi,Xe[bi],Xt),Fs!==null&&(x&&Fs.alternate!==null&&Ln.delete(Fs.key===null?bi:Fs.key),Ie=$(Fs,Ie,bi),$n===null?on=Fs:$n.sibling=Fs,$n=Fs);return x&&Ln.forEach(function(bd){return w(Ve,bd)}),Yi&&Hu(Ve,bi),on}function bo(Ve,Ie,Xe,Xt){var on=I(Xe);if(typeof on!="function")throw Error(o(150));if(Xe=on.call(Xe),Xe==null)throw Error(o(151));for(var $n=on=null,Ln=Ie,bi=Ie=0,Fs=null,wi=Xe.next();Ln!==null&&!wi.done;bi++,wi=Xe.next()){Ln.index>bi?(Fs=Ln,Ln=null):Fs=Ln.sibling;var bd=dn(Ve,Ln,wi.value,Xt);if(bd===null){Ln===null&&(Ln=Fs);break}x&&Ln&&bd.alternate===null&&w(Ve,Ln),Ie=$(bd,Ie,bi),$n===null?on=bd:$n.sibling=bd,$n=bd,Ln=Fs}if(wi.done)return B(Ve,Ln),Yi&&Hu(Ve,bi),on;if(Ln===null){for(;!wi.done;bi++,wi=Xe.next())wi=Dn(Ve,wi.value,Xt),wi!==null&&(Ie=$(wi,Ie,bi),$n===null?on=wi:$n.sibling=wi,$n=wi);return Yi&&Hu(Ve,bi),on}for(Ln=F(Ve,Ln);!wi.done;bi++,wi=Xe.next())wi=Vi(Ln,Ve,bi,wi.value,Xt),wi!==null&&(x&&wi.alternate!==null&&Ln.delete(wi.key===null?bi:wi.key),Ie=$(wi,Ie,bi),$n===null?on=wi:$n.sibling=wi,$n=wi);return x&&Ln.forEach(function(Kre){return w(Ve,Kre)}),Yi&&Hu(Ve,bi),on}function fu(Ve,Ie,Xe,Xt){if(typeof Xe=="object"&&Xe!==null&&Xe.type===c&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case l:e:{for(var on=Xe.key,$n=Ie;$n!==null;){if($n.key===on){if(on=Xe.type,on===c){if($n.tag===7){B(Ve,$n.sibling),Ie=H($n,Xe.props.children),Ie.return=Ve,Ve=Ie;break e}}else if($n.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===E&&Bh(on)===$n.type){B(Ve,$n.sibling),Ie=H($n,Xe.props),Ie.ref=ad(Ve,$n,Xe),Ie.return=Ve,Ve=Ie;break e}B(Ve,$n);break}else w(Ve,$n);$n=$n.sibling}Xe.type===c?(Ie=bA(Xe.props.children,Ve.mode,Xt,Xe.key),Ie.return=Ve,Ve=Ie):(Xt=Bw(Xe.type,Xe.key,Xe.props,null,Ve.mode,Xt),Xt.ref=ad(Ve,Ie,Xe),Xt.return=Ve,Ve=Xt)}return de(Ve);case u:e:{for($n=Xe.key;Ie!==null;){if(Ie.key===$n)if(Ie.tag===4&&Ie.stateNode.containerInfo===Xe.containerInfo&&Ie.stateNode.implementation===Xe.implementation){B(Ve,Ie.sibling),Ie=H(Ie,Xe.children||[]),Ie.return=Ve,Ve=Ie;break e}else{B(Ve,Ie);break}else w(Ve,Ie);Ie=Ie.sibling}Ie=z5(Xe,Ve.mode,Xt),Ie.return=Ve,Ve=Ie}return de(Ve);case E:return $n=Xe._init,fu(Ve,Ie,$n(Xe._payload),Xt)}if(K(Xe))return un(Ve,Ie,Xe,Xt);if(I(Xe))return bo(Ve,Ie,Xe,Xt);ld(Ve,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"?(Xe=""+Xe,Ie!==null&&Ie.tag===6?(B(Ve,Ie.sibling),Ie=H(Ie,Xe),Ie.return=Ve,Ve=Ie):(B(Ve,Ie),Ie=U5(Xe,Ve.mode,Xt),Ie.return=Ve,Ve=Ie),de(Ve)):B(Ve,Ie)}return fu}var au=ud(!0),Qb=ud(!1),cd={},Ra=Xn(cd),Ih=Xn(cd),hd=Xn(cd);function lu(x){if(x===cd)throw Error(o(174));return x}function Bm(x,w){se(hd,w),se(Ih,x),se(Ra,cd),x=he(w),Dt(Ra),se(Ra,x)}function Nh(){Dt(Ra),Dt(Ih),Dt(hd)}function fd(x){var w=lu(hd.current),B=lu(Ra.current);w=j(B,x.type,w),B!==w&&(se(Ih,x),se(Ra,w))}function Oc(x){Ih.current===x&&(Dt(Ra),Dt(Ih))}var er=Xn(0);function Fc(x){for(var w=x;w!==null;){if(w.tag===13){var B=w.memoizedState;if(B!==null&&(B=B.dehydrated,B===null||Pc(B)||Ta(B)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if(w.flags&128)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===x)break;for(;w.sibling===null;){if(w.return===null||w.return===x)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var _v=[];function xv(){for(var x=0;x<_v.length;x++){var w=_v[x];xt?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}_v.length=0}var Im=a.ReactCurrentDispatcher,Pa=a.ReactCurrentBatchConfig,dd=0,ur=null,Is=null,Nr=null,fA=!1,Dh=!1,dA=0,_5=0;function Ns(){throw Error(o(321))}function bv(x,w){if(w===null)return!1;for(var B=0;B<w.length&&B<x.length;B++)if(!tu(x[B],w[B]))return!1;return!0}function wv(x,w,B,F,H,$){if(dd=$,ur=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,Im.current=x===null||x.memoizedState===null?b5:hw,x=B(F,H),Dh){$=0;do{if(Dh=!1,dA=0,25<=$)throw Error(o(301));$+=1,Nr=Is=null,w.updateQueue=null,Im.current=fw,x=B(F,H)}while(Dh)}if(Im.current=Lm,w=Is!==null&&Is.next!==null,dd=0,Nr=Is=ur=null,fA=!1,w)throw Error(o(300));return x}function Sv(){var x=dA!==0;return dA=0,x}function Vu(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nr===null?ur.memoizedState=Nr=x:Nr=Nr.next=x,Nr}function pl(){if(Is===null){var x=ur.alternate;x=x!==null?x.memoizedState:null}else x=Is.next;var w=Nr===null?ur.memoizedState:Nr.next;if(w!==null)Nr=w,Is=x;else{if(x===null)throw Error(o(310));Is=x,x={memoizedState:Is.memoizedState,baseState:Is.baseState,baseQueue:Is.baseQueue,queue:Is.queue,next:null},Nr===null?ur.memoizedState=Nr=x:Nr=Nr.next=x}return Nr}function Lh(x,w){return typeof w=="function"?w(x):w}function pA(x){var w=pl(),B=w.queue;if(B===null)throw Error(o(311));B.lastRenderedReducer=x;var F=Is,H=F.baseQueue,$=B.pending;if($!==null){if(H!==null){var de=H.next;H.next=$.next,$.next=de}F.baseQueue=H=$,B.pending=null}if(H!==null){$=H.next,F=F.baseState;var Ce=de=null,et=null,St=$;do{var en=St.lane;if((dd&en)===en)et!==null&&(et=et.next={lane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),F=St.hasEagerState?St.eagerState:x(F,St.action);else{var Dn={lane:en,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null};et===null?(Ce=et=Dn,de=F):et=et.next=Dn,ur.lanes|=en,qm|=en}St=St.next}while(St!==null&&St!==$);et===null?de=F:et.next=Ce,tu(F,w.memoizedState)||(ts=!0),w.memoizedState=F,w.baseState=de,w.baseQueue=et,B.lastRenderedState=F}if(x=B.interleaved,x!==null){H=x;do $=H.lane,ur.lanes|=$,qm|=$,H=H.next;while(H!==x)}else H===null&&(B.lanes=0);return[w.memoizedState,B.dispatch]}function Ba(x){var w=pl(),B=w.queue;if(B===null)throw Error(o(311));B.lastRenderedReducer=x;var F=B.dispatch,H=B.pending,$=w.memoizedState;if(H!==null){B.pending=null;var de=H=H.next;do $=x($,de.action),de=de.next;while(de!==H);tu($,w.memoizedState)||(ts=!0),w.memoizedState=$,w.baseQueue===null&&(w.baseState=$),B.lastRenderedState=$}return[$,F]}function Mv(){}function Kb(x,w){var B=ur,F=pl(),H=w(),$=!tu(F.memoizedState,H);if($&&(F.memoizedState=H,ts=!0),F=F.queue,AA(ew.bind(null,B,F,x),[x]),F.getSnapshot!==w||$||Nr!==null&&Nr.memoizedState.tag&1){if(B.flags|=2048,pd(9,Zb.bind(null,B,F,H,w),void 0,null),ns===null)throw Error(o(349));dd&30||Jb(B,w,H)}return H}function Jb(x,w,B){x.flags|=16384,x={getSnapshot:w,value:B},w=ur.updateQueue,w===null?(w={lastEffect:null,stores:null},ur.updateQueue=w,w.stores=[x]):(B=w.stores,B===null?w.stores=[x]:B.push(x))}function Zb(x,w,B,F){w.value=B,w.getSnapshot=F,tw(w)&&cu(x,1,-1)}function ew(x,w,B){return B(function(){tw(w)&&cu(x,1,-1)})}function tw(x){var w=x.getSnapshot;x=x.value;try{var B=w();return!tu(x,B)}catch{return!0}}function uu(x){var w=Vu();return typeof x=="function"&&(x=x()),w.memoizedState=w.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lh,lastRenderedState:x},w.queue=x,x=x.dispatch=x5.bind(null,ur,x),[w.memoizedState,x]}function pd(x,w,B,F){return x={tag:x,create:w,destroy:B,deps:F,next:null},w=ur.updateQueue,w===null?(w={lastEffect:null,stores:null},ur.updateQueue=w,w.lastEffect=x.next=x):(B=w.lastEffect,B===null?w.lastEffect=x.next=x:(F=B.next,B.next=x,x.next=F,w.lastEffect=x)),x}function Tv(){return pl().memoizedState}function Nm(x,w,B,F){var H=Vu();ur.flags|=x,H.memoizedState=pd(1|w,B,void 0,F===void 0?null:F)}function Dm(x,w,B,F){var H=pl();F=F===void 0?null:F;var $=void 0;if(Is!==null){var de=Is.memoizedState;if($=de.destroy,F!==null&&bv(F,de.deps)){H.memoizedState=pd(w,B,$,F);return}}ur.flags|=x,H.memoizedState=pd(1|w,B,$,F)}function Ev(x,w){return Nm(8390656,8,x,w)}function AA(x,w){return Dm(2048,8,x,w)}function nw(x,w){return Dm(4,2,x,w)}function iw(x,w){return Dm(4,4,x,w)}function rw(x,w){if(typeof w=="function")return x=x(),w(x),function(){w(null)};if(w!=null)return x=x(),w.current=x,function(){w.current=null}}function sw(x,w,B){return B=B!=null?B.concat([x]):null,Dm(4,4,rw.bind(null,w,x),B)}function Cv(){}function ow(x,w){var B=pl();w=w===void 0?null:w;var F=B.memoizedState;return F!==null&&w!==null&&bv(w,F[1])?F[0]:(B.memoizedState=[x,w],x)}function aw(x,w){var B=pl();w=w===void 0?null:w;var F=B.memoizedState;return F!==null&&w!==null&&bv(w,F[1])?F[0]:(x=x(),B.memoizedState=[x,w],x)}function lw(x,w){var B=ui;ui=B!==0&&4>B?B:4,x(!0);var F=Pa.transition;Pa.transition={};try{x(!1),w()}finally{ui=B,Pa.transition=F}}function Rv(){return pl().memoizedState}function Dr(x,w,B){var F=vd(x);B={lane:F,action:B,hasEagerState:!1,eagerState:null,next:null},uw(x)?Ad(w,B):(Zo(x,w,B),B=ea(),x=cu(x,F,B),x!==null&&cw(x,w,F))}function x5(x,w,B){var F=vd(x),H={lane:F,action:B,hasEagerState:!1,eagerState:null,next:null};if(uw(x))Ad(w,H);else{Zo(x,w,H);var $=x.alternate;if(x.lanes===0&&($===null||$.lanes===0)&&($=w.lastRenderedReducer,$!==null))try{var de=w.lastRenderedState,Ce=$(de,B);if(H.hasEagerState=!0,H.eagerState=Ce,tu(Ce,de))return}catch{}finally{}B=ea(),x=cu(x,F,B),x!==null&&cw(x,w,F)}}function uw(x){var w=x.alternate;return x===ur||w!==null&&w===ur}function Ad(x,w){Dh=fA=!0;var B=x.pending;B===null?w.next=w:(w.next=B.next,B.next=w),x.pending=w}function Zo(x,w,B){ns!==null&&x.mode&1&&!(Yn&2)?(x=w.interleaved,x===null?(B.next=B,su===null?su=[w]:su.push(w)):(B.next=x.next,x.next=B),w.interleaved=B):(x=w.pending,x===null?B.next=B:(B.next=x.next,x.next=B),w.pending=B)}function cw(x,w,B){if(B&4194240){var F=w.lanes;F&=x.pendingLanes,B|=F,w.lanes=B,Ci(x,B)}}var Lm={readContext:yo,useCallback:Ns,useContext:Ns,useEffect:Ns,useImperativeHandle:Ns,useInsertionEffect:Ns,useLayoutEffect:Ns,useMemo:Ns,useReducer:Ns,useRef:Ns,useState:Ns,useDebugValue:Ns,useDeferredValue:Ns,useTransition:Ns,useMutableSource:Ns,useSyncExternalStore:Ns,useId:Ns,unstable_isNewReconciler:!1},b5={readContext:yo,useCallback:function(x,w){return Vu().memoizedState=[x,w===void 0?null:w],x},useContext:yo,useEffect:Ev,useImperativeHandle:function(x,w,B){return B=B!=null?B.concat([x]):null,Nm(4194308,4,rw.bind(null,w,x),B)},useLayoutEffect:function(x,w){return Nm(4194308,4,x,w)},useInsertionEffect:function(x,w){return Nm(4,2,x,w)},useMemo:function(x,w){var B=Vu();return w=w===void 0?null:w,x=x(),B.memoizedState=[x,w],x},useReducer:function(x,w,B){var F=Vu();return w=B!==void 0?B(w):w,F.memoizedState=F.baseState=w,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:w},F.queue=x,x=x.dispatch=Dr.bind(null,ur,x),[F.memoizedState,x]},useRef:function(x){var w=Vu();return x={current:x},w.memoizedState=x},useState:uu,useDebugValue:Cv,useDeferredValue:function(x){var w=uu(x),B=w[0],F=w[1];return Ev(function(){var H=Pa.transition;Pa.transition={};try{F(x)}finally{Pa.transition=H}},[x]),B},useTransition:function(){var x=uu(!1),w=x[0];return x=lw.bind(null,x[1]),Vu().memoizedState=x,[w,x]},useMutableSource:function(){},useSyncExternalStore:function(x,w,B){var F=ur,H=Vu();if(Yi){if(B===void 0)throw Error(o(407));B=B()}else{if(B=w(),ns===null)throw Error(o(349));dd&30||Jb(F,w,B)}H.memoizedState=B;var $={value:B,getSnapshot:w};return H.queue=$,Ev(ew.bind(null,F,$,x),[x]),F.flags|=2048,pd(9,Zb.bind(null,F,$,B,w),void 0,null),B},useId:function(){var x=Vu(),w=ns.identifierPrefix;if(Yi){var B=fl,F=ou;B=(F&~(1<<32-Ys(F)-1)).toString(32)+B,w=":"+w+"R"+B,B=dA++,0<B&&(w+="H"+B.toString(32)),w+=":"}else B=_5++,w=":"+w+"r"+B.toString(32)+":";return x.memoizedState=w},unstable_isNewReconciler:!1},hw={readContext:yo,useCallback:ow,useContext:yo,useEffect:AA,useImperativeHandle:sw,useInsertionEffect:nw,useLayoutEffect:iw,useMemo:aw,useReducer:pA,useRef:Tv,useState:function(){return pA(Lh)},useDebugValue:Cv,useDeferredValue:function(x){var w=pA(Lh),B=w[0],F=w[1];return AA(function(){var H=Pa.transition;Pa.transition={};try{F(x)}finally{Pa.transition=H}},[x]),B},useTransition:function(){var x=pA(Lh)[0],w=pl().memoizedState;return[x,w]},useMutableSource:Mv,useSyncExternalStore:Kb,useId:Rv,unstable_isNewReconciler:!1},fw={readContext:yo,useCallback:ow,useContext:yo,useEffect:AA,useImperativeHandle:sw,useInsertionEffect:nw,useLayoutEffect:iw,useMemo:aw,useReducer:Ba,useRef:Tv,useState:function(){return Ba(Lh)},useDebugValue:Cv,useDeferredValue:function(x){var w=Ba(Lh),B=w[0],F=w[1];return AA(function(){var H=Pa.transition;Pa.transition={};try{F(x)}finally{Pa.transition=H}},[x]),B},useTransition:function(){var x=Ba(Lh)[0],w=pl().memoizedState;return[x,w]},useMutableSource:Mv,useSyncExternalStore:Kb,useId:Rv,unstable_isNewReconciler:!1};function Om(x,w){try{var B="",F=w;do B+=v5(F),F=F.return;while(F);var H=B}catch($){H=`
Error generating stack: `+$.message+`
`+$.stack}return{value:x,source:w,stack:H}}function Fm(x,w){try{console.error(w.value)}catch(B){setTimeout(function(){throw B})}}var w5=typeof WeakMap=="function"?WeakMap:Map;function dw(x,w,B){B=zu(-1,B),B.tag=3,B.payload={element:null};var F=w.value;return B.callback=function(){Sw||(Sw=!0,I5=F),Fm(x,w)},B}function pw(x,w,B){B=zu(-1,B),B.tag=3;var F=x.type.getDerivedStateFromError;if(typeof F=="function"){var H=w.value;B.payload=function(){return F(H)},B.callback=function(){Fm(x,w)}}var $=x.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(B.callback=function(){Fm(x,w),typeof F!="function"&&(gd===null?gd=new Set([this]):gd.add(this));var de=w.stack;this.componentDidCatch(w.value,{componentStack:de!==null?de:""})}),B}function Aw(x,w,B){var F=x.pingCache;if(F===null){F=x.pingCache=new w5;var H=new Set;F.set(w,H)}else H=F.get(w),H===void 0&&(H=new Set,F.set(w,H));H.has(B)||(H.add(B),x=qre.bind(null,x,w,B),w.then(x,x))}function mw(x){do{var w;if((w=x.tag===13)&&(w=x.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return x;x=x.return}while(x!==null);return null}function ju(x,w,B,F,H){return x.mode&1?(x.flags|=65536,x.lanes=H,x):(x===w?x.flags|=65536:(x.flags|=128,B.flags|=131072,B.flags&=-52805,B.tag===1&&(B.alternate===null?B.tag=17:(w=zu(-1,1),w.tag=2,Dc(B,w))),B.lanes|=1),x)}function jr(x){x.flags|=4}function gn(x,w){if(x!==null&&x.child===w.child)return!0;if(w.flags&16)return!1;for(x=w.child;x!==null;){if(x.flags&12854||x.subtreeFlags&12854)return!1;x=x.sibling}return!0}var xo,Pn,$r,mA;if(yt)xo=function(x,w){for(var B=w.child;B!==null;){if(B.tag===5||B.tag===6)Pe(x,B.stateNode);else if(B.tag!==4&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===w)break;for(;B.sibling===null;){if(B.return===null||B.return===w)return;B=B.return}B.sibling.return=B.return,B=B.sibling}},Pn=function(){},$r=function(x,w,B,F,H){if(x=x.memoizedProps,x!==F){var $=w.stateNode,de=lu(Ra.current);B=Se($,B,x,F,H,de),(w.updateQueue=B)&&jr(w)}},mA=function(x,w,B,F){B!==F&&jr(w)};else if(Qe){xo=function(x,w,B,F){for(var H=w.child;H!==null;){if(H.tag===5){var $=H.stateNode;B&&F&&($=qi($,H.type,H.memoizedProps,H)),Pe(x,$)}else if(H.tag===6)$=H.stateNode,B&&F&&($=es($,H.memoizedProps,H)),Pe(x,$);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)$=H.child,$!==null&&($.return=H),xo(x,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===w)break;for(;H.sibling===null;){if(H.return===null||H.return===w)return;H=H.return}H.sibling.return=H.return,H=H.sibling}};var km=function(x,w,B,F){for(var H=w.child;H!==null;){if(H.tag===5){var $=H.stateNode;B&&F&&($=qi($,H.type,H.memoizedProps,H)),li(x,$)}else if(H.tag===6)$=H.stateNode,B&&F&&($=es($,H.memoizedProps,H)),li(x,$);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)$=H.child,$!==null&&($.return=H),km(x,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===w)break;for(;H.sibling===null;){if(H.return===null||H.return===w)return;H=H.return}H.sibling.return=H.return,H=H.sibling}};Pn=function(x,w){var B=w.stateNode;if(!gn(x,w)){x=B.containerInfo;var F=_n(x);km(F,w,!1,!1),B.pendingChildren=F,jr(w),ar(x,F)}},$r=function(x,w,B,F,H){var $=x.stateNode,de=x.memoizedProps;if((x=gn(x,w))&&de===F)w.stateNode=$;else{var Ce=w.stateNode,et=lu(Ra.current),St=null;de!==F&&(St=Se(Ce,B,de,F,H,et)),x&&St===null?w.stateNode=$:($=Le($,St,B,de,F,w,x,Ce),He($,B,F,H,et)&&jr(w),w.stateNode=$,x?jr(w):xo($,w,!1,!1))}},mA=function(x,w,B,F){B!==F?(x=lu(hd.current),B=lu(Ra.current),w.stateNode=Ye(F,x,B,w),jr(w)):w.stateNode=x.stateNode}}else Pn=function(){},$r=function(){},mA=function(){};function Al(x,w){if(!Yi)switch(x.tailMode){case"hidden":w=x.tail;for(var B=null;w!==null;)w.alternate!==null&&(B=w),w=w.sibling;B===null?x.tail=null:B.sibling=null;break;case"collapsed":B=x.tail;for(var F=null;B!==null;)B.alternate!==null&&(F=B),B=B.sibling;F===null?w||x.tail===null?x.tail=null:x.tail.sibling=null:F.sibling=null}}function Ds(x){var w=x.alternate!==null&&x.alternate.child===x.child,B=0,F=0;if(w)for(var H=x.child;H!==null;)B|=H.lanes|H.childLanes,F|=H.subtreeFlags&14680064,F|=H.flags&14680064,H.return=x,H=H.sibling;else for(H=x.child;H!==null;)B|=H.lanes|H.childLanes,F|=H.subtreeFlags,F|=H.flags,H.return=x,H=H.sibling;return x.subtreeFlags|=F,x.childLanes=B,w}function Ls(x,w,B){var F=w.pendingProps;switch(vv(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ds(w),null;case 1:return Ei(w.type)&&oe(),Ds(w),null;case 3:return F=w.stateNode,Nh(),Dt(wn),Dt(ii),xv(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(x===null||x.child===null)&&(Ph(w)?jr(w):x===null||x.memoizedState.isDehydrated&&!(w.flags&256)||(w.flags|=1024,dl!==null&&(L5(dl),dl=null))),Pn(x,w),Ds(w),null;case 5:Oc(w),B=lu(hd.current);var H=w.type;if(x!==null&&w.stateNode!=null)$r(x,w,H,F,B),x.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!F){if(w.stateNode===null)throw Error(o(166));return Ds(w),null}if(x=lu(Ra.current),Ph(w)){if(!ce)throw Error(o(175));x=le(w.stateNode,w.type,w.memoizedProps,B,x,w,!cA),w.updateQueue=x,x!==null&&jr(w)}else{var $=pe(H,F,B,x,w);xo($,w,!1,!1),w.stateNode=$,He($,H,F,B,x)&&jr(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return Ds(w),null;case 6:if(x&&w.stateNode!=null)mA(x,w,x.memoizedProps,F);else{if(typeof F!="string"&&w.stateNode===null)throw Error(o(166));if(x=lu(hd.current),B=lu(Ra.current),Ph(w)){if(!ce)throw Error(o(176));if(x=w.stateNode,F=w.memoizedProps,(B=Jn(x,F,w,!cA))&&(H=Ko,H!==null))switch($=(H.mode&1)!==0,H.tag){case 3:mt(H.stateNode.containerInfo,x,F,$);break;case 5:Gt(H.type,H.memoizedProps,H.stateNode,x,F,$)}B&&jr(w)}else w.stateNode=Ye(F,x,B,w)}return Ds(w),null;case 13:if(Dt(er),F=w.memoizedState,Yi&&Jo!==null&&w.mode&1&&!(w.flags&128)){for(x=Jo;x;)x=tt(x);return od(),w.flags|=98560,w}if(F!==null&&F.dehydrated!==null){if(F=Ph(w),x===null){if(!F)throw Error(o(318));if(!ce)throw Error(o(344));if(x=w.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));pi(x,w)}else od(),!(w.flags&128)&&(w.memoizedState=null),w.flags|=4;return Ds(w),null}return dl!==null&&(L5(dl),dl=null),w.flags&128?(w.lanes=B,w):(F=F!==null,B=!1,x===null?Ph(w):B=x.memoizedState!==null,F&&!B&&(w.child.flags|=8192,w.mode&1&&(x===null||er.current&1?ws===0&&(ws=3):F5())),w.updateQueue!==null&&(w.flags|=4),Ds(w),null);case 4:return Nh(),Pn(x,w),x===null&&pt(w.stateNode.containerInfo),Ds(w),null;case 10:return ru(w.type._context),Ds(w),null;case 17:return Ei(w.type)&&oe(),Ds(w),null;case 19:if(Dt(er),H=w.memoizedState,H===null)return Ds(w),null;if(F=(w.flags&128)!==0,$=H.rendering,$===null)if(F)Al(H,!1);else{if(ws!==0||x!==null&&x.flags&128)for(x=w.child;x!==null;){if($=Fc(x),$!==null){for(w.flags|=128,Al(H,!1),x=$.updateQueue,x!==null&&(w.updateQueue=x,w.flags|=4),w.subtreeFlags=0,x=B,F=w.child;F!==null;)B=F,H=x,B.flags&=14680066,$=B.alternate,$===null?(B.childLanes=0,B.lanes=H,B.child=null,B.subtreeFlags=0,B.memoizedProps=null,B.memoizedState=null,B.updateQueue=null,B.dependencies=null,B.stateNode=null):(B.childLanes=$.childLanes,B.lanes=$.lanes,B.child=$.child,B.subtreeFlags=0,B.deletions=null,B.memoizedProps=$.memoizedProps,B.memoizedState=$.memoizedState,B.updateQueue=$.updateQueue,B.type=$.type,H=$.dependencies,B.dependencies=H===null?null:{lanes:H.lanes,firstContext:H.firstContext}),F=F.sibling;return se(er,er.current&1|2),w.child}x=x.sibling}H.tail!==null&&Ir()>B5&&(w.flags|=128,F=!0,Al(H,!1),w.lanes=4194304)}else{if(!F)if(x=Fc($),x!==null){if(w.flags|=128,F=!0,x=x.updateQueue,x!==null&&(w.updateQueue=x,w.flags|=4),Al(H,!0),H.tail===null&&H.tailMode==="hidden"&&!$.alternate&&!Yi)return Ds(w),null}else 2*Ir()-H.renderingStartTime>B5&&B!==1073741824&&(w.flags|=128,F=!0,Al(H,!1),w.lanes=4194304);H.isBackwards?($.sibling=w.child,w.child=$):(x=H.last,x!==null?x.sibling=$:w.child=$,H.last=$)}return H.tail!==null?(w=H.tail,H.rendering=w,H.tail=w.sibling,H.renderingStartTime=Ir(),w.sibling=null,x=er.current,se(er,F?x&1|2:x&1),w):(Ds(w),null);case 22:case 23:return O5(),F=w.memoizedState!==null,x!==null&&x.memoizedState!==null!==F&&(w.flags|=8192),F&&w.mode&1?ml&1073741824&&(Ds(w),yt&&w.subtreeFlags&6&&(w.flags|=8192)):Ds(w),null;case 24:return null;case 25:return null}throw Error(o(156,w.tag))}var Um=a.ReactCurrentOwner,ts=!1;function Os(x,w,B,F){w.child=x===null?Qb(w,null,B,F):au(w,x.child,B,F)}function ht(x,w,B,F,H){B=B.render;var $=w.ref;return Eh(w,H),F=wv(x,w,B,F,$,H),B=Sv(),x!==null&&!ts?(w.updateQueue=x.updateQueue,w.flags&=-2053,x.lanes&=~H,ue(x,w,H)):(Yi&&B&&Ri(w),w.flags|=1,Os(x,w,F,H),w.child)}function Tt(x,w,B,F,H){if(x===null){var $=B.type;return typeof $=="function"&&!k5($)&&$.defaultProps===void 0&&B.compare===null&&B.defaultProps===void 0?(w.tag=15,w.type=$,Pv(x,w,$,F,H)):(x=Bw(B.type,null,F,w,w.mode,H),x.ref=w.ref,x.return=w,w.child=x)}if($=x.child,!(x.lanes&H)){var de=$.memoizedProps;if(B=B.compare,B=B!==null?B:wm,B(de,F)&&x.ref===w.ref)return ue(x,w,H)}return w.flags|=1,x=xd($,F),x.ref=w.ref,x.return=w,w.child=x}function Pv(x,w,B,F,H){if(x!==null&&wm(x.memoizedProps,F)&&x.ref===w.ref)if(ts=!1,(x.lanes&H)!==0)x.flags&131072&&(ts=!0);else return w.lanes=x.lanes,ue(x,w,H);return md(x,w,B,F,H)}function zm(x,w,B){var F=w.pendingProps,H=F.children,$=x!==null?x.memoizedState:null;if(F.mode==="hidden")if(!(w.mode&1))w.memoizedState={baseLanes:0,cachePool:null},se(Hm,ml),ml|=B;else if(B&1073741824)w.memoizedState={baseLanes:0,cachePool:null},F=$!==null?$.baseLanes:B,se(Hm,ml),ml|=F;else return x=$!==null?$.baseLanes|B:B,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:x,cachePool:null},w.updateQueue=null,se(Hm,ml),ml|=x,null;else $!==null?(F=$.baseLanes|B,w.memoizedState=null):F=B,se(Hm,ml),ml|=F;return Os(x,w,H,B),w.child}function gA(x,w){var B=w.ref;(x===null&&B!==null||x!==null&&x.ref!==B)&&(w.flags|=512,w.flags|=2097152)}function md(x,w,B,F,H){var $=Ei(B)?Vr:ii.current;return $=Xo(w,$),Eh(w,H),B=wv(x,w,B,F,$,H),F=Sv(),x!==null&&!ts?(w.updateQueue=x.updateQueue,w.flags&=-2053,x.lanes&=~H,ue(x,w,H)):(Yi&&F&&Ri(w),w.flags|=1,Os(x,w,B,H),w.child)}function kc(x,w,B,F,H){if(Ei(B)){var $=!0;Bc(w)}else $=!1;if(Eh(w,H),w.stateNode===null)x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),Wb(w,B,F),yv(w,B,F,H),F=!0;else if(x===null){var de=w.stateNode,Ce=w.memoizedProps;de.props=Ce;var et=de.context,St=B.contextType;typeof St=="object"&&St!==null?St=yo(St):(St=Ei(B)?Vr:ii.current,St=Xo(w,St));var en=B.getDerivedStateFromProps,Dn=typeof en=="function"||typeof de.getSnapshotBeforeUpdate=="function";Dn||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(Ce!==F||et!==St)&&sd(w,de,F,St),Nc=!1;var dn=w.memoizedState;de.state=dn,Cm(w,F,de,H),et=w.memoizedState,Ce!==F||dn!==et||wn.current||Nc?(typeof en=="function"&&(rd(w,B,en,F),et=w.memoizedState),(Ce=Nc||$b(w,B,Ce,F,dn,et,St))?(Dn||typeof de.UNSAFE_componentWillMount!="function"&&typeof de.componentWillMount!="function"||(typeof de.componentWillMount=="function"&&de.componentWillMount(),typeof de.UNSAFE_componentWillMount=="function"&&de.UNSAFE_componentWillMount()),typeof de.componentDidMount=="function"&&(w.flags|=4194308)):(typeof de.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=F,w.memoizedState=et),de.props=F,de.state=et,de.context=St,F=Ce):(typeof de.componentDidMount=="function"&&(w.flags|=4194308),F=!1)}else{de=w.stateNode,Hb(x,w),Ce=w.memoizedProps,St=w.type===w.elementType?Ce:Ca(w.type,Ce),de.props=St,Dn=w.pendingProps,dn=de.context,et=B.contextType,typeof et=="object"&&et!==null?et=yo(et):(et=Ei(B)?Vr:ii.current,et=Xo(w,et));var Vi=B.getDerivedStateFromProps;(en=typeof Vi=="function"||typeof de.getSnapshotBeforeUpdate=="function")||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(Ce!==Dn||dn!==et)&&sd(w,de,F,et),Nc=!1,dn=w.memoizedState,de.state=dn,Cm(w,F,de,H);var un=w.memoizedState;Ce!==Dn||dn!==un||wn.current||Nc?(typeof Vi=="function"&&(rd(w,B,Vi,F),un=w.memoizedState),(St=Nc||$b(w,B,St,F,dn,un,et)||!1)?(en||typeof de.UNSAFE_componentWillUpdate!="function"&&typeof de.componentWillUpdate!="function"||(typeof de.componentWillUpdate=="function"&&de.componentWillUpdate(F,un,et),typeof de.UNSAFE_componentWillUpdate=="function"&&de.UNSAFE_componentWillUpdate(F,un,et)),typeof de.componentDidUpdate=="function"&&(w.flags|=4),typeof de.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof de.componentDidUpdate!="function"||Ce===x.memoizedProps&&dn===x.memoizedState||(w.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||Ce===x.memoizedProps&&dn===x.memoizedState||(w.flags|=1024),w.memoizedProps=F,w.memoizedState=un),de.props=F,de.state=un,de.context=et,F=St):(typeof de.componentDidUpdate!="function"||Ce===x.memoizedProps&&dn===x.memoizedState||(w.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||Ce===x.memoizedProps&&dn===x.memoizedState||(w.flags|=1024),F=!1)}return Gm(x,w,B,F,$,H)}function Gm(x,w,B,F,H,$){gA(x,w);var de=(w.flags&128)!==0;if(!F&&!de)return H&&Xs(w,B,!1),ue(x,w,$);F=w.stateNode,Um.current=w;var Ce=de&&typeof B.getDerivedStateFromError!="function"?null:F.render();return w.flags|=1,x!==null&&de?(w.child=au(w,x.child,null,$),w.child=au(w,null,Ce,$)):Os(x,w,Ce,$),w.memoizedState=F.state,H&&Xs(w,B,!0),w.child}function $u(x){var w=x.stateNode;w.pendingContext?Wi(x,w.pendingContext,w.pendingContext!==w.context):w.context&&Wi(x,w.context,!1),Bm(x,w.containerInfo)}function m(x,w,B,F,H){return od(),_o(H),w.flags|=256,Os(x,w,B,F),w.child}var A={dehydrated:null,treeContext:null,retryLane:0};function y(x){return{baseLanes:x,cachePool:null}}function S(x,w,B){var F=w.pendingProps,H=er.current,$=!1,de=(w.flags&128)!==0,Ce;if((Ce=de)||(Ce=x!==null&&x.memoizedState===null?!1:(H&2)!==0),Ce?($=!0,w.flags&=-129):(x===null||x.memoizedState!==null)&&(H|=1),se(er,H&1),x===null)return qu(w),x=w.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?(w.mode&1?Ta(x)?w.lanes=8:w.lanes=1073741824:w.lanes=1,null):(H=F.children,x=F.fallback,$?(F=w.mode,$=w.child,H={mode:"hidden",children:H},!(F&1)&&$!==null?($.childLanes=0,$.pendingProps=H):$=Iw(H,F,0,null),x=bA(x,F,B,null),$.return=w,x.return=w,$.sibling=x,w.child=$,w.child.memoizedState=y(B),w.memoizedState=A,x):T(w,H));if(H=x.memoizedState,H!==null){if(Ce=H.dehydrated,Ce!==null){if(de)return w.flags&256?(w.flags&=-257,N(x,w,B,Error(o(422)))):w.memoizedState!==null?(w.child=x.child,w.flags|=128,null):($=F.fallback,H=w.mode,F=Iw({mode:"visible",children:F.children},H,0,null),$=bA($,H,B,null),$.flags|=2,F.return=w,$.return=w,F.sibling=$,w.child=F,w.mode&1&&au(w,x.child,null,B),w.child.memoizedState=y(B),w.memoizedState=A,$);if(!(w.mode&1))w=N(x,w,B,null);else if(Ta(Ce))w=N(x,w,B,Error(o(419)));else if(F=(B&x.childLanes)!==0,ts||F){if(F=ns,F!==null){switch(B&-B){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}F=$&(F.suspendedLanes|B)?0:$,F!==0&&F!==H.retryLane&&(H.retryLane=F,cu(x,F,-1))}F5(),w=N(x,w,B,Error(o(421)))}else Pc(Ce)?(w.flags|=128,w.child=x.child,w=Vre.bind(null,x),Ue(Ce,w),w=null):(B=H.treeContext,ce&&(Jo=g(Ce),Ko=w,Yi=!0,dl=null,cA=!1,B!==null&&(vo[Qo++]=ou,vo[Qo++]=fl,vo[Qo++]=Rh,ou=B.id,fl=B.overflow,Rh=w)),w=T(w,w.pendingProps.children),w.flags|=4096);return w}return $?(F=P(x,w,F.children,F.fallback,B),$=w.child,H=x.child.memoizedState,$.memoizedState=H===null?y(B):{baseLanes:H.baseLanes|B,cachePool:null},$.childLanes=x.childLanes&~B,w.memoizedState=A,F):(B=C(x,w,F.children,B),w.memoizedState=null,B)}return $?(F=P(x,w,F.children,F.fallback,B),$=w.child,H=x.child.memoizedState,$.memoizedState=H===null?y(B):{baseLanes:H.baseLanes|B,cachePool:null},$.childLanes=x.childLanes&~B,w.memoizedState=A,F):(B=C(x,w,F.children,B),w.memoizedState=null,B)}function T(x,w){return w=Iw({mode:"visible",children:w},x.mode,0,null),w.return=x,x.child=w}function C(x,w,B,F){var H=x.child;return x=H.sibling,B=xd(H,{mode:"visible",children:B}),!(w.mode&1)&&(B.lanes=F),B.return=w,B.sibling=null,x!==null&&(F=w.deletions,F===null?(w.deletions=[x],w.flags|=16):F.push(x)),w.child=B}function P(x,w,B,F,H){var $=w.mode;x=x.child;var de=x.sibling,Ce={mode:"hidden",children:B};return!($&1)&&w.child!==x?(B=w.child,B.childLanes=0,B.pendingProps=Ce,w.deletions=null):(B=xd(x,Ce),B.subtreeFlags=x.subtreeFlags&14680064),de!==null?F=xd(de,F):(F=bA(F,$,H,null),F.flags|=2),F.return=w,B.return=w,B.sibling=F,w.child=B,F}function N(x,w,B,F){return F!==null&&_o(F),au(w,x.child,null,B),x=T(w,w.pendingProps.children),x.flags|=2,w.memoizedState=null,x}function z(x,w,B){x.lanes|=w;var F=x.alternate;F!==null&&(F.lanes|=w),Mm(x.return,w,B)}function V(x,w,B,F,H){var $=x.memoizedState;$===null?x.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:F,tail:B,tailMode:H}:($.isBackwards=w,$.rendering=null,$.renderingStartTime=0,$.last=F,$.tail=B,$.tailMode=H)}function J(x,w,B){var F=w.pendingProps,H=F.revealOrder,$=F.tail;if(Os(x,w,F.children,B),F=er.current,F&2)F=F&1|2,w.flags|=128;else{if(x!==null&&x.flags&128)e:for(x=w.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&z(x,B,w);else if(x.tag===19)z(x,B,w);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===w)break e;for(;x.sibling===null;){if(x.return===null||x.return===w)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}F&=1}if(se(er,F),!(w.mode&1))w.memoizedState=null;else switch(H){case"forwards":for(B=w.child,H=null;B!==null;)x=B.alternate,x!==null&&Fc(x)===null&&(H=B),B=B.sibling;B=H,B===null?(H=w.child,w.child=null):(H=B.sibling,B.sibling=null),V(w,!1,H,B,$);break;case"backwards":for(B=null,H=w.child,w.child=null;H!==null;){if(x=H.alternate,x!==null&&Fc(x)===null){w.child=H;break}x=H.sibling,H.sibling=B,B=H,H=x}V(w,!0,B,null,$);break;case"together":V(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function ue(x,w,B){if(x!==null&&(w.dependencies=x.dependencies),qm|=w.lanes,!(B&w.childLanes))return null;if(x!==null&&w.child!==x.child)throw Error(o(153));if(w.child!==null){for(x=w.child,B=xd(x,x.pendingProps),w.child=B,B.return=w;x.sibling!==null;)x=x.sibling,B=B.sibling=xd(x,x.pendingProps),B.return=w;B.sibling=null}return w.child}function me(x,w,B){switch(w.tag){case 3:$u(w),od();break;case 5:fd(w);break;case 1:Ei(w.type)&&Bc(w);break;case 4:Bm(w,w.stateNode.containerInfo);break;case 10:Ic(w,w.type._context,w.memoizedProps.value);break;case 13:var F=w.memoizedState;if(F!==null)return F.dehydrated!==null?(se(er,er.current&1),w.flags|=128,null):B&w.child.childLanes?S(x,w,B):(se(er,er.current&1),x=ue(x,w,B),x!==null?x.sibling:null);se(er,er.current&1);break;case 19:if(F=(B&w.childLanes)!==0,x.flags&128){if(F)return J(x,w,B);w.flags|=128}var H=w.memoizedState;if(H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),se(er,er.current),F)break;return null;case 22:case 23:return w.lanes=0,zm(x,w,B)}return ue(x,w,B)}function _e(x,w){switch(vv(w),w.tag){case 1:return Ei(w.type)&&oe(),x=w.flags,x&65536?(w.flags=x&-65537|128,w):null;case 3:return Nh(),Dt(wn),Dt(ii),xv(),x=w.flags,x&65536&&!(x&128)?(w.flags=x&-65537|128,w):null;case 5:return Oc(w),null;case 13:if(Dt(er),x=w.memoizedState,x!==null&&x.dehydrated!==null){if(w.alternate===null)throw Error(o(340));od()}return x=w.flags,x&65536?(w.flags=x&-65537|128,w):null;case 19:return Dt(er),null;case 4:return Nh(),null;case 10:return ru(w.type._context),null;case 22:case 23:return O5(),null;case 24:return null;default:return null}}var Ae=!1,Ee=!1,Je=typeof WeakSet=="function"?WeakSet:Set,be=null;function ke(x,w){var B=x.ref;if(B!==null)if(typeof B=="function")try{B(null)}catch(F){Da(x,w,F)}else B.current=null}function Ge(x,w,B){try{B()}catch(F){Da(x,w,F)}}var Re=!1;function Lt(x,w){for(ie(x.containerInfo),be=w;be!==null;)if(x=be,w=x.child,(x.subtreeFlags&1028)!==0&&w!==null)w.return=x,be=w;else for(;be!==null;){x=be;try{var B=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var F=B.memoizedProps,H=B.memoizedState,$=x.stateNode,de=$.getSnapshotBeforeUpdate(x.elementType===x.type?F:Ca(x.type,F),H);$.__reactInternalSnapshotBeforeUpdate=de}break;case 3:yt&&jt(x.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ce){Da(x,x.return,Ce)}if(w=x.sibling,w!==null){w.return=x.return,be=w;break}be=x.return}return B=Re,Re=!1,B}function Ut(x,w,B){var F=w.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var H=F=F.next;do{if((H.tag&x)===x){var $=H.destroy;H.destroy=void 0,$!==void 0&&Ge(w,B,$)}H=H.next}while(H!==F)}}function bt(x,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var B=w=w.next;do{if((B.tag&x)===x){var F=B.create;B.destroy=F()}B=B.next}while(B!==w)}}function It(x){var w=x.ref;if(w!==null){var B=x.stateNode;switch(x.tag){case 5:x=Z(B);break;default:x=B}typeof w=="function"?w(x):w.current=x}}function mi(x,w,B){if(hl&&typeof hl.onCommitFiberUnmount=="function")try{hl.onCommitFiberUnmount(lA,w)}catch{}switch(w.tag){case 0:case 11:case 14:case 15:if(x=w.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var F=x=x.next;do{var H=F,$=H.destroy;H=H.tag,$!==void 0&&(H&2||H&4)&&Ge(w,B,$),F=F.next}while(F!==x)}break;case 1:if(ke(w,B),x=w.stateNode,typeof x.componentWillUnmount=="function")try{x.props=w.memoizedProps,x.state=w.memoizedState,x.componentWillUnmount()}catch(de){Da(w,B,de)}break;case 5:ke(w,B);break;case 4:yt?Pi(x,w,B):Qe&&Qe&&(w=w.stateNode.containerInfo,B=_n(w),kn(w,B))}}function Zn(x,w,B){for(var F=w;;)if(mi(x,F,B),F.child===null||yt&&F.tag===4){if(F===w)break;for(;F.sibling===null;){if(F.return===null||F.return===w)return;F=F.return}F.sibling.return=F.return,F=F.sibling}else F.child.return=F,F=F.child}function ri(x){var w=x.alternate;w!==null&&(x.alternate=null,ri(w)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(w=x.stateNode,w!==null&&ft(w)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function En(x){return x.tag===5||x.tag===3||x.tag===4}function xn(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||En(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function Cn(x){if(yt){e:{for(var w=x.return;w!==null;){if(En(w))break e;w=w.return}throw Error(o(160))}var B=w;switch(B.tag){case 5:w=B.stateNode,B.flags&32&&(Nt(w),B.flags&=-33),B=xn(x),mn(x,B,w);break;case 3:case 4:w=B.stateNode.containerInfo,B=xn(x),yi(x,B,w);break;default:throw Error(o(161))}}}function yi(x,w,B){var F=x.tag;if(F===5||F===6)x=x.stateNode,w?Vt(B,x,w):vn(B,x);else if(F!==4&&(x=x.child,x!==null))for(yi(x,w,B),x=x.sibling;x!==null;)yi(x,w,B),x=x.sibling}function mn(x,w,B){var F=x.tag;if(F===5||F===6)x=x.stateNode,w?an(B,x,w):Ft(B,x);else if(F!==4&&(x=x.child,x!==null))for(mn(x,w,B),x=x.sibling;x!==null;)mn(x,w,B),x=x.sibling}function Pi(x,w,B){for(var F=w,H=!1,$,de;;){if(!H){H=F.return;e:for(;;){if(H===null)throw Error(o(160));switch($=H.stateNode,H.tag){case 5:de=!1;break e;case 3:$=$.containerInfo,de=!0;break e;case 4:$=$.containerInfo,de=!0;break e}H=H.return}H=!0}if(F.tag===5||F.tag===6)Zn(x,F,B),de?Ze($,F.stateNode):Me($,F.stateNode);else if(F.tag===18)de?Ne($,F.stateNode):qe($,F.stateNode);else if(F.tag===4){if(F.child!==null){$=F.stateNode.containerInfo,de=!0,F.child.return=F,F=F.child;continue}}else if(mi(x,F,B),F.child!==null){F.child.return=F,F=F.child;continue}if(F===w)break;for(;F.sibling===null;){if(F.return===null||F.return===w)return;F=F.return,F.tag===4&&(H=!1)}F.sibling.return=F.return,F=F.sibling}}function bs(x,w){if(yt){switch(w.tag){case 0:case 11:case 14:case 15:Ut(3,w,w.return),bt(3,w),Ut(5,w,w.return);return;case 1:return;case 5:var B=w.stateNode;if(B!=null){var F=w.memoizedProps;x=x!==null?x.memoizedProps:F;var H=w.type,$=w.updateQueue;w.updateQueue=null,$!==null&&hn(B,$,H,x,F,w)}return;case 6:if(w.stateNode===null)throw Error(o(162));B=w.memoizedProps,At(w.stateNode,x!==null?x.memoizedProps:B,B);return;case 3:ce&&x!==null&&x.memoizedState.isDehydrated&&re(w.stateNode.containerInfo);return;case 12:return;case 13:yA(w);return;case 19:yA(w);return;case 17:return}throw Error(o(163))}switch(w.tag){case 0:case 11:case 14:case 15:Ut(3,w,w.return),bt(3,w),Ut(5,w,w.return);return;case 12:return;case 13:yA(w);return;case 19:yA(w);return;case 3:ce&&x!==null&&x.memoizedState.isDehydrated&&re(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(Qe){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,kn(w.containerInfo,w.pendingChildren);break e}throw Error(o(163))}}function yA(x){var w=x.updateQueue;if(w!==null){x.updateQueue=null;var B=x.stateNode;B===null&&(B=x.stateNode=new Je),w.forEach(function(F){var H=jre.bind(null,x,F);B.has(F)||(B.add(F),F.then(H,H))})}}function Ore(x,w){for(be=w;be!==null;){w=be;var B=w.deletions;if(B!==null)for(var F=0;F<B.length;F++){var H=B[F];try{var $=x;yt?Pi($,H,w):Zn($,H,w);var de=H.alternate;de!==null&&(de.return=null),H.return=null}catch(on){Da(H,w,on)}}if(B=w.child,w.subtreeFlags&12854&&B!==null)B.return=w,be=B;else for(;be!==null;){w=be;try{var Ce=w.flags;if(Ce&32&&yt&&Nt(w.stateNode),Ce&512){var et=w.alternate;if(et!==null){var St=et.ref;St!==null&&(typeof St=="function"?St(null):St.current=null)}}if(Ce&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var en=w.alternate;(en===null||en.memoizedState===null)&&(P5=Ir())}break;case 22:var Dn=w.memoizedState!==null,dn=w.alternate,Vi=dn!==null&&dn.memoizedState!==null;if(B=w,yt){e:if(F=B,H=Dn,$=null,yt)for(var un=F;;){if(un.tag===5){if($===null){$=un;var bo=un.stateNode;H?ye(bo):$e(un.stateNode,un.memoizedProps)}}else if(un.tag===6){if($===null){var fu=un.stateNode;H?wt(fu):at(fu,un.memoizedProps)}}else if((un.tag!==22&&un.tag!==23||un.memoizedState===null||un===F)&&un.child!==null){un.child.return=un,un=un.child;continue}if(un===F)break;for(;un.sibling===null;){if(un.return===null||un.return===F)break e;$===un&&($=null),un=un.return}$===un&&($=null),un.sibling.return=un.return,un=un.sibling}}if(Dn&&!Vi&&B.mode&1){be=B;for(var Ve=B.child;Ve!==null;){for(B=be=Ve;be!==null;){F=be;var Ie=F.child;switch(F.tag){case 0:case 11:case 14:case 15:Ut(4,F,F.return);break;case 1:ke(F,F.return);var Xe=F.stateNode;if(typeof Xe.componentWillUnmount=="function"){var Xt=F.return;try{Xe.props=F.memoizedProps,Xe.state=F.memoizedState,Xe.componentWillUnmount()}catch(on){Da(F,Xt,on)}}break;case 5:ke(F,F.return);break;case 22:if(F.memoizedState!==null){ek(B);continue}}Ie!==null?(Ie.return=F,be=Ie):ek(B)}Ve=Ve.sibling}}}switch(Ce&4102){case 2:Cn(w),w.flags&=-3;break;case 6:Cn(w),w.flags&=-3,bs(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,bs(w.alternate,w);break;case 4:bs(w.alternate,w)}}catch(on){Da(w,w.return,on)}if(B=w.sibling,B!==null){B.return=w.return,be=B;break}be=w.return}}}function Fre(x,w,B){be=x,JF(x)}function JF(x,w,B){for(var F=(x.mode&1)!==0;be!==null;){var H=be,$=H.child;if(H.tag===22&&F){var de=H.memoizedState!==null||Ae;if(!de){var Ce=H.alternate,et=Ce!==null&&Ce.memoizedState!==null||Ee;Ce=Ae;var St=Ee;if(Ae=de,(Ee=et)&&!St)for(be=H;be!==null;)de=be,et=de.child,de.tag===22&&de.memoizedState!==null?tk(H):et!==null?(et.return=de,be=et):tk(H);for(;$!==null;)be=$,JF($),$=$.sibling;be=H,Ae=Ce,Ee=St}ZF(x)}else H.subtreeFlags&8772&&$!==null?($.return=H,be=$):ZF(x)}}function ZF(x){for(;be!==null;){var w=be;if(w.flags&8772){var B=w.alternate;try{if(w.flags&8772)switch(w.tag){case 0:case 11:case 15:Ee||bt(5,w);break;case 1:var F=w.stateNode;if(w.flags&4&&!Ee)if(B===null)F.componentDidMount();else{var H=w.elementType===w.type?B.memoizedProps:Ca(w.type,B.memoizedProps);F.componentDidUpdate(H,B.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var $=w.updateQueue;$!==null&&Vb(w,$,F);break;case 3:var de=w.updateQueue;if(de!==null){if(B=null,w.child!==null)switch(w.child.tag){case 5:B=Z(w.child.stateNode);break;case 1:B=w.child.stateNode}Vb(w,de,B)}break;case 5:var Ce=w.stateNode;B===null&&w.flags&4&&zt(Ce,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(ce&&w.memoizedState===null){var et=w.alternate;if(et!==null){var St=et.memoizedState;if(St!==null){var en=St.dehydrated;en!==null&&xe(en)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ee||w.flags&512&&It(w)}catch(Dn){Da(w,w.return,Dn)}}if(w===x){be=null;break}if(B=w.sibling,B!==null){B.return=w.return,be=B;break}be=w.return}}function ek(x){for(;be!==null;){var w=be;if(w===x){be=null;break}var B=w.sibling;if(B!==null){B.return=w.return,be=B;break}be=w.return}}function tk(x){for(;be!==null;){var w=be;try{switch(w.tag){case 0:case 11:case 15:var B=w.return;try{bt(4,w)}catch(et){Da(w,B,et)}break;case 1:var F=w.stateNode;if(typeof F.componentDidMount=="function"){var H=w.return;try{F.componentDidMount()}catch(et){Da(w,H,et)}}var $=w.return;try{It(w)}catch(et){Da(w,$,et)}break;case 5:var de=w.return;try{It(w)}catch(et){Da(w,de,et)}}}catch(et){Da(w,w.return,et)}if(w===x){be=null;break}var Ce=w.sibling;if(Ce!==null){Ce.return=w.return,be=Ce;break}be=w.return}}var gw=0,yw=1,vw=2,_w=3,xw=4;if(typeof Symbol=="function"&&Symbol.for){var Bv=Symbol.for;gw=Bv("selector.component"),yw=Bv("selector.has_pseudo_class"),vw=Bv("selector.role"),_w=Bv("selector.test_id"),xw=Bv("selector.text")}function S5(x){var w=dt(x);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(o(364));return w}if(x=te(x),x===null)throw Error(o(362));return x.stateNode.current}function M5(x,w){switch(w.$$typeof){case gw:if(x.type===w.value)return!0;break;case yw:e:{w=w.value,x=[x,0];for(var B=0;B<x.length;){var F=x[B++],H=x[B++],$=w[H];if(F.tag!==5||!Fe(F)){for(;$!=null&&M5(F,$);)H++,$=w[H];if(H===w.length){w=!0;break e}else for(F=F.child;F!==null;)x.push(F,H),F=F.sibling}}w=!1}return w;case vw:if(x.tag===5&&We(x.stateNode,w.value))return!0;break;case xw:if((x.tag===5||x.tag===6)&&(x=Te(x),x!==null&&0<=x.indexOf(w.value)))return!0;break;case _w:if(x.tag===5&&(x=x.memoizedProps["data-testname"],typeof x=="string"&&x.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function T5(x){switch(x.$$typeof){case gw:return"<"+(D(x.value)||"Unknown")+">";case yw:return":has("+(T5(x)||"")+")";case vw:return'[role="'+x.value+'"]';case xw:return'"'+x.value+'"';case _w:return'[data-testname="'+x.value+'"]';default:throw Error(o(365))}}function nk(x,w){var B=[];x=[x,0];for(var F=0;F<x.length;){var H=x[F++],$=x[F++],de=w[$];if(H.tag!==5||!Fe(H)){for(;de!=null&&M5(H,de);)$++,de=w[$];if($===w.length)B.push(H);else for(H=H.child;H!==null;)x.push(H,$),H=H.sibling}}return B}function E5(x,w){if(!fe)throw Error(o(363));x=S5(x),x=nk(x,w),w=[],x=Array.from(x);for(var B=0;B<x.length;){var F=x[B++];if(F.tag===5)Fe(F)||w.push(F.stateNode);else for(F=F.child;F!==null;)x.push(F),F=F.sibling}return w}var kre=Math.ceil,bw=a.ReactCurrentDispatcher,C5=a.ReactCurrentOwner,Wr=a.ReactCurrentBatchConfig,Yn=0,ns=null,is=null,Ks=0,ml=0,Hm=Xn(0),ws=0,Iv=null,qm=0,ww=0,R5=0,Nv=null,Ia=null,P5=0,B5=1/0;function Vm(){B5=Ir()+500}var Sw=!1,I5=null,gd=null,Mw=!1,yd=null,Tw=0,Dv=0,N5=null,Ew=-1,Cw=0;function ea(){return Yn&6?Ir():Ew!==-1?Ew:Ew=Ir()}function vd(x){return x.mode&1?Yn&2&&Ks!==0?Ks&-Ks:y5.transition!==null?(Cw===0&&(x=sA,sA<<=1,!(sA&4194240)&&(sA=64),Cw=x),Cw):(x=ui,x!==0?x:ut()):1}function cu(x,w,B){if(50<Dv)throw Dv=0,N5=null,Error(o(185));var F=Rw(x,w);return F===null?null:(oA(F,w,B),(!(Yn&2)||F!==ns)&&(F===ns&&(!(Yn&2)&&(ww|=w),ws===4&&_d(F,Ks)),Na(F,B),w===1&&Yn===0&&!(x.mode&1)&&(Vm(),nu&&Yo())),F)}function Rw(x,w){x.lanes|=w;var B=x.alternate;for(B!==null&&(B.lanes|=w),B=x,x=x.return;x!==null;)x.childLanes|=w,B=x.alternate,B!==null&&(B.childLanes|=w),B=x,x=x.return;return B.tag===3?B.stateNode:null}function Na(x,w){var B=x.callbackNode;f5(x,w);var F=nd(x,x===ns?Ks:0);if(F===0)B!==null&&kb(B),x.callbackNode=null,x.callbackPriority=0;else if(w=F&-F,x.callbackPriority!==w){if(B!=null&&kb(B),w===1)x.tag===0?Gb(rk.bind(null,x)):bm(rk.bind(null,x)),Wt?Rt(function(){Yn===0&&Yo()}):mv(aA,Yo),B=null;else{switch(Av(F)){case 1:B=aA;break;case 4:B=A5;break;case 16:B=gv;break;case 536870912:B=zb;break;default:B=gv}B=dk(B,ik.bind(null,x))}x.callbackPriority=w,x.callbackNode=B}}function ik(x,w){if(Ew=-1,Cw=0,Yn&6)throw Error(o(327));var B=x.callbackNode;if(xA()&&x.callbackNode!==B)return null;var F=nd(x,x===ns?Ks:0);if(F===0)return null;if(F&30||F&x.expiredLanes||w)w=Pw(x,F);else{w=F;var H=Yn;Yn|=2;var $=ak();(ns!==x||Ks!==w)&&(Vm(),vA(x,w));do try{Gre();break}catch(Ce){ok(x,Ce)}while(!0);id(),bw.current=$,Yn=H,is!==null?w=0:(ns=null,Ks=0,w=ws)}if(w!==0){if(w===2&&(H=xm(x),H!==0&&(F=H,w=D5(x,H))),w===1)throw B=Iv,vA(x,0),_d(x,F),Na(x,Ir()),B;if(w===6)_d(x,F);else{if(H=x.current.alternate,!(F&30)&&!Ure(H)&&(w=Pw(x,F),w===2&&($=xm(x),$!==0&&(F=$,w=D5(x,$))),w===1))throw B=Iv,vA(x,0),_d(x,F),Na(x,Ir()),B;switch(x.finishedWork=H,x.finishedLanes=F,w){case 0:case 1:throw Error(o(345));case 2:_A(x,Ia);break;case 3:if(_d(x,F),(F&130023424)===F&&(w=P5+500-Ir(),10<w)){if(nd(x,0)!==0)break;if(H=x.suspendedLanes,(H&F)!==F){ea(),x.pingedLanes|=x.suspendedLanes&H;break}x.timeoutHandle=it(_A.bind(null,x,Ia),w);break}_A(x,Ia);break;case 4:if(_d(x,F),(F&4194240)===F)break;for(w=x.eventTimes,H=-1;0<F;){var de=31-Ys(F);$=1<<de,de=w[de],de>H&&(H=de),F&=~$}if(F=H,F=Ir()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*kre(F/1960))-F,10<F){x.timeoutHandle=it(_A.bind(null,x,Ia),F);break}_A(x,Ia);break;case 5:_A(x,Ia);break;default:throw Error(o(329))}}}return Na(x,Ir()),x.callbackNode===B?ik.bind(null,x):null}function D5(x,w){var B=Nv;return x.current.memoizedState.isDehydrated&&(vA(x,w).flags|=256),x=Pw(x,w),x!==2&&(w=Ia,Ia=B,w!==null&&L5(w)),x}function L5(x){Ia===null?Ia=x:Ia.push.apply(Ia,x)}function Ure(x){for(var w=x;;){if(w.flags&16384){var B=w.updateQueue;if(B!==null&&(B=B.stores,B!==null))for(var F=0;F<B.length;F++){var H=B[F],$=H.getSnapshot;H=H.value;try{if(!tu($(),H))return!1}catch{return!1}}}if(B=w.child,w.subtreeFlags&16384&&B!==null)B.return=w,w=B;else{if(w===x)break;for(;w.sibling===null;){if(w.return===null||w.return===x)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function _d(x,w){for(w&=~R5,w&=~ww,x.suspendedLanes|=w,x.pingedLanes&=~w,x=x.expirationTimes;0<w;){var B=31-Ys(w),F=1<<B;x[B]=-1,w&=~F}}function rk(x){if(Yn&6)throw Error(o(327));xA();var w=nd(x,0);if(!(w&1))return Na(x,Ir()),null;var B=Pw(x,w);if(x.tag!==0&&B===2){var F=xm(x);F!==0&&(w=F,B=D5(x,F))}if(B===1)throw B=Iv,vA(x,0),_d(x,w),Na(x,Ir()),B;if(B===6)throw Error(o(345));return x.finishedWork=x.current.alternate,x.finishedLanes=w,_A(x,Ia),Na(x,Ir()),null}function sk(x){yd!==null&&yd.tag===0&&!(Yn&6)&&xA();var w=Yn;Yn|=1;var B=Wr.transition,F=ui;try{if(Wr.transition=null,ui=1,x)return x()}finally{ui=F,Wr.transition=B,Yn=w,!(Yn&6)&&Yo()}}function O5(){ml=Hm.current,Dt(Hm)}function vA(x,w){x.finishedWork=null,x.finishedLanes=0;var B=x.timeoutHandle;if(B!==qt&&(x.timeoutHandle=qt,Ct(B)),is!==null)for(B=is.return;B!==null;){var F=B;switch(vv(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&oe();break;case 3:Nh(),Dt(wn),Dt(ii),xv();break;case 5:Oc(F);break;case 4:Nh();break;case 13:Dt(er);break;case 19:Dt(er);break;case 10:ru(F.type._context);break;case 22:case 23:O5()}B=B.return}if(ns=x,is=x=xd(x.current,null),Ks=ml=w,ws=0,Iv=null,R5=ww=qm=0,Ia=Nv=null,su!==null){for(w=0;w<su.length;w++)if(B=su[w],F=B.interleaved,F!==null){B.interleaved=null;var H=F.next,$=B.pending;if($!==null){var de=$.next;$.next=H,F.next=de}B.pending=F}su=null}return x}function ok(x,w){do{var B=is;try{if(id(),Im.current=Lm,fA){for(var F=ur.memoizedState;F!==null;){var H=F.queue;H!==null&&(H.pending=null),F=F.next}fA=!1}if(dd=0,Nr=Is=ur=null,Dh=!1,dA=0,C5.current=null,B===null||B.return===null){ws=1,Iv=w,is=null;break}e:{var $=x,de=B.return,Ce=B,et=w;if(w=Ks,Ce.flags|=32768,et!==null&&typeof et=="object"&&typeof et.then=="function"){var St=et,en=Ce,Dn=en.tag;if(!(en.mode&1)&&(Dn===0||Dn===11||Dn===15)){var dn=en.alternate;dn?(en.updateQueue=dn.updateQueue,en.memoizedState=dn.memoizedState,en.lanes=dn.lanes):(en.updateQueue=null,en.memoizedState=null)}var Vi=mw(de);if(Vi!==null){Vi.flags&=-257,ju(Vi,de,Ce,$,w),Vi.mode&1&&Aw($,St,w),w=Vi,et=St;var un=w.updateQueue;if(un===null){var bo=new Set;bo.add(et),w.updateQueue=bo}else un.add(et);break e}else{if(!(w&1)){Aw($,St,w),F5();break e}et=Error(o(426))}}else if(Yi&&Ce.mode&1){var fu=mw(de);if(fu!==null){!(fu.flags&65536)&&(fu.flags|=256),ju(fu,de,Ce,$,w),_o(et);break e}}$=et,ws!==4&&(ws=2),Nv===null?Nv=[$]:Nv.push($),et=Om(et,Ce),Ce=de;do{switch(Ce.tag){case 3:Ce.flags|=65536,w&=-w,Ce.lanes|=w;var Ve=dw(Ce,et,w);qb(Ce,Ve);break e;case 1:$=et;var Ie=Ce.type,Xe=Ce.stateNode;if(!(Ce.flags&128)&&(typeof Ie.getDerivedStateFromError=="function"||Xe!==null&&typeof Xe.componentDidCatch=="function"&&(gd===null||!gd.has(Xe)))){Ce.flags|=65536,w&=-w,Ce.lanes|=w;var Xt=pw(Ce,$,w);qb(Ce,Xt);break e}}Ce=Ce.return}while(Ce!==null)}uk(B)}catch(on){w=on,is===B&&B!==null&&(is=B=B.return);continue}break}while(!0)}function ak(){var x=bw.current;return bw.current=Lm,x===null?Lm:x}function F5(){(ws===0||ws===3||ws===2)&&(ws=4),ns===null||!(qm&268435455)&&!(ww&268435455)||_d(ns,Ks)}function Pw(x,w){var B=Yn;Yn|=2;var F=ak();ns===x&&Ks===w||vA(x,w);do try{zre();break}catch(H){ok(x,H)}while(!0);if(id(),Yn=B,bw.current=F,is!==null)throw Error(o(261));return ns=null,Ks=0,ws}function zre(){for(;is!==null;)lk(is)}function Gre(){for(;is!==null&&!p5();)lk(is)}function lk(x){var w=fk(x.alternate,x,ml);x.memoizedProps=x.pendingProps,w===null?uk(x):is=w,C5.current=null}function uk(x){var w=x;do{var B=w.alternate;if(x=w.return,w.flags&32768){if(B=_e(B,w),B!==null){B.flags&=32767,is=B;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{ws=6,is=null;return}}else if(B=Ls(B,w,ml),B!==null){is=B;return}if(w=w.sibling,w!==null){is=w;return}is=w=x}while(w!==null);ws===0&&(ws=5)}function _A(x,w){var B=ui,F=Wr.transition;try{Wr.transition=null,ui=1,Hre(x,w,B)}finally{Wr.transition=F,ui=B}return null}function Hre(x,w,B){do xA();while(yd!==null);if(Yn&6)throw Error(o(327));var F=x.finishedWork,H=x.finishedLanes;if(F===null)return null;if(x.finishedWork=null,x.finishedLanes=0,F===x.current)throw Error(o(177));x.callbackNode=null,x.callbackPriority=0;var $=F.lanes|F.childLanes;if(d5(x,$),x===ns&&(is=ns=null,Ks=0),!(F.subtreeFlags&2064)&&!(F.flags&2064)||Mw||(Mw=!0,dk(gv,function(){return xA(),null})),$=(F.flags&15990)!==0,F.subtreeFlags&15990||$){$=Wr.transition,Wr.transition=null;var de=ui;ui=1;var Ce=Yn;Yn|=4,C5.current=null,Lt(x,F),Ore(x,F),ae(x.containerInfo),x.current=F,Fre(F),Ub(),Yn=Ce,ui=de,Wr.transition=$}else x.current=F;if(Mw&&(Mw=!1,yd=x,Tw=H),$=x.pendingLanes,$===0&&(gd=null),m5(F.stateNode),Na(x,Ir()),w!==null)for(B=x.onRecoverableError,F=0;F<w.length;F++)B(w[F]);if(Sw)throw Sw=!1,x=I5,I5=null,x;return Tw&1&&x.tag!==0&&xA(),$=x.pendingLanes,$&1?x===N5?Dv++:(Dv=0,N5=x):Dv=0,Yo(),null}function xA(){if(yd!==null){var x=Av(Tw),w=Wr.transition,B=ui;try{if(Wr.transition=null,ui=16>x?16:x,yd===null)var F=!1;else{if(x=yd,yd=null,Tw=0,Yn&6)throw Error(o(331));var H=Yn;for(Yn|=4,be=x.current;be!==null;){var $=be,de=$.child;if(be.flags&16){var Ce=$.deletions;if(Ce!==null){for(var et=0;et<Ce.length;et++){var St=Ce[et];for(be=St;be!==null;){var en=be;switch(en.tag){case 0:case 11:case 15:Ut(8,en,$)}var Dn=en.child;if(Dn!==null)Dn.return=en,be=Dn;else for(;be!==null;){en=be;var dn=en.sibling,Vi=en.return;if(ri(en),en===St){be=null;break}if(dn!==null){dn.return=Vi,be=dn;break}be=Vi}}}var un=$.alternate;if(un!==null){var bo=un.child;if(bo!==null){un.child=null;do{var fu=bo.sibling;bo.sibling=null,bo=fu}while(bo!==null)}}be=$}}if($.subtreeFlags&2064&&de!==null)de.return=$,be=de;else e:for(;be!==null;){if($=be,$.flags&2048)switch($.tag){case 0:case 11:case 15:Ut(9,$,$.return)}var Ve=$.sibling;if(Ve!==null){Ve.return=$.return,be=Ve;break e}be=$.return}}var Ie=x.current;for(be=Ie;be!==null;){de=be;var Xe=de.child;if(de.subtreeFlags&2064&&Xe!==null)Xe.return=de,be=Xe;else e:for(de=Ie;be!==null;){if(Ce=be,Ce.flags&2048)try{switch(Ce.tag){case 0:case 11:case 15:bt(9,Ce)}}catch(on){Da(Ce,Ce.return,on)}if(Ce===de){be=null;break e}var Xt=Ce.sibling;if(Xt!==null){Xt.return=Ce.return,be=Xt;break e}be=Ce.return}}if(Yn=H,Yo(),hl&&typeof hl.onPostCommitFiberRoot=="function")try{hl.onPostCommitFiberRoot(lA,x)}catch{}F=!0}return F}finally{ui=B,Wr.transition=w}}return!1}function ck(x,w,B){w=Om(B,w),w=dw(x,w,1),Dc(x,w),w=ea(),x=Rw(x,1),x!==null&&(oA(x,1,w),Na(x,w))}function Da(x,w,B){if(x.tag===3)ck(x,x,B);else for(;w!==null;){if(w.tag===3){ck(w,x,B);break}else if(w.tag===1){var F=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(gd===null||!gd.has(F))){x=Om(B,x),x=pw(w,x,1),Dc(w,x),x=ea(),w=Rw(w,1),w!==null&&(oA(w,1,x),Na(w,x));break}}w=w.return}}function qre(x,w,B){var F=x.pingCache;F!==null&&F.delete(w),w=ea(),x.pingedLanes|=x.suspendedLanes&B,ns===x&&(Ks&B)===B&&(ws===4||ws===3&&(Ks&130023424)===Ks&&500>Ir()-P5?vA(x,0):R5|=B),Na(x,w)}function hk(x,w){w===0&&(x.mode&1?(w=Ea,Ea<<=1,!(Ea&130023424)&&(Ea=4194304)):w=1);var B=ea();x=Rw(x,w),x!==null&&(oA(x,w,B),Na(x,B))}function Vre(x){var w=x.memoizedState,B=0;w!==null&&(B=w.retryLane),hk(x,B)}function jre(x,w){var B=0;switch(x.tag){case 13:var F=x.stateNode,H=x.memoizedState;H!==null&&(B=H.retryLane);break;case 19:F=x.stateNode;break;default:throw Error(o(314))}F!==null&&F.delete(w),hk(x,B)}var fk;fk=function(x,w,B){if(x!==null)if(x.memoizedProps!==w.pendingProps||wn.current)ts=!0;else{if(!(x.lanes&B)&&!(w.flags&128))return ts=!1,me(x,w,B);ts=!!(x.flags&131072)}else ts=!1,Yi&&w.flags&1048576&&uA(w,Pm,w.index);switch(w.lanes=0,w.tag){case 2:var F=w.type;x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),x=w.pendingProps;var H=Xo(w,ii.current);Eh(w,B),H=wv(null,w,F,x,H,B);var $=Sv();return w.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,Ei(F)?($=!0,Bc(w)):$=!1,w.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,Tm(w),H.updater=Rm,w.stateNode=H,H._reactInternals=w,yv(w,F,x,B),w=Gm(null,w,F,!0,$,B)):(w.tag=0,Yi&&$&&Ri(w),Os(null,w,H,B),w=w.child),w;case 16:F=w.elementType;e:{switch(x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),x=w.pendingProps,H=F._init,F=H(F._payload),w.type=F,H=w.tag=Wre(F),x=Ca(F,x),H){case 0:w=md(null,w,F,x,B);break e;case 1:w=kc(null,w,F,x,B);break e;case 11:w=ht(null,w,F,x,B);break e;case 14:w=Tt(null,w,F,Ca(F.type,x),B);break e}throw Error(o(306,F,""))}return w;case 0:return F=w.type,H=w.pendingProps,H=w.elementType===F?H:Ca(F,H),md(x,w,F,H,B);case 1:return F=w.type,H=w.pendingProps,H=w.elementType===F?H:Ca(F,H),kc(x,w,F,H,B);case 3:e:{if($u(w),x===null)throw Error(o(387));F=w.pendingProps,$=w.memoizedState,H=$.element,Hb(x,w),Cm(w,F,null,B);var de=w.memoizedState;if(F=de.element,ce&&$.isDehydrated)if($={element:F,isDehydrated:!1,cache:de.cache,transitions:de.transitions},w.updateQueue.baseState=$,w.memoizedState=$,w.flags&256){H=Error(o(423)),w=m(x,w,F,B,H);break e}else if(F!==H){H=Error(o(424)),w=m(x,w,F,B,H);break e}else for(ce&&(Jo=sn(w.stateNode.containerInfo),Ko=w,Yi=!0,dl=null,cA=!1),B=Qb(w,null,F,B),w.child=B;B;)B.flags=B.flags&-3|4096,B=B.sibling;else{if(od(),F===H){w=ue(x,w,B);break e}Os(x,w,F,B)}w=w.child}return w;case 5:return fd(w),x===null&&qu(w),F=w.type,H=w.pendingProps,$=x!==null?x.memoizedProps:null,de=H.children,Oe(F,H)?de=null:$!==null&&Oe(F,$)&&(w.flags|=32),gA(x,w),Os(x,w,de,B),w.child;case 6:return x===null&&qu(w),null;case 13:return S(x,w,B);case 4:return Bm(w,w.stateNode.containerInfo),F=w.pendingProps,x===null?w.child=au(w,null,F,B):Os(x,w,F,B),w.child;case 11:return F=w.type,H=w.pendingProps,H=w.elementType===F?H:Ca(F,H),ht(x,w,F,H,B);case 7:return Os(x,w,w.pendingProps,B),w.child;case 8:return Os(x,w,w.pendingProps.children,B),w.child;case 12:return Os(x,w,w.pendingProps.children,B),w.child;case 10:e:{if(F=w.type._context,H=w.pendingProps,$=w.memoizedProps,de=H.value,Ic(w,F,de),$!==null)if(tu($.value,de)){if($.children===H.children&&!wn.current){w=ue(x,w,B);break e}}else for($=w.child,$!==null&&($.return=w);$!==null;){var Ce=$.dependencies;if(Ce!==null){de=$.child;for(var et=Ce.firstContext;et!==null;){if(et.context===F){if($.tag===1){et=zu(-1,B&-B),et.tag=2;var St=$.updateQueue;if(St!==null){St=St.shared;var en=St.pending;en===null?et.next=et:(et.next=en.next,en.next=et),St.pending=et}}$.lanes|=B,et=$.alternate,et!==null&&(et.lanes|=B),Mm($.return,B,w),Ce.lanes|=B;break}et=et.next}}else if($.tag===10)de=$.type===w.type?null:$.child;else if($.tag===18){if(de=$.return,de===null)throw Error(o(341));de.lanes|=B,Ce=de.alternate,Ce!==null&&(Ce.lanes|=B),Mm(de,B,w),de=$.sibling}else de=$.child;if(de!==null)de.return=$;else for(de=$;de!==null;){if(de===w){de=null;break}if($=de.sibling,$!==null){$.return=de.return,de=$;break}de=de.return}$=de}Os(x,w,H.children,B),w=w.child}return w;case 9:return H=w.type,F=w.pendingProps.children,Eh(w,B),H=yo(H),F=F(H),w.flags|=1,Os(x,w,F,B),w.child;case 14:return F=w.type,H=Ca(F,w.pendingProps),H=Ca(F.type,H),Tt(x,w,F,H,B);case 15:return Pv(x,w,w.type,w.pendingProps,B);case 17:return F=w.type,H=w.pendingProps,H=w.elementType===F?H:Ca(F,H),x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,Ei(F)?(x=!0,Bc(w)):x=!1,Eh(w,B),Wb(w,F,H),yv(w,F,H,B),Gm(null,w,F,!0,x,B);case 19:return J(x,w,B);case 22:return zm(x,w,B)}throw Error(o(156,w.tag))};function dk(x,w){return mv(x,w)}function $re(x,w,B,F){this.tag=x,this.key=B,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hu(x,w,B,F){return new $re(x,w,B,F)}function k5(x){return x=x.prototype,!(!x||!x.isReactComponent)}function Wre(x){if(typeof x=="function")return k5(x)?1:0;if(x!=null){if(x=x.$$typeof,x===v)return 11;if(x===M)return 14}return 2}function xd(x,w){var B=x.alternate;return B===null?(B=hu(x.tag,w,x.key,x.mode),B.elementType=x.elementType,B.type=x.type,B.stateNode=x.stateNode,B.alternate=x,x.alternate=B):(B.pendingProps=w,B.type=x.type,B.flags=0,B.subtreeFlags=0,B.deletions=null),B.flags=x.flags&14680064,B.childLanes=x.childLanes,B.lanes=x.lanes,B.child=x.child,B.memoizedProps=x.memoizedProps,B.memoizedState=x.memoizedState,B.updateQueue=x.updateQueue,w=x.dependencies,B.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},B.sibling=x.sibling,B.index=x.index,B.ref=x.ref,B}function Bw(x,w,B,F,H,$){var de=2;if(F=x,typeof x=="function")k5(x)&&(de=1);else if(typeof x=="string")de=5;else e:switch(x){case c:return bA(B.children,H,$,w);case h:de=8,H|=8;break;case f:return x=hu(12,B,w,H|2),x.elementType=f,x.lanes=$,x;case b:return x=hu(13,B,w,H),x.elementType=b,x.lanes=$,x;case _:return x=hu(19,B,w,H),x.elementType=_,x.lanes=$,x;case R:return Iw(B,H,$,w);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case d:de=10;break e;case p:de=9;break e;case v:de=11;break e;case M:de=14;break e;case E:de=16,F=null;break e}throw Error(o(130,x==null?x:typeof x,""))}return w=hu(de,B,w,H),w.elementType=x,w.type=F,w.lanes=$,w}function bA(x,w,B,F){return x=hu(7,x,F,w),x.lanes=B,x}function Iw(x,w,B,F){return x=hu(22,x,F,w),x.elementType=R,x.lanes=B,x.stateNode={},x}function U5(x,w,B){return x=hu(6,x,null,w),x.lanes=B,x}function z5(x,w,B){return w=hu(4,x.children!==null?x.children:[],x.key,w),w.lanes=B,w.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},w}function Xre(x,w,B,F,H){this.tag=w,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=qt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pv(0),this.expirationTimes=pv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pv(0),this.identifierPrefix=F,this.onRecoverableError=H,ce&&(this.mutableSourceEagerHydrationData=null)}function pk(x,w,B,F,H,$,de,Ce,et){return x=new Xre(x,w,B,Ce,et),w===1?(w=1,$===!0&&(w|=8)):w=0,$=hu(3,null,null,w),x.current=$,$.stateNode=x,$.memoizedState={element:F,isDehydrated:B,cache:null,transitions:null},Tm($),x}function Ak(x){if(!x)return lt;x=x._reactInternals;e:{if(G(x)!==x||x.tag!==1)throw Error(o(170));var w=x;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(Ei(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(o(171))}if(x.tag===1){var B=x.type;if(Ei(B))return cl(x,B,w)}return w}function mk(x){var w=x._reactInternals;if(w===void 0)throw typeof x.render=="function"?Error(o(188)):(x=Object.keys(x).join(","),Error(o(268,x)));return x=Q(w),x===null?null:x.stateNode}function gk(x,w){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var B=x.retryLane;x.retryLane=B!==0&&B<w?B:w}}function G5(x,w){gk(x,w),(x=x.alternate)&&gk(x,w)}function Yre(x){return x=Q(x),x===null?null:x.stateNode}function Qre(){return null}return t.attemptContinuousHydration=function(x){if(x.tag===13){var w=ea();cu(x,134217728,w),G5(x,134217728)}},t.attemptHydrationAtCurrentPriority=function(x){if(x.tag===13){var w=ea(),B=vd(x);cu(x,B,w),G5(x,B)}},t.attemptSynchronousHydration=function(x){switch(x.tag){case 3:var w=x.stateNode;if(w.current.memoizedState.isDehydrated){var B=lr(w.pendingLanes);B!==0&&(Ci(w,B|1),Na(w,Ir()),!(Yn&6)&&(Vm(),Yo()))}break;case 13:var F=ea();sk(function(){return cu(x,1,F)}),G5(x,1)}},t.batchedUpdates=function(x,w){var B=Yn;Yn|=1;try{return x(w)}finally{Yn=B,Yn===0&&(Vm(),nu&&Yo())}},t.createComponentSelector=function(x){return{$$typeof:gw,value:x}},t.createContainer=function(x,w,B,F,H,$,de){return pk(x,w,!1,null,B,F,H,$,de)},t.createHasPseudoClassSelector=function(x){return{$$typeof:yw,value:x}},t.createHydrationContainer=function(x,w,B,F,H,$,de,Ce,et){return x=pk(B,F,!0,x,H,$,de,Ce,et),x.context=Ak(null),B=x.current,F=ea(),H=vd(B),$=zu(F,H),$.callback=w??null,Dc(B,$),x.current.lanes=H,oA(x,H,F),Na(x,F),x},t.createPortal=function(x,w,B){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:F==null?null:""+F,children:x,containerInfo:w,implementation:B}},t.createRoleSelector=function(x){return{$$typeof:vw,value:x}},t.createTestNameSelector=function(x){return{$$typeof:_w,value:x}},t.createTextSelector=function(x){return{$$typeof:xw,value:x}},t.deferredUpdates=function(x){var w=ui,B=Wr.transition;try{return Wr.transition=null,ui=16,x()}finally{ui=w,Wr.transition=B}},t.discreteUpdates=function(x,w,B,F,H){var $=ui,de=Wr.transition;try{return Wr.transition=null,ui=1,x(w,B,F,H)}finally{ui=$,Wr.transition=de,Yn===0&&Vm()}},t.findAllNodes=E5,t.findBoundingRects=function(x,w){if(!fe)throw Error(o(363));w=E5(x,w),x=[];for(var B=0;B<w.length;B++)x.push(De(w[B]));for(w=x.length-1;0<w;w--){B=x[w];for(var F=B.x,H=F+B.width,$=B.y,de=$+B.height,Ce=w-1;0<=Ce;Ce--)if(w!==Ce){var et=x[Ce],St=et.x,en=St+et.width,Dn=et.y,dn=Dn+et.height;if(F>=St&&$>=Dn&&H<=en&&de<=dn){x.splice(w,1);break}else if(F!==St||B.width!==et.width||dn<$||Dn>de){if(!($!==Dn||B.height!==et.height||en<F||St>H)){St>F&&(et.width+=St-F,et.x=F),en<H&&(et.width=H-St),x.splice(w,1);break}}else{Dn>$&&(et.height+=Dn-$,et.y=$),dn<de&&(et.height=de-Dn),x.splice(w,1);break}}}return x},t.findHostInstance=mk,t.findHostInstanceWithNoPortals=function(x){return x=U(x),x=x!==null?ee(x):null,x===null?null:x.stateNode},t.findHostInstanceWithWarning=function(x){return mk(x)},t.flushControlled=function(x){var w=Yn;Yn|=1;var B=Wr.transition,F=ui;try{Wr.transition=null,ui=1,x()}finally{ui=F,Wr.transition=B,Yn=w,Yn===0&&(Vm(),Yo())}},t.flushPassiveEffects=xA,t.flushSync=sk,t.focusWithin=function(x,w){if(!fe)throw Error(o(363));for(x=S5(x),w=nk(x,w),w=Array.from(w),x=0;x<w.length;){var B=w[x++];if(!Fe(B)){if(B.tag===5&&Bt(B.stateNode))return!0;for(B=B.child;B!==null;)w.push(B),B=B.sibling}}return!1},t.getCurrentUpdatePriority=function(){return ui},t.getFindAllNodesFailureDescription=function(x,w){if(!fe)throw Error(o(363));var B=0,F=[];x=[S5(x),0];for(var H=0;H<x.length;){var $=x[H++],de=x[H++],Ce=w[de];if(($.tag!==5||!Fe($))&&(M5($,Ce)&&(F.push(T5(Ce)),de++,de>B&&(B=de)),de<w.length))for($=$.child;$!==null;)x.push($,de),$=$.sibling}if(B<w.length){for(x=[];B<w.length;B++)x.push(T5(w[B]));return`findAllNodes was able to match part of the selector:
  `+(F.join(" > ")+`

No matching component was found for:
  `)+x.join(" > ")}return null},t.getPublicRootInstance=function(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return Z(x.child.stateNode);default:return x.child.stateNode}},t.injectIntoDevTools=function(x){if(x={bundleType:x.bundleType,version:x.version,rendererPackageName:x.rendererPackageName,rendererConfig:x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Yre,findFiberByHostInstance:x.findFiberByHostInstance||Qre,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")x=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)x=!0;else{try{lA=w.inject(x),hl=w}catch{}x=!!w.checkDCE}}return x},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(x,w,B,F){if(!fe)throw Error(o(363));x=E5(x,w);var H=ct(x,B,F).disconnect;return{disconnect:function(){H()}}},t.registerMutableSourceForHydration=function(x,w){var B=w._getVersion;B=B(w._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[w,B]:x.mutableSourceEagerHydrationData.push(w,B)},t.runWithPriority=function(x,w){var B=ui;try{return ui=x,w()}finally{ui=B}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(x,w,B,F){var H=w.current,$=ea(),de=vd(H);return B=Ak(B),w.context===null?w.context=B:w.pendingContext=B,w=zu($,de),w.payload={element:x},F=F===void 0?null:F,F!==null&&(w.callback=F),Dc(H,w),x=cu(H,de,$),x!==null&&Em(x,H,de),de},t};fQ.exports=FAe;var kAe=fQ.exports;const UAe=xh(kAe);var dQ={exports:{}},pQ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(j,ie){var ae=j.length;j.push(ie);e:for(;0<ae;){var pe=ae-1>>>1,Pe=j[pe];if(0<r(Pe,ie))j[pe]=ie,j[ae]=Pe,ae=pe;else break e}}function t(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var ie=j[0],ae=j.pop();if(ae!==ie){j[0]=ae;e:for(var pe=0,Pe=j.length,He=Pe>>>1;pe<He;){var Se=2*(pe+1)-1,Oe=j[Se],Ye=Se+1,it=j[Ye];if(0>r(Oe,ae))Ye<Pe&&0>r(it,Oe)?(j[pe]=it,j[Ye]=ae,pe=Ye):(j[pe]=Oe,j[Se]=ae,pe=Se);else if(Ye<Pe&&0>r(it,ae))j[pe]=it,j[Ye]=ae,pe=Ye;else break e}}return ie}function r(j,ie){var ae=j.sortIndex-ie.sortIndex;return ae!==0?ae:j.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,d=!1,p=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(j){for(var ie=t(u);ie!==null;){if(ie.callback===null)n(u);else if(ie.startTime<=j)n(u),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=t(u)}}function R(j){if(v=!1,E(j),!p)if(t(l)!==null)p=!0,Z(L);else{var ie=t(u);ie!==null&&he(R,ie.startTime-j)}}function L(j,ie){p=!1,v&&(v=!1,_(k),k=-1),d=!0;var ae=f;try{for(E(ie),h=t(l);h!==null&&(!(h.expirationTime>ie)||j&&!U());){var pe=h.callback;if(typeof pe=="function"){h.callback=null,f=h.priorityLevel;var Pe=pe(h.expirationTime<=ie);ie=i.unstable_now(),typeof Pe=="function"?h.callback=Pe:h===t(l)&&n(l),E(ie)}else n(l);h=t(l)}if(h!==null)var He=!0;else{var Se=t(u);Se!==null&&he(R,Se.startTime-ie),He=!1}return He}finally{h=null,f=ae,d=!1}}var I=!1,D=null,k=-1,G=5,O=-1;function U(){return!(i.unstable_now()-O<G)}function Q(){if(D!==null){var j=i.unstable_now();O=j;var ie=!0;try{ie=D(!0,j)}finally{ie?X():(I=!1,D=null)}}else I=!1}var X;if(typeof M=="function")X=function(){M(Q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,K=ee.port2;ee.port1.onmessage=Q,X=function(){K.postMessage(null)}}else X=function(){b(Q,0)};function Z(j){D=j,I||(I=!0,X())}function he(j,ie){k=b(function(){j(i.unstable_now())},ie)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){p||d||(p=!0,Z(L))},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return f},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(j){switch(f){case 1:case 2:case 3:var ie=3;break;default:ie=f}var ae=f;f=ie;try{return j()}finally{f=ae}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,ie){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ae=f;f=j;try{return ie()}finally{f=ae}},i.unstable_scheduleCallback=function(j,ie,ae){var pe=i.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?pe+ae:pe):ae=pe,j){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ae+Pe,j={id:c++,callback:ie,priorityLevel:j,startTime:ae,expirationTime:Pe,sortIndex:-1},ae>pe?(j.sortIndex=ae,e(u,j),t(l)===null&&j===t(u)&&(v?(_(k),k=-1):v=!0,he(R,ae-pe))):(j.sortIndex=Pe,e(l,j),p||d||(p=!0,Z(L))),j},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(j){var ie=f;return function(){var ae=f;f=ie;try{return j.apply(this,arguments)}finally{f=ae}}}})(pQ);dQ.exports=pQ;var lU=dQ.exports;const jL={},zAe=i=>void Object.assign(jL,i);function GAe(i,e){function t(c,{args:h=[],attach:f,...d},p){let v=`${c[0].toUpperCase()}${c.slice(1)}`,b;if(c==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=d.object;b=jg(_,{type:c,root:p,attach:f,primitive:!0})}else{const _=jL[v];if(!_)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");b=jg(new _(...h),{type:c,root:p,attach:f,memoizedProps:{args:h}})}return b.__r3f.attach===void 0&&(b instanceof fn?b.__r3f.attach="geometry":b instanceof ps&&(b.__r3f.attach="material")),v!=="inject"&&a8(b,d),b}function n(c,h){let f=!1;if(h){var d,p;(d=h.__r3f)!=null&&d.attach?o8(c,h,h.__r3f.attach):h.isObject3D&&c.isObject3D&&(c.add(h),f=!0),f||(p=c.__r3f)==null||p.objects.push(h),h.__r3f||jg(h,{}),h.__r3f.parent=c,BB(h),$g(h)}}function r(c,h,f){let d=!1;if(h){var p,v;if((p=h.__r3f)!=null&&p.attach)o8(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){h.parent=c,h.dispatchEvent({type:"added"}),c.dispatchEvent({type:"childadded",child:h});const b=c.children.filter(M=>M!==h),_=b.indexOf(f);c.children=[...b.slice(0,_),h,...b.slice(_)],d=!0}d||(v=c.__r3f)==null||v.objects.push(h),h.__r3f||jg(h,{}),h.__r3f.parent=c,BB(h),$g(h)}}function s(c,h,f=!1){c&&[...c].forEach(d=>o(h,d,f))}function o(c,h,f){if(h){var d,p,v;if(h.__r3f&&(h.__r3f.parent=null),(d=c.__r3f)!=null&&d.objects&&(c.__r3f.objects=c.__r3f.objects.filter(R=>R!==h)),(p=h.__r3f)!=null&&p.attach)dU(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){var b;c.remove(h),(b=h.__r3f)!=null&&b.root&&QAe(MM(h),h)}const M=(v=h.__r3f)==null?void 0:v.primitive,E=!M&&(f===void 0?h.dispose!==null:f);if(!M){var _;s((_=h.__r3f)==null?void 0:_.objects,h,E),s(h.children,h,E)}if(delete h.__r3f,E&&h.dispose&&h.type!=="Scene"){const R=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?lU.unstable_scheduleCallback(lU.unstable_IdlePriority,R):R()}$g(c)}}function a(c,h,f,d){var p;const v=(p=c.__r3f)==null?void 0:p.parent;if(!v)return;const b=t(h,f,c.__r3f.root);if(c.children){for(const _ of c.children)_.__r3f&&n(b,_);c.children=c.children.filter(_=>!_.__r3f)}c.__r3f.objects.forEach(_=>n(b,_)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(v,c),b.parent&&(b.__r3f.autoRemovedBeforeAppend=!0),n(v,b),b.raycast&&b.__r3f.eventCount&&MM(b).getState().internal.interaction.push(b),[d,d.alternate].forEach(_=>{_!==null&&(_.stateNode=b,_.ref&&(typeof _.ref=="function"?_.ref(b):_.ref.current=b))})}const l=()=>{};return{reconciler:UAe({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,h)=>{if(!h)return;const f=c.getState().scene;f.__r3f&&(f.__r3f.root=c,n(f,h))},removeChildFromContainer:(c,h)=>{h&&o(c.getState().scene,h)},insertInContainerBefore:(c,h,f)=>{if(!h||!f)return;const d=c.getState().scene;d.__r3f&&r(d,h,f)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var h;return!!((h=c==null?void 0:c.__r3f)!=null?h:{}).handlers},prepareUpdate(c,h,f,d){var p;if(((p=c==null?void 0:c.__r3f)!=null?p:{}).primitive&&d.object&&d.object!==c)return[!0];{const{args:b=[],children:_,...M}=d,{args:E=[],children:R,...L}=f;if(!Array.isArray(b))throw new Error("R3F: the args prop must be an array!");if(b.some((D,k)=>D!==E[k]))return[!0];const I=xQ(c,M,L,!0);return I.changes.length?[!1,I]:null}},commitUpdate(c,[h,f],d,p,v,b){h?a(c,d,v,b):a8(c,f)},commitMount(c,h,f,d){var p;const v=(p=c.__r3f)!=null?p:{};c.raycast&&v.handlers&&v.eventCount&&MM(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>jg(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var h;const{attach:f,parent:d}=(h=c.__r3f)!=null?h:{};f&&d&&dU(d,c,f),c.isObject3D&&(c.visible=!1),$g(c)},unhideInstance(c,h){var f;const{attach:d,parent:p}=(f=c.__r3f)!=null?f:{};d&&p&&o8(p,c,d),(c.isObject3D&&h.visible==null||h.visible)&&(c.visible=!0),$g(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():c1.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Ki.fun(performance.now)?performance.now:Ki.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Ki.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Ki.fun(clearTimeout)?clearTimeout:void 0}),applyProps:a8}}var uU,cU;const s8=i=>"colorSpace"in i||"outputColorSpace"in i,AQ=()=>{var i;return(i=jL.ColorManagement)!=null?i:null},mQ=i=>i&&i.isOrthographicCamera,HAe=i=>i&&i.hasOwnProperty("current"),hb=typeof window<"u"&&((uU=window.document)!=null&&uU.createElement||((cU=window.navigator)==null?void 0:cU.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function gQ(i){const e=W.useRef(i);return hb(()=>void(e.current=i),[i]),e}function qAe({set:i}){return hb(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class yQ extends W.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}yQ.getDerivedStateFromError=()=>({error:!0});const vQ="__default",hU=new Map,VAe=i=>i&&!!i.memoized&&!!i.changes;function _Q(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}const n2=i=>{var e;return(e=i.__r3f)==null?void 0:e.root.getState()};function MM(i){let e=i.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Ki={obj:i=>i===Object(i)&&!Ki.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Ki.str(i)||Ki.num(i)||Ki.boo(i))return i===e;const s=Ki.obj(i);if(s&&n==="reference")return i===e;const o=Ki.arr(i);if(o&&t==="reference")return i===e;if((o||s)&&i===e)return!0;let a;for(a in i)if(!(a in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(a in r?e:i)if(!Ki.equ(i[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:i)if(i[a]!==e[a])return!1;if(Ki.und(a)){if(o&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function jAe(i){const e={nodes:{},materials:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function $Ae(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const e in i)e.dispose==null||e.dispose(),delete i[e]}function jg(i,e){const t=i;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},i}function PB(i,e){let t=i;if(e.includes("-")){const n=e.split("-"),r=n.pop();return t=n.reduce((s,o)=>s[o],i),{target:t,key:r}}else return{target:t,key:e}}const fU=/-\d+$/;function o8(i,e,t){if(Ki.str(t)){if(fU.test(t)){const s=t.replace(fU,""),{target:o,key:a}=PB(i,s);Array.isArray(o[a])||(o[a]=[])}const{target:n,key:r}=PB(i,t);e.__r3f.previousAttach=n[r],n[r]=e}else e.__r3f.previousAttach=t(i,e)}function dU(i,e,t){var n,r;if(Ki.str(t)){const{target:s,key:o}=PB(i,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(i,e);(r=e.__r3f)==null||delete r.previousAttach}function xQ(i,{children:e,key:t,ref:n,...r},{children:s,key:o,ref:a,...l}={},u=!1){const c=i.__r3f,h=Object.entries(r),f=[];if(u){const p=Object.keys(l);for(let v=0;v<p.length;v++)r.hasOwnProperty(p[v])||h.unshift([p[v],vQ+"remove"])}h.forEach(([p,v])=>{var b;if((b=i.__r3f)!=null&&b.primitive&&p==="object"||Ki.equ(v,l[p]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(p))return f.push([p,v,!0,[]]);let _=[];p.includes("-")&&(_=p.split("-")),f.push([p,v,!1,_]);for(const M in r){const E=r[M];M.startsWith(`${p}-`)&&f.push([M,E,!1,M.split("-")])}});const d={...r};return c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.args&&(d.args=c.memoizedProps.args),c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.attach&&(d.attach=c.memoizedProps.attach),{memoized:d,changes:f}}const WAe=typeof process<"u"&&!1;function a8(i,e){var t;const n=i.__r3f,r=n==null?void 0:n.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=VAe(e)?e:xQ(i,e),l=n==null?void 0:n.eventCount;i.__r3f&&(i.__r3f.memoizedProps=o);for(let c=0;c<a.length;c++){let[h,f,d,p]=a[c];if(s8(i)){const M="srgb",E="srgb-linear";h==="encoding"?(h="colorSpace",f=f===3001?M:E):h==="outputEncoding"&&(h="outputColorSpace",f=f===3001?M:E)}let v=i,b=v[h];if(p.length&&(b=p.reduce((_,M)=>_[M],i),!(b&&b.set))){const[_,...M]=p.reverse();v=M.reverse().reduce((E,R)=>E[R],i),h=_}if(f===vQ+"remove")if(v.constructor){let _=hU.get(v.constructor);_||(_=new v.constructor,hU.set(v.constructor,_)),f=_[h]}else f=0;if(d&&n)f?n.handlers[h]=f:delete n.handlers[h],n.eventCount=Object.keys(n.handlers).length;else if(b&&b.set&&(b.copy||b instanceof b0)){if(Array.isArray(f))b.fromArray?b.fromArray(f):b.set(...f);else if(b.copy&&f&&f.constructor&&(WAe?b.constructor.name===f.constructor.name:b.constructor===f.constructor))b.copy(f);else if(f!==void 0){const _=b instanceof vt;!_&&b.setScalar?b.setScalar(f):b instanceof b0&&f instanceof b0?b.mask=f.mask:b.set(f),!AQ()&&s&&!s.linear&&_&&b.convertSRGBToLinear()}}else if(v[h]=f,v[h]instanceof or&&v[h].format===Fo&&v[h].type===xc&&s){const _=v[h];s8(_)&&s8(s.gl)?_.colorSpace=s.gl.outputColorSpace:_.encoding=s.gl.outputEncoding}$g(i)}if(n&&n.parent&&i.raycast&&l!==n.eventCount){const c=MM(i).getState().internal,h=c.interaction.indexOf(i);h>-1&&c.interaction.splice(h,1),n.eventCount&&c.interaction.push(i)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=i.__r3f)!=null&&t.parent&&BB(i),i}function $g(i){var e,t;const n=(e=i.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function BB(i){i.onUpdate==null||i.onUpdate(i)}function XAe(i,e){i.manual||(mQ(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function GS(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function YAe(){var i;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return c1.DefaultEventPriority;switch((i=e.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return c1.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return c1.ContinuousEventPriority;default:return c1.DefaultEventPriority}}function bQ(i,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(i.delete(n),r.target.releasePointerCapture(n)))}function QAe(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{bQ(t.capturedMap,e,n,r)})}function KAe(i){function e(l){const{internal:u}=i.getState(),c=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+c]}))}function n(l,u){const c=i.getState(),h=new Set,f=[],d=u?u(c.internal.interaction):c.internal.interaction;for(let _=0;_<d.length;_++){const M=n2(d[_]);M&&(M.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function p(_){const M=n2(_);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var E;M.events.compute==null||M.events.compute(l,M,(E=M.previousRoot)==null?void 0:E.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(_,!0):[]}let v=d.flatMap(p).sort((_,M)=>{const E=n2(_.object),R=n2(M.object);return!E||!R?_.distance-M.distance:R.events.priority-E.events.priority||_.distance-M.distance}).filter(_=>{const M=GS(_);return h.has(M)?!1:(h.add(M),!0)});c.events.filter&&(v=c.events.filter(v,c));for(const _ of v){let M=_.object;for(;M;){var b;(b=M.__r3f)!=null&&b.eventCount&&f.push({..._,eventObject:M}),M=M.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let _ of c.internal.capturedMap.get(l.pointerId).values())h.has(GS(_.intersection))||f.push(_.intersection);return f}function r(l,u,c,h){const f=i.getState();if(l.length){const d={stopped:!1};for(const p of l){const v=n2(p.object)||f,{raycaster:b,pointer:_,camera:M,internal:E}=v,R=new ne(_.x,_.y,0).unproject(M),L=O=>{var U,Q;return(U=(Q=E.capturedMap.get(O))==null?void 0:Q.has(p.eventObject))!=null?U:!1},I=O=>{const U={intersection:p,target:u.target};E.capturedMap.has(O)?E.capturedMap.get(O).set(p.eventObject,U):E.capturedMap.set(O,new Map([[p.eventObject,U]])),u.target.setPointerCapture(O)},D=O=>{const U=E.capturedMap.get(O);U&&bQ(E.capturedMap,p.eventObject,U,O)};let k={};for(let O in u){let U=u[O];typeof U!="function"&&(k[O]=U)}let G={...p,...k,pointer:_,intersections:l,stopped:d.stopped,delta:c,unprojectedPoint:R,ray:b.ray,camera:M,stopPropagation(){const O="pointerId"in u&&E.capturedMap.get(u.pointerId);if((!O||O.has(p.eventObject))&&(G.stopped=d.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(U=>U.eventObject===p.eventObject))){const U=l.slice(0,l.indexOf(p));s([...U,p])}},target:{hasPointerCapture:L,setPointerCapture:I,releasePointerCapture:D},currentTarget:{hasPointerCapture:L,setPointerCapture:I,releasePointerCapture:D},nativeEvent:u};if(h(G),d.stopped===!0)break}}return l}function s(l){const{internal:u}=i.getState();for(const c of u.hovered.values())if(!l.length||!l.find(h=>h.object===c.object&&h.index===c.index&&h.instanceId===c.instanceId)){const f=c.eventObject.__r3f,d=f==null?void 0:f.handlers;if(u.hovered.delete(GS(c)),f!=null&&f.eventCount){const p={...c,intersections:l};d.onPointerOut==null||d.onPointerOut(p),d.onPointerLeave==null||d.onPointerLeave(p)}}}function o(l,u){for(let c=0;c<u.length;c++){const h=u[c].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=i.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:h,internal:f}=i.getState();f.lastEvent.current=c;const d=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",b=n(c,d?t:void 0),_=p?e(c):0;l==="onPointerDown"&&(f.initialClick=[c.offsetX,c.offsetY],f.initialHits=b.map(E=>E.eventObject)),p&&!b.length&&_<=2&&(o(c,f.interaction),h&&h(c)),d&&s(b);function M(E){const R=E.eventObject,L=R.__r3f,I=L==null?void 0:L.handlers;if(L!=null&&L.eventCount)if(d){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const D=GS(E),k=f.hovered.get(D);k?k.stopped&&E.stopPropagation():(f.hovered.set(D,E),I.onPointerOver==null||I.onPointerOver(E),I.onPointerEnter==null||I.onPointerEnter(E))}I.onPointerMove==null||I.onPointerMove(E)}else{const D=I[l];D?(!p||f.initialHits.includes(R))&&(o(c,f.interaction.filter(k=>!f.initialHits.includes(k))),D(E)):p&&f.initialHits.includes(R)&&o(c,f.interaction.filter(k=>!f.initialHits.includes(k)))}}r(b,c,_,M)}}return{handlePointer:a}}const wQ=i=>!!(i!=null&&i.render),SQ=W.createContext(null),JAe=(i,e)=>{const t=VL((a,l)=>{const u=new ne,c=new ne,h=new ne;function f(_=l().camera,M=c,E=l().size){const{width:R,height:L,top:I,left:D}=E,k=R/L;M instanceof ne?h.copy(M):h.set(...M);const G=_.getWorldPosition(u).distanceTo(h);if(mQ(_))return{width:R/_.zoom,height:L/_.zoom,top:I,left:D,factor:1,distance:G,aspect:k};{const O=_.fov*Math.PI/180,U=2*Math.tan(O/2)*G,Q=U*(R/L);return{width:Q,height:U,top:I,left:D,factor:R/Q,distance:G,aspect:k}}}let d;const p=_=>a(M=>({performance:{...M.performance,current:_}})),v=new je;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>i(l(),_),advance:(_,M)=>e(_,M,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new cb,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();d&&clearTimeout(d),_.performance.current!==_.performance.min&&p(_.performance.min),d=setTimeout(()=>p(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:_=>a(M=>({...M,events:{...M.events,..._}})),setSize:(_,M,E,R,L)=>{const I=l().camera,D={width:_,height:M,top:R||0,left:L||0,updateStyle:E};a(k=>({size:D,viewport:{...k.viewport,...f(I,c,D)}}))},setDpr:_=>a(M=>{const E=_Q(_);return{viewport:{...M.viewport,dpr:E,initialDpr:M.viewport.initialDpr||E}}}),setFrameloop:(_="always")=>{const M=l().clock;M.stop(),M.elapsedTime=0,_!=="never"&&(M.start(),M.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:W.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,M,E)=>{const R=l().internal;return R.priority=R.priority+(M>0?1:0),R.subscribers.push({ref:_,priority:M,store:E}),R.subscribers=R.subscribers.sort((L,I)=>L.priority-I.priority),()=>{const L=l().internal;L!=null&&L.subscribers&&(L.priority=L.priority-(M>0?1:0),L.subscribers=L.subscribers.filter(I=>I.ref!==_))}}}}}),n=t.getState();let r=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:h}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var f;r=l,s=u.dpr,XAe(a,l),c.setPixelRatio(u.dpr);const d=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,d)}a!==o&&(o=a,h(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>i(a)),t};let HS,ZAe=new Set,e0e=new Set,t0e=new Set;function l8(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function i2(i,e){switch(i){case"before":return l8(ZAe,e);case"after":return l8(e0e,e);case"tail":return l8(t0e,e)}}let u8,c8;function h8(i,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),u8=e.internal.subscribers,HS=0;HS<u8.length;HS++)c8=u8[HS],c8.ref.current(c8.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function n0e(i){let e=!1,t=!1,n,r,s;function o(u){r=requestAnimationFrame(o),e=!0,n=0,i2("before",u),t=!0;for(const h of i.values()){var c;s=h.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((c=s.gl.xr)!=null&&c.isPresenting)&&(n+=h8(u,s))}if(t=!1,i2("after",u),n===0)return i2("tail",u),e=!1,cancelAnimationFrame(r)}function a(u,c=1){var h;if(!u)return i.forEach(f=>a(f.store.getState(),c));(h=u.gl.xr)!=null&&h.isPresenting||!u.internal.active||u.frameloop==="never"||(c>1?u.internal.frames=Math.min(60,u.internal.frames+c):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,c=!0,h,f){if(c&&i2("before",u),h)h8(u,h,f);else for(const d of i.values())h8(u,d.store.getState());c&&i2("after",u)}return{loop:o,invalidate:a,advance:l}}function MQ(){const i=W.useContext(SQ);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function No(i=t=>t,e){return MQ()(i,e)}function Yy(i,e=0){const t=MQ(),n=t.getState().internal.subscribe,r=gQ(i);return hb(()=>n(r,e,t),[e,n,t]),null}const pU=new WeakMap;function TQ(i,e){return function(t,...n){let r=pU.get(t);return r||(r=new t,pU.set(t,r)),i&&i(r),Promise.all(n.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,jAe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Cc(i,e,t,n){const r=Array.isArray(e)?e:[e],s=hQ(TQ(t,n),[i,...r],{equal:Ki.equ});return Array.isArray(e)?s:s[0]}Cc.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return NAe(TQ(t),[i,...n])};Cc.clear=function(i,e){const t=Array.isArray(e)?e:[e];return DAe([i,...t])};const Ay=new Map,{invalidate:AU,advance:mU}=n0e(Ay),{reconciler:eE,applyProps:cg}=GAe(Ay,YAe),hg={objects:"shallow",strict:!1},i0e=(i,e)=>{const t=typeof i=="function"?i(e):i;return wQ(t)?t:new xL({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...i})};function r0e(i,e){const t=typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement;if(e){const{width:n,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:n,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:n,height:r,top:s,left:o}=i.parentElement.getBoundingClientRect();return{width:n,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function s0e(i){const e=Ay.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=n||JAe(AU,mU),o=t||eE.createContainer(s,c1.ConcurrentRoot,null,!1,null,"",r,null);e||Ay.set(i,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:h,size:f,scene:d,events:p,onCreated:v,shadows:b=!1,linear:_=!1,flat:M=!1,legacy:E=!1,orthographic:R=!1,frameloop:L="always",dpr:I=[1,2],performance:D,raycaster:k,camera:G,onPointerMissed:O}=c,U=s.getState(),Q=U.gl;U.gl||U.set({gl:Q=i0e(h,i)});let X=U.raycaster;X||U.set({raycaster:X=new HL});const{params:ee,...K}=k||{};if(Ki.equ(K,X,hg)||cg(X,{...K}),Ki.equ(ee,X.params,hg)||cg(X,{params:{...X.params,...ee}}),!U.camera||U.camera===u&&!Ki.equ(u,G,hg)){u=G;const ae=G instanceof tb,pe=ae?G:R?new qa(0,0,0,0,.1,1e3):new $i(75,0,.1,1e3);ae||(pe.position.z=5,G&&(cg(pe,G),("aspect"in G||"left"in G||"right"in G||"bottom"in G||"top"in G)&&(pe.manual=!0,pe.updateProjectionMatrix())),!U.camera&&!(G!=null&&G.rotation)&&pe.lookAt(0,0,0)),U.set({camera:pe}),X.camera=pe}if(!U.scene){let ae;d instanceof sx?ae=d:(ae=new sx,d&&cg(ae,d)),U.set({scene:jg(ae)})}if(!U.xr){var Z;const ae=(He,Se)=>{const Oe=s.getState();Oe.frameloop!=="never"&&mU(He,!0,Oe,Se)},pe=()=>{const He=s.getState();He.gl.xr.enabled=He.gl.xr.isPresenting,He.gl.xr.setAnimationLoop(He.gl.xr.isPresenting?ae:null),He.gl.xr.isPresenting||AU(He)},Pe={connect(){const He=s.getState().gl;He.xr.addEventListener("sessionstart",pe),He.xr.addEventListener("sessionend",pe)},disconnect(){const He=s.getState().gl;He.xr.removeEventListener("sessionstart",pe),He.xr.removeEventListener("sessionend",pe)}};typeof((Z=Q.xr)==null?void 0:Z.addEventListener)=="function"&&Pe.connect(),U.set({xr:Pe})}if(Q.shadowMap){const ae=Q.shadowMap.enabled,pe=Q.shadowMap.type;if(Q.shadowMap.enabled=!!b,Ki.boo(b))Q.shadowMap.type=u_;else if(Ki.str(b)){var he;const Pe={basic:dX,percentage:qC,soft:u_,variance:uc};Q.shadowMap.type=(he=Pe[b])!=null?he:u_}else Ki.obj(b)&&Object.assign(Q.shadowMap,b);(ae!==Q.shadowMap.enabled||pe!==Q.shadowMap.type)&&(Q.shadowMap.needsUpdate=!0)}const j=AQ();j&&("enabled"in j?j.enabled=!E:"legacyMode"in j&&(j.legacyMode=E)),l||cg(Q,{outputEncoding:_?3e3:3001,toneMapping:M?ih:nL}),U.legacy!==E&&U.set(()=>({legacy:E})),U.linear!==_&&U.set(()=>({linear:_})),U.flat!==M&&U.set(()=>({flat:M})),h&&!Ki.fun(h)&&!wQ(h)&&!Ki.equ(h,Q,hg)&&cg(Q,h),p&&!U.events.handlers&&U.set({events:p(s)});const ie=r0e(i,f);return Ki.equ(ie,U.size,hg)||U.setSize(ie.width,ie.height,ie.updateStyle,ie.top,ie.left),I&&U.viewport.dpr!==_Q(I)&&U.setDpr(I),U.frameloop!==L&&U.setFrameloop(L),U.onPointerMissed||U.set({onPointerMissed:O}),D&&!Ki.equ(D,U.performance,hg)&&U.set(ae=>({performance:{...ae.performance,...D}})),a=v,l=!0,this},render(c){return l||this.configure(),eE.updateContainer(Y.jsx(o0e,{store:s,children:c,onCreated:a,rootElement:i}),o,null,()=>{}),s},unmount(){EQ(i)}}}function o0e({store:i,children:e,onCreated:t,rootElement:n}){return hb(()=>{const r=i.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),i.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),Y.jsx(SQ.Provider,{value:i,children:e})}function EQ(i,e){const t=Ay.get(i),n=t==null?void 0:t.fiber;if(n){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),eE.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),$Ae(r),Ay.delete(i)}catch{}},500)})}}eE.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:W.version});const f8={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function a0e(i){const{handlePointer:e}=KAe(i);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(f8).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=i.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:s}=i.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,a])=>{const[l,u]=f8[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){var r;Object.entries((r=n.handlers)!=null?r:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[a]=f8[s];n.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function IB(i,e,t){var n,r,s,o,a;e==null&&(e=100);function l(){var c=Date.now()-o;c<e&&c>=0?n=setTimeout(l,e-c):(n=null,t||(a=i.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,o=Date.now();var c=t&&!n;return n||(n=setTimeout(l,e)),c&&(a=i.apply(s,r),s=r=null),a};return u.clear=function(){n&&(clearTimeout(n),n=null)},u.flush=function(){n&&(a=i.apply(s,r),s=r=null,clearTimeout(n),n=null)},u}IB.debounce=IB;var l0e=IB;const gU=xh(l0e);var u0e=Object.defineProperty,c0e=Object.defineProperties,h0e=Object.getOwnPropertyDescriptors,yU=Object.getOwnPropertySymbols,f0e=Object.prototype.hasOwnProperty,d0e=Object.prototype.propertyIsEnumerable,vU=(i,e,t)=>e in i?u0e(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,_U=(i,e)=>{for(var t in e||(e={}))f0e.call(e,t)&&vU(i,t,e[t]);if(yU)for(var t of yU(e))d0e.call(e,t)&&vU(i,t,e[t]);return i},p0e=(i,e)=>c0e(i,h0e(e)),xU,bU;typeof window<"u"&&((xU=window.document)!=null&&xU.createElement||((bU=window.navigator)==null?void 0:bU.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function CQ(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=i.child;for(;n;){const r=CQ(n,e,t);if(r)return r;n=n.sibling}}function RQ(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const wU=console.error;console.error=function(){const i=[...arguments].join("");if(i!=null&&i.startsWith("Warning:")&&i.includes("useContext")){console.error=wU;return}return wU.apply(this,arguments)};const $L=RQ(W.createContext(null));class PQ extends W.Component{render(){return W.createElement($L.Provider,{value:this._reactInternals},this.props.children)}}function A0e(){const i=W.useContext($L);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=W.useId();return W.useMemo(()=>{for(const n of[i,i==null?void 0:i.alternate]){if(!n)continue;const r=CQ(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[i,e])}function m0e(){const i=A0e(),[e]=W.useState(()=>new Map);e.clear();let t=i;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==$L&&!e.has(r)&&e.set(r,W.useContext(RQ(r)))}t=t.return}return e}function g0e(){const i=m0e();return W.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>W.createElement(e,null,W.createElement(t.Provider,p0e(_U({},n),{value:i.get(t)}))),e=>W.createElement(PQ,_U({},e))),[i])}function y0e({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||typeof window<"u"&&window.ResizeObserver,[s,o]=W.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!r)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const a=W.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=i?typeof i=="number"?i:i.scroll:null,u=i?typeof i=="number"?i:i.resize:null,c=W.useRef(!1);W.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[h,f,d]=W.useMemo(()=>{const _=()=>{if(!a.current.element)return;const{left:M,top:E,width:R,height:L,bottom:I,right:D,x:k,y:G}=a.current.element.getBoundingClientRect(),O={left:M,top:E,width:R,height:L,bottom:I,right:D,x:k,y:G};a.current.element instanceof HTMLElement&&n&&(O.height=a.current.element.offsetHeight,O.width=a.current.element.offsetWidth),Object.freeze(O),c.current&&!b0e(a.current.lastBounds,O)&&o(a.current.lastBounds=O)};return[_,u?gU(_,u):_,l?gU(_,l):_]},[o,n,l,u]);function p(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",d,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function v(){var _;a.current.element&&(a.current.resizeObserver=new r(f),(_=a.current.resizeObserver)==null||_.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(M=>M.addEventListener("scroll",d,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{d()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const b=_=>{!_||_===a.current.element||(p(),a.current.element=_,a.current.scrollContainers=BQ(_),v())};return _0e(d,!!e),v0e(f),W.useEffect(()=>{p(),v()},[e,d,f]),W.useEffect(()=>p,[]),[b,s,h]}function v0e(i){W.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function _0e(i,e){W.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function BQ(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(i);return[t,n,r].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...BQ(i.parentElement)]}const x0e=["x","y","top","bottom","left","right","width","height"],b0e=(i,e)=>x0e.every(t=>i[t]===e[t]),w0e=W.forwardRef(function({children:e,fallback:t,resize:n,style:r,gl:s,events:o=a0e,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:h,legacy:f,orthographic:d,frameloop:p,dpr:v,performance:b,raycaster:_,camera:M,scene:E,onPointerMissed:R,onCreated:L,...I},D){W.useMemo(()=>zAe(RAe),[]);const k=g0e(),[G,O]=y0e({scroll:!0,debounce:{scroll:50,resize:0},...n}),U=W.useRef(null),Q=W.useRef(null);W.useImperativeHandle(D,()=>U.current);const X=gQ(R),[ee,K]=W.useState(!1),[Z,he]=W.useState(!1);if(ee)throw ee;if(Z)throw Z;const j=W.useRef(null);hb(()=>{const ae=U.current;O.width>0&&O.height>0&&ae&&(j.current||(j.current=s0e(ae)),j.current.configure({gl:s,events:o,shadows:u,linear:c,flat:h,legacy:f,orthographic:d,frameloop:p,dpr:v,performance:b,raycaster:_,camera:M,scene:E,size:O,onPointerMissed:(...pe)=>X.current==null?void 0:X.current(...pe),onCreated:pe=>{pe.events.connect==null||pe.events.connect(a?HAe(a)?a.current:a:Q.current),l&&pe.setEvents({compute:(Pe,He)=>{const Se=Pe[l+"X"],Oe=Pe[l+"Y"];He.pointer.set(Se/He.size.width*2-1,-(Oe/He.size.height)*2+1),He.raycaster.setFromCamera(He.pointer,He.camera)}}),L==null||L(pe)}}),j.current.render(Y.jsx(k,{children:Y.jsx(yQ,{set:he,children:Y.jsx(W.Suspense,{fallback:Y.jsx(qAe,{set:K}),children:e})})})))}),W.useEffect(()=>{const ae=U.current;if(ae)return()=>EQ(ae)},[]);const ie=a?"none":"auto";return Y.jsx("div",{ref:Q,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ie,...r},...I,children:Y.jsx("div",{ref:G,style:{width:"100%",height:"100%"},children:Y.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}),WL=W.forwardRef(function(e,t){return Y.jsx(PQ,{children:Y.jsx(w0e,{...e,ref:t})})}),fb=new ne,XL=new ne,S0e=new ne,SU=new je;function M0e(i,e,t){const n=fb.setFromMatrixPosition(i.matrixWorld);n.project(e);const r=t.width/2,s=t.height/2;return[n.x*r+r,-(n.y*s)+s]}function T0e(i,e){const t=fb.setFromMatrixPosition(i.matrixWorld),n=XL.setFromMatrixPosition(e.matrixWorld),r=t.sub(n),s=e.getWorldDirection(S0e);return r.angleTo(s)>Math.PI/2}function E0e(i,e,t,n){const r=fb.setFromMatrixPosition(i.matrixWorld),s=r.clone();s.project(e),SU.set(s.x,s.y),t.setFromCamera(SU,e);const o=t.intersectObjects(n,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function C0e(i,e){if(e instanceof qa)return e.zoom;if(e instanceof $i){const t=fb.setFromMatrixPosition(i.matrixWorld),n=XL.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(r/2)*s)}else return 1}function R0e(i,e,t){if(e instanceof $i||e instanceof qa){const n=fb.setFromMatrixPosition(i.matrixWorld),r=XL.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const NB=i=>Math.abs(i)<1e-10?0:i;function IQ(i,e,t=""){let n="matrix3d(";for(let r=0;r!==16;r++)n+=NB(e[r]*i.elements[r])+(r!==15?",":")");return t+n}const P0e=(i=>e=>IQ(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),B0e=(i=>(e,t)=>IQ(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function I0e(i){return i&&typeof i=="object"&&"current"in i}const N0e=W.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:c=!1,occlude:h,onOcclude:f,castShadow:d,receiveShadow:p,material:v,geometry:b,zIndexRange:_=[16777271,0],calculatePosition:M=M0e,as:E="div",wrapperClass:R,pointerEvents:L="auto",...I},D)=>{const{gl:k,camera:G,scene:O,size:U,raycaster:Q,events:X,viewport:ee}=No(),[K]=W.useState(()=>document.createElement(E)),Z=W.useRef(),he=W.useRef(null),j=W.useRef(0),ie=W.useRef([0,0]),ae=W.useRef(null),pe=W.useRef(null),Pe=(a==null?void 0:a.current)||X.connected||k.domElement.parentNode,He=W.useRef(null),Se=W.useRef(!1),Oe=W.useMemo(()=>h&&h!=="blending"||Array.isArray(h)&&h.length&&I0e(h[0]),[h]);W.useLayoutEffect(()=>{const xt=k.domElement;h&&h==="blending"?(xt.style.zIndex=`${Math.floor(_[0]/2)}`,xt.style.position="absolute",xt.style.pointerEvents="none"):(xt.style.zIndex=null,xt.style.position=null,xt.style.pointerEvents=null)},[h]),W.useLayoutEffect(()=>{if(he.current){const xt=Z.current=tL(K);if(O.updateMatrixWorld(),c)K.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const yt=M(he.current,G,U);K.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${yt[0]}px,${yt[1]}px,0);transform-origin:0 0;`}return Pe&&(r?Pe.prepend(K):Pe.appendChild(K)),()=>{Pe&&Pe.removeChild(K),xt.unmount()}}},[Pe,c]),W.useLayoutEffect(()=>{R&&(K.className=R)},[R]);const Ye=W.useMemo(()=>c?{position:"absolute",top:0,left:0,width:U.width,height:U.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-U.height/2,left:-U.width/2,width:U.width,height:U.height},...t},[t,s,o,U,c]),it=W.useMemo(()=>({position:"absolute",pointerEvents:L}),[L]);W.useLayoutEffect(()=>{if(Se.current=!1,c){var xt;(xt=Z.current)==null||xt.render(W.createElement("div",{ref:ae,style:Ye},W.createElement("div",{ref:pe,style:it},W.createElement("div",{ref:D,className:n,style:t,children:i}))))}else{var yt;(yt=Z.current)==null||yt.render(W.createElement("div",{ref:D,style:Ye,className:n,children:i}))}});const Ct=W.useRef(!0);Yy(xt=>{if(he.current){G.updateMatrixWorld(),he.current.updateWorldMatrix(!0,!1);const yt=c?ie.current:M(he.current,G,U);if(c||Math.abs(j.current-G.zoom)>e||Math.abs(ie.current[0]-yt[0])>e||Math.abs(ie.current[1]-yt[1])>e){const Qe=T0e(he.current,G);let ce=!1;Oe&&(Array.isArray(h)?ce=h.map(ft=>ft.current):h!=="blending"&&(ce=[O]));const dt=Ct.current;if(ce){const ft=E0e(he.current,G,Q,ce);Ct.current=ft&&!Qe}else Ct.current=!Qe;dt!==Ct.current&&(f?f(!Ct.current):K.style.display=Ct.current?"block":"none");const pt=Math.floor(_[0]/2),ut=h?Oe?[_[0],pt]:[pt-1,0]:_;if(K.style.zIndex=`${R0e(he.current,G,ut)}`,c){const[ft,Wt]=[U.width/2,U.height/2],Rt=G.projectionMatrix.elements[5]*Wt,{isOrthographicCamera:fe,top:te,left:De,bottom:Te,right:Fe}=G,We=P0e(G.matrixWorldInverse),Bt=fe?`scale(${Rt})translate(${NB(-(Fe+De)/2)}px,${NB((te+Te)/2)}px)`:`translateZ(${Rt}px)`;let ct=he.current.matrixWorld;u&&(ct=G.matrixWorldInverse.clone().transpose().copyPosition(ct).scale(he.current.scale),ct.elements[3]=ct.elements[7]=ct.elements[11]=0,ct.elements[15]=1),K.style.width=U.width+"px",K.style.height=U.height+"px",K.style.perspective=fe?"":`${Rt}px`,ae.current&&pe.current&&(ae.current.style.transform=`${Bt}${We}translate(${ft}px,${Wt}px)`,pe.current.style.transform=B0e(ct,1/((l||10)/400)))}else{const ft=l===void 0?1:C0e(he.current,G)*l;K.style.transform=`translate3d(${yt[0]}px,${yt[1]}px,0) scale(${ft})`}ie.current=yt,j.current=G.zoom}}if(!Oe&&He.current&&!Se.current)if(c){if(ae.current){const yt=ae.current.children[0];if(yt!=null&&yt.clientWidth&&yt!=null&&yt.clientHeight){const{isOrthographicCamera:Qe}=G;if(Qe||b)I.scale&&(Array.isArray(I.scale)?I.scale instanceof ne?He.current.scale.copy(I.scale.clone().divideScalar(1)):He.current.scale.set(1/I.scale[0],1/I.scale[1],1/I.scale[2]):He.current.scale.setScalar(1/I.scale));else{const ce=(l||10)/400,dt=yt.clientWidth*ce,pt=yt.clientHeight*ce;He.current.scale.set(dt,pt,1)}Se.current=!0}}}else{const yt=K.children[0];if(yt!=null&&yt.clientWidth&&yt!=null&&yt.clientHeight){const Qe=1/ee.factor,ce=yt.clientWidth*Qe,dt=yt.clientHeight*Qe;He.current.scale.set(ce,dt,1),Se.current=!0}He.current.lookAt(xt.camera.position)}});const qt=W.useMemo(()=>({vertexShader:c?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[c]);return W.createElement("group",$s({},I,{ref:he}),h&&!Oe&&W.createElement("mesh",{castShadow:d,receiveShadow:p,ref:He},b||W.createElement("planeGeometry",null),v||W.createElement("shaderMaterial",{side:ao,vertexShader:qt.vertexShader,fragmentShader:qt.fragmentShader})))});let r2=0;const D0e=VL(i=>(u1.onStart=(e,t,n)=>{i({active:!0,item:e,loaded:t,total:n,progress:(t-r2)/(n-r2)*100})},u1.onLoad=()=>{i({active:!1})},u1.onError=e=>i(t=>({errors:[...t.errors,e]})),u1.onProgress=(e,t,n)=>{t===n&&(r2=n),i({active:!0,item:e,loaded:t,total:n,progress:(t-r2)/(n-r2)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function L0e(i,e,t){return Math.max(e,Math.min(i,t))}const ko={toVector(i,e){return i===void 0&&(i=e),Array.isArray(i)?i:[i,i]},add(i,e){return[i[0]+e[0],i[1]+e[1]]},sub(i,e){return[i[0]-e[0],i[1]-e[1]]},addTo(i,e){i[0]+=e[0],i[1]+=e[1]},subTo(i,e){i[0]-=e[0],i[1]-=e[1]}};function MU(i,e,t){return e===0||Math.abs(e)===1/0?Math.pow(i,t*5):i*e*t/(e+t*i)}function TU(i,e,t,n=.15){return n===0?L0e(i,e,t):i<e?-MU(e-i,t-e,n)+e:i>t?+MU(i-t,t-e,n)+t:i}function O0e(i,[e,t],[n,r]){const[[s,o],[a,l]]=i;return[TU(e,s,o,n),TU(t,a,l,r)]}function F0e(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function k0e(i){var e=F0e(i,"string");return typeof e=="symbol"?e:String(e)}function ka(i,e,t){return e=k0e(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function EU(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Er(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(t),!0).forEach(function(n){ka(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):EU(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const NQ={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function CU(i){return i?i[0].toUpperCase()+i.slice(1):""}const U0e=["enter","leave"];function z0e(i=!1,e){return i&&!U0e.includes(e)}function G0e(i,e="",t=!1){const n=NQ[i],r=n&&n[e]||e;return"on"+CU(i)+CU(r)+(z0e(t,r)?"Capture":"")}const H0e=["gotpointercapture","lostpointercapture"];function q0e(i){let e=i.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const n=H0e.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(n);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function V0e(i,e=""){const t=NQ[i],n=t&&t[e]||e;return i+n}function T4(i){return"touches"in i}function DQ(i){return T4(i)?"touch":"pointerType"in i?i.pointerType:"mouse"}function j0e(i){return Array.from(i.touches).filter(e=>{var t,n;return e.target===i.currentTarget||((t=i.currentTarget)===null||t===void 0||(n=t.contains)===null||n===void 0?void 0:n.call(t,e.target))})}function $0e(i){return i.type==="touchend"||i.type==="touchcancel"?i.changedTouches:i.targetTouches}function LQ(i){return T4(i)?$0e(i)[0]:i}function W0e(i){return j0e(i).map(e=>e.identifier)}function d8(i){const e=LQ(i);return T4(i)?e.identifier:e.pointerId}function RU(i){const e=LQ(i);return[e.clientX,e.clientY]}function X0e(i){const e={};if("buttons"in i&&(e.buttons=i.buttons),"shiftKey"in i){const{shiftKey:t,altKey:n,metaKey:r,ctrlKey:s}=i;Object.assign(e,{shiftKey:t,altKey:n,metaKey:r,ctrlKey:s})}return e}function tE(i,...e){return typeof i=="function"?i(...e):i}function Y0e(){}function Q0e(...i){return i.length===0?Y0e:i.length===1?i[0]:function(){let e;for(const t of i)e=t.apply(this,arguments)||e;return e}}function PU(i,e){return Object.assign({},e,i||{})}const K0e=32;class J0e{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?tE(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,X0e(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const I=t._delta.map(Math.abs);ko.addTo(t._distance,I)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,u]=n.threshold,{_step:c,values:h}=t;if(n.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&h[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&h[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),t.intentional=c[0]!==!1||c[1]!==!1,!t.intentional)return;const f=[0,0];if(n.hasCustomTransform){const[I,D]=h;f[0]=c[0]!==!1?I-c[0]:0,f[1]=c[1]!==!1?D-c[1]:0}else f[0]=c[0]!==!1?o-c[0]:0,f[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(f);const d=t.offset,p=t._active&&!t._blocked||t.active;p&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=tE(n.bounds,t)),this.setup&&this.setup()),t.movement=f,this.computeOffset()));const[v,b]=t.offset,[[_,M],[E,R]]=t._bounds;t.overflow=[v<_?-1:v>M?1:0,b<E?-1:b>R?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const L=t._active?n.rubberband||[0,0]:[0,0];if(t.offset=O0e(t._bounds,t.offset,L),t.delta=ko.sub(t.offset,d),this.computeMovement(),p&&(!t.last||s>K0e)){t.delta=ko.sub(t.offset,d);const I=t.delta.map(Math.abs);ko.addTo(t.distance,I),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[I[0]/s,I[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const r=this.handler(Er(Er(Er({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Z0e([i,e],t){const n=Math.abs(i),r=Math.abs(e);if(n>r&&n>t)return"x";if(r>n&&r>t)return"y"}class eme extends J0e{constructor(...e){super(...e),ka(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ko.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ko.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const r=typeof n.axisThreshold=="object"?n.axisThreshold[DQ(e)]:n.axisThreshold;t.axis=Z0e(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const tme=i=>i,BU=.15,OQ={enabled(i=!0){return i},eventOptions(i,e,t){return Er(Er({},t.shared.eventOptions),i)},preventDefault(i=!1){return i},triggerAllEvents(i=!1){return i},rubberband(i=0){switch(i){case!0:return[BU,BU];case!1:return[0,0];default:return ko.toVector(i)}},from(i){if(typeof i=="function")return i;if(i!=null)return ko.toVector(i)},transform(i,e,t){const n=i||t.shared.transform;return this.hasCustomTransform=!!n,n||tme},threshold(i){return ko.toVector(i,0)}},nme=0,db=Er(Er({},OQ),{},{axis(i,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(i=nme){return i},bounds(i={}){if(typeof i=="function")return s=>db.bounds(i(s));if("current"in i)return()=>i.current;if(typeof HTMLElement=="function"&&i instanceof HTMLElement)return i;const{left:e=-1/0,right:t=1/0,top:n=-1/0,bottom:r=1/0}=i;return[[e,t],[n,r]]}}),IU={ArrowRight:(i,e=1)=>[i*e,0],ArrowLeft:(i,e=1)=>[-1*i*e,0],ArrowUp:(i,e=1)=>[0,-1*i*e],ArrowDown:(i,e=1)=>[0,i*e]};class ime extends eme{constructor(...e){super(...e),ka(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=db.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&n._pointerActive)&&(this.start(e),this.setupPointer(e),n._pointerId=d8(e),n._pointerActive=!0,this.computeValues(RU(e)),this.computeInitial(),t.preventScrollAxis&&DQ(e)!=="mouse"?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;const r=d8(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=RU(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=ko.sub(s,t._values),this.computeValues(s)),ko.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(n.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===n.preventScrollAxis||n.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const r=d8(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[a,l]=t._delta,[u,c]=t._movement,[h,f]=n.swipe.velocity,[d,p]=n.swipe.distance,v=n.swipe.duration;if(t.elapsedTime<v){const b=Math.abs(a/t.timeDelta),_=Math.abs(l/t.timeDelta);b>h&&Math.abs(u)>d&&(t.swipe[0]=Math.sign(a)),_>f&&Math.abs(c)>p&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,rme(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=IU[e.key];if(t){const n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,ko.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in IU&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function rme(i){"persist"in i&&typeof i.persist=="function"&&i.persist()}const pb=typeof window<"u"&&window.document&&window.document.createElement;function FQ(){return pb&&"ontouchstart"in window}function sme(){return FQ()||pb&&window.navigator.maxTouchPoints>1}function ome(){return pb&&"onpointerdown"in window}function ame(){return pb&&"exitPointerLock"in window.document}function lme(){try{return"constructor"in GestureEvent}catch{return!1}}const bu={isBrowser:pb,gesture:lme(),touch:FQ(),touchscreen:sme(),pointer:ome(),pointerLock:ame()},ume=250,cme=180,hme=.5,fme=50,dme=250,pme=10,NU={mouse:0,touch:0,pen:8},Ame=Er(Er({},db),{},{device(i,e,{pointer:{touch:t=!1,lock:n=!1,mouse:r=!1}={}}){return this.pointerLock=n&&bu.pointerLock,bu.touch&&t?"touch":this.pointerLock?"mouse":bu.pointer&&!r?"pointer":bu.touch?"touch":"mouse"},preventScrollAxis(i,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&i?ume:void 0,!(!bu.touchscreen||t===!1))return i||(t!==void 0?"y":void 0)},pointerCapture(i,e,{pointer:{capture:t=!0,buttons:n=1,keys:r=!0}={}}){return this.pointerButtons=n,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(i,e,{filterTaps:t=!1,tapsThreshold:n=3,axis:r=void 0}){const s=ko.toVector(i,t?n:r?1:0);return this.filterTaps=t,this.tapsThreshold=n,s},swipe({velocity:i=hme,distance:e=fme,duration:t=dme}={}){return{velocity:this.transform(ko.toVector(i)),distance:this.transform(ko.toVector(e)),duration:t}},delay(i=0){switch(i){case!0:return cme;case!1:return 0;default:return i}},axisThreshold(i){return i?Er(Er({},NU),i):NU},keyboardDisplacement(i=pme){return i}});Er(Er({},OQ),{},{device(i,e,{shared:t,pointer:{touch:n=!1}={}}){if(t.target&&!bu.touch&&bu.gesture)return"gesture";if(bu.touch&&n)return"touch";if(bu.touchscreen){if(bu.pointer)return"pointer";if(bu.touch)return"touch"}},bounds(i,e,{scaleBounds:t={},angleBounds:n={}}){const r=o=>{const a=PU(tE(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=PU(tE(n,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof n!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(i,e,t){return this.lockDirection=t.axis==="lock",ko.toVector(i,this.lockDirection?[.1,3]:0)},modifierKey(i){return i===void 0?"ctrlKey":i},pinchOnWheel(i=!0){return i}});Er(Er({},db),{},{mouseOnly:(i=!0)=>i});Er(Er({},db),{},{mouseOnly:(i=!0)=>i});const kQ=new Map,DB=new Map;function mme(i){kQ.set(i.key,i.engine),DB.set(i.key,i.resolver)}const gme={key:"drag",engine:ime,resolver:Ame};function yme(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function vme(i,e){if(i==null)return{};var t=yme(i,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}const _me={target(i){if(i)return()=>"current"in i?i.current:i},enabled(i=!0){return i},window(i=bu.isBrowser?window:void 0){return i},eventOptions({passive:i=!0,capture:e=!1}={}){return{passive:i,capture:e}},transform(i){return i}},xme=["target","eventOptions","window","enabled","transform"];function TM(i={},e){const t={};for(const[n,r]of Object.entries(e))switch(typeof r){case"function":t[n]=r.call(t,i[n],n,i);break;case"object":t[n]=TM(i[n],r);break;case"boolean":r&&(t[n]=i[n]);break}return t}function bme(i,e,t={}){const n=i,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=n,u=vme(n,xme);if(t.shared=TM({target:r,eventOptions:s,window:o,enabled:a,transform:l},_me),e){const c=DB.get(e);t[e]=TM(Er({shared:t.shared},u),c)}else for(const c in u){const h=DB.get(c);h&&(t[c]=TM(Er({shared:t.shared},u[c]),h))}return t}class UQ{constructor(e,t){ka(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,r,s){const o=this._listeners,a=V0e(t,n),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Er(Er({},l),s);e.addEventListener(a,r,u);const c=()=>{e.removeEventListener(a,r,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class wme{constructor(){ka(this,"_timeouts",new Map)}add(e,t,n=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class Sme{constructor(e){ka(this,"gestures",new Set),ka(this,"_targetEventStore",new UQ(this)),ka(this,"gestureEventStores",{}),ka(this,"gestureTimeoutStores",{}),ka(this,"handlers",{}),ka(this,"config",{}),ka(this,"pointerIds",new Set),ka(this,"touchIds",new Set),ka(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Mme(this,e)}setEventIds(e){if(T4(e))return this.touchIds=new Set(W0e(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=bme(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=DU(n,a.eventOptions,!!r);if(a.enabled){const u=kQ.get(o);new u(this,e,o).bind(l)}}const s=DU(n,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Er(Er({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in n)n[s]=Q0e(...n[s]);if(!r)return n;for(const s in n){const{device:o,capture:a,passive:l}=q0e(s);this._targetEventStore.add(r,o,"",n[s],{capture:a,passive:l})}}}}function fg(i,e){i.gestures.add(e),i.gestureEventStores[e]=new UQ(i,e),i.gestureTimeoutStores[e]=new wme}function Mme(i,e){e.drag&&fg(i,"drag"),e.wheel&&fg(i,"wheel"),e.scroll&&fg(i,"scroll"),e.move&&fg(i,"move"),e.pinch&&fg(i,"pinch"),e.hover&&fg(i,"hover")}const DU=(i,e,t)=>(n,r,s,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:e.capture,h=(u=o.passive)!==null&&u!==void 0?u:e.passive;let f=a?n:G0e(n,r,c);t&&h&&(f+="Passive"),i[f]=i[f]||[],i[f].push(s)};function Tme(i,e={},t,n){const r=ge.useMemo(()=>new Sme(i),[]);if(r.applyHandlers(i,n),r.applyConfig(e,t),ge.useEffect(r.effect.bind(r)),ge.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function Eme(i,e){return mme(gme),Tme({drag:i},e||{},"drag")}function y_(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function LB(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function Cme(i,e){if(i){if(typeof i=="string")return LB(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return LB(i,e)}}function Rme(i){if(Array.isArray(i))return LB(i)}function Pme(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Bme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ime(i){return Rme(i)||Pme(i)||Cme(i)||Bme()}new je;new je;function Nme(i,e,t){return Math.max(e,Math.min(t,i))}function Dme(i,e){return Nme(i-Math.floor(i/e)*e,0,e)}function Lme(i,e){var t=Dme(e-i,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function zQ(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var pu=function i(e,t,n){var r=this;zQ(this,i),y_(this,"dot2",function(s,o){return r.x*s+r.y*o}),y_(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=n},Ome=[new pu(1,1,0),new pu(-1,1,0),new pu(1,-1,0),new pu(-1,-1,0),new pu(1,0,1),new pu(-1,0,1),new pu(1,0,-1),new pu(-1,0,-1),new pu(0,1,1),new pu(0,-1,1),new pu(0,1,-1),new pu(0,-1,-1)],LU=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],OU=new Array(512),FU=new Array(512),Fme=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;t&1?n=LU[t]^e&255:n=LU[t]^e>>8&255,OU[t]=OU[t+256]=n,FU[t]=FU[t+256]=Ome[n%12]}};Fme(0);function kme(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var e=i;i=0;for(var t=0;t<e.length;t++)i=(i+(t+1)*(e.charCodeAt(t)%96))%2147483647}return i===0&&(i=311),i}function kU(i){var e=kme(i);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Ume=function i(e){var t=this;zQ(this,i),y_(this,"seed",0),y_(this,"init",function(n){t.seed=n,t.value=kU(n)}),y_(this,"value",kU(this.seed)),this.init(e)};new Ume(Math.random());var zme=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return n/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},GQ=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},Gme=function(e){return e},Hme={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},qme={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},Vme={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},jme={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},$me={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},Wme={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function Rs(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:GQ,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(i.__damp===void 0&&(i.__damp={}),i.__damp[l]===void 0&&(i.__damp[l]=0),Math.abs(i[e]-t)<=a)return i[e]=t,!1;n=Math.max(1e-4,n);var u=2/n,c=o(u*r),h=i[e]-t,f=t,d=s*n;h=Math.min(Math.max(h,-d),d),t=i[e]-h;var p=(i.__damp[l]+u*h)*r;i.__damp[l]=(i.__damp[l]-u*p)*c;var v=t+(h+p)*c;return f-i[e]>0==v>f&&(v=f,i.__damp[l]=(v-f)/r),i[e]=v,!0}var Xme=function(e){return e&&e.isCamera},Yme=function(e){return e&&e.isLight},s2=new ne,UU=new xi,zU=new xi,o2=new kt,p8=new ne;function Qme(i,e,t,n,r,s,o){typeof e=="number"?s2.setScalar(e):Array.isArray(e)?s2.set(e[0],e[1],e[2]):s2.copy(e);var a=i.parent;i.updateWorldMatrix(!0,!1),p8.setFromMatrixPosition(i.matrixWorld),Xme(i)||Yme(i)?o2.lookAt(p8,s2,i.up):o2.lookAt(s2,p8,i.up),nE(i.quaternion,zU.setFromRotationMatrix(o2),t,n,r,s,o),a&&(o2.extractRotation(a.matrixWorld),UU.setFromRotationMatrix(o2),nE(i.quaternion,zU.copy(i.quaternion).premultiply(UU.invert()),t,n,r,s,o))}function F1(i,e,t,n,r,s,o,a){return Rs(i,e,i[e]+Lme(i[e],t),n,r,s,o,a)}var a2=new je,GU,HU;function Kme(i,e,t,n,r,s,o){return typeof e=="number"?a2.setScalar(e):Array.isArray(e)?a2.set(e[0],e[1]):a2.copy(e),GU=Rs(i,"x",a2.x,t,n,r,s,o),HU=Rs(i,"y",a2.y,t,n,r,s,o),GU||HU}var dg=new ne,qU,VU,jU;function OB(i,e,t,n,r,s,o){return typeof e=="number"?dg.setScalar(e):Array.isArray(e)?dg.set(e[0],e[1],e[2]):dg.copy(e),qU=Rs(i,"x",dg.x,t,n,r,s,o),VU=Rs(i,"y",dg.y,t,n,r,s,o),jU=Rs(i,"z",dg.z,t,n,r,s,o),qU||VU||jU}var LA=new In,$U,WU,XU,YU;function Jme(i,e,t,n,r,s,o){return typeof e=="number"?LA.setScalar(e):Array.isArray(e)?LA.set(e[0],e[1],e[2],e[3]):LA.copy(e),$U=Rs(i,"x",LA.x,t,n,r,s,o),WU=Rs(i,"y",LA.y,t,n,r,s,o),XU=Rs(i,"z",LA.z,t,n,r,s,o),YU=Rs(i,"w",LA.w,t,n,r,s,o),$U||WU||XU||YU}var l2=new Jr,QU,KU,JU;function Zme(i,e,t,n,r,s,o){return Array.isArray(e)?l2.set(e[0],e[1],e[2],e[3]):l2.copy(e),QU=F1(i,"x",l2.x,t,n,r,s,o),KU=F1(i,"y",l2.y,t,n,r,s,o),JU=F1(i,"z",l2.z,t,n,r,s,o),QU||KU||JU}var pg=new vt,ZU,ez,tz;function ege(i,e,t,n,r,s,o){return e instanceof vt?pg.copy(e):Array.isArray(e)?pg.setRGB(e[0],e[1],e[2]):pg.set(e),ZU=Rs(i,"r",pg.r,t,n,r,s,o),ez=Rs(i,"g",pg.g,t,n,r,s,o),tz=Rs(i,"b",pg.b,t,n,r,s,o),ZU||ez||tz}var Ku=new xi,Hh=new In,nz=new In,u2=new In,iz,rz,sz,oz;function nE(i,e,t,n,r,s,o){var a=i;Array.isArray(e)?Ku.set(e[0],e[1],e[2],e[3]):Ku.copy(e);var l=i.dot(Ku)>0?1:-1;return Ku.x*=l,Ku.y*=l,Ku.z*=l,Ku.w*=l,iz=Rs(i,"x",Ku.x,t,n,r,s,o),rz=Rs(i,"y",Ku.y,t,n,r,s,o),sz=Rs(i,"z",Ku.z,t,n,r,s,o),oz=Rs(i,"w",Ku.w,t,n,r,s,o),Hh.set(i.x,i.y,i.z,i.w).normalize(),nz.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),u2.copy(Hh).multiplyScalar(nz.dot(Hh)/Hh.dot(Hh)),a.__damp.velocity_x-=u2.x,a.__damp.velocity_y-=u2.y,a.__damp.velocity_z-=u2.z,a.__damp.velocity_w-=u2.w,i.set(Hh.x,Hh.y,Hh.z,Hh.w),iz||rz||sz||oz}var c2=new j0,az,lz,uz;function tge(i,e,t,n,r,s,o){return Array.isArray(e)?c2.set(e[0],e[1],e[2]):c2.copy(e),az=Rs(i,"radius",c2.radius,t,n,r,s,o),lz=F1(i,"phi",c2.phi,t,n,r,s,o),uz=F1(i,"theta",c2.theta,t,n,r,s,o),az||lz||uz}var qS=new kt,cz=new ne,hz=new xi,fz=new ne,dz,pz,Az;function nge(i,e,t,n,r,s,o){var a=i;return a.__damp===void 0&&(a.__damp={position:new ne,rotation:new xi,scale:new ne},i.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?qS.set.apply(qS,Ime(e)):qS.copy(e),qS.decompose(cz,hz,fz),dz=OB(a.__damp.position,cz,t,n,r,s,o),pz=nE(a.__damp.rotation,hz,t,n,r,s,o),Az=OB(a.__damp.scale,fz,t,n,r,s,o),i.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),dz||pz||Az}var mz=Object.freeze({__proto__:null,rsqw:zme,exp:GQ,linear:Gme,sine:Hme,cubic:qme,quint:Vme,circ:jme,quart:$me,expo:Wme,damp:Rs,dampLookAt:Qme,dampAngle:F1,damp2:Kme,damp3:OB,damp4:Jme,dampE:Zme,dampC:ege,dampQ:nE,dampS:tge,dampM:nge});const ige=i=>(e,t,n)=>{const r=n.subscribe;return n.subscribe=(o,a,l)=>{let u=o;if(a){const c=(l==null?void 0:l.equalityFn)||Object.is;let h=o(n.getState());u=f=>{const d=o(f);if(!c(h,d)){const p=h;a(h=d,p)}},l!=null&&l.fireImmediately&&a(h,h)}return r(u)},i(e,t,n)},HQ=parseInt(Gy.replace(/\D+/g,"")),rge=HQ>=125?"uv1":"uv2";function gz(i,e){if(e===dL)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===hy||e===ZC){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(t)if(e===hy)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var wu=Uint8Array,op=Uint16Array,FB=Uint32Array,qQ=new wu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),VQ=new wu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sge=new wu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jQ=function(i,e){for(var t=new op(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var r=new FB(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)r[s]=s-t[n]<<5|n;return[t,r]},$Q=jQ(qQ,2),WQ=$Q[0],oge=$Q[1];WQ[28]=258,oge[258]=28;var age=jQ(VQ,0),lge=age[0],kB=new op(32768);for(var rr=0;rr<32768;++rr){var Id=(rr&43690)>>>1|(rr&21845)<<1;Id=(Id&52428)>>>2|(Id&13107)<<2,Id=(Id&61680)>>>4|(Id&3855)<<4,kB[rr]=((Id&65280)>>>8|(Id&255)<<8)>>>1}var v_=function(i,e,t){for(var n=i.length,r=0,s=new op(e);r<n;++r)++s[i[r]-1];var o=new op(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new op(1<<e);var l=15-e;for(r=0;r<n;++r)if(i[r])for(var u=r<<4|i[r],c=e-i[r],h=o[i[r]-1]++<<c,f=h|(1<<c)-1;h<=f;++h)a[kB[h]>>>l]=u}else for(a=new op(n),r=0;r<n;++r)i[r]&&(a[r]=kB[o[i[r]-1]++]>>>15-i[r]);return a},Ab=new wu(288);for(var rr=0;rr<144;++rr)Ab[rr]=8;for(var rr=144;rr<256;++rr)Ab[rr]=9;for(var rr=256;rr<280;++rr)Ab[rr]=7;for(var rr=280;rr<288;++rr)Ab[rr]=8;var XQ=new wu(32);for(var rr=0;rr<32;++rr)XQ[rr]=5;var uge=v_(Ab,9,1),cge=v_(XQ,5,1),A8=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},Ju=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},m8=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},hge=function(i){return(i/8|0)+(i&7&&1)},fge=function(i,e,t){(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof op?op:i instanceof FB?FB:wu)(t-e);return n.set(i.subarray(e,t)),n},dge=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new wu(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new wu(n*3));var o=function(Ye){var it=e.length;if(Ye>it){var Ct=new wu(Math.max(it*2,Ye));Ct.set(e),e=Ct}},a=t.f||0,l=t.p||0,u=t.b||0,c=t.l,h=t.d,f=t.m,d=t.n,p=n*8;do{if(!c){t.f=a=Ju(i,l,1);var v=Ju(i,l+1,3);if(l+=3,v)if(v==1)c=uge,h=cge,f=9,d=5;else if(v==2){var E=Ju(i,l,31)+257,R=Ju(i,l+10,15)+4,L=E+Ju(i,l+5,31)+1;l+=14;for(var I=new wu(L),D=new wu(19),k=0;k<R;++k)D[sge[k]]=Ju(i,l+k*3,7);l+=R*3;for(var G=A8(D),O=(1<<G)-1,U=v_(D,G,1),k=0;k<L;){var Q=U[Ju(i,l,O)];l+=Q&15;var b=Q>>>4;if(b<16)I[k++]=b;else{var X=0,ee=0;for(b==16?(ee=3+Ju(i,l,3),l+=2,X=I[k-1]):b==17?(ee=3+Ju(i,l,7),l+=3):b==18&&(ee=11+Ju(i,l,127),l+=7);ee--;)I[k++]=X}}var K=I.subarray(0,E),Z=I.subarray(E);f=A8(K),d=A8(Z),c=v_(K,f,1),h=v_(Z,d,1)}else throw"invalid block type";else{var b=hge(l)+4,_=i[b-4]|i[b-3]<<8,M=b+_;if(M>n){if(s)throw"unexpected EOF";break}r&&o(u+_),e.set(i.subarray(b,M),u),t.b=u+=_,t.p=l=M*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}r&&o(u+131072);for(var he=(1<<f)-1,j=(1<<d)-1,ie=l;;ie=l){var X=c[m8(i,l)&he],ae=X>>>4;if(l+=X&15,l>p){if(s)throw"unexpected EOF";break}if(!X)throw"invalid length/literal";if(ae<256)e[u++]=ae;else if(ae==256){ie=l,c=null;break}else{var pe=ae-254;if(ae>264){var k=ae-257,Pe=qQ[k];pe=Ju(i,l,(1<<Pe)-1)+WQ[k],l+=Pe}var He=h[m8(i,l)&j],Se=He>>>4;if(!He)throw"invalid distance";l+=He&15;var Z=lge[Se];if(Se>3){var Pe=VQ[Se];Z+=m8(i,l)&(1<<Pe)-1,l+=Pe}if(l>p){if(s)throw"unexpected EOF";break}r&&o(u+131072);for(var Oe=u+pe;u<Oe;u+=4)e[u]=e[u-Z],e[u+1]=e[u+1-Z],e[u+2]=e[u+2-Z],e[u+3]=e[u+3-Z];u=Oe}}t.l=c,t.p=ie,t.b=u,c&&(a=1,t.m=f,t.d=h,t.n=d)}while(!a);return u==e.length?e:fge(e,0,u)},pge=new wu(0),Age=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function mge(i,e){return dge((Age(i),i.subarray(2,-4)),e)}var gge=typeof TextDecoder<"u"&&new TextDecoder,yge=0;try{gge.decode(pge,{stream:!0}),yge=1}catch{}var vge=Object.defineProperty,_ge=(i,e,t)=>e in i?vge(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Sn=(i,e,t)=>(_ge(i,typeof e!="symbol"?e+"":e,t),t);const VS=new $p,yz=new jc,xge=Math.cos(70*(Math.PI/180)),vz=(i,e)=>(i%e+e)%e;let bge=class extends Fu{constructor(e,t){super(),Sn(this,"object"),Sn(this,"domElement"),Sn(this,"enabled",!0),Sn(this,"target",new ne),Sn(this,"minDistance",0),Sn(this,"maxDistance",1/0),Sn(this,"minZoom",0),Sn(this,"maxZoom",1/0),Sn(this,"minPolarAngle",0),Sn(this,"maxPolarAngle",Math.PI),Sn(this,"minAzimuthAngle",-1/0),Sn(this,"maxAzimuthAngle",1/0),Sn(this,"enableDamping",!1),Sn(this,"dampingFactor",.05),Sn(this,"enableZoom",!0),Sn(this,"zoomSpeed",1),Sn(this,"enableRotate",!0),Sn(this,"rotateSpeed",1),Sn(this,"enablePan",!0),Sn(this,"panSpeed",1),Sn(this,"screenSpacePanning",!0),Sn(this,"keyPanSpeed",7),Sn(this,"zoomToCursor",!1),Sn(this,"autoRotate",!1),Sn(this,"autoRotateSpeed",2),Sn(this,"reverseOrbit",!1),Sn(this,"reverseHorizontalOrbit",!1),Sn(this,"reverseVerticalOrbit",!1),Sn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Sn(this,"mouseButtons",{LEFT:us.ROTATE,MIDDLE:us.DOLLY,RIGHT:us.PAN}),Sn(this,"touches",{ONE:Pl.ROTATE,TWO:Pl.DOLLY_PAN}),Sn(this,"target0"),Sn(this,"position0"),Sn(this,"zoom0"),Sn(this,"_domElementKeyEvents",null),Sn(this,"getPolarAngle"),Sn(this,"getAzimuthalAngle"),Sn(this,"setPolarAngle"),Sn(this,"setAzimuthalAngle"),Sn(this,"getDistance"),Sn(this,"listenToKeyEvents"),Sn(this,"stopListenToKeyEvents"),Sn(this,"saveState"),Sn(this,"reset"),Sn(this,"update"),Sn(this,"connect"),Sn(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=Me=>{let Ze=vz(Me,2*Math.PI),Nt=c.phi;Nt<0&&(Nt+=2*Math.PI),Ze<0&&(Ze+=2*Math.PI);let ye=Math.abs(Ze-Nt);2*Math.PI-ye<ye&&(Ze<Nt?Ze+=2*Math.PI:Nt+=2*Math.PI),h.phi=Ze-Nt,n.update()},this.setAzimuthalAngle=Me=>{let Ze=vz(Me,2*Math.PI),Nt=c.theta;Nt<0&&(Nt+=2*Math.PI),Ze<0&&(Ze+=2*Math.PI);let ye=Math.abs(Ze-Nt);2*Math.PI-ye<ye&&(Ze<Nt?Ze+=2*Math.PI:Nt+=2*Math.PI),h.theta=Ze-Nt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=Me=>{Me.addEventListener("keydown",ct),this._domElementKeyEvents=Me},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ct),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),l=a.NONE},this.update=(()=>{const Me=new ne,Ze=new ne(0,1,0),Nt=new xi().setFromUnitVectors(e.up,Ze),ye=Nt.clone().invert(),wt=new ne,$e=new xi,at=2*Math.PI;return function(){const Le=n.object.position;Nt.setFromUnitVectors(e.up,Ze),ye.copy(Nt).invert(),Me.copy(Le).sub(n.target),Me.applyQuaternion(Nt),c.setFromVector3(Me),n.autoRotate&&l===a.NONE&&ee(Q()),n.enableDamping?(c.theta+=h.theta*n.dampingFactor,c.phi+=h.phi*n.dampingFactor):(c.theta+=h.theta,c.phi+=h.phi);let _n=n.minAzimuthAngle,li=n.maxAzimuthAngle;isFinite(_n)&&isFinite(li)&&(_n<-Math.PI?_n+=at:_n>Math.PI&&(_n-=at),li<-Math.PI?li+=at:li>Math.PI&&(li-=at),_n<=li?c.theta=Math.max(_n,Math.min(li,c.theta)):c.theta=c.theta>(_n+li)/2?Math.max(_n,c.theta):Math.min(li,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),n.zoomToCursor&&G||n.object.isOrthographicCamera?c.radius=Pe(c.radius):c.radius=Pe(c.radius*f),Me.setFromSpherical(c),Me.applyQuaternion(ye),Le.copy(n.target).add(Me),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),d.set(0,0,0));let ar=!1;if(n.zoomToCursor&&G){let kn=null;if(n.object instanceof $i&&n.object.isPerspectiveCamera){const qi=Me.length();kn=Pe(qi*f);const es=qi-kn;n.object.position.addScaledVector(D,es),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const qi=new ne(k.x,k.y,0);qi.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/f)),n.object.updateProjectionMatrix(),ar=!0;const es=new ne(k.x,k.y,0);es.unproject(n.object),n.object.position.sub(es).add(qi),n.object.updateMatrixWorld(),kn=Me.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;kn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(kn).add(n.object.position):(VS.origin.copy(n.object.position),VS.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(VS.direction))<xge?e.lookAt(n.target):(yz.setFromNormalAndCoplanarPoint(n.object.up,n.target),VS.intersectPlane(yz,n.target))))}else n.object instanceof qa&&n.object.isOrthographicCamera&&(ar=f!==1,ar&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/f)),n.object.updateProjectionMatrix()));return f=1,G=!1,ar||wt.distanceToSquared(n.object.position)>u||8*(1-$e.dot(n.object.quaternion))>u?(n.dispatchEvent(r),wt.copy(n.object.position),$e.copy(n.object.quaternion),ar=!1,!0):!1}})(),this.connect=Me=>{n.domElement=Me,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",At),n.domElement.addEventListener("pointerdown",te),n.domElement.addEventListener("pointercancel",Te),n.domElement.addEventListener("wheel",Bt)},this.dispose=()=>{var Me,Ze,Nt,ye,wt,$e;n.domElement&&(n.domElement.style.touchAction="auto"),(Me=n.domElement)==null||Me.removeEventListener("contextmenu",At),(Ze=n.domElement)==null||Ze.removeEventListener("pointerdown",te),(Nt=n.domElement)==null||Nt.removeEventListener("pointercancel",Te),(ye=n.domElement)==null||ye.removeEventListener("wheel",Bt),(wt=n.domElement)==null||wt.ownerDocument.removeEventListener("pointermove",De),($e=n.domElement)==null||$e.ownerDocument.removeEventListener("pointerup",Te),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",ct)};const n=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new j0,h=new j0;let f=1;const d=new ne,p=new je,v=new je,b=new je,_=new je,M=new je,E=new je,R=new je,L=new je,I=new je,D=new ne,k=new je;let G=!1;const O=[],U={};function Q(){return 2*Math.PI/60/60*n.autoRotateSpeed}function X(){return Math.pow(.95,n.zoomSpeed)}function ee(Me){n.reverseOrbit||n.reverseHorizontalOrbit?h.theta+=Me:h.theta-=Me}function K(Me){n.reverseOrbit||n.reverseVerticalOrbit?h.phi+=Me:h.phi-=Me}const Z=(()=>{const Me=new ne;return function(Nt,ye){Me.setFromMatrixColumn(ye,0),Me.multiplyScalar(-Nt),d.add(Me)}})(),he=(()=>{const Me=new ne;return function(Nt,ye){n.screenSpacePanning===!0?Me.setFromMatrixColumn(ye,1):(Me.setFromMatrixColumn(ye,0),Me.crossVectors(n.object.up,Me)),Me.multiplyScalar(Nt),d.add(Me)}})(),j=(()=>{const Me=new ne;return function(Nt,ye){const wt=n.domElement;if(wt&&n.object instanceof $i&&n.object.isPerspectiveCamera){const $e=n.object.position;Me.copy($e).sub(n.target);let at=Me.length();at*=Math.tan(n.object.fov/2*Math.PI/180),Z(2*Nt*at/wt.clientHeight,n.object.matrix),he(2*ye*at/wt.clientHeight,n.object.matrix)}else wt&&n.object instanceof qa&&n.object.isOrthographicCamera?(Z(Nt*(n.object.right-n.object.left)/n.object.zoom/wt.clientWidth,n.object.matrix),he(ye*(n.object.top-n.object.bottom)/n.object.zoom/wt.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function ie(Me){n.object instanceof $i&&n.object.isPerspectiveCamera||n.object instanceof qa&&n.object.isOrthographicCamera?f/=Me:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ae(Me){n.object instanceof $i&&n.object.isPerspectiveCamera||n.object instanceof qa&&n.object.isOrthographicCamera?f*=Me:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function pe(Me){if(!n.zoomToCursor||!n.domElement)return;G=!0;const Ze=n.domElement.getBoundingClientRect(),Nt=Me.clientX-Ze.left,ye=Me.clientY-Ze.top,wt=Ze.width,$e=Ze.height;k.x=Nt/wt*2-1,k.y=-(ye/$e)*2+1,D.set(k.x,k.y,1).unproject(n.object).sub(n.object.position).normalize()}function Pe(Me){return Math.max(n.minDistance,Math.min(n.maxDistance,Me))}function He(Me){p.set(Me.clientX,Me.clientY)}function Se(Me){pe(Me),R.set(Me.clientX,Me.clientY)}function Oe(Me){_.set(Me.clientX,Me.clientY)}function Ye(Me){v.set(Me.clientX,Me.clientY),b.subVectors(v,p).multiplyScalar(n.rotateSpeed);const Ze=n.domElement;Ze&&(ee(2*Math.PI*b.x/Ze.clientHeight),K(2*Math.PI*b.y/Ze.clientHeight)),p.copy(v),n.update()}function it(Me){L.set(Me.clientX,Me.clientY),I.subVectors(L,R),I.y>0?ie(X()):I.y<0&&ae(X()),R.copy(L),n.update()}function Ct(Me){M.set(Me.clientX,Me.clientY),E.subVectors(M,_).multiplyScalar(n.panSpeed),j(E.x,E.y),_.copy(M),n.update()}function qt(Me){pe(Me),Me.deltaY<0?ae(X()):Me.deltaY>0&&ie(X()),n.update()}function xt(Me){let Ze=!1;switch(Me.code){case n.keys.UP:j(0,n.keyPanSpeed),Ze=!0;break;case n.keys.BOTTOM:j(0,-n.keyPanSpeed),Ze=!0;break;case n.keys.LEFT:j(n.keyPanSpeed,0),Ze=!0;break;case n.keys.RIGHT:j(-n.keyPanSpeed,0),Ze=!0;break}Ze&&(Me.preventDefault(),n.update())}function yt(){if(O.length==1)p.set(O[0].pageX,O[0].pageY);else{const Me=.5*(O[0].pageX+O[1].pageX),Ze=.5*(O[0].pageY+O[1].pageY);p.set(Me,Ze)}}function Qe(){if(O.length==1)_.set(O[0].pageX,O[0].pageY);else{const Me=.5*(O[0].pageX+O[1].pageX),Ze=.5*(O[0].pageY+O[1].pageY);_.set(Me,Ze)}}function ce(){const Me=O[0].pageX-O[1].pageX,Ze=O[0].pageY-O[1].pageY,Nt=Math.sqrt(Me*Me+Ze*Ze);R.set(0,Nt)}function dt(){n.enableZoom&&ce(),n.enablePan&&Qe()}function pt(){n.enableZoom&&ce(),n.enableRotate&&yt()}function ut(Me){if(O.length==1)v.set(Me.pageX,Me.pageY);else{const Nt=Vt(Me),ye=.5*(Me.pageX+Nt.x),wt=.5*(Me.pageY+Nt.y);v.set(ye,wt)}b.subVectors(v,p).multiplyScalar(n.rotateSpeed);const Ze=n.domElement;Ze&&(ee(2*Math.PI*b.x/Ze.clientHeight),K(2*Math.PI*b.y/Ze.clientHeight)),p.copy(v)}function ft(Me){if(O.length==1)M.set(Me.pageX,Me.pageY);else{const Ze=Vt(Me),Nt=.5*(Me.pageX+Ze.x),ye=.5*(Me.pageY+Ze.y);M.set(Nt,ye)}E.subVectors(M,_).multiplyScalar(n.panSpeed),j(E.x,E.y),_.copy(M)}function Wt(Me){const Ze=Vt(Me),Nt=Me.pageX-Ze.x,ye=Me.pageY-Ze.y,wt=Math.sqrt(Nt*Nt+ye*ye);L.set(0,wt),I.set(0,Math.pow(L.y/R.y,n.zoomSpeed)),ie(I.y),R.copy(L)}function Rt(Me){n.enableZoom&&Wt(Me),n.enablePan&&ft(Me)}function fe(Me){n.enableZoom&&Wt(Me),n.enableRotate&&ut(Me)}function te(Me){var Ze,Nt;n.enabled!==!1&&(O.length===0&&((Ze=n.domElement)==null||Ze.ownerDocument.addEventListener("pointermove",De),(Nt=n.domElement)==null||Nt.ownerDocument.addEventListener("pointerup",Te)),zt(Me),Me.pointerType==="touch"?Ft(Me):Fe(Me))}function De(Me){n.enabled!==!1&&(Me.pointerType==="touch"?vn(Me):We(Me))}function Te(Me){var Ze,Nt,ye;hn(Me),O.length===0&&((Ze=n.domElement)==null||Ze.releasePointerCapture(Me.pointerId),(Nt=n.domElement)==null||Nt.ownerDocument.removeEventListener("pointermove",De),(ye=n.domElement)==null||ye.ownerDocument.removeEventListener("pointerup",Te)),n.dispatchEvent(o),l=a.NONE}function Fe(Me){let Ze;switch(Me.button){case 0:Ze=n.mouseButtons.LEFT;break;case 1:Ze=n.mouseButtons.MIDDLE;break;case 2:Ze=n.mouseButtons.RIGHT;break;default:Ze=-1}switch(Ze){case us.DOLLY:if(n.enableZoom===!1)return;Se(Me),l=a.DOLLY;break;case us.ROTATE:if(Me.ctrlKey||Me.metaKey||Me.shiftKey){if(n.enablePan===!1)return;Oe(Me),l=a.PAN}else{if(n.enableRotate===!1)return;He(Me),l=a.ROTATE}break;case us.PAN:if(Me.ctrlKey||Me.metaKey||Me.shiftKey){if(n.enableRotate===!1)return;He(Me),l=a.ROTATE}else{if(n.enablePan===!1)return;Oe(Me),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(s)}function We(Me){if(n.enabled!==!1)switch(l){case a.ROTATE:if(n.enableRotate===!1)return;Ye(Me);break;case a.DOLLY:if(n.enableZoom===!1)return;it(Me);break;case a.PAN:if(n.enablePan===!1)return;Ct(Me);break}}function Bt(Me){n.enabled===!1||n.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Me.preventDefault(),n.dispatchEvent(s),qt(Me),n.dispatchEvent(o))}function ct(Me){n.enabled===!1||n.enablePan===!1||xt(Me)}function Ft(Me){switch(an(Me),O.length){case 1:switch(n.touches.ONE){case Pl.ROTATE:if(n.enableRotate===!1)return;yt(),l=a.TOUCH_ROTATE;break;case Pl.PAN:if(n.enablePan===!1)return;Qe(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(n.touches.TWO){case Pl.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;dt(),l=a.TOUCH_DOLLY_PAN;break;case Pl.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;pt(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(s)}function vn(Me){switch(an(Me),l){case a.TOUCH_ROTATE:if(n.enableRotate===!1)return;ut(Me),n.update();break;case a.TOUCH_PAN:if(n.enablePan===!1)return;ft(Me),n.update();break;case a.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Rt(Me),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;fe(Me),n.update();break;default:l=a.NONE}}function At(Me){n.enabled!==!1&&Me.preventDefault()}function zt(Me){O.push(Me)}function hn(Me){delete U[Me.pointerId];for(let Ze=0;Ze<O.length;Ze++)if(O[Ze].pointerId==Me.pointerId){O.splice(Ze,1);return}}function an(Me){let Ze=U[Me.pointerId];Ze===void 0&&(Ze=new je,U[Me.pointerId]=Ze),Ze.set(Me.pageX,Me.pageY)}function Vt(Me){const Ze=Me.pointerId===O[0].pointerId?O[1]:O[0];return U[Ze.pointerId]}t!==void 0&&this.connect(t),this.update()}};function my(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const p0="srgb",bf="srgb-linear",_z=3001,wge=3e3;class YL extends Ao{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Cge(t)}),this.register(function(t){return new Rge(t)}),this.register(function(t){return new kge(t)}),this.register(function(t){return new Uge(t)}),this.register(function(t){return new zge(t)}),this.register(function(t){return new Bge(t)}),this.register(function(t){return new Ige(t)}),this.register(function(t){return new Nge(t)}),this.register(function(t){return new Dge(t)}),this.register(function(t){return new Ege(t)}),this.register(function(t){return new Lge(t)}),this.register(function(t){return new Pge(t)}),this.register(function(t){return new Fge(t)}),this.register(function(t){return new Oge(t)}),this.register(function(t){return new Mge(t)}),this.register(function(t){return new Gge(t)}),this.register(function(t){return new Hge(t)})}load(e,t,n,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=xf.extractUrlBase(e);o=xf.resolveURL(u,this.path)}else o=xf.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new tl(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(my(new Uint8Array(e.slice(0,4)))===YQ){try{o[oi.KHR_BINARY_GLTF]=new qge(e)}catch(c){r&&r(c);return}s=JSON.parse(o[oi.KHR_BINARY_GLTF].content)}else s=JSON.parse(my(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new n1e(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const c=this.pluginCallbacks[u](l);c.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const c=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(c){case oi.KHR_MATERIALS_UNLIT:o[c]=new Tge;break;case oi.KHR_DRACO_MESH_COMPRESSION:o[c]=new Vge(s,this.dracoLoader);break;case oi.KHR_TEXTURE_TRANSFORM:o[c]=new jge;break;case oi.KHR_MESH_QUANTIZATION:o[c]=new $ge;break;default:h.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function Sge(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const oi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Mge{constructor(e){this.parser=e,this.name=oi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const c=new vt(16777215);l.color!==void 0&&c.setRGB(l.color[0],l.color[1],l.color[2],bf);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new ub(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new hx(c),u.distance=h;break;case"spot":u=new b4(c),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Jh(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class Tge{constructor(){this.name=oi.KHR_MATERIALS_UNLIT}getMaterialType(){return va}extendParams(e,t,n){const r=[];e.color=new vt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],bf),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,p0))}return Promise.all(r)}}class Ege{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Cge{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ku}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new je(a,a)}return Promise.all(s)}}class Rge{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ku}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class Pge{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ku}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Bge{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ku}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new vt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],bf)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,p0)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Ige{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ku}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Nge{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ku}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new vt().setRGB(a[0],a[1],a[2],bf),Promise.all(s)}}class Dge{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ku}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Lge{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ku}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new vt().setRGB(a[0],a[1],a[2],bf),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,p0)),Promise.all(s)}}class Oge{constructor(e){this.parser=e,this.name=oi.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ku}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class Fge{constructor(e){this.parser=e,this.name=oi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ku}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class kge{constructor(e){this.parser=e,this.name=oi.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Uge{constructor(e){this.parser=e,this.name=oi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const u=n.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class zge{constructor(e){this.parser=e,this.name=oi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const u=n.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Gge{constructor(e){this.name=oi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,u=r.byteLength||0,c=r.count,h=r.byteStride,f=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,h,f,r.mode,r.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(c*h);return o.decodeGltfBuffer(new Uint8Array(d),c,h,f,r.mode,r.filter),d})})}else return null}}class Hge{constructor(e){this.name=oi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const u of r.primitives)if(u.mode!==gu.TRIANGLES&&u.mode!==gu.TRIANGLE_STRIP&&u.mode!==gu.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=n.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(c=>(l[u]=c,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const c=u.pop(),h=c.isGroup?c.children:[c],f=u[0].count,d=[];for(const p of h){const v=new kt,b=new ne,_=new xi,M=new ne(1,1,1),E=new wL(p.geometry,p.material,f);for(let R=0;R<f;R++)l.TRANSLATION&&b.fromBufferAttribute(l.TRANSLATION,R),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,R),l.SCALE&&M.fromBufferAttribute(l.SCALE,R),E.setMatrixAt(R,v.compose(b,_,M));for(const R in l)if(R==="_COLOR_0"){const L=l[R];E.instanceColor=new Of(L.array,L.itemSize,L.normalized)}else R!=="TRANSLATION"&&R!=="ROTATION"&&R!=="SCALE"&&p.geometry.setAttribute(R,l[R]);Qn.prototype.copy.call(E,p),this.parser.assignFinalMaterial(E),d.push(E)}return c.isGroup?(c.clear(),c.add(...d),c):d[0]}))}}const YQ="glTF",h2=12,xz={JSON:1313821514,BIN:5130562};class qge{constructor(e){this.name=oi.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,h2);if(this.header={magic:my(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==YQ)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-h2,r=new DataView(e,h2);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===xz.JSON){const l=new Uint8Array(e,h2+s,o);this.content=my(l)}else if(a===xz.BIN){const l=h2+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Vge{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=oi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const c in o){const h=UB[c]||c.toLowerCase();a[h]=o[c]}for(const c in e.attributes){const h=UB[c]||c.toLowerCase();if(o[c]!==void 0){const f=n.accessors[e.attributes[c]],d=k1[f.componentType];u[h]=d.name,l[h]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(h,f){r.decodeDracoFile(c,function(d){for(const p in d.attributes){const v=d.attributes[p],b=l[p];b!==void 0&&(v.normalized=b)}h(d)},a,u,bf,f)})})}}class jge{constructor(){this.name=oi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class $ge{constructor(){this.name=oi.KHR_MESH_QUANTIZATION}}class QQ extends Xy{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,c=r-t,h=(n-t)/c,f=h*h,d=f*h,p=e*u,v=p-u,b=-2*d+3*f,_=d-f,M=1-b,E=_-f+h;for(let R=0;R!==a;R++){const L=o[v+R+a],I=o[v+R+l]*c,D=o[p+R+a],k=o[p+R]*c;s[R]=M*L+E*I+b*D+_*k}return s}}const Wge=new xi;class Xge extends QQ{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return Wge.fromArray(s).normalize().toArray(s),s}}const gu={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},k1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},bz={9728:Es,9729:pr,9984:jC,9985:D1,9986:l0,9987:Mu},wz={33071:ga,33648:ay,10497:dh},g8={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},UB={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...HQ>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Nd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Yge={CUBICSPLINE:void 0,LINEAR:cy,STEP:uy},y8={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Qge(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new lb({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:fh})),i.DefaultMaterial}function OA(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Jh(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Kge(i,e,t){let n=!1,r=!1,s=!1;for(let u=0,c=e.length;u<c;u++){const h=e[u];if(h.POSITION!==void 0&&(n=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let u=0,c=e.length;u<c;u++){const h=e[u];if(n){const f=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):i.attributes.position;o.push(f)}if(r){const f=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):i.attributes.normal;a.push(f)}if(s){const f=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):i.attributes.color;l.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],h=u[1],f=u[2];return n&&(i.morphAttributes.position=c),r&&(i.morphAttributes.normal=h),s&&(i.morphAttributes.color=f),i.morphTargetsRelative=!0,i})}function Jge(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Zge(i){let e;const t=i.extensions&&i.extensions[oi.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+v8(t.attributes):e=i.indices+":"+v8(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+v8(i.targets[n]);return e}function v8(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function zB(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function e1e(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const t1e=new kt;class n1e{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Sge,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&s<98?this.textureLoader=new Yp(this.options.manager):this.textureLoader=new ZY(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new tl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return OA(s,a,r),Jh(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,c]of o.children.entries())s(c,a.children[u])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[oi.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(xf.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=g8[r.type],a=k1[r.componentType],l=r.normalized===!0,u=new a(r.count*o);return Promise.resolve(new Kn(u,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=g8[r.type],u=k1[r.componentType],c=u.BYTES_PER_ELEMENT,h=c*l,f=r.byteOffset||0,d=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let v,b;if(d&&d!==h){const _=Math.floor(f/d),M="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let E=t.cache.get(M);E||(v=new u(a,_*d,r.count*d/c),E=new $y(v,d/c),t.cache.add(M,E)),b=new Ol(E,l,f%d/c,p)}else a===null?v=new u(r.count*l):v=new u(a,f,r.count*l),b=new Kn(v,l,p);if(r.sparse!==void 0){const _=g8.SCALAR,M=k1[r.sparse.indices.componentType],E=r.sparse.indices.byteOffset||0,R=r.sparse.values.byteOffset||0,L=new M(o[1],E,r.sparse.count*_),I=new u(o[2],R,r.sparse.count*l);a!==null&&(b=new Kn(b.array.slice(),b.itemSize,b.normalized));for(let D=0,k=L.length;D<k;D++){const G=L[D];if(b.setX(G,I[D*l]),l>=2&&b.setY(G,I[D*l+1]),l>=3&&b.setZ(G,I[D*l+2]),l>=4&&b.setW(G,I[D*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=n.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,n).then(function(c){c.flipY=!1,c.name=o.name||a.name||"",c.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(c.name=a.uri);const f=(s.samplers||{})[o.sampler]||{};return c.magFilter=bz[f.magFilter]||pr,c.minFilter=bz[f.minFilter]||Mu,c.wrapS=wz[f.wrapS]||dh,c.wrapT=wz[f.wrapT]||dh,r.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=n.getDependency("bufferView",o.bufferView).then(function(h){u=!0;const f=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(f),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(h){return new Promise(function(f,d){let p=f;t.isImageBitmapLoader===!0&&(p=function(v){const b=new or(v);b.needsUpdate=!0,f(b)}),t.load(xf.resolveURL(h,s.path),p,void 0,d)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),Jh(h,o),h.userData.mimeType=o.mimeType||e1e(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[oi.KHR_TEXTURE_TRANSFORM]){const a=n.extensions!==void 0?n.extensions[oi.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[oi.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===_z?p0:bf),"colorSpace"in o?o.colorSpace=r:o.encoding=r===p0?_z:wge),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new l4,ps.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new ys,ps.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return lb}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[oi.KHR_MATERIALS_UNLIT]){const h=r[oi.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),u.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new vt(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const f=h.baseColorFactor;a.color.setRGB(f[0],f[1],f[2],bf),a.opacity=f[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",h.baseColorTexture,p0)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=ao);const c=s.alphaMode||y8.OPAQUE;if(c===y8.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===y8.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==va&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new je(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}if(s.occlusionTexture!==void 0&&o!==va&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==va){const h=s.emissiveFactor;a.emissive=new vt().setRGB(h[0],h[1],h[2],bf)}return s.emissiveTexture!==void 0&&o!==va&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,p0)),Promise.all(u).then(function(){const h=new o(a);return s.name&&(h.name=s.name),Jh(h,s),t.associations.set(h,{materials:e}),s.extensions&&OA(r,h,s),h})}createUniqueName(e){const t=ei.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[oi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return Sz(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],c=Zge(u),h=r[c];if(h)o.push(h.promise);else{let f;u.extensions&&u.extensions[oi.KHR_DRACO_MESH_COMPRESSION]?f=s(u):f=Sz(new fn,u,t),r[c]={primitive:u,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const c=o[l].material===void 0?Qge(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],h=[];for(let d=0,p=c.length;d<p;d++){const v=c[d],b=o[d];let _;const M=u[d];if(b.mode===gu.TRIANGLES||b.mode===gu.TRIANGLE_STRIP||b.mode===gu.TRIANGLE_FAN||b.mode===void 0)_=s.isSkinnedMesh===!0?new a4(v,M):new fi(v,M),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),b.mode===gu.TRIANGLE_STRIP?_.geometry=gz(_.geometry,ZC):b.mode===gu.TRIANGLE_FAN&&(_.geometry=gz(_.geometry,hy));else if(b.mode===gu.LINES)_=new Ql(v,M);else if(b.mode===gu.LINE_STRIP)_=new Vl(v,M);else if(b.mode===gu.LINE_LOOP)_=new SL(v,M);else if(b.mode===gu.POINTS)_=new ML(v,M);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(_.geometry.morphAttributes).length>0&&Jge(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),Jh(_,s),b.extensions&&OA(r,_,b),t.assignFinalMaterial(_),h.push(_)}for(let d=0,p=h.length;d<p;d++)t.associations.set(h[d],{meshes:e,primitives:d});if(h.length===1)return s.extensions&&OA(r,h[0],s),h[0];const f=new Cs;s.extensions&&OA(r,f,s),t.associations.set(f,{meshes:e});for(let d=0,p=h.length;d<p;d++)f.add(h[d]);return f})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new $i(lo.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new qa(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Jh(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let u=0,c=o.length;u<c;u++){const h=o[u];if(h){a.push(h);const f=new kt;s!==null&&f.fromArray(s.array,u*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Wy(a,l)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],u=[],c=[];for(let h=0,f=r.channels.length;h<f;h++){const d=r.channels[h],p=r.samplers[d.sampler],v=d.target,b=v.node,_=r.parameters!==void 0?r.parameters[p.input]:p.input,M=r.parameters!==void 0?r.parameters[p.output]:p.output;v.node!==void 0&&(o.push(this.getDependency("node",b)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",M)),u.push(p),c.push(v))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(c)]).then(function(h){const f=h[0],d=h[1],p=h[2],v=h[3],b=h[4],_=[];for(let M=0,E=f.length;M<E;M++){const R=f[M],L=d[M],I=p[M],D=v[M],k=b[M];if(R===void 0)continue;R.updateMatrix&&R.updateMatrix();const G=n._createAnimationTracks(R,L,I,D,k);if(G)for(let O=0;O<G.length;O++)_.push(G[O])}return new V0(s,void 0,_)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),o=[],a=r.children||[];for(let u=0,c=a.length;u<c;u++)o.push(n.getDependency("node",a[u]));const l=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const c=u[0],h=u[1],f=u[2];f!==null&&c.traverse(function(d){d.isSkinnedMesh&&d.bind(f,t1e)});for(let d=0,p=h.length;d<p;d++)c.add(h[d]);return c})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let c;if(s.isBone===!0?c=new py:u.length>1?c=new Cs:u.length===1?c=u[0]:c=new Qn,c!==u[0])for(let h=0,f=u.length;h<f;h++)c.add(u[h]);if(s.name&&(c.userData.name=s.name,c.name=o),Jh(c,s),s.extensions&&OA(n,c,s),s.matrix!==void 0){const h=new kt;h.fromArray(s.matrix),c.applyMatrix4(h)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return r.associations.has(c)||r.associations.set(c,{}),r.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new Cs;n.name&&(s.name=r.createUniqueName(n.name)),Jh(s,n),n.extensions&&OA(t,s,n);const o=n.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let c=0,h=l.length;c<h;c++)s.add(l[c]);const u=c=>{const h=new Map;for(const[f,d]of r.associations)(f instanceof ps||f instanceof or)&&h.set(f,d);return c.traverse(f=>{const d=r.associations.get(f);d!=null&&h.set(f,d)}),h};return r.associations=u(s),s})}_createAnimationTracks(e,t,n,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Nd[s.path]===Nd.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(a);let u;switch(Nd[s.path]){case Nd.weights:u=Sp;break;case Nd.rotation:u=Mp;break;case Nd.position:case Nd.scale:u=Tp;break;default:switch(n.itemSize){case 1:u=Sp;break;case 2:case 3:default:u=Tp;break}break}const c=r.interpolation!==void 0?Yge[r.interpolation]:cy,h=this._getArrayFromAccessor(n);for(let f=0,d=l.length;f<d;f++){const p=new u(l[f]+"."+Nd[s.path],t.array,h,c);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=zB(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof Mp?Xge:QQ;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function i1e(i,e,t){const n=e.attributes,r=new Zr;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new ne(l[0],l[1],l[2]),new ne(u[0],u[1],u[2])),a.normalized){const c=zB(k1[a.componentType]);r.min.multiplyScalar(c),r.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new ne,l=new ne;for(let u=0,c=s.length;u<c;u++){const h=s[u];if(h.POSITION!==void 0){const f=t.json.accessors[h.POSITION],d=f.min,p=f.max;if(d!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(p[2]))),f.normalized){const v=zB(k1[f.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new ds;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}function Sz(i,e,t){const n=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=UB[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});r.push(o)}return Jh(i,e),i1e(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?Kge(i,e.targets,t):i})}function KQ(i,e,t){const n=t.length-i-1;if(e>=t[n])return n-1;if(e<=t[i])return i;let r=i,s=n,o=Math.floor((r+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function r1e(i,e,t,n){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=t;++a){s[a]=e-n[i+1-a],o[a]=n[i+a]-e;let l=0;for(let u=0;u<a;++u){const c=o[u+1],h=s[a-u],f=r[u]/(c+h);r[u]=l+c*f,l=h*f}r[a]=l}return r}function s1e(i,e,t,n){const r=KQ(i,n,e),s=r1e(r,n,i,e),o=new In(0,0,0,0);for(let a=0;a<=i;++a){const l=t[r-i+a],u=s[a],c=l.w*u;o.x+=l.x*c,o.y+=l.y*c,o.z+=l.z*c,o.w+=l.w*u}return o}function o1e(i,e,t,n,r){const s=[];for(let h=0;h<=t;++h)s[h]=0;const o=[];for(let h=0;h<=n;++h)o[h]=s.slice(0);const a=[];for(let h=0;h<=t;++h)a[h]=s.slice(0);a[0][0]=1;const l=s.slice(0),u=s.slice(0);for(let h=1;h<=t;++h){l[h]=e-r[i+1-h],u[h]=r[i+h]-e;let f=0;for(let d=0;d<h;++d){const p=u[d+1],v=l[h-d];a[h][d]=p+v;const b=a[d][h-1]/a[h][d];a[d][h]=f+p*b,f=v*b}a[h][h]=f}for(let h=0;h<=t;++h)o[0][h]=a[h][t];for(let h=0;h<=t;++h){let f=0,d=1;const p=[];for(let v=0;v<=t;++v)p[v]=s.slice(0);p[0][0]=1;for(let v=1;v<=n;++v){let b=0;const _=h-v,M=t-v;h>=v&&(p[d][0]=p[f][0]/a[M+1][_],b=p[d][0]*a[_][M]);const E=_>=-1?1:-_,R=h-1<=M?v-1:t-h;for(let I=E;I<=R;++I)p[d][I]=(p[f][I]-p[f][I-1])/a[M+1][_+I],b+=p[d][I]*a[_+I][M];h<=M&&(p[d][v]=-p[f][v-1]/a[M+1][h],b+=p[d][v]*a[h][M]),o[v][h]=b;const L=f;f=d,d=L}}let c=t;for(let h=1;h<=n;++h){for(let f=0;f<=t;++f)o[h][f]*=c;c*=t-h}return o}function a1e(i,e,t,n,r){const s=r<i?r:i,o=[],a=KQ(i,n,e),l=o1e(a,n,i,s,e),u=[];for(let c=0;c<t.length;++c){const h=t[c].clone(),f=h.w;h.x*=f,h.y*=f,h.z*=f,u[c]=h}for(let c=0;c<=s;++c){const h=u[a-i].clone().multiplyScalar(l[c][0]);for(let f=1;f<=i;++f)h.add(u[a-i+f].clone().multiplyScalar(l[c][f]));o[c]=h}for(let c=s+1;c<=r+1;++c)o[c]=new In(0,0,0);return o}function l1e(i,e){let t=1;for(let r=2;r<=i;++r)t*=r;let n=1;for(let r=2;r<=e;++r)n*=r;for(let r=2;r<=i-e;++r)n*=r;return t/n}function u1e(i){const e=i.length,t=[],n=[];for(let s=0;s<e;++s){const o=i[s];t[s]=new ne(o.x,o.y,o.z),n[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(l1e(s,a)*n[a]));r[s]=o.divideScalar(n[0])}return r}function c1e(i,e,t,n,r){const s=a1e(i,e,t,n,r);return u1e(s)}class Mz extends Kl{constructor(e,t,n,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<n.length;++o){const a=n[o];this.controlPoints[o]=new In(a.x,a.y,a.z,a.w)}}getPoint(e,t){const n=t||new ne,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=s1e(this.degree,this.knots,this.controlPoints,r);return s.w!=1&&s.divideScalar(s.w),n.set(s.x,s.y,s.z)}getTangent(e,t){const n=t||new ne,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=c1e(this.degree,this.knots,this.controlPoints,r,1);return n.copy(s[1]).normalize(),n}}let si,Yr,Fa;class QL extends Ao{constructor(e){super(e)}load(e,t,n,r){const s=this,o=s.path===""?xf.extractUrlBase(e):s.path,a=new tl(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},n,r)}parse(e,t){if(m1e(e))si=new A1e().parse(e);else{const r=tK(e);if(!g1e(r))throw new Error("THREE.FBXLoader: Unknown format.");if(Ez(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Ez(r));si=new p1e().parse(r)}const n=new Yp(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new h1e(n,this.manager).parse(si)}}class h1e{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Yr=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),s=new f1e().parse(r);return this.parseScene(r,s,n),Fa}parseConnections(){const e=new Map;return"Connections"in si&&si.Connections.connections.forEach(function(n){const r=n[0],s=n[1],o=n[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in si.Objects){const n=si.Objects.Video;for(const r in n){const s=n[r],o=parseInt(r);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const u=this.parseImage(n[r]);t[s.RelativeFilename||s.Filename]=u}}}}for(const n in e){const r=e[n];t[r]!==void 0?e[n]=t[r]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in si.Objects){const n=si.Objects.Texture;for(const r in n){const s=this.parseTexture(n[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,o=r!==void 0?r.value:0,a=s!==void 0?s.value:0;if(n.wrapS=o===0?dh:ga,n.wrapT=a===0?dh:ga,"Scaling"in e){const l=e.Scaling.value;n.repeat.x=l[0],n.repeat.y=l[1]}return n}loadTexture(e,t){let n;const r=this.textureLoader.path,s=Yr.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(n=t[s[0].ID],(n.indexOf("blob:")===0||n.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new or):(l.setPath(this.textureLoader.path),o=l.load(n))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new or):o=this.textureLoader.load(n);return this.textureLoader.setPath(r),o}parseMaterials(e){const t=new Map;if("Material"in si.Objects){const n=si.Objects.Material;for(const r in n){const s=this.parseMaterial(n[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const n=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Yr.has(n))return null;const o=this.parseParameters(e,t,n);let a;switch(s.toLowerCase()){case"phong":a=new O1;break;case"lambert":a=new bh;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new O1;break}return a.setValues(o),a.name=r,a}parseParameters(e,t,n){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new vt().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new vt().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new vt().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new vt().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new vt().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new vt().fromArray(e.SpecularColor.value));const s=this;return Yr.get(n).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,o.ID),r.map!==void 0&&("colorSpace"in r.map?r.map.colorSpace="srgb":r.map.encoding=3001);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,o.ID),r.emissiveMap!==void 0&&("colorSpace"in r.emissiveMap?r.emissiveMap.colorSpace="srgb":r.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,o.ID),r.envMap!==void 0&&(r.envMap.mapping=oy,"colorSpace"in r.envMap?r.envMap.colorSpace="srgb":r.envMap.encoding=3001);break;case"SpecularColor":r.specularMap=s.getTexture(t,o.ID),r.specularMap!==void 0&&("colorSpace"in r.specularMap?r.specularMap.colorSpace="srgb":r.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,o.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in si.Objects&&t in si.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Yr.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in si.Objects){const n=si.Objects.Deformer;for(const r in n){const s=n[r],o=Yr.get(parseInt(r));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,n);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if(s.attrType==="BlendShape"){const a={id:r};a.rawTargets=this.parseMorphTargets(o,n),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const o={ID:r.ID,indices:[],weights:[],transformLink:new kt().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),n.push(o)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=Yr.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,n.push(a)}return n}parseScene(e,t,n){Fa=new Cs;const r=this.parseModels(e.skeletons,t,n),s=si.Objects.Model,o=this;r.forEach(function(l){const u=s[l.ID];o.setLookAtProperties(l,u),Yr.get(l.ID).parents.forEach(function(h){const f=r.get(h.ID);f!==void 0&&f.add(l)}),l.parent===null&&Fa.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),Fa.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const u=ZQ(l.userData.transformData);l.applyMatrix4(u),l.updateWorldMatrix()}});const a=new d1e().parse();Fa.children.length===1&&Fa.children[0].isGroup&&(Fa.children[0].animations=a,Fa=Fa.children[0]),Fa.animations=a}parseModels(e,t,n){const r=new Map,s=si.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],u=Yr.get(a);let c=this.buildSkeleton(u,e,a,l.attrName);if(!c){switch(l.attrType){case"Camera":c=this.createCamera(u);break;case"Light":c=this.createLight(u);break;case"Mesh":c=this.createMesh(u,t,n);break;case"NurbsCurve":c=this.createCurve(u,t);break;case"LimbNode":case"Root":c=new py;break;case"Null":default:c=new Cs;break}c.name=l.attrName?ei.sanitizeNodeName(l.attrName):"",c.ID=a}this.getTransformData(c,l),r.set(a,c)}return r}buildSkeleton(e,t,n,r){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(u,c){if(u.ID===o.ID){const h=s;s=new py,s.matrixWorld.copy(u.transformLink),s.name=r?ei.sanitizeNodeName(r):"",s.ID=n,l.bones[c]=s,h!==null&&s.add(h)}})}}),s}createCamera(e){let t,n;if(e.children.forEach(function(r){const s=si.Objects.NodeAttribute[r.ID];s!==void 0&&(n=s)}),n===void 0)t=new Qn;else{let r=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(r=1);let s=1;n.NearPlane!==void 0&&(s=n.NearPlane.value/1e3);let o=1e3;n.FarPlane!==void 0&&(o=n.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(a=n.AspectWidth.value,l=n.AspectHeight.value);const u=a/l;let c=45;n.FieldOfView!==void 0&&(c=n.FieldOfView.value);const h=n.FocalLength?n.FocalLength.value:null;switch(r){case 0:t=new $i(c,u,s,o),h!==null&&t.setFocalLength(h);break;case 1:t=new qa(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new Qn;break}}return t}createLight(e){let t,n;if(e.children.forEach(function(r){const s=si.Objects.NodeAttribute[r.ID];s!==void 0&&(n=s)}),n===void 0)t=new Qn;else{let r;n.LightType===void 0?r=0:r=n.LightType.value;let s=16777215;n.Color!==void 0&&(s=new vt().fromArray(n.Color.value));let o=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(o=0);let a=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?a=0:a=n.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new hx(s,o,a,l);break;case 1:t=new ub(s,o);break;case 2:let u=Math.PI/3;n.InnerAngle!==void 0&&(u=lo.degToRad(n.InnerAngle.value));let c=0;n.OuterAngle!==void 0&&(c=lo.degToRad(n.OuterAngle.value),c=Math.max(c,1)),t=new b4(s,o,a,u,c,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new hx(s,o);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,n){let r,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),n.has(l.ID)&&a.push(n.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new O1({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new a4(s,o),r.normalizeSkinWeights()):r=new fi(s,o),r}createCurve(e,t){const n=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),r=new ys({color:3342591,linewidth:1});return new Vl(n,r)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?n.eulerOrder=eK(t.RotationOrder.value):n.eulerOrder="ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&Yr.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=si.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),Fa.add(e.target)):e.lookAt(new ne().fromArray(o))}}})}bindSkeleton(e,t,n){const r=this.parsePoseNodes();for(const s in e){const o=e[s];Yr.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const u=l.ID;Yr.get(u).parents.forEach(function(h){n.has(h.ID)&&n.get(h.ID).bind(new Wy(o.bones),r[h.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in si.Objects){const t=si.Objects.Pose;for(const n in t)if(t[n].attrType==="BindPose"&&t[n].NbPoseNodes>0){const r=t[n].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new kt().fromArray(s.Matrix.a)}):e[r.Node]=new kt().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in si&&"AmbientColor"in si.GlobalSettings){const e=si.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],r=e[2];if(t!==0||n!==0||r!==0){const s=new vt(t,n,r);Fa.add(new w4(s,1))}}}}class f1e{parse(e){const t=new Map;if("Geometry"in si.Objects){const n=si.Objects.Geometry;for(const r in n){const s=Yr.get(parseInt(r)),o=this.parseGeometry(s,n[r],e);t.set(parseInt(r),o)}}return t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const r=n.skeletons,s=[],o=e.parents.map(function(h){return si.Objects.Model[h.ID]});if(o.length===0)return;const a=e.children.reduce(function(h,f){return r[f.ID]!==void 0&&(h=r[f.ID]),h},null);e.children.forEach(function(h){n.morphTargets[h.ID]!==void 0&&s.push(n.morphTargets[h.ID])});const l=o[0],u={};"RotationOrder"in l&&(u.eulerOrder=eK(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);const c=ZQ(u);return this.genGeometry(t,a,s,c)}genGeometry(e,t,n,r){const s=new fn;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new Ht(a.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new Ht(a.colors,3)),t&&(s.setAttribute("skinIndex",new n4(a.weightsIndices,4)),s.setAttribute("skinWeight",new Ht(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const u=new qn().getNormalMatrix(r),c=new Ht(a.normal,3);c.applyNormalMatrix(u),s.setAttribute("normal",c)}if(a.uvs.forEach(function(u,c){rge==="uv2"&&c++;const h=c===0?"uv":`uv${c}`;s.setAttribute(h,new Ht(a.uvs[c],2))}),o.material&&o.material.mappingType!=="AllSame"){let u=a.materialIndex[0],c=0;if(a.materialIndex.forEach(function(h,f){h!==u&&(s.addGroup(c,f-c,u),u=h,c=f)}),s.groups.length>0){const h=s.groups[s.groups.length-1],f=h.start+h.count;f!==a.materialIndex.length&&s.addGroup(f,a.materialIndex.length-f,u)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,n,r),s}parseGeoNode(e,t){const n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},t!==null&&(n.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){n.weightTable[o]===void 0&&(n.weightTable[o]=[]),n.weightTable[o].push({id:s,weight:r.weights[a]})})})),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,r=0,s=!1,o=[],a=[],l=[],u=[],c=[],h=[];const f=this;return e.vertexIndices.forEach(function(d,p){let v,b=!1;d<0&&(d=d^-1,b=!0);let _=[],M=[];if(o.push(d*3,d*3+1,d*3+2),e.color){const E=jS(p,n,d,e.color);l.push(E[0],E[1],E[2])}if(e.skeleton){if(e.weightTable[d]!==void 0&&e.weightTable[d].forEach(function(E){M.push(E.weight),_.push(E.id)}),M.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const E=[0,0,0,0],R=[0,0,0,0];M.forEach(function(L,I){let D=L,k=_[I];R.forEach(function(G,O,U){if(D>G){U[O]=D,D=G;const Q=E[O];E[O]=k,k=Q}})}),_=E,M=R}for(;M.length<4;)M.push(0),_.push(0);for(let E=0;E<4;++E)c.push(M[E]),h.push(_[E])}if(e.normal){const E=jS(p,n,d,e.normal);a.push(E[0],E[1],E[2])}e.material&&e.material.mappingType!=="AllSame"&&(v=jS(p,n,d,e.material)[0]),e.uv&&e.uv.forEach(function(E,R){const L=jS(p,n,d,E);u[R]===void 0&&(u[R]=[]),u[R].push(L[0]),u[R].push(L[1])}),r++,b&&(f.genFace(t,e,o,v,a,l,u,c,h,r),n++,r=0,o=[],a=[],l=[],u=[],c=[],h=[])}),t}genFace(e,t,n,r,s,o,a,l,u,c){for(let h=2;h<c;h++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[(h-1)*3]]),e.vertex.push(t.vertexPositions[n[(h-1)*3+1]]),e.vertex.push(t.vertexPositions[n[(h-1)*3+2]]),e.vertex.push(t.vertexPositions[n[h*3]]),e.vertex.push(t.vertexPositions[n[h*3+1]]),e.vertex.push(t.vertexPositions[n[h*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(h-1)*4]),e.vertexWeights.push(l[(h-1)*4+1]),e.vertexWeights.push(l[(h-1)*4+2]),e.vertexWeights.push(l[(h-1)*4+3]),e.vertexWeights.push(l[h*4]),e.vertexWeights.push(l[h*4+1]),e.vertexWeights.push(l[h*4+2]),e.vertexWeights.push(l[h*4+3]),e.weightsIndices.push(u[0]),e.weightsIndices.push(u[1]),e.weightsIndices.push(u[2]),e.weightsIndices.push(u[3]),e.weightsIndices.push(u[(h-1)*4]),e.weightsIndices.push(u[(h-1)*4+1]),e.weightsIndices.push(u[(h-1)*4+2]),e.weightsIndices.push(u[(h-1)*4+3]),e.weightsIndices.push(u[h*4]),e.weightsIndices.push(u[h*4+1]),e.weightsIndices.push(u[h*4+2]),e.weightsIndices.push(u[h*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(h-1)*3]),e.colors.push(o[(h-1)*3+1]),e.colors.push(o[(h-1)*3+2]),e.colors.push(o[h*3]),e.colors.push(o[h*3+1]),e.colors.push(o[h*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(h-1)*3]),e.normal.push(s[(h-1)*3+1]),e.normal.push(s[(h-1)*3+2]),e.normal.push(s[h*3]),e.normal.push(s[h*3+1]),e.normal.push(s[h*3+2])),t.uv&&t.uv.forEach(function(f,d){e.uvs[d]===void 0&&(e.uvs[d]=[]),e.uvs[d].push(a[d][0]),e.uvs[d].push(a[d][1]),e.uvs[d].push(a[d][(h-1)*2]),e.uvs[d].push(a[d][(h-1)*2+1]),e.uvs[d].push(a[d][h*2]),e.uvs[d].push(a[d][h*2+1])})}addMorphTargets(e,t,n,r){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;n.forEach(function(o){o.rawTargets.forEach(function(a){const l=si.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,r,a.name)})})}genMorphGeometry(e,t,n,r,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=n.Vertices!==void 0?n.Vertices.a:[],l=n.Indexes!==void 0?n.Indexes.a:[],u=e.attributes.position.count*3,c=new Float32Array(u);for(let p=0;p<l.length;p++){const v=l[p]*3;c[v]=a[p*3],c[v+1]=a[p*3+1],c[v+2]=a[p*3+2]}const h={vertexIndices:o,vertexPositions:c},f=this.genBuffers(h),d=new Ht(f.vertex,3);d.name=s||n.attrName,d.applyMatrix4(r),e.morphAttributes.position.push(d)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a;let s=[];return n==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a;let s=[];return n==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a;let s=[];return n==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:n}}parseNurbsGeometry(e){if(Mz===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new fn;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new fn;const n=t-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let h=0,f=o.length;h<f;h+=4)s.push(new In().fromArray(o,h));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=n,l=r.length-1-a;for(let h=0;h<n;++h)s.push(s[h])}const c=new Mz(n,r,s,a,l).getPoints(s.length*12);return new fn().setFromPoints(c)}}class d1e{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const n in t){const r=t[n],s=this.addClip(r);e.push(s)}return e}parseClips(){if(si.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=si.Objects.AnimationCurveNode,t=new Map;for(const n in e){const r=e[n];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=si.Objects.AnimationCurve;for(const n in t){const r={id:t[n].id,times:t[n].KeyTime.a.map(y1e),values:t[n].KeyValueFloat.a},s=Yr.get(r.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const t=si.Objects.AnimationLayer,n=new Map;for(const r in t){const s=[],o=Yr.get(parseInt(r));o!==void 0&&(o.children.forEach(function(l,u){if(e.has(l.ID)){const c=e.get(l.ID);if(c.curves.x!==void 0||c.curves.y!==void 0||c.curves.z!==void 0){if(s[u]===void 0){const h=Yr.get(l.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(h!==void 0){const f=si.Objects.Model[h.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const d={modelName:f.attrName?ei.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Fa.traverse(function(p){p.ID===f.id&&(d.transform=p.matrix,p.userData.transformData&&(d.eulerOrder=p.userData.transformData.eulerOrder))}),d.transform||(d.transform=new kt),"PreRotation"in f&&(d.preRotation=f.PreRotation.value),"PostRotation"in f&&(d.postRotation=f.PostRotation.value),s[u]=d}}s[u]&&(s[u][c.attr]=c)}else if(c.curves.morph!==void 0){if(s[u]===void 0){const h=Yr.get(l.ID).parents.filter(function(_){return _.relationship!==void 0})[0].ID,f=Yr.get(h).parents[0].ID,d=Yr.get(f).parents[0].ID,p=Yr.get(d).parents[0].ID,v=si.Objects.Model[p],b={modelName:v.attrName?ei.sanitizeNodeName(v.attrName):"",morphName:si.Objects.Deformer[h].attrName};s[u]=b}s[u][c.attr]=c}}}),n.set(parseInt(r),s))}return n}parseAnimStacks(e){const t=si.Objects.AnimationStack,n={};for(const r in t){const s=Yr.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);n[r]={name:t[r].attrName,layer:o}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach(function(r){t=t.concat(n.generateTracks(r))}),new V0(e.name,-1,t)}generateTracks(e){const t=[];let n=new ne,r=new xi,s=new ne;if(e.transform&&e.transform.decompose(n,r,s),n=n.toArray(),r=new Jr().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,n,r){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,n);return new Tp(e+"."+r,s,o)}generateRotationTrack(e,t,n,r,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(lo.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(lo.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(lo.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,n);r!==void 0&&(r=r.map(lo.degToRad),r.push(o),r=new Jr().fromArray(r),r=new xi().setFromEuler(r)),s!==void 0&&(s=s.map(lo.degToRad),s.push(o),s=new Jr().fromArray(s),s=new xi().setFromEuler(s).invert());const u=new xi,c=new Jr,h=[];for(let f=0;f<l.length;f+=3)c.set(l[f],l[f+1],l[f+2],o),u.setFromEuler(c),r!==void 0&&u.premultiply(r),s!==void 0&&u.multiply(s),u.toArray(h,f/3*4);return new Mp(e+".quaternion",a,h)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map(function(s){return s/100}),r=Fa.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Sp(e.modelName+".morphTargetInfluences["+r+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(n,r){return n-r}),t.length>1){let n=1,r=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==r&&(t[n]=o,r=o,n++)}t=t.slice(0,n)}return t}getKeyframeTrackValues(e,t,n){const r=n,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(u){if(t.x&&(o=t.x.times.indexOf(u)),t.y&&(a=t.y.times.indexOf(u)),t.z&&(l=t.z.times.indexOf(u)),o!==-1){const c=t.x.values[o];s.push(c),r[0]=c}else s.push(r[0]);if(a!==-1){const c=t.y.values[a];s.push(c),r[1]=c}else s.push(r[1]);if(l!==-1){const c=t.z.values[l];s.push(c),r[2]=c}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],r=e.values[t]-n,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let l=n+a;const u=e.times[t-1],h=(e.times[t]-u)/o;let f=u+h;const d=[],p=[];for(;f<e.times[t];)d.push(f),f+=h,p.push(l),l+=a;e.times=Cz(e.times,t,d),e.values=Cz(e.values,t,p)}}}}class p1e{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new JQ,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),u=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):u?t.parseNodeProperty(r,u,n[++s]):c?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,s):n in a?(n==="PoseNode"?a.PoseNode.push(s):a[n].id!==void 0&&(a[n]={},a[n][a[n].id]=a[n]),o.id!==""&&(a[n][o.id]=s)):typeof o.id=="number"?(a[n]={},a[n][o.id]=s):n!=="Properties70"&&(n==="PoseNode"?a[n]=[s]:a[n]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}parseNodeProperty(e,t,n){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),u=parseInt(l[0]),c=parseInt(l[1]);let h=s.split(",").slice(3);h=h.map(function(f){return f.trim().replace(/^"/,"")}),r="connections",s=[u,c],_1e(s,h),o[r]===void 0&&(o[r]=[])}r==="Node"&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):r!=="a"?o[r]=s:o.a=s,this.setCurrentProp(o,r),r==="a"&&s.slice(-1)!==","&&(o.a=x8(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=x8(t.a))}parseNodeSpecialProperty(e,t,n){const r=n.split('",').map(function(c){return c.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],l=r[3];let u=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=x8(u);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:u},this.setCurrentProp(this.getPrevNode(),s)}}class A1e{parse(e){const t=new Tz(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const r=new JQ;for(;!this.endOfContent(t);){const s=this.parseNode(t,n);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(r===0)return null;const l=[];for(let f=0;f<s;f++)l.push(this.parseProperty(e));const u=l.length>0?l[0]:"",c=l.length>1?l[1]:"",h=l.length>2?l[2]:"";for(n.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const f=this.parseNode(e,t);f!==null&&this.parseSubNode(a,n,f)}return n.propertyList=l,typeof u=="number"&&(n.id=u),c!==""&&(n.attrName=c),h!==""&&(n.attrType=h),a!==""&&(n.name=a),n}parseSubNode(e,t,n){if(n.singleProperty===!0){const r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if(e==="Connections"&&n.name==="C"){const r=[];n.propertyList.forEach(function(s,o){o!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(n.name==="Properties70")Object.keys(n).forEach(function(s){t[s]=n[s]});else if(e==="Properties70"&&n.name==="P"){let r=n.propertyList[0],s=n.propertyList[1];const o=n.propertyList[2],a=n.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:l=n.propertyList[4],t[r]={type:s,type2:o,flag:a,value:l}}else t[n.name]===void 0?typeof n.id=="number"?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:n.name==="PoseNode"?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):t[n.name][n.id]===void 0&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const a=mge(new Uint8Array(e.getArrayBuffer(o))),l=new Tz(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class Tz{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),my(new Uint8Array(t))}}class JQ{add(e,t){this[e]=t}}function m1e(i){const e="Kaydara FBX Binary  \0";return i.byteLength>=e.length&&e===tK(i,0,e.length)}function g1e(i){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function n(r){const s=i[r-1];return i=i.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(n(1)===e[r])return!1;return!0}function Ez(i){const e=/FBXVersion: (\d+)/,t=i.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function y1e(i){return i/46186158e3}const v1e=[];function jS(i,e,t,n){let r;switch(n.mappingType){case"ByPolygonVertex":r=i;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(r=n.indices[r]);const s=r*n.dataSize,o=s+n.dataSize;return x1e(v1e,n.buffer,s,o)}const _8=new Jr,Ag=new ne;function ZQ(i){const e=new kt,t=new kt,n=new kt,r=new kt,s=new kt,o=new kt,a=new kt,l=new kt,u=new kt,c=new kt,h=new kt,f=new kt,d=i.inheritType?i.inheritType:0;if(i.translation&&e.setPosition(Ag.fromArray(i.translation)),i.preRotation){const O=i.preRotation.map(lo.degToRad);O.push(i.eulerOrder),t.makeRotationFromEuler(_8.fromArray(O))}if(i.rotation){const O=i.rotation.map(lo.degToRad);O.push(i.eulerOrder),n.makeRotationFromEuler(_8.fromArray(O))}if(i.postRotation){const O=i.postRotation.map(lo.degToRad);O.push(i.eulerOrder),r.makeRotationFromEuler(_8.fromArray(O)),r.invert()}i.scale&&s.scale(Ag.fromArray(i.scale)),i.scalingOffset&&a.setPosition(Ag.fromArray(i.scalingOffset)),i.scalingPivot&&o.setPosition(Ag.fromArray(i.scalingPivot)),i.rotationOffset&&l.setPosition(Ag.fromArray(i.rotationOffset)),i.rotationPivot&&u.setPosition(Ag.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(h.copy(i.parentMatrix),c.copy(i.parentMatrixWorld));const p=t.clone().multiply(n).multiply(r),v=new kt;v.extractRotation(c);const b=new kt;b.copyPosition(c);const _=b.clone().invert().multiply(c),M=v.clone().invert().multiply(_),E=s,R=new kt;if(d===0)R.copy(v).multiply(p).multiply(M).multiply(E);else if(d===1)R.copy(v).multiply(M).multiply(p).multiply(E);else{const U=new kt().scale(new ne().setFromMatrixScale(h)).clone().invert(),Q=M.clone().multiply(U);R.copy(v).multiply(p).multiply(Q).multiply(E)}const L=u.clone().invert(),I=o.clone().invert();let D=e.clone().multiply(l).multiply(u).multiply(t).multiply(n).multiply(r).multiply(L).multiply(a).multiply(o).multiply(s).multiply(I);const k=new kt().copyPosition(D),G=c.clone().multiply(k);return f.copyPosition(G),D=f.clone().multiply(R),D.premultiply(c.invert()),D}function eK(i){i=i||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[i]}function x8(i){return i.split(",").map(function(t){return parseFloat(t)})}function tK(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=i.byteLength),my(new Uint8Array(i,e,t))}function _1e(i,e){for(let t=0,n=i.length,r=e.length;t<r;t++,n++)i[n]=e[t]}function x1e(i,e,t,n){for(let r=t,s=0;r<n;r++,s++)i[s]=e[r];return i}function Cz(i,e,t){return i.slice(0,e).concat(t).concat(i.slice(e))}const b8=new WeakMap;class b1e extends Ao{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new tl(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const n=JSON.stringify(t);if(b8.has(e)){const l=b8.get(e);if(l.key===n)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((u,c)=>{r._callbacks[s]={resolve:u,reject:c},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),b8.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new fn;e.index&&t.setIndex(new Kn(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new Kn(o,a))}return t}_loadLibrary(e,t){const n=new tl(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=w1e.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function w1e(){let i,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":i=a.decoderConfig,e=new Promise(function(c){i.onModuleLoaded=function(h){c({draco:h})},DracoDecoderModule(i)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(c=>{const h=c.draco,f=new h.Decoder,d=new h.DecoderBuffer;d.Init(new Int8Array(l),l.byteLength);try{const p=t(h,f,d,u),v=p.attributes.map(b=>b.array.buffer);p.index&&v.push(p.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:p},v)}catch(p){console.error(p),self.postMessage({type:"error",id:a.id,error:p.message})}finally{h.destroy(d),h.destroy(f)}});break}};function t(o,a,l,u){const c=u.attributeIDs,h=u.attributeTypes;let f,d;const p=a.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)f=new o.Mesh,d=a.DecodeBufferToMesh(l,f);else if(p===o.POINT_CLOUD)f=new o.PointCloud,d=a.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const v={index:null,attributes:[]};for(const b in c){const _=self[h[b]];let M,E;if(u.useUniqueIDs)E=c[b],M=a.GetAttributeByUniqueId(f,E);else{if(E=a.GetAttributeId(f,o[c[b]]),E===-1)continue;M=a.GetAttribute(f,E)}v.attributes.push(r(o,a,f,b,_,M))}return p===o.TRIANGULAR_MESH&&(v.index=n(o,a,f)),o.destroy(f),v}function n(o,a,l){const c=l.num_faces()*3,h=c*4,f=o._malloc(h);a.GetTrianglesUInt32Array(l,h,f);const d=new Uint32Array(o.HEAPF32.buffer,f,c).slice();return o._free(f),{array:d,itemSize:1}}function r(o,a,l,u,c,h){const f=h.num_components(),p=l.num_points()*f,v=p*c.BYTES_PER_ELEMENT,b=s(o,c),_=o._malloc(v);a.GetAttributeDataArrayForAllPoints(l,h,b,v,_);const M=new c(o.HEAPF32.buffer,_,p).slice();return o._free(_),{name:u,array:M,itemSize:f}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let $S;const w8=()=>{if($S)return $S;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=i;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function a(h){const f=new Uint8Array(h.length);for(let p=0;p<h.length;++p){const v=h.charCodeAt(p);f[p]=v>96?v-71:v>64?v-65:v>47?v+4:v>46?63:62}let d=0;for(let p=0;p<h.length;++p)f[d++]=f[p]<60?n[f[p]]:(f[p]-60)*64+f[++p];return f.buffer.slice(0,d)}function l(h,f,d,p,v,b){const _=s.exports.sbrk,M=d+3&-4,E=_(M*p),R=_(v.length),L=new Uint8Array(s.exports.memory.buffer);L.set(v,R);const I=h(E,d,p,R,v.length);if(I===0&&b&&b(E,M,p),f.set(L.subarray(E,E+d*p)),_(E-_(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return $S={ready:o,supported:!0,decodeVertexBuffer(h,f,d,p,v){l(s.exports.meshopt_decodeVertexBuffer,h,f,d,p,s.exports[u[v]])},decodeIndexBuffer(h,f,d,p){l(s.exports.meshopt_decodeIndexBuffer,h,f,d,p)},decodeIndexSequence(h,f,d,p){l(s.exports.meshopt_decodeIndexSequence,h,f,d,p)},decodeGltfBuffer(h,f,d,p,v,b){l(s.exports[c[v]],h,f,d,p,s.exports[u[b]])}},$S};function nK(i,e){if(Object.is(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;const t=Object.keys(i);if(t.length!==Object.keys(e).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(e,t[n])||!Object.is(i[t[n]],e[t[n]]))return!1;return!0}const S8=i=>i===Object(i)&&!Array.isArray(i)&&typeof i!="function";function gy(i,e){const t=No(s=>s.gl),n=Cc(Yp,S8(i)?Object.values(i):i);return W.useLayoutEffect(()=>{e==null||e(n)},[e]),W.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(n)?s=n:n instanceof or?s=[n]:S8(n)&&(s=Object.values(n)),s.forEach(o=>{o instanceof or&&t.initTexture(o)})}},[t,n]),W.useMemo(()=>{if(S8(i)){const s={};let o=0;for(const a in i)s[a]=n[o++];return s}else return n},[i,n])}gy.preload=i=>Cc.preload(Yp,i);gy.clear=i=>Cc.clear(Yp,i);let WS=null,iK="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function rK(i=!0,e=!0,t){return n=>{t&&t(n),i&&(WS||(WS=new b1e),WS.setDecoderPath(typeof i=="string"?i:iK),n.setDRACOLoader(WS)),e&&n.setMeshoptDecoder(typeof w8=="function"?w8():w8)}}const ll=(i,e,t,n)=>Cc(YL,i,rK(e,t,n));ll.preload=(i,e,t,n)=>Cc.preload(YL,i,rK(e,t,n));ll.clear=i=>Cc.clear(YL,i);ll.setDecoderPath=i=>{iK=i};function S1e(i,e,t){const n=No(f=>f.size),r=No(f=>f.viewport),s=typeof i=="number"?i:n.width*r.dpr,o=n.height*r.dpr,a=(typeof i=="number"?t:i)||{},{samples:l=0,depth:u,...c}=a,h=W.useMemo(()=>{const f=new ql(s,o,{minFilter:pr,magFilter:pr,type:Vp,...c});return u&&(f.depthTexture=new i4(s,o,ya)),f.samples=l,f},[]);return W.useLayoutEffect(()=>{h.setSize(s,o),l&&(h.samples=l)},[l,h,s,o]),W.useEffect(()=>()=>h.dispose(),[]),h}const M1e=i=>typeof i=="function",T1e=W.forwardRef(({envMap:i,resolution:e=256,frames:t=1/0,makeDefault:n,children:r,...s},o)=>{const a=No(({set:b})=>b),l=No(({camera:b})=>b),u=No(({size:b})=>b),c=W.useRef(null);W.useImperativeHandle(o,()=>c.current,[]);const h=W.useRef(null),f=S1e(e);W.useLayoutEffect(()=>{s.manual||(c.current.aspect=u.width/u.height)},[u,s]),W.useLayoutEffect(()=>{c.current.updateProjectionMatrix()});let d=0,p=null;const v=M1e(r);return Yy(b=>{v&&(t===1/0||d<t)&&(h.current.visible=!1,b.gl.setRenderTarget(f),p=b.scene.background,i&&(b.scene.background=i),b.gl.render(b.scene,c.current),b.scene.background=p,b.gl.setRenderTarget(null),h.current.visible=!0,d++)}),W.useLayoutEffect(()=>{if(n){const b=l;return a(()=>({camera:c.current})),()=>a(()=>({camera:b}))}},[c,n,a]),W.createElement(W.Fragment,null,W.createElement("perspectiveCamera",$s({ref:c},s),!v&&r),W.createElement("group",{ref:h},v&&r(f.texture)))}),sK=W.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},c)=>{const h=No(I=>I.invalidate),f=No(I=>I.camera),d=No(I=>I.gl),p=No(I=>I.events),v=No(I=>I.setEvents),b=No(I=>I.set),_=No(I=>I.get),M=No(I=>I.performance),E=e||f,R=n||p.connected||d.domElement,L=W.useMemo(()=>new bge(E),[E]);return Yy(()=>{L.enabled&&L.update()},-1),W.useEffect(()=>(s&&L.connect(s===!0?R:s),L.connect(R),()=>void L.dispose()),[s,R,t,L,h]),W.useEffect(()=>{const I=G=>{h(),t&&M.regress(),o&&o(G)},D=G=>{a&&a(G)},k=G=>{l&&l(G)};return L.addEventListener("change",I),L.addEventListener("start",D),L.addEventListener("end",k),()=>{L.removeEventListener("start",D),L.removeEventListener("end",k),L.removeEventListener("change",I)}},[o,a,l,L,h,v]),W.useEffect(()=>{if(i){const I=_().controls;return b({controls:L}),()=>b({controls:I})}},[i,L]),W.createElement("primitive",$s({ref:c,object:L,enableDamping:r},u))});function h1(i){return Cc(QL,i)}h1.preload=i=>Cc.preload(QL,i);h1.clear=i=>Cc.clear(QL,i);const E1e="modulepreload",C1e=function(i){return"/Portfolio/"+i},Rz={},R1e=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=C1e(l),l in Rz)return;Rz[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":E1e,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,d)=>{h.addEventListener("load",f),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var Pz,Bz;const P1e=typeof window<"u"&&typeof((Pz=window.document)==null?void 0:Pz.createElement)=="function"&&typeof((Bz=window.navigator)==null?void 0:Bz.userAgent)=="string";let XS=null;async function B1e(i,e){if(P1e&&i.pathname.endsWith(".m3u8")){var t;if((t=XS)!==null&&t!==void 0||(XS=await R1e(()=>import("./hls-D3QFHZ_k.js").then(n=>n.h),[])),XS.default.isSupported())return new XS.default({...e})}return null}function I1e(i,{unsuspend:e="loadedmetadata",start:t=!0,crossOrigin:n="anonymous",muted:r=!0,loop:s=!0,hls:o={},...a}={}){const l=new URL(typeof i=="string"?i:"",window.location.href),u=W.useRef(null),c=W.useRef(null),h=No(d=>d.gl),f=hQ(()=>new Promise(async d=>{const p=Object.assign(document.createElement("video"),{src:typeof i=="string"&&i||void 0,srcObject:i instanceof MediaStream&&i||void 0,crossOrigin:n,loop:s,muted:r,...a});if(c.current=p,typeof i=="string"){const b=u.current=await B1e(l,o);b?(b.attachMedia(p),b.on("hlsMediaAttached",()=>{b.loadSource(i)})):p.src=i}else i instanceof MediaStream&&(p.srcObject=i);const v=new EY(p);"colorSpace"in v?v.colorSpace=h.outputColorSpace:v.encoding=h.outputEncoding,p.addEventListener(e,()=>d(v))}),[i]);return W.useEffect(()=>(t&&f.image.play(),()=>{u.current&&(u.current.destroy(),u.current=null)}),[f,t]),f}function N1e(i,e){const t=W.useRef(),[n]=W.useState(()=>e?e instanceof Qn?{current:e}:e:t),[r]=W.useState(()=>new iQ(void 0));W.useLayoutEffect(()=>{e&&(n.current=e instanceof Qn?e:e.current),r._root=n.current});const s=W.useRef({}),o=W.useMemo(()=>{const a={};return i.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(n.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,n.current))},configurable:!0})),{ref:n,clips:i,actions:a,names:i.map(l=>l.name),mixer:r}},[i]);return Yy((a,l)=>r.update(l)),W.useEffect(()=>{const a=n.current;return()=>{s.current={},r.stopAllAction(),Object.values(o.actions).forEach(l=>{a&&r.uncacheAction(l,a)})}},[i]),o}const oK=W.forwardRef(function({children:e,disable:t,disableX:n,disableY:r,disableZ:s,left:o,right:a,top:l,bottom:u,front:c,back:h,onCentered:f,precise:d=!0,cacheKey:p=0,...v},b){const _=W.useRef(null),M=W.useRef(null),E=W.useRef(null);return W.useLayoutEffect(()=>{M.current.matrixWorld.identity();const R=new Zr().setFromObject(E.current,d),L=new ne,I=new ds,D=R.max.x-R.min.x,k=R.max.y-R.min.y,G=R.max.z-R.min.z;R.getCenter(L),R.getBoundingSphere(I);const O=l?k/2:u?-k/2:0,U=o?-D/2:a?D/2:0,Q=c?G/2:h?-G/2:0;M.current.position.set(t||n?0:-L.x+U,t||r?0:-L.y+O,t||s?0:-L.z+Q),typeof f<"u"&&f({parent:_.current.parent,container:_.current,width:D,height:k,depth:G,boundingBox:R,boundingSphere:I,center:L,verticalAlignment:O,horizontalAlignment:U,depthAlignment:Q})},[p,f,l,o,c,t,n,r,s,d,a,u,h]),W.useImperativeHandle(b,()=>_.current,[]),W.createElement("group",$s({ref:_},v),W.createElement("group",{ref:M},W.createElement("group",{ref:E},e)))});var aK={exports:{}},D1e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",L1e=D1e,O1e=L1e;function lK(){}function uK(){}uK.resetWarningCache=lK;var F1e=function(){function i(n,r,s,o,a,l){if(l!==O1e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}i.isRequired=i;function e(){return i}var t={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:uK,resetWarningCache:lK};return t.PropTypes=t,t};aK.exports=F1e();var k1e=aK.exports;const q=xh(k1e),cK=W.forwardRef(({children:i,enabled:e=!0,speed:t=1,rotationIntensity:n=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...a},l)=>{const u=W.useRef(null);W.useImperativeHandle(l,()=>u.current,[]);const c=W.useRef(Math.random()*1e4);return Yy(h=>{var f,d;if(!e||t===0)return;o&&h.invalidate();const p=c.current+h.clock.getElapsedTime();u.current.rotation.x=Math.cos(p/4*t)/8*n,u.current.rotation.y=Math.sin(p/4*t)/8*n,u.current.rotation.z=Math.sin(p/4*t)/20*n;let v=Math.sin(p/4*t)/10;v=lo.mapLinear(v,-.1,.1,(f=s==null?void 0:s[0])!==null&&f!==void 0?f:-.1,(d=s==null?void 0:s[1])!==null&&d!==void 0?d:.1),u.current.position.y=v*r,u.current.updateMatrix()}),W.createElement("group",a,W.createElement("group",{ref:u,matrixAutoUpdate:!1},i))});function U1e(i){const{nodes:e,materials:t}=ll("/models/hacker-room.glb"),n=gy("textures/desk/monitor.png"),r=gy("textures/desk/cpu.png");return Y.jsxs("group",{...i,dispose:null,children:[Y.jsx("mesh",{geometry:e.screen_screens_0.geometry,material:t.screens,children:Y.jsx("meshMatcapMaterial",{map:r})}),Y.jsx("mesh",{geometry:e.screen_glass_glass_0.geometry,material:t.glass}),Y.jsx("mesh",{geometry:e.table_table_mat_0_1.geometry,material:t.table_mat}),Y.jsx("mesh",{geometry:e.table_table_mat_0_2.geometry,material:t.computer_mat,children:Y.jsx("meshMatcapMaterial",{map:n})}),Y.jsx("mesh",{geometry:e.table_table_mat_0_3.geometry,material:t.server_mat}),Y.jsx("mesh",{geometry:e.table_table_mat_0_4.geometry,material:t.vhsPlayer_mat}),Y.jsx("mesh",{geometry:e.table_table_mat_0_5.geometry,material:t.stand_mat}),Y.jsx("mesh",{geometry:e.table_table_mat_0_6.geometry,material:t.mat_mat}),Y.jsx("mesh",{geometry:e.table_table_mat_0_7.geometry,material:t.arm_mat}),Y.jsx("mesh",{geometry:e.table_table_mat_0_8.geometry,material:t.tv_mat,children:Y.jsx("meshMatcapMaterial",{map:n})}),Y.jsx("mesh",{geometry:e.table_table_mat_0_9.geometry,material:t.cables_mat}),Y.jsx("mesh",{geometry:e.table_table_mat_0_10.geometry,material:t.props_mat}),Y.jsx("mesh",{geometry:e.table_table_mat_0_11.geometry,material:t.ground_mat}),Y.jsx("mesh",{geometry:e.table_table_mat_0_12.geometry,material:t.key_mat})]})}ll.preload("/models/hacker-room.glb");const hK=()=>{const{progress:i}=D0e();return Y.jsxs(N0e,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Y.jsx("span",{className:"canvas-loader"}),Y.jsx("p",{style:{fontSize:14,color:"#F1F1F1 ",fontWeight:800,marginTop:40},children:i!==0?`${i.toFixed(2)}%`:"Loading..."})]})};function z1e(i,e){typeof i=="function"?i(e):i!=null&&(i.current=e)}function fK(...i){return e=>i.forEach(t=>z1e(t,e))}function Am(...i){return W.useCallback(fK(...i),i)}var dK=W.forwardRef((i,e)=>{const{children:t,...n}=i,r=W.Children.toArray(t),s=r.find(G1e);if(s){const o=s.props.children,a=r.map(l=>l===s?W.Children.count(o)>1?W.Children.only(null):W.isValidElement(o)?o.props.children:null:l);return Y.jsx(GB,{...n,ref:e,children:W.isValidElement(o)?W.cloneElement(o,void 0,a):null})}return Y.jsx(GB,{...n,ref:e,children:t})});dK.displayName="Slot";var GB=W.forwardRef((i,e)=>{const{children:t,...n}=i;if(W.isValidElement(t)){const r=q1e(t);return W.cloneElement(t,{...H1e(n,t.props),ref:e?fK(e,r):r})}return W.Children.count(t)>1?W.Children.only(null):null});GB.displayName="SlotClone";var pK=({children:i})=>Y.jsx(Y.Fragment,{children:i});function G1e(i){return W.isValidElement(i)&&i.type===pK}function H1e(i,e){const t={...e};for(const n in e){const r=i[n],s=e[n];/^on[A-Z]/.test(n)?r&&s?t[n]=(...a)=>{s(...a),r(...a)}:r&&(t[n]=r):n==="style"?t[n]={...r,...s}:n==="className"&&(t[n]=[r,s].filter(Boolean).join(" "))}return{...i,...t}}function q1e(i){var n,r;let e=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=(r=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var V1e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Kp=V1e.reduce((i,e)=>{const t=W.forwardRef((n,r)=>{const{asChild:s,...o}=n,a=s?dK:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Y.jsx(a,{...o,ref:r})});return t.displayName=`Primitive.${e}`,{...i,[e]:t}},{});function j1e(i,e){i&&HC.flushSync(()=>i.dispatchEvent(e))}var $0=globalThis!=null&&globalThis.document?W.useLayoutEffect:()=>{},$1e="Portal",AK=W.forwardRef((i,e)=>{var a;const{container:t,...n}=i,[r,s]=W.useState(!1);$0(()=>s(!0),[]);const o=t||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Tae.createPortal(Y.jsx(Kp.div,{...n,ref:e}),o):null});AK.displayName=$1e;var W1e=AK,Iz=Object.prototype.hasOwnProperty;function fx(i,e){var t,n;if(i===e)return!0;if(i&&e&&(t=i.constructor)===e.constructor){if(t===Date)return i.getTime()===e.getTime();if(t===RegExp)return i.toString()===e.toString();if(t===Array){if((n=i.length)===e.length)for(;n--&&fx(i[n],e[n]););return n===-1}if(!t||typeof i=="object"){n=0;for(t in i)if(Iz.call(i,t)&&++n&&!Iz.call(e,t)||!(t in e)||!fx(i[t],e[t]))return!1;return Object.keys(e).length===n}}return i!==i&&e!==e}var E4=function(e,t,n,r){this.name=e,this.fn=t,this.args=n,this.modifiers=r};E4.prototype._test=function(e){var t=this.fn;try{U1(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return U1(this.modifiers.slice(),t,this)(e)}catch{return!1}};E4.prototype._check=function(e){try{U1(this.modifiers.slice(),this.fn,this)(e)}catch{if(U1(this.modifiers.slice(),function(n){return n},this)(!1))return}if(!U1(this.modifiers.slice(),this.fn,this)(e))throw null};E4.prototype._testAsync=function(e){var t=this;return new Promise(function(n,r){gK(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?n(e):r(null)}).catch(function(s){return r(s)})})};function mK(i,e){return e===void 0&&(e="simple"),typeof i=="object"?i[e]:i}function U1(i,e,t){if(i.length){var n=i.shift(),r=U1(i,e,t);return n.perform(r,t)}else return mK(e)}function gK(i,e,t){if(i.length){var n=i.shift(),r=gK(i,e,t);return n.performAsync(r,t)}else return function(s){return Promise.resolve(mK(e,"async")(s))}}var X1e=function(e,t,n){this.name=e,this.perform=t,this.performAsync=n},KL=function(i){function e(t,n,r,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];i.call(this,o),i.captureStackTrace&&i.captureStackTrace(this,e),this.rule=t,this.value=n,this.cause=r,this.target=s}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e}(Error),ph=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};ph.prototype._applyRule=function(e,t){var n=this;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return n.chain.push(new E4(t,e.apply(n,r),r,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}};ph.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new X1e(t,e.simple,e.async)),this};ph.prototype._clone=function(){return new ph(this.chain.slice(),this.nextRuleModifiers.slice())};ph.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};ph.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(n){try{n._check(e)}catch(r){t.push(new KL(n,e,r))}}),t};ph.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(n){throw new KL(t,e,n)}})};ph.prototype.testAsync=function(e){var t=this;return new Promise(function(n,r){yK(e,t.chain.slice(),n,r)})};function yK(i,e,t,n){if(e.length){var r=e.shift();r._testAsync(i).then(function(){yK(i,e,t,n)},function(s){n(new KL(r,i,s))})}else t(i)}var Nz=function(i,e){return e&&typeof i=="string"&&i.trim().length===0?!0:i==null};function Y1e(i,e){return e===void 0&&(e=!1),{simple:function(t){return Nz(t,e)||i.check(t)===void 0},async:function(t){return Nz(t,e)||i.testAsync(t)}}}function Va(){return typeof Proxy<"u"?vK(new ph):HB(new ph)}var dx={};Va.extend=function(i){Object.assign(dx,i)};Va.clearCustomRules=function(){dx={}};function vK(i){return new Proxy(i,{get:function(t,n){if(n in t)return t[n];var r=vK(i._clone());if(n in iE)return r._applyModifier(iE[n],n);if(n in dx)return r._applyRule(dx[n],n);if(n in qB)return r._applyRule(qB[n],n)}})}function HB(i){var e=function(r,s){return Object.keys(r).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var u=HB(s._clone()),c=u._applyRule(r[o],o).apply(void 0,a);return c}}),s},t=e(qB,i),n=e(dx,t);return Object.keys(iE).forEach(function(r){Object.defineProperty(n,r,{get:function(){var s=HB(n._clone());return s._applyModifier(iE[r],r)}})}),n}var iE={not:{simple:function(i){return function(e){return!i(e)}},async:function(i){return function(e){return Promise.resolve(i(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(i){return function(e){return YS(e).some(function(t){try{return i(t)}catch{return!1}})}},async:function(i){return function(e){return Promise.all(YS(e).map(function(t){try{return i(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(i){return function(e){return e!==!1&&YS(e).every(i)}},async:function(i){return function(e){return Promise.all(YS(e).map(i)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(i,e){return function(t){return Dz(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i(t):i(t)}},async:function(i,e){return function(t){return Promise.resolve(i(t)).then(function(n){return Dz(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n:n}).catch(function(){return!1})}}}};function Dz(i){return i&&i.name==="schema"&&i.args.length>0&&typeof i.args[0]=="object"}function YS(i){return typeof i=="string"?i.split(""):i}var qB={equal:function(i){return function(e){return e==i}},exact:function(i){return function(e){return e===i}},number:function(i){return i===void 0&&(i=!0),function(e){return typeof e=="number"&&(i||isFinite(e))}},integer:function(){return function(i){var e=Number.isInteger||Q1e;return e(i)}},numeric:function(){return function(i){return!isNaN(parseFloat(i))&&isFinite(i)}},string:function(){return mg("string")},boolean:function(){return mg("boolean")},undefined:function(){return mg("undefined")},null:function(){return mg("null")},array:function(){return mg("array")},object:function(){return mg("object")},instanceOf:function(i){return function(e){return e instanceof i}},pattern:function(i){return function(e){return i.test(e)}},lowercase:function(){return function(i){return typeof i=="boolean"||i===i.toLowerCase()&&i.trim()!==""}},uppercase:function(){return function(i){return i===i.toUpperCase()&&i.trim()!==""}},vowel:function(){return function(i){return/^[aeiou]+$/i.test(i)}},consonant:function(){return function(i){return/^(?=[^aeiou])([a-z]+)$/i.test(i)}},first:function(i){return function(e){return e[0]==i}},last:function(i){return function(e){return e[e.length-1]==i}},empty:function(){return function(i){return i.length===0}},length:function(i,e){return function(t){return t.length>=i&&t.length<=(e||i)}},minLength:function(i){return function(e){return e.length>=i}},maxLength:function(i){return function(e){return e.length<=i}},negative:function(){return function(i){return i<0}},positive:function(){return function(i){return i>=0}},between:function(i,e){return function(t){return t>=i&&t<=e}},range:function(i,e){return function(t){return t>=i&&t<=e}},lessThan:function(i){return function(e){return e<i}},lessThanOrEqual:function(i){return function(e){return e<=i}},greaterThan:function(i){return function(e){return e>i}},greaterThanOrEqual:function(i){return function(e){return e>=i}},even:function(){return function(i){return i%2===0}},odd:function(){return function(i){return i%2!==0}},includes:function(i){return function(e){return~e.indexOf(i)}},schema:function(i){return K1e(i)},passesAnyOf:function(){for(var i=[],e=arguments.length;e--;)i[e]=arguments[e];return function(t){return i.some(function(n){return n.test(t)})}},optional:Y1e};function mg(i){return function(e){return Array.isArray(e)&&i==="array"||e===null&&i==="null"||typeof e===i}}function Q1e(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i}function K1e(i){return{simple:function(e){var t=[];if(Object.keys(i).forEach(function(n){var r=i[n];try{r.check((e||{})[n])}catch(s){s.target=n,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],n=Object.keys(i).map(function(r){var s=i[r];return s.testAsync((e||{})[r]).catch(function(o){o.target=r,t.push(o)})});return Promise.all(n).then(function(){if(t.length>0)throw t;return!0})}}}var Ui="colors",na="sizes",tn="space",J1e={gap:tn,gridGap:tn,columnGap:tn,gridColumnGap:tn,rowGap:tn,gridRowGap:tn,inset:tn,insetBlock:tn,insetBlockEnd:tn,insetBlockStart:tn,insetInline:tn,insetInlineEnd:tn,insetInlineStart:tn,margin:tn,marginTop:tn,marginRight:tn,marginBottom:tn,marginLeft:tn,marginBlock:tn,marginBlockEnd:tn,marginBlockStart:tn,marginInline:tn,marginInlineEnd:tn,marginInlineStart:tn,padding:tn,paddingTop:tn,paddingRight:tn,paddingBottom:tn,paddingLeft:tn,paddingBlock:tn,paddingBlockEnd:tn,paddingBlockStart:tn,paddingInline:tn,paddingInlineEnd:tn,paddingInlineStart:tn,top:tn,right:tn,bottom:tn,left:tn,scrollMargin:tn,scrollMarginTop:tn,scrollMarginRight:tn,scrollMarginBottom:tn,scrollMarginLeft:tn,scrollMarginX:tn,scrollMarginY:tn,scrollMarginBlock:tn,scrollMarginBlockEnd:tn,scrollMarginBlockStart:tn,scrollMarginInline:tn,scrollMarginInlineEnd:tn,scrollMarginInlineStart:tn,scrollPadding:tn,scrollPaddingTop:tn,scrollPaddingRight:tn,scrollPaddingBottom:tn,scrollPaddingLeft:tn,scrollPaddingX:tn,scrollPaddingY:tn,scrollPaddingBlock:tn,scrollPaddingBlockEnd:tn,scrollPaddingBlockStart:tn,scrollPaddingInline:tn,scrollPaddingInlineEnd:tn,scrollPaddingInlineStart:tn,fontSize:"fontSizes",background:Ui,backgroundColor:Ui,backgroundImage:Ui,borderImage:Ui,border:Ui,borderBlock:Ui,borderBlockEnd:Ui,borderBlockStart:Ui,borderBottom:Ui,borderBottomColor:Ui,borderColor:Ui,borderInline:Ui,borderInlineEnd:Ui,borderInlineStart:Ui,borderLeft:Ui,borderLeftColor:Ui,borderRight:Ui,borderRightColor:Ui,borderTop:Ui,borderTopColor:Ui,caretColor:Ui,color:Ui,columnRuleColor:Ui,fill:Ui,outline:Ui,outlineColor:Ui,stroke:Ui,textDecorationColor:Ui,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:na,minBlockSize:na,maxBlockSize:na,inlineSize:na,minInlineSize:na,maxInlineSize:na,width:na,minWidth:na,maxWidth:na,height:na,minHeight:na,maxHeight:na,flexBasis:na,gridTemplateColumns:na,gridTemplateRows:na,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},Z1e=(i,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Qy=()=>{const i=Object.create(null);return(e,t,...n)=>{const r=(s=>JSON.stringify(s,Z1e))(e);return r in i?i[r]:i[r]=t(e,...n)}},S0=Symbol.for("sxs.internal"),JL=(i,e)=>Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)),Lz=i=>{for(const e in i)return!0;return!1},{hasOwnProperty:eye}=Object.prototype,VB=i=>i.includes("-")?i:i.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),tye=/\s+(?![^()]*\))/,gg=i=>e=>i(...typeof e=="string"?String(e).split(tye):[e]),Oz={appearance:i=>({WebkitAppearance:i,appearance:i}),backfaceVisibility:i=>({WebkitBackfaceVisibility:i,backfaceVisibility:i}),backdropFilter:i=>({WebkitBackdropFilter:i,backdropFilter:i}),backgroundClip:i=>({WebkitBackgroundClip:i,backgroundClip:i}),boxDecorationBreak:i=>({WebkitBoxDecorationBreak:i,boxDecorationBreak:i}),clipPath:i=>({WebkitClipPath:i,clipPath:i}),content:i=>({content:i.includes('"')||i.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(i)?i:`"${i}"`}),hyphens:i=>({WebkitHyphens:i,hyphens:i}),maskImage:i=>({WebkitMaskImage:i,maskImage:i}),maskSize:i=>({WebkitMaskSize:i,maskSize:i}),tabSize:i=>({MozTabSize:i,tabSize:i}),textSizeAdjust:i=>({WebkitTextSizeAdjust:i,textSizeAdjust:i}),userSelect:i=>({WebkitUserSelect:i,userSelect:i}),marginBlock:gg((i,e)=>({marginBlockStart:i,marginBlockEnd:e||i})),marginInline:gg((i,e)=>({marginInlineStart:i,marginInlineEnd:e||i})),maxSize:gg((i,e)=>({maxBlockSize:i,maxInlineSize:e||i})),minSize:gg((i,e)=>({minBlockSize:i,minInlineSize:e||i})),paddingBlock:gg((i,e)=>({paddingBlockStart:i,paddingBlockEnd:e||i})),paddingInline:gg((i,e)=>({paddingInlineStart:i,paddingInlineEnd:e||i}))},M8=/([\d.]+)([^]*)/,nye=(i,e)=>i.length?i.reduce((t,n)=>(t.push(...e.map(r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(r)?`:is(${n})`:n):n+" "+r)),t),[]):e,iye=(i,e)=>i in rye&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,n,r,s)=>n+(r==="stretch"?`-moz-available${s};${VB(i)}:${n}-webkit-fill-available`:`-moz-fit-content${s};${VB(i)}:${n}fit-content`)+s):String(e),rye={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Ff=i=>i?i+"-":"",_K=(i,e,t)=>i.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(n,r,s,o,a)=>o=="$"==!!s?n:(r||o=="--"?"calc(":"")+"var(--"+(o==="$"?Ff(e)+(a.includes("$")?"":Ff(t))+a.replace(/\$/g,"-"):a)+")"+(r||o=="--"?"*"+(r||"")+(s||"1")+")":"")),sye=/\s*,\s*(?![^()]*\))/,oye=Object.prototype.toString,f1=(i,e,t,n,r)=>{let s,o,a;const l=(u,c,h)=>{let f,d;const p=v=>{for(f in v){const M=f.charCodeAt(0)===64,E=M&&Array.isArray(v[f])?v[f]:[v[f]];for(d of E){const R=/[A-Z]/.test(_=f)?_:_.replace(/-[^]/g,I=>I[1].toUpperCase()),L=typeof d=="object"&&d&&d.toString===oye&&(!n.utils[R]||!c.length);if(R in n.utils&&!L){const I=n.utils[R];if(I!==o){o=I,p(I(d)),o=null;continue}}else if(R in Oz){const I=Oz[R];if(I!==a){a=I,p(I(d)),a=null;continue}}if(M&&(b=f.slice(1)in n.media?"@media "+n.media[f.slice(1)]:f,f=b.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(I,D,k,G,O,U)=>{const Q=M8.test(D),X=.0625*(Q?-1:1),[ee,K]=Q?[G,D]:[D,G];return"("+(k[0]==="="?"":k[0]===">"===Q?"max-":"min-")+ee+":"+(k[0]!=="="&&k.length===1?K.replace(M8,(Z,he,j)=>Number(he)+X*(k===">"?1:-1)+j):K)+(O?") and ("+(O[0]===">"?"min-":"max-")+ee+":"+(O.length===1?U.replace(M8,(Z,he,j)=>Number(he)+X*(O===">"?-1:1)+j):U):"")+")"})),L){const I=M?h.concat(f):[...h],D=M?[...c]:nye(c,f.split(sye));s!==void 0&&r(Fz(...s)),s=void 0,l(d,D,I)}else s===void 0&&(s=[[],c,h]),f=M||f.charCodeAt(0)!==36?f:`--${Ff(n.prefix)}${f.slice(1).replace(/\$/g,"-")}`,d=L?d:typeof d=="number"?d&&R in aye?String(d)+"px":String(d):_K(iye(R,d??""),n.prefix,n.themeMap[R]),s[0].push(`${M?`${f} `:`${VB(f)}:`}${d}`)}}var b,_};p(u),s!==void 0&&r(Fz(...s)),s=void 0};l(i,e,t)},Fz=(i,e,t)=>`${t.map(n=>`${n}{`).join("")}${e.length?`${e.join(",")}{`:""}${i.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,aye={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},kz=i=>String.fromCharCode(i+(i>25?39:97)),M0=i=>(e=>{let t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=kz(t%52)+n;return kz(t%52)+n})(((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(5381,JSON.stringify(i))>>>0),V2=["themed","global","styled","onevar","resonevar","allvar","inline"],lye=i=>{if(i.href&&!i.href.startsWith(location.origin))return!1;try{return!!i.cssRules}catch{return!1}},uye=i=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(r[o-1]&&(l=r[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===s)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},n=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in a)delete a[u]}const r=Object(i).styleSheets||[];for(const a of r)if(lye(a)){for(let l=0,u=a.cssRules;u[l];++l){const c=Object(u[l]);if(c.type!==1)continue;const h=Object(u[l+1]);if(h.type!==4)continue;++l;const{cssText:f}=c;if(!f.startsWith("--sxs"))continue;const d=f.slice(14,-3).trim().split(/\s+/),p=V2[d[0]];p&&(e||(e={sheet:a,reset:n,rules:{},toString:t}),e.rules[p]={group:h,index:l,cache:new Set(d)})}if(e)break}if(!e){const a=(l,u)=>({type:u,cssRules:[],insertRule(c,h){this.cssRules.splice(h,0,a(c,{import:3,undefined:1}[(c.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,c=>c.cssText).join("")}}`:l}});e={sheet:i?(i.head||i).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:n,toString:t}}const{sheet:s,rules:o}=e;for(let a=V2.length-1;a>=0;--a){const l=V2[a];if(!o[l]){const u=V2[a+1],c=o[u]?o[u].index:s.cssRules.length;s.insertRule("@media{}",c),s.insertRule(`--sxs{--sxs:${a}}`,c),o[l]={group:s.cssRules[c+1],index:c,cache:new Set([a])}}cye(o[l])}};return n(),e},cye=i=>{const e=i.group;let t=e.cssRules.length;i.apply=n=>{try{e.insertRule(n,t),++t}catch{}}},f2=Symbol(),hye=Qy(),Uz=(i,e)=>hye(i,()=>(...t)=>{let n={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[S0]){n.type==null&&(n.type=r[S0].type);for(const s of r[S0].composers)n.composers.add(s)}else r.constructor!==Object||r.$$typeof?n.type==null&&(n.type=r):n.composers.add(fye(r,i));return n.type==null&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),dye(i,n,e)}),fye=({variants:i,compoundVariants:e,defaultVariants:t,...n},r)=>{const s=`${Ff(r.prefix)}c-${M0(n)}`,o=[],a=[],l=Object.create(null),u=[];for(const f in t)l[f]=String(t[f]);if(typeof i=="object"&&i)for(const f in i){c=l,h=f,eye.call(c,h)||(l[f]="undefined");const d=i[f];for(const p in d){const v={[f]:String(p)};String(p)==="undefined"&&u.push(f);const b=d[p],_=[v,b,!Lz(b)];o.push(_)}}var c,h;if(typeof e=="object"&&e)for(const f of e){let{css:d,...p}=f;d=typeof d=="object"&&d||{};for(const b in p)p[b]=String(p[b]);const v=[p,d,!Lz(d)];a.push(v)}return[s,n,o,a,l,u]},dye=(i,e,t)=>{const[n,r,s,o]=pye(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(h=>{function f(){for(let d=0;d<f[f2].length;d++){const[p,v]=f[f2][d];h.rules[p].apply(v)}return f[f2]=[],null}return f[f2]=[],f.rules={},V2.forEach(d=>f.rules[d]={apply:p=>f[f2].push([d,p])}),f})(t):null,l=(a||t).rules,u=`.${n}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,c=h=>{h=typeof h=="object"&&h||Aye;const{css:f,...d}=h,p={};for(const _ in s)if(delete d[_],_ in h){let M=h[_];typeof M=="object"&&M?p[_]={"@initial":s[_],...M}:(M=String(M),p[_]=M!=="undefined"||o.has(_)?M:s[_])}else p[_]=s[_];const v=new Set([...r]);for(const[_,M,E,R]of e.composers){t.rules.styled.cache.has(_)||(t.rules.styled.cache.add(_),f1(M,[`.${_}`],[],i,D=>{l.styled.apply(D)}));const L=zz(E,p,i.media),I=zz(R,p,i.media,!0);for(const D of L)if(D!==void 0)for(const[k,G,O]of D){const U=`${_}-${M0(G)}-${k}`;v.add(U);const Q=(O?t.rules.resonevar:t.rules.onevar).cache,X=O?l.resonevar:l.onevar;Q.has(U)||(Q.add(U),f1(G,[`.${U}`],[],i,ee=>{X.apply(ee)}))}for(const D of I)if(D!==void 0)for(const[k,G]of D){const O=`${_}-${M0(G)}-${k}`;v.add(O),t.rules.allvar.cache.has(O)||(t.rules.allvar.cache.add(O),f1(G,[`.${O}`],[],i,U=>{l.allvar.apply(U)}))}}if(typeof f=="object"&&f){const _=`${n}-i${M0(f)}-css`;v.add(_),t.rules.inline.cache.has(_)||(t.rules.inline.cache.add(_),f1(f,[`.${_}`],[],i,M=>{l.inline.apply(M)}))}for(const _ of String(h.className||"").trim().split(/\s+/))_&&v.add(_);const b=d.className=[...v].join(" ");return{type:e.type,className:b,selector:u,props:d,toString:()=>b,deferredInjector:a}};return JL(c,{className:n,selector:u,[S0]:e,toString:()=>(t.rules.styled.cache.has(n)||c(),n)})},pye=i=>{let e="";const t=[],n={},r=[];for(const[s,,,,o,a]of i){e===""&&(e=s),t.push(s),r.push(...a);for(const l in o){const u=o[l];(n[l]===void 0||u!=="undefined"||a.includes(u))&&(n[l]=u)}}return[e,t,n,new Set(r)]},zz=(i,e,t,n)=>{const r=[];e:for(let[s,o,a]of i){if(a)continue;let l,u=0,c=!1;for(l in s){const h=s[l];let f=e[l];if(f!==h){if(typeof f!="object"||!f)continue e;{let d,p,v=0;for(const b in f){if(h===String(f[b])){if(b!=="@initial"){const _=b.slice(1);(p=p||[]).push(_ in t?t[_]:b.replace(/^@media ?/,"")),c=!0}u+=v,d=!0}++v}if(p&&p.length&&(o={["@media "+p.join(", ")]:o}),!d)continue e}}}(r[u]=r[u]||[]).push([n?"cv":`${l}-${s[l]}`,o,c])}return r},Aye={},mye=Qy(),gye=(i,e)=>mye(i,()=>(...t)=>{const n=()=>{for(let r of t){r=typeof r=="object"&&r||{};let s=M0(r);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in r){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(r["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete r["@import"]}f1(r,[],[],i,o=>{e.rules.global.apply(o)})}}return""};return JL(n,{toString:n})}),yye=Qy(),vye=(i,e)=>yye(i,()=>t=>{const n=`${Ff(i.prefix)}k-${M0(t)}`,r=()=>{if(!e.rules.global.cache.has(n)){e.rules.global.cache.add(n);const s=[];f1(t,[],[],i,a=>s.push(a));const o=`@keyframes ${n}{${s.join("")}}`;e.rules.global.apply(o)}return n};return JL(r,{get name(){return r()},toString:r})}),_ye=class{constructor(i,e,t,n){this.token=i==null?"":String(i),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=n==null?"":String(n)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Ff(this.prefix)+Ff(this.scale)+this.token}toString(){return this.computedValue}},xye=Qy(),bye=(i,e)=>xye(i,()=>(t,n)=>{n=typeof t=="object"&&t||Object(n);const r=`.${t=(t=typeof t=="string"?t:"")||`${Ff(i.prefix)}t-${M0(n)}`}`,s={},o=[];for(const l in n){s[l]={};for(const u in n[l]){const c=`--${Ff(i.prefix)}${l}-${u}`,h=_K(String(n[l][u]),i.prefix,l);s[l][u]=new _ye(u,h,l,i.prefix),o.push(`${c}:${h}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${n===i.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:r,toString:a}}),wye=Qy(),Sye=Qy(),Mye=i=>{const e=(t=>{let n=!1;const r=wye(t,s=>{n=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,u=typeof s.theme=="object"&&s.theme||{},c={prefix:o,media:a,theme:u,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...J1e},utils:typeof s.utils=="object"&&s.utils||{}},h=uye(l),f={css:Uz(c,h),globalCss:gye(c,h),keyframes:vye(c,h),createTheme:bye(c,h),reset(){h.reset(),f.theme.toString()},theme:{},sheet:h,config:c,prefix:o,getCssText:h.toString,toString:h.toString};return String(f.theme=f.createTheme(u)),f});return n||r.reset(),r})(i);return e.styled=(({config:t,sheet:n})=>Sye(t,()=>{const r=Uz(t,n);return(...s)=>{const o=r(...s),a=o[S0].type,l=ge.forwardRef((u,c)=>{const h=u&&u.as||a,{props:f,deferredInjector:d}=o(u);return delete f.as,f.ref=c,d?ge.createElement(ge.Fragment,null,ge.createElement(h,f),ge.createElement(d,null)):ge.createElement(h,f)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[S0]=o[S0],l}}))(e),e};function nf(i,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(i==null||i(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function Tye(i,e=[]){let t=[];function n(s,o){const a=W.createContext(o),l=t.length;t=[...t,o];const u=h=>{var _;const{scope:f,children:d,...p}=h,v=((_=f==null?void 0:f[i])==null?void 0:_[l])||a,b=W.useMemo(()=>p,Object.values(p));return Y.jsx(v.Provider,{value:b,children:d})};u.displayName=s+"Provider";function c(h,f){var v;const d=((v=f==null?void 0:f[i])==null?void 0:v[l])||a,p=W.useContext(d);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,c]}const r=()=>{const s=t.map(o=>W.createContext(o));return function(a){const l=(a==null?void 0:a[i])||s;return W.useMemo(()=>({[`__scope${i}`]:{...a,[i]:l}}),[a,l])}};return r.scopeName=i,[n,Eye(r,...e)]}function Eye(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=n.reduce((a,{useScope:l,scopeName:u})=>{const h=l(s)[`__scope${u}`];return{...a,...h}},{});return W.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Ky(i){const e=W.useRef(i);return W.useEffect(()=>{e.current=i}),W.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}function Cye(i,e=globalThis==null?void 0:globalThis.document){const t=Ky(i);W.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var Rye="DismissableLayer",jB="dismissableLayer.update",Pye="dismissableLayer.pointerDownOutside",Bye="dismissableLayer.focusOutside",Gz,xK=W.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bK=W.forwardRef((i,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=i,u=W.useContext(xK),[c,h]=W.useState(null),f=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,d]=W.useState({}),p=Am(e,D=>h(D)),v=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(b),M=c?v.indexOf(c):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,R=M>=_,L=Dye(D=>{const k=D.target,G=[...u.branches].some(O=>O.contains(k));!R||G||(r==null||r(D),o==null||o(D),D.defaultPrevented||a==null||a())},f),I=Lye(D=>{const k=D.target;[...u.branches].some(O=>O.contains(k))||(s==null||s(D),o==null||o(D),D.defaultPrevented||a==null||a())},f);return Cye(D=>{M===u.layers.size-1&&(n==null||n(D),!D.defaultPrevented&&a&&(D.preventDefault(),a()))},f),W.useEffect(()=>{if(c)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Gz=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),Hz(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Gz)}},[c,f,t,u]),W.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),Hz())},[c,u]),W.useEffect(()=>{const D=()=>d({});return document.addEventListener(jB,D),()=>document.removeEventListener(jB,D)},[]),Y.jsx(Kp.div,{...l,ref:p,style:{pointerEvents:E?R?"auto":"none":void 0,...i.style},onFocusCapture:nf(i.onFocusCapture,I.onFocusCapture),onBlurCapture:nf(i.onBlurCapture,I.onBlurCapture),onPointerDownCapture:nf(i.onPointerDownCapture,L.onPointerDownCapture)})});bK.displayName=Rye;var Iye="DismissableLayerBranch",Nye=W.forwardRef((i,e)=>{const t=W.useContext(xK),n=W.useRef(null),r=Am(e,n);return W.useEffect(()=>{const s=n.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),Y.jsx(Kp.div,{...i,ref:r})});Nye.displayName=Iye;function Dye(i,e=globalThis==null?void 0:globalThis.document){const t=Ky(i),n=W.useRef(!1),r=W.useRef(()=>{});return W.useEffect(()=>{const s=a=>{if(a.target&&!n.current){let l=function(){wK(Pye,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function Lye(i,e=globalThis==null?void 0:globalThis.document){const t=Ky(i),n=W.useRef(!1);return W.useEffect(()=>{const r=s=>{s.target&&!n.current&&wK(Bye,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Hz(){const i=new CustomEvent(jB);document.dispatchEvent(i)}function wK(i,e,t,{discrete:n}){const r=t.originalEvent.target,s=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(i,e,{once:!0}),n?j1e(r,s):r.dispatchEvent(s)}var Oye=Ase.useId||(()=>{}),Fye=0;function kye(i){const[e,t]=W.useState(Oye());return $0(()=>{t(n=>n??String(Fye++))},[i]),e?`radix-${e}`:""}const Uye=["top","right","bottom","left"],Ep=Math.min,Bl=Math.max,rE=Math.round,QS=Math.floor,Cp=i=>({x:i,y:i}),zye={left:"right",right:"left",bottom:"top",top:"bottom"},Gye={start:"end",end:"start"};function $B(i,e,t){return Bl(i,Ep(e,t))}function kf(i,e){return typeof i=="function"?i(e):i}function Uf(i){return i.split("-")[0]}function Jy(i){return i.split("-")[1]}function ZL(i){return i==="x"?"y":"x"}function eO(i){return i==="y"?"height":"width"}function Rp(i){return["top","bottom"].includes(Uf(i))?"y":"x"}function tO(i){return ZL(Rp(i))}function Hye(i,e,t){t===void 0&&(t=!1);const n=Jy(i),r=tO(i),s=eO(r);let o=r==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=sE(o)),[o,sE(o)]}function qye(i){const e=sE(i);return[WB(i),e,WB(e)]}function WB(i){return i.replace(/start|end/g,e=>Gye[e])}function Vye(i,e,t){const n=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(i){case"top":case"bottom":return t?e?r:n:e?n:r;case"left":case"right":return e?s:o;default:return[]}}function jye(i,e,t,n){const r=Jy(i);let s=Vye(Uf(i),t==="start",n);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(WB)))),s}function sE(i){return i.replace(/left|right|bottom|top/g,e=>zye[e])}function $ye(i){return{top:0,right:0,bottom:0,left:0,...i}}function SK(i){return typeof i!="number"?$ye(i):{top:i,right:i,bottom:i,left:i}}function oE(i){const{x:e,y:t,width:n,height:r}=i;return{width:n,height:r,top:t,left:e,right:e+n,bottom:t+r,x:e,y:t}}function qz(i,e,t){let{reference:n,floating:r}=i;const s=Rp(e),o=tO(e),a=eO(o),l=Uf(e),u=s==="y",c=n.x+n.width/2-r.width/2,h=n.y+n.height/2-r.height/2,f=n[a]/2-r[a]/2;let d;switch(l){case"top":d={x:c,y:n.y-r.height};break;case"bottom":d={x:c,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:h};break;case"left":d={x:n.x-r.width,y:h};break;default:d={x:n.x,y:n.y}}switch(Jy(e)){case"start":d[o]-=f*(t&&u?-1:1);break;case"end":d[o]+=f*(t&&u?-1:1);break}return d}const Wye=async(i,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:i,floating:e,strategy:r}),{x:c,y:h}=qz(u,n,l),f=n,d={},p=0;for(let v=0;v<a.length;v++){const{name:b,fn:_}=a[v],{x:M,y:E,data:R,reset:L}=await _({x:c,y:h,initialPlacement:n,placement:f,strategy:r,middlewareData:d,rects:u,platform:o,elements:{reference:i,floating:e}});c=M??c,h=E??h,d={...d,[b]:{...d[b],...R}},L&&p<=50&&(p++,typeof L=="object"&&(L.placement&&(f=L.placement),L.rects&&(u=L.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:r}):L.rects),{x:c,y:h}=qz(u,f,l)),v=-1)}return{x:c,y:h,placement:f,strategy:r,middlewareData:d}};async function px(i,e){var t;e===void 0&&(e={});const{x:n,y:r,platform:s,rects:o,elements:a,strategy:l}=i,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:h="floating",altBoundary:f=!1,padding:d=0}=kf(e,i),p=SK(d),b=a[f?h==="floating"?"reference":"floating":h],_=oE(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(b)))==null||t?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),M=h==="floating"?{x:n,y:r,width:o.floating.width,height:o.floating.height}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),R=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},L=oE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:M,offsetParent:E,strategy:l}):M);return{top:(_.top-L.top+p.top)/R.y,bottom:(L.bottom-_.bottom+p.bottom)/R.y,left:(_.left-L.left+p.left)/R.x,right:(L.right-_.right+p.right)/R.x}}const Xye=i=>({name:"arrow",options:i,async fn(e){const{x:t,y:n,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=kf(i,e)||{};if(u==null)return{};const h=SK(c),f={x:t,y:n},d=tO(r),p=eO(d),v=await o.getDimensions(u),b=d==="y",_=b?"top":"left",M=b?"bottom":"right",E=b?"clientHeight":"clientWidth",R=s.reference[p]+s.reference[d]-f[d]-s.floating[p],L=f[d]-s.reference[d],I=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let D=I?I[E]:0;(!D||!await(o.isElement==null?void 0:o.isElement(I)))&&(D=a.floating[E]||s.floating[p]);const k=R/2-L/2,G=D/2-v[p]/2-1,O=Ep(h[_],G),U=Ep(h[M],G),Q=O,X=D-v[p]-U,ee=D/2-v[p]/2+k,K=$B(Q,ee,X),Z=!l.arrow&&Jy(r)!=null&&ee!==K&&s.reference[p]/2-(ee<Q?O:U)-v[p]/2<0,he=Z?ee<Q?ee-Q:ee-X:0;return{[d]:f[d]+he,data:{[d]:K,centerOffset:ee-K-he,...Z&&{alignmentOffset:he}},reset:Z}}}),Yye=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t,n;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:v=!0,...b}=kf(i,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const _=Uf(r),M=Rp(a),E=Uf(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(u.floating)),L=f||(E||!v?[sE(a)]:qye(a)),I=p!=="none";!f&&I&&L.push(...jye(a,v,p,R));const D=[a,...L],k=await px(e,b),G=[];let O=((n=s.flip)==null?void 0:n.overflows)||[];if(c&&G.push(k[_]),h){const ee=Hye(r,o,R);G.push(k[ee[0]],k[ee[1]])}if(O=[...O,{placement:r,overflows:G}],!G.every(ee=>ee<=0)){var U,Q;const ee=(((U=s.flip)==null?void 0:U.index)||0)+1,K=D[ee];if(K)return{data:{index:ee,overflows:O},reset:{placement:K}};let Z=(Q=O.filter(he=>he.overflows[0]<=0).sort((he,j)=>he.overflows[1]-j.overflows[1])[0])==null?void 0:Q.placement;if(!Z)switch(d){case"bestFit":{var X;const he=(X=O.filter(j=>{if(I){const ie=Rp(j.placement);return ie===M||ie==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(ie=>ie>0).reduce((ie,ae)=>ie+ae,0)]).sort((j,ie)=>j[1]-ie[1])[0])==null?void 0:X[0];he&&(Z=he);break}case"initialPlacement":Z=a;break}if(r!==Z)return{reset:{placement:Z}}}return{}}}};function Vz(i,e){return{top:i.top-e.height,right:i.right-e.width,bottom:i.bottom-e.height,left:i.left-e.width}}function jz(i){return Uye.some(e=>i[e]>=0)}const Qye=function(i){return i===void 0&&(i={}),{name:"hide",options:i,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...r}=kf(i,e);switch(n){case"referenceHidden":{const s=await px(e,{...r,elementContext:"reference"}),o=Vz(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:jz(o)}}}case"escaped":{const s=await px(e,{...r,altBoundary:!0}),o=Vz(s,t.floating);return{data:{escapedOffsets:o,escaped:jz(o)}}}default:return{}}}}};async function Kye(i,e){const{placement:t,platform:n,elements:r}=i,s=await(n.isRTL==null?void 0:n.isRTL(r.floating)),o=Uf(t),a=Jy(t),l=Rp(t)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,h=kf(e,i);let{mainAxis:f,crossAxis:d,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof p=="number"&&(d=a==="end"?p*-1:p),l?{x:d*c,y:f*u}:{x:f*u,y:d*c}}const Jye=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){var t,n;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await Kye(e,i);return o===((t=a.offset)==null?void 0:t.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Zye=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:n,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:_,y:M}=b;return{x:_,y:M}}},...l}=kf(i,e),u={x:t,y:n},c=await px(e,l),h=Rp(Uf(r)),f=ZL(h);let d=u[f],p=u[h];if(s){const b=f==="y"?"top":"left",_=f==="y"?"bottom":"right",M=d+c[b],E=d-c[_];d=$B(M,d,E)}if(o){const b=h==="y"?"top":"left",_=h==="y"?"bottom":"right",M=p+c[b],E=p-c[_];p=$B(M,p,E)}const v=a.fn({...e,[f]:d,[h]:p});return{...v,data:{x:v.x-t,y:v.y-n,enabled:{[f]:s,[h]:o}}}}}},eve=function(i){return i===void 0&&(i={}),{options:i,fn(e){const{x:t,y:n,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=kf(i,e),c={x:t,y:n},h=Rp(r),f=ZL(h);let d=c[f],p=c[h];const v=kf(a,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const E=f==="y"?"height":"width",R=s.reference[f]-s.floating[E]+b.mainAxis,L=s.reference[f]+s.reference[E]-b.mainAxis;d<R?d=R:d>L&&(d=L)}if(u){var _,M;const E=f==="y"?"width":"height",R=["top","left"].includes(Uf(r)),L=s.reference[h]-s.floating[E]+(R&&((_=o.offset)==null?void 0:_[h])||0)+(R?0:b.crossAxis),I=s.reference[h]+s.reference[E]+(R?0:((M=o.offset)==null?void 0:M[h])||0)-(R?b.crossAxis:0);p<L?p=L:p>I&&(p=I)}return{[f]:d,[h]:p}}}},tve=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(e){var t,n;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=kf(i,e),c=await px(e,u),h=Uf(r),f=Jy(r),d=Rp(r)==="y",{width:p,height:v}=s.floating;let b,_;h==="top"||h==="bottom"?(b=h,_=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,b=f==="end"?"top":"bottom");const M=v-c.top-c.bottom,E=p-c.left-c.right,R=Ep(v-c[b],M),L=Ep(p-c[_],E),I=!e.middlewareData.shift;let D=R,k=L;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(k=E),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(D=M),I&&!f){const O=Bl(c.left,0),U=Bl(c.right,0),Q=Bl(c.top,0),X=Bl(c.bottom,0);d?k=p-2*(O!==0||U!==0?O+U:Bl(c.left,c.right)):D=v-2*(Q!==0||X!==0?Q+X:Bl(c.top,c.bottom))}await l({...e,availableWidth:k,availableHeight:D});const G=await o.getDimensions(a.floating);return p!==G.width||v!==G.height?{reset:{rects:!0}}:{}}}};function C4(){return typeof window<"u"}function Zy(i){return MK(i)?(i.nodeName||"").toLowerCase():"#document"}function zl(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function wh(i){var e;return(e=(MK(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function MK(i){return C4()?i instanceof Node||i instanceof zl(i).Node:!1}function bc(i){return C4()?i instanceof Element||i instanceof zl(i).Element:!1}function Ah(i){return C4()?i instanceof HTMLElement||i instanceof zl(i).HTMLElement:!1}function $z(i){return!C4()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof zl(i).ShadowRoot}function mb(i){const{overflow:e,overflowX:t,overflowY:n,display:r}=wc(i);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(r)}function nve(i){return["table","td","th"].includes(Zy(i))}function R4(i){return[":popover-open",":modal"].some(e=>{try{return i.matches(e)}catch{return!1}})}function nO(i){const e=iO(),t=bc(i)?wc(i):i;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function ive(i){let e=Pp(i);for(;Ah(e)&&!yy(e);){if(nO(e))return e;if(R4(e))return null;e=Pp(e)}return null}function iO(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function yy(i){return["html","body","#document"].includes(Zy(i))}function wc(i){return zl(i).getComputedStyle(i)}function P4(i){return bc(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function Pp(i){if(Zy(i)==="html")return i;const e=i.assignedSlot||i.parentNode||$z(i)&&i.host||wh(i);return $z(e)?e.host:e}function TK(i){const e=Pp(i);return yy(e)?i.ownerDocument?i.ownerDocument.body:i.body:Ah(e)&&mb(e)?e:TK(e)}function Ax(i,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=TK(i),s=r===((n=i.ownerDocument)==null?void 0:n.body),o=zl(r);if(s){const a=XB(o);return e.concat(o,o.visualViewport||[],mb(r)?r:[],a&&t?Ax(a):[])}return e.concat(r,Ax(r,[],t))}function XB(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function EK(i){const e=wc(i);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=Ah(i),s=r?i.offsetWidth:t,o=r?i.offsetHeight:n,a=rE(t)!==s||rE(n)!==o;return a&&(t=s,n=o),{width:t,height:n,$:a}}function rO(i){return bc(i)?i:i.contextElement}function z1(i){const e=rO(i);if(!Ah(e))return Cp(1);const t=e.getBoundingClientRect(),{width:n,height:r,$:s}=EK(e);let o=(s?rE(t.width):t.width)/n,a=(s?rE(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const rve=Cp(0);function CK(i){const e=zl(i);return!iO()||!e.visualViewport?rve:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sve(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==zl(i)?!1:e}function W0(i,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=i.getBoundingClientRect(),s=rO(i);let o=Cp(1);e&&(n?bc(n)&&(o=z1(n)):o=z1(i));const a=sve(s,t,n)?CK(s):Cp(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,c=r.width/o.x,h=r.height/o.y;if(s){const f=zl(s),d=n&&bc(n)?zl(n):n;let p=f,v=XB(p);for(;v&&n&&d!==p;){const b=z1(v),_=v.getBoundingClientRect(),M=wc(v),E=_.left+(v.clientLeft+parseFloat(M.paddingLeft))*b.x,R=_.top+(v.clientTop+parseFloat(M.paddingTop))*b.y;l*=b.x,u*=b.y,c*=b.x,h*=b.y,l+=E,u+=R,p=zl(v),v=XB(p)}}return oE({width:c,height:h,x:l,y:u})}function ove(i){let{elements:e,rect:t,offsetParent:n,strategy:r}=i;const s=r==="fixed",o=wh(n),a=e?R4(e.floating):!1;if(n===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},u=Cp(1);const c=Cp(0),h=Ah(n);if((h||!h&&!s)&&((Zy(n)!=="body"||mb(o))&&(l=P4(n)),Ah(n))){const f=W0(n);u=z1(n),c.x=f.x+n.clientLeft,c.y=f.y+n.clientTop}return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x,y:t.y*u.y-l.scrollTop*u.y+c.y}}function ave(i){return Array.from(i.getClientRects())}function YB(i,e){const t=P4(i).scrollLeft;return e?e.left+t:W0(wh(i)).left+t}function lve(i){const e=wh(i),t=P4(i),n=i.ownerDocument.body,r=Bl(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Bl(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+YB(i);const a=-t.scrollTop;return wc(n).direction==="rtl"&&(o+=Bl(e.clientWidth,n.clientWidth)-r),{width:r,height:s,x:o,y:a}}function uve(i,e){const t=zl(i),n=wh(i),r=t.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const u=iO();(!u||u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function cve(i,e){const t=W0(i,!0,e==="fixed"),n=t.top+i.clientTop,r=t.left+i.clientLeft,s=Ah(i)?z1(i):Cp(1),o=i.clientWidth*s.x,a=i.clientHeight*s.y,l=r*s.x,u=n*s.y;return{width:o,height:a,x:l,y:u}}function Wz(i,e,t){let n;if(e==="viewport")n=uve(i,t);else if(e==="document")n=lve(wh(i));else if(bc(e))n=cve(e,t);else{const r=CK(i);n={...e,x:e.x-r.x,y:e.y-r.y}}return oE(n)}function RK(i,e){const t=Pp(i);return t===e||!bc(t)||yy(t)?!1:wc(t).position==="fixed"||RK(t,e)}function hve(i,e){const t=e.get(i);if(t)return t;let n=Ax(i,[],!1).filter(a=>bc(a)&&Zy(a)!=="body"),r=null;const s=wc(i).position==="fixed";let o=s?Pp(i):i;for(;bc(o)&&!yy(o);){const a=wc(o),l=nO(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||mb(o)&&!l&&RK(i,o))?n=n.filter(c=>c!==o):r=a,o=Pp(o)}return e.set(i,n),n}function fve(i){let{element:e,boundary:t,rootBoundary:n,strategy:r}=i;const o=[...t==="clippingAncestors"?R4(e)?[]:hve(e,this._c):[].concat(t),n],a=o[0],l=o.reduce((u,c)=>{const h=Wz(e,c,r);return u.top=Bl(h.top,u.top),u.right=Ep(h.right,u.right),u.bottom=Ep(h.bottom,u.bottom),u.left=Bl(h.left,u.left),u},Wz(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function dve(i){const{width:e,height:t}=EK(i);return{width:e,height:t}}function pve(i,e,t){const n=Ah(e),r=wh(e),s=t==="fixed",o=W0(i,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Cp(0);if(n||!n&&!s)if((Zy(e)!=="body"||mb(r))&&(a=P4(e)),n){const d=W0(e,!0,s,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else r&&(l.x=YB(r));let u=0,c=0;if(r&&!n&&!s){const d=r.getBoundingClientRect();c=d.top+a.scrollTop,u=d.left+a.scrollLeft-YB(r,d)}const h=o.left+a.scrollLeft-l.x-u,f=o.top+a.scrollTop-l.y-c;return{x:h,y:f,width:o.width,height:o.height}}function T8(i){return wc(i).position==="static"}function Xz(i,e){if(!Ah(i)||wc(i).position==="fixed")return null;if(e)return e(i);let t=i.offsetParent;return wh(i)===t&&(t=t.ownerDocument.body),t}function PK(i,e){const t=zl(i);if(R4(i))return t;if(!Ah(i)){let r=Pp(i);for(;r&&!yy(r);){if(bc(r)&&!T8(r))return r;r=Pp(r)}return t}let n=Xz(i,e);for(;n&&nve(n)&&T8(n);)n=Xz(n,e);return n&&yy(n)&&T8(n)&&!nO(n)?t:n||ive(i)||t}const Ave=async function(i){const e=this.getOffsetParent||PK,t=this.getDimensions,n=await t(i.floating);return{reference:pve(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function mve(i){return wc(i).direction==="rtl"}const gve={convertOffsetParentRelativeRectToViewportRelativeRect:ove,getDocumentElement:wh,getClippingRect:fve,getOffsetParent:PK,getElementRects:Ave,getClientRects:ave,getDimensions:dve,getScale:z1,isElement:bc,isRTL:mve};function yve(i,e){let t=null,n;const r=wh(i);function s(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:h,height:f}=i.getBoundingClientRect();if(a||e(),!h||!f)return;const d=QS(c),p=QS(r.clientWidth-(u+h)),v=QS(r.clientHeight-(c+f)),b=QS(u),M={rootMargin:-d+"px "+-p+"px "+-v+"px "+-b+"px",threshold:Bl(0,Ep(1,l))||1};let E=!0;function R(L){const I=L[0].intersectionRatio;if(I!==l){if(!E)return o();I?o(!1,I):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E=!1}try{t=new IntersectionObserver(R,{...M,root:r.ownerDocument})}catch{t=new IntersectionObserver(R,M)}t.observe(i)}return o(!0),s}function vve(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=rO(i),c=r||s?[...u?Ax(u):[],...Ax(e)]:[];c.forEach(_=>{r&&_.addEventListener("scroll",t,{passive:!0}),s&&_.addEventListener("resize",t)});const h=u&&a?yve(u,t):null;let f=-1,d=null;o&&(d=new ResizeObserver(_=>{let[M]=_;M&&M.target===u&&d&&(d.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var E;(E=d)==null||E.observe(e)})),t()}),u&&!l&&d.observe(u),d.observe(e));let p,v=l?W0(i):null;l&&b();function b(){const _=W0(i);v&&(_.x!==v.x||_.y!==v.y||_.width!==v.width||_.height!==v.height)&&t(),v=_,p=requestAnimationFrame(b)}return t(),()=>{var _;c.forEach(M=>{r&&M.removeEventListener("scroll",t),s&&M.removeEventListener("resize",t)}),h==null||h(),(_=d)==null||_.disconnect(),d=null,l&&cancelAnimationFrame(p)}}const _ve=Jye,xve=Zye,bve=Yye,wve=tve,Sve=Qye,Yz=Xye,Mve=eve,Tve=(i,e,t)=>{const n=new Map,r={platform:gve,...t},s={...r.platform,_c:n};return Wye(i,e,{...r,platform:s})};var EM=typeof document<"u"?W.useLayoutEffect:W.useEffect;function aE(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,n,r;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!aE(i[n],e[n]))return!1;return!0}if(r=Object.keys(i),t=r.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,r[n]))return!1;for(n=t;n--!==0;){const s=r[n];if(!(s==="_owner"&&i.$$typeof)&&!aE(i[s],e[s]))return!1}return!0}return i!==i&&e!==e}function BK(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function Qz(i,e){const t=BK(i);return Math.round(e*t)/t}function E8(i){const e=W.useRef(i);return EM(()=>{e.current=i}),e}function Eve(i){i===void 0&&(i={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=i,[c,h]=W.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,d]=W.useState(n);aE(f,n)||d(n);const[p,v]=W.useState(null),[b,_]=W.useState(null),M=W.useCallback(j=>{j!==I.current&&(I.current=j,v(j))},[]),E=W.useCallback(j=>{j!==D.current&&(D.current=j,_(j))},[]),R=s||p,L=o||b,I=W.useRef(null),D=W.useRef(null),k=W.useRef(c),G=l!=null,O=E8(l),U=E8(r),Q=E8(u),X=W.useCallback(()=>{if(!I.current||!D.current)return;const j={placement:e,strategy:t,middleware:f};U.current&&(j.platform=U.current),Tve(I.current,D.current,j).then(ie=>{const ae={...ie,isPositioned:Q.current!==!1};ee.current&&!aE(k.current,ae)&&(k.current=ae,HC.flushSync(()=>{h(ae)}))})},[f,e,t,U,Q]);EM(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,h(j=>({...j,isPositioned:!1})))},[u]);const ee=W.useRef(!1);EM(()=>(ee.current=!0,()=>{ee.current=!1}),[]),EM(()=>{if(R&&(I.current=R),L&&(D.current=L),R&&L){if(O.current)return O.current(R,L,X);X()}},[R,L,X,O,G]);const K=W.useMemo(()=>({reference:I,floating:D,setReference:M,setFloating:E}),[M,E]),Z=W.useMemo(()=>({reference:R,floating:L}),[R,L]),he=W.useMemo(()=>{const j={position:t,left:0,top:0};if(!Z.floating)return j;const ie=Qz(Z.floating,c.x),ae=Qz(Z.floating,c.y);return a?{...j,transform:"translate("+ie+"px, "+ae+"px)",...BK(Z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ie,top:ae}},[t,a,Z.floating,c.x,c.y]);return W.useMemo(()=>({...c,update:X,refs:K,elements:Z,floatingStyles:he}),[c,X,K,Z,he])}const Cve=i=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:i,fn(t){const{element:n,padding:r}=typeof i=="function"?i(t):i;return n&&e(n)?n.current!=null?Yz({element:n.current,padding:r}).fn(t):{}:n?Yz({element:n,padding:r}).fn(t):{}}}},Rve=(i,e)=>({..._ve(i),options:[i,e]}),Pve=(i,e)=>({...xve(i),options:[i,e]}),Bve=(i,e)=>({...Mve(i),options:[i,e]}),Ive=(i,e)=>({...bve(i),options:[i,e]}),Nve=(i,e)=>({...wve(i),options:[i,e]}),Dve=(i,e)=>({...Sve(i),options:[i,e]}),Lve=(i,e)=>({...Cve(i),options:[i,e]});var Ove="Arrow",IK=W.forwardRef((i,e)=>{const{children:t,width:n=10,height:r=5,...s}=i;return Y.jsx(Kp.svg,{...s,ref:e,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:i.asChild?t:Y.jsx("polygon",{points:"0,0 30,0 15,10"})})});IK.displayName=Ove;var Fve=IK;function kve(i,e=[]){let t=[];function n(s,o){const a=W.createContext(o),l=t.length;t=[...t,o];function u(h){const{scope:f,children:d,...p}=h,v=(f==null?void 0:f[i][l])||a,b=W.useMemo(()=>p,Object.values(p));return Y.jsx(v.Provider,{value:b,children:d})}function c(h,f){const d=(f==null?void 0:f[i][l])||a,p=W.useContext(d);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const r=()=>{const s=t.map(o=>W.createContext(o));return function(a){const l=(a==null?void 0:a[i])||s;return W.useMemo(()=>({[`__scope${i}`]:{...a,[i]:l}}),[a,l])}};return r.scopeName=i,[n,Uve(r,...e)]}function Uve(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=n.reduce((a,{useScope:l,scopeName:u})=>{const h=l(s)[`__scope${u}`];return{...a,...h}},{});return W.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function zve(i){const[e,t]=W.useState(void 0);return $0(()=>{if(i){t({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=i.offsetWidth,a=i.offsetHeight;t({width:o,height:a})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else t(void 0)},[i]),e}var sO="Popper",[NK,DK]=kve(sO),[Gve,LK]=NK(sO),OK=i=>{const{__scopePopper:e,children:t}=i,[n,r]=W.useState(null);return Y.jsx(Gve,{scope:e,anchor:n,onAnchorChange:r,children:t})};OK.displayName=sO;var FK="PopperAnchor",kK=W.forwardRef((i,e)=>{const{__scopePopper:t,virtualRef:n,...r}=i,s=LK(FK,t),o=W.useRef(null),a=Am(e,o);return W.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:Y.jsx(Kp.div,{...r,ref:a})});kK.displayName=FK;var oO="PopperContent",[Hve,qve]=NK(oO),UK=W.forwardRef((i,e)=>{var it,Ct,qt,xt,yt,Qe;const{__scopePopper:t,side:n="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:d="optimized",onPlaced:p,...v}=i,b=LK(oO,t),[_,M]=W.useState(null),E=Am(e,ce=>M(ce)),[R,L]=W.useState(null),I=zve(R),D=(I==null?void 0:I.width)??0,k=(I==null?void 0:I.height)??0,G=n+(s!=="center"?"-"+s:""),O=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},U=Array.isArray(u)?u:[u],Q=U.length>0,X={padding:O,boundary:U.filter(jve),altBoundary:Q},{refs:ee,floatingStyles:K,placement:Z,isPositioned:he,middlewareData:j}=Eve({strategy:"fixed",placement:G,whileElementsMounted:(...ce)=>vve(...ce,{animationFrame:d==="always"}),elements:{reference:b.anchor},middleware:[Rve({mainAxis:r+k,alignmentAxis:o}),l&&Pve({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Bve():void 0,...X}),l&&Ive({...X}),Nve({...X,apply:({elements:ce,rects:dt,availableWidth:pt,availableHeight:ut})=>{const{width:ft,height:Wt}=dt.reference,Rt=ce.floating.style;Rt.setProperty("--radix-popper-available-width",`${pt}px`),Rt.setProperty("--radix-popper-available-height",`${ut}px`),Rt.setProperty("--radix-popper-anchor-width",`${ft}px`),Rt.setProperty("--radix-popper-anchor-height",`${Wt}px`)}}),R&&Lve({element:R,padding:a}),$ve({arrowWidth:D,arrowHeight:k}),f&&Dve({strategy:"referenceHidden",...X})]}),[ie,ae]=HK(Z),pe=Ky(p);$0(()=>{he&&(pe==null||pe())},[he,pe]);const Pe=(it=j.arrow)==null?void 0:it.x,He=(Ct=j.arrow)==null?void 0:Ct.y,Se=((qt=j.arrow)==null?void 0:qt.centerOffset)!==0,[Oe,Ye]=W.useState();return $0(()=>{_&&Ye(window.getComputedStyle(_).zIndex)},[_]),Y.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:he?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[(xt=j.transformOrigin)==null?void 0:xt.x,(yt=j.transformOrigin)==null?void 0:yt.y].join(" "),...((Qe=j.hide)==null?void 0:Qe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:i.dir,children:Y.jsx(Hve,{scope:t,placedSide:ie,onArrowChange:L,arrowX:Pe,arrowY:He,shouldHideArrow:Se,children:Y.jsx(Kp.div,{"data-side":ie,"data-align":ae,...v,ref:E,style:{...v.style,animation:he?void 0:"none"}})})})});UK.displayName=oO;var zK="PopperArrow",Vve={top:"bottom",right:"left",bottom:"top",left:"right"},GK=W.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,s=qve(zK,n),o=Vve[s.placedSide];return Y.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:Y.jsx(Fve,{...r,ref:t,style:{...r.style,display:"block"}})})});GK.displayName=zK;function jve(i){return i!==null}var $ve=i=>({name:"transformOrigin",options:i,fn(e){var b,_,M;const{placement:t,rects:n,middlewareData:r}=e,o=((b=r.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:i.arrowWidth,l=o?0:i.arrowHeight,[u,c]=HK(t),h={start:"0%",center:"50%",end:"100%"}[c],f=(((_=r.arrow)==null?void 0:_.x)??0)+a/2,d=(((M=r.arrow)==null?void 0:M.y)??0)+l/2;let p="",v="";return u==="bottom"?(p=o?h:`${f}px`,v=`${-l}px`):u==="top"?(p=o?h:`${f}px`,v=`${n.floating.height+l}px`):u==="right"?(p=`${-l}px`,v=o?h:`${d}px`):u==="left"&&(p=`${n.floating.width+l}px`,v=o?h:`${d}px`),{data:{x:p,y:v}}}});function HK(i){const[e,t="center"]=i.split("-");return[e,t]}var Wve=OK,Xve=kK,Yve=UK,Qve=GK;function Kve(i,e){return W.useReducer((t,n)=>e[t][n]??t,i)}var qK=i=>{const{present:e,children:t}=i,n=Jve(e),r=typeof t=="function"?t({present:n.isPresent}):W.Children.only(t),s=Am(n.ref,Zve(r));return typeof t=="function"||n.isPresent?W.cloneElement(r,{ref:s}):null};qK.displayName="Presence";function Jve(i){const[e,t]=W.useState(),n=W.useRef({}),r=W.useRef(i),s=W.useRef("none"),o=i?"mounted":"unmounted",[a,l]=Kve(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return W.useEffect(()=>{const u=KS(n.current);s.current=a==="mounted"?u:"none"},[a]),$0(()=>{const u=n.current,c=r.current;if(c!==i){const f=s.current,d=KS(u);i?l("MOUNT"):d==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&f!==d?"ANIMATION_OUT":"UNMOUNT"),r.current=i}},[i,l]),$0(()=>{if(e){let u;const c=e.ownerDocument.defaultView??window,h=d=>{const v=KS(n.current).includes(d.animationName);if(d.target===e&&v&&(l("ANIMATION_END"),!r.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=d=>{d.target===e&&(s.current=KS(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{c.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:W.useCallback(u=>{u&&(n.current=getComputedStyle(u)),t(u)},[])}}function KS(i){return(i==null?void 0:i.animationName)||"none"}function Zve(i){var n,r;let e=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=(r=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}function e2e({prop:i,defaultProp:e,onChange:t=()=>{}}){const[n,r]=t2e({defaultProp:e,onChange:t}),s=i!==void 0,o=s?i:n,a=Ky(t),l=W.useCallback(u=>{if(s){const h=typeof u=="function"?u(i):u;h!==i&&a(h)}else r(u)},[s,i,r,a]);return[o,l]}function t2e({defaultProp:i,onChange:e}){const t=W.useState(i),[n]=t,r=W.useRef(n),s=Ky(e);return W.useEffect(()=>{r.current!==n&&(s(n),r.current=n)},[n,r,s]),t}var n2e="VisuallyHidden",VK=W.forwardRef((i,e)=>Y.jsx(Kp.span,{...i,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...i.style}}));VK.displayName=n2e;var i2e=VK,[B4,EGe]=Tye("Tooltip",[DK]),I4=DK(),r2e="TooltipProvider",QB="tooltip.open",[CGe,aO]=B4(r2e),N4="Tooltip",[s2e,D4]=B4(N4),jK=i=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:r=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=i,l=aO(N4,i.__scopeTooltip),u=I4(e),[c,h]=W.useState(null),f=kye(),d=W.useRef(0),p=o??l.disableHoverableContent,v=a??l.delayDuration,b=W.useRef(!1),[_=!1,M]=e2e({prop:n,defaultProp:r,onChange:D=>{D?(l.onOpen(),document.dispatchEvent(new CustomEvent(QB))):l.onClose(),s==null||s(D)}}),E=W.useMemo(()=>_?b.current?"delayed-open":"instant-open":"closed",[_]),R=W.useCallback(()=>{window.clearTimeout(d.current),b.current=!1,M(!0)},[M]),L=W.useCallback(()=>{window.clearTimeout(d.current),M(!1)},[M]),I=W.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{b.current=!0,M(!0)},v)},[v,M]);return W.useEffect(()=>()=>window.clearTimeout(d.current),[]),Y.jsx(Wve,{...u,children:Y.jsx(s2e,{scope:e,contentId:f,open:_,stateAttribute:E,trigger:c,onTriggerChange:h,onTriggerEnter:W.useCallback(()=>{l.isOpenDelayed?I():R()},[l.isOpenDelayed,I,R]),onTriggerLeave:W.useCallback(()=>{p?L():window.clearTimeout(d.current)},[L,p]),onOpen:R,onClose:L,disableHoverableContent:p,children:t})})};jK.displayName=N4;var KB="TooltipTrigger",$K=W.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,r=D4(KB,t),s=aO(KB,t),o=I4(t),a=W.useRef(null),l=Am(e,a,r.onTriggerChange),u=W.useRef(!1),c=W.useRef(!1),h=W.useCallback(()=>u.current=!1,[]);return W.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),Y.jsx(Xve,{asChild:!0,...o,children:Y.jsx(Kp.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...n,ref:l,onPointerMove:nf(i.onPointerMove,f=>{f.pointerType!=="touch"&&!c.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),c.current=!0)}),onPointerLeave:nf(i.onPointerLeave,()=>{r.onTriggerLeave(),c.current=!1}),onPointerDown:nf(i.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:nf(i.onFocus,()=>{u.current||r.onOpen()}),onBlur:nf(i.onBlur,r.onClose),onClick:nf(i.onClick,r.onClose)})})});$K.displayName=KB;var o2e="TooltipPortal",[RGe,a2e]=B4(o2e,{forceMount:void 0}),vy="TooltipContent",WK=W.forwardRef((i,e)=>{const t=a2e(vy,i.__scopeTooltip),{forceMount:n=t.forceMount,side:r="top",...s}=i,o=D4(vy,i.__scopeTooltip);return Y.jsx(qK,{present:n||o.open,children:o.disableHoverableContent?Y.jsx(XK,{side:r,...s,ref:e}):Y.jsx(l2e,{side:r,...s,ref:e})})}),l2e=W.forwardRef((i,e)=>{const t=D4(vy,i.__scopeTooltip),n=aO(vy,i.__scopeTooltip),r=W.useRef(null),s=Am(e,r),[o,a]=W.useState(null),{trigger:l,onClose:u}=t,c=r.current,{onPointerInTransitChange:h}=n,f=W.useCallback(()=>{a(null),h(!1)},[h]),d=W.useCallback((p,v)=>{const b=p.currentTarget,_={x:p.clientX,y:p.clientY},M=h2e(_,b.getBoundingClientRect()),E=f2e(_,M),R=d2e(v.getBoundingClientRect()),L=A2e([...E,...R]);a(L),h(!0)},[h]);return W.useEffect(()=>()=>f(),[f]),W.useEffect(()=>{if(l&&c){const p=b=>d(b,c),v=b=>d(b,l);return l.addEventListener("pointerleave",p),c.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",p),c.removeEventListener("pointerleave",v)}}},[l,c,d,f]),W.useEffect(()=>{if(o){const p=v=>{const b=v.target,_={x:v.clientX,y:v.clientY},M=(l==null?void 0:l.contains(b))||(c==null?void 0:c.contains(b)),E=!p2e(_,o);M?f():E&&(f(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,c,o,u,f]),Y.jsx(XK,{...i,ref:s})}),[u2e,c2e]=B4(N4,{isInside:!1}),XK=W.forwardRef((i,e)=>{const{__scopeTooltip:t,children:n,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=i,l=D4(vy,t),u=I4(t),{onClose:c}=l;return W.useEffect(()=>(document.addEventListener(QB,c),()=>document.removeEventListener(QB,c)),[c]),W.useEffect(()=>{if(l.trigger){const h=f=>{const d=f.target;d!=null&&d.contains(l.trigger)&&c()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,c]),Y.jsx(bK,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:c,children:Y.jsxs(Yve,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Y.jsx(pK,{children:n}),Y.jsx(u2e,{scope:t,isInside:!0,children:Y.jsx(i2e,{id:l.contentId,role:"tooltip",children:r||n})})]})})});WK.displayName=vy;var YK="TooltipArrow",QK=W.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,r=I4(t);return c2e(YK,t).isInside?null:Y.jsx(Qve,{...r,...n,ref:e})});QK.displayName=YK;function h2e(i,e){const t=Math.abs(e.top-i.y),n=Math.abs(e.bottom-i.y),r=Math.abs(e.right-i.x),s=Math.abs(e.left-i.x);switch(Math.min(t,n,r,s)){case s:return"left";case r:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function f2e(i,e,t=5){const n=[];switch(e){case"top":n.push({x:i.x-t,y:i.y+t},{x:i.x+t,y:i.y+t});break;case"bottom":n.push({x:i.x-t,y:i.y-t},{x:i.x+t,y:i.y-t});break;case"left":n.push({x:i.x+t,y:i.y-t},{x:i.x+t,y:i.y+t});break;case"right":n.push({x:i.x-t,y:i.y-t},{x:i.x-t,y:i.y+t});break}return n}function d2e(i){const{top:e,right:t,bottom:n,left:r}=i;return[{x:r,y:e},{x:t,y:e},{x:t,y:n},{x:r,y:n}]}function p2e(i,e){const{x:t,y:n}=i;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,c=e[o].y;l>n!=c>n&&t<(u-a)*(n-l)/(c-l)+a&&(r=!r)}return r}function A2e(i){const e=i.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),m2e(e)}function m2e(i){if(i.length<=1)return i.slice();const e=[];for(let n=0;n<i.length;n++){const r=i[n];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let n=i.length-1;n>=0;n--){const r=i[n];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var g2e=jK,y2e=$K,v2e=WK,_2e=QK;function x2e(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function Hi(i,e){if(i==null)return{};var t=x2e(i,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}let vr;(function(i){i[i.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",i[i.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",i[i.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",i[i.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",i[i.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",i[i.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",i[i.THEME_ERROR=6]="THEME_ERROR",i[i.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",i[i.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",i[i.EMPTY_KEY=9]="EMPTY_KEY"})(vr||(vr={}));const b2e={[vr.UNSUPPORTED_INPUT]:(i,e)=>[`An input with type \`${i}\` input was found at path \`${e}\` but it's not supported yet.`],[vr.NO_COMPONENT_FOR_TYPE]:(i,e)=>[`Type \`${i}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[vr.UNKNOWN_INPUT]:(i,e)=>[`input at path \`${i}\` is not recognized.`,e],[vr.DUPLICATE_KEYS]:(i,e,t)=>[`Key \`${i}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[vr.ALREADY_REGISTERED_TYPE]:i=>[`Type ${i} has already been registered. You can't register a component with the same type.`],[vr.CLIPBOARD_ERROR]:i=>["Error copying the value",i],[vr.THEME_ERROR]:(i,e)=>[`Error accessing the theme \`${i}.${e}\` value.`],[vr.PATH_DOESNT_EXIST]:i=>[`Error getting the value at path \`${i}\`. There is probably an error in your \`render\` function.`],[vr.PATH_DOESNT_EXIST]:i=>[`Error accessing the value at path \`${i}\``],[vr.INPUT_TYPE_OVERRIDE]:(i,e,t)=>[`Input at path \`${i}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[vr.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function KK(i,e,...t){const[n,...r]=b2e[e](...t);console[i]("LEVA: "+n,...r)}const hf=KK.bind(null,"warn"),w2e=KK.bind(null,"log"),S2e=["value"],M2e=["schema"],T2e=["value"],JK=[],X0={};function Kz(i){let{value:e}=i,t=Hi(i,S2e);for(let n of JK){const r=n(e,t);if(r)return r}}function Kf(i,e){let{schema:t}=e,n=Hi(e,M2e);if(i in X0){hf(vr.ALREADY_REGISTERED_TYPE,i);return}JK.push((r,s)=>t(r,s)&&i),X0[i]=n}function C8(i,e,t,n){const{normalize:r}=X0[i];if(r)return r(e,t,n);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=Hi(e,T2e);return{value:s,settings:o}}function E2e(i,e,t,n,r,s){const{sanitize:o}=X0[i];return o?o(e,t,n,r,s):e}function Jz(i,e,t){const{format:n}=X0[i];return n?n(e,t):e}function C2e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Zz(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Fn(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zz(Object(t),!0).forEach(function(n){C2e(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Zz(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const Bp=(i,e,t)=>i>t?t:i<e?e:i,R2e=i=>{if(i===""||typeof i=="number")return i;try{const e=jd(i);if(!isNaN(e))return e}catch{}return parseFloat(i)},P2e=Math.log(10);function eG(i){let e=Math.abs(+String(i).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/P2e)+1,n=Math.floor(Math.log10(Math.abs(i))),r=Math.pow(10,n-t);return Math.max(r,.001)}const lE=(i,e,t)=>t===e?0:(Bp(i,e,t)-e)/(t-e),uE=(i,e,t)=>i*(t-e)+e,B2e=()=>"_"+Math.random().toString(36).substr(2,9),tG=/\(([0-9+\-*/^ .]+)\)/,nG=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,iG=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,rG=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,sG=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,oG=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function jd(i){if(isNaN(Number(i)))if(tG.test(i)){const e=i.replace(tG,(t,n)=>String(jd(n)));return jd(e)}else if(nG.test(i)){const e=i.replace(nG,(t,n,r)=>String(Math.pow(Number(n),Number(r))));return jd(e)}else if(iG.test(i)){const e=i.replace(iG,(t,n,r)=>String(Number(n)*Number(r)));return jd(e)}else if(rG.test(i)){const e=i.replace(rG,(t,n,r)=>{if(r!=0)return String(Number(n)/Number(r));throw new Error("Division by zero")});return jd(e)}else if(sG.test(i)){const e=i.replace(sG,(t,n,r)=>String(Number(n)+Number(r)));return jd(e)}else if(oG.test(i)){const e=i.replace(oG,(t,n,r)=>String(Number(n)-Number(r)));return jd(e)}else return Number(i);return Number(i)}function I2e(i,e){const t=Fn({},i);return e.forEach(n=>n in i&&delete t[n]),t}function N2e(i,e){return i.reduce((t,n,r)=>Object.assign(t,{[e[r]]:n}),{})}function ZK(i){return Object.prototype.toString.call(i)==="[object Object]"}const D2e=i=>ZK(i)&&Object.keys(i).length===0;let oh;(function(i){i.BUTTON="BUTTON",i.BUTTON_GROUP="BUTTON_GROUP",i.MONITOR="MONITOR",i.FOLDER="FOLDER"})(oh||(oh={}));let Sc;(function(i){i.SELECT="SELECT",i.IMAGE="IMAGE",i.NUMBER="NUMBER",i.COLOR="COLOR",i.STRING="STRING",i.BOOLEAN="BOOLEAN",i.INTERVAL="INTERVAL",i.VECTOR3D="VECTOR3D",i.VECTOR2D="VECTOR2D"})(Sc||(Sc={}));const L2e=["type","__customInput"],O2e=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],F2e=["type"];function eJ(i,e,t={},n){var r,s;if(typeof i!="object"||Array.isArray(i))return{type:n,input:i,options:Fn({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in i){const{type:L,__customInput:I}=i,D=Hi(i,L2e);return eJ(I,e,D,L)}const{render:o,label:a,optional:l,order:u=0,disabled:c,hint:h,onChange:f,onEditStart:d,onEditEnd:p,transient:v}=i,b=Hi(i,O2e),_=Fn({render:o,key:e,label:a??e,hint:h,transient:v??!!f,onEditStart:d,onEditEnd:p,disabled:c,optional:l,order:u},t);let{type:M}=b,E=Hi(b,F2e);if(M=n??M,M in oh)return{type:M,input:E,options:_};let R;return n&&ZK(E)&&"value"in E?R=E.value:R=D2e(E)?void 0:E,{type:M,input:R,options:Fn(Fn({},_),{},{onChange:f,optional:(r=_.optional)!==null&&r!==void 0?r:!1,disabled:(s=_.disabled)!==null&&s!==void 0?s:!1})}}function k2e(i,e,t,n){const r=eJ(i,e),{type:s,input:o,options:a}=r;if(s)return s in oh?r:{type:s,input:C8(s,o,t,n),options:a};let l=Kz(o);return l?{type:l,input:C8(l,o,t,n),options:a}:(l=Kz({value:o}),l?{type:l,input:C8(l,{value:o},t,n),options:a}:!1)}function aG(i,e,t,n,r){const{value:s,type:o,settings:a}=i;i.value=tJ({type:o,value:s,settings:a},e,t,n),i.fromPanel=r}const U2e=function(e,t,n){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=n};function tJ({type:i,value:e,settings:t},n,r,s){const o=i!=="SELECT"&&typeof n=="function"?n(e):n;let a;try{a=E2e(i,o,t,e,r,s)}catch(l){throw new U2e(`The value \`${n}\` did not result in a correct value.`,e,l)}return fx(a,e)?e:a}const nJ=(i,e,t=!1)=>{let n=0;return function(){const r=arguments,s=t&&!n,o=()=>i.apply(this,r);window.clearTimeout(n),n=window.setTimeout(o,e),s&&o()}},iJ=i=>i.shiftKey?5:i.altKey?1/5:1,z2e=["value"],G2e=["min","max"],H2e=i=>{if(typeof i=="number")return!0;if(typeof i=="string"){const e=parseFloat(i);return isNaN(e)?!1:i.substring((""+e).length).trim().length<4}return!1},rJ=(i,{min:e=-1/0,max:t=1/0,suffix:n})=>{const r=parseFloat(i);if(i===""||isNaN(r))throw Error("Invalid number");const s=Bp(r,e,t);return n?s+n:s},q2e=(i,{pad:e=0,suffix:t})=>{const n=parseFloat(i).toFixed(e);return t?n+t:n},sJ=i=>{let{value:e}=i,t=Hi(i,z2e);const{min:n=-1/0,max:r=1/0}=t,s=Hi(t,G2e);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=Bp(o,n,r);let l=t.step;l||(Number.isFinite(n)?Number.isFinite(r)?l=+(Math.abs(r-n)/100).toPrecision(1):l=+(Math.abs(o-n)/100).toPrecision(1):Number.isFinite(r)&&(l=+(Math.abs(r-o)/100).toPrecision(1)));const u=l?eG(l)*10:eG(o);l=l||u/10;const c=Math.round(Bp(Math.log10(1/u),0,2));return{value:a?o+a:o,settings:Fn({initialValue:o,step:l,pad:c,min:n,max:r,suffix:a},s)}},oJ=(i,{step:e,initialValue:t})=>{const n=Math.round((i-t)/e);return t+n*e};var aJ=Object.freeze({__proto__:null,schema:H2e,sanitize:rJ,format:q2e,normalize:sJ,sanitizeStep:oJ});function qr(){return qr=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},qr.apply(this,arguments)}const lJ=W.createContext({});function $o(){return W.useContext(lJ)}const lO=W.createContext(null),uJ=W.createContext(null),cJ=W.createContext(null);function gb(){return W.useContext(uJ)}function V2e(){return W.useContext(cJ)}const hJ=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function JS(i,e){const[t,n]=i.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),n&&(r.backgroundColor=n),r}const d2={$inputStyle:()=>i=>JS(i,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>i=>JS(i,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>i=>JS(i,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>i=>JS(i,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:An,css:PGe,createTheme:j2e,globalCss:$2e,keyframes:BGe}=Mye({prefix:"leva",theme:hJ(),utils:Fn(Fn({},d2),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:i=>({"&:focus":d2.$focusStyle()(i)}),$focusWithin:i=>({"&:focus-within":d2.$focusStyle()(i)}),$hover:i=>({"&:hover":d2.$hoverStyle()(i)}),$active:i=>({"&:active":d2.$activeStyle()(i)})})}),W2e=$2e({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function X2e(i){const e=hJ();if(!i)return{theme:e,className:""};Object.keys(i).forEach(n=>{Object.assign(e[n],i[n])});const t=j2e(e);return{theme:e,className:t.className}}function wf(i,e){const{theme:t}=W.useContext(lO);if(!(i in t)||!(e in t[i]))return hf(vr.THEME_ERROR,i,e),"";let n=e;for(;;){let r=t[i][n];if(typeof r=="string"&&r.charAt(0)==="$")n=r.substr(1);else return r}}const fJ=An("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),dJ=An("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${fJ}`]:{paddingLeft:0}}),Y2e=An(dJ,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),Q2e=An("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),K2e=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],J2e=["onUpdate"];function uO(i){let{innerLabel:e,value:t,onUpdate:n,onChange:r,onKeyDown:s,type:o,id:a,inputType:l="text",rows:u=0}=i,c=Hi(i,K2e);const{id:h,emitOnEditStart:f,emitOnEditEnd:d,disabled:p}=$o(),v=a||h,b=W.useRef(null),_=u>0,M=_?"textarea":"input",E=W.useCallback(I=>D=>{const k=D.currentTarget.value;I(k)},[]);ge.useEffect(()=>{const I=b.current,D=E(k=>{n(k),d()});return I==null||I.addEventListener("blur",D),()=>I==null?void 0:I.removeEventListener("blur",D)},[E,n,d]);const R=W.useCallback(I=>{I.key==="Enter"&&E(n)(I)},[E,n]),L=Object.assign({as:M},_?{rows:u}:{},c);return ge.createElement(Q2e,{textArea:_},e&&typeof e=="string"?ge.createElement(dJ,null,e):e,ge.createElement(fJ,qr({levaType:o,ref:b,id:v,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:E(r),onFocus:()=>f(),onKeyPress:R,onKeyDown:s,disabled:p},L)))}function Z2e(i){let{onUpdate:e}=i,t=Hi(i,J2e);const n=W.useCallback(s=>e(R2e(s)),[e]),r=W.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return ge.createElement(uO,qr({},t,{onUpdate:n,onKeyDown:r,type:"number"}))}const cE=An("div",{}),JB=An("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),e_e=An("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${JB}::after`]:{opacity:.6},[`${cE}:hover > & + ${JB}::after`]:{opacity:.6},[`${cE}:hover > & > svg`]:{opacity:1}}),pJ=An("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${cE}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),AJ=An("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${pJ} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),mJ=An(AJ,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),t_e=An("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),n_e=An("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),ZB=An("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),i_e=An("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${ZB}`]:{pointerEvents:"auto"}}}}}),gJ=An("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),r_e=An("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),s_e=An(_2e,{fill:"$toolTipBackground"});function cO({children:i}){const{className:e}=W.useContext(lO);return ge.createElement(W1e,{className:e},i)}const o_e=["align"];function a_e(){const{id:i,disable:e,disabled:t}=$o();return ge.createElement(ge.Fragment,null,ge.createElement(n_e,{id:i+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),ge.createElement("label",{htmlFor:i+"__disable"}))}function l_e(i){const{id:e,optional:t,hint:n}=$o(),r=i.htmlFor||(e?{htmlFor:e}:null),s=!n&&typeof i.children=="string"?{title:i.children}:null;return ge.createElement(ge.Fragment,null,t&&ge.createElement(a_e,null),n!==void 0?ge.createElement(g2e,null,ge.createElement(y2e,{asChild:!0},ge.createElement(ZB,qr({},r,i))),ge.createElement(v2e,{side:"top",sideOffset:2},ge.createElement(r_e,null,n,ge.createElement(s_e,null)))):ge.createElement(ZB,qr({},r,s,i)))}function Rc(i){let{align:e}=i,t=Hi(i,o_e);const{value:n,label:r,key:s,disabled:o}=$o(),{hideCopyButton:a}=V2e(),l=!a&&s!==void 0,[u,c]=W.useState(!1),h=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:n??""})),c(!0)}catch{hf(vr.CLIPBOARD_ERROR,{[s]:n})}};return ge.createElement(t_e,{align:e,onPointerLeave:()=>c(!1)},ge.createElement(l_e,t),l&&!o&&ge.createElement("div",{title:`Click to copy ${typeof r=="string"?r:s} value`},u?ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ge.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),ge.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):ge.createElement("svg",{onClick:h,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ge.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),ge.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const u_e=["toggled"],c_e=An("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function hO(i){let{toggled:e}=i,t=Hi(i,u_e);return ge.createElement(c_e,qr({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),ge.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const h_e=["input"];function Uu(i){let{input:e}=i,t=Hi(i,h_e);return e?ge.createElement(mJ,t):ge.createElement(AJ,t)}function yJ({value:i,type:e,settings:t,setValue:n}){const[r,s]=W.useState(Jz(e,i,t)),o=W.useRef(i),a=W.useRef(t);a.current=t;const l=W.useCallback(c=>s(Jz(e,c,a.current)),[e]),u=W.useCallback(c=>{try{n(c)}catch(h){const{type:f,previousValue:d}=h;if(f!=="LEVA_ERROR")throw h;l(d)}},[l,n]);return W.useEffect(()=>{fx(i,o.current)||l(i),o.current=i},[i,l]),{displayValue:r,onChange:s,onUpdate:u}}function yb(i,e){const{emitOnEditStart:t,emitOnEditEnd:n}=$o();return Eme(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=i(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),n==null||n()),s},e)}function f_e(i){const e=W.useRef(null),t=W.useRef(null),n=W.useRef(!1);return W.useEffect(()=>{const r=nJ(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,i(e.current,t.current)},250);return window.addEventListener("resize",r),n.current||(r(),n.current=!0),()=>window.removeEventListener("resize",r)},[i]),W.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function vJ(){const i=W.useRef(null),e=W.useRef({x:0,y:0}),t=W.useCallback(n=>{Object.assign(e.current,n),i.current&&(i.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[i,t]}const d_e=["__refCount"],R8=(i,e)=>{if(!i[e])return null;const t=i[e];return Hi(t,d_e)};function p_e(i){const e=gb(),[t,n]=W.useState(R8(e.getData(),i)),r=W.useCallback(u=>e.setValueAtPath(i,u,!0),[i,e]),s=W.useCallback(u=>e.setSettingsAtPath(i,u),[i,e]),o=W.useCallback(u=>e.disableInputAtPath(i,u),[i,e]),a=W.useCallback(()=>e.emitOnEditStart(i),[i,e]),l=W.useCallback(()=>e.emitOnEditEnd(i),[i,e]);return W.useEffect(()=>{n(R8(e.getData(),i));const u=e.useStore.subscribe(c=>R8(c.data,i),n,{equalityFn:nK});return()=>u()},[e,i]),[t,{set:r,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const A_e=An("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),_J=An("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),eI=An("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),xJ=An("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),bJ=An("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function m_e({value:i,min:e,max:t,onDrag:n,step:r,initialValue:s}){const o=W.useRef(null),a=W.useRef(null),l=W.useRef(0),u=wf("sizes","scrubberWidth"),c=yb(({event:f,first:d,xy:[p],movement:[v],memo:b})=>{if(d){const{width:M,left:E}=o.current.getBoundingClientRect();l.current=M-parseFloat(u),b=(f==null?void 0:f.target)===a.current?i:uE((p-E)/M,e,t)}const _=b+uE(v/l.current,0,t-e);return n(oJ(_,{step:r,initialValue:s})),b}),h=lE(i,e,t);return ge.createElement(xJ,qr({ref:o},c()),ge.createElement(_J,null,ge.createElement(bJ,{style:{left:0,right:`${(1-h)*100}%`}})),ge.createElement(eI,{ref:a,style:{left:`calc(${h} * (100% - ${u}))`}}))}const g_e=ge.memo(({label:i,onUpdate:e,step:t,innerLabelTrim:n})=>{const[r,s]=W.useState(!1),o=yb(({active:a,delta:[l],event:u,memo:c=0})=>(s(a),c+=l/2,Math.abs(c)>=1&&(e(h=>parseFloat(h)+Math.floor(c)*t*iJ(u)),c=0),c));return ge.createElement(Y2e,qr({dragging:r,title:i.length>1?i:""},o()),i.slice(0,n))});function wJ({label:i,id:e,displayValue:t,onUpdate:n,onChange:r,settings:s,innerLabelTrim:o=1}){const a=o>0&&ge.createElement(g_e,{label:i,step:s.step,onUpdate:n,innerLabelTrim:o});return ge.createElement(Z2e,{id:e,value:String(t),onUpdate:n,onChange:r,innerLabel:a})}function y_e(){const i=$o(),{label:e,value:t,onUpdate:n,settings:r,id:s}=i,{min:o,max:a}=r,l=a!==1/0&&o!==-1/0;return ge.createElement(Uu,{input:!0},ge.createElement(Rc,null,e),ge.createElement(A_e,{hasRange:l},l&&ge.createElement(m_e,qr({value:parseFloat(t),onDrag:n},r)),ge.createElement(wJ,qr({},i,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:v_e}=aJ,__e=Hi(aJ,["sanitizeStep"]);var x_e=Fn({component:y_e},__e);const b_e=(i,e)=>Va().schema({options:Va().passesAnyOf(Va().object(),Va().array())}).test(e),w_e=(i,{values:e})=>{if(e.indexOf(i)<0)throw Error("Selected value doesn't match Select options");return i},S_e=(i,{values:e})=>e.indexOf(i),M_e=i=>{let{value:e,options:t}=i,n,r;return Array.isArray(t)?(r=t,n=t.map(s=>String(s))):(r=Object.values(t),n=Object.keys(t)),"value"in i?r.includes(e)||(n.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:n,values:r}}};var T_e=Object.freeze({__proto__:null,schema:b_e,sanitize:w_e,format:S_e,normalize:M_e});const E_e=An("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),tI=An("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),C_e=An("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${tI}:focus + &`]:{$focusStyle:""},[`${tI}:hover + &`]:{$hoverStyle:""}});function R_e({displayValue:i,value:e,onUpdate:t,id:n,settings:r,disabled:s}){const{keys:o,values:a}=r,l=W.useRef();return e===a[i]&&(l.current=o[i]),ge.createElement(E_e,null,ge.createElement(tI,{id:n,value:i,onChange:u=>t(a[Number(u.currentTarget.value)]),disabled:s},o.map((u,c)=>ge.createElement("option",{key:u,value:c},u))),ge.createElement(C_e,null,l.current),ge.createElement(hO,{toggled:!0}))}function P_e(){const{label:i,value:e,displayValue:t,onUpdate:n,id:r,disabled:s,settings:o}=$o();return ge.createElement(Uu,{input:!0},ge.createElement(Rc,null,i),ge.createElement(R_e,{id:r,value:e,displayValue:t,onUpdate:n,settings:o,disabled:s}))}var B_e=Fn({component:P_e},T_e);const I_e=i=>Va().string().test(i),N_e=i=>{if(typeof i!="string")throw Error("Invalid string");return i},D_e=({value:i,editable:e=!0,rows:t=!1})=>({value:i,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var L_e=Object.freeze({__proto__:null,schema:I_e,sanitize:N_e,normalize:D_e});const O_e=["displayValue","onUpdate","onChange","editable"],F_e=An("div",{whiteSpace:"pre-wrap"});function k_e(i){let{displayValue:e,onUpdate:t,onChange:n,editable:r=!0}=i,s=Hi(i,O_e);return r?ge.createElement(uO,qr({value:e,onUpdate:t,onChange:n},s)):ge.createElement(F_e,null,e)}function U_e(){const{label:i,settings:e,displayValue:t,onUpdate:n,onChange:r}=$o();return ge.createElement(Uu,{input:!0},ge.createElement(Rc,null,i),ge.createElement(k_e,qr({displayValue:t,onUpdate:n,onChange:r},e)))}var z_e=Fn({component:U_e},L_e);const G_e=i=>Va().boolean().test(i),H_e=i=>{if(typeof i!="boolean")throw Error("Invalid boolean");return i};var q_e=Object.freeze({__proto__:null,schema:G_e,sanitize:H_e});const V_e=An("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function j_e({value:i,onUpdate:e,id:t,disabled:n}){return ge.createElement(V_e,null,ge.createElement("input",{id:t,type:"checkbox",checked:i,onChange:r=>e(r.currentTarget.checked),disabled:n}),ge.createElement("label",{htmlFor:t},ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ge.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function $_e(){const{label:i,value:e,onUpdate:t,disabled:n,id:r}=$o();return ge.createElement(Uu,{input:!0},ge.createElement(Rc,null,i),ge.createElement(j_e,{value:e,onUpdate:t,id:r,disabled:n}))}var W_e=Fn({component:$_e},q_e);const X_e=["locked"];function Y_e({value:i,id:e,valueKey:t,settings:n,onUpdate:r,innerLabelTrim:s}){const o=W.useRef(i[t]);o.current=i[t];const a=W.useCallback(u=>r({[t]:tJ({type:"NUMBER",value:o.current,settings:n},u)}),[r,n,t]),l=yJ({type:"NUMBER",value:i[t],settings:n,setValue:a});return ge.createElement(wJ,{id:e,label:t,value:i[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:n,innerLabelTrim:s})}const Q_e=An("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function K_e(i){let{locked:e}=i,t=Hi(i,X_e);return ge.createElement("svg",qr({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?ge.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):ge.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function fO({value:i,onUpdate:e,settings:t,innerLabelTrim:n}){const{id:r,setSettings:s}=$o(),{lock:o,locked:a}=t;return ge.createElement(Q_e,{withLock:o},o&&ge.createElement(K_e,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(i).map((l,u)=>ge.createElement(Y_e,{id:u===0?r:`${r}.${l}`,key:l,valueKey:l,value:i,settings:t[l],onUpdate:e,innerLabelTrim:n})))}const SJ=(i,e)=>{const t={};let n=0,r=1/0;Object.entries(i).forEach(([s,o])=>{t[s]=sJ(Fn({value:o},e[s])).settings,n=Math.max(n,t[s].step),r=Math.min(r,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=n,t[s].pad=r)}return t},J_e=["lock"],Z_e=["value"];function exe(i){const e=Va().array().length(i).every.number(),t=n=>{if(!n||typeof n!="object")return!1;const r=Object.values(n);return r.length===i&&r.every(s=>isFinite(s))};return n=>e.test(n)||t(n)}function txe(i){return Array.isArray(i)?"array":"object"}function __(i,e,t){return txe(i)===e?i:e==="array"?Object.values(i):N2e(i,t)}const nxe=(i,e,t)=>{const n=__(i,"object",e.keys);for(let o in n)n[o]=rJ(n[o],e[o]);const r=Object.keys(n);let s={};if(r.length===e.keys.length)s=n;else{const o=__(t,"object",e.keys);if(r.length===1&&e.locked){const a=r[0],l=n[a],u=o[a],c=u!==0?l/u:1;for(let h in o)h===a?s[a]=l:s[h]=o[h]*c}else s=Fn(Fn({},o),n)}return __(s,e.format,e.keys)},ixe=(i,e)=>__(i,"object",e.keys),rxe=i=>!!i&&("step"in i||"min"in i||"max"in i);function sxe(i,e,t=[]){const{lock:n=!1}=e,r=Hi(e,J_e),s=Array.isArray(i)?"array":"object",o=s==="object"?Object.keys(i):t,a=__(i,"object",o),l=rxe(r)?o.reduce((c,h)=>Object.assign(c,{[h]:r}),{}):r,u=SJ(a,l);return{value:s==="array"?i:a,settings:Fn(Fn({},u),{},{format:s,keys:o,lock:n,locked:!1})}}function MJ(i){return{schema:exe(i.length),normalize:e=>{let{value:t}=e,n=Hi(e,Z_e);return sxe(t,n,i)},format:(e,t)=>ixe(e,t),sanitize:(e,t,n)=>nxe(e,t,n)}}var oxe={grad:.9,turn:360,rad:360/(2*Math.PI)},qh=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},Gs=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},Tu=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},TJ=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},lG=function(i){return{r:Tu(i.r,0,255),g:Tu(i.g,0,255),b:Tu(i.b,0,255),a:Tu(i.a)}},P8=function(i){return{r:Gs(i.r),g:Gs(i.g),b:Gs(i.b),a:Gs(i.a,3)}},axe=/^#([0-9a-f]{3,8})$/i,ZS=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},EJ=function(i){var e=i.r,t=i.g,n=i.b,r=i.a,s=Math.max(e,t,n),o=s-Math.min(e,t,n),a=o?s===e?(t-n)/o:s===t?2+(n-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:r}},CJ=function(i){var e=i.h,t=i.s,n=i.v,r=i.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),o=n*(1-t),a=n*(1-(e-s)*t),l=n*(1-(1-e+s)*t),u=s%6;return{r:255*[n,a,o,o,l,n][u],g:255*[l,n,n,a,o,o][u],b:255*[o,o,l,n,n,a][u],a:r}},uG=function(i){return{h:TJ(i.h),s:Tu(i.s,0,100),l:Tu(i.l,0,100),a:Tu(i.a)}},cG=function(i){return{h:Gs(i.h),s:Gs(i.s),l:Gs(i.l),a:Gs(i.a,3)}},hG=function(i){return CJ((t=(e=i).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},x_=function(i){return{h:(e=EJ(i)).h,s:(r=(200-(t=e.s))*(n=e.v)/100)>0&&r<200?t*n/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,n,r},lxe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uxe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,cxe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,hxe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nI={string:[[function(i){var e=axe.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?Gs(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?Gs(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=cxe.exec(i)||hxe.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:lG({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=lxe.exec(i)||uxe.exec(i);if(!e)return null;var t,n,r=uG({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(oxe[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return hG(r)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,n=i.b,r=i.a,s=r===void 0?1:r;return qh(e)&&qh(t)&&qh(n)?lG({r:Number(e),g:Number(t),b:Number(n),a:Number(s)}):null},"rgb"],[function(i){var e=i.h,t=i.s,n=i.l,r=i.a,s=r===void 0?1:r;if(!qh(e)||!qh(t)||!qh(n))return null;var o=uG({h:Number(e),s:Number(t),l:Number(n),a:Number(s)});return hG(o)},"hsl"],[function(i){var e=i.h,t=i.s,n=i.v,r=i.a,s=r===void 0?1:r;if(!qh(e)||!qh(t)||!qh(n))return null;var o=function(a){return{h:TJ(a.h),s:Tu(a.s,0,100),v:Tu(a.v,0,100),a:Tu(a.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(s)});return CJ(o)},"hsv"]]},fG=function(i,e){for(var t=0;t<e.length;t++){var n=e[t][0](i);if(n)return[n,e[t][1]]}return[null,void 0]},RJ=function(i){return typeof i=="string"?fG(i.trim(),nI.string):typeof i=="object"&&i!==null?fG(i,nI.object):[null,void 0]},fxe=function(i){return RJ(i)[1]},B8=function(i,e){var t=x_(i);return{h:t.h,s:Tu(t.s+100*e,0,100),l:t.l,a:t.a}},I8=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},dG=function(i,e){var t=x_(i);return{h:t.h,s:t.s,l:Tu(t.l+100*e,0,100),a:t.a}},iI=function(){function i(e){this.parsed=RJ(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return Gs(I8(this.rgba),2)},i.prototype.isDark=function(){return I8(this.rgba)<.5},i.prototype.isLight=function(){return I8(this.rgba)>=.5},i.prototype.toHex=function(){return e=P8(this.rgba),t=e.r,n=e.g,r=e.b,o=(s=e.a)<1?ZS(Gs(255*s)):"","#"+ZS(t)+ZS(n)+ZS(r)+o;var e,t,n,r,s,o},i.prototype.toRgb=function(){return P8(this.rgba)},i.prototype.toRgbString=function(){return e=P8(this.rgba),t=e.r,n=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+r+", "+s+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,s},i.prototype.toHsl=function(){return cG(x_(this.rgba))},i.prototype.toHslString=function(){return e=cG(x_(this.rgba)),t=e.h,n=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+s+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,s},i.prototype.toHsv=function(){return e=EJ(this.rgba),{h:Gs(e.h),s:Gs(e.s),v:Gs(e.v),a:Gs(e.a,3)};var e},i.prototype.invert=function(){return la({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),la(B8(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),la(B8(this.rgba,-e))},i.prototype.grayscale=function(){return la(B8(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),la(dG(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),la(dG(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?la({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Gs(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=x_(this.rgba);return typeof e=="number"?la({h:e,s:t.s,l:t.l,a:t.a}):Gs(t.h)},i.prototype.isEqual=function(e){return this.toHex()===la(e).toHex()},i}(),la=function(i){return i instanceof iI?i:new iI(i)},pG=[],dxe=function(i){i.forEach(function(e){pG.indexOf(e)<0&&(e(iI,nI),pG.push(e))})};function pxe(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var r in t)n[t[r]]=r;var s={};i.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=n[this.toHex()];if(u)return u;if(o!=null&&o.closest){var c=this.toRgb(),h=1/0,f="black";if(!s.length)for(var d in t)s[d]=new i(t[d]).toRgb();for(var p in t){var v=(a=c,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));v<h&&(h=v,f=p)}return f}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new i(l).toRgb():null},"name"])}function ev(){return(ev=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i}).apply(this,arguments)}function dO(i,e){if(i==null)return{};var t,n,r={},s=Object.keys(i);for(n=0;n<s.length;n++)e.indexOf(t=s[n])>=0||(r[t]=i[t]);return r}function rI(i){var e=W.useRef(i),t=W.useRef(function(n){e.current&&e.current(n)});return e.current=i,t.current}var _y=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i<e?e:i},b_=function(i){return"touches"in i},sI=function(i){return i&&i.ownerDocument.defaultView||self},AG=function(i,e,t){var n=i.getBoundingClientRect(),r=b_(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:_y((r.pageX-(n.left+sI(i).pageXOffset))/n.width),top:_y((r.pageY-(n.top+sI(i).pageYOffset))/n.height)}},mG=function(i){!b_(i)&&i.preventDefault()},pO=ge.memo(function(i){var e=i.onMove,t=i.onKey,n=dO(i,["onMove","onKey"]),r=W.useRef(null),s=rI(e),o=rI(t),a=W.useRef(null),l=W.useRef(!1),u=W.useMemo(function(){var d=function(b){mG(b),(b_(b)?b.touches.length>0:b.buttons>0)&&r.current?s(AG(r.current,b,a.current)):v(!1)},p=function(){return v(!1)};function v(b){var _=l.current,M=sI(r.current),E=b?M.addEventListener:M.removeEventListener;E(_?"touchmove":"mousemove",d),E(_?"touchend":"mouseup",p)}return[function(b){var _=b.nativeEvent,M=r.current;if(M&&(mG(_),!function(R,L){return L&&!b_(R)}(_,l.current)&&M)){if(b_(_)){l.current=!0;var E=_.changedTouches||[];E.length&&(a.current=E[0].identifier)}M.focus(),s(AG(M,_,a.current)),v(!0)}},function(b){var _=b.which||b.keyCode;_<37||_>40||(b.preventDefault(),o({left:_===39?.05:_===37?-.05:0,top:_===40?.05:_===38?-.05:0}))},v]},[o,s]),c=u[0],h=u[1],f=u[2];return W.useEffect(function(){return f},[f]),ge.createElement("div",ev({},n,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:r,onKeyDown:h,tabIndex:0,role:"slider"}))}),vb=function(i){return i.filter(Boolean).join(" ")},AO=function(i){var e=i.color,t=i.left,n=i.top,r=n===void 0?.5:n,s=vb(["react-colorful__pointer",i.className]);return ge.createElement("div",{className:s,style:{top:100*r+"%",left:100*t+"%"}},ge.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},_a=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t},PJ=function(i){var e=i.s,t=i.v,n=i.a,r=(200-e)*t/100;return{h:_a(i.h),s:_a(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:_a(r/2),a:_a(n,2)}},oI=function(i){var e=PJ(i);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},N8=function(i){var e=PJ(i);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},BJ=function(i){var e=i.h,t=i.s,n=i.v,r=i.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),o=n*(1-t),a=n*(1-(e-s)*t),l=n*(1-(1-e+s)*t),u=s%6;return{r:_a(255*[n,a,o,o,l,n][u]),g:_a(255*[l,n,n,a,o,o][u]),b:_a(255*[o,o,l,n,n,a][u]),a:_a(r,2)}},IJ=function(i){var e=i.r,t=i.g,n=i.b,r=i.a,s=Math.max(e,t,n),o=s-Math.min(e,t,n),a=o?s===e?(t-n)/o:s===t?2+(n-e)/o:4+(e-t)/o:0;return{h:_a(60*(a<0?a+6:a)),s:_a(s?o/s*100:0),v:_a(s/255*100),a:r}},NJ=ge.memo(function(i){var e=i.hue,t=i.onChange,n=vb(["react-colorful__hue",i.className]);return ge.createElement("div",{className:n},ge.createElement(pO,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:_y(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":_a(e),"aria-valuemax":"360","aria-valuemin":"0"},ge.createElement(AO,{className:"react-colorful__hue-pointer",left:e/360,color:oI({h:e,s:100,v:100,a:1})})))}),DJ=ge.memo(function(i){var e=i.hsva,t=i.onChange,n={backgroundColor:oI({h:e.h,s:100,v:100,a:1})};return ge.createElement("div",{className:"react-colorful__saturation",style:n},ge.createElement(pO,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:_y(e.s+100*r.left,0,100),v:_y(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+_a(e.s)+"%, Brightness "+_a(e.v)+"%"},ge.createElement(AO,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:oI(e)})))}),mO=function(i,e){if(i===e)return!0;for(var t in i)if(i[t]!==e[t])return!1;return!0};function LJ(i,e,t){var n=rI(t),r=W.useState(function(){return i.toHsva(e)}),s=r[0],o=r[1],a=W.useRef({color:e,hsva:s});W.useEffect(function(){if(!i.equal(e,a.current.color)){var u=i.toHsva(e);a.current={hsva:u,color:e},o(u)}},[e,i]),W.useEffect(function(){var u;mO(s,a.current.hsva)||i.equal(u=i.fromHsva(s),a.current.color)||(a.current={hsva:s,color:u},n(u))},[s,i,n]);var l=W.useCallback(function(u){o(function(c){return Object.assign({},c,u)})},[]);return[s,l]}var Axe=typeof window<"u"?W.useLayoutEffect:W.useEffect,mxe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},gG=new Map,OJ=function(i){Axe(function(){var e=i.current?i.current.ownerDocument:document;if(e!==void 0&&!gG.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,gG.set(e,t);var n=mxe();n&&t.setAttribute("nonce",n),e.head.appendChild(t)}},[])},gxe=function(i){var e=i.className,t=i.colorModel,n=i.color,r=n===void 0?t.defaultColor:n,s=i.onChange,o=dO(i,["className","colorModel","color","onChange"]),a=W.useRef(null);OJ(a);var l=LJ(t,r,s),u=l[0],c=l[1],h=vb(["react-colorful",e]);return ge.createElement("div",ev({},o,{ref:a,className:h}),ge.createElement(DJ,{hsva:u,onChange:c}),ge.createElement(NJ,{hue:u.h,onChange:c,className:"react-colorful__last-control"}))},yxe=function(i){var e=i.className,t=i.hsva,n=i.onChange,r={backgroundImage:"linear-gradient(90deg, "+N8(Object.assign({},t,{a:0}))+", "+N8(Object.assign({},t,{a:1}))+")"},s=vb(["react-colorful__alpha",e]),o=_a(100*t.a);return ge.createElement("div",{className:s},ge.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),ge.createElement(pO,{onMove:function(a){n({a:a.left})},onKey:function(a){n({a:_y(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},ge.createElement(AO,{className:"react-colorful__alpha-pointer",left:t.a,color:N8(t)})))},vxe=function(i){var e=i.className,t=i.colorModel,n=i.color,r=n===void 0?t.defaultColor:n,s=i.onChange,o=dO(i,["className","colorModel","color","onChange"]),a=W.useRef(null);OJ(a);var l=LJ(t,r,s),u=l[0],c=l[1],h=vb(["react-colorful",e]);return ge.createElement("div",ev({},o,{ref:a,className:h}),ge.createElement(DJ,{hsva:u,onChange:c}),ge.createElement(NJ,{hue:u.h,onChange:c}),ge.createElement(yxe,{hsva:u,onChange:c,className:"react-colorful__last-control"}))},_xe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:IJ,fromHsva:BJ,equal:mO},xxe=function(i){return ge.createElement(vxe,ev({},i,{colorModel:_xe}))},bxe={defaultColor:{r:0,g:0,b:0},toHsva:function(i){return IJ({r:i.r,g:i.g,b:i.b,a:1})},fromHsva:function(i){return{r:(e=BJ(i)).r,g:e.g,b:e.b};var e},equal:mO},wxe=function(i){return ge.createElement(gxe,ev({},i,{colorModel:bxe}))};function tv(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):r(c.value).then(a,l)}u((n=n.apply(i,e||[])).next())})}function nv(i,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,r,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,r&&(s=u[0]&2?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,r=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(i,t)}catch(c){u=[6,c],r=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Sxe(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function Mxe(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Sxe(arguments[e]));return i}var Txe=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function _b(i,e){var t=Exe(i);if(typeof t.path!="string"){var n=i.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:i.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Exe(i){var e=i.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!i.type){var n=e.split(".").pop().toLowerCase(),r=Txe.get(n);r&&Object.defineProperty(i,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return i}var Cxe=[".DS_Store","Thumbs.db"];function Rxe(i){return tv(this,void 0,void 0,function(){return nv(this,function(e){return hE(i)&&Pxe(i)?[2,Dxe(i.dataTransfer,i.type)]:Bxe(i)?[2,Ixe(i)]:Array.isArray(i)&&i.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Nxe(i)]:[2,[]]})})}function Pxe(i){return hE(i.dataTransfer)}function Bxe(i){return hE(i)&&hE(i.target)}function hE(i){return typeof i=="object"&&i!==null}function Ixe(i){return aI(i.target.files).map(function(e){return _b(e)})}function Nxe(i){return tv(this,void 0,void 0,function(){var e;return nv(this,function(t){switch(t.label){case 0:return[4,Promise.all(i.map(function(n){return n.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(n){return _b(n)})]}})})}function Dxe(i,e){return tv(this,void 0,void 0,function(){var t,n;return nv(this,function(r){switch(r.label){case 0:return i===null?[2,[]]:i.items?(t=aI(i.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(Lxe))]):[3,2];case 1:return n=r.sent(),[2,yG(FJ(n))];case 2:return[2,yG(aI(i.files).map(function(s){return _b(s)}))]}})})}function yG(i){return i.filter(function(e){return Cxe.indexOf(e.name)===-1})}function aI(i){if(i===null)return[];for(var e=[],t=0;t<i.length;t++){var n=i[t];e.push(n)}return e}function Lxe(i){if(typeof i.webkitGetAsEntry!="function")return vG(i);var e=i.webkitGetAsEntry();return e&&e.isDirectory?kJ(e):vG(i)}function FJ(i){return i.reduce(function(e,t){return Mxe(e,Array.isArray(t)?FJ(t):[t])},[])}function vG(i){var e=i.getAsFile();if(!e)return Promise.reject(i+" is not a File");var t=_b(e);return Promise.resolve(t)}function Oxe(i){return tv(this,void 0,void 0,function(){return nv(this,function(e){return[2,i.isDirectory?kJ(i):Fxe(i)]})})}function kJ(i){var e=i.createReader();return new Promise(function(t,n){var r=[];function s(){var o=this;e.readEntries(function(a){return tv(o,void 0,void 0,function(){var l,u,c;return nv(this,function(h){switch(h.label){case 0:if(a.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return l=h.sent(),t(l),[3,4];case 3:return u=h.sent(),n(u),[3,4];case 4:return[3,6];case 5:c=Promise.all(a.map(Oxe)),r.push(c),s(),h.label=6;case 6:return[2]}})})},function(a){n(a)})}s()})}function Fxe(i){return tv(this,void 0,void 0,function(){return nv(this,function(e){return[2,new Promise(function(t,n){i.file(function(r){var s=_b(r,i.fullPath);t(s)},function(r){n(r)})})]})})}var kxe=function(i,e){if(i&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var n=i.name||"",r=(i.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?n.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):r===a})}return!0};function _G(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function xG(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_G(Object(t),!0).forEach(function(n){UJ(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):_G(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function UJ(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function bG(i,e){return Hxe(i)||Gxe(i,e)||zxe(i,e)||Uxe()}function Uxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zxe(i,e){if(i){if(typeof i=="string")return wG(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wG(i,e)}}function wG(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function Gxe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],r=!0,s=!1,o,a;try{for(t=t.call(i);!(r=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return n}}function Hxe(i){if(Array.isArray(i))return i}var qxe="file-invalid-type",Vxe="file-too-large",jxe="file-too-small",$xe="too-many-files",Wxe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:qxe,message:"File type must be ".concat(t)}},SG=function(e){return{code:Vxe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},MG=function(e){return{code:jxe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Xxe={code:$xe,message:"Too many files"};function zJ(i,e){var t=i.type==="application/x-moz-file"||kxe(i,e);return[t,t?null:Wxe(e)]}function GJ(i,e,t){if(p2(i.size))if(p2(e)&&p2(t)){if(i.size>t)return[!1,SG(t)];if(i.size<e)return[!1,MG(e)]}else{if(p2(e)&&i.size<e)return[!1,MG(e)];if(p2(t)&&i.size>t)return[!1,SG(t)]}return[!0,null]}function p2(i){return i!=null}function Yxe(i){var e=i.files,t=i.accept,n=i.minSize,r=i.maxSize,s=i.multiple,o=i.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=zJ(a,t),u=bG(l,1),c=u[0],h=GJ(a,n,r),f=bG(h,1),d=f[0];return c&&d})}function fE(i){return typeof i.isPropagationStopped=="function"?i.isPropagationStopped():typeof i.cancelBubble<"u"?i.cancelBubble:!1}function e3(i){return i.dataTransfer?Array.prototype.some.call(i.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!i.target&&!!i.target.files}function TG(i){i.preventDefault()}function Qxe(i){return i.indexOf("MSIE")!==-1||i.indexOf("Trident/")!==-1}function Kxe(i){return i.indexOf("Edge/")!==-1}function Jxe(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Qxe(i)||Kxe(i)}function zc(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return e.some(function(a){return!fE(n)&&a&&a.apply(void 0,[n].concat(s)),fE(n)})}}function Zxe(){return"showOpenFilePicker"in window}function ebe(i){return i=typeof i=="string"?i.split(","):i,[{description:"everything",accept:Array.isArray(i)?i.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return xG(xG({},e),{},UJ({},t,[]))},{}):{}}]}function tbe(i){return i instanceof DOMException&&(i.name==="AbortError"||i.code===i.ABORT_ERR)}function nbe(i){return i instanceof DOMException&&(i.name==="SecurityError"||i.code===i.SECURITY_ERR)}var ibe=["children"],rbe=["open"],sbe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],obe=["refKey","onChange","onClick"];function abe(i){return cbe(i)||ube(i)||HJ(i)||lbe()}function lbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ube(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function cbe(i){if(Array.isArray(i))return lI(i)}function D8(i,e){return dbe(i)||fbe(i,e)||HJ(i,e)||hbe()}function hbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HJ(i,e){if(i){if(typeof i=="string")return lI(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lI(i,e)}}function lI(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function fbe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],r=!0,s=!1,o,a;try{for(t=t.call(i);!(r=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return n}}function dbe(i){if(Array.isArray(i))return i}function EG(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function gr(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EG(Object(t),!0).forEach(function(n){uI(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):EG(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function uI(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function dE(i,e){if(i==null)return{};var t=pbe(i,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function pbe(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}var gO=W.forwardRef(function(i,e){var t=i.children,n=dE(i,ibe),r=VJ(n),s=r.open,o=dE(r,rbe);return W.useImperativeHandle(e,function(){return{open:s}},[s]),ge.createElement(W.Fragment,null,t(gr(gr({},o),{},{open:s})))});gO.displayName="Dropzone";var qJ={disabled:!1,getFilesFromEvent:Rxe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};gO.defaultProps=qJ;gO.propTypes={children:q.func,accept:q.oneOfType([q.string,q.arrayOf(q.string)]),multiple:q.bool,preventDropOnDocument:q.bool,noClick:q.bool,noKeyboard:q.bool,noDrag:q.bool,noDragEventsBubbling:q.bool,minSize:q.number,maxSize:q.number,maxFiles:q.number,disabled:q.bool,getFilesFromEvent:q.func,onFileDialogCancel:q.func,onFileDialogOpen:q.func,useFsAccessApi:q.bool,onDragEnter:q.func,onDragLeave:q.func,onDragOver:q.func,onDrop:q.func,onDropAccepted:q.func,onDropRejected:q.func,validator:q.func};var cI={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function VJ(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=gr(gr({},qJ),i),t=e.accept,n=e.disabled,r=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,h=e.onDragOver,f=e.onDrop,d=e.onDropAccepted,p=e.onDropRejected,v=e.onFileDialogCancel,b=e.onFileDialogOpen,_=e.useFsAccessApi,M=e.preventDropOnDocument,E=e.noClick,R=e.noKeyboard,L=e.noDrag,I=e.noDragEventsBubbling,D=e.validator,k=W.useMemo(function(){return typeof b=="function"?b:CG},[b]),G=W.useMemo(function(){return typeof v=="function"?v:CG},[v]),O=W.useRef(null),U=W.useRef(null),Q=W.useReducer(Abe,cI),X=D8(Q,2),ee=X[0],K=X[1],Z=ee.isFocused,he=ee.isFileDialogActive,j=ee.draggedFiles,ie=W.useRef(typeof window<"u"&&window.isSecureContext&&_&&Zxe()),ae=function(){!ie.current&&he&&setTimeout(function(){if(U.current){var Fe=U.current.files;Fe.length||(K({type:"closeDialog"}),G())}},300)};W.useEffect(function(){return window.addEventListener("focus",ae,!1),function(){window.removeEventListener("focus",ae,!1)}},[U,he,G,ie]);var pe=W.useRef([]),Pe=function(Fe){O.current&&O.current.contains(Fe.target)||(Fe.preventDefault(),pe.current=[])};W.useEffect(function(){return M&&(document.addEventListener("dragover",TG,!1),document.addEventListener("drop",Pe,!1)),function(){M&&(document.removeEventListener("dragover",TG),document.removeEventListener("drop",Pe))}},[O,M]);var He=W.useCallback(function(Te){Te.preventDefault(),Te.persist(),ut(Te),pe.current=[].concat(abe(pe.current),[Te.target]),e3(Te)&&Promise.resolve(r(Te)).then(function(Fe){fE(Te)&&!I||(K({draggedFiles:Fe,isDragActive:!0,type:"setDraggedFiles"}),u&&u(Te))})},[r,u,I]),Se=W.useCallback(function(Te){Te.preventDefault(),Te.persist(),ut(Te);var Fe=e3(Te);if(Fe&&Te.dataTransfer)try{Te.dataTransfer.dropEffect="copy"}catch{}return Fe&&h&&h(Te),!1},[h,I]),Oe=W.useCallback(function(Te){Te.preventDefault(),Te.persist(),ut(Te);var Fe=pe.current.filter(function(Bt){return O.current&&O.current.contains(Bt)}),We=Fe.indexOf(Te.target);We!==-1&&Fe.splice(We,1),pe.current=Fe,!(Fe.length>0)&&(K({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),e3(Te)&&c&&c(Te))},[O,c,I]),Ye=W.useCallback(function(Te,Fe){var We=[],Bt=[];Te.forEach(function(ct){var Ft=zJ(ct,t),vn=D8(Ft,2),At=vn[0],zt=vn[1],hn=GJ(ct,o,s),an=D8(hn,2),Vt=an[0],Me=an[1],Ze=D?D(ct):null;if(At&&Vt&&!Ze)We.push(ct);else{var Nt=[zt,Me];Ze&&(Nt=Nt.concat(Ze)),Bt.push({file:ct,errors:Nt.filter(function(ye){return ye})})}}),(!a&&We.length>1||a&&l>=1&&We.length>l)&&(We.forEach(function(ct){Bt.push({file:ct,errors:[Xxe]})}),We.splice(0)),K({acceptedFiles:We,fileRejections:Bt,type:"setFiles"}),f&&f(We,Bt,Fe),Bt.length>0&&p&&p(Bt,Fe),We.length>0&&d&&d(We,Fe)},[K,a,t,o,s,l,f,d,p,D]),it=W.useCallback(function(Te){Te.preventDefault(),Te.persist(),ut(Te),pe.current=[],e3(Te)&&Promise.resolve(r(Te)).then(function(Fe){fE(Te)&&!I||Ye(Fe,Te)}),K({type:"reset"})},[r,Ye,I]),Ct=W.useCallback(function(){if(ie.current){K({type:"openDialog"}),k();var Te={multiple:a,types:ebe(t)};window.showOpenFilePicker(Te).then(function(Fe){return r(Fe)}).then(function(Fe){Ye(Fe,null),K({type:"closeDialog"})}).catch(function(Fe){tbe(Fe)?(G(Fe),K({type:"closeDialog"})):nbe(Fe)&&(ie.current=!1,U.current&&(U.current.value=null,U.current.click()))});return}U.current&&(K({type:"openDialog"}),k(),U.current.value=null,U.current.click())},[K,k,G,_,Ye,t,a]),qt=W.useCallback(function(Te){!O.current||!O.current.isEqualNode(Te.target)||(Te.key===" "||Te.key==="Enter"||Te.keyCode===32||Te.keyCode===13)&&(Te.preventDefault(),Ct())},[O,Ct]),xt=W.useCallback(function(){K({type:"focus"})},[]),yt=W.useCallback(function(){K({type:"blur"})},[]),Qe=W.useCallback(function(){E||(Jxe()?setTimeout(Ct,0):Ct())},[E,Ct]),ce=function(Fe){return n?null:Fe},dt=function(Fe){return R?null:ce(Fe)},pt=function(Fe){return L?null:ce(Fe)},ut=function(Fe){I&&Fe.stopPropagation()},ft=W.useMemo(function(){return function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe=Te.refKey,We=Fe===void 0?"ref":Fe,Bt=Te.role,ct=Te.onKeyDown,Ft=Te.onFocus,vn=Te.onBlur,At=Te.onClick,zt=Te.onDragEnter,hn=Te.onDragOver,an=Te.onDragLeave,Vt=Te.onDrop,Me=dE(Te,sbe);return gr(gr(uI({onKeyDown:dt(zc(ct,qt)),onFocus:dt(zc(Ft,xt)),onBlur:dt(zc(vn,yt)),onClick:ce(zc(At,Qe)),onDragEnter:pt(zc(zt,He)),onDragOver:pt(zc(hn,Se)),onDragLeave:pt(zc(an,Oe)),onDrop:pt(zc(Vt,it)),role:typeof Bt=="string"&&Bt!==""?Bt:"button"},We,O),!n&&!R?{tabIndex:0}:{}),Me)}},[O,qt,xt,yt,Qe,He,Se,Oe,it,R,L,n]),Wt=W.useCallback(function(Te){Te.stopPropagation()},[]),Rt=W.useMemo(function(){return function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe=Te.refKey,We=Fe===void 0?"ref":Fe,Bt=Te.onChange,ct=Te.onClick,Ft=dE(Te,obe),vn=uI({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:ce(zc(Bt,it)),onClick:ce(zc(ct,Wt)),tabIndex:-1},We,U);return gr(gr({},vn),Ft)}},[U,t,a,it,n]),fe=j.length,te=fe>0&&Yxe({files:j,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),De=fe>0&&!te;return gr(gr({},ee),{},{isDragAccept:te,isDragReject:De,isFocused:Z&&!n,getRootProps:ft,getInputProps:Rt,rootRef:O,inputRef:U,open:ce(Ct)})}function Abe(i,e){switch(e.type){case"focus":return gr(gr({},i),{},{isFocused:!0});case"blur":return gr(gr({},i),{},{isFocused:!1});case"openDialog":return gr(gr({},cI),{},{isFileDialogActive:!0});case"closeDialog":return gr(gr({},i),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,n=e.draggedFiles;return gr(gr({},i),{},{draggedFiles:n,isDragActive:t});case"setFiles":return gr(gr({},i),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return gr({},cI);default:return i}}function CG(){}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var mbe=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var gbe=mbe;function RG(i){return gbe(i)===!0&&Object.prototype.toString.call(i)==="[object Object]"}var jJ=function(e){var t,n;return!(RG(e)===!1||(t=e.constructor,typeof t!="function")||(n=t.prototype,RG(n)===!1)||n.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ybe=jJ,yO=function(e){return ybe(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var vbe=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e)===!1)break},_be=yO,xbe=vbe;function $J(i,e){for(var t=arguments.length,n=0;++n<t;){var r=arguments[n];hI(r)&&xbe(r,bbe,i)}return i}function bbe(i,e){if(wbe(e)){var t=this[e];hI(i)&&hI(t)?$J(t,i):this[e]=i}}function hI(i){return _be(i)&&!Array.isArray(i)}function wbe(i){return i!=="__proto__"&&i!=="constructor"&&i!=="prototype"}var Sbe=$J;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Mbe=function(i,e,t,n,r){if(!Tbe(i)||!e)return i;if(e=t3(e),t&&(e+="."+t3(t)),n&&(e+="."+t3(n)),r&&(e+="."+t3(r)),e in i)return i[e];for(var s=e.split("."),o=s.length,a=-1;i&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];i=i[l]}return i};function Tbe(i){return i!==null&&(typeof i=="object"||typeof i=="function")}function t3(i){return i?Array.isArray(i)?i.join("."):i:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Ebe=function(i,e){if(i===null||typeof i>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return i;for(var t=Object.prototype.propertyIsEnumerable,n=Object(i),r=arguments.length,s=0;++s<r;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var u=a[l];t.call(o,u)&&(n[u]=o[u])}return n},Cbe=yO,Rbe=Ebe,Pbe=Object.assign||function(i){if(i===null||typeof i>"u")throw new TypeError("Cannot convert undefined or null to object");PG(i)||(i={});for(var e=1;e<arguments.length;e++){var t=arguments[e];Ibe(t)&&(t=Nbe(t)),PG(t)&&(Bbe(i,t),Rbe(i,t))}return i};function Bbe(i,e){for(var t in e)Dbe(e,t)&&(i[t]=e[t])}function Ibe(i){return i&&typeof i=="string"}function Nbe(i){var e={};for(var t in i)e[t]=i[t];return e}function PG(i){return i&&typeof i=="object"||Cbe(i)}function Dbe(i,e){return Object.prototype.hasOwnProperty.call(i,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Lbe=Pbe,Obe=function(i,e,t){if(typeof i!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var n=Lbe({sep:"."},e),r=n.quotes||['"',"'","`"],s;n.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:n.brackets&&(s=n.brackets);var o=[],a=[],l=[""],u=n.sep,c=i.length,h=-1,f;function d(){if(s&&a.length)return s[a[a.length-1]]}for(;++h<c;){var p=i[h],v=i[h+1],b={val:p,idx:h,arr:l,str:i};if(o.push(b),p==="\\"){b.val=kbe(n,i,h)===!0?p+v:v,b.escaped=!0,typeof t=="function"&&t(b),l[l.length-1]+=b.val,h++;continue}if(s&&s[p]){a.push(p);var _=d(),M=h+1;if(i.indexOf(_,M+1)!==-1)for(;a.length&&M<c;){var E=i[++M];if(E==="\\"){E++;continue}if(r.indexOf(E)!==-1){M=fI(i,E,M+1);continue}if(_=d(),a.length&&i.indexOf(_,M+1)===-1)break;if(s[E]){a.push(E);continue}_===E&&a.pop()}if(f=M,f===-1){l[l.length-1]+=p;continue}p=i.slice(h,f+1),b.val=p,b.idx=h=f}if(r.indexOf(p)!==-1){if(f=fI(i,p,h+1),f===-1){l[l.length-1]+=p;continue}Fbe(p,n)===!0?p=i.slice(h,f+1):p=i.slice(h+1,f),b.val=p,b.idx=h=f}if(typeof t=="function"&&(t(b,o),p=b.val,h=b.idx),b.val===u&&b.split!==!1){l.push("");continue}l[l.length-1]+=b.val}return l};function fI(i,e,t,n){var r=i.indexOf(e,t);return i.charAt(r-1)==="\\"?fI(i,e,r+1):r}function Fbe(i,e){return e.keepDoubleQuotes===!0&&i==='"'||e.keepSingleQuotes===!0&&i==="'"?!0:e.keepQuotes}function kbe(i,e,t){return typeof i.keepEscaping=="function"?i.keepEscaping(e,t):i.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Ube=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},BG=Ube,zbe=function(e){BG(e)||(e={});for(var t=arguments.length,n=1;n<t;n++){var r=arguments[n];BG(r)&&Gbe(e,r)}return e};function Gbe(i,e){for(var t in e)Hbe(e,t)&&(i[t]=e[t])}function Hbe(i,e){return Object.prototype.hasOwnProperty.call(i,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var qbe=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Vbe=Obe,jbe=zbe,IG=jJ,NG=qbe,$be=function(i,e,t){if(!NG(i)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return i;for(var n=Vbe(e,{sep:".",brackets:!0}).filter(Wbe),r=n.length,s=-1,o=i;++s<r;){var a=n[s];if(s!==r-1){NG(o[a])||(o[a]={}),o=o[a];continue}IG(o[a])&&IG(t)?o[a]=jbe({},o[a],t):o[a]=t}return i};function Wbe(i){return i!=="__proto__"&&i!=="constructor"&&i!=="prototype"}var L8=yO,DG=Sbe,Xbe=Mbe,LG=$be,Ybe=function(e,t,n){if(!L8(e))throw new TypeError("expected an object");if(typeof t!="string"||n==null)return DG.apply(null,arguments);if(typeof n=="string")return LG(e,t,n),e;var r=Xbe(e,t);return L8(n)&&L8(r)&&(n=DG({},r,n)),LG(e,t,n),e};const Qbe=xh(Ybe),vO=(...i)=>i.filter(Boolean).join(".");function Kbe(i){const e=i.split(".");return[e.pop(),e.join(".")||void 0]}function Jbe(i,e){const t=W.useRef();return fx(i,t.current)||(t.current=i),t.current}function Zbe(i,e){return W.useMemo(i,Jbe(e))}function ewe(i){const e=W.useRef(null),t=W.useRef(null),n=W.useRef(!0);return W.useLayoutEffect(()=>{i||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),W.useEffect(()=>{if(n.current){n.current=!1;return}let r;const s=e.current,o=()=>{i&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",i||(s.style.overflow="hidden",r=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(r)}},[i]),{wrapperRef:e,contentRef:t}}const twe=i=>{const[e,t]=W.useState(i.getVisiblePaths());return W.useEffect(()=>{t(i.getVisiblePaths());const n=i.useStore.subscribe(i.getVisiblePaths,t,{equalityFn:nK});return()=>n()},[i]),e};function WJ(i=3){const e=W.useRef(null),t=W.useRef(null),[n,r]=W.useState(!1),s=W.useCallback(()=>r(!0),[]),o=W.useCallback(()=>r(!1),[]);return W.useLayoutEffect(()=>{if(n){const{bottom:a,top:l,left:u}=e.current.getBoundingClientRect(),{height:c}=t.current.getBoundingClientRect(),h=a+c>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",h==="down"?t.current.style.top=a+i+"px":t.current.style.bottom=window.innerHeight-l+i+"px"}},[i,n]),{popinRef:e,wrapperRef:t,shown:n,show:s,hide:o}}dxe([pxe]);const nwe={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Va.extend({color:()=>i=>la(i).isValid()});const iwe=i=>Va().color().test(i);function XJ(i,{format:e,hasAlpha:t,isString:n}){const r=nwe[e]+(n&&e!=="hex"?"String":""),s=i[r]();return typeof s=="object"&&!t?I2e(s,["a"]):s}const YJ=(i,e)=>{const t=la(i);if(!t.isValid())throw Error("Invalid color");return XJ(t,e)},rwe=(i,e)=>XJ(la(i),Fn(Fn({},e),{},{isString:!0,format:"hex"})),swe=({value:i})=>{const e=fxe(i),t=e==="name"?"hex":e,n=typeof i=="object"?"a"in i:e==="hex"&&i.length===8||/^(rgba)|(hsla)|(hsva)/.test(i),r={format:t,hasAlpha:n,isString:typeof i=="string"};return{value:YJ(i,r),settings:r}};var owe=Object.freeze({__proto__:null,schema:iwe,sanitize:YJ,format:rwe,normalize:swe});const awe=An("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),lwe=An("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),uwe=An("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function OG(i,e){return e!=="rgb"?la(i).toRgb():i}function cwe({value:i,displayValue:e,settings:t,onUpdate:n}){const{emitOnEditStart:r,emitOnEditEnd:s}=$o(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:u,shown:c,show:h,hide:f}=WJ(),d=W.useRef(0),[p,v]=W.useState(()=>OG(i,o)),b=a?xxe:wxe,_=()=>{v(OG(i,o)),h(),r()},M=()=>{f(),s(),window.clearTimeout(d.current)},E=()=>{d.current=window.setTimeout(M,500)};return W.useEffect(()=>()=>window.clearTimeout(d.current),[]),ge.createElement(ge.Fragment,null,ge.createElement(awe,{ref:l,active:c,onClick:()=>_(),style:{color:e}}),c&&ge.createElement(cO,null,ge.createElement(gJ,{onPointerUp:M}),ge.createElement(uwe,{ref:u,onMouseEnter:()=>window.clearTimeout(d.current),onMouseLeave:R=>R.buttons===0&&E()},ge.createElement(b,{color:p,onChange:n}))))}function hwe(){const{value:i,displayValue:e,label:t,onChange:n,onUpdate:r,settings:s}=$o();return ge.createElement(Uu,{input:!0},ge.createElement(Rc,null,t),ge.createElement(lwe,null,ge.createElement(cwe,{value:i,displayValue:e,onChange:n,onUpdate:r,settings:s}),ge.createElement(uO,{value:e,onChange:n,onUpdate:r})))}var fwe=Fn({component:hwe},owe);function dwe(){const{label:i,displayValue:e,onUpdate:t,settings:n}=$o();return ge.createElement(Uu,{input:!0},ge.createElement(Rc,null,i),ge.createElement(fO,{value:e,settings:n,onUpdate:t}))}var pwe=Fn({component:dwe},MJ(["x","y","z"]));const Awe=An("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),mwe=An("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function gwe({value:i,settings:e,onUpdate:t}){const n=W.useRef(),r=W.useRef(0),s=W.useRef(0),o=W.useRef(1),[a,l]=W.useState(!1),[u,c]=W.useState(!1),[h,f]=vJ(),d=W.useRef(null),p=W.useRef(null);W.useLayoutEffect(()=>{if(a){const{top:Q,left:X,width:ee,height:K}=d.current.getBoundingClientRect();p.current.style.left=X+ee/2+"px",p.current.style.top=Q+K/2+"px"}},[a]);const{keys:[v,b],joystick:_}=e,M=_==="invertY"?1:-1,{[v]:{step:E},[b]:{step:R}}=e,L=wf("sizes","joystickWidth"),I=wf("sizes","joystickHeight"),D=parseFloat(L)*.8/2,k=parseFloat(I)*.8/2,G=W.useCallback(()=>{n.current||(c(!0),r.current&&f({x:r.current*D}),s.current&&f({y:s.current*-k}),n.current=window.setInterval(()=>{t(Q=>{const X=E*r.current*o.current,ee=M*R*s.current*o.current;return Array.isArray(Q)?{[v]:Q[0]+X,[b]:Q[1]+ee}:{[v]:Q[v]+X,[b]:Q[b]+ee}})},16))},[D,k,t,f,E,R,v,b,M]),O=W.useCallback(()=>{window.clearTimeout(n.current),n.current=void 0,c(!1)},[]);W.useEffect(()=>{function Q(X){o.current=iJ(X)}return window.addEventListener("keydown",Q),window.addEventListener("keyup",Q),()=>{window.clearTimeout(n.current),window.removeEventListener("keydown",Q),window.removeEventListener("keyup",Q)}},[]);const U=yb(({first:Q,active:X,delta:[ee,K],movement:[Z,he]})=>{Q&&l(!0);const j=Bp(Z,-D,D),ie=Bp(he,-k,k);r.current=Math.abs(Z)>Math.abs(j)?Math.sign(Z-j):0,s.current=Math.abs(he)>Math.abs(ie)?Math.sign(ie-he):0;let ae=i[v],pe=i[b];X?(r.current||(ae+=ee*E*o.current,f({x:j})),s.current||(pe-=M*K*R*o.current,f({y:ie})),r.current||s.current?G():O(),t({[v]:ae,[b]:pe})):(l(!1),r.current=0,s.current=0,f({x:0,y:0}),O())});return ge.createElement(Awe,qr({ref:d},U()),a&&ge.createElement(cO,null,ge.createElement(mwe,{ref:p,isOutOfBounds:u},ge.createElement("div",null),ge.createElement("span",{ref:h}))))}const ywe=An("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function vwe(){const{label:i,displayValue:e,onUpdate:t,settings:n}=$o();return ge.createElement(Uu,{input:!0},ge.createElement(Rc,null,i),ge.createElement(ywe,{withJoystick:!!n.joystick},n.joystick&&ge.createElement(gwe,{value:e,settings:n,onUpdate:t}),ge.createElement(fO,{value:e,settings:n,onUpdate:t})))}const _we=["joystick"],QJ=MJ(["x","y"]),xwe=i=>{let{joystick:e=!0}=i,t=Hi(i,_we);const{value:n,settings:r}=QJ.normalize(t);return{value:n,settings:Fn(Fn({},r),{},{joystick:e})}};var bwe=Fn(Fn({component:vwe},QJ),{},{normalize:xwe});const wwe=i=>{if(i!==void 0){if(i instanceof File)try{return URL.createObjectURL(i)}catch{return}if(typeof i=="string"&&i.indexOf("blob:")===0)return i;throw Error("Invalid image format [undefined | blob | File].")}},Swe=(i,e)=>typeof e=="object"&&"image"in e,Mwe=({image:i})=>({value:i});var Twe=Object.freeze({__proto__:null,sanitize:wwe,schema:Swe,normalize:Mwe});const Ewe=An("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Cwe=An("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Rwe=An("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Pwe=An("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Bwe=An("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Iwe=An("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function Nwe(){const{label:i,value:e,onUpdate:t,disabled:n}=$o(),{popinRef:r,wrapperRef:s,shown:o,show:a,hide:l}=WJ(),u=W.useCallback(p=>{p.length&&t(p[0])},[t]),c=W.useCallback(p=>{p.stopPropagation(),t(void 0)},[t]),{getRootProps:h,getInputProps:f,isDragAccept:d}=VJ({maxFiles:1,accept:"image/*",onDrop:u,disabled:n});return ge.createElement(Uu,{input:!0},ge.createElement(Rc,null,i),ge.createElement(Ewe,null,ge.createElement(Rwe,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&ge.createElement(cO,null,ge.createElement(gJ,{onPointerUp:l,style:{cursor:"pointer"}}),ge.createElement(Pwe,{ref:s,style:{backgroundImage:`url(${e})`}})),ge.createElement(Cwe,h({isDragAccept:d}),ge.createElement("input",f()),ge.createElement(Bwe,null,d?"drop image":"click or drop")),ge.createElement(Iwe,{onClick:c,disabled:!e})))}var Dwe=Fn({component:Nwe},Twe);const FG=Va().number(),Lwe=(i,e)=>Va().array().length(2).every.number().test(i)&&Va().schema({min:FG,max:FG}).test(e),pE=i=>({min:i[0],max:i[1]}),KJ=(i,{bounds:[e,t]},n)=>{const r=Array.isArray(i)?pE(i):i,s={min:n[0],max:n[1]},{min:o,max:a}=Fn(Fn({},s),r);return[Bp(Number(o),e,Math.max(e,a)),Bp(Number(a),Math.min(t,o),t)]},Owe=({value:i,min:e,max:t})=>{const n={min:e,max:t},r=SJ(pE(i),{min:n,max:n}),s=[e,t],o=Fn(Fn({},r),{},{bounds:s});return{value:KJ(pE(i),o,i),settings:o}};var Fwe=Object.freeze({__proto__:null,schema:Lwe,format:pE,sanitize:KJ,normalize:Owe});const kwe=["value","bounds","onDrag"],Uwe=["bounds"],zwe=An("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Gwe(i){let{value:e,bounds:[t,n],onDrag:r}=i,s=Hi(i,kwe);const o=W.useRef(null),a=W.useRef(null),l=W.useRef(null),u=W.useRef(0),c=wf("sizes","scrubberWidth"),h=yb(({event:p,first:v,xy:[b],movement:[_],memo:M={}})=>{if(v){const{width:R,left:L}=o.current.getBoundingClientRect();u.current=R-parseFloat(c);const I=(p==null?void 0:p.target)===a.current||(p==null?void 0:p.target)===l.current;M.pos=uE((b-L)/R,t,n);const D=Math.abs(M.pos-e.min)-Math.abs(M.pos-e.max);M.key=D<0||D===0&&M.pos<=e.min?"min":"max",I&&(M.pos=e[M.key])}const E=M.pos+uE(_/u.current,0,n-t);return r({[M.key]:v_e(E,s[M.key])}),M}),f=`calc(${lE(e.min,t,n)} * (100% - ${c} - 8px) + 4px)`,d=`calc(${1-lE(e.max,t,n)} * (100% - ${c} - 8px) + 4px)`;return ge.createElement(xJ,qr({ref:o},h()),ge.createElement(_J,null,ge.createElement(bJ,{style:{left:f,right:d}})),ge.createElement(eI,{position:"left",ref:a,style:{left:f}}),ge.createElement(eI,{position:"right",ref:l,style:{right:d}}))}function Hwe(){const{label:i,displayValue:e,onUpdate:t,settings:n}=$o(),r=Hi(n,Uwe);return ge.createElement(ge.Fragment,null,ge.createElement(Uu,{input:!0},ge.createElement(Rc,null,i),ge.createElement(zwe,null,ge.createElement(Gwe,qr({value:e},n,{onDrag:t})),ge.createElement(fO,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var qwe=Fn({component:Hwe},Fwe);const Vwe=()=>{const i=new Map;return{on:(e,t)=>{let n=i.get(e);n===void 0&&(n=new Set,i.set(e,n)),n.add(t)},off:(e,t)=>{const n=i.get(e);n!==void 0&&(n.delete(t),n.size===0&&i.delete(e))},emit:(e,...t)=>{const n=i.get(e);if(n!==void 0)for(const r of n)r(...t)}}},jwe=["type","value"],$we=["onChange","transient","onEditStart","onEditEnd"],Wwe=function(){const e=VL(ige(()=>({data:{}}))),t=Vwe();this.storeId=B2e(),this.useStore=e;const n={},r=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(n).forEach(([c,h])=>{h.render&&a.some(f=>f.indexOf(c)===0)&&!h.render(this.get)&&l.push(c+".")});const u=[];return r.forEach(c=>{c in o&&o[c].__refCount>0&&l.every(h=>c.indexOf(h)===-1)&&(!o[c].render||o[c].render(this.get))&&u.push(c)}),u},this.setOrderedPaths=o=>{o.forEach(a=>r.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(u=>{if(u in l){const c=l[u];c.__refCount--,c.__refCount===0&&c.type in oh&&delete l[u]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>n[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([c,h])=>{let f=u[c];if(f){const{type:d,value:p}=h,v=Hi(h,jwe);d!==f.type?hf(vr.INPUT_TYPE_OVERRIDE,d):((f.__refCount===0||a)&&Object.assign(f,v),f.__refCount++)}else u[c]=Fn(Fn({},h),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(o,a,l)=>{e.setState(u=>{const c=u.data;return aG(c[o],a,o,this,l),{data:c}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].settings=Fn(Fn({},u[o].settings),a),{data:u}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].disabled=a,{data:u}})},this.set=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([c,h])=>{try{aG(u[c],h,void 0,void 0,a)}catch{}}),{data:u}})},this.getInput=o=>{try{return this.getData()[o]}catch{hf(vr.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,Fn(Fn({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,Fn(Fn({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const u={};return Object.entries(o).forEach(([c,h])=>{if(c==="")return hf(vr.EMPTY_KEY);let f=vO(a,c);if(h.type===oh.FOLDER){const d=s(h.schema,f,l);Object.assign(u,d),f in n||(n[f]=h.settings)}else if(c in l)hf(vr.DUPLICATE_KEYS,c,f,l[c].path);else{const d=k2e(h,c,f,u);if(d){const{type:p,options:v,input:b}=d,{onChange:_,transient:M,onEditStart:E,onEditEnd:R}=v,L=Hi(v,$we);u[f]=Fn(Fn(Fn({type:p},L),b),{},{fromPanel:!0}),l[c]={path:f,onChange:_,transient:M,onEditStart:E,onEditEnd:R}}else hf(vr.UNKNOWN_INPUT,f,h)}}),u};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},Xwe=new Wwe,kG=i=>"__levaInput"in i,Ywe=(i,e)=>{const t={},n=e?e.toLowerCase():null;return i.forEach(r=>{const[s,o]=Kbe(r);(!n||s.toLowerCase().indexOf(n)>-1)&&Qbe(t,o,{[s]:{__levaInput:!0,path:r}})}),t},Qwe=["type","label","path","valueKey","value","settings","setValue","disabled"];function Kwe(i){let{type:e,label:t,path:n,valueKey:r,value:s,settings:o,setValue:a,disabled:l}=i,u=Hi(i,Qwe);const{displayValue:c,onChange:h,onUpdate:f}=yJ({type:e,value:s,settings:o,setValue:a}),d=X0[e].component;return d?ge.createElement(lJ.Provider,{value:Fn({key:r,path:n,id:""+n,label:t,displayValue:c,value:s,onChange:h,onUpdate:f,settings:o,setValue:a,disabled:l},u)},ge.createElement(i_e,{disabled:l},ge.createElement(d,null))):(hf(vr.NO_COMPONENT_FOR_TYPE,e,n),null)}const Jwe=An("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Zwe({onClick:i,settings:e,label:t}){const n=gb();return ge.createElement(Uu,null,ge.createElement(Jwe,{disabled:e.disabled,onClick:()=>i(n.get)},t))}const eSe=An("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),tSe=An("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),nSe=({label:i,opts:e})=>{let t=typeof i=="string"&&i.trim()===""?null:i,n=e;return typeof e.opts=="object"&&(n.label!==void 0&&(t=e.label),n=e.opts),{label:t,opts:n}};function iSe(i){const{label:e,opts:t}=nSe(i),n=gb();return ge.createElement(Uu,{input:!!e},e&&ge.createElement(Rc,null,e),ge.createElement(eSe,null,Object.entries(t).map(([r,s])=>ge.createElement(tSe,{key:r,onClick:()=>s(n.get)},r))))}const rSe=An("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),JJ=100;function sSe(i,e){i.push(e),i.length>JJ&&i.shift()}const oSe=W.forwardRef(function({initialValue:i},e){const t=wf("colors","highlight3"),n=wf("colors","elevation2"),r=wf("colors","highlight1"),[s,o]=W.useMemo(()=>[la(r).alpha(.4).toRgbString(),la(r).alpha(.1).toRgbString()],[r]),a=W.useRef([i]),l=W.useRef(i),u=W.useRef(i),c=W.useRef(),h=W.useCallback((p,v)=>{if(!p)return;const{width:b,height:_}=p,M=new Path2D,E=b/JJ,R=_*.05;for(let D=0;D<a.current.length;D++){const k=lE(a.current[D],l.current,u.current),G=E*D,O=_-k*(_-R*2)-R;M.lineTo(G,O)}v.clearRect(0,0,b,_);const L=new Path2D(M);L.lineTo(E*(a.current.length+1),_),L.lineTo(0,_),L.lineTo(0,0);const I=v.createLinearGradient(0,0,0,_);I.addColorStop(0,s),I.addColorStop(1,o),v.fillStyle=I,v.fill(L),v.strokeStyle=n,v.lineJoin="round",v.lineWidth=14,v.stroke(M),v.strokeStyle=t,v.lineWidth=2,v.stroke(M)},[t,n,s,o]),[f,d]=f_e(h);return W.useImperativeHandle(e,()=>({frame:p=>{(l.current===void 0||p<l.current)&&(l.current=p),(u.current===void 0||p>u.current)&&(u.current=p),sSe(a.current,p),c.current=requestAnimationFrame(()=>h(f.current,d.current))}}),[f,d,h]),W.useEffect(()=>()=>cancelAnimationFrame(c.current),[]),ge.createElement(rSe,{ref:f})}),UG=i=>Number.isFinite(i)?i.toPrecision(2):i.toString(),aSe=W.forwardRef(function({initialValue:i},e){const[t,n]=W.useState(UG(i));return W.useImperativeHandle(e,()=>({frame:r=>n(UG(r))}),[]),ge.createElement("div",null,t)});function zG(i){return typeof i=="function"?i():i.current}function lSe({label:i,objectOrFn:e,settings:t}){const n=W.useRef(),r=W.useRef(zG(e));return W.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=n.current)===null||o===void 0||o.frame(zG(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),ge.createElement(Uu,{input:!0},ge.createElement(Rc,{align:"top"},i),t.graph?ge.createElement(oSe,{ref:n,initialValue:r.current}):ge.createElement(aSe,{ref:n,initialValue:r.current}))}const uSe=["type","label","key"],cSe={[oh.BUTTON]:Zwe,[oh.BUTTON_GROUP]:iSe,[oh.MONITOR]:lSe},hSe=ge.memo(({path:i})=>{const[e,{set:t,setSettings:n,disable:r,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=p_e(i);if(!e)return null;const{type:l,label:u,key:c}=e,h=Hi(e,uSe);if(l in oh){const f=cSe[l];return ge.createElement(f,qr({label:u,path:i},h))}return l in X0?ge.createElement(Kwe,qr({key:s+i,type:l,label:u,storeId:s,path:i,valueKey:c,setValue:t,setSettings:n,disable:r,emitOnEditStart:o,emitOnEditEnd:a},h)):(w2e(vr.UNSUPPORTED_INPUT,l,i),null)});function fSe({toggle:i,toggled:e,name:t}){return ge.createElement(e_e,{onClick:()=>i()},ge.createElement(hO,{toggled:e}),ge.createElement("div",null,t))}const dSe=({name:i,path:e,tree:t})=>{const n=gb(),r=vO(e,i),{collapsed:s,color:o}=n.getFolderSettings(r),[a,l]=W.useState(!s),u=W.useRef(null),c=wf("colors","folderWidgetColor"),h=wf("colors","folderTextColor");return W.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",o||c),u.current.style.setProperty("--leva-colors-folderTextColor",o||h)},[o,c,h]),ge.createElement(cE,{ref:u},ge.createElement(fSe,{name:i,toggled:a,toggle:()=>l(f=>!f)}),ge.createElement(ZJ,{parent:r,tree:t,toggled:a}))},ZJ=ge.memo(({isRoot:i=!1,fill:e=!1,flat:t=!1,parent:n,tree:r,toggled:s})=>{const{wrapperRef:o,contentRef:a}=ewe(s),l=gb(),u=([h,f])=>{var d;return(kG(f)?(d=l.getInput(f.path))===null||d===void 0?void 0:d.order:l.getFolderSettings(vO(n,h)).order)||0},c=Object.entries(r).sort((h,f)=>u(h)-u(f));return ge.createElement(JB,{ref:o,isRoot:i,fill:e,flat:t},ge.createElement(pJ,{ref:a,isRoot:i,toggled:s},c.map(([h,f])=>kG(f)?ge.createElement(hSe,{key:f.path,valueKey:f.valueKey,path:f.path}):ge.createElement(dSe,{key:h,name:h,path:n,tree:f}))))}),pSe=An("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${mJ}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),eZ=40,AE=An("i",{$flexCenter:"",width:eZ,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),ASe=An("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),mSe=An("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${AE}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),gSe=An("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),ySe=An("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:eZ}}}}),vSe=ge.forwardRef(({setFilter:i,toggle:e},t)=>{const[n,r]=W.useState(""),s=W.useMemo(()=>nJ(i,250),[i]),o=()=>{i(""),r("")},a=l=>{const u=l.currentTarget.value;e(!0),r(u)};return W.useEffect(()=>{s(n)},[n,s]),ge.createElement(ge.Fragment,null,ge.createElement(gSe,{ref:t,value:n,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),ge.createElement(AE,{onClick:()=>o(),style:{visibility:n?"visible":"hidden"}},ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},ge.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function _Se({setFilter:i,onDrag:e,onDragStart:t,onDragEnd:n,toggle:r,toggled:s,title:o,drag:a,filterEnabled:l,from:u}){const[c,h]=W.useState(!1),f=W.useRef(null);W.useEffect(()=>{var p,v;c?(p=f.current)===null||p===void 0||p.focus():(v=f.current)===null||v===void 0||v.blur()},[c]);const d=yb(({offset:[p,v],first:b,last:_})=>{e({x:p,y:v}),b&&t({x:p,y:v}),_&&n({x:p,y:v})},{filterTaps:!0,from:({offset:[p,v]})=>[(u==null?void 0:u.x)||p,(u==null?void 0:u.y)||v]});return W.useEffect(()=>{const p=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&h(b=>!b)};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[]),ge.createElement(ge.Fragment,null,ge.createElement(ASe,{mode:a?"drag":void 0},ge.createElement(AE,{active:!s,onClick:()=>r()},ge.createElement(hO,{toggled:s,width:12,height:8})),ge.createElement(ySe,qr({},a?d():{},{drag:a,filterEnabled:l}),o===void 0&&a?ge.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},ge.createElement("circle",{cx:"2",cy:"2",r:"2"}),ge.createElement("circle",{cx:"14",cy:"2",r:"2"}),ge.createElement("circle",{cx:"26",cy:"2",r:"2"}),ge.createElement("circle",{cx:"2",cy:"12",r:"2"}),ge.createElement("circle",{cx:"14",cy:"12",r:"2"}),ge.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&ge.createElement(AE,{active:c,onClick:()=>h(p=>!p)},ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},ge.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),ge.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),ge.createElement(mSe,{toggled:c},ge.createElement(vSe,{ref:f,setFilter:i,toggle:r})))}const xSe=["store","hidden","theme","collapsed"];function bSe(i){let{store:e,hidden:t=!1,theme:n,collapsed:r=!1}=i,s=Hi(i,xSe);const o=Zbe(()=>X2e(n),[n]),[a,l]=W.useState(!r),u=typeof r=="object"?!r.collapsed:a,c=W.useMemo(()=>typeof r=="object"?h=>{typeof h=="function"?r.onChange(!h(!r.collapsed)):r.onChange(!h)}:l,[r]);return!e||t?null:ge.createElement(lO.Provider,{value:o},ge.createElement(wSe,qr({store:e},s,{toggled:u,setToggle:c,rootClass:o.className})))}const wSe=ge.memo(({store:i,rootClass:e,fill:t=!1,flat:n=!1,neverHide:r=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:u})=>{var c,h;const f=twe(i),[d,p]=W.useState(""),v=W.useMemo(()=>Ywe(f,d),[f,d]),[b,_]=vJ(),M=r||f.length>0,E=typeof o=="object"&&o.title||void 0,R=typeof o=="object"&&(c=o.drag)!==null&&c!==void 0?c:!0,L=typeof o=="object"&&(h=o.filter)!==null&&h!==void 0?h:!0,I=typeof o=="object"&&o.position||void 0,D=typeof o=="object"&&o.onDrag||void 0,k=typeof o=="object"&&o.onDragStart||void 0,G=typeof o=="object"&&o.onDragEnd||void 0;return ge.useEffect(()=>{_({x:I==null?void 0:I.x,y:I==null?void 0:I.y})},[I,_]),W2e(),ge.createElement(cJ.Provider,{value:{hideCopyButton:a}},ge.createElement(pSe,{ref:b,className:e,fill:t,flat:n,oneLineLabels:s,hideTitleBar:!o,style:{display:M?"block":"none"}},o&&ge.createElement(_Se,{onDrag:O=>{_(O),D==null||D(O)},onDragStart:O=>k==null?void 0:k(O),onDragEnd:O=>G==null?void 0:G(O),setFilter:p,toggle:O=>u(U=>O??!U),toggled:l,title:E,drag:R,filterEnabled:L,from:I}),M&&ge.createElement(uJ.Provider,{value:i},ge.createElement(ZJ,{isRoot:!0,fill:t,flat:n,tree:v,toggled:l}))))}),SSe=["isRoot"];let O8=null;function MSe(i){let{isRoot:e=!1}=i,t=Hi(i,SSe);return W.useEffect(()=>(!e&&O8&&(O8.remove(),O8=null),()=>{}),[e]),ge.createElement(bSe,qr({store:Xwe},t))}Kf(Sc.SELECT,B_e);Kf(Sc.IMAGE,Dwe);Kf(Sc.NUMBER,x_e);Kf(Sc.COLOR,fwe);Kf(Sc.STRING,z_e);Kf(Sc.BOOLEAN,W_e);Kf(Sc.INTERVAL,qwe);Kf(Sc.VECTOR3D,pwe);Kf(Sc.VECTOR2D,bwe);var _O={};_O.match=BSe;_O.parse=tZ;var TSe=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,ESe=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,CSe=/^(?:(min|max)-)?(.+)/,RSe=/(em|rem|px|cm|mm|in|pt|pc)?$/,PSe=/(dpi|dpcm|dppx)?$/;function BSe(i,e){return tZ(i).some(function(t){var n=t.inverse,r=t.type==="all"||e.type===t.type;if(r&&n||!(r||n))return!1;var s=t.expressions.every(function(o){var a=o.feature,l=o.modifier,u=o.value,c=e[a];if(!c)return!1;switch(a){case"orientation":case"scan":return c.toLowerCase()===u.toLowerCase();case"width":case"height":case"device-width":case"device-height":u=qG(u),c=qG(c);break;case"resolution":u=HG(u),c=HG(c);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":u=GG(u),c=GG(c);break;case"grid":case"color":case"color-index":case"monochrome":u=parseInt(u,10)||1,c=parseInt(c,10)||0;break}switch(l){case"min":return c>=u;case"max":return c<=u;default:return c===u}});return s&&!n||!s&&n})}function tZ(i){return i.split(",").map(function(e){e=e.trim();var t=e.match(TSe),n=t[1],r=t[2],s=t[3]||"",o={};return o.inverse=!!n&&n.toLowerCase()==="not",o.type=r?r.toLowerCase():"all",s=s.match(/\([^\)]+\)/g)||[],o.expressions=s.map(function(a){var l=a.match(ESe),u=l[1].toLowerCase().match(CSe);return{modifier:u[1],feature:u[2],value:l[2]}}),o})}function GG(i){var e=Number(i),t;return e||(t=i.match(/^(\d+)\s*\/\s*(\d+)$/),e=t[1]/t[2]),e}function HG(i){var e=parseFloat(i),t=String(i).match(PSe)[1];switch(t){case"dpcm":return e/2.54;case"dppx":return e*96;default:return e}}function qG(i){var e=parseFloat(i),t=String(i).match(RSe)[1];switch(t){case"em":return e*16;case"rem":return e*16;case"cm":return e*96/2.54;case"mm":return e*96/2.54/10;case"in":return e*96;case"pt":return e*72;case"pc":return e*72/12;default:return e}}var ISe=_O.match,VG=typeof window<"u"?window.matchMedia:null;function NSe(i,e,t){var n=this,r;VG&&!t&&(r=VG.call(window,i)),r?(this.matches=r.matches,this.media=r.media,r.addListener(a)):(this.matches=ISe(i,e),this.media=i),this.addListener=s,this.removeListener=o,this.dispose=l;function s(u){r&&r.addListener(u)}function o(u){r&&r.removeListener(u)}function a(u){n.matches=u.matches,n.media=u.media}function l(){r&&r.removeListener(a)}}function DSe(i,e,t){return new NSe(i,e,t)}var LSe=DSe;const OSe=xh(LSe);var FSe=/[A-Z]/g,kSe=/^ms-/,F8={};function USe(i){return"-"+i.toLowerCase()}function nZ(i){if(F8.hasOwnProperty(i))return F8[i];var e=i.replace(FSe,USe);return F8[i]=kSe.test(e)?"-"+e:e}function zSe(i,e){if(i===e)return!0;if(!i||!e)return!1;const t=Object.keys(i),n=Object.keys(e),r=t.length;if(n.length!==r)return!1;for(let s=0;s<r;s++){const o=t[s];if(i[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}const oa=q.oneOfType([q.string,q.number]),xO={all:q.bool,grid:q.bool,aural:q.bool,braille:q.bool,handheld:q.bool,print:q.bool,projection:q.bool,screen:q.bool,tty:q.bool,tv:q.bool,embossed:q.bool},iZ={orientation:q.oneOf(["portrait","landscape"]),scan:q.oneOf(["progressive","interlace"]),aspectRatio:q.string,deviceAspectRatio:q.string,height:oa,deviceHeight:oa,width:oa,deviceWidth:oa,color:q.bool,colorIndex:q.bool,monochrome:q.bool,resolution:oa,type:Object.keys(xO)},{type:IGe,...GSe}=iZ,rZ={minAspectRatio:q.string,maxAspectRatio:q.string,minDeviceAspectRatio:q.string,maxDeviceAspectRatio:q.string,minHeight:oa,maxHeight:oa,minDeviceHeight:oa,maxDeviceHeight:oa,minWidth:oa,maxWidth:oa,minDeviceWidth:oa,maxDeviceWidth:oa,minColor:q.number,maxColor:q.number,minColorIndex:q.number,maxColorIndex:q.number,minMonochrome:q.number,maxMonochrome:q.number,minResolution:oa,maxResolution:oa,...GSe},HSe={...xO,...rZ};var qSe={all:HSe,types:xO,matchers:iZ,features:rZ};const VSe=i=>`not ${i}`,jSe=(i,e)=>{const t=nZ(i);return typeof e=="number"&&(e=`${e}px`),e===!0?t:e===!1?VSe(t):`(${t}: ${e})`},$Se=i=>i.join(" and "),WSe=i=>{const e=[];return Object.keys(qSe.all).forEach(t=>{const n=i[t];n!=null&&e.push(jSe(t,n))}),$Se(e)},XSe=W.createContext(void 0),YSe=i=>i.query||WSe(i),jG=i=>i?Object.keys(i).reduce((t,n)=>(t[nZ(n)]=i[n],t),{}):void 0,sZ=()=>{const i=W.useRef(!1);return W.useEffect(()=>{i.current=!0},[]),i.current},QSe=i=>{const e=W.useContext(XSe),t=()=>jG(i)||jG(e),[n,r]=W.useState(t);return W.useEffect(()=>{const s=t();zSe(n,s)||r(s)},[i,e]),n},KSe=i=>{const e=()=>YSe(i),[t,n]=W.useState(e);return W.useEffect(()=>{const r=e();t!==r&&n(r)},[i]),t},JSe=(i,e)=>{const t=()=>OSe(i,e||{},!!e),[n,r]=W.useState(t),s=sZ();return W.useEffect(()=>{if(s){const o=t();return r(o),()=>{o&&o.dispose()}}},[i,e]),n},ZSe=i=>{const[e,t]=W.useState(i.matches);return W.useEffect(()=>{const n=r=>{t(r.matches)};return i.addListener(n),t(i.matches),()=>{i.removeListener(n)}},[i]),e},k8=(i,e,t)=>{const n=QSe(e),r=KSe(i);if(!r)throw new Error("Invalid or missing MediaQuery!");const s=JSe(r,n),o=ZSe(s),a=sZ();return W.useEffect(()=>{a&&t&&t(o)},[o]),W.useEffect(()=>()=>{s&&s.dispose()},[]),o};function Zh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function oZ(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Gl={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},xy={duration:.5,overwrite:!1,delay:0},bO,zo,dr,Eu=1e8,Ji=1/Eu,dI=Math.PI*2,e3e=dI/4,t3e=0,aZ=Math.sqrt,n3e=Math.cos,i3e=Math.sin,Ws=function(e){return typeof e=="string"},Gr=function(e){return typeof e=="function"},zf=function(e){return typeof e=="number"},wO=function(e){return typeof e>"u"},mh=function(e){return typeof e=="object"},Ka=function(e){return e!==!1},SO=function(){return typeof window<"u"},n3=function(e){return Gr(e)||Ws(e)},lZ=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Go=Array.isArray,pI=/(?:-?\.?\d|\.)+/gi,uZ=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,d1=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,U8=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,cZ=/[+-]=-?[.\d]+/,hZ=/[^,'"\[\]\s]+/gi,r3e=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,xr,Vc,AI,MO,jl={},mE={},fZ,dZ=function(e){return(mE=Y0(e,jl))&&nl},TO=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},mx=function(e,t){return!t&&console.warn(e)},pZ=function(e,t){return e&&(jl[e]=t)&&mE&&(mE[e]=t)||jl},gx=function(){return 0},s3e={suppressEvents:!0,isStart:!0,kill:!1},CM={suppressEvents:!0,kill:!1},o3e={suppressEvents:!0},EO={},yp=[],mI={},AZ,Rl={},z8={},$G=30,RM=[],CO="",RO=function(e){var t=e[0],n,r;if(mh(t)||Gr(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=RM.length;r--&&!RM[r].targetTest(t););n=RM[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new UZ(e[r],n)))||e.splice(r,1);return e},T0=function(e){return e._gsap||RO(Cu(e))[0]._gsap},mZ=function(e,t,n){return(n=e[t])&&Gr(n)?e[t]():wO(n)&&e.getAttribute&&e.getAttribute(t)||n},Ja=function(e,t){return(e=e.split(",")).forEach(t)||e},Qr=function(e){return Math.round(e*1e5)/1e5||0},Hs=function(e){return Math.round(e*1e7)/1e7||0},G1=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},a3e=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},gE=function(){var e=yp.length,t=yp.slice(0),n,r;for(mI={},yp.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},gZ=function(e,t,n,r){yp.length&&!zo&&gE(),e.render(t,n,zo&&t<0&&(e._initted||e._startAt)),yp.length&&!zo&&gE()},yZ=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(hZ).length<2?t:Ws(e)?e.trim():e},vZ=function(e){return e},Lu=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},l3e=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},Y0=function(e,t){for(var n in t)e[n]=t[n];return e},WG=function i(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=mh(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},yE=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},w_=function(e){var t=e.parent||xr,n=e.keyframes?l3e(Go(e.keyframes)):Lu;if(Ka(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},u3e=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},_Z=function(e,t,n,r,s){var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},L4=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[n]===t&&(e[n]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Ip=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},E0=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},c3e=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},gI=function(e,t,n,r){return e._startAt&&(zo?e._startAt.revert(CM):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},h3e=function i(e){return!e||e._ts&&i(e.parent)},XG=function(e){return e._repeat?by(e._tTime,e=e.duration()+e._rDelay)*e:0},by=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},vE=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},O4=function(e){return e._end=Hs(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ji)||0))},F4=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Hs(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),O4(e),n._dirty||E0(n,e)),e},xZ=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=vE(e.rawTime(),t),(!t._dur||xb(0,t.totalDuration(),n)-t._tTime>Ji)&&t.render(n,!0)),E0(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Ji}},Yc=function(e,t,n,r){return t.parent&&Ip(t),t._start=Hs((zf(n)?n:n||e!==xr?mu(e,n,t):e._time)+t._delay),t._end=Hs(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),_Z(e,t,"_first","_last",e._sort?"_start":0),yI(t)||(e._recent=t),r||xZ(e,t),e._ts<0&&F4(e,e._tTime),e},bZ=function(e,t){return(jl.ScrollTrigger||TO("scrollTrigger",t))&&jl.ScrollTrigger.create(t,e)},wZ=function(e,t,n,r,s){if(BO(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!zo&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&AZ!==Nl.frame)return yp.push(e),e._lazy=[s,r],1},f3e=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},yI=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},d3e=function(e,t,n,r){var s=e.ratio,o=t<0||!t&&(!e._start&&f3e(e)&&!(!e._initted&&yI(e))||(e._ts<0||e._dp._ts<0)&&!yI(e))?0:1,a=e._rDelay,l=0,u,c,h;if(a&&e._repeat&&(l=xb(0,e._tDur,t),c=by(l,a),e._yoyo&&c&1&&(o=1-o),c!==by(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||zo||r||e._zTime===Ji||!t&&e._zTime){if(!e._initted&&wZ(e,t,r,n,l))return;for(h=e._zTime,e._zTime=t||(n?Ji:0),n||(n=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;t<0&&gI(e,t,n,!0),e._onUpdate&&!n&&Fl(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&Fl(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Ip(e,1),!n&&!zo&&(Fl(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},p3e=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},wy=function(e,t,n,r){var s=e._repeat,o=Hs(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Hs(o*(s+1)+e._rDelay*s):o,a>0&&!r&&F4(e,e._tTime=e._tDur*a),e.parent&&O4(e),n||E0(e.parent,e),e},YG=function(e){return e instanceof Aa?E0(e):wy(e,e._dur)},A3e={_start:0,endTime:gx,totalDuration:gx},mu=function i(e,t,n){var r=e.labels,s=e._recent||A3e,o=e.duration()>=Eu?s.endTime(!1):e._dur,a,l,u;return Ws(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),u=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(a<0?s:n).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),u&&n&&(l=l/100*(Go(n)?n[0]:n).totalDuration()),a>1?i(e,t.substr(0,a-1),n)+l:o+l)):t==null?o:+t},S_=function(e,t,n){var r=zf(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=n,e){for(a=o,l=n;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Ka(l.vars.inherit)&&l.parent;o.immediateRender=Ka(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new as(t[0],o,t[s+1])},Jp=function(e,t){return e||e===0?t(e):t},xb=function(e,t,n){return n<e?e:n>t?t:n},Lo=function(e,t){return!Ws(e)||!(t=r3e.exec(e))?"":t[1]},m3e=function(e,t,n){return Jp(n,function(r){return xb(e,t,r)})},vI=[].slice,SZ=function(e,t){return e&&mh(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&mh(e[0]))&&!e.nodeType&&e!==Vc},g3e=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var s;return Ws(r)&&!t||SZ(r,1)?(s=n).push.apply(s,Cu(r)):n.push(r)})||n},Cu=function(e,t,n){return dr&&!t&&dr.selector?dr.selector(e):Ws(e)&&!n&&(AI||!Sy())?vI.call((t||MO).querySelectorAll(e),0):Go(e)?g3e(e,n):SZ(e)?vI.call(e,0):e?[e]:[]},_I=function(e){return e=Cu(e)[0]||mx("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Cu(t,n.querySelectorAll?n:n===e?mx("Invalid scope")||MO.createElement("div"):e)}},MZ=function(e){return e.sort(function(){return .5-Math.random()})},TZ=function(e){if(Gr(e))return e;var t=mh(e)?e:{each:e},n=C0(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,u=t.axis,c=r,h=r;return Ws(r)?c=h={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(c=r[0],h=r[1]),function(f,d,p){var v=(p||t).length,b=o[v],_,M,E,R,L,I,D,k,G;if(!b){if(G=t.grid==="auto"?0:(t.grid||[1,Eu])[1],!G){for(D=-Eu;D<(D=p[G++].getBoundingClientRect().left)&&G<v;);G<v&&G--}for(b=o[v]=[],_=l?Math.min(G,v)*c-.5:r%G,M=G===Eu?0:l?v*h/G-.5:r/G|0,D=0,k=Eu,I=0;I<v;I++)E=I%G-_,R=M-(I/G|0),b[I]=L=u?Math.abs(u==="y"?R:E):aZ(E*E+R*R),L>D&&(D=L),L<k&&(k=L);r==="random"&&MZ(b),b.max=D-k,b.min=k,b.v=v=(parseFloat(t.amount)||parseFloat(t.each)*(G>v?v-1:u?u==="y"?v/G:G:Math.max(G,v/G))||0)*(r==="edges"?-1:1),b.b=v<0?s-v:s,b.u=Lo(t.amount||t.each)||0,n=n&&v<0?OZ(n):n}return v=(b[f]-b.min)/b.max||0,Hs(b.b+(n?n(v):v)*b.v)+b.u}},xI=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=Hs(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(zf(n)?0:Lo(n))}},EZ=function(e,t){var n=Go(e),r,s;return!n&&mh(e)&&(r=n=e.radius||Eu,e.values?(e=Cu(e.values),(s=!zf(e[0]))&&(r*=r)):e=xI(e.increment)),Jp(t,n?Gr(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=Eu,c=0,h=e.length,f,d;h--;)s?(f=e[h].x-a,d=e[h].y-l,f=f*f+d*d):f=Math.abs(e[h]-a),f<u&&(u=f,c=h);return c=!r||u<=r?e[c]:o,s||c===o||zf(o)?c:c+Lo(o)}:xI(e))},CZ=function(e,t,n,r){return Jp(Go(e)?!t:n===!0?!!(n=0):!r,function(){return Go(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},y3e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,o){return o(s)},r)}},v3e=function(e,t){return function(n){return e(parseFloat(n))+(t||Lo(n))}},_3e=function(e,t,n){return PZ(e,t,0,1,n)},RZ=function(e,t,n){return Jp(n,function(r){return e[~~t(r)]})},x3e=function i(e,t,n){var r=t-e;return Go(e)?RZ(e,i(0,e.length),t):Jp(n,function(s){return(r+(s-e)%r)%r+e})},b3e=function i(e,t,n){var r=t-e,s=r*2;return Go(e)?RZ(e,i(0,e.length-1),t):Jp(n,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},yx=function(e){for(var t=0,n="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?hZ:pI),n+=e.substr(t,r-t)+CZ(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},PZ=function(e,t,n,r,s){var o=t-e,a=r-n;return Jp(s,function(l){return n+((l-e)/o*a||0)})},w3e=function i(e,t,n,r){var s=isNaN(e+t)?0:function(d){return(1-d)*e+d*t};if(!s){var o=Ws(e),a={},l,u,c,h,f;if(n===!0&&(r=1)&&(n=null),o)e={p:e},t={p:t};else if(Go(e)&&!Go(t)){for(c=[],h=e.length,f=h-2,u=1;u<h;u++)c.push(i(e[u-1],e[u]));h--,s=function(p){p*=h;var v=Math.min(f,~~p);return c[v](p-v)},n=t}else r||(e=Y0(Go(e)?[]:{},e));if(!c){for(l in t)PO.call(a,e,l,"get",t[l]);s=function(p){return DO(p,a)||(o?e.p:e)}}}return Jp(n,s)},QG=function(e,t,n){var r=e.labels,s=Eu,o,a,l;for(o in r)a=r[o]-t,a<0==!!n&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Fl=function(e,t,n){var r=e.vars,s=r[t],o=dr,a=e._ctx,l,u,c;if(s)return l=r[t+"Params"],u=r.callbackScope||e,n&&yp.length&&gE(),a&&(dr=a),c=l?s.apply(u,l):s.call(u),dr=o,c},j2=function(e){return Ip(e),e.scrollTrigger&&e.scrollTrigger.kill(!!zo),e.progress()<1&&Fl(e,"onInterrupt"),e},p1,BZ=[],IZ=function(e){if(e)if(e=!e.name&&e.default||e,SO()||e.headless){var t=e.name,n=Gr(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:gx,render:DO,add:PO,kill:U3e,modifier:k3e,rawVars:0},o={targetTest:0,get:0,getSetter:NO,aliases:{},register:0};if(Sy(),e!==r){if(Rl[t])return;Lu(r,Lu(yE(e,s),o)),Y0(r.prototype,Y0(s,yE(e,o))),Rl[r.prop=t]=r,e.targetTest&&(RM.push(r),EO[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}pZ(t,r),e.register&&e.register(nl,r,Za)}else BZ.push(e)},ji=255,$2={aqua:[0,ji,ji],lime:[0,ji,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ji],navy:[0,0,128],white:[ji,ji,ji],olive:[128,128,0],yellow:[ji,ji,0],orange:[ji,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ji,0,0],pink:[ji,192,203],cyan:[0,ji,ji],transparent:[ji,ji,ji,0]},G8=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*ji+.5|0},NZ=function(e,t,n){var r=e?zf(e)?[e>>16,e>>8&ji,e&ji]:0:$2.black,s,o,a,l,u,c,h,f,d,p;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),$2[e])r=$2[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&ji,r&ji,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&ji,e&ji]}else if(e.substr(0,3)==="hsl"){if(r=p=e.match(pI),!t)l=+r[0]%360/360,u=+r[1]/100,c=+r[2]/100,o=c<=.5?c*(u+1):c+u-c*u,s=c*2-o,r.length>3&&(r[3]*=1),r[0]=G8(l+1/3,s,o),r[1]=G8(l,s,o),r[2]=G8(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(uZ),n&&r.length<4&&(r[3]=1),r}else r=e.match(pI)||$2.transparent;r=r.map(Number)}return t&&!p&&(s=r[0]/ji,o=r[1]/ji,a=r[2]/ji,h=Math.max(s,o,a),f=Math.min(s,o,a),c=(h+f)/2,h===f?l=u=0:(d=h-f,u=c>.5?d/(2-h-f):d/(h+f),l=h===s?(o-a)/d+(o<a?6:0):h===o?(a-s)/d+2:(s-o)/d+4,l*=60),r[0]=~~(l+.5),r[1]=~~(u*100+.5),r[2]=~~(c*100+.5)),n&&r.length<4&&(r[3]=1),r},DZ=function(e){var t=[],n=[],r=-1;return e.split(vp).forEach(function(s){var o=s.match(d1)||[];t.push.apply(t,o),n.push(r+=o.length+1)}),t.c=n,t},KG=function(e,t,n){var r="",s=(e+r).match(vp),o=t?"hsla(":"rgba(",a=0,l,u,c,h;if(!s)return e;if(s=s.map(function(f){return(f=NZ(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),n&&(c=DZ(e),l=n.c,l.join(r)!==c.c.join(r)))for(u=e.replace(vp,"1").split(d1),h=u.length-1;a<h;a++)r+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:n).shift());if(!u)for(u=e.split(vp),h=u.length-1;a<h;a++)r+=u[a]+s[a];return r+u[h]},vp=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in $2)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),S3e=/hsl[a]?\(/,LZ=function(e){var t=e.join(" "),n;if(vp.lastIndex=0,vp.test(t))return n=S3e.test(t),e[1]=KG(e[1],n),e[0]=KG(e[0],n,DZ(e[1])),!0},vx,Nl=function(){var i=Date.now,e=500,t=33,n=i(),r=n,s=1e3/240,o=s,a=[],l,u,c,h,f,d,p=function v(b){var _=i()-r,M=b===!0,E,R,L,I;if((_>e||_<0)&&(n+=_-t),r+=_,L=r-n,E=L-o,(E>0||M)&&(I=++h.frame,f=L-h.time*1e3,h.time=L=L/1e3,o+=E+(E>=s?4:s-E),R=1),M||(l=u(v)),R)for(d=0;d<a.length;d++)a[d](L,f,I,b)};return h={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(b){return f/(1e3/(b||60))},wake:function(){fZ&&(!AI&&SO()&&(Vc=AI=window,MO=Vc.document||{},jl.gsap=nl,(Vc.gsapVersions||(Vc.gsapVersions=[])).push(nl.version),dZ(mE||Vc.GreenSockGlobals||!Vc.gsap&&Vc||{}),BZ.forEach(IZ)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),u=c||function(b){return setTimeout(b,o-h.time*1e3+1|0)},vx=1,p(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(l),vx=0,u=gx},lagSmoothing:function(b,_){e=b||1/0,t=Math.min(_||33,e)},fps:function(b){s=1e3/(b||240),o=h.time*1e3+s},add:function(b,_,M){var E=_?function(R,L,I,D){b(R,L,I,D),h.remove(E)}:b;return h.remove(b),a[M?"unshift":"push"](E),Sy(),E},remove:function(b,_){~(_=a.indexOf(b))&&a.splice(_,1)&&d>=_&&d--},_listeners:a},h}(),Sy=function(){return!vx&&Nl.wake()},di={},M3e=/^[\d.\-M][\d.\-,\s]/,T3e=/["']/g,E3e=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,o=n.length,a,l,u;s<o;s++)l=n[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),t[r]=isNaN(u)?u.replace(T3e,"").trim():+u,r=l.substr(a+1).trim();return t},C3e=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},R3e=function(e){var t=(e+"").split("("),n=di[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[E3e(t[1])]:C3e(e).split(",").map(yZ)):di._CE&&M3e.test(e)?di._CE("",e):n},OZ=function(e){return function(t){return 1-e(1-t)}},FZ=function i(e,t){for(var n=e._first,r;n;)n instanceof Aa?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},C0=function(e,t){return e&&(Gr(e)?e:di[e]||R3e(e))||t},mm=function(e,t,n,r){n===void 0&&(n=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:r},o;return Ja(e,function(a){di[a]=jl[a]=s,di[o=a.toLowerCase()]=n;for(var l in s)di[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=di[a+"."+l]=s[l]}),s},kZ=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},H8=function i(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),o=s/dI*(Math.asin(1/r)||0),a=function(c){return c===1?1:r*Math.pow(2,-10*c)*i3e((c-o)*s)+1},l=e==="out"?a:e==="in"?function(u){return 1-a(1-u)}:kZ(a);return s=dI/s,l.config=function(u,c){return i(e,u,c)},l},q8=function i(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:kZ(n);return r.config=function(s){return i(e,s)},r};Ja("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;mm(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});di.Linear.easeNone=di.none=di.Linear.easeIn;mm("Elastic",H8("in"),H8("out"),H8());(function(i,e){var t=1/e,n=2*t,r=2.5*t,s=function(a){return a<t?i*a*a:a<n?i*Math.pow(a-1.5/e,2)+.75:a<r?i*(a-=2.25/e)*a+.9375:i*Math.pow(a-2.625/e,2)+.984375};mm("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);mm("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});mm("Circ",function(i){return-(aZ(1-i*i)-1)});mm("Sine",function(i){return i===1?1:-n3e(i*e3e)+1});mm("Back",q8("in"),q8("out"),q8());di.SteppedEase=di.steps=jl.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0,o=1-Ji;return function(a){return((r*xb(0,o,a)|0)+s)*n}}};xy.ease=di["quad.out"];Ja("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return CO+=i+","+i+"Params,"});var UZ=function(e,t){this.id=t3e++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:mZ,this.set=t?t.getSetter:NO},_x=function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,wy(this,+t.duration,1,1),this.data=t.data,dr&&(this._ctx=dr,dr.data.push(this)),vx||Nl.wake()}var e=i.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,wy(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(Sy(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(F4(this,n),!s._dp||s.parent||xZ(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Yc(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Ji||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),gZ(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+XG(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+XG(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?by(this._tTime,s)+1:1},e.timeScale=function(n,r){if(!arguments.length)return this._rts===-Ji?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?vE(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Ji?0:this._rts,this.totalTime(xb(-Math.abs(this._delay),this._tDur,s),r!==!1),O4(this),c3e(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Sy(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ji&&(this._tTime-=Ji)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Yc(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Ka(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?vE(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=o3e);var r=zo;return zo=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),zo=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,YG(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,YG(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(mu(this,n),Ka(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,Ka(r))},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Ji:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ji,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-Ji)},e.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},e.then=function(n){var r=this;return new Promise(function(s){var o=Gr(n)?n:vZ,a=function(){var u=r.then;r.then=null,Gr(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=u),s(o),r.then=u};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){j2(this)},i}();Lu(_x.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ji,_prom:0,_ps:!1,_rts:1});var Aa=function(i){oZ(e,i);function e(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Ka(n.sortChildren),xr&&Yc(n.parent||xr,Zh(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&bZ(Zh(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return S_(0,arguments,this),this},t.from=function(r,s,o){return S_(1,arguments,this),this},t.fromTo=function(r,s,o,a){return S_(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,w_(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new as(r,s,mu(this,o),1),this},t.call=function(r,s,o){return Yc(this,as.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,u,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=c,o.parent=this,new as(r,o,mu(this,l)),this},t.staggerFrom=function(r,s,o,a,l,u,c){return o.runBackwards=1,w_(o).immediateRender=Ka(o.immediateRender),this.staggerTo(r,s,o,a,l,u,c)},t.staggerFromTo=function(r,s,o,a,l,u,c,h){return a.startAt=o,w_(a).immediateRender=Ka(a.immediateRender),this.staggerTo(r,s,a,l,u,c,h)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,c=r<=0?0:Hs(r),h=this._zTime<0!=r<0&&(this._initted||!u),f,d,p,v,b,_,M,E,R,L,I,D;if(this!==xr&&c>l&&r>=0&&(c=l),c!==this._tTime||o||h){if(a!==this._time&&u&&(c+=this._time-a,r+=this._time-a),f=c,R=this._start,E=this._ts,_=!E,h&&(u||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(I=this._yoyo,b=u+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(b*100+r,s,o);if(f=Hs(c%b),c===l?(v=this._repeat,f=u):(v=~~(c/b),v&&v===c/b&&(f=u,v--),f>u&&(f=u)),L=by(this._tTime,b),!a&&this._tTime&&L!==v&&this._tTime-L*b-this._dur<=0&&(L=v),I&&v&1&&(f=u-f,D=1),v!==L&&!this._lock){var k=I&&L&1,G=k===(I&&v&1);if(v<L&&(k=!k),a=k?0:c%u?u:c,this._lock=1,this.render(a||(D?0:Hs(v*b)),s,!u)._lock=0,this._tTime=c,!s&&this.parent&&Fl(this,"onRepeat"),this.vars.repeatRefresh&&!D&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,G&&(this._lock=2,a=k?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!D&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;FZ(this,D)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(M=p3e(this,Hs(a),Hs(f)),M&&(c-=f-(f=M._start))),this._tTime=c,this._time=f,this._act=!E,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&f&&!s&&!v&&(Fl(this,"onStart"),this._tTime!==c))return this;if(f>=a&&r>=0)for(d=this._first;d;){if(p=d._next,(d._act||f>=d._start)&&d._ts&&M!==d){if(d.parent!==this)return this.render(r,s,o);if(d.render(d._ts>0?(f-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(f-d._start)*d._ts,s,o),f!==this._time||!this._ts&&!_){M=0,p&&(c+=this._zTime=-Ji);break}}d=p}else{d=this._last;for(var O=r<0?r:f;d;){if(p=d._prev,(d._act||O<=d._end)&&d._ts&&M!==d){if(d.parent!==this)return this.render(r,s,o);if(d.render(d._ts>0?(O-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(O-d._start)*d._ts,s,o||zo&&(d._initted||d._startAt)),f!==this._time||!this._ts&&!_){M=0,p&&(c+=this._zTime=O?-Ji:Ji);break}}d=p}}if(M&&!s&&(this.pause(),M.render(f>=a?0:-Ji)._zTime=f>=a?1:-1,this._ts))return this._start=R,O4(this),this.render(r,s,o);this._onUpdate&&!s&&Fl(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(R===this._start||Math.abs(E)!==Math.abs(this._ts))&&(this._lock||((r||!u)&&(c===l&&this._ts>0||!c&&this._ts<0)&&Ip(this,1),!s&&!(r<0&&!a)&&(c||a||!l)&&(Fl(this,c===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(zf(s)||(s=mu(this,s,r)),!(r instanceof _x)){if(Go(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Ws(r))return this.addLabel(r,s);if(Gr(r))r=as.delayedCall(0,r);else return this}return this!==r?Yc(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Eu);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof as?s&&l.push(u):(o&&l.push(u),r&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return Ws(r)?this.removeLabel(r):Gr(r)?this.killTweensOf(r):(L4(this,r),r===this._recent&&(this._recent=this._last),E0(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Hs(Nl.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=mu(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=as.delayedCall(0,s||gx,o);return a.data="isPause",this._hasPause=1,Yc(this,a,mu(this,r))},t.removePause=function(r){var s=this._first;for(r=mu(this,r);s;)s._start===r&&s.data==="isPause"&&Ip(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)ap!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=Cu(r),l=this._first,u=zf(s),c;l;)l instanceof as?a3e(l._targets,a)&&(u?(!ap||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(c=l.getTweensOf(a,s)).length&&o.push.apply(o,c),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=mu(o,r),l=s,u=l.startAt,c=l.onStart,h=l.onStartParams,f=l.immediateRender,d,p=as.to(o,Lu({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||Ji,onStart:function(){if(o.pause(),!d){var b=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());p._dur!==b&&wy(p,b,0,1).render(p._time,!0,!0),d=1}c&&c.apply(p,h||[])}},s));return f?p.render(0):p},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,Lu({startAt:{time:mu(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),QG(this,mu(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),QG(this,mu(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Ji)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=r);return E0(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),E0(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=Eu,u,c,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(h=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Yc(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(s-=c,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;wy(o,o===xr&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(xr._ts&&(gZ(xr,vE(r,xr)),AZ=Nl.frame),Nl.frame>=$G){$G+=Gl.autoSleep||120;var s=xr._first;if((!s||!s._ts)&&Gl.autoSleep&&Nl._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Nl.sleep()}}},e}(_x);Lu(Aa.prototype,{_lock:0,_hasPause:0,_forcing:0});var P3e=function(e,t,n,r,s,o,a){var l=new Za(this._pt,e,t,0,1,jZ,null,s),u=0,c=0,h,f,d,p,v,b,_,M;for(l.b=n,l.e=r,n+="",r+="",(_=~r.indexOf("random("))&&(r=yx(r)),o&&(M=[n,r],o(M,e,t),n=M[0],r=M[1]),f=n.match(U8)||[];h=U8.exec(r);)p=h[0],v=r.substring(u,h.index),d?d=(d+1)%5:v.substr(-5)==="rgba("&&(d=1),p!==f[c++]&&(b=parseFloat(f[c-1])||0,l._pt={_next:l._pt,p:v||c===1?v:",",s:b,c:p.charAt(1)==="="?G1(b,p)-b:parseFloat(p)-b,m:d&&d<4?Math.round:0},u=U8.lastIndex);return l.c=u<r.length?r.substring(u,r.length):"",l.fp=a,(cZ.test(r)||_)&&(l.e=0),this._pt=l,l},PO=function(e,t,n,r,s,o,a,l,u,c){Gr(r)&&(r=r(s||0,e,o));var h=e[t],f=n!=="get"?n:Gr(h)?u?e[t.indexOf("set")||!Gr(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():h,d=Gr(h)?u?L3e:qZ:IO,p;if(Ws(r)&&(~r.indexOf("random(")&&(r=yx(r)),r.charAt(1)==="="&&(p=G1(f,r)+(Lo(f)||0),(p||p===0)&&(r=p))),!c||f!==r||bI)return!isNaN(f*r)&&r!==""?(p=new Za(this._pt,e,t,+f||0,r-(f||0),typeof h=="boolean"?F3e:VZ,0,d),u&&(p.fp=u),a&&p.modifier(a,this,e),this._pt=p):(!h&&!(t in e)&&TO(t,r),P3e.call(this,e,t,f,r,d,l||Gl.stringFilter,u))},B3e=function(e,t,n,r,s){if(Gr(e)&&(e=M_(e,s,t,n,r)),!mh(e)||e.style&&e.nodeType||Go(e)||lZ(e))return Ws(e)?M_(e,s,t,n,r):e;var o={},a;for(a in e)o[a]=M_(e[a],s,t,n,r);return o},zZ=function(e,t,n,r,s,o){var a,l,u,c;if(Rl[e]&&(a=new Rl[e]).init(s,a.rawVars?t[e]:B3e(t[e],r,s,o,n),n,r,o)!==!1&&(n._pt=l=new Za(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==p1))for(u=n._ptLookup[n._targets.indexOf(s)],c=a._props.length;c--;)u[a._props[c]]=l;return a},ap,bI,BO=function i(e,t,n){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,u=r.onUpdate,c=r.runBackwards,h=r.yoyoEase,f=r.keyframes,d=r.autoRevert,p=e._dur,v=e._startAt,b=e._targets,_=e.parent,M=_&&_.data==="nested"?_.vars.targets:b,E=e._overwrite==="auto"&&!bO,R=e.timeline,L,I,D,k,G,O,U,Q,X,ee,K,Z,he;if(R&&(!f||!s)&&(s="none"),e._ease=C0(s,xy.ease),e._yEase=h?OZ(C0(h===!0?s:h,xy.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!R&&!!r.runBackwards,!R||f&&!r.stagger){if(Q=b[0]?T0(b[0]).harness:0,Z=Q&&r[Q.prop],L=yE(r,EO),v&&(v._zTime<0&&v.progress(1),t<0&&c&&a&&!d?v.render(-1,!0):v.revert(c&&p?CM:s3e),v._lazy=0),o){if(Ip(e._startAt=as.set(b,Lu({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!v&&Ka(l),startAt:null,delay:0,onUpdate:u&&function(){return Fl(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(zo||!a&&!d)&&e._startAt.revert(CM),a&&p&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(c&&p&&!v){if(t&&(a=!1),D=Lu({overwrite:!1,data:"isFromStart",lazy:a&&!v&&Ka(l),immediateRender:a,stagger:0,parent:_},L),Z&&(D[Q.prop]=Z),Ip(e._startAt=as.set(b,D)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(zo?e._startAt.revert(CM):e._startAt.render(-1,!0)),e._zTime=t,!a)i(e._startAt,Ji,Ji);else if(!t)return}for(e._pt=e._ptCache=0,l=p&&Ka(l)||l&&!p,I=0;I<b.length;I++){if(G=b[I],U=G._gsap||RO(b)[I]._gsap,e._ptLookup[I]=ee={},mI[U.id]&&yp.length&&gE(),K=M===b?I:M.indexOf(G),Q&&(X=new Q).init(G,Z||L,e,K,M)!==!1&&(e._pt=k=new Za(e._pt,G,X.name,0,1,X.render,X,0,X.priority),X._props.forEach(function(j){ee[j]=k}),X.priority&&(O=1)),!Q||Z)for(D in L)Rl[D]&&(X=zZ(D,L,e,K,G,M))?X.priority&&(O=1):ee[D]=k=PO.call(e,G,D,"get",L[D],K,M,0,r.stringFilter);e._op&&e._op[I]&&e.kill(G,e._op[I]),E&&e._pt&&(ap=e,xr.killTweensOf(G,ee,e.globalTime(t)),he=!e.parent,ap=0),e._pt&&l&&(mI[U.id]=1)}O&&$Z(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!he,f&&t<=0&&R.render(Eu,!0,!0)},I3e=function(e,t,n,r,s,o,a,l){var u=(e._pt&&e._ptCache||(e._ptCache={}))[t],c,h,f,d;if(!u)for(u=e._ptCache[t]=[],f=e._ptLookup,d=e._targets.length;d--;){if(c=f[d][t],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return bI=1,e.vars[t]="+=0",BO(e,a),bI=0,l?mx(t+" not eligible for reset"):1;u.push(c)}for(d=u.length;d--;)h=u[d],c=h._pt||h,c.s=(r||r===0)&&!s?r:c.s+(r||0)+o*c.c,c.c=n-c.s,h.e&&(h.e=Qr(n)+Lo(h.e)),h.b&&(h.b=c.s+Lo(h.b))},N3e=function(e,t){var n=e[0]?T0(e[0]).harness:0,r=n&&n.aliases,s,o,a,l;if(!r)return t;s=Y0({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},D3e=function(e,t,n,r){var s=t.ease||r||"power1.inOut",o,a;if(Go(t))a=n[e]||(n[e]=[]),t.forEach(function(l,u){return a.push({t:u/(t.length-1)*100,v:l,e:s})});else for(o in t)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},M_=function(e,t,n,r,s){return Gr(e)?e.call(t,n,r,s):Ws(e)&&~e.indexOf("random(")?yx(e):e},GZ=CO+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",HZ={};Ja(GZ+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return HZ[i]=1});var as=function(i){oZ(e,i);function e(n,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=i.call(this,o?r:w_(r))||this;var l=a.vars,u=l.duration,c=l.delay,h=l.immediateRender,f=l.stagger,d=l.overwrite,p=l.keyframes,v=l.defaults,b=l.scrollTrigger,_=l.yoyoEase,M=r.parent||xr,E=(Go(n)||lZ(n)?zf(n[0]):"length"in r)?[n]:Cu(n),R,L,I,D,k,G,O,U;if(a._targets=E.length?RO(E):mx("GSAP target "+n+" not found. https://gsap.com",!Gl.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,p||f||n3(u)||n3(c)){if(r=a.vars,R=a.timeline=new Aa({data:"nested",defaults:v||{},targets:M&&M.data==="nested"?M.vars.targets:E}),R.kill(),R.parent=R._dp=Zh(a),R._start=0,f||n3(u)||n3(c)){if(D=E.length,O=f&&TZ(f),mh(f))for(k in f)~GZ.indexOf(k)&&(U||(U={}),U[k]=f[k]);for(L=0;L<D;L++)I=yE(r,HZ),I.stagger=0,_&&(I.yoyoEase=_),U&&Y0(I,U),G=E[L],I.duration=+M_(u,Zh(a),L,G,E),I.delay=(+M_(c,Zh(a),L,G,E)||0)-a._delay,!f&&D===1&&I.delay&&(a._delay=c=I.delay,a._start+=c,I.delay=0),R.to(G,I,O?O(L,G,E):0),R._ease=di.none;R.duration()?u=c=0:a.timeline=0}else if(p){w_(Lu(R.vars.defaults,{ease:"none"})),R._ease=C0(p.ease||r.ease||"none");var Q=0,X,ee,K;if(Go(p))p.forEach(function(Z){return R.to(E,Z,">")}),R.duration();else{I={};for(k in p)k==="ease"||k==="easeEach"||D3e(k,p[k],I,p.easeEach);for(k in I)for(X=I[k].sort(function(Z,he){return Z.t-he.t}),Q=0,L=0;L<X.length;L++)ee=X[L],K={ease:ee.e,duration:(ee.t-(L?X[L-1].t:0))/100*u},K[k]=ee.v,R.to(E,K,Q),Q+=K.duration;R.duration()<u&&R.to({},{duration:u-R.duration()})}}u||a.duration(u=R.duration())}else a.timeline=0;return d===!0&&!bO&&(ap=Zh(a),xr.killTweensOf(E),ap=0),Yc(M,Zh(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(h||!u&&!p&&a._start===Hs(M._time)&&Ka(h)&&h3e(Zh(a))&&M.data!=="nested")&&(a._tTime=-Ji,a.render(Math.max(0,-c)||0)),b&&bZ(Zh(a),b),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,u=this._dur,c=r<0,h=r>l-Ji&&!c?l:r<Ji?0:r,f,d,p,v,b,_,M,E,R;if(!u)d3e(this,r,s,o);else if(h!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(f=h,E=this.timeline,this._repeat){if(v=u+this._rDelay,this._repeat<-1&&c)return this.totalTime(v*100+r,s,o);if(f=Hs(h%v),h===l?(p=this._repeat,f=u):(p=~~(h/v),p&&p===Hs(h/v)&&(f=u,p--),f>u&&(f=u)),_=this._yoyo&&p&1,_&&(R=this._yEase,f=u-f),b=by(this._tTime,v),f===a&&!o&&this._initted&&p===b)return this._tTime=h,this;p!==b&&(E&&this._yEase&&FZ(E,_),this.vars.repeatRefresh&&!_&&!this._lock&&this._time!==v&&this._initted&&(this._lock=o=1,this.render(Hs(v*p),!0).invalidate()._lock=0))}if(!this._initted){if(wZ(this,c?r:f,o,s,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&p!==b))return this;if(u!==this._dur)return this.render(r,s,o)}if(this._tTime=h,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=M=(R||this._ease)(f/u),this._from&&(this.ratio=M=1-M),f&&!a&&!s&&!p&&(Fl(this,"onStart"),this._tTime!==h))return this;for(d=this._pt;d;)d.r(M,d.d),d=d._next;E&&E.render(r<0?r:E._dur*E._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(c&&gI(this,r,s,o),Fl(this,"onUpdate")),this._repeat&&p!==b&&this.vars.onRepeat&&!s&&this.parent&&Fl(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(c&&!this._onUpdate&&gI(this,r,!0,!0),(r||!u)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Ip(this,1),!s&&!(c&&!a)&&(h||a||_)&&(Fl(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){vx||Nl.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||BO(this,u),c=this._ease(u/this._dur),I3e(this,r,s,o,a,c,u,l)?this.resetTo(r,s,o,a,1):(F4(this,0),this.parent||_Z(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?j2(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,ap&&ap.vars.overwrite!==!0)._first||j2(this),this.parent&&o!==this.timeline.totalDuration()&&wy(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?Cu(r):a,u=this._ptLookup,c=this._pt,h,f,d,p,v,b,_;if((!s||s==="all")&&u3e(a,l))return s==="all"&&(this._pt=0),j2(this);for(h=this._op=this._op||[],s!=="all"&&(Ws(s)&&(v={},Ja(s,function(M){return v[M]=1}),s=v),s=N3e(a,s)),_=a.length;_--;)if(~l.indexOf(a[_])){f=u[_],s==="all"?(h[_]=s,p=f,d={}):(d=h[_]=h[_]||{},p=s);for(v in p)b=f&&f[v],b&&((!("kill"in b.d)||b.d.kill(v)===!0)&&L4(this,b,"_pt"),delete f[v]),d!=="all"&&(d[v]=1)}return this._initted&&!this._pt&&c&&j2(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return S_(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return S_(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return xr.killTweensOf(r,s,o)},e}(_x);Lu(as.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ja("staggerTo,staggerFrom,staggerFromTo",function(i){as[i]=function(){var e=new Aa,t=vI.call(arguments,0);return t.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,t)}});var IO=function(e,t,n){return e[t]=n},qZ=function(e,t,n){return e[t](n)},L3e=function(e,t,n,r){return e[t](r.fp,n)},O3e=function(e,t,n){return e.setAttribute(t,n)},NO=function(e,t){return Gr(e[t])?qZ:wO(e[t])&&e.setAttribute?O3e:IO},VZ=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},F3e=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},jZ=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},DO=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},k3e=function(e,t,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,n),s=o},U3e=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?L4(this,t,"_pt"):t.dep||(n=1),t=r;return!n},z3e=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},$Z=function(e){for(var t=e._pt,n,r,s,o;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=n}e._pt=s},Za=function(){function i(t,n,r,s,o,a,l,u,c){this.t=n,this.s=s,this.c=o,this.p=r,this.r=a||VZ,this.d=l||this,this.set=u||IO,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=i.prototype;return e.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=z3e,this.m=n,this.mt=s,this.tween=r},i}();Ja(CO+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return EO[i]=1});jl.TweenMax=jl.TweenLite=as;jl.TimelineLite=jl.TimelineMax=Aa;xr=new Aa({sortChildren:!1,defaults:xy,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Gl.stringFilter=LZ;var R0=[],PM={},G3e=[],JG=0,H3e=0,V8=function(e){return(PM[e]||G3e).map(function(t){return t()})},wI=function(){var e=Date.now(),t=[];e-JG>2&&(V8("matchMediaInit"),R0.forEach(function(n){var r=n.queries,s=n.conditions,o,a,l,u;for(a in r)o=Vc.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(n.revert(),l&&t.push(n))}),V8("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),JG=e,V8("matchMedia"))},WZ=function(){function i(t,n){this.selector=n&&_I(n),this.data=[],this._r=[],this.isReverted=!1,this.id=H3e++,t&&this.add(t)}var e=i.prototype;return e.add=function(n,r,s){Gr(n)&&(s=r,r=n,n=Gr);var o=this,a=function(){var u=dr,c=o.selector,h;return u&&u!==o&&u.data.push(o),s&&(o.selector=_I(s)),dr=o,h=r.apply(o,arguments),Gr(h)&&o._r.push(h),dr=u,o.selector=c,o.isReverted=!1,h};return o.last=a,n===Gr?a(o,function(l){return o.add(null,l)}):n?o[n]=a:a},e.ignore=function(n){var r=dr;dr=null,n(this),dr=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof as&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n?function(){for(var a=s.getTweens(),l=s.data.length,u;l--;)u=s.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(c){return a.splice(a.indexOf(c),1)}));for(a.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,h){return h.g-c.g||-1/0}).forEach(function(c){return c.t.revert(n)}),l=s.data.length;l--;)u=s.data[l],u instanceof Aa?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof as)&&u.revert&&u.revert(n);s._r.forEach(function(c){return c(n,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=R0.length;o--;)R0[o].id===this.id&&R0.splice(o,1)},e.revert=function(n){this.kill(n||{})},i}(),q3e=function(){function i(t){this.contexts=[],this.scope=t,dr&&dr.data.push(this)}var e=i.prototype;return e.add=function(n,r,s){mh(n)||(n={matches:n});var o=new WZ(0,s||this.scope),a=o.conditions={},l,u,c;dr&&!o.selector&&(o.selector=dr.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(u in n)u==="all"?c=1:(l=Vc.matchMedia(n[u]),l&&(R0.indexOf(o)<0&&R0.push(o),(a[u]=l.matches)&&(c=1),l.addListener?l.addListener(wI):l.addEventListener("change",wI)));return c&&r(o,function(h){return o.add(null,h)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),_E={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return IZ(r)})},timeline:function(e){return new Aa(e)},getTweensOf:function(e,t){return xr.getTweensOf(e,t)},getProperty:function(e,t,n,r){Ws(e)&&(e=Cu(e)[0]);var s=T0(e||{}).get,o=n?vZ:yZ;return n==="native"&&(n=""),e&&(t?o((Rl[t]&&Rl[t].get||s)(e,t,n,r)):function(a,l,u){return o((Rl[a]&&Rl[a].get||s)(e,a,l,u))})},quickSetter:function(e,t,n){if(e=Cu(e),e.length>1){var r=e.map(function(c){return nl.quickSetter(c,t,n)}),s=r.length;return function(c){for(var h=s;h--;)r[h](c)}}e=e[0]||{};var o=Rl[t],a=T0(e),l=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(c){var h=new o;p1._pt=0,h.init(e,n?c+n:c,p1,0,[e]),h.render(1,h),p1._pt&&DO(1,p1)}:a.set(e,l);return o?u:function(c){return u(e,l,n?c+n:c,a,1)}},quickTo:function(e,t,n){var r,s=nl.to(e,Y0((r={},r[t]="+=0.1",r.paused=!0,r),n||{})),o=function(l,u,c){return s.resetTo(t,l,u,c)};return o.tween=s,o},isTweening:function(e){return xr.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=C0(e.ease,xy.ease)),WG(xy,e||{})},config:function(e){return WG(Gl,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Rl[a]&&!jl[a]&&mx(t+" effect requires "+a+" plugin.")}),z8[t]=function(a,l,u){return n(Cu(a),Lu(l||{},s),u)},o&&(Aa.prototype[t]=function(a,l,u){return this.add(z8[t](a,mh(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){di[e]=C0(t)},parseEase:function(e,t){return arguments.length?C0(e,t):di},getById:function(e){return xr.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new Aa(e),r,s;for(n.smoothChildTiming=Ka(e.smoothChildTiming),xr.remove(n),n._dp=0,n._time=n._tTime=xr._time,r=xr._first;r;)s=r._next,(t||!(!r._dur&&r instanceof as&&r.vars.onComplete===r._targets[0]))&&Yc(n,r,r._start-r._delay),r=s;return Yc(xr,n,0),n},context:function(e,t){return e?new WZ(e,t):dr},matchMedia:function(e){return new q3e(e)},matchMediaRefresh:function(){return R0.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||wI()},addEventListener:function(e,t){var n=PM[e]||(PM[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=PM[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:x3e,wrapYoyo:b3e,distribute:TZ,random:CZ,snap:EZ,normalize:_3e,getUnit:Lo,clamp:m3e,splitColor:NZ,toArray:Cu,selector:_I,mapRange:PZ,pipe:y3e,unitize:v3e,interpolate:w3e,shuffle:MZ},install:dZ,effects:z8,ticker:Nl,updateRoot:Aa.updateRoot,plugins:Rl,globalTimeline:xr,core:{PropTween:Za,globals:pZ,Tween:as,Timeline:Aa,Animation:_x,getCache:T0,_removeLinkedListItem:L4,reverting:function(){return zo},context:function(e){return e&&dr&&(dr.data.push(e),e._ctx=dr),dr},suppressOverwrites:function(e){return bO=e}}};Ja("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return _E[i]=as[i]});Nl.add(Aa.updateRoot);p1=_E.to({},{duration:0});var V3e=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},j3e=function(e,t){var n=e._targets,r,s,o;for(r in t)for(s=n.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=V3e(o,r)),o&&o.modifier&&o.modifier(t[r],e,n[s],r))},j8=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,u;if(Ws(s)&&(l={},Ja(s,function(c){return l[c]=1}),s=l),t){l={};for(u in s)l[u]=t(s[u]);s=l}j3e(a,s)}}}},nl=_E.registerPlugin({name:"attr",init:function(e,t,n,r,s){var o,a,l;this.tween=n;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)zo?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},j8("roundProps",xI),j8("modifiers"),j8("snap",EZ))||_E;as.version=Aa.version=nl.version="3.12.5";fZ=1;SO()&&Sy();di.Power0;di.Power1;di.Power2;di.Power3;di.Power4;di.Linear;di.Quad;di.Cubic;di.Quart;di.Quint;di.Strong;di.Elastic;di.Back;di.SteppedEase;di.Bounce;di.Sine;di.Expo;di.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ZG,lp,H1,LO,A0,eH,OO,$3e=function(){return typeof window<"u"},Gf={},YA=180/Math.PI,q1=Math.PI/180,yg=Math.atan2,tH=1e8,FO=/([A-Z])/g,W3e=/(left|right|width|margin|padding|x)/i,X3e=/[\s,\(]\S/,Jc={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},SI=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Y3e=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Q3e=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},K3e=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},XZ=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},YZ=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},J3e=function(e,t,n){return e.style[t]=n},Z3e=function(e,t,n){return e.style.setProperty(t,n)},eMe=function(e,t,n){return e._gsap[t]=n},tMe=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},nMe=function(e,t,n,r,s){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},iMe=function(e,t,n,r,s){var o=e._gsap;o[t]=n,o.renderTransform(s,o)},Mr="transform",el=Mr+"Origin",rMe=function i(e,t){var n=this,r=this.target,s=r.style,o=r._gsap;if(e in Gf&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Jc[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=rf(r,a)}):this.tfm[e]=o.x?o[e]:rf(r,e),e===el&&(this.tfm.zOrigin=o.zOrigin);else return Jc.transform.split(",").forEach(function(a){return i.call(n,a,t)});if(this.props.indexOf(Mr)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(el,t,"")),e=Mr}(s||t)&&this.props.push(e,t,s[e])},QZ=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},sMe=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(FO,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=OO(),(!s||!s.isStart)&&!n[Mr]&&(QZ(n),r.zOrigin&&n[el]&&(n[el]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},KZ=function(e,t){var n={target:e,props:[],revert:sMe,save:rMe};return e._gsap||nl.core.getCache(e),t&&t.split(",").forEach(function(r){return n.save(r)}),n},JZ,MI=function(e,t){var n=lp.createElementNS?lp.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):lp.createElement(e);return n&&n.style?n:lp.createElement(e)},ah=function i(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(FO,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&i(e,My(t)||t,1)||""},nH="O,Moz,ms,Ms,Webkit".split(","),My=function(e,t,n){var r=t||A0,s=r.style,o=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(nH[o]+e in s););return o<0?null:(o===3?"ms":o>=0?nH[o]:"")+e},TI=function(){$3e()&&window.document&&(ZG=window,lp=ZG.document,H1=lp.documentElement,A0=MI("div")||{style:{}},MI("div"),Mr=My(Mr),el=Mr+"Origin",A0.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",JZ=!!My("perspective"),OO=nl.core.reverting,LO=1)},$8=function i(e){var t=MI("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(H1.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),H1.removeChild(t),this.style.cssText=s,o},iH=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},ZZ=function(e){var t;try{t=e.getBBox()}catch{t=$8.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===$8||(t=$8.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+iH(e,["x","cx","x1"])||0,y:+iH(e,["y","cy","y1"])||0,width:0,height:0}:t},eee=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&ZZ(e))},Q0=function(e,t){if(t){var n=e.style,r;t in Gf&&t!==el&&(t=Mr),n.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(r==="--"?t:t.replace(FO,"-$1").toLowerCase())):n.removeAttribute(t)}},up=function(e,t,n,r,s,o){var a=new Za(e._pt,t,n,0,1,o?YZ:XZ);return e._pt=a,a.b=r,a.e=s,e._props.push(n),a},rH={deg:1,rad:1,turn:1},oMe={grid:1,flex:1},Np=function i(e,t,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",a=A0.style,l=W3e.test(t),u=e.tagName.toLowerCase()==="svg",c=(u?"client":"offset")+(l?"Width":"Height"),h=100,f=r==="px",d=r==="%",p,v,b,_;if(r===o||!s||rH[r]||rH[o])return s;if(o!=="px"&&!f&&(s=i(e,t,n,"px")),_=e.getCTM&&eee(e),(d||o==="%")&&(Gf[t]||~t.indexOf("adius")))return p=_?e.getBBox()[l?"width":"height"]:e[c],Qr(d?s/p*h:s/100*p);if(a[l?"width":"height"]=h+(f?o:r),v=~t.indexOf("adius")||r==="em"&&e.appendChild&&!u?e:e.parentNode,_&&(v=(e.ownerSVGElement||{}).parentNode),(!v||v===lp||!v.appendChild)&&(v=lp.body),b=v._gsap,b&&d&&b.width&&l&&b.time===Nl.time&&!b.uncache)return Qr(s/b.width*h);if(d&&(t==="height"||t==="width")){var M=e.style[t];e.style[t]=h+r,p=e[c],M?e.style[t]=M:Q0(e,t)}else(d||o==="%")&&!oMe[ah(v,"display")]&&(a.position=ah(e,"position")),v===e&&(a.position="static"),v.appendChild(A0),p=A0[c],v.removeChild(A0),a.position="absolute";return l&&d&&(b=T0(v),b.time=Nl.time,b.width=v[c]),Qr(f?p*s/h:p&&s?h/p*s:0)},rf=function(e,t,n,r){var s;return LO||TI(),t in Jc&&t!=="transform"&&(t=Jc[t],~t.indexOf(",")&&(t=t.split(",")[0])),Gf[t]&&t!=="transform"?(s=bx(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:bE(ah(e,el))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=xE[t]&&xE[t](e,t,n)||ah(e,t)||mZ(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?Np(e,t,s,n)+n:s},aMe=function(e,t,n,r){if(!n||n==="none"){var s=My(t,e,1),o=s&&ah(e,s,1);o&&o!==n?(t=s,n=o):t==="borderColor"&&(n=ah(e,"borderTopColor"))}var a=new Za(this._pt,e.style,t,0,1,jZ),l=0,u=0,c,h,f,d,p,v,b,_,M,E,R,L;if(a.b=n,a.e=r,n+="",r+="",r==="auto"&&(v=e.style[t],e.style[t]=r,r=ah(e,t)||r,v?e.style[t]=v:Q0(e,t)),c=[n,r],LZ(c),n=c[0],r=c[1],f=n.match(d1)||[],L=r.match(d1)||[],L.length){for(;h=d1.exec(r);)b=h[0],M=r.substring(l,h.index),p?p=(p+1)%5:(M.substr(-5)==="rgba("||M.substr(-5)==="hsla(")&&(p=1),b!==(v=f[u++]||"")&&(d=parseFloat(v)||0,R=v.substr((d+"").length),b.charAt(1)==="="&&(b=G1(d,b)+R),_=parseFloat(b),E=b.substr((_+"").length),l=d1.lastIndex-E.length,E||(E=E||Gl.units[t]||R,l===r.length&&(r+=E,a.e+=E)),R!==E&&(d=Np(e,t,v,E)||0),a._pt={_next:a._pt,p:M||u===1?M:",",s:d,c:_-d,m:p&&p<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?YZ:XZ;return cZ.test(r)&&(a.e=0),this._pt=a,a},sH={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},lMe=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=sH[n]||n,t[1]=sH[r]||r,t.join(" ")},uMe=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,s=t.u,o=n._gsap,a,l,u;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],Gf[a]&&(l=1,a=a==="transformOrigin"?el:Mr),Q0(n,a);l&&(Q0(n,Mr),o&&(o.svg&&n.removeAttribute("transform"),bx(n,1),o.uncache=1,QZ(r)))}},xE={clearProps:function(e,t,n,r,s){if(s.data!=="isFromStart"){var o=e._pt=new Za(e._pt,t,n,0,0,uMe);return o.u=r,o.pr=-10,o.tween=s,e._props.push(n),1}}},xx=[1,0,0,1,0,0],tee={},nee=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},oH=function(e){var t=ah(e,Mr);return nee(t)?xx:t.substr(7).match(uZ).map(Qr)},kO=function(e,t){var n=e._gsap||T0(e),r=e.style,s=oH(e),o,a,l,u;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?xx:s):(s===xx&&!e.offsetParent&&e!==H1&&!n.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(u=1,a=e.nextElementSibling,H1.appendChild(e)),s=oH(e),l?r.display=l:Q0(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):H1.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},EI=function(e,t,n,r,s,o){var a=e._gsap,l=s||kO(e,!0),u=a.xOrigin||0,c=a.yOrigin||0,h=a.xOffset||0,f=a.yOffset||0,d=l[0],p=l[1],v=l[2],b=l[3],_=l[4],M=l[5],E=t.split(" "),R=parseFloat(E[0])||0,L=parseFloat(E[1])||0,I,D,k,G;n?l!==xx&&(D=d*b-p*v)&&(k=R*(b/D)+L*(-v/D)+(v*M-b*_)/D,G=R*(-p/D)+L*(d/D)-(d*M-p*_)/D,R=k,L=G):(I=ZZ(e),R=I.x+(~E[0].indexOf("%")?R/100*I.width:R),L=I.y+(~(E[1]||E[0]).indexOf("%")?L/100*I.height:L)),r||r!==!1&&a.smooth?(_=R-u,M=L-c,a.xOffset=h+(_*d+M*v)-_,a.yOffset=f+(_*p+M*b)-M):a.xOffset=a.yOffset=0,a.xOrigin=R,a.yOrigin=L,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!n,e.style[el]="0px 0px",o&&(up(o,a,"xOrigin",u,R),up(o,a,"yOrigin",c,L),up(o,a,"xOffset",h,a.xOffset),up(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",R+" "+L)},bx=function(e,t){var n=e._gsap||new UZ(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,s=n.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=ah(e,el)||"0",c,h,f,d,p,v,b,_,M,E,R,L,I,D,k,G,O,U,Q,X,ee,K,Z,he,j,ie,ae,pe,Pe,He,Se,Oe;return c=h=f=v=b=_=M=E=R=0,d=p=1,n.svg=!!(e.getCTM&&eee(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[Mr]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Mr]!=="none"?l[Mr]:"")),r.scale=r.rotate=r.translate="none"),D=kO(e,n.svg),n.svg&&(n.uncache?(j=e.getBBox(),u=n.xOrigin-j.x+"px "+(n.yOrigin-j.y)+"px",he=""):he=!t&&e.getAttribute("data-svg-origin"),EI(e,he||u,!!he||n.originIsAbsolute,n.smooth!==!1,D)),L=n.xOrigin||0,I=n.yOrigin||0,D!==xx&&(U=D[0],Q=D[1],X=D[2],ee=D[3],c=K=D[4],h=Z=D[5],D.length===6?(d=Math.sqrt(U*U+Q*Q),p=Math.sqrt(ee*ee+X*X),v=U||Q?yg(Q,U)*YA:0,M=X||ee?yg(X,ee)*YA+v:0,M&&(p*=Math.abs(Math.cos(M*q1))),n.svg&&(c-=L-(L*U+I*X),h-=I-(L*Q+I*ee))):(Oe=D[6],He=D[7],ae=D[8],pe=D[9],Pe=D[10],Se=D[11],c=D[12],h=D[13],f=D[14],k=yg(Oe,Pe),b=k*YA,k&&(G=Math.cos(-k),O=Math.sin(-k),he=K*G+ae*O,j=Z*G+pe*O,ie=Oe*G+Pe*O,ae=K*-O+ae*G,pe=Z*-O+pe*G,Pe=Oe*-O+Pe*G,Se=He*-O+Se*G,K=he,Z=j,Oe=ie),k=yg(-X,Pe),_=k*YA,k&&(G=Math.cos(-k),O=Math.sin(-k),he=U*G-ae*O,j=Q*G-pe*O,ie=X*G-Pe*O,Se=ee*O+Se*G,U=he,Q=j,X=ie),k=yg(Q,U),v=k*YA,k&&(G=Math.cos(k),O=Math.sin(k),he=U*G+Q*O,j=K*G+Z*O,Q=Q*G-U*O,Z=Z*G-K*O,U=he,K=j),b&&Math.abs(b)+Math.abs(v)>359.9&&(b=v=0,_=180-_),d=Qr(Math.sqrt(U*U+Q*Q+X*X)),p=Qr(Math.sqrt(Z*Z+Oe*Oe)),k=yg(K,Z),M=Math.abs(k)>2e-4?k*YA:0,R=Se?1/(Se<0?-Se:Se):0),n.svg&&(he=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!nee(ah(e,Mr)),he&&e.setAttribute("transform",he))),Math.abs(M)>90&&Math.abs(M)<270&&(s?(d*=-1,M+=v<=0?180:-180,v+=v<=0?180:-180):(p*=-1,M+=M<=0?180:-180)),t=t||n.uncache,n.x=c-((n.xPercent=c&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=h-((n.yPercent=h&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=f+o,n.scaleX=Qr(d),n.scaleY=Qr(p),n.rotation=Qr(v)+a,n.rotationX=Qr(b)+a,n.rotationY=Qr(_)+a,n.skewX=M+a,n.skewY=E+a,n.transformPerspective=R+o,(n.zOrigin=parseFloat(u.split(" ")[2])||!t&&n.zOrigin||0)&&(r[el]=bE(u)),n.xOffset=n.yOffset=0,n.force3D=Gl.force3D,n.renderTransform=n.svg?hMe:JZ?iee:cMe,n.uncache=0,n},bE=function(e){return(e=e.split(" "))[0]+" "+e[1]},W8=function(e,t,n){var r=Lo(t);return Qr(parseFloat(t)+parseFloat(Np(e,"x",n+"px",r)))+r},cMe=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,iee(e,t)},FA="0deg",A2="0px",kA=") ",iee=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.z,u=n.rotation,c=n.rotationY,h=n.rotationX,f=n.skewX,d=n.skewY,p=n.scaleX,v=n.scaleY,b=n.transformPerspective,_=n.force3D,M=n.target,E=n.zOrigin,R="",L=_==="auto"&&e&&e!==1||_===!0;if(E&&(h!==FA||c!==FA)){var I=parseFloat(c)*q1,D=Math.sin(I),k=Math.cos(I),G;I=parseFloat(h)*q1,G=Math.cos(I),o=W8(M,o,D*G*-E),a=W8(M,a,-Math.sin(I)*-E),l=W8(M,l,k*G*-E+E)}b!==A2&&(R+="perspective("+b+kA),(r||s)&&(R+="translate("+r+"%, "+s+"%) "),(L||o!==A2||a!==A2||l!==A2)&&(R+=l!==A2||L?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+kA),u!==FA&&(R+="rotate("+u+kA),c!==FA&&(R+="rotateY("+c+kA),h!==FA&&(R+="rotateX("+h+kA),(f!==FA||d!==FA)&&(R+="skew("+f+", "+d+kA),(p!==1||v!==1)&&(R+="scale("+p+", "+v+kA),M.style[Mr]=R||"translate(0, 0)"},hMe=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.rotation,u=n.skewX,c=n.skewY,h=n.scaleX,f=n.scaleY,d=n.target,p=n.xOrigin,v=n.yOrigin,b=n.xOffset,_=n.yOffset,M=n.forceCSS,E=parseFloat(o),R=parseFloat(a),L,I,D,k,G;l=parseFloat(l),u=parseFloat(u),c=parseFloat(c),c&&(c=parseFloat(c),u+=c,l+=c),l||u?(l*=q1,u*=q1,L=Math.cos(l)*h,I=Math.sin(l)*h,D=Math.sin(l-u)*-f,k=Math.cos(l-u)*f,u&&(c*=q1,G=Math.tan(u-c),G=Math.sqrt(1+G*G),D*=G,k*=G,c&&(G=Math.tan(c),G=Math.sqrt(1+G*G),L*=G,I*=G)),L=Qr(L),I=Qr(I),D=Qr(D),k=Qr(k)):(L=h,k=f,I=D=0),(E&&!~(o+"").indexOf("px")||R&&!~(a+"").indexOf("px"))&&(E=Np(d,"x",o,"px"),R=Np(d,"y",a,"px")),(p||v||b||_)&&(E=Qr(E+p-(p*L+v*D)+b),R=Qr(R+v-(p*I+v*k)+_)),(r||s)&&(G=d.getBBox(),E=Qr(E+r/100*G.width),R=Qr(R+s/100*G.height)),G="matrix("+L+","+I+","+D+","+k+","+E+","+R+")",d.setAttribute("transform",G),M&&(d.style[Mr]=G)},fMe=function(e,t,n,r,s){var o=360,a=Ws(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?YA:1),u=l-r,c=r+u+"deg",h,f;return a&&(h=s.split("_")[1],h==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),h==="cw"&&u<0?u=(u+o*tH)%o-~~(u/o)*o:h==="ccw"&&u>0&&(u=(u-o*tH)%o-~~(u/o)*o)),e._pt=f=new Za(e._pt,t,n,r,u,Y3e),f.e=c,f.u="deg",e._props.push(n),f},aH=function(e,t){for(var n in t)e[n]=t[n];return e},dMe=function(e,t,n){var r=aH({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,l,u,c,h,f,d,p;r.svg?(u=n.getAttribute("transform"),n.setAttribute("transform",""),o[Mr]=t,a=bx(n,1),Q0(n,Mr),n.setAttribute("transform",u)):(u=getComputedStyle(n)[Mr],o[Mr]=t,a=bx(n,1),o[Mr]=u);for(l in Gf)u=r[l],c=a[l],u!==c&&s.indexOf(l)<0&&(d=Lo(u),p=Lo(c),h=d!==p?Np(n,l,u,p):parseFloat(u),f=parseFloat(c),e._pt=new Za(e._pt,a,l,h,f-h,SI),e._pt.u=p||0,e._props.push(l));aH(a,r)};Ja("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",r="Bottom",s="Left",o=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(a){return e<2?i+a:"border"+a+i});xE[e>1?"border"+i:i]=function(a,l,u,c,h){var f,d;if(arguments.length<4)return f=o.map(function(p){return rf(a,p,u)}),d=f.join(" "),d.split(f[0]).length===5?f[0]:d;f=(c+"").split(" "),d={},o.forEach(function(p,v){return d[p]=f[v]=f[v]||f[(v-1)/2|0]}),a.init(l,d,h)}});var ree={name:"css",register:TI,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var o=this._props,a=e.style,l=n.vars.startAt,u,c,h,f,d,p,v,b,_,M,E,R,L,I,D,k;LO||TI(),this.styles=this.styles||KZ(e),k=this.styles.props,this.tween=n;for(v in t)if(v!=="autoRound"&&(c=t[v],!(Rl[v]&&zZ(v,t,n,r,e,s)))){if(d=typeof c,p=xE[v],d==="function"&&(c=c.call(n,r,e,s),d=typeof c),d==="string"&&~c.indexOf("random(")&&(c=yx(c)),p)p(this,e,v,c,n)&&(D=1);else if(v.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(v)+"").trim(),c+="",vp.lastIndex=0,vp.test(u)||(b=Lo(u),_=Lo(c)),_?b!==_&&(u=Np(e,v,u,_)+_):b&&(c+=b),this.add(a,"setProperty",u,c,r,s,0,0,v),o.push(v),k.push(v,0,a[v]);else if(d!=="undefined"){if(l&&v in l?(u=typeof l[v]=="function"?l[v].call(n,r,e,s):l[v],Ws(u)&&~u.indexOf("random(")&&(u=yx(u)),Lo(u+"")||u==="auto"||(u+=Gl.units[v]||Lo(rf(e,v))||""),(u+"").charAt(1)==="="&&(u=rf(e,v))):u=rf(e,v),f=parseFloat(u),M=d==="string"&&c.charAt(1)==="="&&c.substr(0,2),M&&(c=c.substr(2)),h=parseFloat(c),v in Jc&&(v==="autoAlpha"&&(f===1&&rf(e,"visibility")==="hidden"&&h&&(f=0),k.push("visibility",0,a.visibility),up(this,a,"visibility",f?"inherit":"hidden",h?"inherit":"hidden",!h)),v!=="scale"&&v!=="transform"&&(v=Jc[v],~v.indexOf(",")&&(v=v.split(",")[0]))),E=v in Gf,E){if(this.styles.save(v),R||(L=e._gsap,L.renderTransform&&!t.parseTransform||bx(e,t.parseTransform),I=t.smoothOrigin!==!1&&L.smooth,R=this._pt=new Za(this._pt,a,Mr,0,1,L.renderTransform,L,0,-1),R.dep=1),v==="scale")this._pt=new Za(this._pt,L,"scaleY",L.scaleY,(M?G1(L.scaleY,M+h):h)-L.scaleY||0,SI),this._pt.u=0,o.push("scaleY",v),v+="X";else if(v==="transformOrigin"){k.push(el,0,a[el]),c=lMe(c),L.svg?EI(e,c,0,I,0,this):(_=parseFloat(c.split(" ")[2])||0,_!==L.zOrigin&&up(this,L,"zOrigin",L.zOrigin,_),up(this,a,v,bE(u),bE(c)));continue}else if(v==="svgOrigin"){EI(e,c,1,I,0,this);continue}else if(v in tee){fMe(this,L,v,f,M?G1(f,M+c):c);continue}else if(v==="smoothOrigin"){up(this,L,"smooth",L.smooth,c);continue}else if(v==="force3D"){L[v]=c;continue}else if(v==="transform"){dMe(this,c,e);continue}}else v in a||(v=My(v)||v);if(E||(h||h===0)&&(f||f===0)&&!X3e.test(c)&&v in a)b=(u+"").substr((f+"").length),h||(h=0),_=Lo(c)||(v in Gl.units?Gl.units[v]:b),b!==_&&(f=Np(e,v,u,_)),this._pt=new Za(this._pt,E?L:a,v,f,(M?G1(f,M+h):h)-f,!E&&(_==="px"||v==="zIndex")&&t.autoRound!==!1?K3e:SI),this._pt.u=_||0,b!==_&&_!=="%"&&(this._pt.b=u,this._pt.r=Q3e);else if(v in a)aMe.call(this,e,v,u,M?M+c:c);else if(v in e)this.add(e,v,u||e[v],M?M+c:c,r,s);else if(v!=="parseTransform"){TO(v,c);continue}E||(v in a?k.push(v,0,a[v]):k.push(v,1,u||e[v])),o.push(v)}}D&&$Z(this)},render:function(e,t){if(t.tween._time||!OO())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:rf,aliases:Jc,getSetter:function(e,t,n){var r=Jc[t];return r&&r.indexOf(",")<0&&(t=r),t in Gf&&t!==el&&(e._gsap.x||rf(e,"x"))?n&&eH===n?t==="scale"?tMe:eMe:(eH=n||{})&&(t==="scale"?nMe:iMe):e.style&&!wO(e.style[t])?J3e:~t.indexOf("-")?Z3e:NO(e,t)},core:{_removeProperty:Q0,_getMatrix:kO}};nl.utils.checkPrefix=My;nl.core.getStyleSaver=KZ;(function(i,e,t,n){var r=Ja(i+","+e+","+t,function(s){Gf[s]=1});Ja(e,function(s){Gl.units[s]="deg",tee[s]=1}),Jc[r[13]]=i+","+e,Ja(n,function(s){var o=s.split(":");Jc[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ja("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Gl.units[i]="px"});nl.registerPlugin(ree);var iv=nl.registerPlugin(ree)||nl;iv.core.Tween;/*!
 * @gsap/react 2.1.1
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/let lH=typeof window<"u"?W.useLayoutEffect:W.useEffect,uH=i=>i&&!Array.isArray(i)&&typeof i=="object",i3=[],pMe={},see=iv;const rv=(i,e=i3)=>{let t=pMe;uH(i)?(t=i,i=null,e="dependencies"in t?t.dependencies:i3):uH(e)&&(t=e,e="dependencies"in t?t.dependencies:i3),i&&typeof i!="function"&&console.warn("First parameter must be a function or config object");const{scope:n,revertOnUpdate:r}=t,s=W.useRef(!1),o=W.useRef(see.context(()=>{},n)),a=W.useRef(u=>o.current.add(null,u)),l=e&&e.length&&!r;return lH(()=>{if(i&&o.current.add(i,n),!l||!s.current)return()=>o.current.revert()},e),l&&lH(()=>(s.current=!0,()=>o.current.revert()),i3),{context:o.current,contextSafe:a.current}};rv.register=i=>{see=i};rv.headless=!0;const AMe=i=>{const e=W.useRef(),{scene:t}=ll("https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/target-stand/model.gltf");return rv(()=>{iv.to(e.current.position,{y:e.current.position.y+.5,duration:1.5,repeat:-1,yoyo:!0})}),Y.jsx("mesh",{...i,ref:e,rotation:[0,Math.PI/5,0],scale:1.5,children:Y.jsx("primitive",{object:t})})},mMe=i=>{const{nodes:e,materials:t}=ll("models/react.glb");return Y.jsx(cK,{floatIntensity:1,children:Y.jsx("group",{position:[8,8,0],scale:.4,...i,dispose:null,children:Y.jsx("mesh",{geometry:e["React-Logo_Material002_0"].geometry,material:t["Material.002"],position:[0,.079,.181],rotation:[0,0,-Math.PI/2],scale:[.392,.392,.527]})})})};ll.preload("models/react.glb");const gMe=({...i})=>{const{nodes:e}=ll("models/cube.glb"),t=gy("textures/cube.png"),n=W.useRef(),[r,s]=W.useState(!1);return rv(()=>{iv.timeline({repeat:-1,repeatDelay:.5}).to(n.current.rotation,{y:r?"+=2":`+=${Math.PI*2}`,x:r?"+=2":`-=${Math.PI*2}`,duration:2.5,stagger:{each:.15}})}),Y.jsx(cK,{floatIntensity:2,children:Y.jsx("group",{position:[9,-4,0],rotation:[2.6,.8,-1.8],scale:.74,dispose:null,...i,children:Y.jsx("mesh",{ref:n,castShadow:!0,receiveShadow:!0,geometry:e.Cube.geometry,material:e.Cube.material,onPointerEnter:()=>s(!0),children:Y.jsx("meshMatcapMaterial",{matcap:t,toneMapped:!1})})})})};ll.preload("models/cube.glb");const yMe=({position:i})=>{const e=W.useRef([]),t=W.useCallback(r=>{r&&!e.current.includes(r)&&e.current.push(r)},[]),n=gy("textures/rings.png");return rv(()=>{e.current.length!==0&&(e.current.forEach(r=>{r.position.set(i[0],i[1],i[2])}),iv.timeline({repeat:-1,repeatDelay:.5}).to(e.current.map(r=>r.rotation),{y:`+=${Math.PI*2}`,x:`-=${Math.PI*2}`,duration:2.5,stagger:{each:.15}}))},{dependencies:i}),Y.jsx(oK,{children:Y.jsx("group",{scale:.5,children:Array.from({length:4},(r,s)=>Y.jsxs("mesh",{ref:t,children:[Y.jsx("torusGeometry",{args:[(s+1)*.5,.1]}),Y.jsx("meshMatcapMaterial",{matcap:n,toneMapped:!1})]},s))})})},vMe=({children:i,isMobile:e})=>{const t=W.useRef();return Yy((n,r)=>{mz.damp3(n.camera.position,[0,0,20],.25,r),e||mz.dampE(t.current.rotation,[-n.pointer.y/3,-n.pointer.x/5,0],.25,r)}),Y.jsx("group",{ref:t,scale:e?1:1.3,children:i})},oee=({name:i,isBeam:e=!1,containerClass:t})=>Y.jsxs("div",{className:`btn ${t}`,children:[e&&Y.jsxs("span",{className:"relative flax h-6 w-3",children:[Y.jsx("span",{className:"btn-ping"}),Y.jsx("span",{className:"btn-ping_dot "})]}),i]}),_Me=()=>{const i=k8({maxWidth:440}),e=k8({maxWidth:768}),t=k8({minWidth:768,maxWidth:1024}),n=Rae(i,e,t);return Y.jsxs("section",{className:"min-h-screen w-full flex flex-col relative",id:"home",children:[Y.jsxs("div",{className:"w-full mx-auto flex flex-col sm:mt-36 mt-20 c-space gap-3",children:[Y.jsxs("p",{className:"sm:text-3xl text-xl font-medium text-white text-center font-generalsans",children:["Hi, I am Miguel ",Y.jsx("span",{className:"waving-hand",children:"👋"})]}),Y.jsx("p",{className:"hero_tag text-gray_gradient",children:"Computer Science"})]}),Y.jsxs("div",{className:"w-full h-full absolute inset-0",children:[Y.jsx(WL,{className:"w-full h-full",children:Y.jsxs(W.Suspense,{fallback:null,children:[Y.jsx(MSe,{hidden:!0}),Y.jsx(T1e,{makeDefault:!0,position:[0,0,30]}),Y.jsx(vMe,{isMobile:e,children:Y.jsx(U1e,{position:n.deskPosition,scale:n.deskScale,rotation:[0,-Math.PI,0]})}),Y.jsxs("group",{children:[Y.jsx(AMe,{position:n.targetPosition}),Y.jsx(mMe,{position:n.reactLogoPosition}),Y.jsx(gMe,{position:n.cubePosition}),Y.jsx(yMe,{position:n.ringPosition})]}),Y.jsx("ambientLight",{intensity:1}),Y.jsx("directionalLight",{position:[10,10,10],intensity:.5})]})}),Y.jsx("div",{className:"absolute bottom-7 left-0 right-0 w-full z-10 c-space",children:Y.jsx("a",{href:"#about",className:"w-fit",children:Y.jsx(oee,{name:"Let's work together",isBeam:!0,containerClass:"sm:w-fit w-full sm:min-w-96"})})})]})]})};function xMe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function bMe(i,e,t){return e=PMe(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function cH(i,e){return MMe(i)||xMe(i,e)||aee(i,e)||CMe()}function wMe(i){return SMe(i)||TMe(i)||aee(i)||EMe()}function SMe(i){if(Array.isArray(i))return CI(i)}function MMe(i){if(Array.isArray(i))return i}function TMe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function aee(i,e){if(i){if(typeof i=="string")return CI(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return CI(i,e)}}function CI(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function EMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RMe(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function PMe(i){var e=RMe(i,"string");return typeof e=="symbol"?e:String(e)}var BMe=function(e,t){var n=new Set(t);return Object.assign.apply(Object,[{}].concat(wMe(Object.entries(e).filter(function(r){var s=cH(r,1),o=s[0];return!n.has(o)}).map(function(r){var s=cH(r,2),o=s[0],a=s[1];return bMe({},o,a)}))))};/*! fromentries. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var IMe=function(e){return[...e].reduce((t,[n,r])=>(t[n]=r,t),{})};const hH=xh(IMe);function RI(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function NMe(i){if(Array.isArray(i))return i}function DMe(i){if(Array.isArray(i))return RI(i)}function LMe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function OMe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function FMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lee(i,e){return NMe(i)||OMe(i,e)||uee(i,e)||FMe()}function fH(i){return DMe(i)||LMe(i)||uee(i)||kMe()}function PI(i){"@babel/helpers - typeof";return PI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PI(i)}function uee(i,e){if(i){if(typeof i=="string")return RI(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?RI(i,e):void 0}}function UMe(i,e){var t=PI(e)==="object"?e:{wrapperElementType:e,methodNames:(arguments.length<=2?void 0:arguments[2])||void 0,initPropNames:(arguments.length<=3?void 0:arguments[3])||void 0},n=t.wrapperElementType,r=n===void 0?"div":n,s=t.nodeMapper,o=s===void 0?function(h){return h}:s,a=t.methodNames,l=a===void 0?[]:a,u=t.initPropNames,c=u===void 0?[]:u;return W.forwardRef(function(h,f){var d=W.useRef(),p=W.useState({}),v=lee(p,2),b=v[0],_=v[1];W.useEffect(function(){return _(h)});var M=W.useMemo(function(){var L=hH(c.filter(function(I){return h.hasOwnProperty(I)}).map(function(I){return[I,h[I]]}));return i(L)},[]);dH(function(){M(o(d.current))},W.useLayoutEffect),dH(function(){return M._destructor instanceof Function?M._destructor:void 0});var E=W.useCallback(function(L){for(var I=arguments.length,D=new Array(I>1?I-1:0),k=1;k<I;k++)D[k-1]=arguments[k];return M[L]instanceof Function?M[L].apply(M,D):void 0},[M]),R=BMe(h,[].concat(fH(l),fH(c)));return Object.keys(R).filter(function(L){return b[L]!==h[L]}).forEach(function(L){return E(L,h[L])}),W.useImperativeHandle(f,function(){return hH(l.map(function(L){return[L,function(){for(var I=arguments.length,D=new Array(I),k=0;k<I;k++)D[k]=arguments[k];return E.apply(void 0,[L].concat(D))}]}))}),ge.createElement(r,{ref:d})})}function dH(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:W.useEffect,t=W.useRef(),n=W.useRef(!1),r=W.useRef(!1),s=W.useState(0),o=lee(s,2);o[0];var a=o[1];n.current&&(r.current=!0),e(function(){return n.current||(t.current=i(),n.current=!0),a(function(l){return l+1}),function(){r.current&&t.current&&t.current()}},[])}class zMe extends Qn{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new je(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const vg=new ne,pH=new kt,AH=new kt,mH=new ne,gH=new ne;class GMe{constructor(e={}){const t=this;let n,r,s,o;const a={objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:n,height:r}},this.render=function(p,v){p.matrixWorldAutoUpdate===!0&&p.updateMatrixWorld(),v.parent===null&&v.matrixWorldAutoUpdate===!0&&v.updateMatrixWorld(),pH.copy(v.matrixWorldInverse),AH.multiplyMatrices(v.projectionMatrix,pH),c(p,p,v),d(p)},this.setSize=function(p,v){n=p,r=v,s=n/2,o=r/2,l.style.width=p+"px",l.style.height=v+"px"};function u(p){p.isCSS2DObject&&(p.element.style.display="none");for(let v=0,b=p.children.length;v<b;v++)u(p.children[v])}function c(p,v,b){if(p.visible===!1){u(p);return}if(p.isCSS2DObject){vg.setFromMatrixPosition(p.matrixWorld),vg.applyMatrix4(AH);const _=vg.z>=-1&&vg.z<=1&&p.layers.test(b.layers)===!0,M=p.element;M.style.display=_===!0?"":"none",_===!0&&(p.onBeforeRender(t,v,b),M.style.transform="translate("+-100*p.center.x+"%,"+-100*p.center.y+"%)translate("+(vg.x*s+s)+"px,"+(-vg.y*o+o)+"px)",M.parentNode!==l&&l.appendChild(M),p.onAfterRender(t,v,b));const E={distanceToCameraSquared:h(b,p)};a.objects.set(p,E)}for(let _=0,M=p.children.length;_<M;_++)c(p.children[_],v,b)}function h(p,v){return mH.setFromMatrixPosition(p.matrixWorld),gH.setFromMatrixPosition(v.matrixWorld),mH.distanceToSquared(gH)}function f(p){const v=[];return p.traverseVisible(function(b){b.isCSS2DObject&&v.push(b)}),v}function d(p){const v=f(p).sort(function(_,M){if(_.renderOrder!==M.renderOrder)return M.renderOrder-_.renderOrder;const E=a.objects.get(_).distanceToCameraSquared,R=a.objects.get(M).distanceToCameraSquared;return E-R}),b=v.length;for(let _=0,M=v.length;_<M;_++)v[_].element.style.zIndex=b-_}}}function BI(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var HMe=typeof global=="object"&&global&&global.Object===Object&&global,qMe=typeof self=="object"&&self&&self.Object===Object&&self,cee=HMe||qMe||Function("return this")(),X8=function(){return cee.Date.now()},VMe=/\s/;function jMe(i){for(var e=i.length;e--&&VMe.test(i.charAt(e)););return e}var $Me=/^\s+/;function WMe(i){return i&&i.slice(0,jMe(i)+1).replace($Me,"")}var wE=cee.Symbol,hee=Object.prototype,XMe=hee.hasOwnProperty,YMe=hee.toString,m2=wE?wE.toStringTag:void 0;function QMe(i){var e=XMe.call(i,m2),t=i[m2];try{i[m2]=void 0;var n=!0}catch{}var r=YMe.call(i);return n&&(e?i[m2]=t:delete i[m2]),r}var KMe=Object.prototype,JMe=KMe.toString;function ZMe(i){return JMe.call(i)}var eTe="[object Null]",tTe="[object Undefined]",yH=wE?wE.toStringTag:void 0;function nTe(i){return i==null?i===void 0?tTe:eTe:yH&&yH in Object(i)?QMe(i):ZMe(i)}function iTe(i){return i!=null&&typeof i=="object"}var rTe="[object Symbol]";function sTe(i){return typeof i=="symbol"||iTe(i)&&nTe(i)==rTe}var vH=NaN,oTe=/^[-+]0x[0-9a-f]+$/i,aTe=/^0b[01]+$/i,lTe=/^0o[0-7]+$/i,uTe=parseInt;function _H(i){if(typeof i=="number")return i;if(sTe(i))return vH;if(BI(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=BI(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=WMe(i);var t=aTe.test(i);return t||lTe.test(i)?uTe(i.slice(2),t?2:8):oTe.test(i)?vH:+i}var cTe="Expected a function",hTe=Math.max,fTe=Math.min;function dTe(i,e,t){var n,r,s,o,a,l,u=0,c=!1,h=!1,f=!0;if(typeof i!="function")throw new TypeError(cTe);e=_H(e)||0,BI(t)&&(c=!!t.leading,h="maxWait"in t,s=h?hTe(_H(t.maxWait)||0,e):s,f="trailing"in t?!!t.trailing:f);function d(I){var D=n,k=r;return n=r=void 0,u=I,o=i.apply(k,D),o}function p(I){return u=I,a=setTimeout(_,e),c?d(I):o}function v(I){var D=I-l,k=I-u,G=e-D;return h?fTe(G,s-k):G}function b(I){var D=I-l,k=I-u;return l===void 0||D>=e||D<0||h&&k>=s}function _(){var I=X8();if(b(I))return M(I);a=setTimeout(_,v(I))}function M(I){return a=void 0,f&&n?d(I):(n=r=void 0,o)}function E(){a!==void 0&&clearTimeout(a),u=0,n=l=r=a=void 0}function R(){return a===void 0?o:M(X8())}function L(){var I=X8(),D=b(I);if(n=arguments,r=this,l=I,D){if(a===void 0)return p(l);if(h)return clearTimeout(a),a=setTimeout(_,e),d(l)}return a===void 0&&(a=setTimeout(_,e)),o}return L.cancel=E,L.flush=R,L}function xH(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function pTe(i){if(Array.isArray(i))return i}function ATe(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function mTe(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function gTe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function yTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vTe(i,e){return pTe(i)||gTe(i,e)||_Te(i,e)||yTe()}function _Te(i,e){if(i){if(typeof i=="string")return xH(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?xH(i,e):void 0}}var xTe=mTe(function i(e,t){var n=t.default,r=n===void 0?null:n,s=t.triggerUpdate,o=s===void 0?!0:s,a=t.onChange,l=a===void 0?function(u,c){}:a;ATe(this,i),this.name=e,this.defaultVal=r,this.triggerUpdate=o,this.onChange=l});function mo(i){var e=i.stateInit,t=e===void 0?function(){return{}}:e,n=i.props,r=n===void 0?{}:n,s=i.methods,o=s===void 0?{}:s,a=i.aliases,l=a===void 0?{}:a,u=i.init,c=u===void 0?function(){}:u,h=i.update,f=h===void 0?function(){}:h,d=Object.keys(r).map(function(p){return new xTe(p,r[p])});return function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=Object.assign({},t instanceof Function?t(p):t,{initialised:!1}),b={};function _(R){return M(R,p),E(),_}var M=function(L,I){c.call(_,L,v,I),v.initialised=!0},E=dTe(function(){v.initialised&&(f.call(_,v,b),b={})},1);return d.forEach(function(R){_[R.name]=L(R);function L(I){var D=I.name,k=I.triggerUpdate,G=k===void 0?!1:k,O=I.onChange,U=O===void 0?function(ee,K){}:O,Q=I.defaultVal,X=Q===void 0?null:Q;return function(ee){var K=v[D];if(!arguments.length)return K;var Z=ee===void 0?X:ee;return v[D]=Z,U.call(_,Z,v,K),!b.hasOwnProperty(D)&&(b[D]=K),G&&E(),_}}}),Object.keys(o).forEach(function(R){_[R]=function(){for(var L,I=arguments.length,D=new Array(I),k=0;k<I;k++)D[k]=arguments[k];return(L=o[R]).call.apply(L,[_,v].concat(D))}}),Object.entries(l).forEach(function(R){var L=vTe(R,2),I=L[0],D=L[1];return _[I]=_[D]}),_.resetProps=function(){return d.forEach(function(R){_[R.name](R.defaultVal)}),_},_.resetProps(),v._rerender=E,_}}var As=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return i},Out:function(i){return i},InOut:function(i){return i}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(i){var e=1.70158;return i===1?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return i===0?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-As.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?As.Bounce.In(i*2)*.5:As.Bounce.Out(i*2-1)*.5+.5}}),generatePow:function(i){return i===void 0&&(i=4),i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(e*2,i)/2:(1-Math.pow(2-e*2,i))/2+.5}}}}),W2=function(){return performance.now()},k4=function(){function i(){this._tweens={},this._tweensAddedDuringUpdate={}}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},i.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},i.prototype.update=function(e,t){e===void 0&&(e=W2()),t===void 0&&(t=!1);var n=Object.keys(this._tweens);if(n.length===0)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var s=this._tweens[n[r]],o=!t;s&&s.update(e,o)===!1&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},i}(),A1={Linear:function(i,e){var t=i.length-1,n=t*e,r=Math.floor(n),s=A1.Utils.Linear;return e<0?s(i[0],i[1],n):e>1?s(i[t],i[t-1],t-n):s(i[r],i[r+1>t?t:r+1],n-r)},Bezier:function(i,e){for(var t=0,n=i.length-1,r=Math.pow,s=A1.Utils.Bernstein,o=0;o<=n;o++)t+=r(1-e,n-o)*r(e,o)*i[o]*s(n,o);return t},CatmullRom:function(i,e){var t=i.length-1,n=t*e,r=Math.floor(n),s=A1.Utils.CatmullRom;return i[0]===i[t]?(e<0&&(r=Math.floor(n=t*(1+e))),s(i[(r-1+t)%t],i[r],i[(r+1)%t],i[(r+2)%t],n-r)):e<0?i[0]-(s(i[0],i[0],i[1],i[1],-n)-i[0]):e>1?i[t]-(s(i[t],i[t],i[t-1],i[t-1],n-t)-i[t]):s(i[r?r-1:0],i[r],i[t<r+1?t:r+1],i[t<r+2?t:r+2],n-r)},Utils:{Linear:function(i,e,t){return(e-i)*t+i},Bernstein:function(i,e){var t=A1.Utils.Factorial;return t(i)/t(e)/t(i-e)},Factorial:function(){var i=[1];return function(e){var t=1;if(i[e])return i[e];for(var n=e;n>1;n--)t*=n;return i[e]=t,t}}(),CatmullRom:function(i,e,t,n,r){var s=(t-i)*.5,o=(n-e)*.5,a=r*r,l=r*a;return(2*e-2*t+s+o)*l+(-3*e+3*t-2*s-o)*a+s*r+e}}},bTe=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),II=new k4,jo=function(){function i(e,t){t===void 0&&(t=II),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=As.Linear.None,this._interpolationFunction=A1.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=bTe.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.getDuration=function(){return this._duration},i.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},i.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},i.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,t){if(e===void 0&&(e=W2()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,t,n,r,s){for(var o in n){var a=e[o],l=Array.isArray(a),u=l?"array":typeof a,c=!l&&Array.isArray(n[o]);if(!(u==="undefined"||u==="function")){if(c){var h=n[o];if(h.length===0)continue;for(var f=[a],d=0,p=h.length;d<p;d+=1){var v=this._handleRelativeValue(a,h[d]);if(isNaN(v)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}f.push(v)}c&&(n[o]=f)}if((u==="object"||l)&&a&&!c){t[o]=l?[]:{};var b=a;for(var _ in b)t[o][_]=b[_];r[o]=l?[]:{};var h=n[o];if(!this._isDynamic){var M={};for(var _ in h)M[_]=h[_];n[o]=h=M}this._setupProperties(b,t[o],h,r[o],s)}else(typeof t[o]>"u"||s)&&(t[o]=a),l||(t[o]*=1),c?r[o]=n[o].slice().reverse():r[o]=t[o]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},i.prototype.pause=function(e){return e===void 0&&(e=W2()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},i.prototype.resume=function(e){return e===void 0&&(e=W2()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},i.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return e===void 0&&(e=II),this._group=e,this},i.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return e===void 0&&(e=As.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return e===void 0&&(e=A1.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,t){var n=this,r;if(e===void 0&&(e=W2()),t===void 0&&(t=!0),this._isPaused)return!0;var s,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((r=this._repeatDelayTime)!==null&&r!==void 0?r:this._delayTime),u=this._duration+this._repeat*l,c=function(){if(n._duration===0||a>u)return 1;var b=Math.trunc(a/l),_=a-b*l,M=Math.min(_/n._duration,1);return M===0&&a===n._duration?1:M},h=c(),f=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),this._duration===0||a>=this._duration)if(this._repeat>0){var d=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=d);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*d,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,v=this._chainedTweens.length;p<v;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(e,t,n,r){for(var s in n)if(t[s]!==void 0){var o=t[s]||0,a=n[s],l=Array.isArray(e[s]),u=Array.isArray(a),c=!l&&u;c?e[s]=this._interpolationFunction(a,r):typeof a=="object"&&a?this._updateProperties(e[s],o,a,r):(a=this._handleRelativeValue(o,a),typeof a=="number"&&(e[s]=o+(a-o)*r))}},i.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},i.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},i}(),gh=II;gh.getAll.bind(gh);gh.removeAll.bind(gh);gh.add.bind(gh);gh.remove.bind(gh);gh.update.bind(gh);function wTe(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=fee(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u;if(n&&(s=CTe(i,e,s,t)),i.length>80*t){a=1/0,l=1/0;let c=-1/0,h=-1/0;for(let f=t;f<r;f+=t){const d=i[f],p=i[f+1];d<a&&(a=d),p<l&&(l=p),d>c&&(c=d),p>h&&(h=p)}u=Math.max(c-a,h-l),u=u!==0?32767/u:0}return wx(s,o,t,a,l,u,0),o}function fee(i,e,t,n,r){let s;if(r===UTe(i,e,t,n)>0)for(let o=e;o<t;o+=n)s=bH(o/n|0,i[o],i[o+1],s);else for(let o=t-n;o>=e;o-=n)s=bH(o/n|0,i[o],i[o+1],s);return s&&U4(s,s.next)&&(Mx(s),s=s.next),s}function K0(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(U4(t,t.next)||Tr(t.prev,t,t.next)===0)){if(Mx(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function wx(i,e,t,n,r,s,o){if(!i)return;!o&&s&&NTe(i,n,r,s);let a=i;for(;i.prev!==i.next;){const l=i.prev,u=i.next;if(s?MTe(i,n,r,s):STe(i)){e.push(l.i,i.i,u.i),Mx(i),i=u.next,a=u.next;continue}if(i=u,i===a){o?o===1?(i=TTe(K0(i),e),wx(i,e,t,n,r,s,2)):o===2&&ETe(i,e,t,n,r,s):wx(K0(i),e,t,n,r,s,1);break}}}function STe(i){const e=i.prev,t=i,n=i.next;if(Tr(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,a=e.y,l=t.y,u=n.y,c=r<s?r<o?r:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,f=r>s?r>o?r:o:s>o?s:o,d=a>l?a>u?a:u:l>u?l:u;let p=n.next;for(;p!==e;){if(p.x>=c&&p.x<=f&&p.y>=h&&p.y<=d&&m1(r,a,s,l,o,u,p.x,p.y)&&Tr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function MTe(i,e,t,n){const r=i.prev,s=i,o=i.next;if(Tr(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,c=r.y,h=s.y,f=o.y,d=a<l?a<u?a:u:l<u?l:u,p=c<h?c<f?c:f:h<f?h:f,v=a>l?a>u?a:u:l>u?l:u,b=c>h?c>f?c:f:h>f?h:f,_=NI(d,p,e,t,n),M=NI(v,b,e,t,n);let E=i.prevZ,R=i.nextZ;for(;E&&E.z>=_&&R&&R.z<=M;){if(E.x>=d&&E.x<=v&&E.y>=p&&E.y<=b&&E!==r&&E!==o&&m1(a,c,l,h,u,f,E.x,E.y)&&Tr(E.prev,E,E.next)>=0||(E=E.prevZ,R.x>=d&&R.x<=v&&R.y>=p&&R.y<=b&&R!==r&&R!==o&&m1(a,c,l,h,u,f,R.x,R.y)&&Tr(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;E&&E.z>=_;){if(E.x>=d&&E.x<=v&&E.y>=p&&E.y<=b&&E!==r&&E!==o&&m1(a,c,l,h,u,f,E.x,E.y)&&Tr(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;R&&R.z<=M;){if(R.x>=d&&R.x<=v&&R.y>=p&&R.y<=b&&R!==r&&R!==o&&m1(a,c,l,h,u,f,R.x,R.y)&&Tr(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function TTe(i,e){let t=i;do{const n=t.prev,r=t.next.next;!U4(n,r)&&dee(n,t,t.next,r)&&Sx(n,r)&&Sx(r,n)&&(e.push(n.i,t.i,r.i),Mx(t),Mx(t.next),t=i=r),t=t.next}while(t!==i);return K0(t)}function ETe(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&OTe(o,a)){let l=pee(o,a);o=K0(o,o.next),l=K0(l,l.next),wx(o,e,t,n,r,s,0),wx(l,e,t,n,r,s,0);return}a=a.next}o=o.next}while(o!==i)}function CTe(i,e,t,n){const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,u=fee(i,a,l,n,!1);u===u.next&&(u.steiner=!0),r.push(LTe(u))}r.sort(RTe);for(let s=0;s<r.length;s++)t=PTe(r[s],t);return t}function RTe(i,e){return i.x-e.x}function PTe(i,e){const t=BTe(i,e);if(!t)return e;const n=pee(t,i);return K0(n,n.next),K0(t,t.next)}function BTe(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=n&&h>s&&(s=h,o=t.x<t.next.x?t:t.next,h===n))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,u=o.y;let c=1/0;t=o;do{if(n>=t.x&&t.x>=l&&n!==t.x&&m1(r<u?n:s,r,l,u,r<u?s:n,r,t.x,t.y)){const h=Math.abs(r-t.y)/(n-t.x);Sx(t,i)&&(h<c||h===c&&(t.x>o.x||t.x===o.x&&ITe(o,t)))&&(o=t,c=h)}t=t.next}while(t!==a);return o}function ITe(i,e){return Tr(i.prev,i,e.prev)<0&&Tr(e.next,i,i.next)<0}function NTe(i,e,t,n){let r=i;do r.z===0&&(r.z=NI(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,DTe(r)}function DTe(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let o=n,a=0;for(let u=0;u<t&&(a++,o=o.nextZ,!!o);u++);let l=t;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||n.z<=o.z)?(r=n,n=n.nextZ,a--):(r=o,o=o.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=o}s.nextZ=null,t*=2}while(e>1);return i}function NI(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function LTe(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function m1(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function OTe(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!FTe(i,e)&&(Sx(i,e)&&Sx(e,i)&&kTe(i,e)&&(Tr(i.prev,i,e.prev)||Tr(i,e.prev,e))||U4(i,e)&&Tr(i.prev,i,i.next)>0&&Tr(e.prev,e,e.next)>0)}function Tr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function U4(i,e){return i.x===e.x&&i.y===e.y}function dee(i,e,t,n){const r=s3(Tr(i,e,t)),s=s3(Tr(i,e,n)),o=s3(Tr(t,n,i)),a=s3(Tr(t,n,e));return!!(r!==s&&o!==a||r===0&&r3(i,t,e)||s===0&&r3(i,n,e)||o===0&&r3(t,i,n)||a===0&&r3(t,e,n))}function r3(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function s3(i){return i>0?1:i<0?-1:0}function FTe(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&dee(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Sx(i,e){return Tr(i.prev,i,i.next)<0?Tr(i,e,i.next)>=0&&Tr(i,i.prev,e)>=0:Tr(i,e,i.prev)<0||Tr(i,i.next,e)<0}function kTe(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function pee(i,e){const t=DI(i.i,i.x,i.y),n=DI(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function bH(i,e,t,n){const r=DI(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Mx(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function DI(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function UTe(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}function SE(i){const e=[],t=[],n=i[0][0].length;let r=0,s=0;for(const o of i){for(const a of o)for(let l=0;l<n;l++)e.push(a[l]);s&&(r+=s,t.push(r)),s=o.length}return{vertices:e,holes:t,dimensions:n}}function BM(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function zTe(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function Aee(i){let e,t,n;i.length!==2?(e=BM,t=(a,l)=>BM(i(a),l),n=(a,l)=>i(a)-l):(e=i===BM||i===zTe?i:GTe,t=i,n=i);function r(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const h=u+c>>>1;t(a[h],l)<0?u=h+1:c=h}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const h=u+c>>>1;t(a[h],l)<=0?u=h+1:c=h}while(u<c)}return u}function o(a,l,u=0,c=a.length){const h=r(a,l,u,c-1);return h>u&&n(a[h-1],l)>-n(a[h],l)?h-1:h}return{left:r,center:o,right:s}}function GTe(){return 0}function HTe(i){return i===null?NaN:+i}const qTe=Aee(BM),VTe=qTe.right;Aee(HTe).center;function ME(i,e){let t,n;if(e===void 0)for(const r of i)r!=null&&(t===void 0?r>=r&&(t=n=r):(t>r&&(t=r),n<r&&(n=r)));else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(t===void 0?s>=s&&(t=n=s):(t>s&&(t=s),n<s&&(n=s)))}return[t,n]}class Sf{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const s=t[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t=this._n,n,r,s,o=0;if(t>0){for(o=e[--t];t>0&&(n=o,r=e[--t],o=n+r,s=r-(o-n),!s););t>0&&(s<0&&e[t-1]<0||s>0&&e[t-1]>0)&&(r=s*2,n=o+r,r==n-o&&(o=n))}return o}}const jTe=Math.sqrt(50),$Te=Math.sqrt(10),WTe=Math.sqrt(2);function TE(i,e,t){const n=(e-i)/Math.max(0,t),r=Math.floor(Math.log10(n)),s=n/Math.pow(10,r),o=s>=jTe?10:s>=$Te?5:s>=WTe?2:1;let a,l,u;return r<0?(u=Math.pow(10,-r)/o,a=Math.round(i*u),l=Math.round(e*u),a/u<i&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,r)*o,a=Math.round(i/u),l=Math.round(e/u),a*u<i&&++a,l*u>e&&--l),l<a&&.5<=t&&t<2?TE(i,e,t*2):[a,l,u]}function XTe(i,e,t){if(e=+e,i=+i,t=+t,!(t>0))return[];if(i===e)return[i];const n=e<i,[r,s,o]=n?TE(e,i,t):TE(i,e,t);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(n)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(r+u)/-o;else for(let u=0;u<a;++u)l[u]=(r+u)*o;return l}function LI(i,e,t){return e=+e,i=+i,t=+t,TE(i,e,t)[2]}function YTe(i,e,t){e=+e,i=+i,t=+t;const n=e<i,r=n?LI(e,i,t):LI(i,e,t);return(n?-1:1)*(r<0?1/-r:r)}function QTe(i,e){let t;for(const n of i)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);return t}function KTe(i,e){let t=0,n=0;if(e===void 0)for(let r of i)r!=null&&(r=+r)>=r&&(++t,n+=r);else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(s=+s)>=s&&(++t,n+=s)}if(t)return n/t}function*JTe(i){for(const e of i)yield*e}function Tx(i){return Array.from(JTe(i))}function g1(i,e,t){i=+i,e=+e,t=(r=arguments.length)<2?(e=i,i=0,1):r<3?1:+t;for(var n=-1,r=Math.max(0,Math.ceil((e-i)/t))|0,s=new Array(r);++n<r;)s[n]=i+n*t;return s}function ZTe(i,e){let t=0;for(let n of i)(n=+n)&&(t+=n);return t}var ti=1e-6,EE=1e-12,vi=Math.PI,Ru=vi/2,CE=vi/4,$l=vi*2,kr=180/vi,Rn=vi/180,Gi=Math.abs,mee=Math.atan,Ou=Math.atan2,Nn=Math.cos,o3=Math.ceil,OI=Math.hypot,bn=Math.sin,eEe=Math.sign||function(i){return i>0?1:i<0?-1:0},Hf=Math.sqrt;function tEe(i){return i>1?0:i<-1?vi:Math.acos(i)}function qf(i){return i>1?Ru:i<-1?-Ru:Math.asin(i)}function wH(i){return(i=bn(i/2))*i}function Oo(){}function RE(i,e){i&&MH.hasOwnProperty(i.type)&&MH[i.type](i,e)}var SH={Feature:function(i,e){RE(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)RE(t[n].geometry,e)}},MH={Sphere:function(i,e){e.sphere()},Point:function(i,e){i=i.coordinates,e.point(i[0],i[1],i[2])},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)i=t[n],e.point(i[0],i[1],i[2])},LineString:function(i,e){FI(i.coordinates,e,0)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)FI(t[n],e,0)},Polygon:function(i,e){TH(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)TH(t[n],e)},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)RE(t[n],e)}};function FI(i,e,t){var n=-1,r=i.length-t,s;for(e.lineStart();++n<r;)s=i[n],e.point(s[0],s[1],s[2]);e.lineEnd()}function TH(i,e){var t=-1,n=i.length;for(e.polygonStart();++t<n;)FI(i[t],e,1);e.polygonEnd()}function z4(i,e){i&&SH.hasOwnProperty(i.type)?SH[i.type](i,e):RE(i,e)}var PE=new Sf,EH=new Sf,gee,yee,kI,UI,zI,Vf={point:Oo,lineStart:Oo,lineEnd:Oo,polygonStart:function(){PE=new Sf,Vf.lineStart=nEe,Vf.lineEnd=iEe},polygonEnd:function(){var i=+PE;EH.add(i<0?$l+i:i),this.lineStart=this.lineEnd=this.point=Oo},sphere:function(){EH.add($l)}};function nEe(){Vf.point=rEe}function iEe(){vee(gee,yee)}function rEe(i,e){Vf.point=vee,gee=i,yee=e,i*=Rn,e*=Rn,kI=i,UI=Nn(e=e/2+CE),zI=bn(e)}function vee(i,e){i*=Rn,e*=Rn,e=e/2+CE;var t=i-kI,n=t>=0?1:-1,r=n*t,s=Nn(e),o=bn(e),a=zI*o,l=UI*s+a*Nn(r),u=a*n*bn(r);PE.add(Ou(u,l)),kI=i,UI=s,zI=o}function BE(i){return[Ou(i[1],i[0]),qf(i[2])]}function J0(i){var e=i[0],t=i[1],n=Nn(t);return[n*Nn(e),n*bn(e),bn(t)]}function a3(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function Ty(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function Y8(i,e){i[0]+=e[0],i[1]+=e[1],i[2]+=e[2]}function l3(i,e){return[i[0]*e,i[1]*e,i[2]*e]}function IE(i){var e=Hf(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=e,i[1]/=e,i[2]/=e}var yr,Ga,Or,Il,QA,_ee,xee,V1,T_,Xd,jf,sf={point:GI,lineStart:CH,lineEnd:RH,polygonStart:function(){sf.point=wee,sf.lineStart=sEe,sf.lineEnd=oEe,T_=new Sf,Vf.polygonStart()},polygonEnd:function(){Vf.polygonEnd(),sf.point=GI,sf.lineStart=CH,sf.lineEnd=RH,PE<0?(yr=-(Or=180),Ga=-(Il=90)):T_>ti?Il=90:T_<-ti&&(Ga=-90),jf[0]=yr,jf[1]=Or},sphere:function(){yr=-(Or=180),Ga=-(Il=90)}};function GI(i,e){Xd.push(jf=[yr=i,Or=i]),e<Ga&&(Ga=e),e>Il&&(Il=e)}function bee(i,e){var t=J0([i*Rn,e*Rn]);if(V1){var n=Ty(V1,t),r=[n[1],-n[0],0],s=Ty(r,n);IE(s),s=BE(s);var o=i-QA,a=o>0?1:-1,l=s[0]*kr*a,u,c=Gi(o)>180;c^(a*QA<l&&l<a*i)?(u=s[1]*kr,u>Il&&(Il=u)):(l=(l+360)%360-180,c^(a*QA<l&&l<a*i)?(u=-s[1]*kr,u<Ga&&(Ga=u)):(e<Ga&&(Ga=e),e>Il&&(Il=e))),c?i<QA?El(yr,i)>El(yr,Or)&&(Or=i):El(i,Or)>El(yr,Or)&&(yr=i):Or>=yr?(i<yr&&(yr=i),i>Or&&(Or=i)):i>QA?El(yr,i)>El(yr,Or)&&(Or=i):El(i,Or)>El(yr,Or)&&(yr=i)}else Xd.push(jf=[yr=i,Or=i]);e<Ga&&(Ga=e),e>Il&&(Il=e),V1=t,QA=i}function CH(){sf.point=bee}function RH(){jf[0]=yr,jf[1]=Or,sf.point=GI,V1=null}function wee(i,e){if(V1){var t=i-QA;T_.add(Gi(t)>180?t+(t>0?360:-360):t)}else _ee=i,xee=e;Vf.point(i,e),bee(i,e)}function sEe(){Vf.lineStart()}function oEe(){wee(_ee,xee),Vf.lineEnd(),Gi(T_)>ti&&(yr=-(Or=180)),jf[0]=yr,jf[1]=Or,V1=null}function El(i,e){return(e-=i)<0?e+360:e}function aEe(i,e){return i[0]-e[0]}function PH(i,e){return i[0]<=i[1]?i[0]<=e&&e<=i[1]:e<i[0]||i[1]<e}function See(i){var e,t,n,r,s,o,a;if(Il=Or=-(yr=Ga=1/0),Xd=[],z4(i,sf),t=Xd.length){for(Xd.sort(aEe),e=1,n=Xd[0],s=[n];e<t;++e)r=Xd[e],PH(n,r[0])||PH(n,r[1])?(El(n[0],r[1])>El(n[0],n[1])&&(n[1]=r[1]),El(r[0],n[1])>El(n[0],n[1])&&(n[0]=r[0])):s.push(n=r);for(o=-1/0,t=s.length-1,e=0,n=s[t];e<=t;n=r,++e)r=s[e],(a=El(n[1],r[0]))>o&&(o=a,yr=r[0],Or=n[1])}return Xd=jf=null,yr===1/0||Ga===1/0?[[NaN,NaN],[NaN,NaN]]:[[yr,Ga],[Or,Il]]}var X2,NE,DE,LE,OE,FE,kE,UE,HI,qI,VI,Mee,Tee,ca,ha,fa,pc={sphere:Oo,point:UO,lineStart:BH,lineEnd:IH,polygonStart:function(){pc.lineStart=cEe,pc.lineEnd=hEe},polygonEnd:function(){pc.lineStart=BH,pc.lineEnd=IH}};function UO(i,e){i*=Rn,e*=Rn;var t=Nn(e);bb(t*Nn(i),t*bn(i),bn(e))}function bb(i,e,t){++X2,DE+=(i-DE)/X2,LE+=(e-LE)/X2,OE+=(t-OE)/X2}function BH(){pc.point=lEe}function lEe(i,e){i*=Rn,e*=Rn;var t=Nn(e);ca=t*Nn(i),ha=t*bn(i),fa=bn(e),pc.point=uEe,bb(ca,ha,fa)}function uEe(i,e){i*=Rn,e*=Rn;var t=Nn(e),n=t*Nn(i),r=t*bn(i),s=bn(e),o=Ou(Hf((o=ha*s-fa*r)*o+(o=fa*n-ca*s)*o+(o=ca*r-ha*n)*o),ca*n+ha*r+fa*s);NE+=o,FE+=o*(ca+(ca=n)),kE+=o*(ha+(ha=r)),UE+=o*(fa+(fa=s)),bb(ca,ha,fa)}function IH(){pc.point=UO}function cEe(){pc.point=fEe}function hEe(){Eee(Mee,Tee),pc.point=UO}function fEe(i,e){Mee=i,Tee=e,i*=Rn,e*=Rn,pc.point=Eee;var t=Nn(e);ca=t*Nn(i),ha=t*bn(i),fa=bn(e),bb(ca,ha,fa)}function Eee(i,e){i*=Rn,e*=Rn;var t=Nn(e),n=t*Nn(i),r=t*bn(i),s=bn(e),o=ha*s-fa*r,a=fa*n-ca*s,l=ca*r-ha*n,u=OI(o,a,l),c=qf(u),h=u&&-c/u;HI.add(h*o),qI.add(h*a),VI.add(h*l),NE+=c,FE+=c*(ca+(ca=n)),kE+=c*(ha+(ha=r)),UE+=c*(fa+(fa=s)),bb(ca,ha,fa)}function NH(i){X2=NE=DE=LE=OE=FE=kE=UE=0,HI=new Sf,qI=new Sf,VI=new Sf,z4(i,pc);var e=+HI,t=+qI,n=+VI,r=OI(e,t,n);return r<EE&&(e=FE,t=kE,n=UE,NE<ti&&(e=DE,t=LE,n=OE),r=OI(e,t,n),r<EE)?[NaN,NaN]:[Ou(t,e)*kr,qf(n/r)*kr]}function jI(i,e){function t(n,r){return n=i(n,r),e(n[0],n[1])}return i.invert&&e.invert&&(t.invert=function(n,r){return n=e.invert(n,r),n&&i.invert(n[0],n[1])}),t}function $I(i,e){return Gi(i)>vi&&(i-=Math.round(i/$l)*$l),[i,e]}$I.invert=$I;function Cee(i,e,t){return(i%=$l)?e||t?jI(LH(i),OH(e,t)):LH(i):e||t?OH(e,t):$I}function DH(i){return function(e,t){return e+=i,Gi(e)>vi&&(e-=Math.round(e/$l)*$l),[e,t]}}function LH(i){var e=DH(i);return e.invert=DH(-i),e}function OH(i,e){var t=Nn(i),n=bn(i),r=Nn(e),s=bn(e);function o(a,l){var u=Nn(l),c=Nn(a)*u,h=bn(a)*u,f=bn(l),d=f*t+c*n;return[Ou(h*r-d*s,c*t-f*n),qf(d*r+h*s)]}return o.invert=function(a,l){var u=Nn(l),c=Nn(a)*u,h=bn(a)*u,f=bn(l),d=f*r-h*s;return[Ou(h*r+f*s,c*t+d*n),qf(d*t-c*n)]},o}function dEe(i){i=Cee(i[0]*Rn,i[1]*Rn,i.length>2?i[2]*Rn:0);function e(t){return t=i(t[0]*Rn,t[1]*Rn),t[0]*=kr,t[1]*=kr,t}return e.invert=function(t){return t=i.invert(t[0]*Rn,t[1]*Rn),t[0]*=kr,t[1]*=kr,t},e}function pEe(i,e,t,n,r,s){if(t){var o=Nn(e),a=bn(e),l=n*t;r==null?(r=e+n*$l,s=e-l/2):(r=FH(o,r),s=FH(o,s),(n>0?r<s:r>s)&&(r+=n*$l));for(var u,c=r;n>0?c>s:c<s;c-=l)u=BE([o,-a*Nn(c),-a*bn(c)]),i.point(u[0],u[1])}}function FH(i,e){e=J0(e),e[0]-=i,IE(e);var t=tEe(-e[1]);return((-e[2]<0?-t:t)+$l-ti)%$l}function Ree(){var i=[],e;return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){i.push(e=[])},lineEnd:Oo,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var t=i;return i=[],e=null,t}}}function IM(i,e){return Gi(i[0]-e[0])<ti&&Gi(i[1]-e[1])<ti}function u3(i,e,t,n){this.x=i,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function Pee(i,e,t,n,r){var s=[],o=[],a,l;if(i.forEach(function(p){if(!((v=p.length-1)<=0)){var v,b=p[0],_=p[v],M;if(IM(b,_)){if(!b[2]&&!_[2]){for(r.lineStart(),a=0;a<v;++a)r.point((b=p[a])[0],b[1]);r.lineEnd();return}_[0]+=2*ti}s.push(M=new u3(b,p,null,!0)),o.push(M.o=new u3(b,null,M,!1)),s.push(M=new u3(_,p,null,!1)),o.push(M.o=new u3(_,null,M,!0))}}),!!s.length){for(o.sort(e),kH(s),kH(o),a=0,l=o.length;a<l;++a)o[a].e=t=!t;for(var u=s[0],c,h;;){for(var f=u,d=!0;f.v;)if((f=f.n)===u)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,l=c.length;a<l;++a)r.point((h=c[a])[0],h[1]);else n(f.x,f.n.x,1,r);f=f.n}else{if(d)for(c=f.p.z,a=c.length-1;a>=0;--a)r.point((h=c[a])[0],h[1]);else n(f.x,f.p.x,-1,r);f=f.p}f=f.o,c=f.z,d=!d}while(!f.v);r.lineEnd()}}}function kH(i){if(e=i.length){for(var e,t=0,n=i[0],r;++t<e;)n.n=r=i[t],r.p=n,n=r;n.n=r=i[0],r.p=n}}function Q8(i){return Gi(i[0])<=vi?i[0]:eEe(i[0])*((Gi(i[0])+vi)%$l-vi)}function Bee(i,e){var t=Q8(e),n=e[1],r=bn(n),s=[bn(t),-Nn(t),0],o=0,a=0,l=new Sf;r===1?n=Ru+ti:r===-1&&(n=-Ru-ti);for(var u=0,c=i.length;u<c;++u)if(f=(h=i[u]).length)for(var h,f,d=h[f-1],p=Q8(d),v=d[1]/2+CE,b=bn(v),_=Nn(v),M=0;M<f;++M,p=R,b=I,_=D,d=E){var E=h[M],R=Q8(E),L=E[1]/2+CE,I=bn(L),D=Nn(L),k=R-p,G=k>=0?1:-1,O=G*k,U=O>vi,Q=b*I;if(l.add(Ou(Q*G*bn(O),_*D+Q*Nn(O))),o+=U?k+G*$l:k,U^p>=t^R>=t){var X=Ty(J0(d),J0(E));IE(X);var ee=Ty(s,X);IE(ee);var K=(U^k>=0?-1:1)*qf(ee[2]);(n>K||n===K&&(X[0]||X[1]))&&(a+=U^k>=0?1:-1)}}return(o<-ti||o<ti&&l<-EE)^a&1}function Iee(i,e,t,n){return function(r){var s=e(r),o=Ree(),a=e(o),l=!1,u,c,h,f={point:d,lineStart:v,lineEnd:b,polygonStart:function(){f.point=_,f.lineStart=M,f.lineEnd=E,c=[],u=[]},polygonEnd:function(){f.point=d,f.lineStart=v,f.lineEnd=b,c=Tx(c);var R=Bee(u,n);c.length?(l||(r.polygonStart(),l=!0),Pee(c,mEe,R,t,r)):R&&(l||(r.polygonStart(),l=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(R,L){i(R,L)&&r.point(R,L)}function p(R,L){s.point(R,L)}function v(){f.point=p,s.lineStart()}function b(){f.point=d,s.lineEnd()}function _(R,L){h.push([R,L]),a.point(R,L)}function M(){a.lineStart(),h=[]}function E(){_(h[0][0],h[0][1]),a.lineEnd();var R=a.clean(),L=o.result(),I,D=L.length,k,G,O;if(h.pop(),u.push(h),h=null,!!D){if(R&1){if(G=L[0],(k=G.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),I=0;I<k;++I)r.point((O=G[I])[0],O[1]);r.lineEnd()}return}D>1&&R&2&&L.push(L.pop().concat(L.shift())),c.push(L.filter(AEe))}}return f}}function AEe(i){return i.length>1}function mEe(i,e){return((i=i.x)[0]<0?i[1]-Ru-ti:Ru-i[1])-((e=e.x)[0]<0?e[1]-Ru-ti:Ru-e[1])}const UH=Iee(function(){return!0},gEe,vEe,[-vi,-Ru]);function gEe(i){var e=NaN,t=NaN,n=NaN,r;return{lineStart:function(){i.lineStart(),r=1},point:function(s,o){var a=s>0?vi:-vi,l=Gi(s-e);Gi(l-vi)<ti?(i.point(e,t=(t+o)/2>0?Ru:-Ru),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(a,t),i.point(s,t),r=0):n!==a&&l>=vi&&(Gi(e-n)<ti&&(e-=n*ti),Gi(s-a)<ti&&(s-=a*ti),t=yEe(e,t,s,o),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(a,t),r=0),i.point(e=s,t=o),n=a},lineEnd:function(){i.lineEnd(),e=t=NaN},clean:function(){return 2-r}}}function yEe(i,e,t,n){var r,s,o=bn(i-t);return Gi(o)>ti?mee((bn(e)*(s=Nn(n))*bn(t)-bn(n)*(r=Nn(e))*bn(i))/(r*s*o)):(e+n)/2}function vEe(i,e,t,n){var r;if(i==null)r=t*Ru,n.point(-vi,r),n.point(0,r),n.point(vi,r),n.point(vi,0),n.point(vi,-r),n.point(0,-r),n.point(-vi,-r),n.point(-vi,0),n.point(-vi,r);else if(Gi(i[0]-e[0])>ti){var s=i[0]<e[0]?vi:-vi;r=t*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(e[0],e[1])}function _Ee(i){var e=Nn(i),t=2*Rn,n=e>0,r=Gi(e)>ti;function s(c,h,f,d){pEe(d,i,t,f,c,h)}function o(c,h){return Nn(c)*Nn(h)>e}function a(c){var h,f,d,p,v;return{lineStart:function(){p=d=!1,v=1},point:function(b,_){var M=[b,_],E,R=o(b,_),L=n?R?0:u(b,_):R?u(b+(b<0?vi:-vi),_):0;if(!h&&(p=d=R)&&c.lineStart(),R!==d&&(E=l(h,M),(!E||IM(h,E)||IM(M,E))&&(M[2]=1)),R!==d)v=0,R?(c.lineStart(),E=l(M,h),c.point(E[0],E[1])):(E=l(h,M),c.point(E[0],E[1],2),c.lineEnd()),h=E;else if(r&&h&&n^R){var I;!(L&f)&&(I=l(M,h,!0))&&(v=0,n?(c.lineStart(),c.point(I[0][0],I[0][1]),c.point(I[1][0],I[1][1]),c.lineEnd()):(c.point(I[1][0],I[1][1]),c.lineEnd(),c.lineStart(),c.point(I[0][0],I[0][1],3)))}R&&(!h||!IM(h,M))&&c.point(M[0],M[1]),h=M,d=R,f=L},lineEnd:function(){d&&c.lineEnd(),h=null},clean:function(){return v|(p&&d)<<1}}}function l(c,h,f){var d=J0(c),p=J0(h),v=[1,0,0],b=Ty(d,p),_=a3(b,b),M=b[0],E=_-M*M;if(!E)return!f&&c;var R=e*_/E,L=-e*M/E,I=Ty(v,b),D=l3(v,R),k=l3(b,L);Y8(D,k);var G=I,O=a3(D,G),U=a3(G,G),Q=O*O-U*(a3(D,D)-1);if(!(Q<0)){var X=Hf(Q),ee=l3(G,(-O-X)/U);if(Y8(ee,D),ee=BE(ee),!f)return ee;var K=c[0],Z=h[0],he=c[1],j=h[1],ie;Z<K&&(ie=K,K=Z,Z=ie);var ae=Z-K,pe=Gi(ae-vi)<ti,Pe=pe||ae<ti;if(!pe&&j<he&&(ie=he,he=j,j=ie),Pe?pe?he+j>0^ee[1]<(Gi(ee[0]-K)<ti?he:j):he<=ee[1]&&ee[1]<=j:ae>vi^(K<=ee[0]&&ee[0]<=Z)){var He=l3(G,(-O+X)/U);return Y8(He,D),[ee,BE(He)]}}}function u(c,h){var f=n?i:vi-i,d=0;return c<-f?d|=1:c>f&&(d|=2),h<-f?d|=4:h>f&&(d|=8),d}return Iee(o,a,s,n?[0,-i]:[-vi,i-vi])}function xEe(i,e,t,n,r,s){var o=i[0],a=i[1],l=e[0],u=e[1],c=0,h=1,f=l-o,d=u-a,p;if(p=t-o,!(!f&&p>0)){if(p/=f,f<0){if(p<c)return;p<h&&(h=p)}else if(f>0){if(p>h)return;p>c&&(c=p)}if(p=r-o,!(!f&&p<0)){if(p/=f,f<0){if(p>h)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<h&&(h=p)}if(p=n-a,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>c&&(c=p)}if(p=s-a,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<h&&(h=p)}return c>0&&(i[0]=o+c*f,i[1]=a+c*d),h<1&&(e[0]=o+h*f,e[1]=a+h*d),!0}}}}}var Y2=1e9,c3=-Y2;function bEe(i,e,t,n){function r(u,c){return i<=u&&u<=t&&e<=c&&c<=n}function s(u,c,h,f){var d=0,p=0;if(u==null||(d=o(u,h))!==(p=o(c,h))||l(u,c)<0^h>0)do f.point(d===0||d===3?i:t,d>1?n:e);while((d=(d+h+4)%4)!==p);else f.point(c[0],c[1])}function o(u,c){return Gi(u[0]-i)<ti?c>0?0:3:Gi(u[0]-t)<ti?c>0?2:1:Gi(u[1]-e)<ti?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var h=o(u,1),f=o(c,1);return h!==f?h-f:h===0?c[1]-u[1]:h===1?u[0]-c[0]:h===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,h=Ree(),f,d,p,v,b,_,M,E,R,L,I,D={point:k,lineStart:Q,lineEnd:X,polygonStart:O,polygonEnd:U};function k(K,Z){r(K,Z)&&c.point(K,Z)}function G(){for(var K=0,Z=0,he=d.length;Z<he;++Z)for(var j=d[Z],ie=1,ae=j.length,pe=j[0],Pe,He,Se=pe[0],Oe=pe[1];ie<ae;++ie)Pe=Se,He=Oe,pe=j[ie],Se=pe[0],Oe=pe[1],He<=n?Oe>n&&(Se-Pe)*(n-He)>(Oe-He)*(i-Pe)&&++K:Oe<=n&&(Se-Pe)*(n-He)<(Oe-He)*(i-Pe)&&--K;return K}function O(){c=h,f=[],d=[],I=!0}function U(){var K=G(),Z=I&&K,he=(f=Tx(f)).length;(Z||he)&&(u.polygonStart(),Z&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),he&&Pee(f,a,K,s,u),u.polygonEnd()),c=u,f=d=p=null}function Q(){D.point=ee,d&&d.push(p=[]),L=!0,R=!1,M=E=NaN}function X(){f&&(ee(v,b),_&&R&&h.rejoin(),f.push(h.result())),D.point=k,R&&c.lineEnd()}function ee(K,Z){var he=r(K,Z);if(d&&p.push([K,Z]),L)v=K,b=Z,_=he,L=!1,he&&(c.lineStart(),c.point(K,Z));else if(he&&R)c.point(K,Z);else{var j=[M=Math.max(c3,Math.min(Y2,M)),E=Math.max(c3,Math.min(Y2,E))],ie=[K=Math.max(c3,Math.min(Y2,K)),Z=Math.max(c3,Math.min(Y2,Z))];xEe(j,ie,i,e,t,n)?(R||(c.lineStart(),c.point(j[0],j[1])),c.point(ie[0],ie[1]),he||c.lineEnd(),I=!1):he&&(c.lineStart(),c.point(K,Z),I=!1)}M=K,E=Z,R=he}return D}}var WI,XI,NM,DM,Ey={sphere:Oo,point:Oo,lineStart:wEe,lineEnd:Oo,polygonStart:Oo,polygonEnd:Oo};function wEe(){Ey.point=MEe,Ey.lineEnd=SEe}function SEe(){Ey.point=Ey.lineEnd=Oo}function MEe(i,e){i*=Rn,e*=Rn,XI=i,NM=bn(e),DM=Nn(e),Ey.point=TEe}function TEe(i,e){i*=Rn,e*=Rn;var t=bn(e),n=Nn(e),r=Gi(i-XI),s=Nn(r),o=bn(r),a=n*o,l=DM*t-NM*n*s,u=NM*t+DM*n*s;WI.add(Ou(Hf(a*a+l*l),u)),XI=i,NM=t,DM=n}function EEe(i){return WI=new Sf,z4(i,Ey),+WI}var YI=[null,null],CEe={type:"LineString",coordinates:YI};function Dp(i,e){return YI[0]=i,YI[1]=e,EEe(CEe)}var zH={Feature:function(i,e){return zE(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)if(zE(t[n].geometry,e))return!0;return!1}},GH={Sphere:function(){return!0},Point:function(i,e){return HH(i.coordinates,e)},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(HH(t[n],e))return!0;return!1},LineString:function(i,e){return qH(i.coordinates,e)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(qH(t[n],e))return!0;return!1},Polygon:function(i,e){return VH(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(VH(t[n],e))return!0;return!1},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)if(zE(t[n],e))return!0;return!1}};function zE(i,e){return i&&GH.hasOwnProperty(i.type)?GH[i.type](i,e):!1}function HH(i,e){return Dp(i,e)===0}function qH(i,e){for(var t,n,r,s=0,o=i.length;s<o;s++){if(n=Dp(i[s],e),n===0||s>0&&(r=Dp(i[s],i[s-1]),r>0&&t<=r&&n<=r&&(t+n-r)*(1-Math.pow((t-n)/r,2))<EE*r))return!0;t=n}return!1}function VH(i,e){return!!Bee(i.map(REe),Nee(e))}function REe(i){return i=i.map(Nee),i.pop(),i}function Nee(i){return[i[0]*Rn,i[1]*Rn]}function PEe(i,e){return(i&&zH.hasOwnProperty(i.type)?zH[i.type]:zE)(i,e)}function jH(i,e,t){var n=g1(i,e-ti,t).concat(e);return function(r){return n.map(function(s){return[r,s]})}}function $H(i,e,t){var n=g1(i,e-ti,t).concat(e);return function(r){return n.map(function(s){return[s,r]})}}function BEe(){var i,e,t,n,r,s,o,a,l=10,u=l,c=90,h=360,f,d,p,v,b=2.5;function _(){return{type:"MultiLineString",coordinates:M()}}function M(){return g1(o3(n/c)*c,t,c).map(p).concat(g1(o3(a/h)*h,o,h).map(v)).concat(g1(o3(e/l)*l,i,l).filter(function(E){return Gi(E%c)>ti}).map(f)).concat(g1(o3(s/u)*u,r,u).filter(function(E){return Gi(E%h)>ti}).map(d))}return _.lines=function(){return M().map(function(E){return{type:"LineString",coordinates:E}})},_.outline=function(){return{type:"Polygon",coordinates:[p(n).concat(v(o).slice(1),p(t).reverse().slice(1),v(a).reverse().slice(1))]}},_.extent=function(E){return arguments.length?_.extentMajor(E).extentMinor(E):_.extentMinor()},_.extentMajor=function(E){return arguments.length?(n=+E[0][0],t=+E[1][0],a=+E[0][1],o=+E[1][1],n>t&&(E=n,n=t,t=E),a>o&&(E=a,a=o,o=E),_.precision(b)):[[n,a],[t,o]]},_.extentMinor=function(E){return arguments.length?(e=+E[0][0],i=+E[1][0],s=+E[0][1],r=+E[1][1],e>i&&(E=e,e=i,i=E),s>r&&(E=s,s=r,r=E),_.precision(b)):[[e,s],[i,r]]},_.step=function(E){return arguments.length?_.stepMajor(E).stepMinor(E):_.stepMinor()},_.stepMajor=function(E){return arguments.length?(c=+E[0],h=+E[1],_):[c,h]},_.stepMinor=function(E){return arguments.length?(l=+E[0],u=+E[1],_):[l,u]},_.precision=function(E){return arguments.length?(b=+E,f=jH(s,r,90),d=$H(e,i,b),p=jH(a,o,90),v=$H(n,t,b),_):b},_.extentMajor([[-180,-90+ti],[180,90-ti]]).extentMinor([[-180,-80-ti],[180,80+ti]])}function IEe(){return BEe()()}function zO(i,e){var t=i[0]*Rn,n=i[1]*Rn,r=e[0]*Rn,s=e[1]*Rn,o=Nn(n),a=bn(n),l=Nn(s),u=bn(s),c=o*Nn(t),h=o*bn(t),f=l*Nn(r),d=l*bn(r),p=2*qf(Hf(wH(s-n)+o*l*wH(r-t))),v=bn(p),b=p?function(_){var M=bn(_*=p)/v,E=bn(p-_)/v,R=E*c+M*f,L=E*h+M*d,I=E*a+M*u;return[Ou(L,R)*kr,Ou(I,Hf(R*R+L*L))*kr]}:function(){return[t*kr,n*kr]};return b.distance=p,b}const WH=i=>i;var Cy=1/0,GE=Cy,Ex=-Cy,HE=Ex,XH={point:NEe,lineStart:Oo,lineEnd:Oo,polygonStart:Oo,polygonEnd:Oo,result:function(){var i=[[Cy,GE],[Ex,HE]];return Ex=HE=-(GE=Cy=1/0),i}};function NEe(i,e){i<Cy&&(Cy=i),i>Ex&&(Ex=i),e<GE&&(GE=e),e>HE&&(HE=e)}function GO(i){return function(e){var t=new QI;for(var n in i)t[n]=i[n];return t.stream=e,t}}function QI(){}QI.prototype={constructor:QI,point:function(i,e){this.stream.point(i,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function HO(i,e,t){var n=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),n!=null&&i.clipExtent(null),z4(t,i.stream(XH)),e(XH.result()),n!=null&&i.clipExtent(n),i}function Dee(i,e,t){return HO(i,function(n){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,l=+e[0][1]+(s-o*(n[1][1]+n[0][1]))/2;i.scale(150*o).translate([a,l])},t)}function DEe(i,e,t){return Dee(i,[[0,0],e],t)}function LEe(i,e,t){return HO(i,function(n){var r=+e,s=r/(n[1][0]-n[0][0]),o=(r-s*(n[1][0]+n[0][0]))/2,a=-s*n[0][1];i.scale(150*s).translate([o,a])},t)}function OEe(i,e,t){return HO(i,function(n){var r=+e,s=r/(n[1][1]-n[0][1]),o=-s*n[0][0],a=(r-s*(n[1][1]+n[0][1]))/2;i.scale(150*s).translate([o,a])},t)}var YH=16,FEe=Nn(30*Rn);function QH(i,e){return+e?UEe(i,e):kEe(i)}function kEe(i){return GO({point:function(e,t){e=i(e,t),this.stream.point(e[0],e[1])}})}function UEe(i,e){function t(n,r,s,o,a,l,u,c,h,f,d,p,v,b){var _=u-n,M=c-r,E=_*_+M*M;if(E>4*e&&v--){var R=o+f,L=a+d,I=l+p,D=Hf(R*R+L*L+I*I),k=qf(I/=D),G=Gi(Gi(I)-1)<ti||Gi(s-h)<ti?(s+h)/2:Ou(L,R),O=i(G,k),U=O[0],Q=O[1],X=U-n,ee=Q-r,K=M*X-_*ee;(K*K/E>e||Gi((_*X+M*ee)/E-.5)>.3||o*f+a*d+l*p<FEe)&&(t(n,r,s,o,a,l,U,Q,G,R/=D,L/=D,I,v,b),b.point(U,Q),t(U,Q,G,R,L,I,u,c,h,f,d,p,v,b))}}return function(n){var r,s,o,a,l,u,c,h,f,d,p,v,b={point:_,lineStart:M,lineEnd:R,polygonStart:function(){n.polygonStart(),b.lineStart=L},polygonEnd:function(){n.polygonEnd(),b.lineStart=M}};function _(k,G){k=i(k,G),n.point(k[0],k[1])}function M(){h=NaN,b.point=E,n.lineStart()}function E(k,G){var O=J0([k,G]),U=i(k,G);t(h,f,c,d,p,v,h=U[0],f=U[1],c=k,d=O[0],p=O[1],v=O[2],YH,n),n.point(h,f)}function R(){b.point=_,n.lineEnd()}function L(){M(),b.point=I,b.lineEnd=D}function I(k,G){E(r=k,G),s=h,o=f,a=d,l=p,u=v,b.point=E}function D(){t(h,f,c,d,p,v,s,o,r,a,l,u,YH,n),b.lineEnd=R,R()}return b}}var zEe=GO({point:function(i,e){this.stream.point(i*Rn,e*Rn)}});function GEe(i){return GO({point:function(e,t){var n=i(e,t);return this.stream.point(n[0],n[1])}})}function HEe(i,e,t,n,r){function s(o,a){return o*=n,a*=r,[e+i*o,t-i*a]}return s.invert=function(o,a){return[(o-e)/i*n,(t-a)/i*r]},s}function KH(i,e,t,n,r,s){if(!s)return HEe(i,e,t,n,r);var o=Nn(s),a=bn(s),l=o*i,u=a*i,c=o/i,h=a/i,f=(a*t-o*e)/i,d=(a*e+o*t)/i;function p(v,b){return v*=n,b*=r,[l*v-u*b+e,t-u*v-l*b]}return p.invert=function(v,b){return[n*(c*v-h*b+f),r*(d-h*v-c*b)]},p}function qEe(i){return VEe(function(){return i})()}function VEe(i){var e,t=150,n=480,r=250,s=0,o=0,a=0,l=0,u=0,c,h=0,f=1,d=1,p=null,v=UH,b=null,_,M,E,R=WH,L=.5,I,D,k,G,O;function U(K){return k(K[0]*Rn,K[1]*Rn)}function Q(K){return K=k.invert(K[0],K[1]),K&&[K[0]*kr,K[1]*kr]}U.stream=function(K){return G&&O===K?G:G=zEe(GEe(c)(v(I(R(O=K)))))},U.preclip=function(K){return arguments.length?(v=K,p=void 0,ee()):v},U.postclip=function(K){return arguments.length?(R=K,b=_=M=E=null,ee()):R},U.clipAngle=function(K){return arguments.length?(v=+K?_Ee(p=K*Rn):(p=null,UH),ee()):p*kr},U.clipExtent=function(K){return arguments.length?(R=K==null?(b=_=M=E=null,WH):bEe(b=+K[0][0],_=+K[0][1],M=+K[1][0],E=+K[1][1]),ee()):b==null?null:[[b,_],[M,E]]},U.scale=function(K){return arguments.length?(t=+K,X()):t},U.translate=function(K){return arguments.length?(n=+K[0],r=+K[1],X()):[n,r]},U.center=function(K){return arguments.length?(s=K[0]%360*Rn,o=K[1]%360*Rn,X()):[s*kr,o*kr]},U.rotate=function(K){return arguments.length?(a=K[0]%360*Rn,l=K[1]%360*Rn,u=K.length>2?K[2]%360*Rn:0,X()):[a*kr,l*kr,u*kr]},U.angle=function(K){return arguments.length?(h=K%360*Rn,X()):h*kr},U.reflectX=function(K){return arguments.length?(f=K?-1:1,X()):f<0},U.reflectY=function(K){return arguments.length?(d=K?-1:1,X()):d<0},U.precision=function(K){return arguments.length?(I=QH(D,L=K*K),ee()):Hf(L)},U.fitExtent=function(K,Z){return Dee(U,K,Z)},U.fitSize=function(K,Z){return DEe(U,K,Z)},U.fitWidth=function(K,Z){return LEe(U,K,Z)},U.fitHeight=function(K,Z){return OEe(U,K,Z)};function X(){var K=KH(t,0,0,f,d,h).apply(null,e(s,o)),Z=KH(t,n-K[0],r-K[1],f,d,h);return c=Cee(a,l,u),D=jI(e,Z),k=jI(c,D),I=QH(D,L),ee()}function ee(){return G=O=null,U}return function(){return e=i.apply(this,arguments),U.invert=e.invert&&Q,X()}}function jEe(i){return function(e,t){var n=Hf(e*e+t*t),r=i(n),s=bn(r),o=Nn(r);return[Ou(e*s,n*o),qf(n&&t*s/n)]}}function Lee(i,e){var t=Nn(e),n=1+Nn(i)*t;return[t*bn(i)/n,bn(e)/n]}Lee.invert=jEe(function(i){return 2*mee(i)});function $Ee(){return qEe(Lee).scale(250).clipAngle(142)}function JH(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function WEe(i){if(Array.isArray(i))return i}function XEe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function YEe(i,e,t){return e=qE(e),nCe(i,Oee()?Reflect.construct(e,[],qE(i).constructor):e.apply(i,t))}function QEe(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function KEe(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function JEe(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=Fee(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){t=t.call(i)},n:function(){var l=t.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||t.return==null||t.return()}finally{if(a)throw s}}}}function qE(i){return qE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qE(i)}function ZEe(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&KI(i,e)}function Oee(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oee=function(){return!!i})()}function eCe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function tCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nCe(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XEe(i)}function KI(i,e){return KI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},KI(i,e)}function g2(i,e){return WEe(i)||eCe(i,e)||Fee(i,e)||tCe()}function Fee(i,e){if(i){if(typeof i=="string")return JH(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?JH(i,e):void 0}}var ZH=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=[],r=null;return e.forEach(function(s){if(r){var o=Dp(s,r)*180/Math.PI;if(o>t)for(var a=zO(r,s),l=1/Math.ceil(o/t),u=l;u<1;)n.push(a(u)),u+=l}n.push(r=s)}),n},JI=typeof window<"u"&&window.THREE?window.THREE:{BufferGeometry:fn,Float32BufferAttribute:Ht},iCe=new JI.BufferGeometry().setAttribute?"setAttribute":"addAttribute",kee=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;QEe(this,e),n=YEe(this,e),n.type="GeoJsonGeometry",n.parameters={geoJson:t,radius:r,resolution:s};var o=({Point:c,MultiPoint:h,LineString:f,MultiLineString:d,Polygon:p,MultiPolygon:v}[t.type]||function(){return[]})(t.coordinates,r),a=[],l=[],u=0;o.forEach(function(b){var _=a.length;y2({indices:a,vertices:l},b),n.addGroup(_,a.length-_,u++)}),a.length&&n.setIndex(a),l.length&&n[iCe]("position",new JI.Float32BufferAttribute(l,3));function c(b,_){var M=K8(b[1],b[0],_),E=[];return[{vertices:M,indices:E}]}function h(b,_){var M={vertices:[],indices:[]};return b.map(function(E){return c(E,_)}).forEach(function(E){var R=g2(E,1),L=R[0];y2(M,L)}),[M]}function f(b,_){for(var M=ZH(b,s).map(function(k){var G=g2(k,2),O=G[0],U=G[1];return K8(U,O,_)}),E=SE([M]),R=E.vertices,L=Math.round(R.length/3),I=[],D=1;D<L;D++)I.push(D-1,D);return[{vertices:R,indices:I}]}function d(b,_){var M={vertices:[],indices:[]};return b.map(function(E){return f(E,_)}).forEach(function(E){var R=g2(E,1),L=R[0];y2(M,L)}),[M]}function p(b,_){for(var M=b.map(function(K){return ZH(K,s).map(function(Z){var he=g2(Z,2),j=he[0],ie=he[1];return K8(ie,j,_)})}),E=SE(M),R=E.vertices,L=E.holes,I=L[0]||1/0,D=R.slice(0,I*3),k=R.slice(I*3),G=new Set(L),O=Math.round(R.length/3),U=[],Q=[],X=1;X<O;X++)G.has(X)||(X<I?U.push(X-1,X):Q.push(X-1-I,X-I));var ee=[{indices:U,vertices:D}];return L.length&&ee.push({indices:Q,vertices:k}),ee}function v(b,_){var M={vertices:[],indices:[]},E={vertices:[],indices:[]};b.map(function(L){return p(L,_)}).forEach(function(L){var I=g2(L,2),D=I[0],k=I[1];y2(M,D),k&&y2(E,k)});var R=[M];return E.vertices.length&&R.push(E),R}return n}return ZEe(e,i),KEe(e)}(JI.BufferGeometry);function y2(i,e){var t=Math.round(i.vertices.length/3);eq(i.vertices,e.vertices),eq(i.indices,e.indices.map(function(n){return n+t}))}function eq(i,e){var t=JEe(e),n;try{for(t.s();!(n=t.n()).done;){var r=n.value;i.push(r)}}catch(s){t.e(s)}finally{t.f()}}function K8(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(r),t*Math.cos(n),t*Math.sin(n)*Math.sin(r)]}function rCe(i,e,t=!0){if(!e||!e.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!i.hasAttribute("position")||!i.hasAttribute("normal")||!i.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function n(o){if(o.normalized||o.isInterleavedBufferAttribute){const a=new Float32Array(o.count*o.itemSize);for(let l=0,u=0;l<o.count;l++)a[u++]=o.getX(l),a[u++]=o.getY(l),o.itemSize>2&&(a[u++]=o.getZ(l));return a}return o.array instanceof Float32Array?o.array:new Float32Array(o.array)}const r=i.index?i.toNonIndexed():i,s=e.generateTangents(n(r.attributes.position),n(r.attributes.normal),n(r.attributes.uv));if(t)for(let o=3;o<s.length;o+=4)s[o]*=-1;return r.setAttribute("tangent",new Kn(s,4)),i!==r&&i.copy(r),i}function sCe(i,e=!1){const t=i[0].index!==null,n=new Set(Object.keys(i[0].attributes)),r=new Set(Object.keys(i[0].morphAttributes)),s={},o={},a=i[0].morphTargetsRelative,l=new fn;let u=0;for(let c=0;c<i.length;++c){const h=i[c];let f=0;if(t!==(h.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const d in h.attributes){if(!n.has(d))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+d+'" attribute exists among all geometries, or in none of them.'),null;s[d]===void 0&&(s[d]=[]),s[d].push(h.attributes[d]),f++}if(f!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(a!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const d in h.morphAttributes){if(!r.has(d))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;o[d]===void 0&&(o[d]=[]),o[d].push(h.morphAttributes[d])}if(e){let d;if(t)d=h.index.count;else if(h.attributes.position!==void 0)d=h.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,d,c),u+=d}}if(t){let c=0;const h=[];for(let f=0;f<i.length;++f){const d=i[f].index;for(let p=0;p<d.count;++p)h.push(d.getX(p)+c);c+=i[f].attributes.position.count}l.setIndex(h)}for(const c in s){const h=ZI(s[c]);if(!h)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,h)}for(const c in o){const h=o[c][0].length;if(h===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let f=0;f<h;++f){const d=[];for(let v=0;v<o[c].length;++v)d.push(o[c][v][f]);const p=ZI(d);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(p)}}return l}function ZI(i){let e,t,n,r=-1,s=0;for(let u=0;u<i.length;++u){const c=i[u];if(e===void 0&&(e=c.array.constructor),e!==c.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=c.itemSize),t!==c.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=c.normalized),n!==c.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(r===-1&&(r=c.gpuType),r!==c.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;s+=c.count*t}const o=new e(s),a=new Kn(o,t,n);let l=0;for(let u=0;u<i.length;++u){const c=i[u];if(c.isInterleavedBufferAttribute){const h=l/t;for(let f=0,d=c.count;f<d;f++)for(let p=0;p<t;p++){const v=c.getComponent(f,p);a.setComponent(f+h,p,v)}}else o.set(c.array,l);l+=c.count*t}return r!==void 0&&(a.gpuType=r),a}function oCe(i){return i.isInstancedInterleavedBufferAttribute||i.isInterleavedBufferAttribute?VE(i):i.isInstancedBufferAttribute?new Of().copy(i):new Kn().copy(i)}function aCe(i){let e,t=0,n=0;for(let u=0,c=i.length;u<c;++u){const h=i[u];if(e===void 0&&(e=h.array.constructor),e!==h.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;t+=h.array.length,n+=h.itemSize}const r=new $y(new e(t),n);let s=0;const o=[],a=["getX","getY","getZ","getW"],l=["setX","setY","setZ","setW"];for(let u=0,c=i.length;u<c;u++){const h=i[u],f=h.itemSize,d=h.count,p=new Ol(r,f,s,h.normalized);o.push(p),s+=f;for(let v=0;v<d;v++)for(let b=0;b<f;b++)p[l[b]](v,h[a[b]](v))}return o}function VE(i){const e=i.data.array.constructor,t=i.count,n=i.itemSize,r=i.normalized,s=new e(t*n);let o;i.isInstancedInterleavedBufferAttribute?o=new Of(s,n,r,i.meshPerAttribute):o=new Kn(s,n,r);for(let a=0;a<t;a++)o.setX(a,i.getX(a)),n>=2&&o.setY(a,i.getY(a)),n>=3&&o.setZ(a,i.getZ(a)),n>=4&&o.setW(a,i.getW(a));return o}function lCe(i){const e=i.attributes,t=i.morphTargets,n=new Map;for(const r in e){const s=e[r];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,VE(s)),e[r]=n.get(s))}for(const r in t){const s=t[r];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,VE(s)),t[r]=n.get(s))}}function uCe(i){let e=0;for(const n in i.attributes){const r=i.getAttribute(n);e+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}const t=i.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}function cCe(i,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},n=i.getIndex(),r=i.getAttribute("position"),s=n?n.count:r.count;let o=0;const a=Object.keys(i.attributes),l={},u={},c=[],h=["getX","getY","getZ","getW"],f=["setX","setY","setZ","setW"];for(let M=0,E=a.length;M<E;M++){const R=a[M],L=i.attributes[R];l[R]=new L.constructor(new L.array.constructor(L.count*L.itemSize),L.itemSize,L.normalized);const I=i.morphAttributes[R];I&&(u[R]||(u[R]=[]),I.forEach((D,k)=>{const G=new D.array.constructor(D.count*D.itemSize);u[R][k]=new D.constructor(G,D.itemSize,D.normalized)}))}const d=e*.5,p=Math.log10(1/e),v=Math.pow(10,p),b=d*v;for(let M=0;M<s;M++){const E=n?n.getX(M):M;let R="";for(let L=0,I=a.length;L<I;L++){const D=a[L],k=i.getAttribute(D),G=k.itemSize;for(let O=0;O<G;O++)R+=`${~~(k[h[O]](E)*v+b)},`}if(R in t)c.push(t[R]);else{for(let L=0,I=a.length;L<I;L++){const D=a[L],k=i.getAttribute(D),G=i.morphAttributes[D],O=k.itemSize,U=l[D],Q=u[D];for(let X=0;X<O;X++){const ee=h[X],K=f[X];if(U[K](o,k[ee](E)),G)for(let Z=0,he=G.length;Z<he;Z++)Q[Z][K](o,G[Z][ee](E))}}t[R]=o,c.push(o),o++}}const _=i.clone();for(const M in i.attributes){const E=l[M];if(_.setAttribute(M,new E.constructor(E.array.slice(0,o*E.itemSize),E.itemSize,E.normalized)),M in u)for(let R=0;R<u[M].length;R++){const L=u[M][R];_.morphAttributes[M][R]=new L.constructor(L.array.slice(0,o*L.itemSize),L.itemSize,L.normalized)}}return _.setIndex(c),_}function hCe(i,e){if(e===dL)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===hy||e===ZC){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(e===hy)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}function fCe(i){const e=new ne,t=new ne,n=new ne,r=new ne,s=new ne,o=new ne,a=new ne,l=new ne,u=new ne;function c(ie,ae,pe,Pe,He,Se,Oe,Ye){e.fromBufferAttribute(ae,He),t.fromBufferAttribute(ae,Se),n.fromBufferAttribute(ae,Oe);const it=ie.morphTargetInfluences;if(pe&&it){a.set(0,0,0),l.set(0,0,0),u.set(0,0,0);for(let Ct=0,qt=pe.length;Ct<qt;Ct++){const xt=it[Ct],yt=pe[Ct];xt!==0&&(r.fromBufferAttribute(yt,He),s.fromBufferAttribute(yt,Se),o.fromBufferAttribute(yt,Oe),Pe?(a.addScaledVector(r,xt),l.addScaledVector(s,xt),u.addScaledVector(o,xt)):(a.addScaledVector(r.sub(e),xt),l.addScaledVector(s.sub(t),xt),u.addScaledVector(o.sub(n),xt)))}e.add(a),t.add(l),n.add(u)}ie.isSkinnedMesh&&(ie.applyBoneTransform(He,e),ie.applyBoneTransform(Se,t),ie.applyBoneTransform(Oe,n)),Ye[He*3+0]=e.x,Ye[He*3+1]=e.y,Ye[He*3+2]=e.z,Ye[Se*3+0]=t.x,Ye[Se*3+1]=t.y,Ye[Se*3+2]=t.z,Ye[Oe*3+0]=n.x,Ye[Oe*3+1]=n.y,Ye[Oe*3+2]=n.z}const h=i.geometry,f=i.material;let d,p,v;const b=h.index,_=h.attributes.position,M=h.morphAttributes.position,E=h.morphTargetsRelative,R=h.attributes.normal,L=h.morphAttributes.position,I=h.groups,D=h.drawRange;let k,G,O,U,Q,X,ee;const K=new Float32Array(_.count*_.itemSize),Z=new Float32Array(R.count*R.itemSize);if(b!==null)if(Array.isArray(f))for(k=0,O=I.length;k<O;k++)for(Q=I[k],X=Math.max(Q.start,D.start),ee=Math.min(Q.start+Q.count,D.start+D.count),G=X,U=ee;G<U;G+=3)d=b.getX(G),p=b.getX(G+1),v=b.getX(G+2),c(i,_,M,E,d,p,v,K),c(i,R,L,E,d,p,v,Z);else for(X=Math.max(0,D.start),ee=Math.min(b.count,D.start+D.count),k=X,O=ee;k<O;k+=3)d=b.getX(k),p=b.getX(k+1),v=b.getX(k+2),c(i,_,M,E,d,p,v,K),c(i,R,L,E,d,p,v,Z);else if(Array.isArray(f))for(k=0,O=I.length;k<O;k++)for(Q=I[k],X=Math.max(Q.start,D.start),ee=Math.min(Q.start+Q.count,D.start+D.count),G=X,U=ee;G<U;G+=3)d=G,p=G+1,v=G+2,c(i,_,M,E,d,p,v,K),c(i,R,L,E,d,p,v,Z);else for(X=Math.max(0,D.start),ee=Math.min(_.count,D.start+D.count),k=X,O=ee;k<O;k+=3)d=k,p=k+1,v=k+2,c(i,_,M,E,d,p,v,K),c(i,R,L,E,d,p,v,Z);const he=new Ht(K,3),j=new Ht(Z,3);return{positionAttribute:_,normalAttribute:R,morphedPositionAttribute:he,morphedNormalAttribute:j}}function dCe(i){if(i.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),i;let e=i.groups;if(e=e.sort((o,a)=>o.materialIndex!==a.materialIndex?o.materialIndex-a.materialIndex:o.start-a.start),i.getIndex()===null){const o=i.getAttribute("position"),a=[];for(let l=0;l<o.count;l+=3)a.push(l,l+1,l+2);i.setIndex(a)}const t=i.getIndex(),n=[];for(let o=0;o<e.length;o++){const a=e[o],l=a.start,u=l+a.count;for(let c=l;c<u;c++)n.push(t.getX(c))}i.dispose(),i.setIndex(n);let r=0;for(let o=0;o<e.length;o++){const a=e[o];a.start=r,r+=a.count}let s=e[0];i.groups=[s];for(let o=1;o<e.length;o++){const a=e[o];s.materialIndex===a.materialIndex?s.count+=a.count:(s=a,i.groups.push(s))}return i}function pCe(i,e=Math.PI/3){const t=Math.cos(e),n=(1+1e-10)*100,r=[new ne,new ne,new ne],s=new ne,o=new ne,a=new ne,l=new ne;function u(v){const b=~~(v.x*n),_=~~(v.y*n),M=~~(v.z*n);return`${b},${_},${M}`}const c=i.index?i.toNonIndexed():i,h=c.attributes.position,f={};for(let v=0,b=h.count/3;v<b;v++){const _=3*v,M=r[0].fromBufferAttribute(h,_+0),E=r[1].fromBufferAttribute(h,_+1),R=r[2].fromBufferAttribute(h,_+2);s.subVectors(R,E),o.subVectors(M,E);const L=new ne().crossVectors(s,o).normalize();for(let I=0;I<3;I++){const D=r[I],k=u(D);k in f||(f[k]=[]),f[k].push(L)}}const d=new Float32Array(h.count*3),p=new Kn(d,3,!1);for(let v=0,b=h.count/3;v<b;v++){const _=3*v,M=r[0].fromBufferAttribute(h,_+0),E=r[1].fromBufferAttribute(h,_+1),R=r[2].fromBufferAttribute(h,_+2);s.subVectors(R,E),o.subVectors(M,E),a.crossVectors(s,o).normalize();for(let L=0;L<3;L++){const I=r[L],D=u(I),k=f[D];l.set(0,0,0);for(let G=0,O=k.length;G<O;G++){const U=k[G];a.dot(U)>t&&l.add(U)}l.normalize(),p.setXYZ(_+L,l.x,l.y,l.z)}}return c.setAttribute("normal",p),c}const qO=Object.freeze(Object.defineProperty({__proto__:null,computeMikkTSpaceTangents:rCe,computeMorphedAttributes:fCe,deepCloneAttribute:oCe,deinterleaveAttribute:VE,deinterleaveGeometry:lCe,estimateBytesUsed:uCe,interleaveAttributes:aCe,mergeAttributes:ZI,mergeGeometries:sCe,mergeGroups:dCe,mergeVertices:cCe,toCreasedNormals:pCe,toTrianglesDrawMode:hCe},Symbol.toStringTag,{value:"Module"}));var gt=function(i){return typeof i=="function"?i:typeof i=="string"?function(e){return e[i]}:function(e){return i}};function VO(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function Uee(i,e){var t=Object.create(i.prototype);for(var n in e)t[n]=e[n];return t}function wb(){}var Cx=.7,jE=1/Cx,j1="\\s*([+-]?\\d+)\\s*",Rx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ACe=/^#([0-9a-f]{3,8})$/,mCe=new RegExp(`^rgb\\(${j1},${j1},${j1}\\)$`),gCe=new RegExp(`^rgb\\(${lh},${lh},${lh}\\)$`),yCe=new RegExp(`^rgba\\(${j1},${j1},${j1},${Rx}\\)$`),vCe=new RegExp(`^rgba\\(${lh},${lh},${lh},${Rx}\\)$`),_Ce=new RegExp(`^hsl\\(${Rx},${lh},${lh}\\)$`),xCe=new RegExp(`^hsla\\(${Rx},${lh},${lh},${Rx}\\)$`),tq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};VO(wb,Z0,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:nq,formatHex:nq,formatHex8:bCe,formatHsl:wCe,formatRgb:iq,toString:iq});function nq(){return this.rgb().formatHex()}function bCe(){return this.rgb().formatHex8()}function wCe(){return zee(this).formatHsl()}function iq(){return this.rgb().formatRgb()}function Z0(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=ACe.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?rq(e):t===3?new ja(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?h3(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?h3(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=mCe.exec(i))?new ja(e[1],e[2],e[3],1):(e=gCe.exec(i))?new ja(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=yCe.exec(i))?h3(e[1],e[2],e[3],e[4]):(e=vCe.exec(i))?h3(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_Ce.exec(i))?aq(e[1],e[2]/100,e[3]/100,1):(e=xCe.exec(i))?aq(e[1],e[2]/100,e[3]/100,e[4]):tq.hasOwnProperty(i)?rq(tq[i]):i==="transparent"?new ja(NaN,NaN,NaN,0):null}function rq(i){return new ja(i>>16&255,i>>8&255,i&255,1)}function h3(i,e,t,n){return n<=0&&(i=e=t=NaN),new ja(i,e,t,n)}function SCe(i){return i instanceof wb||(i=Z0(i)),i?(i=i.rgb(),new ja(i.r,i.g,i.b,i.opacity)):new ja}function eN(i,e,t,n){return arguments.length===1?SCe(i):new ja(i,e,t,n??1)}function ja(i,e,t,n){this.r=+i,this.g=+e,this.b=+t,this.opacity=+n}VO(ja,eN,Uee(wb,{brighter(i){return i=i==null?jE:Math.pow(jE,i),new ja(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?Cx:Math.pow(Cx,i),new ja(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new ja(P0(this.r),P0(this.g),P0(this.b),$E(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sq,formatHex:sq,formatHex8:MCe,formatRgb:oq,toString:oq}));function sq(){return`#${m0(this.r)}${m0(this.g)}${m0(this.b)}`}function MCe(){return`#${m0(this.r)}${m0(this.g)}${m0(this.b)}${m0((isNaN(this.opacity)?1:this.opacity)*255)}`}function oq(){const i=$E(this.opacity);return`${i===1?"rgb(":"rgba("}${P0(this.r)}, ${P0(this.g)}, ${P0(this.b)}${i===1?")":`, ${i})`}`}function $E(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function P0(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function m0(i){return i=P0(i),(i<16?"0":"")+i.toString(16)}function aq(i,e,t,n){return n<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new fc(i,e,t,n)}function zee(i){if(i instanceof fc)return new fc(i.h,i.s,i.l,i.opacity);if(i instanceof wb||(i=Z0(i)),!i)return new fc;if(i instanceof fc)return i;i=i.rgb();var e=i.r/255,t=i.g/255,n=i.b/255,r=Math.min(e,t,n),s=Math.max(e,t,n),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(t-n)/a+(t<n)*6:t===s?o=(n-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new fc(o,a,l,i.opacity)}function TCe(i,e,t,n){return arguments.length===1?zee(i):new fc(i,e,t,n??1)}function fc(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}VO(fc,TCe,Uee(wb,{brighter(i){return i=i==null?jE:Math.pow(jE,i),new fc(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?Cx:Math.pow(Cx,i),new fc(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,r=2*t-n;return new ja(J8(i>=240?i-240:i+120,r,n),J8(i,r,n),J8(i<120?i+240:i-120,r,n),this.opacity)},clamp(){return new fc(lq(this.h),f3(this.s),f3(this.l),$E(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=$E(this.opacity);return`${i===1?"hsl(":"hsla("}${lq(this.h)}, ${f3(this.s)*100}%, ${f3(this.l)*100}%${i===1?")":`, ${i})`}`}}));function lq(i){return i=(i||0)%360,i<0?i+360:i}function f3(i){return Math.max(0,Math.min(1,i||0))}function J8(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function WE(i){"@babel/helpers - typeof";return WE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WE(i)}var ECe=/^\s+/,CCe=/\s+$/;function cn(i,e){if(i=i||"",e=e||{},i instanceof cn)return i;if(!(this instanceof cn))return new cn(i,e);var t=RCe(i);this._originalInput=i,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}cn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,r,s,o,a;return t=e.r/255,n=e.g/255,r=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*o+.0722*a},setAlpha:function(e){return this._a=Gee(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=cq(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=cq(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=uq(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=uq(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return hq(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return NCe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(hr(this._r,255)*100)+"%",g:Math.round(hr(this._g,255)*100)+"%",b:Math.round(hr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(hr(this._r,255)*100)+"%, "+Math.round(hr(this._g,255)*100)+"%, "+Math.round(hr(this._b,255)*100)+"%)":"rgba("+Math.round(hr(this._r,255)*100)+"%, "+Math.round(hr(this._g,255)*100)+"%, "+Math.round(hr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:jCe[hq(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+fq(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var s=cn(e);n="#"+fq(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,s=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return cn(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(FCe,arguments)},brighten:function(){return this._applyModification(kCe,arguments)},darken:function(){return this._applyModification(UCe,arguments)},desaturate:function(){return this._applyModification(DCe,arguments)},saturate:function(){return this._applyModification(LCe,arguments)},greyscale:function(){return this._applyModification(OCe,arguments)},spin:function(){return this._applyModification(zCe,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(qCe,arguments)},complement:function(){return this._applyCombination(GCe,arguments)},monochromatic:function(){return this._applyCombination(VCe,arguments)},splitcomplement:function(){return this._applyCombination(HCe,arguments)},triad:function(){return this._applyCombination(dq,[3])},tetrad:function(){return this._applyCombination(dq,[4])}};cn.fromRatio=function(i,e){if(WE(i)=="object"){var t={};for(var n in i)i.hasOwnProperty(n)&&(n==="a"?t[n]=i[n]:t[n]=Q2(i[n]));i=t}return cn(i,e)};function RCe(i){var e={r:0,g:0,b:0},t=1,n=null,r=null,s=null,o=!1,a=!1;return typeof i=="string"&&(i=YCe(i)),WE(i)=="object"&&(Vh(i.r)&&Vh(i.g)&&Vh(i.b)?(e=PCe(i.r,i.g,i.b),o=!0,a=String(i.r).substr(-1)==="%"?"prgb":"rgb"):Vh(i.h)&&Vh(i.s)&&Vh(i.v)?(n=Q2(i.s),r=Q2(i.v),e=ICe(i.h,n,r),o=!0,a="hsv"):Vh(i.h)&&Vh(i.s)&&Vh(i.l)&&(n=Q2(i.s),s=Q2(i.l),e=BCe(i.h,n,s),o=!0,a="hsl"),i.hasOwnProperty("a")&&(t=i.a)),t=Gee(t),{ok:o,format:i.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function PCe(i,e,t){return{r:hr(i,255)*255,g:hr(e,255)*255,b:hr(t,255)*255}}function uq(i,e,t){i=hr(i,255),e=hr(e,255),t=hr(t,255);var n=Math.max(i,e,t),r=Math.min(i,e,t),s,o,a=(n+r)/2;if(n==r)s=o=0;else{var l=n-r;switch(o=a>.5?l/(2-n-r):l/(n+r),n){case i:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-i)/l+2;break;case t:s=(i-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function BCe(i,e,t){var n,r,s;i=hr(i,360),e=hr(e,100),t=hr(t,100);function o(u,c,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?u+(c-u)*6*h:h<1/2?c:h<2/3?u+(c-u)*(2/3-h)*6:u}if(e===0)n=r=s=t;else{var a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;n=o(l,a,i+1/3),r=o(l,a,i),s=o(l,a,i-1/3)}return{r:n*255,g:r*255,b:s*255}}function cq(i,e,t){i=hr(i,255),e=hr(e,255),t=hr(t,255);var n=Math.max(i,e,t),r=Math.min(i,e,t),s,o,a=n,l=n-r;if(o=n===0?0:l/n,n==r)s=0;else{switch(n){case i:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-i)/l+2;break;case t:s=(i-e)/l+4;break}s/=6}return{h:s,s:o,v:a}}function ICe(i,e,t){i=hr(i,360)*6,e=hr(e,100),t=hr(t,100);var n=Math.floor(i),r=i-n,s=t*(1-e),o=t*(1-r*e),a=t*(1-(1-r)*e),l=n%6,u=[t,o,s,s,a,t][l],c=[a,t,t,o,s,s][l],h=[s,s,a,t,t,o][l];return{r:u*255,g:c*255,b:h*255}}function hq(i,e,t,n){var r=[Ac(Math.round(i).toString(16)),Ac(Math.round(e).toString(16)),Ac(Math.round(t).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function NCe(i,e,t,n,r){var s=[Ac(Math.round(i).toString(16)),Ac(Math.round(e).toString(16)),Ac(Math.round(t).toString(16)),Ac(Hee(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function fq(i,e,t,n){var r=[Ac(Hee(n)),Ac(Math.round(i).toString(16)),Ac(Math.round(e).toString(16)),Ac(Math.round(t).toString(16))];return r.join("")}cn.equals=function(i,e){return!i||!e?!1:cn(i).toRgbString()==cn(e).toRgbString()};cn.random=function(){return cn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function DCe(i,e){e=e===0?0:e||10;var t=cn(i).toHsl();return t.s-=e/100,t.s=G4(t.s),cn(t)}function LCe(i,e){e=e===0?0:e||10;var t=cn(i).toHsl();return t.s+=e/100,t.s=G4(t.s),cn(t)}function OCe(i){return cn(i).desaturate(100)}function FCe(i,e){e=e===0?0:e||10;var t=cn(i).toHsl();return t.l+=e/100,t.l=G4(t.l),cn(t)}function kCe(i,e){e=e===0?0:e||10;var t=cn(i).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),cn(t)}function UCe(i,e){e=e===0?0:e||10;var t=cn(i).toHsl();return t.l-=e/100,t.l=G4(t.l),cn(t)}function zCe(i,e){var t=cn(i).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,cn(t)}function GCe(i){var e=cn(i).toHsl();return e.h=(e.h+180)%360,cn(e)}function dq(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=cn(i).toHsl(),n=[cn(i)],r=360/e,s=1;s<e;s++)n.push(cn({h:(t.h+s*r)%360,s:t.s,l:t.l}));return n}function HCe(i){var e=cn(i).toHsl(),t=e.h;return[cn(i),cn({h:(t+72)%360,s:e.s,l:e.l}),cn({h:(t+216)%360,s:e.s,l:e.l})]}function qCe(i,e,t){e=e||6,t=t||30;var n=cn(i).toHsl(),r=360/t,s=[cn(i)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;)n.h=(n.h+r)%360,s.push(cn(n));return s}function VCe(i,e){e=e||6;for(var t=cn(i).toHsv(),n=t.h,r=t.s,s=t.v,o=[],a=1/e;e--;)o.push(cn({h:n,s:r,v:s})),s=(s+a)%1;return o}cn.mix=function(i,e,t){t=t===0?0:t||50;var n=cn(i).toRgb(),r=cn(e).toRgb(),s=t/100,o={r:(r.r-n.r)*s+n.r,g:(r.g-n.g)*s+n.g,b:(r.b-n.b)*s+n.b,a:(r.a-n.a)*s+n.a};return cn(o)};cn.readability=function(i,e){var t=cn(i),n=cn(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)};cn.isReadable=function(i,e,t){var n=cn.readability(i,e),r,s;switch(s=!1,r=QCe(t),r.level+r.size){case"AAsmall":case"AAAlarge":s=n>=4.5;break;case"AAlarge":s=n>=3;break;case"AAAsmall":s=n>=7;break}return s};cn.mostReadable=function(i,e,t){var n=null,r=0,s,o,a,l;t=t||{},o=t.includeFallbackColors,a=t.level,l=t.size;for(var u=0;u<e.length;u++)s=cn.readability(i,e[u]),s>r&&(r=s,n=cn(e[u]));return cn.isReadable(i,n,{level:a,size:l})||!o?n:(t.includeFallbackColors=!1,cn.mostReadable(i,["#fff","#000"],t))};var tN=cn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},jCe=cn.hexNames=$Ce(tN);function $Ce(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function Gee(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function hr(i,e){WCe(i)&&(i="100%");var t=XCe(i);return i=Math.min(e,Math.max(0,parseFloat(i))),t&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function G4(i){return Math.min(1,Math.max(0,i))}function wl(i){return parseInt(i,16)}function WCe(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function XCe(i){return typeof i=="string"&&i.indexOf("%")!=-1}function Ac(i){return i.length==1?"0"+i:""+i}function Q2(i){return i<=1&&(i=i*100+"%"),i}function Hee(i){return Math.round(parseFloat(i)*255).toString(16)}function pq(i){return wl(i)/255}var oc=function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+i+")",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Vh(i){return!!oc.CSS_UNIT.exec(i)}function YCe(i){i=i.replace(ECe,"").replace(CCe,"").toLowerCase();var e=!1;if(tN[i])i=tN[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=oc.rgb.exec(i))?{r:t[1],g:t[2],b:t[3]}:(t=oc.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=oc.hsl.exec(i))?{h:t[1],s:t[2],l:t[3]}:(t=oc.hsla.exec(i))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=oc.hsv.exec(i))?{h:t[1],s:t[2],v:t[3]}:(t=oc.hsva.exec(i))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=oc.hex8.exec(i))?{r:wl(t[1]),g:wl(t[2]),b:wl(t[3]),a:pq(t[4]),format:e?"name":"hex8"}:(t=oc.hex6.exec(i))?{r:wl(t[1]),g:wl(t[2]),b:wl(t[3]),format:e?"name":"hex"}:(t=oc.hex4.exec(i))?{r:wl(t[1]+""+t[1]),g:wl(t[2]+""+t[2]),b:wl(t[3]+""+t[3]),a:pq(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=oc.hex3.exec(i))?{r:wl(t[1]+""+t[1]),g:wl(t[2]+""+t[2]),b:wl(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function QCe(i){var e,t;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),t=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}function nN(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function KCe(i){if(Array.isArray(i))return i}function JCe(i){if(Array.isArray(i))return nN(i)}function ZCe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function e4e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function t4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i4e(i,e){if(i==null)return{};var t,n,r=r4e(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function r4e(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}function s4e(i,e){return KCe(i)||e4e(i,e)||qee(i,e)||t4e()}function o4e(i){return JCe(i)||ZCe(i)||qee(i)||n4e()}function a4e(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function l4e(i){var e=a4e(i,"string");return typeof e=="symbol"?e:e+""}function qee(i,e){if(i){if(typeof i=="string")return nN(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?nN(i,e):void 0}}var iN=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(a){return{keyAccessor:a,isProp:!(a instanceof Function)}}),s=i.reduce(function(a,l){var u=a,c=l;return r.forEach(function(h,f){var d=h.keyAccessor,p=h.isProp,v;if(p){var b=c,_=b[d],M=i4e(b,[d].map(l4e));v=_,c=M}else v=d(c,f);f+1<r.length?(u.hasOwnProperty(v)||(u[v]={}),u=u[v]):t?(u.hasOwnProperty(v)||(u[v]=[]),u[v].push(c)):u[v]=c}),a},{});t instanceof Function&&function a(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===r.length?Object.keys(l).forEach(function(c){return l[c]=t(l[c])}):Object.values(l).forEach(function(c){return a(c,u+1)})}(s);var o=s;return n&&(o=[],function a(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===r.length?o.push({keys:u,vals:l}):Object.entries(l).forEach(function(c){var h=s4e(c,2),f=h[0],d=h[1];return a(d,[].concat(o4e(u),[f]))})}(s),e instanceof Array&&e.length===0&&o.length===1&&(o[0].keys=[])),o};function u4e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function Aq(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function c4e(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Aq(Object(t),!0).forEach(function(n){Vee(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Aq(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Vee(i,e,t){return e=v4e(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function h4e(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function f4e(i,e){if(i==null)return{};var t=h4e(i,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function jee(i,e){return p4e(i)||u4e(i,e)||$ee(i,e)||g4e()}function XE(i){return d4e(i)||A4e(i)||$ee(i)||m4e()}function d4e(i){if(Array.isArray(i))return rN(i)}function p4e(i){if(Array.isArray(i))return i}function A4e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function $ee(i,e){if(i){if(typeof i=="string")return rN(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rN(i,e)}}function rN(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function m4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y4e(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function v4e(i){var e=y4e(i,"string");return typeof e=="symbol"?e:String(e)}var _4e=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function x4e(i,e,t){var n={enter:[],update:[],exit:[]};if(t){var o=iN(i,t,!1),a=iN(e,t,!1),l=Object.assign({},o,a);Object.entries(l).forEach(function(u){var c=jee(u,2),h=c[0],f=c[1],d=o.hasOwnProperty(h)?a.hasOwnProperty(h)?"update":"exit":"enter";n[d].push(d==="update"?[o[h],a[h]]:f)})}else{var r=new Set(i),s=new Set(e);new Set([].concat(XE(r),XE(s))).forEach(function(u){var c=r.has(u)?s.has(u)?"update":"exit":"enter";n[c].push(c==="update"?[u,u]:u)})}return n}function b4e(i,e,t){var n=t.objBindAttr,r=n===void 0?"__obj":n,s=t.dataBindAttr,o=s===void 0?"__data":s,a=t.idAccessor,l=t.purge,u=l===void 0?!1:l,c=function(b){return b.hasOwnProperty(o)},h=e.filter(function(v){return!c(v)}),f=e.filter(c).map(function(v){return v[o]}),d=i,p=u?{enter:d,exit:f,update:[]}:x4e(f,d,a);return p.update=p.update.map(function(v){var b=jee(v,2),_=b[0],M=b[1];return _!==M&&(M[r]=_[r],M[r][o]=M),M}),p.exit=p.exit.concat(h.map(function(v){return Vee({},r,v)})),p}function w4e(i,e,t,n,r){var s=r.createObj,o=s===void 0?function(k){return{}}:s,a=r.updateObj,l=a===void 0?function(k,G){}:a,u=r.exitObj,c=u===void 0?function(k){}:u,h=r.objBindAttr,f=h===void 0?"__obj":h,d=r.dataBindAttr,p=d===void 0?"__data":d,v=f4e(r,_4e),b=b4e(i,e,c4e({objBindAttr:f,dataBindAttr:p},v)),_=b.enter,M=b.update,E=b.exit;E.forEach(function(k){var G=k[f];delete k[f],c(G),n(G)});var R=I(_),L=[].concat(XE(_),XE(M));D(L),R.forEach(t);function I(k){var G=[];return k.forEach(function(O){var U=o(O);U&&(U[p]=O,O[f]=U,G.push(U))}),G}function D(k){k.forEach(function(G){var O=G[f];O&&(O[p]=G,l(O,G))})}}var Wee={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(Zre,function(){return function(t){function n(s){if(r[s])return r[s].exports;var o=r[s]={exports:{},id:s,loaded:!1};return t[s].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var r={};return n.m=t,n.c=r,n.p="",n(0)}([function(t,n,r){var s=r(1),o=function(){function a(l,u,c){l===void 0&&(l=NaN),u===void 0&&(u=NaN),c===void 0&&(c=!1),this._minFPS=u,this._maxFPS=l,this._timeScale=1,this._currentTick=0,this._currentTime=0,this._tickDeltaTime=0,this._isRunning=!1,this._maxInterval=isNaN(this._minFPS)?NaN:1e3/this._minFPS,this._minInterval=isNaN(this._maxFPS)?NaN:1e3/this._maxFPS,this._onResume=new s.default,this._onPause=new s.default,this._onTick=new s.default,this._onTickOncePerFrame=new s.default,c||this.resume()}return a.prototype.updateOnce=function(l){l(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},a.prototype.resume=function(){this._isRunning||(this._isRunning=!0,this._lastTimeUpdated=this.getTimer(),this._onResume.dispatch(),this.animateOnce())},a.prototype.pause=function(){this._isRunning&&(this._isRunning=!1,this._onPause.dispatch(),window.cancelAnimationFrame(this._animationFrameHandle))},a.prototype.dispose=function(){this.pause(),this._onResume.removeAll(),this._onPause.removeAll(),this._onTick.removeAll()},Object.defineProperty(a.prototype,"currentTick",{get:function(){return this._currentTick},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentTimeSeconds",{get:function(){return this._currentTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tickDeltaTimeSeconds",{get:function(){return this._tickDeltaTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"timeScale",{get:function(){return this._timeScale},set:function(l){this._timeScale!==l&&(this._timeScale=l)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onResume",{get:function(){return this._onResume},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onPause",{get:function(){return this._onPause},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onTick",{get:function(){return this._onTick},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onTickOncePerFrame",{get:function(){return this._onTickOncePerFrame},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),a.prototype.animateOnce=function(){var l=this;this._animationFrameHandle=window.requestAnimationFrame(function(){return l.onFrame()})},a.prototype.onFrame=function(){if(this._now=this.getTimer(),this._frameDeltaTime=this._now-this._lastTimeUpdated,isNaN(this._minInterval)||this._frameDeltaTime>=this._minInterval)if(isNaN(this._maxInterval))this.update(this._frameDeltaTime*this._timeScale,!0),this._lastTimeUpdated=this._now;else for(this._interval=Math.min(this._frameDeltaTime,this._maxInterval);this._now>=this._lastTimeUpdated+this._interval;)this.update(this._interval*this._timeScale,this._now<=this._lastTimeUpdated+2*this._maxInterval),this._lastTimeUpdated+=this._interval;this._isRunning&&this.animateOnce()},a.prototype.update=function(l,u){u===void 0&&(u=!0),this._currentTick++,this._currentTime+=l,this._tickDeltaTime=l,this._onTick.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick),u&&this._onTickOncePerFrame.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},a.prototype.getTimer=function(){return Date.now()},a}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=o},function(t,n,r){(function(s,o){t.exports=o()})(this,function(){return function(s){function o(l){if(a[l])return a[l].exports;var u=a[l]={exports:{},id:l,loaded:!1};return s[l].call(u.exports,u,u.exports,o),u.loaded=!0,u.exports}var a={};return o.m=s,o.c=a,o.p="",o(0)}([function(s,o){var a=function(){function l(){this.functions=[]}return l.prototype.add=function(u){return this.functions.indexOf(u)===-1&&(this.functions.push(u),!0)},l.prototype.remove=function(u){var c=this.functions.indexOf(u);return c>-1&&(this.functions.splice(c,1),!0)},l.prototype.removeAll=function(){return this.functions.length>0&&(this.functions.length=0,!0)},l.prototype.dispatch=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var h=this.functions.concat();h.forEach(function(f){f.apply(void 0,u)})},Object.defineProperty(l.prototype,"numItems",{get:function(){return this.functions.length},enumerable:!0,configurable:!0}),l}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=a}])})}])})})(Wee);var S4e=Wee.exports;const Ry=xh(S4e);function M4e(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}const jO=i=>()=>i;function T4e(i,e){return function(t){return i+t*e}}function E4e(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(n){return Math.pow(i+n*e,t)}}function C4e(i){return(i=+i)==1?Xee:function(e,t){return t-e?E4e(e,t,i):jO(isNaN(e)?t:e)}}function Xee(i,e){var t=e-i;return t?T4e(i,t):jO(isNaN(i)?e:i)}const mq=function i(e){var t=C4e(e);function n(r,s){var o=t((r=eN(r)).r,(s=eN(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),u=Xee(r.opacity,s.opacity);return function(c){return r.r=o(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return n.gamma=i,n}(1);function Yee(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,n=e.slice(),r;return function(s){for(r=0;r<t;++r)n[r]=i[r]*(1-s)+e[r]*s;return n}}function Qee(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function R4e(i,e){return(Qee(e)?Yee:Kee)(i,e)}function Kee(i,e){var t=e?e.length:0,n=i?Math.min(t,i.length):0,r=new Array(n),s=new Array(t),o;for(o=0;o<n;++o)r[o]=$O(i[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(a){for(o=0;o<n;++o)s[o]=r[o](a);return s}}function P4e(i,e){var t=new Date;return i=+i,e=+e,function(n){return t.setTime(i*(1-n)+e*n),t}}function YE(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function B4e(i,e){var t={},n={},r;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in i?t[r]=$O(i[r],e[r]):n[r]=e[r];return function(s){for(r in t)n[r]=t[r](s);return n}}var sN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Z8=new RegExp(sN.source,"g");function I4e(i){return function(){return i}}function N4e(i){return function(e){return i(e)+""}}function D4e(i,e){var t=sN.lastIndex=Z8.lastIndex=0,n,r,s,o=-1,a=[],l=[];for(i=i+"",e=e+"";(n=sN.exec(i))&&(r=Z8.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:YE(n,r)})),t=Z8.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?N4e(l[0].x):I4e(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}function $O(i,e){var t=typeof e,n;return e==null||t==="boolean"?jO(e):(t==="number"?YE:t==="string"?(n=Z0(e))?(e=n,mq):D4e:e instanceof Z0?mq:e instanceof Date?P4e:Qee(e)?Yee:Array.isArray(e)?Kee:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?B4e:YE)(i,e)}function L4e(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}function O4e(i){return function(){return i}}function F4e(i){return+i}var gq=[0,1];function y1(i){return i}function oN(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:O4e(isNaN(e)?NaN:.5)}function k4e(i,e){var t;return i>e&&(t=i,i=e,e=t),function(n){return Math.max(i,Math.min(e,n))}}function U4e(i,e,t){var n=i[0],r=i[1],s=e[0],o=e[1];return r<n?(n=oN(r,n),s=t(o,s)):(n=oN(n,r),s=t(s,o)),function(a){return s(n(a))}}function z4e(i,e,t){var n=Math.min(i.length,e.length)-1,r=new Array(n),s=new Array(n),o=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++o<n;)r[o]=oN(i[o],i[o+1]),s[o]=t(e[o],e[o+1]);return function(a){var l=VTe(i,a,1,n)-1;return s[l](r[l](a))}}function G4e(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function H4e(){var i=gq,e=gq,t=$O,n,r,s,o=y1,a,l,u;function c(){var f=Math.min(i.length,e.length);return o!==y1&&(o=k4e(i[0],i[f-1])),a=f>2?z4e:U4e,l=u=null,h}function h(f){return f==null||isNaN(f=+f)?s:(l||(l=a(i.map(n),e,t)))(n(o(f)))}return h.invert=function(f){return o(r((u||(u=a(e,i.map(n),YE)))(f)))},h.domain=function(f){return arguments.length?(i=Array.from(f,F4e),c()):i.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),t=L4e,c()},h.clamp=function(f){return arguments.length?(o=f?!0:y1,c()):o!==y1},h.interpolate=function(f){return arguments.length?(t=f,c()):t},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,d){return n=f,r=d,c()}}function q4e(){return H4e()(y1,y1)}function V4e(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function QE(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function Py(i){return i=QE(Math.abs(i)),i?i[1]:NaN}function j4e(i,e){return function(t,n){for(var r=t.length,s=[],o=0,a=i[0],l=0;r>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),s.push(t.substring(r-=a,r+a)),!((l+=a+1)>n));)a=i[o=(o+1)%i.length];return s.reverse().join(e)}}function $4e(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var W4e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function KE(i){if(!(e=W4e.exec(i)))throw new Error("invalid format: "+i);var e;return new WO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}KE.prototype=WO.prototype;function WO(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}WO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function X4e(i){e:for(var e=i.length,t=1,n=-1,r;t<e;++t)switch(i[t]){case".":n=r=t;break;case"0":n===0&&(n=t),r=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(r+1):i}var Jee;function Y4e(i,e){var t=QE(i,e);if(!t)return i+"";var n=t[0],r=t[1],s=r-(Jee=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+QE(i,Math.max(0,e+s-1))[0]}function yq(i,e){var t=QE(i,e);if(!t)return i+"";var n=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}const vq={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:V4e,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>yq(i*100,e),r:yq,s:Y4e,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function _q(i){return i}var xq=Array.prototype.map,bq=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Q4e(i){var e=i.grouping===void 0||i.thousands===void 0?_q:j4e(xq.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",r=i.decimal===void 0?".":i.decimal+"",s=i.numerals===void 0?_q:$4e(xq.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"−":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function u(h){h=KE(h);var f=h.fill,d=h.align,p=h.sign,v=h.symbol,b=h.zero,_=h.width,M=h.comma,E=h.precision,R=h.trim,L=h.type;L==="n"?(M=!0,L="g"):vq[L]||(E===void 0&&(E=12),R=!0,L="g"),(b||f==="0"&&d==="=")&&(b=!0,f="0",d="=");var I=v==="$"?t:v==="#"&&/[boxX]/.test(L)?"0"+L.toLowerCase():"",D=v==="$"?n:/[%p]/.test(L)?o:"",k=vq[L],G=/[defgprs%]/.test(L);E=E===void 0?6:/[gprs]/.test(L)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function O(U){var Q=I,X=D,ee,K,Z;if(L==="c")X=k(U)+X,U="";else{U=+U;var he=U<0||1/U<0;if(U=isNaN(U)?l:k(Math.abs(U),E),R&&(U=X4e(U)),he&&+U==0&&p!=="+"&&(he=!1),Q=(he?p==="("?p:a:p==="-"||p==="("?"":p)+Q,X=(L==="s"?bq[8+Jee/3]:"")+X+(he&&p==="("?")":""),G){for(ee=-1,K=U.length;++ee<K;)if(Z=U.charCodeAt(ee),48>Z||Z>57){X=(Z===46?r+U.slice(ee+1):U.slice(ee))+X,U=U.slice(0,ee);break}}}M&&!b&&(U=e(U,1/0));var j=Q.length+U.length+X.length,ie=j<_?new Array(_-j+1).join(f):"";switch(M&&b&&(U=e(ie+U,ie.length?_-X.length:1/0),ie=""),d){case"<":U=Q+U+X+ie;break;case"=":U=Q+ie+U+X;break;case"^":U=ie.slice(0,j=ie.length>>1)+Q+U+X+ie.slice(j);break;default:U=ie+Q+U+X;break}return s(U)}return O.toString=function(){return h+""},O}function c(h,f){var d=u((h=KE(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Py(f)/3)))*3,v=Math.pow(10,-p),b=bq[8+p/3];return function(_){return d(v*_)+b}}return{format:u,formatPrefix:c}}var d3,Zee,ete;K4e({thousands:",",grouping:[3],currency:["$",""]});function K4e(i){return d3=Q4e(i),Zee=d3.format,ete=d3.formatPrefix,d3}function J4e(i){return Math.max(0,-Py(Math.abs(i)))}function Z4e(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Py(e)/3)))*3-Py(Math.abs(i)))}function e5e(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,Py(e)-Py(i))+1}function t5e(i,e,t,n){var r=YTe(i,e,t),s;switch(n=KE(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(i),Math.abs(e));return n.precision==null&&!isNaN(s=Z4e(r,o))&&(n.precision=s),ete(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=e5e(r,Math.max(Math.abs(i),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=J4e(r))&&(n.precision=s-(n.type==="%")*2);break}}return Zee(n)}function n5e(i){var e=i.domain;return i.ticks=function(t){var n=e();return XTe(n[0],n[n.length-1],t??10)},i.tickFormat=function(t,n){var r=e();return t5e(r[0],r[r.length-1],t??10,n)},i.nice=function(t){t==null&&(t=10);var n=e(),r=0,s=n.length-1,o=n[r],a=n[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=r,r=s,s=u);c-- >0;){if(u=LI(o,a,t),u===l)return n[r]=o,n[s]=a,e(n);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return i},i}function em(){var i=q4e();return i.copy=function(){return G4e(i,em())},M4e.apply(i,arguments),n5e(i)}const Mf=11102230246251565e-32,Co=134217729,i5e=(3+8*Mf)*Mf;function eP(i,e,t,n,r){let s,o,a,l,u=e[0],c=n[0],h=0,f=0;c>u==c>-u?(s=u,u=e[++h]):(s=c,c=n[++f]);let d=0;if(h<i&&f<t)for(c>u==c>-u?(o=u+s,a=s-(o-u),u=e[++h]):(o=c+s,a=s-(o-c),c=n[++f]),s=o,a!==0&&(r[d++]=a);h<i&&f<t;)c>u==c>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=e[++h]):(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=n[++f]),s=o,a!==0&&(r[d++]=a);for(;h<i;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=e[++h],s=o,a!==0&&(r[d++]=a);for(;f<t;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=n[++f],s=o,a!==0&&(r[d++]=a);return(s!==0||d===0)&&(r[d++]=s),d}function r5e(i,e){let t=e[0];for(let n=1;n<i;n++)t+=e[n];return t}function Sb(i){return new Float64Array(i)}const s5e=(3+16*Mf)*Mf,o5e=(2+12*Mf)*Mf,a5e=(9+64*Mf)*Mf*Mf,_g=Sb(4),wq=Sb(8),Sq=Sb(12),Mq=Sb(16),ia=Sb(4);function l5e(i,e,t,n,r,s,o){let a,l,u,c,h,f,d,p,v,b,_,M,E,R,L,I,D,k;const G=i-r,O=t-r,U=e-s,Q=n-s;R=G*Q,f=Co*G,d=f-(f-G),p=G-d,f=Co*Q,v=f-(f-Q),b=Q-v,L=p*b-(R-d*v-p*v-d*b),I=U*O,f=Co*U,d=f-(f-U),p=U-d,f=Co*O,v=f-(f-O),b=O-v,D=p*b-(I-d*v-p*v-d*b),_=L-D,h=L-_,_g[0]=L-(_+h)+(h-D),M=R+_,h=M-R,E=R-(M-h)+(_-h),_=E-I,h=E-_,_g[1]=E-(_+h)+(h-I),k=M+_,h=k-M,_g[2]=M-(k-h)+(_-h),_g[3]=k;let X=r5e(4,_g),ee=o5e*o;if(X>=ee||-X>=ee||(h=i-G,a=i-(G+h)+(h-r),h=t-O,u=t-(O+h)+(h-r),h=e-U,l=e-(U+h)+(h-s),h=n-Q,c=n-(Q+h)+(h-s),a===0&&l===0&&u===0&&c===0)||(ee=a5e*o+i5e*Math.abs(X),X+=G*c+Q*a-(U*u+O*l),X>=ee||-X>=ee))return X;R=a*Q,f=Co*a,d=f-(f-a),p=a-d,f=Co*Q,v=f-(f-Q),b=Q-v,L=p*b-(R-d*v-p*v-d*b),I=l*O,f=Co*l,d=f-(f-l),p=l-d,f=Co*O,v=f-(f-O),b=O-v,D=p*b-(I-d*v-p*v-d*b),_=L-D,h=L-_,ia[0]=L-(_+h)+(h-D),M=R+_,h=M-R,E=R-(M-h)+(_-h),_=E-I,h=E-_,ia[1]=E-(_+h)+(h-I),k=M+_,h=k-M,ia[2]=M-(k-h)+(_-h),ia[3]=k;const K=eP(4,_g,4,ia,wq);R=G*c,f=Co*G,d=f-(f-G),p=G-d,f=Co*c,v=f-(f-c),b=c-v,L=p*b-(R-d*v-p*v-d*b),I=U*u,f=Co*U,d=f-(f-U),p=U-d,f=Co*u,v=f-(f-u),b=u-v,D=p*b-(I-d*v-p*v-d*b),_=L-D,h=L-_,ia[0]=L-(_+h)+(h-D),M=R+_,h=M-R,E=R-(M-h)+(_-h),_=E-I,h=E-_,ia[1]=E-(_+h)+(h-I),k=M+_,h=k-M,ia[2]=M-(k-h)+(_-h),ia[3]=k;const Z=eP(K,wq,4,ia,Sq);R=a*c,f=Co*a,d=f-(f-a),p=a-d,f=Co*c,v=f-(f-c),b=c-v,L=p*b-(R-d*v-p*v-d*b),I=l*u,f=Co*l,d=f-(f-l),p=l-d,f=Co*u,v=f-(f-u),b=u-v,D=p*b-(I-d*v-p*v-d*b),_=L-D,h=L-_,ia[0]=L-(_+h)+(h-D),M=R+_,h=M-R,E=R-(M-h)+(_-h),_=E-I,h=E-_,ia[1]=E-(_+h)+(h-I),k=M+_,h=k-M,ia[2]=M-(k-h)+(_-h),ia[3]=k;const he=eP(Z,Sq,4,ia,Mq);return Mq[he-1]}function p3(i,e,t,n,r,s){const o=(e-s)*(t-r),a=(i-r)*(n-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=s5e*u?l:-l5e(i,e,t,n,r,s,u)}const Tq=Math.pow(2,-52),A3=new Uint32Array(512);class Px{static from(e,t=d5e,n=p5e){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const a=e[o];s[2*o]=t(a),s[2*o+1]=n(a)}return new Px(s)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:s}=this,o=e.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let G=0;G<o;G++){const O=e[2*G],U=e[2*G+1];O<a&&(a=O),U<l&&(l=U),O>u&&(u=O),U>c&&(c=U),this._ids[G]=G}const h=(a+u)/2,f=(l+c)/2;let d,p,v;for(let G=0,O=1/0;G<o;G++){const U=tP(h,f,e[2*G],e[2*G+1]);U<O&&(d=G,O=U)}const b=e[2*d],_=e[2*d+1];for(let G=0,O=1/0;G<o;G++){if(G===d)continue;const U=tP(b,_,e[2*G],e[2*G+1]);U<O&&U>0&&(p=G,O=U)}let M=e[2*p],E=e[2*p+1],R=1/0;for(let G=0;G<o;G++){if(G===d||G===p)continue;const O=h5e(b,_,M,E,e[2*G],e[2*G+1]);O<R&&(v=G,R=O)}let L=e[2*v],I=e[2*v+1];if(R===1/0){for(let U=0;U<o;U++)this._dists[U]=e[2*U]-e[0]||e[2*U+1]-e[1];v1(this._ids,this._dists,0,o-1);const G=new Uint32Array(o);let O=0;for(let U=0,Q=-1/0;U<o;U++){const X=this._ids[U],ee=this._dists[X];ee>Q&&(G[O++]=X,Q=ee)}this.hull=G.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(p3(b,_,M,E,L,I)<0){const G=p,O=M,U=E;p=v,M=L,E=I,v=G,L=O,I=U}const D=f5e(b,_,M,E,L,I);this._cx=D.x,this._cy=D.y;for(let G=0;G<o;G++)this._dists[G]=tP(e[2*G],e[2*G+1],D.x,D.y);v1(this._ids,this._dists,0,o-1),this._hullStart=d;let k=3;n[d]=t[v]=p,n[p]=t[d]=v,n[v]=t[p]=d,r[d]=0,r[p]=1,r[v]=2,s.fill(-1),s[this._hashKey(b,_)]=d,s[this._hashKey(M,E)]=p,s[this._hashKey(L,I)]=v,this.trianglesLen=0,this._addTriangle(d,p,v,-1,-1,-1);for(let G=0,O,U;G<this._ids.length;G++){const Q=this._ids[G],X=e[2*Q],ee=e[2*Q+1];if(G>0&&Math.abs(X-O)<=Tq&&Math.abs(ee-U)<=Tq||(O=X,U=ee,Q===d||Q===p||Q===v))continue;let K=0;for(let ae=0,pe=this._hashKey(X,ee);ae<this._hashSize&&(K=s[(pe+ae)%this._hashSize],!(K!==-1&&K!==n[K]));ae++);K=t[K];let Z=K,he;for(;he=n[Z],p3(X,ee,e[2*Z],e[2*Z+1],e[2*he],e[2*he+1])>=0;)if(Z=he,Z===K){Z=-1;break}if(Z===-1)continue;let j=this._addTriangle(Z,Q,n[Z],-1,-1,r[Z]);r[Q]=this._legalize(j+2),r[Z]=j,k++;let ie=n[Z];for(;he=n[ie],p3(X,ee,e[2*ie],e[2*ie+1],e[2*he],e[2*he+1])<0;)j=this._addTriangle(ie,Q,he,r[Q],-1,r[ie]),r[Q]=this._legalize(j+2),n[ie]=ie,k--,ie=he;if(Z===K)for(;he=t[Z],p3(X,ee,e[2*he],e[2*he+1],e[2*Z],e[2*Z+1])<0;)j=this._addTriangle(he,Q,Z,-1,r[Z],r[he]),this._legalize(j+2),r[he]=j,n[Z]=Z,k--,Z=he;this._hullStart=t[Q]=Z,n[Z]=t[ie]=Q,n[Q]=ie,s[this._hashKey(X,ee)]=Q,s[this._hashKey(e[2*Z],e[2*Z+1])]=Z}this.hull=new Uint32Array(k);for(let G=0,O=this._hullStart;G<k;G++)this.hull[G]=O,O=n[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(u5e(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let s=0,o=0;for(;;){const a=n[e],l=e-e%3;if(o=l+(e+2)%3,a===-1){if(s===0)break;e=A3[--s];continue}const u=a-a%3,c=l+(e+1)%3,h=u+(a+2)%3,f=t[o],d=t[e],p=t[c],v=t[h];if(c5e(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1],r[2*v],r[2*v+1])){t[e]=v,t[a]=f;const _=n[h];if(_===-1){let E=this._hullStart;do{if(this._hullTri[E]===h){this._hullTri[E]=e;break}E=this._hullPrev[E]}while(E!==this._hullStart)}this._link(e,_),this._link(a,n[o]),this._link(o,h);const M=u+(a+1)%3;s<A3.length&&(A3[s++]=M)}else{if(s===0)break;e=A3[--s]}}return o}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,s,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function u5e(i,e){const t=i/(Math.abs(i)+Math.abs(e));return(e>0?3-t:1+t)/4}function tP(i,e,t,n){const r=i-t,s=e-n;return r*r+s*s}function c5e(i,e,t,n,r,s,o,a){const l=i-o,u=e-a,c=t-o,h=n-a,f=r-o,d=s-a,p=l*l+u*u,v=c*c+h*h,b=f*f+d*d;return l*(h*b-v*d)-u*(c*b-v*f)+p*(c*d-h*f)<0}function h5e(i,e,t,n,r,s){const o=t-i,a=n-e,l=r-i,u=s-e,c=o*o+a*a,h=l*l+u*u,f=.5/(o*u-a*l),d=(u*c-a*h)*f,p=(o*h-l*c)*f;return d*d+p*p}function f5e(i,e,t,n,r,s){const o=t-i,a=n-e,l=r-i,u=s-e,c=o*o+a*a,h=l*l+u*u,f=.5/(o*u-a*l),d=i+(u*c-a*h)*f,p=e+(o*h-l*c)*f;return{x:d,y:p}}function v1(i,e,t,n){if(n-t<=20)for(let r=t+1;r<=n;r++){const s=i[r],o=e[s];let a=r-1;for(;a>=t&&e[i[a]]>o;)i[a+1]=i[a--];i[a+1]=s}else{const r=t+n>>1;let s=t+1,o=n;v2(i,r,s),e[i[t]]>e[i[n]]&&v2(i,t,n),e[i[s]]>e[i[n]]&&v2(i,s,n),e[i[t]]>e[i[s]]&&v2(i,t,s);const a=i[s],l=e[a];for(;;){do s++;while(e[i[s]]<l);do o--;while(e[i[o]]>l);if(o<s)break;v2(i,s,o)}i[t+1]=i[o],i[o]=a,n-s+1>=o-t?(v1(i,e,s,n),v1(i,e,t,o-1)):(v1(i,e,t,o-1),v1(i,e,s,n))}}function v2(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function d5e(i){return i[0]}function p5e(i){return i[1]}function A5e(i,e){var t=0,n=0,r=0,s=0,o=0,a=0,l=0,u=0,c=null,h=null,f=i[0],d=i[1],p=e.length;for(t;t<p;t++){n=0;var v=e[t].length-1,b=e[t];if(c=b[0],c[0]!==b[v][0]&&c[1]!==b[v][1])throw new Error("First and last coordinates in a ring must be the same");for(o=c[0]-f,a=c[1]-d,n;n<v;n++){if(h=b[n+1],u=h[1]-d,a<0&&u<0||a>0&&u>0){c=h,a=u,o=c[0]-f;continue}if(l=h[0]-i[0],u>0&&a<=0){if(s=o*u-l*a,s>0)r=r+1;else if(s===0)return 0}else if(a>0&&u<=0){if(s=o*u-l*a,s<0)r=r+1;else if(s===0)return 0}else if(u===0&&a<0){if(s=o*u-l*a,s===0)return 0}else if(a===0&&u<0){if(s=o*u-l*a,s===0)return 0}else if(a===0&&u===0){if(l<=0&&o>=0)return 0;if(o<=0&&l>=0)return 0}c=h,a=u,o=l}}return r%2!==0}function m5e(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return[...i.geometry.coordinates];if(i.type==="Point")return[...i.coordinates]}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return[...i];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function g5e(i){return i.type==="Feature"?i.geometry:i}function y5e(i,e,t={}){if(!i)throw new Error("point is required");if(!e)throw new Error("polygon is required");const n=m5e(i),r=g5e(e),s=r.type,o=e.bbox;let a=r.coordinates;if(o&&v5e(n,o)===!1)return!1;s==="Polygon"&&(a=[a]);let l=!1;for(var u=0;u<a.length;++u){const c=A5e(n,a[u]);if(c===0)return!t.ignoreBoundary;c&&(l=!0)}return l}function v5e(i,e){return e[0]<=i[0]&&e[1]<=i[1]&&e[2]>=i[0]&&e[3]>=i[1]}var _5e=y5e;const Eq=1e-6;class g0{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){e=+e,t=+t,n=+n;const r=e+n,s=t;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>Eq||Math.abs(this._y1-s)>Eq)&&(this._+="L"+r+","+s),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=s}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class aN{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class x5e{constructor(e,[t,n,r,s]=[0,0,960,500]){if(!((r=+r)>=(t=+t))||!((s=+s)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=r,this.xmin=t,this.ymax=s,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let v=0,b=0,_=n.length,M,E;v<_;v+=3,b+=2){const R=n[v]*2,L=n[v+1]*2,I=n[v+2]*2,D=e[R],k=e[R+1],G=e[L],O=e[L+1],U=e[I],Q=e[I+1],X=G-D,ee=O-k,K=U-D,Z=Q-k,he=(X*Z-ee*K)*2;if(Math.abs(he)<1e-9){if(s===void 0){s=o=0;for(const ie of t)s+=e[ie*2],o+=e[ie*2+1];s/=t.length,o/=t.length}const j=1e9*Math.sign((s-D)*Z-(o-k)*K);M=(D+U)/2-j*Z,E=(k+Q)/2+j*K}else{const j=1/he,ie=X*X+ee*ee,ae=K*K+Z*Z;M=D+(Z*ie-ee*ae)*j,E=k+(X*ae-K*ie)*j}a[b]=M,a[b+1]=E}let l=t[t.length-1],u,c=l*4,h,f=e[2*l],d,p=e[2*l+1];r.fill(0);for(let v=0;v<t.length;++v)l=t[v],u=c,h=f,d=p,c=l*4,f=e[2*l],p=e[2*l+1],r[u+2]=r[c]=d-p,r[u+3]=r[c+1]=f-h}render(e){const t=e==null?e=new g0:void 0,{delaunay:{halfedges:n,inedges:r,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,h=n.length;c<h;++c){const f=n[c];if(f<c)continue;const d=Math.floor(c/3)*2,p=Math.floor(f/3)*2,v=o[d],b=o[d+1],_=o[p],M=o[p+1];this._renderSegment(v,b,_,M,e)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const h=Math.floor(r[u]/3)*2,f=o[h],d=o[h+1],p=l*4,v=this._project(f,d,a[p+2],a[p+3]);v&&this._renderSegment(f,d,v[0],v[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new g0:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=t==null?t=new g0:void 0,r=this._clip(e);if(r===null||!r.length)return;t.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&t.lineTo(r[o],r[o+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const r=this.cellPolygon(t);r&&(r.index=t,yield r)}}cellPolygon(e){const t=new aN;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,s){let o;const a=this._regioncode(e,t),l=this._regioncode(n,r);a===0&&l===0?(s.moveTo(e,t),s.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(e,t,n){return t=+t,t!==t||(n=+n,n!==n)?!1:this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const r=this._clip(n);if(r){e:for(let s=0,o=t.length;s<o;s+=2)for(let a=0,l=r.length;a<l;a+=2)if(t[s]===r[a]&&t[s+1]===r[a+1]&&t[(s+2)%o]===r[(a+l-2)%l]&&t[(s+3)%o]===r[(a+l-1)%l]){yield n;break e}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:s}}=this,o=n[e];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(t[u*2],t[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==e)break;l=r[l]}while(l!==o&&l!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:n}=this,r=e*4;return this._simplify(n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t))}_clipFinite(e,t){const n=t.length;let r=null,s,o,a=t[n-2],l=t[n-1],u,c=this._regioncode(a,l),h,f=0;for(let d=0;d<n;d+=2)if(s=a,o=l,a=t[d],l=t[d+1],u=c,c=this._regioncode(a,l),u===0&&c===0)h=f,f=0,r?r.push(a,l):r=[a,l];else{let p,v,b,_,M;if(u===0){if((p=this._clipSegment(s,o,a,l,u,c))===null)continue;[v,b,_,M]=p}else{if((p=this._clipSegment(a,l,s,o,c,u))===null)continue;[_,M,v,b]=p,h=f,f=this._edgecode(v,b),h&&f&&this._edge(e,h,f,r,r.length),r?r.push(v,b):r=[v,b]}h=f,f=this._edgecode(_,M),h&&f&&this._edge(e,h,f,r,r.length),r?r.push(_,M):r=[_,M]}if(r)h=f,f=this._edgecode(r[0],r[1]),h&&f&&this._edge(e,h,f,r,r.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(e,t,n,r,s,o){const a=s<o;for(a&&([e,t,n,r,s,o]=[n,r,e,t,o,s]);;){if(s===0&&o===0)return a?[n,r,e,t]:[e,t,n,r];if(s&o)return null;let l,u,c=s||o;c&8?(l=e+(n-e)*(this.ymax-t)/(r-t),u=this.ymax):c&4?(l=e+(n-e)*(this.ymin-t)/(r-t),u=this.ymin):c&2?(u=t+(r-t)*(this.xmax-e)/(n-e),l=this.xmax):(u=t+(r-t)*(this.xmin-e)/(n-e),l=this.xmin),s?(e=l,t=u,s=this._regioncode(e,t)):(n=l,r=u,o=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,s,o){let a=Array.from(t),l;if((l=this._project(a[0],a[1],n,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(e,a))for(let u=0,c=a.length,h,f=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)h=f,f=this._edgecode(a[u],a[u+1]),h&&f&&(u=this._edge(e,h,f,a,u),c=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,t,n,r,s){for(;t!==n;){let o,a;switch(t){case 5:t=4;continue;case 4:t=6,o=this.xmax,a=this.ymin;break;case 6:t=2;continue;case 2:t=10,o=this.xmax,a=this.ymax;break;case 10:t=8;continue;case 8:t=9,o=this.xmin,a=this.ymax;break;case 9:t=1;continue;case 1:t=5,o=this.xmin,a=this.ymin;break}(r[s]!==o||r[s+1]!==a)&&this.contains(e,o,a)&&(r.splice(s,0,o,a),s+=2)}return s}_project(e,t,n,r){let s=1/0,o,a,l;if(r<0){if(t<=this.ymin)return null;(o=(this.ymin-t)/r)<s&&(l=this.ymin,a=e+(s=o)*n)}else if(r>0){if(t>=this.ymax)return null;(o=(this.ymax-t)/r)<s&&(l=this.ymax,a=e+(s=o)*n)}if(n>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/n)<s&&(a=this.xmax,l=t+(s=o)*r)}else if(n<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/n)<s&&(a=this.xmin,l=t+(s=o)*r)}return[a,l]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const n=(t+2)%e.length,r=(t+4)%e.length;(e[t]===e[n]&&e[n]===e[r]||e[t+1]===e[n+1]&&e[n+1]===e[r+1])&&(e.splice(n,2),t-=2)}e.length||(e=null)}return e}}const b5e=2*Math.PI,xg=Math.pow;function w5e(i){return i[0]}function S5e(i){return i[1]}function M5e(i){const{triangles:e,coords:t}=i;for(let n=0;n<e.length;n+=3){const r=2*e[n],s=2*e[n+1],o=2*e[n+2];if((t[o]-t[r])*(t[s+1]-t[r+1])-(t[s]-t[r])*(t[o+1]-t[r+1])>1e-10)return!1}return!0}function T5e(i,e,t){return[i+Math.sin(i+e)*t,e+Math.cos(i-e)*t]}class XO{static from(e,t=w5e,n=S5e,r){return new XO("length"in e?E5e(e,t,n,r):Float64Array.from(C5e(e,t,n,r)))}constructor(e){this._delaunator=new Px(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&M5e(e)){this.collinear=Int32Array.from({length:t.length/2},(f,d)=>d).sort((f,d)=>t[2*f]-t[2*d]||t[2*f+1]-t[2*d+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[t[2*l],t[2*l+1],t[2*u],t[2*u+1]],h=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let f=0,d=t.length/2;f<d;++f){const p=T5e(t[2*f],t[2*f+1],h);t[2*f]=p[0],t[2*f+1]=p[1]}this._delaunator=new Px(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=n.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(n[l]===-1||o[c]===-1)&&(o[c]=l)}for(let l=0,u=r.length;l<u;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(e){return new x5e(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:s,triangles:o,collinear:a}=this;if(a){const h=a.indexOf(e);h>0&&(yield a[h-1]),h<a.length-1&&(yield a[h+1]);return}const l=t[e];if(l===-1)return;let u=l,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==e)return;if(u=s[u],u===-1){const h=n[(r[e]+1)%n.length];h!==c&&(yield h);return}}while(u!==l)}find(e,t,n=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const r=n;let s;for(;(s=this._step(n,e,t))>=0&&s!==n&&s!==r;)n=s;return s}_step(e,t,n){const{inedges:r,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(r[e]===-1||!u.length)return(e+1)%(u.length>>1);let c=e,h=xg(t-u[e*2],2)+xg(n-u[e*2+1],2);const f=r[e];let d=f;do{let p=l[d];const v=xg(t-u[p*2],2)+xg(n-u[p*2+1],2);if(v<h&&(h=v,c=p),d=d%3===2?d-2:d+1,l[d]!==e)break;if(d=a[d],d===-1){if(d=s[(o[e]+1)%s.length],d!==p&&xg(t-u[d*2],2)+xg(n-u[d*2+1],2)<h)return d;break}}while(d!==f);return c}render(e){const t=e==null?e=new g0:void 0,{points:n,halfedges:r,triangles:s}=this;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l<o)continue;const u=s[o]*2,c=s[l]*2;e.moveTo(n[u],n[u+1]),e.lineTo(n[c],n[c+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t===void 0&&(!e||typeof e.moveTo!="function")&&(t=e,e=null),t=t==null?2:+t;const n=e==null?e=new g0:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const a=r[s],l=r[s+1];e.moveTo(a+t,l),e.arc(a,l,t,0,b5e)}return n&&n.value()}renderHull(e){const t=e==null?e=new g0:void 0,{hull:n,points:r}=this,s=n[0]*2,o=n.length;e.moveTo(r[s],r[s+1]);for(let a=1;a<o;++a){const l=2*n[a];e.lineTo(r[l],r[l+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new aN;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=t==null?t=new g0:void 0,{points:r,triangles:s}=this,o=s[e*=3]*2,a=s[e+1]*2,l=s[e+2]*2;return t.moveTo(r[o],r[o+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[l],r[l+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new aN;return this.renderTriangle(e,t),t.value()}}function E5e(i,e,t,n){const r=i.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const a=i[o];s[o*2]=e.call(n,a,o,i),s[o*2+1]=t.call(n,a,o,i)}return s}function*C5e(i,e,t,n){let r=0;for(const s of i)yield e.call(n,s,r,i),yield t.call(n,s,r,i),++r}const YO=Math.PI,Cq=YO/2,Rq=180/YO,Pq=YO/180,R5e=Math.atan2,Bq=Math.cos,P5e=Math.max,B5e=Math.min,Iq=Math.sin,I5e=Math.sign||function(i){return i>0?1:i<0?-1:0},tte=Math.sqrt;function N5e(i){return i>1?Cq:i<-1?-Cq:Math.asin(i)}function nte(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function Cl(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function JE(i,e){return[i[0]+e[0],i[1]+e[1],i[2]+e[2]]}function ZE(i){var e=tte(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);return[i[0]/e,i[1]/e,i[2]/e]}function QO(i){return[R5e(i[1],i[0])*Rq,N5e(P5e(-1,B5e(1,i[2])))*Rq]}function uh(i){const e=i[0]*Pq,t=i[1]*Pq,n=Bq(t);return[n*Bq(e),n*Iq(e),Iq(t)]}function KO(i){return i=i.map(e=>uh(e)),nte(i[0],Cl(i[2],i[1]))}function D5e(i){const e=O5e(i),t=k5e(e),n=F5e(t,i),r=z5e(t,i.length),s=L5e(r,i),o=U5e(t,i),{polygons:a,centers:l}=G5e(o,t,i),u=H5e(a),c=V5e(t,i),h=q5e(n,t);return{delaunay:e,edges:n,triangles:t,centers:l,neighbors:r,polygons:a,mesh:u,hull:c,urquhart:h,find:s}}function L5e(i,e){function t(n,r){let s=n[0]-r[0],o=n[1]-r[1],a=n[2]-r[2];return s*s+o*o+a*a}return function(r,s,o){o===void 0&&(o=0);let a,l,u=o;const c=uh([r,s]);do a=o,o=null,l=t(c,uh(e[a])),i[a].forEach(h=>{let f=t(c,uh(e[h]));if(f<l){l=f,o=h,u=h;return}});while(o!==null);return u}}function O5e(i){if(i.length<2)return{};let e=0;for(;isNaN(i[e][0]+i[e][1])&&e++<i.length;);const t=dEe(i[e]),n=$Ee().translate([0,0]).scale(1).rotate(t.invert([180,0]));i=i.map(n);const r=[];let s=1;for(let h=0,f=i.length;h<f;h++){let d=i[h][0]**2+i[h][1]**2;!isFinite(d)||d>1e32?r.push(h):d>s&&(s=d)}const o=1e6*tte(s);r.forEach(h=>i[h]=[o,0]),i.push([0,o]),i.push([-o,0]),i.push([0,-o]);const a=XO.from(i);a.projection=n;const{triangles:l,halfedges:u,inedges:c}=a;for(let h=0,f=u.length;h<f;h++)if(u[h]<0){const d=h%3==2?h-2:h+1,p=h%3==0?h+2:h-1,v=u[d],b=u[p];u[v]=b,u[b]=v,u[d]=u[p]=-1,l[h]=l[d]=l[p]=e,c[l[v]]=v%3==0?v+2:v-1,c[l[b]]=b%3==0?b+2:b-1,h+=2-h%3}else l[h]>i.length-3-1&&(l[h]=e);return a}function F5e(i,e){const t=new Set;return e.length===2?[[0,1]]:(i.forEach(n=>{if(n[0]!==n[1]&&!(KO(n.map(r=>e[r]))<0))for(let r=0,s;r<3;r++)s=(r+1)%3,t.add(ME([n[r],n[s]]).join("-"))}),Array.from(t,n=>n.split("-").map(Number)))}function k5e(i){const{triangles:e}=i;if(!e)return[];const t=[];for(let n=0,r=e.length/3;n<r;n++){const s=e[3*n],o=e[3*n+1],a=e[3*n+2];s!==o&&o!==a&&t.push([s,a,o])}return t}function U5e(i,e){return i.map(t=>{const n=t.map(s=>e[s]).map(uh),r=JE(JE(Cl(n[1],n[0]),Cl(n[2],n[1])),Cl(n[0],n[2]));return QO(ZE(r))})}function z5e(i,e){const t=[];return i.forEach(n=>{for(let r=0;r<3;r++){const s=n[r],o=n[(r+1)%3];t[s]=t[s]||[],t[s].push(o)}}),i.length===0&&(e===2?(t[0]=[1],t[1]=[0]):e===1&&(t[0]=[])),t}function G5e(i,e,t){const n=[],r=i.slice();if(e.length===0){if(t.length<2)return{polygons:n,centers:r};if(t.length===2){const a=uh(t[0]),l=uh(t[1]),u=ZE(JE(a,l)),c=ZE(Cl(a,l)),h=Cl(u,c),f=[u,Cl(u,h),Cl(Cl(u,h),h),Cl(Cl(Cl(u,h),h),h)].map(QO).map(o);return n.push(f),n.push(f.slice().reverse()),{polygons:n,centers:r}}}e.forEach((a,l)=>{for(let u=0;u<3;u++){const c=a[u],h=a[(u+1)%3],f=a[(u+2)%3];n[c]=n[c]||[],n[c].push([h,f,l,[c,h,f]])}});const s=n.map(a=>{const l=[a[0][2]];let u=a[0][1];for(let c=1;c<a.length;c++)for(let h=0;h<a.length;h++)if(a[h][0]==u){u=a[h][1],l.push(a[h][2]);break}if(l.length>2)return l;if(l.length==2){const c=Nq(t[a[0][3][0]],t[a[0][3][1]],r[l[0]]),h=Nq(t[a[0][3][2]],t[a[0][3][0]],r[l[0]]),f=o(c),d=o(h);return[l[0],d,l[1],f]}});function o(a){let l=-1;return r.slice(e.length,1/0).forEach((u,c)=>{u[0]===a[0]&&u[1]===a[1]&&(l=c+e.length)}),l<0&&(l=r.length,r.push(a)),l}return{polygons:s,centers:r}}function Nq(i,e,t){i=uh(i),e=uh(e),t=uh(t);const n=I5e(nte(Cl(e,i),t));return QO(ZE(JE(i,e)).map(r=>n*r))}function H5e(i){const e=[];return i.forEach(t=>{if(!t)return;let n=t[t.length-1];for(let r of t)r>n&&e.push([n,r]),n=r}),e}function q5e(i,e){return function(t){const n=new Map,r=new Map;return i.forEach((s,o)=>{const a=s.join("-");n.set(a,t[o]),r.set(a,!0)}),e.forEach(s=>{let o=0,a=-1;for(let l=0;l<3;l++){let u=ME([s[l],s[(l+1)%3]]).join("-");n.get(u)>o&&(o=n.get(u),a=u)}r.set(a,!1)}),i.map(s=>r.get(s.join("-")))}}function V5e(i,e){const t=new Set,n=[];i.map(a=>{if(!(KO(a.map(l=>e[l>e.length?0:l]))>1e-12))for(let l=0;l<3;l++){let u=[a[l],a[(l+1)%3]],c=`${u[0]}-${u[1]}`;t.has(c)?t.delete(c):t.add(`${u[1]}-${u[0]}`)}});const r=new Map;let s;if(t.forEach(a=>{a=a.split("-").map(Number),r.set(a[0],a[1]),s=a[0]}),s===void 0)return n;let o=s;do{n.push(o);let a=r.get(o);r.set(o,-1),o=a}while(o>-1&&o!==s);return n}function j5e(i){const e=function(t){if(e.delaunay=null,e._data=t,typeof e._data=="object"&&e._data.type==="FeatureCollection"&&(e._data=e._data.features),typeof e._data=="object"){const n=e._data.map(r=>[e._vx(r),e._vy(r),r]).filter(r=>isFinite(r[0]+r[1]));e.points=n.map(r=>[r[0],r[1]]),e.valid=n.map(r=>r[2]),e.delaunay=D5e(e.points)}return e};return e._vx=function(t){if(typeof t=="object"&&"type"in t)return NH(t)[0];if(0 in t)return t[0]},e._vy=function(t){if(typeof t=="object"&&"type"in t)return NH(t)[1];if(1 in t)return t[1]},e.x=function(t){return t?(e._vx=t,e):e._vx},e.y=function(t){return t?(e._vy=t,e):e._vy},e.polygons=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n={type:"FeatureCollection",features:[]};return e.valid.length===0||(e.delaunay.polygons.forEach((r,s)=>n.features.push({type:"Feature",geometry:r?{type:"Polygon",coordinates:[[...r,r[0]].map(o=>e.delaunay.centers[o])]}:null,properties:{site:e.valid[s],sitecoordinates:e.points[s],neighbours:e.delaunay.neighbors[s]}})),e.valid.length===1&&n.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:e.valid[0],sitecoordinates:e.points[0],neighbours:[]}})),n},e.triangles=function(t){return t!==void 0&&e(t),e.delaunay?{type:"FeatureCollection",features:e.delaunay.triangles.map((n,r)=>(n=n.map(s=>e.points[s]),n.center=e.delaunay.centers[r],n)).filter(n=>KO(n)>0).map(n=>({type:"Feature",properties:{circumcenter:n.center},geometry:{type:"Polygon",coordinates:[[...n,n[0]]]}}))}:!1},e.links=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n=e.delaunay.edges.map(s=>Dp(e.points[s[0]],e.points[s[1]])),r=e.delaunay.urquhart(n);return{type:"FeatureCollection",features:e.delaunay.edges.map((s,o)=>({type:"Feature",properties:{source:e.valid[s[0]],target:e.valid[s[1]],length:n[o],urquhart:!!r[o]},geometry:{type:"LineString",coordinates:[e.points[s[0]],e.points[s[1]]]}}))}},e.mesh=function(t){return t!==void 0&&e(t),e.delaunay?{type:"MultiLineString",coordinates:e.delaunay.edges.map(n=>[e.points[n[0]],e.points[n[1]]])}:!1},e.cellMesh=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const{centers:n,polygons:r}=e.delaunay,s=[];for(const o of r)if(o)for(let a=o.length,l=o[a-1],u=o[0],c=0;c<a;l=u,u=o[++c])u>l&&s.push([n[l],n[u]]);return{type:"MultiLineString",coordinates:s}},e._found=void 0,e.find=function(t,n,r){if(e._found=e.delaunay.find(t,n,e._found),!r||Dp([t,n],e.points[e._found])<r)return e._found},e.hull=function(t){t!==void 0&&e(t);const n=e.delaunay.hull,r=e.points;return n.length===0?null:{type:"Polygon",coordinates:[[...n.map(s=>r[s]),r[n[0]]]]}},i?e(i):e}function lN(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function $5e(i){if(Array.isArray(i))return i}function W5e(i){if(Array.isArray(i))return lN(i)}function X5e(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Y5e(i,e,t){return e=eC(e),iRe(i,ite()?Reflect.construct(e,[],eC(i).constructor):e.apply(i,t))}function Q5e(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function K5e(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function eC(i){return eC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eC(i)}function J5e(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&uN(i,e)}function ite(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ite=function(){return!!i})()}function Z5e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function eRe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function tRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iRe(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X5e(i)}function uN(i,e){return uN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},uN(i,e)}function $c(i,e){return $5e(i)||eRe(i,e)||rte(i,e)||tRe()}function nP(i){return W5e(i)||Z5e(i)||rte(i)||nRe()}function rte(i,e){if(i){if(typeof i=="string")return lN(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?lN(i,e):void 0}}function rRe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.resolution,n=t===void 0?1/0:t,r=sRe(i,n),s=Tx(r),o=oRe(i,n),a=[].concat(nP(s),nP(o)),l={type:"Polygon",coordinates:i},u=See(l),c=$c(u,2),h=$c(c[0],2),f=h[0],d=h[1],p=$c(c[1],2),v=p[0],b=p[1],_=f>v||b>=89||d<=-89,M=[];if(_){var E=j5e(a).triangles(),R=new Map(a.map(function(he,j){var ie=$c(he,2),ae=ie[0],pe=ie[1];return["".concat(ae,"-").concat(pe),j]}));E.features.forEach(function(he){var j,ie=he.geometry.coordinates[0].slice(0,3).reverse(),ae=[];if(ie.forEach(function(Pe){var He=$c(Pe,2),Se=He[0],Oe=He[1],Ye="".concat(Se,"-").concat(Oe);R.has(Ye)&&ae.push(R.get(Ye))}),ae.length===3){if(ae.some(function(Pe){return Pe<s.length})){var pe=he.properties.circumcenter;if(!cN(pe,l,_))return}(j=M).push.apply(j,ae)}})}else if(o.length)for(var G=Px.from(a),O=function(j){var ie,ae=[2,1,0].map(function(He){return G.triangles[j+He]}),pe=ae.map(function(He){return a[He]});if(ae.some(function(He){return He<s.length})){var Pe=[0,1].map(function(He){return KTe(pe,function(Se){return Se[He]})});if(!cN(Pe,l,_))return 1}(ie=M).push.apply(ie,nP(ae))},U=0,Q=G.triangles.length;U<Q;U+=3)O(U);else{var L=SE(r),I=L.vertices,D=L.holes,k=D===void 0?[]:D;M=wTe(I,k,2)}var X=em(ME(a,function(he){return he[0]}),[0,1]),ee=em(ME(a,function(he){return he[1]}),[0,1]),K=a.map(function(he){var j=$c(he,2),ie=j[0],ae=j[1];return[X(ie),ee(ae)]}),Z={points:a,indices:M,uvs:K};return{contour:r,triangles:Z}}function sRe(i,e){return i.map(function(t){var n=[],r;return t.forEach(function(s){if(r){var o=Dp(s,r)*180/Math.PI;if(o>e)for(var a=zO(r,s),l=1/Math.ceil(o/e),u=l;u<1;)n.push(a(u)),u+=l}n.push(r=s)}),n})}function oRe(i,e){var t={type:"Polygon",coordinates:i},n=See(t),r=$c(n,2),s=$c(r[0],2),o=s[0],a=s[1],l=$c(r[1],2),u=l[0],c=l[1];if(Math.min(Math.abs(u-o),Math.abs(c-a))<e)return[];var h=o>u||c>=89||a<=-89;return aRe(e,{minLng:o,maxLng:u,minLat:a,maxLat:c}).filter(function(f){return cN(f,t,h)})}function aRe(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.minLng,n=e.maxLng,r=e.minLat,s=e.maxLat,o=Math.round(Math.pow(360/i,2)/Math.PI),a=(1+Math.sqrt(5))/2,l=function(_){return _/a*360%360-180},u=function(_){return Math.acos(2*_/o-1)/Math.PI*180-90},c=function(_){return o*(Math.cos((_+90)*Math.PI/180)+1)/2},h=[s!==void 0?Math.ceil(c(s)):0,r!==void 0?Math.floor(c(r)):o-1],f=t===void 0&&n===void 0?function(){return!0}:t===void 0?function(b){return b<=n}:n===void 0?function(b){return b>=t}:n>=t?function(b){return b>=t&&b<=n}:function(b){return b>=t||b<=n},d=[],p=h[0];p<=h[1];p++){var v=l(p);f(v)&&d.push([v,u(p)])}return d}function cN(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t?PEe(e,i):_5e(i,e)}var LM=window.THREE?window.THREE:{BufferGeometry:fn,Float32BufferAttribute:Ht},Dq=new LM.BufferGeometry().setAttribute?"setAttribute":"addAttribute",JO=function(i){function e(t,n,r,s,o,a,l){var u;Q5e(this,e),u=Y5e(this,e),u.type="ConicPolygonBufferGeometry",u.parameters={polygonGeoJson:t,startHeight:n,endHeight:r,closedBottom:s,closedTop:o,includeSides:a,curvatureResolution:l},n=n||0,r=r||1,s=s!==void 0?s:!0,o=o!==void 0?o:!0,a=a!==void 0?a:!0,l=l||5;var c=rRe(t,{resolution:l}),h=c.contour,f=c.triangles,d=Tx(f.uvs),p=[],v=[],b=[],_=0,M=function(D){var k=Math.round(p.length/3),G=b.length;p=p.concat(D.vertices),v=v.concat(D.uvs),b=b.concat(k?D.indices.map(function(O){return O+k}):D.indices),u.addGroup(G,b.length-G,_++)};a&&M(R()),s&&M(L(n,!1)),o&&M(L(r,!0)),u.setIndex(b),u[Dq]("position",new LM.Float32BufferAttribute(p,3)),u[Dq]("uv",new LM.Float32BufferAttribute(v,2)),u.computeVertexNormals();function E(I,D){var k=I.map(function(G){return G.map(function(O){var U=$c(O,2),Q=U[0],X=U[1];return lRe(X,Q,D)})});return SE(k)}function R(){for(var I=E(h,n),D=I.vertices,k=I.holes,G=E(h,r),O=G.vertices,U=Tx([O,D]),Q=Math.round(O.length/3),X=new Set(k),ee=0,K=[],Z=0;Z<Q;Z++){var he=Z+1;if(he===Q)he=ee;else if(X.has(he)){var j=he;he=ee,ee=j}K.push(Z,Z+Q,he+Q),K.push(he+Q,he,Z)}for(var ie=[],ae=1;ae>=0;ae--)for(var pe=0;pe<Q;pe+=1)ie.push(pe/(Q-1),ae);return{indices:K,vertices:U,uvs:ie}}function L(I){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return{indices:D?f.indices:f.indices.slice().reverse(),vertices:E([f.points],I).vertices,uvs:d}}return u}return J5e(e,i),K5e(e)}(LM.BufferGeometry);function lRe(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(r),t*Math.cos(n),t*Math.sin(n)*Math.sin(r)]}var ci=function(i){i=i||{};var e=typeof i<"u"?i:{},t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);var r="";function s(Ue){return e.locateFile?e.locateFile(Ue,r):r+Ue}var o;typeof document<"u"&&document.currentScript&&(r=document.currentScript.src),r.indexOf("blob:")!==0?r=r.substr(0,r.lastIndexOf("/")+1):r="",o=function(tt,Et,sn){var g=new XMLHttpRequest;g.open("GET",tt,!0),g.responseType="arraybuffer",g.onload=function(){if(g.status==200||g.status==0&&g.response){Et(g.response);return}var Jn=$e(tt);if(Jn){Et(Jn.buffer);return}sn()},g.onerror=sn,g.send(null)};var a=e.print||console.log.bind(console),l=e.printErr||console.warn.bind(console);for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);t=null,e.arguments&&e.arguments;var u=0,c=function(Ue){u=Ue},h=function(){return u},f=8;function d(Ue,tt,Et,sn){switch(Et=Et||"i8",Et.charAt(Et.length-1)==="*"&&(Et="i32"),Et){case"i1":Q[Ue>>0]=tt;break;case"i8":Q[Ue>>0]=tt;break;case"i16":ee[Ue>>1]=tt;break;case"i32":K[Ue>>2]=tt;break;case"i64":We=[tt>>>0,(Fe=tt,+ce(Fe)>=1?Fe>0?(ut(+pt(Fe/4294967296),4294967295)|0)>>>0:~~+dt((Fe-+(~~Fe>>>0))/4294967296)>>>0:0)],K[Ue>>2]=We[0],K[Ue+4>>2]=We[1];break;case"float":Z[Ue>>2]=tt;break;case"double":he[Ue>>3]=tt;break;default:Ta("invalid type for setValue: "+Et)}}function p(Ue,tt,Et){switch(tt=tt||"i8",tt.charAt(tt.length-1)==="*"&&(tt="i32"),tt){case"i1":return Q[Ue>>0];case"i8":return Q[Ue>>0];case"i16":return ee[Ue>>1];case"i32":return K[Ue>>2];case"i64":return K[Ue>>2];case"float":return Z[Ue>>2];case"double":return he[Ue>>3];default:Ta("invalid type for getValue: "+tt)}return null}var v=!1;function b(Ue,tt){Ue||Ta("Assertion failed: "+tt)}function _(Ue){var tt=e["_"+Ue];return b(tt,"Cannot call unknown function "+Ue+", make sure it is exported"),tt}function M(Ue,tt,Et,sn,g){var le={string:function(ve){var mt=0;if(ve!=null&&ve!==0){var Gt=(ve.length<<2)+1;mt=li(Gt),k(ve,mt,Gt)}return mt},array:function(ve){var mt=li(ve.length);return G(ve,mt),mt}};function Jn(ve){return tt==="string"?I(ve):tt==="boolean"?!!ve:ve}var pi=_(Ue),Br=[],re=0;if(sn)for(var xe=0;xe<sn.length;xe++){var qe=le[Et[xe]];qe?(re===0&&(re=kn()),Br[xe]=qe(sn[xe])):Br[xe]=sn[xe]}var Ne=pi.apply(null,Br);return Ne=Jn(Ne),re!==0&&ar(re),Ne}function E(Ue,tt,Et,sn){Et=Et||[];var g=Et.every(function(Jn){return Jn==="number"}),le=tt!=="string";return le&&g&&!sn?_(Ue):function(){return M(Ue,tt,Et,arguments)}}var R=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function L(Ue,tt,Et){for(var sn=tt+Et,g=tt;Ue[g]&&!(g>=sn);)++g;if(g-tt>16&&Ue.subarray&&R)return R.decode(Ue.subarray(tt,g));for(var le="";tt<g;){var Jn=Ue[tt++];if(!(Jn&128)){le+=String.fromCharCode(Jn);continue}var pi=Ue[tt++]&63;if((Jn&224)==192){le+=String.fromCharCode((Jn&31)<<6|pi);continue}var Br=Ue[tt++]&63;if((Jn&240)==224?Jn=(Jn&15)<<12|pi<<6|Br:Jn=(Jn&7)<<18|pi<<12|Br<<6|Ue[tt++]&63,Jn<65536)le+=String.fromCharCode(Jn);else{var re=Jn-65536;le+=String.fromCharCode(55296|re>>10,56320|re&1023)}}return le}function I(Ue,tt){return Ue?L(X,Ue,tt):""}function D(Ue,tt,Et,sn){if(!(sn>0))return 0;for(var g=Et,le=Et+sn-1,Jn=0;Jn<Ue.length;++Jn){var pi=Ue.charCodeAt(Jn);if(pi>=55296&&pi<=57343){var Br=Ue.charCodeAt(++Jn);pi=65536+((pi&1023)<<10)|Br&1023}if(pi<=127){if(Et>=le)break;tt[Et++]=pi}else if(pi<=2047){if(Et+1>=le)break;tt[Et++]=192|pi>>6,tt[Et++]=128|pi&63}else if(pi<=65535){if(Et+2>=le)break;tt[Et++]=224|pi>>12,tt[Et++]=128|pi>>6&63,tt[Et++]=128|pi&63}else{if(Et+3>=le)break;tt[Et++]=240|pi>>18,tt[Et++]=128|pi>>12&63,tt[Et++]=128|pi>>6&63,tt[Et++]=128|pi&63}}return tt[Et]=0,Et-g}function k(Ue,tt,Et){return D(Ue,X,tt,Et)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function G(Ue,tt){Q.set(Ue,tt)}function O(Ue,tt){return Ue%tt>0&&(Ue+=tt-Ue%tt),Ue}var U,Q,X,ee,K,Z,he;function j(Ue){U=Ue,e.HEAP8=Q=new Int8Array(Ue),e.HEAP16=ee=new Int16Array(Ue),e.HEAP32=K=new Int32Array(Ue),e.HEAPU8=X=new Uint8Array(Ue),e.HEAPU16=new Uint16Array(Ue),e.HEAPU32=new Uint32Array(Ue),e.HEAPF32=Z=new Float32Array(Ue),e.HEAPF64=he=new Float64Array(Ue)}var ie=5267040,ae=24128,pe=e.TOTAL_MEMORY||33554432;e.buffer?U=e.buffer:U=new ArrayBuffer(pe),pe=U.byteLength,j(U),K[ae>>2]=ie;function Pe(Ue){for(;Ue.length>0;){var tt=Ue.shift();if(typeof tt=="function"){tt();continue}var Et=tt.func;typeof Et=="number"?tt.arg===void 0?e.dynCall_v(Et):e.dynCall_vi(Et,tt.arg):Et(tt.arg===void 0?null:tt.arg)}}var He=[],Se=[],Oe=[],Ye=[];function it(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)yt(e.preRun.shift());Pe(He)}function Ct(){Pe(Se)}function qt(){Pe(Oe)}function xt(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Qe(e.postRun.shift());Pe(Ye)}function yt(Ue){He.unshift(Ue)}function Qe(Ue){Ye.unshift(Ue)}var ce=Math.abs,dt=Math.ceil,pt=Math.floor,ut=Math.min,ft=0,Wt=null;function Rt(Ue){ft++,e.monitorRunDependencies&&e.monitorRunDependencies(ft)}function fe(Ue){if(ft--,e.monitorRunDependencies&&e.monitorRunDependencies(ft),ft==0&&Wt){var tt=Wt;Wt=null,tt()}}e.preloadedImages={},e.preloadedAudios={};var te=null,De="data:application/octet-stream;base64,";function Te(Ue){return String.prototype.startsWith?Ue.startsWith(De):Ue.indexOf(De)===0}var Fe,We;te="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var Bt=24144;function ct(Ue){return Ue}function Ft(Ue){var tt=/\b__Z[\w\d_]+/g;return Ue.replace(tt,function(Et){var sn=Et;return Et===sn?Et:sn+" ["+Et+"]"})}function vn(){var Ue=new Error;if(!Ue.stack){try{throw new Error(0)}catch(tt){Ue=tt}if(!Ue.stack)return"(no stack trace available)"}return Ue.stack.toString()}function At(){var Ue=vn();return e.extraStackTrace&&(Ue+=`
`+e.extraStackTrace()),Ft(Ue)}function zt(Ue,tt,Et,sn){Ta("Assertion failed: "+I(Ue)+", at: "+[tt?I(tt):"unknown filename",Et,sn?I(sn):"unknown function"])}function hn(){return Q.length}function an(Ue,tt,Et){X.set(X.subarray(tt,tt+Et),Ue)}function Vt(Ue){return e.___errno_location&&(K[e.___errno_location()>>2]=Ue),Ue}function Me(Ue){Ta("OOM")}function Ze(Ue){try{var tt=new ArrayBuffer(Ue);return tt.byteLength!=Ue?void 0:(new Int8Array(tt).set(Q),_n(tt),j(tt),1)}catch{}}function Nt(Ue){var tt=hn(),Et=16777216,sn=2147483648-Et;if(Ue>sn)return!1;for(var g=16777216,le=Math.max(tt,g);le<Ue;)le<=536870912?le=O(2*le,Et):le=Math.min(O((3*le+2147483648)/4,Et),sn);var Jn=Ze(le);return!!Jn}var ye=typeof atob=="function"?atob:function(Ue){var tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Et="",sn,g,le,Jn,pi,Br,re,xe=0;Ue=Ue.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Jn=tt.indexOf(Ue.charAt(xe++)),pi=tt.indexOf(Ue.charAt(xe++)),Br=tt.indexOf(Ue.charAt(xe++)),re=tt.indexOf(Ue.charAt(xe++)),sn=Jn<<2|pi>>4,g=(pi&15)<<4|Br>>2,le=(Br&3)<<6|re,Et=Et+String.fromCharCode(sn),Br!==64&&(Et=Et+String.fromCharCode(g)),re!==64&&(Et=Et+String.fromCharCode(le));while(xe<Ue.length);return Et};function wt(Ue){try{for(var tt=ye(Ue),Et=new Uint8Array(tt.length),sn=0;sn<tt.length;++sn)Et[sn]=tt.charCodeAt(sn);return Et}catch{throw new Error("Converting base64 string to bytes failed.")}}function $e(Ue){if(Te(Ue))return wt(Ue.slice(De.length))}var at={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},jt={a:Ta,b:c,c:h,d:zt,e:Vt,f:hn,g:an,h:Nt,i:Me,j:ct,k:Ft,l:Ze,m:vn,n:At,o:Bt,p:ae},Le=function(Ue,tt,Et){"almost asm";var sn=new Ue.Int8Array(Et),g=new Ue.Int32Array(Et);new Ue.Uint8Array(Et),new Ue.Float32Array(Et);var le=new Ue.Float64Array(Et),Jn=tt.o|0,pi=tt.p|0,Br=Ue.Math.floor,re=Ue.Math.abs,xe=Ue.Math.sqrt,qe=Ue.Math.pow,Ne=Ue.Math.cos,ve=Ue.Math.sin,mt=Ue.Math.tan,Gt=Ue.Math.acos,Jt=Ue.Math.asin,Qt=Ue.Math.atan,nn=Ue.Math.atan2,ln=Ue.Math.ceil,Kt=Ue.Math.imul,ni=Ue.Math.min,Ai=Ue.Math.max,Xn=Ue.Math.clz32,Dt=tt.b,se=tt.c,lt=tt.d,ii=tt.e,wn=tt.f,Vr=tt.g,Xo=tt.h,Ei=tt.i,oe=24160;function Wi(m){return sn=new Int8Array(m),g=new Int32Array(m),le=new Float64Array(m),Et=m,!0}function cl(m){m=m|0;var A=0;return A=oe,oe=oe+m|0,oe=oe+15&-16,A|0}function Bc(){return oe|0}function Xs(m){m=m|0,oe=m}function Ys(m,A){m=m|0,oe=m}function dv(m,A){m=m|0,A=A|0;var y=0,S=0,T=0;return(m|0)<0?(A=2,A|0):(m|0)>13780509?(A=Nr(15,A)|0,A|0):(y=((m|0)<0)<<31>>31,T=Ls(m|0,y|0,3,0)|0,S=se()|0,y=Pn(m|0,y|0,1,0)|0,y=Ls(T|0,S|0,y|0,se()|0)|0,y=Pn(y|0,se()|0,1,0)|0,m=se()|0,g[A>>2]=y,g[A+4>>2]=m,A=0,A|0)}function rA(m,A,y,S){return m=m|0,A=A|0,y=y|0,S=S|0,Fb(m,A,y,S,0)|0}function Fb(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0,V=0;if(z=oe,oe=oe+16|0,P=z,!(sA(m,A,y,S,T)|0))return S=0,oe=z,S|0;do if((y|0)>=0){if((y|0)>13780509){if(C=Nr(15,P)|0,C|0)break;N=P,P=g[N>>2]|0,N=g[N+4>>2]|0}else C=((y|0)<0)<<31>>31,V=Ls(y|0,C|0,3,0)|0,N=se()|0,C=Pn(y|0,C|0,1,0)|0,C=Ls(V|0,N|0,C|0,se()|0)|0,C=Pn(C|0,se()|0,1,0)|0,N=se()|0,g[P>>2]=C,g[P+4>>2]=N,P=C;if(kc(S|0,0,P<<3|0)|0,T|0){kc(T|0,0,P<<2|0)|0,C=Ea(m,A,y,S,T,P,N,0)|0;break}C=xo(P,4)|0,C?(V=Ea(m,A,y,S,C,P,N,0)|0,gn(C),C=V):C=13}else C=2;while(!1);return V=C,oe=z,V|0}function sA(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0;if(Ee=oe,oe=oe+16|0,_e=Ee,Ae=Ee+8|0,me=_e,g[me>>2]=m,g[me+4>>2]=A,(y|0)<0)return Ae=2,oe=Ee,Ae|0;if(C=S,g[C>>2]=m,g[C+4>>2]=A,C=(T|0)!=0,C&&(g[T>>2]=0),Ri(m,A)|0)return Ae=9,oe=Ee,Ae|0;g[Ae>>2]=0;e:do if((y|0)>=1)if(C)for(J=1,V=0,ue=0,me=1,C=m;;){if(!(V|ue)){if(C=lr(C,A,4,Ae,_e)|0,C|0)break e;if(A=_e,C=g[A>>2]|0,A=g[A+4>>2]|0,Ri(C,A)|0){C=9;break e}}if(C=lr(C,A,g[22384+(ue<<2)>>2]|0,Ae,_e)|0,C|0)break e;if(A=_e,C=g[A>>2]|0,A=g[A+4>>2]|0,m=S+(J<<3)|0,g[m>>2]=C,g[m+4>>2]=A,g[T+(J<<2)>>2]=me,m=V+1|0,P=(m|0)==(me|0),N=ue+1|0,z=(N|0)==6,Ri(C,A)|0){C=9;break e}if(me=me+(z&P&1)|0,(me|0)>(y|0)){C=0;break}else J=J+1|0,V=P?0:m,ue=P?z?0:N:ue}else for(J=1,V=0,ue=0,me=1,C=m;;){if(!(V|ue)){if(C=lr(C,A,4,Ae,_e)|0,C|0)break e;if(A=_e,C=g[A>>2]|0,A=g[A+4>>2]|0,Ri(C,A)|0){C=9;break e}}if(C=lr(C,A,g[22384+(ue<<2)>>2]|0,Ae,_e)|0,C|0)break e;if(A=_e,C=g[A>>2]|0,A=g[A+4>>2]|0,m=S+(J<<3)|0,g[m>>2]=C,g[m+4>>2]=A,m=V+1|0,P=(m|0)==(me|0),N=ue+1|0,z=(N|0)==6,Ri(C,A)|0){C=9;break e}if(me=me+(z&P&1)|0,(me|0)>(y|0)){C=0;break}else J=J+1|0,V=P?0:m,ue=P?z?0:N:ue}else C=0;while(!1);return Ae=C,oe=Ee,Ae|0}function Ea(m,A,y,S,T,C,P,N){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0,C=C|0,P=P|0,N=N|0;var z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0;if(Ee=oe,oe=oe+16|0,_e=Ee+8|0,Ae=Ee,z=ts(m|0,A|0,C|0,P|0)|0,J=se()|0,ue=S+(z<<3)|0,Je=ue,be=g[Je>>2]|0,Je=g[Je+4>>2]|0,V=(be|0)==(m|0)&(Je|0)==(A|0),!((be|0)==0&(Je|0)==0|V))do z=Pn(z|0,J|0,1,0)|0,z=Um(z|0,se()|0,C|0,P|0)|0,J=se()|0,ue=S+(z<<3)|0,be=ue,Je=g[be>>2]|0,be=g[be+4>>2]|0,V=(Je|0)==(m|0)&(be|0)==(A|0);while(!((Je|0)==0&(be|0)==0|V));if(z=T+(z<<2)|0,V&&(g[z>>2]|0)<=(N|0)||(be=ue,g[be>>2]=m,g[be+4>>2]=A,g[z>>2]=N,(N|0)>=(y|0)))return be=0,oe=Ee,be|0;switch(V=N+1|0,g[_e>>2]=0,z=lr(m,A,2,_e,Ae)|0,z|0){case 9:{me=9;break}case 0:{z=Ae,z=Ea(g[z>>2]|0,g[z+4>>2]|0,y,S,T,C,P,V)|0,z||(me=9);break}}e:do if((me|0)==9){switch(g[_e>>2]=0,z=lr(m,A,3,_e,Ae)|0,z|0){case 9:break;case 0:{if(z=Ae,z=Ea(g[z>>2]|0,g[z+4>>2]|0,y,S,T,C,P,V)|0,z|0)break e;break}default:break e}switch(g[_e>>2]=0,z=lr(m,A,1,_e,Ae)|0,z|0){case 9:break;case 0:{if(z=Ae,z=Ea(g[z>>2]|0,g[z+4>>2]|0,y,S,T,C,P,V)|0,z|0)break e;break}default:break e}switch(g[_e>>2]=0,z=lr(m,A,5,_e,Ae)|0,z|0){case 9:break;case 0:{if(z=Ae,z=Ea(g[z>>2]|0,g[z+4>>2]|0,y,S,T,C,P,V)|0,z|0)break e;break}default:break e}switch(g[_e>>2]=0,z=lr(m,A,4,_e,Ae)|0,z|0){case 9:break;case 0:{if(z=Ae,z=Ea(g[z>>2]|0,g[z+4>>2]|0,y,S,T,C,P,V)|0,z|0)break e;break}default:break e}switch(g[_e>>2]=0,z=lr(m,A,6,_e,Ae)|0,z|0){case 9:break;case 0:{if(z=Ae,z=Ea(g[z>>2]|0,g[z+4>>2]|0,y,S,T,C,P,V)|0,z|0)break e;break}default:break e}return be=0,oe=Ee,be|0}while(!1);return be=z,oe=Ee,be|0}function lr(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0;if(y>>>0>6)return T=1,T|0;if(ue=(g[S>>2]|0)%6|0,g[S>>2]=ue,(ue|0)>0){C=0;do y=Ic(y)|0,C=C+1|0;while((C|0)<(g[S>>2]|0))}if(ue=ht(m|0,A|0,45)|0,se()|0,J=ue&127,J>>>0>121)return T=5,T|0;z=Qs(m,A)|0,C=ht(m|0,A|0,52)|0,se()|0,C=C&15;e:do if(!C)V=8;else{for(;;){if(P=(15-C|0)*3|0,N=ht(m|0,A|0,P|0)|0,se()|0,N=N&7,(N|0)==7){A=5;break}if(Ae=(_o(C)|0)==0,C=C+-1|0,me=Tt(7,0,P|0)|0,A=A&~(se()|0),_e=Tt(g[(Ae?432:16)+(N*28|0)+(y<<2)>>2]|0,0,P|0)|0,P=se()|0,y=g[(Ae?640:224)+(N*28|0)+(y<<2)>>2]|0,m=_e|m&~me,A=P|A,!y){y=0;break e}if(!C){V=8;break e}}return A|0}while(!1);(V|0)==8&&(Ae=g[848+(J*28|0)+(y<<2)>>2]|0,_e=Tt(Ae|0,0,45)|0,m=_e|m,A=se()|0|A&-1040385,y=g[4272+(J*28|0)+(y<<2)>>2]|0,(Ae&127|0)==127&&(Ae=Tt(g[848+(J*28|0)+20>>2]|0,0,45)|0,A=se()|0|A&-1040385,y=g[4272+(J*28|0)+20>>2]|0,m=qu(Ae|m,A)|0,A=se()|0,g[S>>2]=(g[S>>2]|0)+1)),N=ht(m|0,A|0,45)|0,se()|0,N=N&127;e:do if(Ci(N)|0){t:do if((Qs(m,A)|0)==1){if((J|0)!=(N|0))if(Ub(N,g[7696+(J*28|0)>>2]|0)|0){m=Ph(m,A)|0,P=1,A=se()|0;break}else lt(23313,22416,436,22424);switch(z|0){case 3:{m=qu(m,A)|0,A=se()|0,g[S>>2]=(g[S>>2]|0)+1,P=0;break t}case 5:{m=Ph(m,A)|0,A=se()|0,g[S>>2]=(g[S>>2]|0)+5,P=0;break t}case 0:return Ae=9,Ae|0;default:return Ae=1,Ae|0}}else P=0;while(!1);if((y|0)>0){C=0;do m=hA(m,A)|0,A=se()|0,C=C+1|0;while((C|0)!=(y|0))}if((J|0)!=(N|0)){if(!(ui(N)|0)){if((P|0)!=0|(Qs(m,A)|0)!=5)break;g[S>>2]=(g[S>>2]|0)+1;break}switch(ue&127){case 8:case 118:break e}(Qs(m,A)|0)!=3&&(g[S>>2]=(g[S>>2]|0)+1)}}else if((y|0)>0){C=0;do m=qu(m,A)|0,A=se()|0,C=C+1|0;while((C|0)!=(y|0))}while(!1);return g[S>>2]=((g[S>>2]|0)+y|0)%6|0,Ae=T,g[Ae>>2]=m,g[Ae+4>>2]=A,Ae=0,Ae|0}function nd(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0,V=0;for(N=oe,oe=oe+16|0,C=N,P=N+8|0,T=(Ri(m,A)|0)==0,T=T?1:2;;){if(g[P>>2]=0,V=(lr(m,A,T,P,C)|0)==0,z=C,V&((g[z>>2]|0)==(y|0)?(g[z+4>>2]|0)==(S|0):0)){m=4;break}if(T=T+1|0,T>>>0>=7){T=7,m=4;break}}return(m|0)==4?(oe=N,T|0):0}function h5(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0;if(Ae=oe,oe=oe+16|0,me=Ae,_e=Ae+8|0,ue=me,g[ue>>2]=m,g[ue+4>>2]=A,!y)return _e=S,g[_e>>2]=m,g[_e+4>>2]=A,_e=0,oe=Ae,_e|0;g[_e>>2]=0;e:do if(Ri(m,A)|0)m=9;else{if(C=(y|0)>0,C){T=0,ue=m;do{if(m=lr(ue,A,4,_e,me)|0,m|0)break e;if(A=me,ue=g[A>>2]|0,A=g[A+4>>2]|0,T=T+1|0,Ri(ue,A)|0){m=9;break e}}while((T|0)<(y|0));if(J=S,g[J>>2]=ue,g[J+4>>2]=A,J=y+-1|0,C){V=0,m=1;do{if(T=22384+(V<<2)|0,(V|0)==5)for(P=g[T>>2]|0,C=0,T=m;;){if(m=me,m=lr(g[m>>2]|0,g[m+4>>2]|0,P,_e,me)|0,m|0)break e;if((C|0)!=(J|0))if(z=me,N=g[z>>2]|0,z=g[z+4>>2]|0,m=S+(T<<3)|0,g[m>>2]=N,g[m+4>>2]=z,!(Ri(N,z)|0))m=T+1|0;else{m=9;break e}else m=T;if(C=C+1|0,(C|0)>=(y|0))break;T=m}else for(P=me,z=g[T>>2]|0,N=0,T=m,C=g[P>>2]|0,P=g[P+4>>2]|0;;){if(m=lr(C,P,z,_e,me)|0,m|0)break e;if(P=me,C=g[P>>2]|0,P=g[P+4>>2]|0,m=S+(T<<3)|0,g[m>>2]=C,g[m+4>>2]=P,m=T+1|0,Ri(C,P)|0){m=9;break e}if(N=N+1|0,(N|0)>=(y|0))break;T=m}V=V+1|0}while(V>>>0<6);m=me,P=ue,T=g[m>>2]|0,C=A,m=g[m+4>>2]|0}else P=ue,T=ue,C=A,m=A}else P=S,g[P>>2]=m,g[P+4>>2]=A,P=m,T=m,C=A,m=A;m=(P|0)==(T|0)&(C|0)==(m|0)?0:9}while(!1);return _e=m,oe=Ae,_e|0}function f5(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0,V=0;if(N=oe,oe=oe+48|0,T=N+16|0,C=N+8|0,P=N,y|0)return P=15,oe=N,P|0;if(V=m,z=g[V+4>>2]|0,y=C,g[y>>2]=g[V>>2],g[y+4>>2]=z,Tv(C,T),A=hl(T,A,P)|0,!A){if(y=g[C>>2]|0,C=g[m+8>>2]|0,(C|0)>0){T=g[m+12>>2]|0,A=0;do y=(g[T+(A<<3)>>2]|0)+y|0,A=A+1|0;while((A|0)<(C|0))}A=P,T=g[A>>2]|0,A=g[A+4>>2]|0,C=((y|0)<0)<<31>>31,(A|0)<(C|0)|(A|0)==(C|0)&T>>>0<y>>>0?(A=P,g[A>>2]=y,g[A+4>>2]=C,A=C):y=T,z=Pn(y|0,A|0,12,0)|0,V=se()|0,A=P,g[A>>2]=z,g[A+4>>2]=V,A=S,g[A>>2]=z,g[A+4>>2]=V,A=0}return V=A,oe=N,V|0}function xm(m,A,y,S,T,C,P){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0,C=C|0,P=P|0;var N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0,Ge=0,Re=0,Lt=0,Ut=0,bt=0,It=0,mi=0,Zn=0,ri=0,En=0,xn=0,Cn=0,yi=0,mn=0,Pi=0,bs=0,yA=0;if(yi=oe,oe=oe+64|0,ri=yi+48|0,En=yi+32|0,xn=yi+24|0,Lt=yi+8|0,Ut=yi,z=g[m>>2]|0,(z|0)<=0)return Cn=0,oe=yi,Cn|0;for(bt=m+4|0,It=ri+8|0,mi=En+8|0,Zn=Lt+8|0,N=0,Ge=0;;){V=g[bt>>2]|0,ke=V+(Ge<<4)|0,g[ri>>2]=g[ke>>2],g[ri+4>>2]=g[ke+4>>2],g[ri+8>>2]=g[ke+8>>2],g[ri+12>>2]=g[ke+12>>2],(Ge|0)==(z+-1|0)?(g[En>>2]=g[V>>2],g[En+4>>2]=g[V+4>>2],g[En+8>>2]=g[V+8>>2],g[En+12>>2]=g[V+12>>2]):(ke=V+(Ge+1<<4)|0,g[En>>2]=g[ke>>2],g[En+4>>2]=g[ke+4>>2],g[En+8>>2]=g[ke+8>>2],g[En+12>>2]=g[ke+12>>2]),z=m5(ri,En,S,xn)|0;e:do if(z)V=0,N=z;else if(V=xn,z=g[V>>2]|0,V=g[V+4>>2]|0,(V|0)>0|(V|0)==0&z>>>0>0){be=0,ke=0;t:for(;;){if(yA=+le[ri>>3],Je=$r(z|0,V|0,be|0,ke|0)|0,bs=+(Je>>>0)+4294967296*+(se()|0),mn=+(z>>>0)+4294967296*+(V|0),Pi=+(be>>>0)+4294967296*+(ke|0),le[Lt>>3]=yA*bs/mn+ +le[En>>3]*Pi/mn,le[Zn>>3]=+le[It>>3]*bs/mn+ +le[mi>>3]*Pi/mn,z=ad(Lt,S,Ut)|0,z|0){N=z;break}Je=Ut,Ee=g[Je>>2]|0,Je=g[Je+4>>2]|0,me=ts(Ee|0,Je|0,A|0,y|0)|0,J=se()|0,z=P+(me<<3)|0,ue=z,V=g[ue>>2]|0,ue=g[ue+4>>2]|0;n:do if((V|0)==0&(ue|0)==0)Re=z,Cn=16;else for(_e=0,Ae=0;;){if((_e|0)>(y|0)|(_e|0)==(y|0)&Ae>>>0>A>>>0){N=1;break t}if((V|0)==(Ee|0)&(ue|0)==(Je|0))break n;if(z=Pn(me|0,J|0,1,0)|0,me=Um(z|0,se()|0,A|0,y|0)|0,J=se()|0,Ae=Pn(Ae|0,_e|0,1,0)|0,_e=se()|0,z=P+(me<<3)|0,ue=z,V=g[ue>>2]|0,ue=g[ue+4>>2]|0,(V|0)==0&(ue|0)==0){Re=z,Cn=16;break}}while(!1);if((Cn|0)==16&&(Cn=0,!((Ee|0)==0&(Je|0)==0))&&(Ae=Re,g[Ae>>2]=Ee,g[Ae+4>>2]=Je,Ae=C+(g[T>>2]<<3)|0,g[Ae>>2]=Ee,g[Ae+4>>2]=Je,Ae=T,Ae=Pn(g[Ae>>2]|0,g[Ae+4>>2]|0,1,0)|0,Ee=se()|0,Je=T,g[Je>>2]=Ae,g[Je+4>>2]=Ee),be=Pn(be|0,ke|0,1,0)|0,ke=se()|0,V=xn,z=g[V>>2]|0,V=g[V+4>>2]|0,!((V|0)>(ke|0)|(V|0)==(ke|0)&z>>>0>be>>>0)){V=1;break e}}V=0}else V=1;while(!1);if(Ge=Ge+1|0,!V){Cn=21;break}if(z=g[m>>2]|0,(Ge|0)>=(z|0)){N=0,Cn=21;break}}return(Cn|0)==21?(oe=yi,N|0):0}function pv(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0,Ge=0,Re=0,Lt=0,Ut=0,bt=0,It=0,mi=0,Zn=0,ri=0,En=0,xn=0,Cn=0,yi=0,mn=0,Pi=0,bs=0;if(bs=oe,oe=oe+112|0,Cn=bs+80|0,z=bs+72|0,yi=bs,mn=bs+56|0,y|0)return Pi=15,oe=bs,Pi|0;if(V=m+8|0,Pi=jr((g[V>>2]<<5)+32|0)|0,!Pi)return Pi=13,oe=bs,Pi|0;if(Nm(m,Pi),En=m,xn=g[En+4>>2]|0,y=z,g[y>>2]=g[En>>2],g[y+4>>2]=xn,Tv(z,Cn),y=hl(Cn,A,yi)|0,y)En=0,xn=0;else{if(y=g[z>>2]|0,C=g[V>>2]|0,(C|0)>0){P=g[m+12>>2]|0,T=0;do y=(g[P+(T<<3)>>2]|0)+y|0,T=T+1|0;while((T|0)!=(C|0));T=y}else T=y;y=yi,C=g[y>>2]|0,y=g[y+4>>2]|0,P=((T|0)<0)<<31>>31,(y|0)<(P|0)|(y|0)==(P|0)&C>>>0<T>>>0?(y=yi,g[y>>2]=T,g[y+4>>2]=P,y=P):T=C,En=Pn(T|0,y|0,12,0)|0,xn=se()|0,y=yi,g[y>>2]=En,g[y+4>>2]=xn,y=0}if(y|0)return gn(Pi),Pi=y,oe=bs,Pi|0;if(T=xo(En,8)|0,!T)return gn(Pi),Pi=13,oe=bs,Pi|0;if(N=xo(En,8)|0,!N)return gn(Pi),gn(T),Pi=13,oe=bs,Pi|0;Zn=Cn,g[Zn>>2]=0,g[Zn+4>>2]=0,Zn=m,ri=g[Zn+4>>2]|0,y=z,g[y>>2]=g[Zn>>2],g[y+4>>2]=ri,y=xm(z,En,xn,A,Cn,T,N)|0;e:do if(y)gn(T),gn(N),gn(Pi);else{t:do if((g[V>>2]|0)>0){for(P=m+12|0,C=0;y=xm((g[P>>2]|0)+(C<<3)|0,En,xn,A,Cn,T,N)|0,C=C+1|0,!(y|0);)if((C|0)>=(g[V>>2]|0))break t;gn(T),gn(N),gn(Pi);break e}while(!1);(xn|0)>0|(xn|0)==0&En>>>0>0&&kc(N|0,0,En<<3|0)|0,ri=Cn,Zn=g[ri+4>>2]|0;t:do if((Zn|0)>0|(Zn|0)==0&(g[ri>>2]|0)>>>0>0){bt=T,It=N,mi=T,Zn=N,ri=T,y=T,Re=T,Lt=N,Ut=N,T=N;n:for(;;){for(Je=0,be=0,ke=0,Ge=0,C=0,P=0;;){N=yi,z=N+56|0;do g[N>>2]=0,N=N+4|0;while((N|0)<(z|0));if(A=bt+(Je<<3)|0,V=g[A>>2]|0,A=g[A+4>>2]|0,sA(V,A,1,yi,0)|0){N=yi,z=N+56|0;do g[N>>2]=0,N=N+4|0;while((N|0)<(z|0));N=xo(7,4)|0,N|0&&(Ea(V,A,1,yi,N,7,0,0)|0,gn(N))}for(Ee=0;;){Ae=yi+(Ee<<3)|0,_e=g[Ae>>2]|0,Ae=g[Ae+4>>2]|0;i:do if((_e|0)==0&(Ae|0)==0)N=C,z=P;else{if(J=ts(_e|0,Ae|0,En|0,xn|0)|0,V=se()|0,N=S+(J<<3)|0,A=N,z=g[A>>2]|0,A=g[A+4>>2]|0,!((z|0)==0&(A|0)==0)){ue=0,me=0;do{if((ue|0)>(xn|0)|(ue|0)==(xn|0)&me>>>0>En>>>0)break n;if((z|0)==(_e|0)&(A|0)==(Ae|0)){N=C,z=P;break i}N=Pn(J|0,V|0,1,0)|0,J=Um(N|0,se()|0,En|0,xn|0)|0,V=se()|0,me=Pn(me|0,ue|0,1,0)|0,ue=se()|0,N=S+(J<<3)|0,A=N,z=g[A>>2]|0,A=g[A+4>>2]|0}while(!((z|0)==0&(A|0)==0))}(_e|0)==0&(Ae|0)==0?(N=C,z=P):(ud(_e,Ae,mn)|0,Dm(m,Pi,mn)|0&&(me=Pn(C|0,P|0,1,0)|0,P=se()|0,ue=N,g[ue>>2]=_e,g[ue+4>>2]=Ae,C=It+(C<<3)|0,g[C>>2]=_e,g[C+4>>2]=Ae,C=me),N=C,z=P)}while(!1);if(Ee=Ee+1|0,Ee>>>0>=7)break;C=N,P=z}if(Je=Pn(Je|0,be|0,1,0)|0,be=se()|0,ke=Pn(ke|0,Ge|0,1,0)|0,Ge=se()|0,P=Cn,C=g[P>>2]|0,P=g[P+4>>2]|0,(Ge|0)<(P|0)|(Ge|0)==(P|0)&ke>>>0<C>>>0)C=N,P=z;else break}if((P|0)>0|(P|0)==0&C>>>0>0){C=0,P=0;do Ge=bt+(C<<3)|0,g[Ge>>2]=0,g[Ge+4>>2]=0,C=Pn(C|0,P|0,1,0)|0,P=se()|0,Ge=Cn,ke=g[Ge+4>>2]|0;while((P|0)<(ke|0)|((P|0)==(ke|0)?C>>>0<(g[Ge>>2]|0)>>>0:0))}if(Ge=Cn,g[Ge>>2]=N,g[Ge+4>>2]=z,(z|0)>0|(z|0)==0&N>>>0>0)Ee=T,Je=Ut,be=ri,ke=Lt,Ge=It,T=Re,Ut=y,Lt=mi,Re=Ee,y=Je,ri=Zn,Zn=be,mi=ke,It=bt,bt=Ge;else break t}gn(mi),gn(Zn),gn(Pi),y=1;break e}else y=N;while(!1);gn(Pi),gn(T),gn(y),y=0}while(!1);return Pi=y,oe=bs,Pi|0}function oA(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0;if(J=oe,oe=oe+176|0,z=J,(A|0)<1)return hw(y,0,0),V=0,oe=J,V|0;for(N=m,N=ht(g[N>>2]|0,g[N+4>>2]|0,52)|0,se()|0,hw(y,(A|0)>6?A:6,N&15),N=0;S=m+(N<<3)|0,S=au(g[S>>2]|0,g[S+4>>2]|0,z)|0,!(S|0);){if(S=g[z>>2]|0,(S|0)>0){P=0;do C=z+8+(P<<4)|0,P=P+1|0,S=z+8+(((P|0)%(S|0)|0)<<4)|0,T=dw(y,S,C)|0,T?Fm(y,T)|0:w5(y,C,S)|0,S=g[z>>2]|0;while((P|0)<(S|0))}if(N=N+1|0,(N|0)>=(A|0)){S=0,V=13;break}}return(V|0)==13?(oe=J,S|0):(fw(y),V=S,oe=J,V|0)}function d5(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0;if(C=oe,oe=oe+32|0,S=C,T=C+16|0,m=oA(m,A,T)|0,m|0)return y=m,oe=C,y|0;if(g[y>>2]=0,g[y+4>>2]=0,g[y+8>>2]=0,m=Om(T)|0,m|0)do{A=Sv(y)|0;do Vu(A,m)|0,P=m+16|0,g[S>>2]=g[P>>2],g[S+4>>2]=g[P+4>>2],g[S+8>>2]=g[P+8>>2],g[S+12>>2]=g[P+12>>2],Fm(T,m)|0,m=pw(T,S)|0;while(m|0);m=Om(T)|0}while(m|0);return fw(T),m=Lh(y)|0,m?(pl(y),P=m,oe=C,P|0):(P=0,oe=C,P|0)}function Ci(m){return m=m|0,m>>>0>121?(m=0,m|0):(m=g[7696+(m*28|0)+16>>2]|0,m|0)}function ui(m){return m=m|0,(m|0)==4|(m|0)==117|0}function Av(m){return m=m|0,g[11120+((g[m>>2]|0)*216|0)+((g[m+4>>2]|0)*72|0)+((g[m+8>>2]|0)*24|0)+(g[m+12>>2]<<3)>>2]|0}function mv(m){return m=m|0,g[11120+((g[m>>2]|0)*216|0)+((g[m+4>>2]|0)*72|0)+((g[m+8>>2]|0)*24|0)+(g[m+12>>2]<<3)+4>>2]|0}function kb(m,A){m=m|0,A=A|0,m=7696+(m*28|0)|0,g[A>>2]=g[m>>2],g[A+4>>2]=g[m+4>>2],g[A+8>>2]=g[m+8>>2],g[A+12>>2]=g[m+12>>2]}function p5(m,A){m=m|0,A=A|0;var y=0,S=0;if(A>>>0>20)return A=-1,A|0;do if((g[11120+(A*216|0)>>2]|0)!=(m|0))if((g[11120+(A*216|0)+8>>2]|0)!=(m|0))if((g[11120+(A*216|0)+16>>2]|0)!=(m|0))if((g[11120+(A*216|0)+24>>2]|0)!=(m|0))if((g[11120+(A*216|0)+32>>2]|0)!=(m|0))if((g[11120+(A*216|0)+40>>2]|0)!=(m|0))if((g[11120+(A*216|0)+48>>2]|0)!=(m|0))if((g[11120+(A*216|0)+56>>2]|0)!=(m|0))if((g[11120+(A*216|0)+64>>2]|0)!=(m|0))if((g[11120+(A*216|0)+72>>2]|0)!=(m|0))if((g[11120+(A*216|0)+80>>2]|0)!=(m|0))if((g[11120+(A*216|0)+88>>2]|0)!=(m|0))if((g[11120+(A*216|0)+96>>2]|0)!=(m|0))if((g[11120+(A*216|0)+104>>2]|0)!=(m|0))if((g[11120+(A*216|0)+112>>2]|0)!=(m|0))if((g[11120+(A*216|0)+120>>2]|0)!=(m|0))if((g[11120+(A*216|0)+128>>2]|0)!=(m|0))if((g[11120+(A*216|0)+136>>2]|0)==(m|0))m=2,y=1,S=2;else{if((g[11120+(A*216|0)+144>>2]|0)==(m|0)){m=0,y=2,S=0;break}if((g[11120+(A*216|0)+152>>2]|0)==(m|0)){m=0,y=2,S=1;break}if((g[11120+(A*216|0)+160>>2]|0)==(m|0)){m=0,y=2,S=2;break}if((g[11120+(A*216|0)+168>>2]|0)==(m|0)){m=1,y=2,S=0;break}if((g[11120+(A*216|0)+176>>2]|0)==(m|0)){m=1,y=2,S=1;break}if((g[11120+(A*216|0)+184>>2]|0)==(m|0)){m=1,y=2,S=2;break}if((g[11120+(A*216|0)+192>>2]|0)==(m|0)){m=2,y=2,S=0;break}if((g[11120+(A*216|0)+200>>2]|0)==(m|0)){m=2,y=2,S=1;break}if((g[11120+(A*216|0)+208>>2]|0)==(m|0)){m=2,y=2,S=2;break}else m=-1;return m|0}else m=2,y=1,S=1;else m=2,y=1,S=0;else m=1,y=1,S=2;else m=1,y=1,S=1;else m=1,y=1,S=0;else m=0,y=1,S=2;else m=0,y=1,S=1;else m=0,y=1,S=0;else m=2,y=0,S=2;else m=2,y=0,S=1;else m=2,y=0,S=0;else m=1,y=0,S=2;else m=1,y=0,S=1;else m=1,y=0,S=0;else m=0,y=0,S=2;else m=0,y=0,S=1;else m=0,y=0,S=0;while(!1);return A=g[11120+(A*216|0)+(y*72|0)+(m*24|0)+(S<<3)+4>>2]|0,A|0}function Ub(m,A){return m=m|0,A=A|0,(g[7696+(m*28|0)+20>>2]|0)==(A|0)?(A=1,A|0):(A=(g[7696+(m*28|0)+24>>2]|0)==(A|0),A|0)}function Ir(m,A){return m=m|0,A=A|0,g[848+(m*28|0)+(A<<2)>>2]|0}function aA(m,A){return m=m|0,A=A|0,(g[848+(m*28|0)>>2]|0)==(A|0)?(A=0,A|0):(g[848+(m*28|0)+4>>2]|0)==(A|0)?(A=1,A|0):(g[848+(m*28|0)+8>>2]|0)==(A|0)?(A=2,A|0):(g[848+(m*28|0)+12>>2]|0)==(A|0)?(A=3,A|0):(g[848+(m*28|0)+16>>2]|0)==(A|0)?(A=4,A|0):(g[848+(m*28|0)+20>>2]|0)==(A|0)?(A=5,A|0):((g[848+(m*28|0)+24>>2]|0)==(A|0)?6:7)|0}function A5(){return 122}function gv(m){m=m|0;var A=0,y=0,S=0;A=0;do Tt(A|0,0,45)|0,S=se()|0|134225919,y=m+(A<<3)|0,g[y>>2]=-1,g[y+4>>2]=S,A=A+1|0;while((A|0)!=122);return 0}function zb(m){return m=m|0,+le[m+16>>3]<+le[m+24>>3]|0}function lA(m,A){m=m|0,A=A|0;var y=0,S=0,T=0;return y=+le[A>>3],!(y>=+le[m+8>>3])||!(y<=+le[m>>3])?(A=0,A|0):(S=+le[m+16>>3],y=+le[m+24>>3],T=+le[A+8>>3],A=T>=y,m=T<=S&1,S<y?A&&(m=1):A||(m=0),A=(m|0)!=0,A|0)}function hl(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0;Ae=oe,oe=oe+288|0,J=Ae+264|0,ue=Ae+96|0,V=Ae,N=V,z=N+96|0;do g[N>>2]=0,N=N+4|0;while((N|0)<(z|0));return A=Ih(A,V)|0,A|0?(_e=A,oe=Ae,_e|0):(z=V,V=g[z>>2]|0,z=g[z+4>>2]|0,ud(V,z,J)|0,au(V,z,ue)|0,P=+Fc(J,ue+8|0),le[J>>3]=+le[m>>3],z=J+8|0,le[z>>3]=+le[m+16>>3],le[ue>>3]=+le[m+8>>3],V=ue+8|0,le[V>>3]=+le[m+24>>3],T=+Fc(J,ue),Je=+le[z>>3]-+le[V>>3],C=+re(+Je),Ee=+le[J>>3]-+le[ue>>3],S=+re(+Ee),!(Je==0|Ee==0)&&(Je=+Pv(+C,+S),Je=+ln(+(T*T/+zm(+(Je/+zm(+C,+S)),3)/(P*(P*2.59807621135)*.8))),le[Jn>>3]=Je,me=~~Je>>>0,_e=+re(Je)>=1?Je>0?~~+ni(+Br(Je/4294967296),4294967295)>>>0:~~+ln((Je-+(~~Je>>>0))/4294967296)>>>0:0,(g[Jn+4>>2]&2146435072|0)!=2146435072)?(ue=(me|0)==0&(_e|0)==0,A=y,g[A>>2]=ue?1:me,g[A+4>>2]=ue?0:_e,A=0):A=1,_e=A,oe=Ae,_e|0)}function m5(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0,V=0,J=0;V=oe,oe=oe+288|0,P=V+264|0,N=V+96|0,z=V,T=z,C=T+96|0;do g[T>>2]=0,T=T+4|0;while((T|0)<(C|0));return y=Ih(y,z)|0,y|0?(S=y,oe=V,S|0):(y=z,T=g[y>>2]|0,y=g[y+4>>2]|0,ud(T,y,P)|0,au(T,y,N)|0,J=+Fc(P,N+8|0),J=+ln(+(+Fc(m,A)/(J*2))),le[Jn>>3]=J,y=~~J>>>0,T=+re(J)>=1?J>0?~~+ni(+Br(J/4294967296),4294967295)>>>0:~~+ln((J-+(~~J>>>0))/4294967296)>>>0:0,(g[Jn+4>>2]&2146435072|0)==2146435072?(S=1,oe=V,S|0):(z=(y|0)==0&(T|0)==0,g[S>>2]=z?1:y,g[S+4>>2]=z?0:T,S=0,oe=V,S|0))}function g5(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0,g[m>>2]=A,g[m+4>>2]=y,g[m+8>>2]=S}function tu(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0;ue=A+8|0,g[ue>>2]=0,z=+le[m>>3],P=+re(+z),V=+le[m+8>>3],N=+re(+V)/.8660254037844386,P=P+N*.5,y=~~P,m=~~N,P=P-+(y|0),N=N-+(m|0);do if(P<.5)if(P<.3333333333333333)if(g[A>>2]=y,N<(P+1)*.5){g[A+4>>2]=m;break}else{m=m+1|0,g[A+4>>2]=m;break}else if(me=1-P,m=(!(N<me)&1)+m|0,g[A+4>>2]=m,me<=N&N<P*2){y=y+1|0,g[A>>2]=y;break}else{g[A>>2]=y;break}else{if(!(P<.6666666666666666))if(y=y+1|0,g[A>>2]=y,N<P*.5){g[A+4>>2]=m;break}else{m=m+1|0,g[A+4>>2]=m;break}if(N<1-P){if(g[A+4>>2]=m,P*2+-1<N){g[A>>2]=y;break}}else m=m+1|0,g[A+4>>2]=m;y=y+1|0,g[A>>2]=y}while(!1);do if(z<0)if(m&1){J=(m+1|0)/2|0,J=$r(y|0,((y|0)<0)<<31>>31|0,J|0,((J|0)<0)<<31>>31|0)|0,y=~~(+(y|0)-((+(J>>>0)+4294967296*+(se()|0))*2+1)),g[A>>2]=y;break}else{J=(m|0)/2|0,J=$r(y|0,((y|0)<0)<<31>>31|0,J|0,((J|0)<0)<<31>>31|0)|0,y=~~(+(y|0)-(+(J>>>0)+4294967296*+(se()|0))*2),g[A>>2]=y;break}while(!1);J=A+4|0,V<0&&(y=y-((m<<1|1|0)/2|0)|0,g[A>>2]=y,m=0-m|0,g[J>>2]=m),S=m-y|0,(y|0)<0?(T=0-y|0,g[J>>2]=S,g[ue>>2]=T,g[A>>2]=0,m=S,y=0):T=0,(m|0)<0&&(y=y-m|0,g[A>>2]=y,T=T-m|0,g[ue>>2]=T,g[J>>2]=0,m=0),C=y-T|0,S=m-T|0,(T|0)<0&&(g[A>>2]=C,g[J>>2]=S,g[ue>>2]=0,m=S,y=C,T=0),S=(m|0)<(y|0)?m:y,S=(T|0)<(S|0)?T:S,!((S|0)<=0)&&(g[A>>2]=y-S,g[J>>2]=m-S,g[ue>>2]=T-S)}function Xi(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0;A=g[m>>2]|0,P=m+4|0,y=g[P>>2]|0,(A|0)<0&&(y=y-A|0,g[P>>2]=y,C=m+8|0,g[C>>2]=(g[C>>2]|0)-A,g[m>>2]=0,A=0),(y|0)<0?(A=A-y|0,g[m>>2]=A,C=m+8|0,T=(g[C>>2]|0)-y|0,g[C>>2]=T,g[P>>2]=0,y=0):(T=m+8|0,C=T,T=g[T>>2]|0),(T|0)<0&&(A=A-T|0,g[m>>2]=A,y=y-T|0,g[P>>2]=y,g[C>>2]=0,T=0),S=(y|0)<(A|0)?y:A,S=(T|0)<(S|0)?T:S,!((S|0)<=0)&&(g[m>>2]=A-S,g[P>>2]=y-S,g[C>>2]=T-S)}function nu(m,A){m=m|0,A=A|0;var y=0,S=0;S=g[m+8>>2]|0,y=+((g[m+4>>2]|0)-S|0),le[A>>3]=+((g[m>>2]|0)-S|0)-y*.5,le[A+8>>3]=y*.8660254037844386}function xs(m,A,y){m=m|0,A=A|0,y=y|0,g[y>>2]=(g[A>>2]|0)+(g[m>>2]|0),g[y+4>>2]=(g[A+4>>2]|0)+(g[m+4>>2]|0),g[y+8>>2]=(g[A+8>>2]|0)+(g[m+8>>2]|0)}function bm(m,A,y){m=m|0,A=A|0,y=y|0,g[y>>2]=(g[m>>2]|0)-(g[A>>2]|0),g[y+4>>2]=(g[m+4>>2]|0)-(g[A+4>>2]|0),g[y+8>>2]=(g[m+8>>2]|0)-(g[A+8>>2]|0)}function Gb(m,A){m=m|0,A=A|0;var y=0,S=0;y=Kt(g[m>>2]|0,A)|0,g[m>>2]=y,y=m+4|0,S=Kt(g[y>>2]|0,A)|0,g[y>>2]=S,m=m+8|0,A=Kt(g[m>>2]|0,A)|0,g[m>>2]=A}function Yo(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;P=g[m>>2]|0,N=(P|0)<0,S=(g[m+4>>2]|0)-(N?P:0)|0,C=(S|0)<0,T=(C?0-S|0:0)+((g[m+8>>2]|0)-(N?P:0))|0,y=(T|0)<0,m=y?0:T,A=(C?0:S)-(y?T:0)|0,T=(N?0:P)-(C?S:0)-(y?T:0)|0,y=(A|0)<(T|0)?A:T,y=(m|0)<(y|0)?m:y,S=(y|0)>0,m=m-(S?y:0)|0,A=A-(S?y:0)|0;e:do switch(T-(S?y:0)|0){case 0:switch(A|0){case 0:return N=m|0?(m|0)==1?1:7:0,N|0;case 1:return N=m|0?(m|0)==1?3:7:2,N|0;default:break e}case 1:switch(A|0){case 0:return N=m|0?(m|0)==1?5:7:4,N|0;case 1:{if(!m)m=6;else break e;return m|0}default:break e}}while(!1);return N=7,N|0}function y5(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;P=m+8|0,T=g[P>>2]|0,C=(g[m>>2]|0)-T|0,N=m+4|0,T=(g[N>>2]|0)-T|0;do if(C>>>0>715827881|T>>>0>715827881){if(y=(C|0)>0,y){if((2147483647-C|0)<(C|0)||(2147483647-(C<<1)|0)<(C|0))return N=1,N|0}else if((-2147483648-C|0)>(C|0)||(-2147483648-(C<<1)|0)>(C|0))return N=1,N|0;if(A=C*3|0,(T|0)>0){if((2147483647-T|0)<(T|0))return N=1,N|0}else if((-2147483648-T|0)>(T|0))return N=1,N|0;if(S=T<<1,(C|0)>-1){if((A|-2147483648|0)>=(T|0))return N=1,N|0}else if((A^-2147483648|0)<(T|0))return N=1,N|0;if(y){if((2147483647-C|0)<(S|0))A=1;else{y=S;break}return A|0}else{if((-2147483648-C|0)>(S|0))A=1;else{y=S;break}return A|0}}else y=T<<1,A=C*3|0;while(!1);S=ju(+(A-T|0)/7)|0,g[m>>2]=S,T=ju(+(y+C|0)/7)|0,g[N>>2]=T,g[P>>2]=0,y=(T|0)<(S|0),A=y?S:T,y=y?T:S;do if((y|0)<0){if((A|0)>0){if((A|-2147483648|0)<(y|0)&((y|0)!=-2147483648&(2147483647-A|0)>=(y|0)))break;lt(23313,22444,355,22455)}if((y|0)==-2147483648|(-2147483648-A|0)>(y|0)&&lt(23313,22444,355,22455),(A|0)>-1){if((A|-2147483648|0)<(y|0))break;lt(23313,22444,355,22455)}else{if((A^-2147483648|0)>=(y|0))break;lt(23313,22444,355,22455)}}while(!1);return A=T-S|0,(S|0)<0?(y=0-S|0,g[N>>2]=A,g[P>>2]=y,g[m>>2]=0,S=0):(A=T,y=0),(A|0)<0&&(S=S-A|0,g[m>>2]=S,y=y-A|0,g[P>>2]=y,g[N>>2]=0,A=0),C=S-y|0,T=A-y|0,(y|0)<0?(g[m>>2]=C,g[N>>2]=T,g[P>>2]=0,A=T,T=C,y=0):T=S,S=(A|0)<(T|0)?A:T,S=(y|0)<(S|0)?y:S,(S|0)<=0?(N=0,N|0):(g[m>>2]=T-S,g[N>>2]=A-S,g[P>>2]=y-S,N=0,N|0)}function wm(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;P=m+8|0,T=g[P>>2]|0,C=(g[m>>2]|0)-T|0,N=m+4|0,T=(g[N>>2]|0)-T|0;do if(C>>>0>715827881|T>>>0>715827881){if(y=(C|0)>0,y){if((2147483647-C|0)<(C|0))return N=1,N|0}else if((-2147483648-C|0)>(C|0))return N=1,N|0;if(A=C<<1,(T|0)>0){if((2147483647-T|0)<(T|0)||(2147483647-(T<<1)|0)<(T|0))return N=1,N|0}else if((-2147483648-T|0)>(T|0)||(-2147483648-(T<<1)|0)>(T|0))return N=1,N|0;if(S=T*3|0,y){if((2147483647-A|0)<(T|0))return N=1,N|0}else if((-2147483648-A|0)>(T|0))return N=1,N|0;if((T|0)>-1){if((S|-2147483648|0)<(C|0)){y=S;break}else A=1;return A|0}else{if((S^-2147483648|0)<(C|0))A=1;else{y=S;break}return A|0}}else y=T*3|0,A=C<<1;while(!1);S=ju(+(A+T|0)/7)|0,g[m>>2]=S,T=ju(+(y-C|0)/7)|0,g[N>>2]=T,g[P>>2]=0,y=(T|0)<(S|0),A=y?S:T,y=y?T:S;do if((y|0)<0){if((A|0)>0){if((A|-2147483648|0)<(y|0)&((y|0)!=-2147483648&(2147483647-A|0)>=(y|0)))break;lt(23313,22444,404,22469)}if((y|0)==-2147483648|(-2147483648-A|0)>(y|0)&&lt(23313,22444,404,22469),(A|0)>-1){if((A|-2147483648|0)<(y|0))break;lt(23313,22444,404,22469)}else{if((A^-2147483648|0)>=(y|0))break;lt(23313,22444,404,22469)}}while(!1);return A=T-S|0,(S|0)<0?(y=0-S|0,g[N>>2]=A,g[P>>2]=y,g[m>>2]=0,S=0):(A=T,y=0),(A|0)<0&&(S=S-A|0,g[m>>2]=S,y=y-A|0,g[P>>2]=y,g[N>>2]=0,A=0),C=S-y|0,T=A-y|0,(y|0)<0?(g[m>>2]=C,g[N>>2]=T,g[P>>2]=0,A=T,T=C,y=0):T=S,S=(A|0)<(T|0)?A:T,S=(y|0)<(S|0)?y:S,(S|0)<=0?(N=0,N|0):(g[m>>2]=T-S,g[N>>2]=A-S,g[P>>2]=y-S,N=0,N|0)}function v5(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;P=m+8|0,y=g[P>>2]|0,A=(g[m>>2]|0)-y|0,N=m+4|0,y=(g[N>>2]|0)-y|0,S=ju(+((A*3|0)-y|0)/7)|0,g[m>>2]=S,A=ju(+((y<<1)+A|0)/7)|0,g[N>>2]=A,g[P>>2]=0,y=A-S|0,(S|0)<0?(C=0-S|0,g[N>>2]=y,g[P>>2]=C,g[m>>2]=0,A=y,S=0,y=C):y=0,(A|0)<0&&(S=S-A|0,g[m>>2]=S,y=y-A|0,g[P>>2]=y,g[N>>2]=0,A=0),C=S-y|0,T=A-y|0,(y|0)<0?(g[m>>2]=C,g[N>>2]=T,g[P>>2]=0,A=T,T=C,y=0):T=S,S=(A|0)<(T|0)?A:T,S=(y|0)<(S|0)?y:S,!((S|0)<=0)&&(g[m>>2]=T-S,g[N>>2]=A-S,g[P>>2]=y-S)}function Ca(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;P=m+8|0,y=g[P>>2]|0,A=(g[m>>2]|0)-y|0,N=m+4|0,y=(g[N>>2]|0)-y|0,S=ju(+((A<<1)+y|0)/7)|0,g[m>>2]=S,A=ju(+((y*3|0)-A|0)/7)|0,g[N>>2]=A,g[P>>2]=0,y=A-S|0,(S|0)<0?(C=0-S|0,g[N>>2]=y,g[P>>2]=C,g[m>>2]=0,A=y,S=0,y=C):y=0,(A|0)<0&&(S=S-A|0,g[m>>2]=S,y=y-A|0,g[P>>2]=y,g[N>>2]=0,A=0),C=S-y|0,T=A-y|0,(y|0)<0?(g[m>>2]=C,g[N>>2]=T,g[P>>2]=0,A=T,T=C,y=0):T=S,S=(A|0)<(T|0)?A:T,S=(y|0)<(S|0)?y:S,!((S|0)<=0)&&(g[m>>2]=T-S,g[N>>2]=A-S,g[P>>2]=y-S)}function Mh(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;A=g[m>>2]|0,P=m+4|0,y=g[P>>2]|0,N=m+8|0,S=g[N>>2]|0,T=y+(A*3|0)|0,g[m>>2]=T,y=S+(y*3|0)|0,g[P>>2]=y,A=(S*3|0)+A|0,g[N>>2]=A,S=y-T|0,(T|0)<0?(A=A-T|0,g[P>>2]=S,g[N>>2]=A,g[m>>2]=0,y=S,S=0):S=T,(y|0)<0&&(S=S-y|0,g[m>>2]=S,A=A-y|0,g[N>>2]=A,g[P>>2]=0,y=0),C=S-A|0,T=y-A|0,(A|0)<0?(g[m>>2]=C,g[P>>2]=T,g[N>>2]=0,S=C,A=0):T=y,y=(T|0)<(S|0)?T:S,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[m>>2]=S-y,g[P>>2]=T-y,g[N>>2]=A-y)}function iu(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;T=g[m>>2]|0,P=m+4|0,A=g[P>>2]|0,N=m+8|0,y=g[N>>2]|0,S=(A*3|0)+T|0,T=y+(T*3|0)|0,g[m>>2]=T,g[P>>2]=S,A=(y*3|0)+A|0,g[N>>2]=A,y=S-T|0,(T|0)<0?(A=A-T|0,g[P>>2]=y,g[N>>2]=A,g[m>>2]=0,T=0):y=S,(y|0)<0&&(T=T-y|0,g[m>>2]=T,A=A-y|0,g[N>>2]=A,g[P>>2]=0,y=0),C=T-A|0,S=y-A|0,(A|0)<0?(g[m>>2]=C,g[P>>2]=S,g[N>>2]=0,T=C,A=0):S=y,y=(S|0)<(T|0)?S:T,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[m>>2]=T-y,g[P>>2]=S-y,g[N>>2]=A-y)}function Th(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0,N=0;(A+-1|0)>>>0>=6||(T=(g[15440+(A*12|0)>>2]|0)+(g[m>>2]|0)|0,g[m>>2]=T,N=m+4|0,S=(g[15440+(A*12|0)+4>>2]|0)+(g[N>>2]|0)|0,g[N>>2]=S,P=m+8|0,A=(g[15440+(A*12|0)+8>>2]|0)+(g[P>>2]|0)|0,g[P>>2]=A,y=S-T|0,(T|0)<0?(A=A-T|0,g[N>>2]=y,g[P>>2]=A,g[m>>2]=0,S=0):(y=S,S=T),(y|0)<0&&(S=S-y|0,g[m>>2]=S,A=A-y|0,g[P>>2]=A,g[N>>2]=0,y=0),C=S-A|0,T=y-A|0,(A|0)<0?(g[m>>2]=C,g[N>>2]=T,g[P>>2]=0,S=C,A=0):T=y,y=(T|0)<(S|0)?T:S,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[m>>2]=S-y,g[N>>2]=T-y,g[P>>2]=A-y))}function Sm(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;T=g[m>>2]|0,P=m+4|0,A=g[P>>2]|0,N=m+8|0,y=g[N>>2]|0,S=A+T|0,T=y+T|0,g[m>>2]=T,g[P>>2]=S,A=y+A|0,g[N>>2]=A,y=S-T|0,(T|0)<0?(A=A-T|0,g[P>>2]=y,g[N>>2]=A,g[m>>2]=0,S=0):(y=S,S=T),(y|0)<0&&(S=S-y|0,g[m>>2]=S,A=A-y|0,g[N>>2]=A,g[P>>2]=0,y=0),C=S-A|0,T=y-A|0,(A|0)<0?(g[m>>2]=C,g[P>>2]=T,g[N>>2]=0,S=C,A=0):T=y,y=(T|0)<(S|0)?T:S,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[m>>2]=S-y,g[P>>2]=T-y,g[N>>2]=A-y)}function id(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;A=g[m>>2]|0,P=m+4|0,S=g[P>>2]|0,N=m+8|0,y=g[N>>2]|0,T=S+A|0,g[m>>2]=T,S=y+S|0,g[P>>2]=S,A=y+A|0,g[N>>2]=A,y=S-T|0,(T|0)<0?(A=A-T|0,g[P>>2]=y,g[N>>2]=A,g[m>>2]=0,S=0):(y=S,S=T),(y|0)<0&&(S=S-y|0,g[m>>2]=S,A=A-y|0,g[N>>2]=A,g[P>>2]=0,y=0),C=S-A|0,T=y-A|0,(A|0)<0?(g[m>>2]=C,g[P>>2]=T,g[N>>2]=0,S=C,A=0):T=y,y=(T|0)<(S|0)?T:S,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[m>>2]=S-y,g[P>>2]=T-y,g[N>>2]=A-y)}function Ic(m){switch(m=m|0,m|0){case 1:{m=5;break}case 5:{m=4;break}case 4:{m=6;break}case 6:{m=2;break}case 2:{m=3;break}case 3:{m=1;break}}return m|0}function ru(m){switch(m=m|0,m|0){case 1:{m=3;break}case 3:{m=2;break}case 2:{m=6;break}case 6:{m=4;break}case 4:{m=5;break}case 5:{m=1;break}}return m|0}function Mm(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;A=g[m>>2]|0,P=m+4|0,y=g[P>>2]|0,N=m+8|0,S=g[N>>2]|0,T=y+(A<<1)|0,g[m>>2]=T,y=S+(y<<1)|0,g[P>>2]=y,A=(S<<1)+A|0,g[N>>2]=A,S=y-T|0,(T|0)<0?(A=A-T|0,g[P>>2]=S,g[N>>2]=A,g[m>>2]=0,y=S,S=0):S=T,(y|0)<0&&(S=S-y|0,g[m>>2]=S,A=A-y|0,g[N>>2]=A,g[P>>2]=0,y=0),C=S-A|0,T=y-A|0,(A|0)<0?(g[m>>2]=C,g[P>>2]=T,g[N>>2]=0,S=C,A=0):T=y,y=(T|0)<(S|0)?T:S,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[m>>2]=S-y,g[P>>2]=T-y,g[N>>2]=A-y)}function Eh(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;T=g[m>>2]|0,P=m+4|0,A=g[P>>2]|0,N=m+8|0,y=g[N>>2]|0,S=(A<<1)+T|0,T=y+(T<<1)|0,g[m>>2]=T,g[P>>2]=S,A=(y<<1)+A|0,g[N>>2]=A,y=S-T|0,(T|0)<0?(A=A-T|0,g[P>>2]=y,g[N>>2]=A,g[m>>2]=0,T=0):y=S,(y|0)<0&&(T=T-y|0,g[m>>2]=T,A=A-y|0,g[N>>2]=A,g[P>>2]=0,y=0),C=T-A|0,S=y-A|0,(A|0)<0?(g[m>>2]=C,g[P>>2]=S,g[N>>2]=0,T=C,A=0):S=y,y=(S|0)<(T|0)?S:T,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[m>>2]=T-y,g[P>>2]=S-y,g[N>>2]=A-y)}function yo(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0,N=0;return P=(g[m>>2]|0)-(g[A>>2]|0)|0,N=(P|0)<0,S=(g[m+4>>2]|0)-(g[A+4>>2]|0)-(N?P:0)|0,C=(S|0)<0,T=(N?0-P|0:0)+(g[m+8>>2]|0)-(g[A+8>>2]|0)+(C?0-S|0:0)|0,m=(T|0)<0,A=m?0:T,y=(C?0:S)-(m?T:0)|0,T=(N?0:P)-(C?S:0)-(m?T:0)|0,m=(y|0)<(T|0)?y:T,m=(A|0)<(m|0)?A:m,S=(m|0)>0,A=A-(S?m:0)|0,y=y-(S?m:0)|0,m=T-(S?m:0)|0,m=(m|0)>-1?m:0-m|0,y=(y|0)>-1?y:0-y|0,A=(A|0)>-1?A:0-A|0,A=(y|0)>(A|0)?y:A,((m|0)>(A|0)?m:A)|0}function su(m,A){m=m|0,A=A|0;var y=0;y=g[m+8>>2]|0,g[A>>2]=(g[m>>2]|0)-y,g[A+4>>2]=(g[m+4>>2]|0)-y}function Nc(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0,N=0;S=g[m>>2]|0,g[A>>2]=S,T=g[m+4>>2]|0,P=A+4|0,g[P>>2]=T,N=A+8|0,g[N>>2]=0,y=(T|0)<(S|0),m=y?S:T,y=y?T:S;do if((y|0)<0){if((m|0)>0){if((m|-2147483648|0)<(y|0)&((y|0)!=-2147483648&(2147483647-m|0)>=(y|0)))break;return m=1,m|0}if((y|0)==-2147483648|(-2147483648-m|0)>(y|0))return A=1,A|0;if((m|0)>-1){if((m|-2147483648|0)<(y|0))break;return m=1,m|0}else{if((m^-2147483648|0)<(y|0))m=1;else break;return m|0}}while(!1);return m=T-S|0,(S|0)<0?(y=0-S|0,g[P>>2]=m,g[N>>2]=y,g[A>>2]=0,S=0):(m=T,y=0),(m|0)<0&&(S=S-m|0,g[A>>2]=S,y=y-m|0,g[N>>2]=y,g[P>>2]=0,m=0),C=S-y|0,T=m-y|0,(y|0)<0?(g[A>>2]=C,g[P>>2]=T,g[N>>2]=0,m=T,T=C,y=0):T=S,S=(m|0)<(T|0)?m:T,S=(y|0)<(S|0)?y:S,(S|0)<=0?(A=0,A|0):(g[A>>2]=T-S,g[P>>2]=m-S,g[N>>2]=y-S,A=0,A|0)}function Tm(m){m=m|0;var A=0,y=0,S=0,T=0;A=m+8|0,T=g[A>>2]|0,y=T-(g[m>>2]|0)|0,g[m>>2]=y,S=m+4|0,m=(g[S>>2]|0)-T|0,g[S>>2]=m,g[A>>2]=0-(m+y)}function Hb(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;y=g[m>>2]|0,A=0-y|0,g[m>>2]=A,P=m+8|0,g[P>>2]=0,N=m+4|0,S=g[N>>2]|0,T=S+y|0,(y|0)>0?(g[N>>2]=T,g[P>>2]=y,g[m>>2]=0,A=0,S=T):y=0,(S|0)<0?(C=A-S|0,g[m>>2]=C,y=y-S|0,g[P>>2]=y,g[N>>2]=0,T=C-y|0,A=0-y|0,(y|0)<0?(g[m>>2]=T,g[N>>2]=A,g[P>>2]=0,S=A,y=0):(S=0,T=C)):T=A,A=(S|0)<(T|0)?S:T,A=(y|0)<(A|0)?y:A,!((A|0)<=0)&&(g[m>>2]=T-A,g[N>>2]=S-A,g[P>>2]=y-A)}function zu(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0,V=0,J=0,ue=0;if(ue=oe,oe=oe+64|0,J=ue,N=ue+56|0,!(!0&(A&2013265920|0)==134217728&(!0&(S&2013265920|0)==134217728)))return T=5,oe=ue,T|0;if((m|0)==(y|0)&(A|0)==(S|0))return g[T>>2]=0,T=0,oe=ue,T|0;if(P=ht(m|0,A|0,52)|0,se()|0,P=P&15,V=ht(y|0,S|0,52)|0,se()|0,(P|0)!=(V&15|0))return T=12,oe=ue,T|0;if(C=P+-1|0,P>>>0>1){Hu(m,A,C,J)|0,Hu(y,S,C,N)|0,V=J,z=g[V>>2]|0,V=g[V+4>>2]|0;e:do if((z|0)==(g[N>>2]|0)&&(V|0)==(g[N+4>>2]|0)){P=(P^15)*3|0,C=ht(m|0,A|0,P|0)|0,se()|0,C=C&7,P=ht(y|0,S|0,P|0)|0,se()|0,P=P&7;do if((C|0)==0|(P|0)==0)g[T>>2]=1,C=0;else if((C|0)==7)C=5;else{if((C|0)==1|(P|0)==1&&Ri(z,V)|0){C=5;break}if((g[15536+(C<<2)>>2]|0)!=(P|0)&&(g[15568+(C<<2)>>2]|0)!=(P|0))break e;g[T>>2]=1,C=0}while(!1);return T=C,oe=ue,T|0}while(!1)}C=J,P=C+56|0;do g[C>>2]=0,C=C+4|0;while((C|0)<(P|0));return rA(m,A,1,J)|0,A=J,!((g[A>>2]|0)==(y|0)&&(g[A+4>>2]|0)==(S|0))&&(A=J+8|0,!((g[A>>2]|0)==(y|0)&&(g[A+4>>2]|0)==(S|0)))&&(A=J+16|0,!((g[A>>2]|0)==(y|0)&&(g[A+4>>2]|0)==(S|0)))&&(A=J+24|0,!((g[A>>2]|0)==(y|0)&&(g[A+4>>2]|0)==(S|0)))&&(A=J+32|0,!((g[A>>2]|0)==(y|0)&&(g[A+4>>2]|0)==(S|0)))&&(A=J+40|0,!((g[A>>2]|0)==(y|0)&&(g[A+4>>2]|0)==(S|0)))?(C=J+48|0,C=((g[C>>2]|0)==(y|0)?(g[C+4>>2]|0)==(S|0):0)&1):C=1,g[T>>2]=C,T=0,oe=ue,T|0}function Dc(m,A,y,S,T){return m=m|0,A=A|0,y=y|0,S=S|0,T=T|0,y=nd(m,A,y,S)|0,(y|0)==7?(T=11,T|0):(S=Tt(y|0,0,56)|0,A=A&-2130706433|(se()|0)|268435456,g[T>>2]=m|S,g[T+4>>2]=A,T=0,T|0)}function Em(m,A,y){return m=m|0,A=A|0,y=y|0,!0&(A&2013265920|0)==268435456?(g[y>>2]=m,g[y+4>>2]=A&-2130706433|134217728,y=0,y|0):(y=6,y|0)}function qb(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0;return T=oe,oe=oe+16|0,S=T,g[S>>2]=0,!0&(A&2013265920|0)==268435456?(C=ht(m|0,A|0,56)|0,se()|0,S=lr(m,A&-2130706433|134217728,C&7,S,y)|0,oe=T,S|0):(S=6,oe=T,S|0)}function Cm(m,A){m=m|0,A=A|0;var y=0;switch(y=ht(m|0,A|0,56)|0,se()|0,y&7){case 0:case 7:return y=0,y|0}return y=A&-2130706433|134217728,!(!0&(A&2013265920|0)==268435456)||!0&(A&117440512|0)==16777216&(Ri(m,y)|0)!=0?(y=0,y|0):(y=fl(m,y)|0,y|0)}function Vb(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0;return T=oe,oe=oe+16|0,S=T,!0&(A&2013265920|0)==268435456?(C=A&-2130706433|134217728,P=y,g[P>>2]=m,g[P+4>>2]=C,g[S>>2]=0,A=ht(m|0,A|0,56)|0,se()|0,S=lr(m,C,A&7,S,y+8|0)|0,oe=T,S|0):(S=6,oe=T,S|0)}function jb(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0;return T=(Ri(m,A)|0)==0,A=A&-2130706433,S=y,g[S>>2]=T?m:0,g[S+4>>2]=T?A|285212672:0,S=y+8|0,g[S>>2]=m,g[S+4>>2]=A|301989888,S=y+16|0,g[S>>2]=m,g[S+4>>2]=A|318767104,S=y+24|0,g[S>>2]=m,g[S+4>>2]=A|335544320,S=y+32|0,g[S>>2]=m,g[S+4>>2]=A|352321536,y=y+40|0,g[y>>2]=m,g[y+4>>2]=A|369098752,0}function rd(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0;return P=oe,oe=oe+16|0,T=P,C=A&-2130706433|134217728,!0&(A&2013265920|0)==268435456?(S=ht(m|0,A|0,56)|0,se()|0,S=uw(m,C,S&7)|0,(S|0)==-1?(g[y>>2]=0,C=6,oe=P,C|0):(Bh(m,C,T)|0&&lt(23313,22484,282,22499),A=ht(m|0,A|0,52)|0,se()|0,A=A&15,Ri(m,C)|0?Lc(T,A,S,2,y):vo(T,A,S,2,y),C=0,oe=P,C|0)):(C=6,oe=P,C|0)}function Rm(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0;S=oe,oe=oe+16|0,T=S,$b(m,A,y,T),tu(T,y+4|0),oe=S}function $b(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0;if(N=oe,oe=oe+16|0,z=N,Wb(m,y,z),C=+Gt(+(1-+le[z>>3]*.5)),C<1e-16){g[S>>2]=0,g[S+4>>2]=0,g[S+8>>2]=0,g[S+12>>2]=0,oe=N;return}if(z=g[y>>2]|0,T=+le[15920+(z*24|0)>>3],T=+fd(T-+fd(+xv(15600+(z<<4)|0,m))),_o(A)|0?P=+fd(T+-.3334731722518321):P=T,T=+mt(+C)/.381966011250105,(A|0)>0){m=0;do T=T*2.6457513110645907,m=m+1|0;while((m|0)!=(A|0))}C=+Ne(+P)*T,le[S>>3]=C,P=+ve(+P)*T,le[S+8>>3]=P,oe=N}function Wb(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0;if(C=oe,oe=oe+32|0,T=C,x5(m,T),g[A>>2]=0,le[y>>3]=5,S=+Dr(16400,T),S<+le[y>>3]&&(g[A>>2]=0,le[y>>3]=S),S=+Dr(16424,T),S<+le[y>>3]&&(g[A>>2]=1,le[y>>3]=S),S=+Dr(16448,T),S<+le[y>>3]&&(g[A>>2]=2,le[y>>3]=S),S=+Dr(16472,T),S<+le[y>>3]&&(g[A>>2]=3,le[y>>3]=S),S=+Dr(16496,T),S<+le[y>>3]&&(g[A>>2]=4,le[y>>3]=S),S=+Dr(16520,T),S<+le[y>>3]&&(g[A>>2]=5,le[y>>3]=S),S=+Dr(16544,T),S<+le[y>>3]&&(g[A>>2]=6,le[y>>3]=S),S=+Dr(16568,T),S<+le[y>>3]&&(g[A>>2]=7,le[y>>3]=S),S=+Dr(16592,T),S<+le[y>>3]&&(g[A>>2]=8,le[y>>3]=S),S=+Dr(16616,T),S<+le[y>>3]&&(g[A>>2]=9,le[y>>3]=S),S=+Dr(16640,T),S<+le[y>>3]&&(g[A>>2]=10,le[y>>3]=S),S=+Dr(16664,T),S<+le[y>>3]&&(g[A>>2]=11,le[y>>3]=S),S=+Dr(16688,T),S<+le[y>>3]&&(g[A>>2]=12,le[y>>3]=S),S=+Dr(16712,T),S<+le[y>>3]&&(g[A>>2]=13,le[y>>3]=S),S=+Dr(16736,T),S<+le[y>>3]&&(g[A>>2]=14,le[y>>3]=S),S=+Dr(16760,T),S<+le[y>>3]&&(g[A>>2]=15,le[y>>3]=S),S=+Dr(16784,T),S<+le[y>>3]&&(g[A>>2]=16,le[y>>3]=S),S=+Dr(16808,T),S<+le[y>>3]&&(g[A>>2]=17,le[y>>3]=S),S=+Dr(16832,T),S<+le[y>>3]&&(g[A>>2]=18,le[y>>3]=S),S=+Dr(16856,T),!(S<+le[y>>3])){oe=C;return}g[A>>2]=19,le[y>>3]=S,oe=C}function sd(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0;if(C=+aw(m),C<1e-16){A=15600+(A<<4)|0,g[T>>2]=g[A>>2],g[T+4>>2]=g[A+4>>2],g[T+8>>2]=g[A+8>>2],g[T+12>>2]=g[A+12>>2];return}if(P=+nn(+ +le[m+8>>3],+ +le[m>>3]),(y|0)>0){m=0;do C=C/2.6457513110645907,m=m+1|0;while((m|0)!=(y|0))}S?(C=C/3,y=(_o(y)|0)==0,C=+Qt(+((y?C:C/2.6457513110645907)*.381966011250105))):(C=+Qt(+(C*.381966011250105)),_o(y)|0&&(P=+fd(P+.3334731722518321))),Im(15600+(A<<4)|0,+fd(+le[15920+(A*24|0)>>3]-P),C,T)}function yv(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0;S=oe,oe=oe+16|0,T=S,nu(m+4|0,T),sd(T,g[m>>2]|0,A,0,y),oe=S}function Lc(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0,Ge=0,Re=0,Lt=0,Ut=0,bt=0,It=0,mi=0,Zn=0,ri=0,En=0,xn=0,Cn=0,yi=0,mn=0;if(Cn=oe,oe=oe+272|0,C=Cn+256|0,ke=Cn+240|0,ri=Cn,En=Cn+224|0,xn=Cn+208|0,Ge=Cn+176|0,Re=Cn+160|0,Lt=Cn+192|0,Ut=Cn+144|0,bt=Cn+128|0,It=Cn+112|0,mi=Cn+96|0,Zn=Cn+80|0,g[C>>2]=A,g[ke>>2]=g[m>>2],g[ke+4>>2]=g[m+4>>2],g[ke+8>>2]=g[m+8>>2],g[ke+12>>2]=g[m+12>>2],Ch(ke,C,ri),g[T>>2]=0,ke=S+y+((S|0)==5&1)|0,(ke|0)<=(y|0)){oe=Cn;return}z=g[C>>2]|0,V=En+4|0,J=Ge+4|0,ue=y+5|0,me=16880+(z<<2)|0,_e=16960+(z<<2)|0,Ae=bt+8|0,Ee=It+8|0,Je=mi+8|0,be=xn+4|0,N=y;e:for(;;){P=ri+(((N|0)%5|0)<<4)|0,g[xn>>2]=g[P>>2],g[xn+4>>2]=g[P+4>>2],g[xn+8>>2]=g[P+8>>2],g[xn+12>>2]=g[P+12>>2];do;while((Gu(xn,z,0,1)|0)==2);if((N|0)>(y|0)&(_o(A)|0)!=0){if(g[Ge>>2]=g[xn>>2],g[Ge+4>>2]=g[xn+4>>2],g[Ge+8>>2]=g[xn+8>>2],g[Ge+12>>2]=g[xn+12>>2],nu(V,Re),S=g[Ge>>2]|0,C=g[17040+(S*80|0)+(g[En>>2]<<2)>>2]|0,g[Ge>>2]=g[18640+(S*80|0)+(C*20|0)>>2],P=g[18640+(S*80|0)+(C*20|0)+16>>2]|0,(P|0)>0){m=0;do Sm(J),m=m+1|0;while((m|0)<(P|0))}switch(P=18640+(S*80|0)+(C*20|0)+4|0,g[Lt>>2]=g[P>>2],g[Lt+4>>2]=g[P+4>>2],g[Lt+8>>2]=g[P+8>>2],Gb(Lt,(g[me>>2]|0)*3|0),xs(J,Lt,J),Xi(J),nu(J,Ut),yi=+(g[_e>>2]|0),le[bt>>3]=yi*3,le[Ae>>3]=0,mn=yi*-1.5,le[It>>3]=mn,le[Ee>>3]=yi*2.598076211353316,le[mi>>3]=mn,le[Je>>3]=yi*-2.598076211353316,g[17040+((g[Ge>>2]|0)*80|0)+(g[xn>>2]<<2)>>2]|0){case 1:{m=It,S=bt;break}case 3:{m=mi,S=It;break}case 2:{m=bt,S=mi;break}default:{m=12;break e}}lw(Re,Ut,S,m,Zn),sd(Zn,g[Ge>>2]|0,z,1,T+8+(g[T>>2]<<4)|0),g[T>>2]=(g[T>>2]|0)+1}if((N|0)<(ue|0)&&(nu(be,Ge),sd(Ge,g[xn>>2]|0,z,1,T+8+(g[T>>2]<<4)|0),g[T>>2]=(g[T>>2]|0)+1),g[En>>2]=g[xn>>2],g[En+4>>2]=g[xn+4>>2],g[En+8>>2]=g[xn+8>>2],g[En+12>>2]=g[xn+12>>2],N=N+1|0,(N|0)>=(ke|0)){m=3;break}}if((m|0)==3){oe=Cn;return}else(m|0)==12&&lt(22522,22569,571,22579)}function Ch(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0;z=oe,oe=oe+128|0,S=z+64|0,T=z,C=S,P=20240,N=C+60|0;do g[C>>2]=g[P>>2],C=C+4|0,P=P+4|0;while((C|0)<(N|0));C=T,P=20304,N=C+60|0;do g[C>>2]=g[P>>2],C=C+4|0,P=P+4|0;while((C|0)<(N|0));N=(_o(g[A>>2]|0)|0)==0,S=N?S:T,T=m+4|0,Mm(T),Eh(T),_o(g[A>>2]|0)|0&&(iu(T),g[A>>2]=(g[A>>2]|0)+1),g[y>>2]=g[m>>2],A=y+4|0,xs(T,S,A),Xi(A),g[y+16>>2]=g[m>>2],A=y+20|0,xs(T,S+12|0,A),Xi(A),g[y+32>>2]=g[m>>2],A=y+36|0,xs(T,S+24|0,A),Xi(A),g[y+48>>2]=g[m>>2],A=y+52|0,xs(T,S+36|0,A),Xi(A),g[y+64>>2]=g[m>>2],y=y+68|0,xs(T,S+48|0,y),Xi(y),oe=z}function Gu(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0;if(Ae=oe,oe=oe+32|0,me=Ae+12|0,N=Ae,_e=m+4|0,ue=g[16960+(A<<2)>>2]|0,J=(S|0)!=0,ue=J?ue*3|0:ue,T=g[_e>>2]|0,V=m+8|0,P=g[V>>2]|0,J){if(C=m+12|0,S=g[C>>2]|0,T=P+T+S|0,(T|0)==(ue|0))return _e=1,oe=Ae,_e|0;z=C}else z=m+12|0,S=g[z>>2]|0,T=P+T+S|0;if((T|0)<=(ue|0))return _e=0,oe=Ae,_e|0;do if((S|0)>0){if(S=g[m>>2]|0,(P|0)>0){C=18640+(S*80|0)+60|0,S=m;break}S=18640+(S*80|0)+40|0,y?(g5(me,ue,0,0),bm(_e,me,N),id(N),xs(N,me,_e),C=S,S=m):(C=S,S=m)}else C=18640+((g[m>>2]|0)*80|0)+20|0,S=m;while(!1);if(g[S>>2]=g[C>>2],T=C+16|0,(g[T>>2]|0)>0){S=0;do Sm(_e),S=S+1|0;while((S|0)<(g[T>>2]|0))}return m=C+4|0,g[me>>2]=g[m>>2],g[me+4>>2]=g[m+4>>2],g[me+8>>2]=g[m+8>>2],A=g[16880+(A<<2)>>2]|0,Gb(me,J?A*3|0:A),xs(_e,me,_e),Xi(_e),J?S=((g[V>>2]|0)+(g[_e>>2]|0)+(g[z>>2]|0)|0)==(ue|0)?1:2:S=2,_e=S,oe=Ae,_e|0}function Pm(m,A){m=m|0,A=A|0;var y=0;do y=Gu(m,A,0,1)|0;while((y|0)==2);return y|0}function vo(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0,Ge=0,Re=0,Lt=0,Ut=0,bt=0,It=0,mi=0,Zn=0,ri=0;if(mi=oe,oe=oe+240|0,C=mi+224|0,Lt=mi+208|0,Ut=mi,bt=mi+192|0,It=mi+176|0,Je=mi+160|0,be=mi+144|0,ke=mi+128|0,Ge=mi+112|0,Re=mi+96|0,g[C>>2]=A,g[Lt>>2]=g[m>>2],g[Lt+4>>2]=g[m+4>>2],g[Lt+8>>2]=g[m+8>>2],g[Lt+12>>2]=g[m+12>>2],Qo(Lt,C,Ut),g[T>>2]=0,Ee=S+y+((S|0)==6&1)|0,(Ee|0)<=(y|0)){oe=mi;return}z=g[C>>2]|0,V=y+6|0,J=16960+(z<<2)|0,ue=be+8|0,me=ke+8|0,_e=Ge+8|0,Ae=bt+4|0,P=0,N=y,S=-1;e:for(;;){if(C=(N|0)%6|0,m=Ut+(C<<4)|0,g[bt>>2]=g[m>>2],g[bt+4>>2]=g[m+4>>2],g[bt+8>>2]=g[m+8>>2],g[bt+12>>2]=g[m+12>>2],m=P,P=Gu(bt,z,0,1)|0,(N|0)>(y|0)&(_o(A)|0)!=0&&(m|0)!=1&&(g[bt>>2]|0)!=(S|0)){switch(nu(Ut+(((C+5|0)%6|0)<<4)+4|0,It),nu(Ut+(C<<4)+4|0,Je),Zn=+(g[J>>2]|0),le[be>>3]=Zn*3,le[ue>>3]=0,ri=Zn*-1.5,le[ke>>3]=ri,le[me>>3]=Zn*2.598076211353316,le[Ge>>3]=ri,le[_e>>3]=Zn*-2.598076211353316,C=g[Lt>>2]|0,g[17040+(C*80|0)+(((S|0)==(C|0)?g[bt>>2]|0:S)<<2)>>2]|0){case 1:{m=ke,S=be;break}case 3:{m=Ge,S=ke;break}case 2:{m=be,S=Ge;break}default:{m=8;break e}}lw(It,Je,S,m,Re),!(Rv(It,Re)|0)&&!(Rv(Je,Re)|0)&&(sd(Re,g[Lt>>2]|0,z,1,T+8+(g[T>>2]<<4)|0),g[T>>2]=(g[T>>2]|0)+1)}if((N|0)<(V|0)&&(nu(Ae,It),sd(It,g[bt>>2]|0,z,1,T+8+(g[T>>2]<<4)|0),g[T>>2]=(g[T>>2]|0)+1),N=N+1|0,(N|0)>=(Ee|0)){m=3;break}else S=g[bt>>2]|0}if((m|0)==3){oe=mi;return}else(m|0)==8&&lt(22606,22569,736,22651)}function Qo(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0;z=oe,oe=oe+160|0,S=z+80|0,T=z,C=S,P=20368,N=C+72|0;do g[C>>2]=g[P>>2],C=C+4|0,P=P+4|0;while((C|0)<(N|0));C=T,P=20448,N=C+72|0;do g[C>>2]=g[P>>2],C=C+4|0,P=P+4|0;while((C|0)<(N|0));N=(_o(g[A>>2]|0)|0)==0,S=N?S:T,T=m+4|0,Mm(T),Eh(T),_o(g[A>>2]|0)|0&&(iu(T),g[A>>2]=(g[A>>2]|0)+1),g[y>>2]=g[m>>2],A=y+4|0,xs(T,S,A),Xi(A),g[y+16>>2]=g[m>>2],A=y+20|0,xs(T,S+12|0,A),Xi(A),g[y+32>>2]=g[m>>2],A=y+36|0,xs(T,S+24|0,A),Xi(A),g[y+48>>2]=g[m>>2],A=y+52|0,xs(T,S+36|0,A),Xi(A),g[y+64>>2]=g[m>>2],A=y+68|0,xs(T,S+48|0,A),Xi(A),g[y+80>>2]=g[m>>2],y=y+84|0,xs(T,S+60|0,y),Xi(y),oe=z}function Rh(m,A){return m=m|0,A=A|0,A=ht(m|0,A|0,52)|0,se()|0,A&15|0}function ou(m,A){return m=m|0,A=A|0,A=ht(m|0,A|0,45)|0,se()|0,A&127|0}function fl(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0,N=0;if(!(!0&(A&-16777216|0)==134217728)||(P=ht(m|0,A|0,45)|0,se()|0,P=P&127,P>>>0>121))return A=0,A|0;y=ht(m|0,A|0,52)|0,se()|0,y=y&15;do if(y|0){for(T=1,S=0;;){if(C=ht(m|0,A|0,(15-T|0)*3|0)|0,se()|0,C=C&7,(C|0)!=0&(S^1))if((C|0)==1&(Ci(P)|0)!=0){N=0,S=13;break}else S=1;if((C|0)==7){N=0,S=13;break}if(T>>>0<y>>>0)T=T+1|0;else{S=9;break}}if((S|0)==9){if((y|0)==15)N=1;else break;return N|0}else if((S|0)==13)return N|0}while(!1);for(;;){if(N=ht(m|0,A|0,(14-y|0)*3|0)|0,se()|0,!((N&7|0)==7&!0)){N=0,S=13;break}if(y>>>0<14)y=y+1|0;else{N=1,S=13;break}}return(S|0)==13?N|0:0}function Hu(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0;if(C=ht(m|0,A|0,52)|0,se()|0,C=C&15,y>>>0>15)return S=4,S|0;if((C|0)<(y|0))return S=12,S|0;if((C|0)==(y|0))return g[S>>2]=m,g[S+4>>2]=A,S=0,S|0;if(T=Tt(y|0,0,52)|0,T=T|m,m=se()|0|A&-15728641,(C|0)>(y|0))do A=Tt(7,0,(14-y|0)*3|0)|0,y=y+1|0,T=A|T,m=se()|0|m;while((y|0)<(C|0));return g[S>>2]=T,g[S+4>>2]=m,S=0,S|0}function uA(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0;if(C=ht(m|0,A|0,52)|0,se()|0,C=C&15,!((y|0)<16&(C|0)<=(y|0)))return S=4,S|0;T=y-C|0,y=ht(m|0,A|0,45)|0,se()|0;e:do if(!(Ci(y&127)|0))y=uu(7,0,T,((T|0)<0)<<31>>31)|0,T=se()|0;else{t:do if(C|0){for(y=1;P=Tt(7,0,(15-y|0)*3|0)|0,!!((P&m|0)==0&((se()|0)&A|0)==0);)if(y>>>0<C>>>0)y=y+1|0;else break t;y=uu(7,0,T,((T|0)<0)<<31>>31)|0,T=se()|0;break e}while(!1);y=uu(7,0,T,((T|0)<0)<<31>>31)|0,y=Ls(y|0,se()|0,5,0)|0,y=Pn(y|0,se()|0,-5,-1)|0,y=Al(y|0,se()|0,6,0)|0,y=Pn(y|0,se()|0,1,0)|0,T=se()|0}while(!1);return P=S,g[P>>2]=y,g[P+4>>2]=T,P=0,P|0}function Ri(m,A){m=m|0,A=A|0;var y=0,S=0,T=0;if(T=ht(m|0,A|0,45)|0,se()|0,!(Ci(T&127)|0))return T=0,T|0;T=ht(m|0,A|0,52)|0,se()|0,T=T&15;e:do if(!T)y=0;else for(S=1;;){if(y=ht(m|0,A|0,(15-S|0)*3|0)|0,se()|0,y=y&7,y|0)break e;if(S>>>0<T>>>0)S=S+1|0;else{y=0;break}}while(!1);return T=(y|0)==0&1,T|0}function vv(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0;if(P=oe,oe=oe+16|0,C=P,Bm(C,m,A,y),A=C,m=g[A>>2]|0,A=g[A+4>>2]|0,(m|0)==0&(A|0)==0)return oe=P,0;T=0,y=0;do N=S+(T<<3)|0,g[N>>2]=m,g[N+4>>2]=A,T=Pn(T|0,y|0,1,0)|0,y=se()|0,Nh(C),N=C,m=g[N>>2]|0,A=g[N+4>>2]|0;while(!((m|0)==0&(A|0)==0));return oe=P,0}function Ko(m,A,y,S){return m=m|0,A=A|0,y=y|0,S=S|0,(S|0)<(y|0)?(y=A,S=m,Dt(y|0),S|0):(y=Tt(-1,-1,((S-y|0)*3|0)+3|0)|0,S=Tt(~y|0,~(se()|0)|0,(15-S|0)*3|0)|0,y=~(se()|0)&A,S=~S&m,Dt(y|0),S|0)}function Jo(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0;return T=ht(m|0,A|0,52)|0,se()|0,T=T&15,(y|0)<16&(T|0)<=(y|0)?((T|0)<(y|0)&&(T=Tt(-1,-1,((y+-1-T|0)*3|0)+3|0)|0,T=Tt(~T|0,~(se()|0)|0,(15-y|0)*3|0)|0,A=~(se()|0)&A,m=~T&m),T=Tt(y|0,0,52)|0,y=A&-15728641|(se()|0),g[S>>2]=m|T,g[S+4>>2]=y,S=0,S|0):(S=4,S|0)}function Yi(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0,Ge=0,Re=0,Lt=0,Ut=0,bt=0,It=0;if((y|0)==0&(S|0)==0)return bt=0,bt|0;if(T=m,C=g[T>>2]|0,T=g[T+4>>2]|0,!0&(T&15728640|0)==0){if(!((S|0)>0|(S|0)==0&y>>>0>0)||(bt=A,g[bt>>2]=C,g[bt+4>>2]=T,(y|0)==1&(S|0)==0))return bt=0,bt|0;T=1;do Lt=m+(T<<3)|0,Ut=g[Lt+4>>2]|0,bt=A+(T<<3)|0,g[bt>>2]=g[Lt>>2],g[bt+4>>2]=Ut,T=T+1|0;while(0<(S|0)|(S|0)==0&T>>>0<y>>>0);return T=0,T|0}if(Re=y<<3,Ut=jr(Re)|0,!Ut)return bt=13,bt|0;if(md(Ut|0,m|0,Re|0)|0,Lt=xo(y,8)|0,!Lt)return gn(Ut),bt=13,bt|0;e:do if(y|0){t:for(;;){T=Ut,be=g[T>>2]|0,T=g[T+4>>2]|0,ke=ht(be|0,T|0,52)|0,se()|0,ke=ke&15,Ge=ke+-1|0,Je=(y|0)>0;n:do if((ke|0)!=0&Je){if(_e=((y|0)<0)<<31>>31,Ae=Tt(Ge|0,0,52)|0,Ee=se()|0,Ge>>>0>15){if(!((be|0)==0&(T|0)==0)){bt=17;break t}for(C=0;;){if(C=C+1|0,(C|0)>=(y|0))break n;if(S=Ut+(C<<3)|0,Ee=g[S>>2]|0,S=g[S+4>>2]|0,!((Ee|0)==0&(S|0)==0)){T=S,bt=17;break t}}}for(C=0,m=be,S=T;;){if(!((m|0)==0&(S|0)==0)){if(!(!0&(S&117440512|0)==0)){bt=22;break t}if(N=ht(m|0,S|0,52)|0,se()|0,N=N&15,(N|0)<(Ge|0)){T=12,bt=28;break t}if((N|0)!=(Ge|0)&&(m=m|Ae,S=S&-15728641|Ee,N>>>0>=ke>>>0)){P=Ge;do me=Tt(7,0,(14-P|0)*3|0)|0,P=P+1|0,m=me|m,S=se()|0|S;while(P>>>0<N>>>0)}if(P=ts(m|0,S|0,y|0,_e|0)|0,se()|0,V=Lt+(P<<3)|0,N=V,z=g[N>>2]|0,N=g[N+4>>2]|0,(z|0)==0&(N|0)==0)P=V;else for(me=0;;){if((me|0)>(y|0)){bt=32;break t}if((z|0)==(m|0)&(N&-117440513|0)==(S|0)){J=ht(z|0,N|0,56)|0,se()|0,J=J&7,ue=J+1|0,It=ht(z|0,N|0,45)|0,se()|0;i:do if(!(Ci(It&127)|0))N=7;else{if(z=ht(z|0,N|0,52)|0,se()|0,z=z&15,!z){N=6;break}for(N=1;;){if(It=Tt(7,0,(15-N|0)*3|0)|0,!((It&m|0)==0&((se()|0)&S|0)==0)){N=7;break i}if(N>>>0<z>>>0)N=N+1|0;else{N=6;break}}}while(!1);if((J+2|0)>>>0>N>>>0){bt=42;break t}It=Tt(ue|0,0,56)|0,S=se()|0|S&-117440513,ue=V,g[ue>>2]=0,g[ue+4>>2]=0,m=It|m}else P=(P+1|0)%(y|0)|0;if(V=Lt+(P<<3)|0,N=V,z=g[N>>2]|0,N=g[N+4>>2]|0,(z|0)==0&(N|0)==0){P=V;break}else me=me+1|0}It=P,g[It>>2]=m,g[It+4>>2]=S}if(C=C+1|0,(C|0)>=(y|0))break n;S=Ut+(C<<3)|0,m=g[S>>2]|0,S=g[S+4>>2]|0}}while(!1);if((y+5|0)>>>0<11){bt=85;break}if(Ee=xo((y|0)/6|0,8)|0,!Ee){bt=49;break}n:do if(Je){me=0,ue=0;do{if(N=Lt+(me<<3)|0,S=N,C=g[S>>2]|0,S=g[S+4>>2]|0,!((C|0)==0&(S|0)==0)){z=ht(C|0,S|0,56)|0,se()|0,z=z&7,m=z+1|0,V=S&-117440513,It=ht(C|0,S|0,45)|0,se()|0;i:do if(Ci(It&127)|0){if(J=ht(C|0,S|0,52)|0,se()|0,J=J&15,J|0)for(P=1;;){if(It=Tt(7,0,(15-P|0)*3|0)|0,!((C&It|0)==0&(V&(se()|0)|0)==0))break i;if(P>>>0<J>>>0)P=P+1|0;else break}S=Tt(m|0,0,56)|0,C=S|C,S=se()|0|V,m=N,g[m>>2]=C,g[m+4>>2]=S,m=z+2|0}while(!1);(m|0)==7&&(It=Ee+(ue<<3)|0,g[It>>2]=C,g[It+4>>2]=S&-117440513,ue=ue+1|0)}me=me+1|0}while((me|0)!=(y|0));if(Je){if(me=((y|0)<0)<<31>>31,_e=Tt(Ge|0,0,52)|0,Ae=se()|0,Ge>>>0>15){if(!((be|0)==0&(T|0)==0)){T=4,bt=84;break t}for(T=0;;){if(T=T+1|0,(T|0)>=(y|0)){C=0,T=ue;break n}if(It=Ut+(T<<3)|0,!((g[It>>2]|0)==0&(g[It+4>>2]|0)==0)){T=4,bt=84;break t}}}for(J=0,C=0,V=be;;){do if(!((V|0)==0&(T|0)==0)){if(N=ht(V|0,T|0,52)|0,se()|0,N=N&15,(N|0)<(Ge|0)){T=12,bt=84;break t}do if((N|0)==(Ge|0))S=V,N=T;else{if(S=V|_e,m=T&-15728641|Ae,N>>>0<ke>>>0){N=m;break}P=Ge;do It=Tt(7,0,(14-P|0)*3|0)|0,P=P+1|0,S=It|S,m=se()|0|m;while(P>>>0<N>>>0);N=m}while(!1);for(P=ts(S|0,N|0,y|0,me|0)|0,se()|0,m=0;;){if((m|0)>(y|0)){bt=77;break t}if(It=Lt+(P<<3)|0,z=g[It+4>>2]|0,(z&-117440513|0)==(N|0)&&(g[It>>2]|0)==(S|0)){bt=79;break}if(P=(P+1|0)%(y|0)|0,It=Lt+(P<<3)|0,(g[It>>2]|0)==(S|0)&&(g[It+4>>2]|0)==(N|0))break;m=m+1|0}if((bt|0)==79&&(bt=0,!0&(z&117440512|0)==100663296))break;It=A+(C<<3)|0,g[It>>2]=V,g[It+4>>2]=T,C=C+1|0}while(!1);if(T=J+1|0,(T|0)>=(y|0)){T=ue;break n}It=Ut+(T<<3)|0,J=T,V=g[It>>2]|0,T=g[It+4>>2]|0}}else C=0,T=ue}else C=0,T=0;while(!1);if(kc(Lt|0,0,Re|0)|0,md(Ut|0,Ee|0,T<<3|0)|0,gn(Ee),T)A=A+(C<<3)|0,y=T;else break e}if((bt|0)==17)!0&(T&117440512|0)==0?(T=4,bt=28):bt=22;else if((bt|0)==32)lt(23313,22674,362,22684);else{if((bt|0)==42)return gn(Ut),gn(Lt),It=10,It|0;if((bt|0)==49)return gn(Ut),gn(Lt),It=13,It|0;if((bt|0)==77)lt(23313,22674,462,22684);else{if((bt|0)==84)return gn(Ee),gn(Ut),gn(Lt),It=T,It|0;if((bt|0)==85){md(A|0,Ut|0,y<<3|0)|0;break}}}if((bt|0)==22)return gn(Ut),gn(Lt),It=5,It|0;if((bt|0)==28)return gn(Ut),gn(Lt),It=T,It|0}while(!1);return gn(Ut),gn(Lt),It=0,It|0}function cA(m,A,y,S,T,C,P){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0,C=C|0,P=P|0;var N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0;if(Ee=oe,oe=oe+16|0,Ae=Ee,!((y|0)>0|(y|0)==0&A>>>0>0))return Ae=0,oe=Ee,Ae|0;if((P|0)>=16)return Ae=12,oe=Ee,Ae|0;me=0,_e=0,ue=0,N=0;e:for(;;){if(V=m+(me<<3)|0,z=g[V>>2]|0,V=g[V+4>>2]|0,J=ht(z|0,V|0,52)|0,se()|0,(J&15|0)>(P|0)){N=12,z=11;break}if(Bm(Ae,z,V,P),J=Ae,V=g[J>>2]|0,J=g[J+4>>2]|0,(V|0)==0&(J|0)==0)z=ue;else{z=ue;do{if(!((N|0)<(C|0)|(N|0)==(C|0)&z>>>0<T>>>0)){z=10;break e}ue=S+(z<<3)|0,g[ue>>2]=V,g[ue+4>>2]=J,z=Pn(z|0,N|0,1,0)|0,N=se()|0,Nh(Ae),ue=Ae,V=g[ue>>2]|0,J=g[ue+4>>2]|0}while(!((V|0)==0&(J|0)==0))}if(me=Pn(me|0,_e|0,1,0)|0,_e=se()|0,(_e|0)<(y|0)|(_e|0)==(y|0)&me>>>0<A>>>0)ue=z;else{N=0,z=11;break}}return(z|0)==10?(Ae=14,oe=Ee,Ae|0):(z|0)==11?(oe=Ee,N|0):0}function dl(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0;me=oe,oe=oe+16|0,ue=me;e:do if((y|0)>0|(y|0)==0&A>>>0>0){for(V=0,P=0,C=0,J=0;;){if(z=m+(V<<3)|0,N=g[z>>2]|0,z=g[z+4>>2]|0,!((N|0)==0&(z|0)==0)&&(z=(uA(N,z,S,ue)|0)==0,N=ue,P=Pn(g[N>>2]|0,g[N+4>>2]|0,P|0,C|0)|0,C=se()|0,!z)){C=12;break}if(V=Pn(V|0,J|0,1,0)|0,J=se()|0,!((J|0)<(y|0)|(J|0)==(y|0)&V>>>0<A>>>0))break e}return oe=me,C|0}else P=0,C=0;while(!1);return g[T>>2]=P,g[T+4>>2]=C,T=0,oe=me,T|0}function Xb(m,A){return m=m|0,A=A|0,A=ht(m|0,A|0,52)|0,se()|0,A&1|0}function Qs(m,A){m=m|0,A=A|0;var y=0,S=0,T=0;if(T=ht(m|0,A|0,52)|0,se()|0,T=T&15,!T)return T=0,T|0;for(S=1;;){if(y=ht(m|0,A|0,(15-S|0)*3|0)|0,se()|0,y=y&7,y|0){S=5;break}if(S>>>0<T>>>0)S=S+1|0;else{y=0,S=5;break}}return(S|0)==5?y|0:0}function hA(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0,N=0,z=0;if(z=ht(m|0,A|0,52)|0,se()|0,z=z&15,!z)return N=A,z=m,Dt(N|0),z|0;for(N=1,y=0;;){C=(15-N|0)*3|0,S=Tt(7,0,C|0)|0,T=se()|0,P=ht(m|0,A|0,C|0)|0,se()|0,C=Tt(Ic(P&7)|0,0,C|0)|0,P=se()|0,m=C|m&~S,A=P|A&~T;e:do if(!y)if((C&S|0)==0&(P&T|0)==0)y=0;else if(S=ht(m|0,A|0,52)|0,se()|0,S=S&15,!S)y=1;else{y=1;t:for(;;){switch(P=ht(m|0,A|0,(15-y|0)*3|0)|0,se()|0,P&7){case 1:break t;case 0:break;default:{y=1;break e}}if(y>>>0<S>>>0)y=y+1|0;else{y=1;break e}}for(y=1;;)if(P=(15-y|0)*3|0,T=ht(m|0,A|0,P|0)|0,se()|0,C=Tt(7,0,P|0)|0,A=A&~(se()|0),P=Tt(Ic(T&7)|0,0,P|0)|0,m=m&~C|P,A=A|(se()|0),y>>>0<S>>>0)y=y+1|0;else{y=1;break}}while(!1);if(N>>>0<z>>>0)N=N+1|0;else break}return Dt(A|0),m|0}function qu(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0;if(S=ht(m|0,A|0,52)|0,se()|0,S=S&15,!S)return y=A,S=m,Dt(y|0),S|0;for(y=1;C=(15-y|0)*3|0,P=ht(m|0,A|0,C|0)|0,se()|0,T=Tt(7,0,C|0)|0,A=A&~(se()|0),C=Tt(Ic(P&7)|0,0,C|0)|0,m=C|m&~T,A=se()|0|A,y>>>0<S>>>0;)y=y+1|0;return Dt(A|0),m|0}function Yb(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0,N=0,z=0;if(z=ht(m|0,A|0,52)|0,se()|0,z=z&15,!z)return N=A,z=m,Dt(N|0),z|0;for(N=1,y=0;;){C=(15-N|0)*3|0,S=Tt(7,0,C|0)|0,T=se()|0,P=ht(m|0,A|0,C|0)|0,se()|0,C=Tt(ru(P&7)|0,0,C|0)|0,P=se()|0,m=C|m&~S,A=P|A&~T;e:do if(!y)if((C&S|0)==0&(P&T|0)==0)y=0;else if(S=ht(m|0,A|0,52)|0,se()|0,S=S&15,!S)y=1;else{y=1;t:for(;;){switch(P=ht(m|0,A|0,(15-y|0)*3|0)|0,se()|0,P&7){case 1:break t;case 0:break;default:{y=1;break e}}if(y>>>0<S>>>0)y=y+1|0;else{y=1;break e}}for(y=1;;)if(T=(15-y|0)*3|0,C=Tt(7,0,T|0)|0,P=A&~(se()|0),A=ht(m|0,A|0,T|0)|0,se()|0,A=Tt(ru(A&7)|0,0,T|0)|0,m=m&~C|A,A=P|(se()|0),y>>>0<S>>>0)y=y+1|0;else{y=1;break}}while(!1);if(N>>>0<z>>>0)N=N+1|0;else break}return Dt(A|0),m|0}function Ph(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0;if(S=ht(m|0,A|0,52)|0,se()|0,S=S&15,!S)return y=A,S=m,Dt(y|0),S|0;for(y=1;P=(15-y|0)*3|0,C=Tt(7,0,P|0)|0,T=A&~(se()|0),A=ht(m|0,A|0,P|0)|0,se()|0,A=Tt(ru(A&7)|0,0,P|0)|0,m=A|m&~C,A=se()|0|T,y>>>0<S>>>0;)y=y+1|0;return Dt(A|0),m|0}function od(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0;if(z=oe,oe=oe+64|0,N=z+40|0,S=z+24|0,T=z+12|0,C=z,Tt(A|0,0,52)|0,y=se()|0|134225919,!A)return(g[m+4>>2]|0)>2||(g[m+8>>2]|0)>2||(g[m+12>>2]|0)>2?(P=0,N=0,Dt(P|0),oe=z,N|0):(Tt(Av(m)|0,0,45)|0,P=se()|0|y,N=-1,Dt(P|0),oe=z,N|0);if(g[N>>2]=g[m>>2],g[N+4>>2]=g[m+4>>2],g[N+8>>2]=g[m+8>>2],g[N+12>>2]=g[m+12>>2],P=N+4|0,(A|0)>0)for(m=-1;g[S>>2]=g[P>>2],g[S+4>>2]=g[P+4>>2],g[S+8>>2]=g[P+8>>2],A&1?(v5(P),g[T>>2]=g[P>>2],g[T+4>>2]=g[P+4>>2],g[T+8>>2]=g[P+8>>2],Mh(T)):(Ca(P),g[T>>2]=g[P>>2],g[T+4>>2]=g[P+4>>2],g[T+8>>2]=g[P+8>>2],iu(T)),bm(S,T,C),Xi(C),J=(15-A|0)*3|0,V=Tt(7,0,J|0)|0,y=y&~(se()|0),J=Tt(Yo(C)|0,0,J|0)|0,m=J|m&~V,y=se()|0|y,(A|0)>1;)A=A+-1|0;else m=-1;e:do if((g[P>>2]|0)<=2&&(g[N+8>>2]|0)<=2&&(g[N+12>>2]|0)<=2){if(S=Av(N)|0,A=Tt(S|0,0,45)|0,A=A|m,m=se()|0|y&-1040385,C=mv(N)|0,!(Ci(S)|0)){if((C|0)<=0)break;for(T=0;;){if(S=ht(A|0,m|0,52)|0,se()|0,S=S&15,S)for(y=1;J=(15-y|0)*3|0,N=ht(A|0,m|0,J|0)|0,se()|0,V=Tt(7,0,J|0)|0,m=m&~(se()|0),J=Tt(Ic(N&7)|0,0,J|0)|0,A=A&~V|J,m=m|(se()|0),y>>>0<S>>>0;)y=y+1|0;if(T=T+1|0,(T|0)==(C|0))break e}}T=ht(A|0,m|0,52)|0,se()|0,T=T&15;t:do if(T){y=1;n:for(;;){switch(J=ht(A|0,m|0,(15-y|0)*3|0)|0,se()|0,J&7){case 1:break n;case 0:break;default:break t}if(y>>>0<T>>>0)y=y+1|0;else break t}if(Ub(S,g[N>>2]|0)|0)for(y=1;N=(15-y|0)*3|0,V=Tt(7,0,N|0)|0,J=m&~(se()|0),m=ht(A|0,m|0,N|0)|0,se()|0,m=Tt(ru(m&7)|0,0,N|0)|0,A=A&~V|m,m=J|(se()|0),y>>>0<T>>>0;)y=y+1|0;else for(y=1;J=(15-y|0)*3|0,N=ht(A|0,m|0,J|0)|0,se()|0,V=Tt(7,0,J|0)|0,m=m&~(se()|0),J=Tt(Ic(N&7)|0,0,J|0)|0,A=A&~V|J,m=m|(se()|0),y>>>0<T>>>0;)y=y+1|0}while(!1);if((C|0)>0){y=0;do A=hA(A,m)|0,m=se()|0,y=y+1|0;while((y|0)!=(C|0))}}else A=0,m=0;while(!1);return V=m,J=A,Dt(V|0),oe=z,J|0}function _o(m){return m=m|0,(m|0)%2|0|0}function ad(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0;return T=oe,oe=oe+16|0,S=T,A>>>0>15?(S=4,oe=T,S|0):(g[m+4>>2]&2146435072|0)==2146435072||(g[m+8+4>>2]&2146435072|0)==2146435072?(S=3,oe=T,S|0):(Rm(m,A,S),A=od(S,A)|0,S=se()|0,g[y>>2]=A,g[y+4>>2]=S,(A|0)==0&(S|0)==0&&lt(23313,22674,786,22697),S=0,oe=T,S|0)}function ld(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0;if(T=y+4|0,C=ht(m|0,A|0,52)|0,se()|0,C=C&15,P=ht(m|0,A|0,45)|0,se()|0,S=(C|0)==0,Ci(P&127)|0){if(S)return P=1,P|0;S=1}else{if(S)return P=0,P|0;!(g[T>>2]|0)&&!(g[y+8>>2]|0)?S=(g[y+12>>2]|0)!=0&1:S=1}for(y=1;y&1?Mh(T):iu(T),P=ht(m|0,A|0,(15-y|0)*3|0)|0,se()|0,Th(T,P&7),y>>>0<C>>>0;)y=y+1|0;return S|0}function Bh(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0;if(J=oe,oe=oe+16|0,z=J,V=ht(m|0,A|0,45)|0,se()|0,V=V&127,V>>>0>121)return g[y>>2]=0,g[y+4>>2]=0,g[y+8>>2]=0,g[y+12>>2]=0,V=5,oe=J,V|0;e:do if(Ci(V)|0&&(C=ht(m|0,A|0,52)|0,se()|0,C=C&15,(C|0)!=0)){S=1;t:for(;;){switch(N=ht(m|0,A|0,(15-S|0)*3|0)|0,se()|0,N&7){case 5:break t;case 0:break;default:{S=A;break e}}if(S>>>0<C>>>0)S=S+1|0;else{S=A;break e}}for(T=1,S=A;A=(15-T|0)*3|0,P=Tt(7,0,A|0)|0,N=S&~(se()|0),S=ht(m|0,S|0,A|0)|0,se()|0,S=Tt(ru(S&7)|0,0,A|0)|0,m=m&~P|S,S=N|(se()|0),T>>>0<C>>>0;)T=T+1|0}else S=A;while(!1);if(N=7696+(V*28|0)|0,g[y>>2]=g[N>>2],g[y+4>>2]=g[N+4>>2],g[y+8>>2]=g[N+8>>2],g[y+12>>2]=g[N+12>>2],!(ld(m,S,y)|0))return V=0,oe=J,V|0;if(P=y+4|0,g[z>>2]=g[P>>2],g[z+4>>2]=g[P+4>>2],g[z+8>>2]=g[P+8>>2],C=ht(m|0,S|0,52)|0,se()|0,N=C&15,C&1?(iu(P),C=N+1|0):C=N,!(Ci(V)|0))S=0;else{e:do if(!N)S=0;else for(A=1;;){if(T=ht(m|0,S|0,(15-A|0)*3|0)|0,se()|0,T=T&7,T|0){S=T;break e}if(A>>>0<N>>>0)A=A+1|0;else{S=0;break}}while(!1);S=(S|0)==4&1}if(!(Gu(y,C,S,0)|0))(C|0)!=(N|0)&&(g[P>>2]=g[z>>2],g[P+4>>2]=g[z+4>>2],g[P+8>>2]=g[z+8>>2]);else{if(Ci(V)|0)do;while(Gu(y,C,0,0)|0);(C|0)!=(N|0)&&Ca(P)}return V=0,oe=J,V|0}function ud(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0;return C=oe,oe=oe+16|0,S=C,T=Bh(m,A,S)|0,T|0?(oe=C,T|0):(T=ht(m|0,A|0,52)|0,se()|0,yv(S,T&15,y),T=0,oe=C,T|0)}function au(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0;if(P=oe,oe=oe+16|0,C=P,S=Bh(m,A,C)|0,S|0)return C=S,oe=P,C|0;S=ht(m|0,A|0,45)|0,se()|0,S=(Ci(S&127)|0)==0,T=ht(m|0,A|0,52)|0,se()|0,T=T&15;e:do if(!S){if(T|0)for(S=1;;){if(N=Tt(7,0,(15-S|0)*3|0)|0,!((N&m|0)==0&((se()|0)&A|0)==0))break e;if(S>>>0<T>>>0)S=S+1|0;else break}return Lc(C,T,0,5,y),N=0,oe=P,N|0}while(!1);return vo(C,T,0,6,y),N=0,oe=P,N|0}function Qb(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0;if(T=ht(m|0,A|0,45)|0,se()|0,!(Ci(T&127)|0))return T=2,g[y>>2]=T,0;if(T=ht(m|0,A|0,52)|0,se()|0,T=T&15,!T)return T=5,g[y>>2]=T,0;for(S=1;;){if(C=Tt(7,0,(15-S|0)*3|0)|0,!((C&m|0)==0&((se()|0)&A|0)==0)){S=2,m=6;break}if(S>>>0<T>>>0)S=S+1|0;else{S=5,m=6;break}}return(m|0)==6&&(g[y>>2]=S),0}function cd(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0;ue=oe,oe=oe+128|0,V=ue+112|0,C=ue+96|0,J=ue,T=ht(m|0,A|0,52)|0,se()|0,N=T&15,g[V>>2]=N,P=ht(m|0,A|0,45)|0,se()|0,P=P&127;e:do if(Ci(P)|0){if(N|0)for(S=1;;){if(z=Tt(7,0,(15-S|0)*3|0)|0,!((z&m|0)==0&((se()|0)&A|0)==0)){T=0;break e}if(S>>>0<N>>>0)S=S+1|0;else break}if(T&1)T=1;else return z=Tt(N+1|0,0,52)|0,J=se()|0|A&-15728641,V=Tt(7,0,(14-N|0)*3|0)|0,J=cd((z|m)&~V,J&~(se()|0),y)|0,oe=ue,J|0}else T=0;while(!1);if(S=Bh(m,A,C)|0,!S){T?(Ch(C,V,J),z=5):(Qo(C,V,J),z=6);e:do if(Ci(P)|0)if(!N)m=5;else for(S=1;;){if(P=Tt(7,0,(15-S|0)*3|0)|0,!((P&m|0)==0&((se()|0)&A|0)==0)){m=2;break e}if(S>>>0<N>>>0)S=S+1|0;else{m=5;break}}else m=2;while(!1);kc(y|0,-1,m<<2|0)|0;e:do if(T)for(C=0;;){if(P=J+(C<<4)|0,Pm(P,g[V>>2]|0)|0,P=g[P>>2]|0,N=g[y>>2]|0,(N|0)==-1|(N|0)==(P|0))S=y;else{T=0;do{if(T=T+1|0,T>>>0>=m>>>0){S=1;break e}S=y+(T<<2)|0,N=g[S>>2]|0}while(!((N|0)==-1|(N|0)==(P|0)))}if(g[S>>2]=P,C=C+1|0,C>>>0>=z>>>0){S=0;break}}else for(C=0;;){if(P=J+(C<<4)|0,Gu(P,g[V>>2]|0,0,1)|0,P=g[P>>2]|0,N=g[y>>2]|0,(N|0)==-1|(N|0)==(P|0))S=y;else{T=0;do{if(T=T+1|0,T>>>0>=m>>>0){S=1;break e}S=y+(T<<2)|0,N=g[S>>2]|0}while(!((N|0)==-1|(N|0)==(P|0)))}if(g[S>>2]=P,C=C+1|0,C>>>0>=z>>>0){S=0;break}}while(!1)}return J=S,oe=ue,J|0}function Ra(){return 12}function Ih(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0,N=0,z=0;if(m>>>0>15)return N=4,N|0;if(Tt(m|0,0,52)|0,N=se()|0|134225919,!m){y=0,S=0;do Ci(S)|0&&(Tt(S|0,0,45)|0,P=N|(se()|0),m=A+(y<<3)|0,g[m>>2]=-1,g[m+4>>2]=P,y=y+1|0),S=S+1|0;while((S|0)!=122);return y=0,y|0}y=0,P=0;do{if(Ci(P)|0){for(Tt(P|0,0,45)|0,S=1,T=-1,C=N|(se()|0);z=Tt(7,0,(15-S|0)*3|0)|0,T=T&~z,C=C&~(se()|0),(S|0)!=(m|0);)S=S+1|0;z=A+(y<<3)|0,g[z>>2]=T,g[z+4>>2]=C,y=y+1|0}P=P+1|0}while((P|0)!=122);return y=0,y|0}function hd(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0;if(ke=oe,oe=oe+16|0,Je=ke,be=ht(m|0,A|0,52)|0,se()|0,be=be&15,y>>>0>15)return be=4,oe=ke,be|0;if((be|0)<(y|0))return be=12,oe=ke,be|0;if((be|0)!=(y|0))if(C=Tt(y|0,0,52)|0,C=C|m,N=se()|0|A&-15728641,(be|0)>(y|0)){z=y;do Ee=Tt(7,0,(14-z|0)*3|0)|0,z=z+1|0,C=Ee|C,N=se()|0|N;while((z|0)<(be|0));Ee=C}else Ee=C;else Ee=m,N=A;Ae=ht(Ee|0,N|0,45)|0,se()|0;e:do if(Ci(Ae&127)|0){if(z=ht(Ee|0,N|0,52)|0,se()|0,z=z&15,z|0)for(C=1;;){if(Ae=Tt(7,0,(15-C|0)*3|0)|0,!((Ae&Ee|0)==0&((se()|0)&N|0)==0)){V=33;break e}if(C>>>0<z>>>0)C=C+1|0;else break}if(Ae=S,g[Ae>>2]=0,g[Ae+4>>2]=0,(be|0)>(y|0)){for(Ae=A&-15728641,_e=be;;){if(me=_e,_e=_e+-1|0,_e>>>0>15|(be|0)<(_e|0)){V=19;break}if((be|0)!=(_e|0))if(C=Tt(_e|0,0,52)|0,C=C|m,z=se()|0|Ae,(be|0)<(me|0))ue=C;else{V=_e;do ue=Tt(7,0,(14-V|0)*3|0)|0,V=V+1|0,C=ue|C,z=se()|0|z;while((V|0)<(be|0));ue=C}else ue=m,z=A;if(J=ht(ue|0,z|0,45)|0,se()|0,!(Ci(J&127)|0))C=0;else{J=ht(ue|0,z|0,52)|0,se()|0,J=J&15;t:do if(!J)C=0;else for(V=1;;){if(C=ht(ue|0,z|0,(15-V|0)*3|0)|0,se()|0,C=C&7,C|0)break t;if(V>>>0<J>>>0)V=V+1|0;else{C=0;break}}while(!1);C=(C|0)==0&1}if(z=ht(m|0,A|0,(15-me|0)*3|0)|0,se()|0,z=z&7,(z|0)==7){T=5,V=42;break}if(C=(C|0)!=0,(z|0)==1&C){T=5,V=42;break}if(ue=z+(((z|0)!=0&C)<<31>>31)|0,ue|0&&(V=be-me|0,V=uu(7,0,V,((V|0)<0)<<31>>31)|0,J=se()|0,C?(C=Ls(V|0,J|0,5,0)|0,C=Pn(C|0,se()|0,-5,-1)|0,C=Al(C|0,se()|0,6,0)|0,C=Pn(C|0,se()|0,1,0)|0,z=se()|0):(C=V,z=J),me=ue+-1|0,me=Ls(V|0,J|0,me|0,((me|0)<0)<<31>>31|0)|0,me=Pn(C|0,z|0,me|0,se()|0)|0,ue=se()|0,J=S,J=Pn(me|0,ue|0,g[J>>2]|0,g[J+4>>2]|0)|0,ue=se()|0,me=S,g[me>>2]=J,g[me+4>>2]=ue),(_e|0)<=(y|0)){V=37;break}}if((V|0)==19)lt(23313,22674,1099,22710);else if((V|0)==37){P=S,T=g[P+4>>2]|0,P=g[P>>2]|0;break}else if((V|0)==42)return oe=ke,T|0}else T=0,P=0}else V=33;while(!1);e:do if((V|0)==33)if(Ae=S,g[Ae>>2]=0,g[Ae+4>>2]=0,(be|0)>(y|0)){for(C=be;;){if(T=ht(m|0,A|0,(15-C|0)*3|0)|0,se()|0,T=T&7,(T|0)==7){T=5;break}if(P=be-C|0,P=uu(7,0,P,((P|0)<0)<<31>>31)|0,T=Ls(P|0,se()|0,T|0,0)|0,P=se()|0,Ae=S,P=Pn(g[Ae>>2]|0,g[Ae+4>>2]|0,T|0,P|0)|0,T=se()|0,Ae=S,g[Ae>>2]=P,g[Ae+4>>2]=T,C=C+-1|0,(C|0)<=(y|0))break e}return oe=ke,T|0}else T=0,P=0;while(!1);return uA(Ee,N,be,Je)|0&&lt(23313,22674,1063,22725),be=Je,Je=g[be+4>>2]|0,((T|0)>-1|(T|0)==-1&P>>>0>4294967295)&((Je|0)>(T|0)|((Je|0)==(T|0)?(g[be>>2]|0)>>>0>P>>>0:0))?(be=0,oe=ke,be|0):(lt(23313,22674,1139,22710),0)}function lu(m,A,y,S,T,C){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0,C=C|0;var P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0;if(ue=oe,oe=oe+16|0,P=ue,T>>>0>15)return C=4,oe=ue,C|0;if(N=ht(y|0,S|0,52)|0,se()|0,N=N&15,(N|0)>(T|0))return C=12,oe=ue,C|0;if(uA(y,S,T,P)|0&&lt(23313,22674,1063,22725),J=P,V=g[J+4>>2]|0,!(((A|0)>-1|(A|0)==-1&m>>>0>4294967295)&((V|0)>(A|0)|((V|0)==(A|0)?(g[J>>2]|0)>>>0>m>>>0:0))))return C=2,oe=ue,C|0;J=T-N|0,T=Tt(T|0,0,52)|0,z=se()|0|S&-15728641,V=C,g[V>>2]=T|y,g[V+4>>2]=z,V=ht(y|0,S|0,45)|0,se()|0;e:do if(Ci(V&127)|0){if(N|0)for(P=1;;){if(V=Tt(7,0,(15-P|0)*3|0)|0,!((V&y|0)==0&((se()|0)&S|0)==0))break e;if(P>>>0<N>>>0)P=P+1|0;else break}if((J|0)<1)return C=0,oe=ue,C|0;for(V=N^15,S=-1,z=1,P=1;;){N=J-z|0,N=uu(7,0,N,((N|0)<0)<<31>>31)|0,y=se()|0;do if(P)if(P=Ls(N|0,y|0,5,0)|0,P=Pn(P|0,se()|0,-5,-1)|0,P=Al(P|0,se()|0,6,0)|0,T=se()|0,(A|0)>(T|0)|(A|0)==(T|0)&m>>>0>P>>>0){A=Pn(m|0,A|0,-1,-1)|0,A=$r(A|0,se()|0,P|0,T|0)|0,P=se()|0,me=C,Ae=g[me>>2]|0,me=g[me+4>>2]|0,Ee=(V+S|0)*3|0,_e=Tt(7,0,Ee|0)|0,me=me&~(se()|0),S=Al(A|0,P|0,N|0,y|0)|0,m=se()|0,T=Pn(S|0,m|0,2,0)|0,Ee=Tt(T|0,se()|0,Ee|0)|0,me=se()|0|me,T=C,g[T>>2]=Ee|Ae&~_e,g[T+4>>2]=me,m=Ls(S|0,m|0,N|0,y|0)|0,m=$r(A|0,P|0,m|0,se()|0)|0,P=0,A=se()|0;break}else{Ee=C,_e=g[Ee>>2]|0,Ee=g[Ee+4>>2]|0,Ae=Tt(7,0,(V+S|0)*3|0)|0,Ee=Ee&~(se()|0),P=C,g[P>>2]=_e&~Ae,g[P+4>>2]=Ee,P=1;break}else _e=C,T=g[_e>>2]|0,_e=g[_e+4>>2]|0,S=(V+S|0)*3|0,me=Tt(7,0,S|0)|0,_e=_e&~(se()|0),Ee=Al(m|0,A|0,N|0,y|0)|0,P=se()|0,S=Tt(Ee|0,P|0,S|0)|0,_e=se()|0|_e,Ae=C,g[Ae>>2]=S|T&~me,g[Ae+4>>2]=_e,P=Ls(Ee|0,P|0,N|0,y|0)|0,m=$r(m|0,A|0,P|0,se()|0)|0,P=0,A=se()|0;while(!1);if((J|0)>(z|0))S=~z,z=z+1|0;else{A=0;break}}return oe=ue,A|0}while(!1);if((J|0)<1)return Ee=0,oe=ue,Ee|0;for(T=N^15,P=1;;)if(Ae=J-P|0,Ae=uu(7,0,Ae,((Ae|0)<0)<<31>>31)|0,Ee=se()|0,z=C,y=g[z>>2]|0,z=g[z+4>>2]|0,N=(T-P|0)*3|0,S=Tt(7,0,N|0)|0,z=z&~(se()|0),me=Al(m|0,A|0,Ae|0,Ee|0)|0,_e=se()|0,N=Tt(me|0,_e|0,N|0)|0,z=se()|0|z,V=C,g[V>>2]=N|y&~S,g[V+4>>2]=z,Ee=Ls(me|0,_e|0,Ae|0,Ee|0)|0,m=$r(m|0,A|0,Ee|0,se()|0)|0,A=se()|0,(J|0)<=(P|0)){A=0;break}else P=P+1|0;return oe=ue,A|0}function Bm(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0;T=ht(A|0,y|0,52)|0,se()|0,T=T&15,(A|0)==0&(y|0)==0|((S|0)>15|(T|0)>(S|0))?(S=-1,T=-1,A=0,y=0):(C=Ko(A,y,T+1|0,S)|0,y=(se()|0)&-15728641,A=Tt(S|0,0,52)|0,A=C|A,y=y|(se()|0),C=(Ri(A,y)|0)==0,S=C?-1:S),C=m,g[C>>2]=A,g[C+4>>2]=y,g[m+8>>2]=T,g[m+12>>2]=S}function Nh(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0,z=0,V=0;if(y=m,A=g[y>>2]|0,y=g[y+4>>2]|0,!((A|0)==0&(y|0)==0)&&(S=ht(A|0,y|0,52)|0,se()|0,S=S&15,N=Tt(1,0,(S^15)*3|0)|0,A=Pn(N|0,se()|0,A|0,y|0)|0,y=se()|0,N=m,g[N>>2]=A,g[N+4>>2]=y,N=m+8|0,P=g[N>>2]|0,!((S|0)<(P|0)))){for(z=m+12|0,C=S;;){if((C|0)==(P|0)){S=5;break}if(V=(C|0)==(g[z>>2]|0),T=(15-C|0)*3|0,S=ht(A|0,y|0,T|0)|0,se()|0,S=S&7,V&((S|0)==1&!0)){S=7;break}if(!((S|0)==7&!0)){S=10;break}if(V=Tt(1,0,T|0)|0,A=Pn(A|0,y|0,V|0,se()|0)|0,y=se()|0,V=m,g[V>>2]=A,g[V+4>>2]=y,(C|0)>(P|0))C=C+-1|0;else{S=10;break}}if((S|0)==5){V=m,g[V>>2]=0,g[V+4>>2]=0,g[N>>2]=-1,g[z>>2]=-1;return}else if((S|0)==7){P=Tt(1,0,T|0)|0,P=Pn(A|0,y|0,P|0,se()|0)|0,N=se()|0,V=m,g[V>>2]=P,g[V+4>>2]=N,g[z>>2]=C+-1;return}else if((S|0)==10)return}}function fd(m){m=+m;var A=0;return A=m<0?m+6.283185307179586:m,+(m>=6.283185307179586?A+-6.283185307179586:A)}function Oc(m,A){return m=m|0,A=A|0,+re(+(+le[m>>3]-+le[A>>3]))<17453292519943298e-27?(A=+re(+(+le[m+8>>3]-+le[A+8>>3]))<17453292519943298e-27,A|0):(A=0,A|0)}function er(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0;return T=+le[A>>3],S=+le[m>>3],C=+ve(+((T-S)*.5)),y=+ve(+((+le[A+8>>3]-+le[m+8>>3])*.5)),y=C*C+y*(+Ne(+T)*+Ne(+S)*y),+(+nn(+ +xe(+y),+ +xe(+(1-y)))*2)}function Fc(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0;return T=+le[A>>3],S=+le[m>>3],C=+ve(+((T-S)*.5)),y=+ve(+((+le[A+8>>3]-+le[m+8>>3])*.5)),y=C*C+y*(+Ne(+T)*+Ne(+S)*y),+(+nn(+ +xe(+y),+ +xe(+(1-y)))*2*6371.007180918475)}function _v(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0;return T=+le[A>>3],S=+le[m>>3],C=+ve(+((T-S)*.5)),y=+ve(+((+le[A+8>>3]-+le[m+8>>3])*.5)),y=C*C+y*(+Ne(+T)*+Ne(+S)*y),+(+nn(+ +xe(+y),+ +xe(+(1-y)))*2*6371.007180918475*1e3)}function xv(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0;return C=+le[A>>3],S=+Ne(+C),T=+le[A+8>>3]-+le[m+8>>3],P=S*+ve(+T),y=+le[m>>3],+ +nn(+P,+(+ve(+C)*+Ne(+y)-+Ne(+T)*(S*+ve(+y))))}function Im(m,A,y,S){m=m|0,A=+A,y=+y,S=S|0;var T=0,C=0,P=0,N=0;if(y<1e-16){g[S>>2]=g[m>>2],g[S+4>>2]=g[m+4>>2],g[S+8>>2]=g[m+8>>2],g[S+12>>2]=g[m+12>>2];return}C=A<0?A+6.283185307179586:A,C=A>=6.283185307179586?C+-6.283185307179586:C;do if(C<1e-16)A=+le[m>>3]+y,le[S>>3]=A,T=S;else{if(T=+re(+(C+-3.141592653589793))<1e-16,A=+le[m>>3],T){A=A-y,le[S>>3]=A,T=S;break}if(P=+Ne(+y),y=+ve(+y),A=P*+ve(+A)+ +Ne(+C)*(y*+Ne(+A)),A=A>1?1:A,A=+Jt(+(A<-1?-1:A)),le[S>>3]=A,+re(+(A+-1.5707963267948966))<1e-16){le[S>>3]=1.5707963267948966,le[S+8>>3]=0;return}if(+re(+(A+1.5707963267948966))<1e-16){le[S>>3]=-1.5707963267948966,le[S+8>>3]=0;return}if(N=+Ne(+A),C=y*+ve(+C)/N,y=+le[m>>3],A=(P-+ve(+A)*+ve(+y))/+Ne(+y)/N,P=C>1?1:C,A=A>1?1:A,A=+le[m+8>>3]+ +nn(+(P<-1?-1:P),+(A<-1?-1:A)),A>3.141592653589793)do A=A+-6.283185307179586;while(A>3.141592653589793);if(A<-3.141592653589793)do A=A+6.283185307179586;while(A<-3.141592653589793);le[S+8>>3]=A;return}while(!1);if(+re(+(A+-1.5707963267948966))<1e-16){le[T>>3]=1.5707963267948966,le[S+8>>3]=0;return}if(+re(+(A+1.5707963267948966))<1e-16){le[T>>3]=-1.5707963267948966,le[S+8>>3]=0;return}if(A=+le[m+8>>3],A>3.141592653589793)do A=A+-6.283185307179586;while(A>3.141592653589793);if(A<-3.141592653589793)do A=A+6.283185307179586;while(A<-3.141592653589793);le[S+8>>3]=A}function Pa(m,A){return m=m|0,A=A|0,m>>>0>15?(A=4,A|0):(le[A>>3]=+le[20528+(m<<3)>>3],A=0,A|0)}function dd(m,A){return m=m|0,A=A|0,m>>>0>15?(A=4,A|0):(le[A>>3]=+le[20656+(m<<3)>>3],A=0,A|0)}function ur(m,A){return m=m|0,A=A|0,m>>>0>15?(A=4,A|0):(le[A>>3]=+le[20784+(m<<3)>>3],A=0,A|0)}function Is(m,A){return m=m|0,A=A|0,m>>>0>15?(A=4,A|0):(le[A>>3]=+le[20912+(m<<3)>>3],A=0,A|0)}function Nr(m,A){m=m|0,A=A|0;var y=0;return m>>>0>15?(A=4,A|0):(y=uu(7,0,m,((m|0)<0)<<31>>31)|0,y=Ls(y|0,se()|0,120,0)|0,m=se()|0,g[A>>2]=y|2,g[A+4>>2]=m,A=0,A|0)}function fA(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0;return me=+le[A>>3],J=+le[m>>3],z=+ve(+((me-J)*.5)),C=+le[A+8>>3],V=+le[m+8>>3],P=+ve(+((C-V)*.5)),N=+Ne(+J),ue=+Ne(+me),P=z*z+P*(ue*N*P),P=+nn(+ +xe(+P),+ +xe(+(1-P)))*2,z=+le[y>>3],me=+ve(+((z-me)*.5)),S=+le[y+8>>3],C=+ve(+((S-C)*.5)),T=+Ne(+z),C=me*me+C*(ue*T*C),C=+nn(+ +xe(+C),+ +xe(+(1-C)))*2,z=+ve(+((J-z)*.5)),S=+ve(+((V-S)*.5)),S=z*z+S*(N*T*S),S=+nn(+ +xe(+S),+ +xe(+(1-S)))*2,T=(P+C+S)*.5,+(+Qt(+ +xe(+(+mt(+(T*.5))*+mt(+((T-P)*.5))*+mt(+((T-C)*.5))*+mt(+((T-S)*.5)))))*4)}function Dh(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0;if(N=oe,oe=oe+192|0,C=N+168|0,P=N,T=ud(m,A,C)|0,T|0)return y=T,oe=N,y|0;if(au(m,A,P)|0&&lt(23313,22742,386,22751),A=g[P>>2]|0,(A|0)>0){if(S=+fA(P+8|0,P+8+(((A|0)!=1&1)<<4)|0,C)+0,(A|0)!=1){m=1;do T=m,m=m+1|0,S=S+ +fA(P+8+(T<<4)|0,P+8+(((m|0)%(A|0)|0)<<4)|0,C);while((m|0)<(A|0))}}else S=0;return le[y>>3]=S,y=0,oe=N,y|0}function dA(m,A,y){return m=m|0,A=A|0,y=y|0,m=Dh(m,A,y)|0,m|0||(le[y>>3]=+le[y>>3]*6371.007180918475*6371.007180918475),m|0}function _5(m,A,y){return m=m|0,A=A|0,y=y|0,m=Dh(m,A,y)|0,m|0||(le[y>>3]=+le[y>>3]*6371.007180918475*6371.007180918475*1e3*1e3),m|0}function Ns(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0;if(N=oe,oe=oe+176|0,P=N,m=rd(m,A,P)|0,m|0)return P=m,oe=N,P|0;if(le[y>>3]=0,m=g[P>>2]|0,(m|0)<=1)return P=0,oe=N,P|0;A=m+-1|0,m=0,S=+le[P+8>>3],T=+le[P+16>>3],C=0;do m=m+1|0,V=S,S=+le[P+8+(m<<4)>>3],J=+ve(+((S-V)*.5)),z=T,T=+le[P+8+(m<<4)+8>>3],z=+ve(+((T-z)*.5)),z=J*J+z*(+Ne(+S)*+Ne(+V)*z),C=C+ +nn(+ +xe(+z),+ +xe(+(1-z)))*2;while((m|0)<(A|0));return le[y>>3]=C,P=0,oe=N,P|0}function bv(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0;if(N=oe,oe=oe+176|0,P=N,m=rd(m,A,P)|0,m|0)return P=m,C=+le[y>>3],C=C*6371.007180918475,le[y>>3]=C,oe=N,P|0;if(le[y>>3]=0,m=g[P>>2]|0,(m|0)<=1)return P=0,C=0,C=C*6371.007180918475,le[y>>3]=C,oe=N,P|0;A=m+-1|0,m=0,S=+le[P+8>>3],T=+le[P+16>>3],C=0;do m=m+1|0,V=S,S=+le[P+8+(m<<4)>>3],J=+ve(+((S-V)*.5)),z=T,T=+le[P+8+(m<<4)+8>>3],z=+ve(+((T-z)*.5)),z=J*J+z*(+Ne(+V)*+Ne(+S)*z),C=C+ +nn(+ +xe(+z),+ +xe(+(1-z)))*2;while((m|0)!=(A|0));return le[y>>3]=C,P=0,J=C,J=J*6371.007180918475,le[y>>3]=J,oe=N,P|0}function wv(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0;if(N=oe,oe=oe+176|0,P=N,m=rd(m,A,P)|0,m|0)return P=m,C=+le[y>>3],C=C*6371.007180918475,C=C*1e3,le[y>>3]=C,oe=N,P|0;if(le[y>>3]=0,m=g[P>>2]|0,(m|0)<=1)return P=0,C=0,C=C*6371.007180918475,C=C*1e3,le[y>>3]=C,oe=N,P|0;A=m+-1|0,m=0,S=+le[P+8>>3],T=+le[P+16>>3],C=0;do m=m+1|0,V=S,S=+le[P+8+(m<<4)>>3],J=+ve(+((S-V)*.5)),z=T,T=+le[P+8+(m<<4)+8>>3],z=+ve(+((T-z)*.5)),z=J*J+z*(+Ne(+V)*+Ne(+S)*z),C=C+ +nn(+ +xe(+z),+ +xe(+(1-z)))*2;while((m|0)!=(A|0));return le[y>>3]=C,P=0,J=C,J=J*6371.007180918475,J=J*1e3,le[y>>3]=J,oe=N,P|0}function Sv(m){m=m|0;var A=0,y=0,S=0;return A=xo(1,12)|0,A||lt(22832,22787,49,22845),y=m+4|0,S=g[y>>2]|0,S|0?(S=S+8|0,g[S>>2]=A,g[y>>2]=A,A|0):(g[m>>2]|0&&lt(22862,22787,61,22885),S=m,g[S>>2]=A,g[y>>2]=A,A|0)}function Vu(m,A){m=m|0,A=A|0;var y=0,S=0;return S=jr(24)|0,S||lt(22899,22787,78,22913),g[S>>2]=g[A>>2],g[S+4>>2]=g[A+4>>2],g[S+8>>2]=g[A+8>>2],g[S+12>>2]=g[A+12>>2],g[S+16>>2]=0,A=m+4|0,y=g[A>>2]|0,y|0?(g[y+16>>2]=S,g[A>>2]=S,S|0):(g[m>>2]|0&&lt(22928,22787,82,22913),g[m>>2]=S,g[A>>2]=S,S|0)}function pl(m){m=m|0;var A=0,y=0,S=0,T=0;if(m)for(S=1;;){if(A=g[m>>2]|0,A|0)do{if(y=g[A>>2]|0,y|0)do T=y,y=g[y+16>>2]|0,gn(T);while(y|0);T=A,A=g[A+8>>2]|0,gn(T)}while(A|0);if(A=m,m=g[m+8>>2]|0,S||gn(A),m)S=0;else break}}function Lh(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0,Ge=0,Re=0,Lt=0,Ut=0,bt=0,It=0,mi=0,Zn=0,ri=0,En=0,xn=0,Cn=0,yi=0,mn=0;if(T=m+8|0,g[T>>2]|0)return mn=1,mn|0;if(S=g[m>>2]|0,!S)return mn=0,mn|0;A=S,y=0;do y=y+1|0,A=g[A+8>>2]|0;while(A|0);if(y>>>0<2)return mn=0,mn|0;Cn=jr(y<<2)|0,Cn||lt(22948,22787,317,22967),xn=jr(y<<5)|0,xn||lt(22989,22787,321,22967),g[m>>2]=0,Ut=m+4|0,g[Ut>>2]=0,g[T>>2]=0,y=0,En=0,Lt=0,ue=0;e:for(;;){if(J=g[S>>2]|0,J){C=0,P=J;do{if(z=+le[P+8>>3],A=P,P=g[P+16>>2]|0,V=(P|0)==0,T=V?J:P,N=+le[T+8>>3],+re(+(z-N))>3.141592653589793){mn=14;break}C=C+(N-z)*(+le[A>>3]+ +le[T>>3])}while(!V);if((mn|0)==14){mn=0,C=0,A=J;do Re=+le[A+8>>3],ri=A+16|0,Zn=g[ri>>2]|0,Zn=Zn|0?Zn:J,Ge=+le[Zn+8>>3],C=C+(+le[A>>3]+ +le[Zn>>3])*((Ge<0?Ge+6.283185307179586:Ge)-(Re<0?Re+6.283185307179586:Re)),A=g[(A|0?ri:S)>>2]|0;while(A|0)}C>0?(g[Cn+(En<<2)>>2]=S,En=En+1|0,T=Lt,A=ue):mn=19}else mn=19;if((mn|0)==19){mn=0;do if(y){if(A=y+8|0,g[A>>2]|0){mn=21;break e}if(y=xo(1,12)|0,!y){mn=23;break e}g[A>>2]=y,T=y+4|0,P=y,A=ue}else if(ue){T=Ut,P=ue+8|0,A=S,y=m;break}else if(g[m>>2]|0){mn=27;break e}else{T=Ut,P=m,A=S,y=m;break}while(!1);if(g[P>>2]=S,g[T>>2]=S,P=xn+(Lt<<5)|0,V=g[S>>2]|0,V){for(J=xn+(Lt<<5)+8|0,le[J>>3]=17976931348623157e292,ue=xn+(Lt<<5)+24|0,le[ue>>3]=17976931348623157e292,le[P>>3]=-17976931348623157e292,me=xn+(Lt<<5)+16|0,le[me>>3]=-17976931348623157e292,be=17976931348623157e292,ke=-17976931348623157e292,T=0,_e=V,z=17976931348623157e292,Ee=17976931348623157e292,Je=-17976931348623157e292,N=-17976931348623157e292;C=+le[_e>>3],Re=+le[_e+8>>3],_e=g[_e+16>>2]|0,Ae=(_e|0)==0,Ge=+le[(Ae?V:_e)+8>>3],C<z&&(le[J>>3]=C,z=C),Re<Ee&&(le[ue>>3]=Re,Ee=Re),C>Je?le[P>>3]=C:C=Je,Re>N&&(le[me>>3]=Re,N=Re),be=Re>0&Re<be?Re:be,ke=Re<0&Re>ke?Re:ke,T=T|+re(+(Re-Ge))>3.141592653589793,!Ae;)Je=C;T&&(le[me>>3]=ke,le[ue>>3]=be)}else g[P>>2]=0,g[P+4>>2]=0,g[P+8>>2]=0,g[P+12>>2]=0,g[P+16>>2]=0,g[P+20>>2]=0,g[P+24>>2]=0,g[P+28>>2]=0;T=Lt+1|0}if(ri=S+8|0,S=g[ri>>2]|0,g[ri>>2]=0,S)Lt=T,ue=A;else{mn=45;break}}if((mn|0)==21)lt(22765,22787,35,22799);else if((mn|0)==23)lt(22819,22787,37,22799);else if((mn|0)==27)lt(22862,22787,61,22885);else if((mn|0)==45){e:do if((En|0)>0){for(ri=(T|0)==0,mi=T<<2,Zn=(m|0)==0,It=0,A=0;;){if(bt=g[Cn+(It<<2)>>2]|0,ri)mn=73;else{if(Lt=jr(mi)|0,!Lt){mn=50;break}if(Ut=jr(mi)|0,!Ut){mn=52;break}t:do if(Zn)y=0;else{for(T=0,y=0,P=m;S=xn+(T<<5)|0,pA(g[P>>2]|0,S,g[bt>>2]|0)|0?(g[Lt+(y<<2)>>2]=P,g[Ut+(y<<2)>>2]=S,Ae=y+1|0):Ae=y,P=g[P+8>>2]|0,P;)T=T+1|0,y=Ae;if((Ae|0)>0)if(S=g[Lt>>2]|0,(Ae|0)==1)y=S;else for(me=0,_e=-1,y=S,ue=S;;){for(V=g[ue>>2]|0,S=0,P=0;T=g[g[Lt+(P<<2)>>2]>>2]|0,(T|0)==(V|0)?J=S:J=S+((pA(T,g[Ut+(P<<2)>>2]|0,g[V>>2]|0)|0)&1)|0,P=P+1|0,(P|0)!=(Ae|0);)S=J;if(T=(J|0)>(_e|0),y=T?ue:y,S=me+1|0,(S|0)==(Ae|0))break t;me=S,_e=T?J:_e,ue=g[Lt+(S<<2)>>2]|0}else y=0}while(!1);if(gn(Lt),gn(Ut),y){if(T=y+4|0,S=g[T>>2]|0,S)y=S+8|0;else if(g[y>>2]|0){mn=70;break}g[y>>2]=bt,g[T>>2]=bt}else mn=73}if((mn|0)==73){if(mn=0,A=g[bt>>2]|0,A|0)do Ut=A,A=g[A+16>>2]|0,gn(Ut);while(A|0);gn(bt),A=1}if(It=It+1|0,(It|0)>=(En|0)){yi=A;break e}}(mn|0)==50?lt(23004,22787,249,23023):(mn|0)==52?lt(23042,22787,252,23023):(mn|0)==70&&lt(22862,22787,61,22885)}else yi=0;while(!1);return gn(Cn),gn(xn),mn=yi,mn|0}return 0}function pA(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0;if(!(lA(A,y)|0)||(A=zb(A)|0,S=+le[y>>3],T=+le[y+8>>3],T=A&T<0?T+6.283185307179586:T,m=g[m>>2]|0,!m))return m=0,m|0;if(A){A=0,V=T,y=m;e:for(;;){for(;P=+le[y>>3],T=+le[y+8>>3],y=y+16|0,J=g[y>>2]|0,J=J|0?J:m,C=+le[J>>3],N=+le[J+8>>3],P>C?(z=P,P=N):(z=C,C=P,P=T,T=N),S=S==C|S==z?S+2220446049250313e-31:S,!!(S<C|S>z);)if(y=g[y>>2]|0,!y){y=22;break e}if(N=P<0?P+6.283185307179586:P,P=T<0?T+6.283185307179586:T,V=N==V|P==V?V+-2220446049250313e-31:V,z=N+(P-N)*((S-C)/(z-C)),(z<0?z+6.283185307179586:z)>V&&(A=A^1),y=g[y>>2]|0,!y){y=22;break}}if((y|0)==22)return A|0}else{A=0,V=T,y=m;e:for(;;){for(;P=+le[y>>3],T=+le[y+8>>3],y=y+16|0,J=g[y>>2]|0,J=J|0?J:m,C=+le[J>>3],N=+le[J+8>>3],P>C?(z=P,P=N):(z=C,C=P,P=T,T=N),S=S==C|S==z?S+2220446049250313e-31:S,!!(S<C|S>z);)if(y=g[y>>2]|0,!y){y=22;break e}if(V=P==V|T==V?V+-2220446049250313e-31:V,P+(T-P)*((S-C)/(z-C))>V&&(A=A^1),y=g[y>>2]|0,!y){y=22;break}}if((y|0)==22)return A|0}return 0}function Ba(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0;if(ke=oe,oe=oe+32|0,be=ke+16|0,Je=ke,C=ht(m|0,A|0,52)|0,se()|0,C=C&15,_e=ht(y|0,S|0,52)|0,se()|0,(C|0)!=(_e&15|0))return be=12,oe=ke,be|0;if(V=ht(m|0,A|0,45)|0,se()|0,V=V&127,J=ht(y|0,S|0,45)|0,se()|0,J=J&127,V>>>0>121|J>>>0>121)return be=5,oe=ke,be|0;if(_e=(V|0)!=(J|0),_e){if(N=aA(V,J)|0,(N|0)==7)return be=1,oe=ke,be|0;z=aA(J,V)|0,(z|0)==7?lt(23066,23090,161,23100):(Ae=N,P=z)}else Ae=0,P=0;ue=Ci(V)|0,me=Ci(J)|0,g[be>>2]=0,g[be+4>>2]=0,g[be+8>>2]=0,g[be+12>>2]=0;do if(Ae){if(J=g[4272+(V*28|0)+(Ae<<2)>>2]|0,N=(J|0)>0,me)if(N){V=0,z=y,N=S;do z=Yb(z,N)|0,N=se()|0,P=ru(P)|0,(P|0)==1&&(P=ru(1)|0),V=V+1|0;while((V|0)!=(J|0));J=P,V=z,z=N}else J=P,V=y,z=S;else if(N){V=0,z=y,N=S;do z=Ph(z,N)|0,N=se()|0,P=ru(P)|0,V=V+1|0;while((V|0)!=(J|0));J=P,V=z,z=N}else J=P,V=y,z=S;if(ld(V,z,be)|0,_e||lt(23115,23090,191,23100),N=(ue|0)!=0,P=(me|0)!=0,N&P&&lt(23142,23090,192,23100),N){if(P=Qs(m,A)|0,(P|0)==7){C=5;break}if(sn[21872+(P*7|0)+Ae>>0]|0){C=1;break}z=g[21040+(P*28|0)+(Ae<<2)>>2]|0,V=z}else if(P){if(P=Qs(V,z)|0,(P|0)==7){C=5;break}if(sn[21872+(P*7|0)+J>>0]|0){C=1;break}V=0,z=g[21040+(J*28|0)+(P<<2)>>2]|0}else V=0,z=0;if((V|z|0)<0)C=5;else{if((z|0)>0){N=be+4|0,P=0;do id(N),P=P+1|0;while((P|0)!=(z|0))}if(g[Je>>2]=0,g[Je+4>>2]=0,g[Je+8>>2]=0,Th(Je,Ae),C|0)for(;_o(C)|0?Mh(Je):iu(Je),(C|0)>1;)C=C+-1|0;if((V|0)>0){C=0;do id(Je),C=C+1|0;while((C|0)!=(V|0))}Ee=be+4|0,xs(Ee,Je,Ee),Xi(Ee),Ee=51}}else if(ld(y,S,be)|0,(ue|0)!=0&(me|0)!=0)if((J|0)!=(V|0)&&lt(23173,23090,261,23100),P=Qs(m,A)|0,C=Qs(y,S)|0,(P|0)==7|(C|0)==7)C=5;else if(sn[21872+(P*7|0)+C>>0]|0)C=1;else if(P=g[21040+(P*28|0)+(C<<2)>>2]|0,(P|0)>0){N=be+4|0,C=0;do id(N),C=C+1|0;while((C|0)!=(P|0));Ee=51}else Ee=51;else Ee=51;while(!1);return(Ee|0)==51&&(C=be+4|0,g[T>>2]=g[C>>2],g[T+4>>2]=g[C+4>>2],g[T+8>>2]=g[C+8>>2],C=0),be=C,oe=ke,be|0}function Mv(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0,Ge=0;if(Ee=oe,oe=oe+48|0,V=Ee+36|0,P=Ee+24|0,N=Ee+12|0,z=Ee,T=ht(m|0,A|0,52)|0,se()|0,T=T&15,me=ht(m|0,A|0,45)|0,se()|0,me=me&127,me>>>0>121)return S=5,oe=Ee,S|0;if(J=Ci(me)|0,Tt(T|0,0,52)|0,Je=se()|0|134225919,C=S,g[C>>2]=-1,g[C+4>>2]=Je,!T)return T=Yo(y)|0,(T|0)==7||(T=Ir(me,T)|0,(T|0)==127)?(Je=1,oe=Ee,Je|0):(_e=Tt(T|0,0,45)|0,Ae=se()|0,me=S,Ae=g[me+4>>2]&-1040385|Ae,Je=S,g[Je>>2]=g[me>>2]|_e,g[Je+4>>2]=Ae,Je=0,oe=Ee,Je|0);for(g[V>>2]=g[y>>2],g[V+4>>2]=g[y+4>>2],g[V+8>>2]=g[y+8>>2],y=T;;){if(C=y,y=y+-1|0,g[P>>2]=g[V>>2],g[P+4>>2]=g[V+4>>2],g[P+8>>2]=g[V+8>>2],_o(C)|0){if(T=y5(V)|0,T|0){y=13;break}g[N>>2]=g[V>>2],g[N+4>>2]=g[V+4>>2],g[N+8>>2]=g[V+8>>2],Mh(N)}else{if(T=wm(V)|0,T|0){y=13;break}g[N>>2]=g[V>>2],g[N+4>>2]=g[V+4>>2],g[N+8>>2]=g[V+8>>2],iu(N)}if(bm(P,N,z),Xi(z),T=S,ke=g[T>>2]|0,T=g[T+4>>2]|0,Ge=(15-C|0)*3|0,be=Tt(7,0,Ge|0)|0,T=T&~(se()|0),Ge=Tt(Yo(z)|0,0,Ge|0)|0,T=se()|0|T,Je=S,g[Je>>2]=Ge|ke&~be,g[Je+4>>2]=T,(C|0)<=1){y=14;break}}e:do if((y|0)!=13&&(y|0)==14)if((g[V>>2]|0)<=1&&(g[V+4>>2]|0)<=1&&(g[V+8>>2]|0)<=1){y=Yo(V)|0,T=Ir(me,y)|0,(T|0)==127?z=0:z=Ci(T)|0;t:do if(y){if(J){if(T=Qs(m,A)|0,(T|0)==7){T=5;break e}if(C=g[21248+(T*28|0)+(y<<2)>>2]|0,(C|0)>0){T=y,y=0;do T=Ic(T)|0,y=y+1|0;while((y|0)!=(C|0))}else T=y;if((T|0)==1){T=9;break e}y=Ir(me,T)|0,(y|0)==127&&lt(23200,23090,411,23230),Ci(y)|0?lt(23245,23090,412,23230):(Ae=y,_e=C,ue=T)}else Ae=T,_e=0,ue=y;if(N=g[4272+(me*28|0)+(ue<<2)>>2]|0,(N|0)<=-1&&lt(23276,23090,419,23230),!z){if((_e|0)<0){T=5;break e}if(_e|0){C=S,T=0,y=g[C>>2]|0,C=g[C+4>>2]|0;do y=qu(y,C)|0,C=se()|0,Ge=S,g[Ge>>2]=y,g[Ge+4>>2]=C,T=T+1|0;while((T|0)<(_e|0))}if((N|0)<=0){T=Ae,y=58;break}for(C=S,T=0,y=g[C>>2]|0,C=g[C+4>>2]|0;;)if(y=qu(y,C)|0,C=se()|0,Ge=S,g[Ge>>2]=y,g[Ge+4>>2]=C,T=T+1|0,(T|0)==(N|0)){T=Ae,y=58;break t}}if(P=aA(Ae,me)|0,(P|0)==7&&lt(23066,23090,428,23230),T=S,y=g[T>>2]|0,T=g[T+4>>2]|0,(N|0)>0){C=0;do y=qu(y,T)|0,T=se()|0,Ge=S,g[Ge>>2]=y,g[Ge+4>>2]=T,C=C+1|0;while((C|0)!=(N|0))}if(T=Qs(y,T)|0,(T|0)==7&&lt(23313,23090,440,23230),y=ui(Ae)|0,y=g[(y?21664:21456)+(P*28|0)+(T<<2)>>2]|0,(y|0)<0&&lt(23313,23090,454,23230),!y)T=Ae,y=58;else{P=S,T=0,C=g[P>>2]|0,P=g[P+4>>2]|0;do C=hA(C,P)|0,P=se()|0,Ge=S,g[Ge>>2]=C,g[Ge+4>>2]=P,T=T+1|0;while((T|0)<(y|0));T=Ae,y=58}}else if((J|0)!=0&(z|0)!=0){if(y=Qs(m,A)|0,C=S,C=Qs(g[C>>2]|0,g[C+4>>2]|0)|0,(y|0)==7|(C|0)==7){T=5;break e}if(C=g[21248+(y*28|0)+(C<<2)>>2]|0,(C|0)<0){T=5;break e}if(!C)y=59;else{N=S,y=0,P=g[N>>2]|0,N=g[N+4>>2]|0;do P=qu(P,N)|0,N=se()|0,Ge=S,g[Ge>>2]=P,g[Ge+4>>2]=N,y=y+1|0;while((y|0)<(C|0));y=58}}else y=58;while(!1);if((y|0)==58&&z&&(y=59),(y|0)==59&&(Ge=S,(Qs(g[Ge>>2]|0,g[Ge+4>>2]|0)|0)==1)){T=9;break}Ge=S,be=g[Ge>>2]|0,Ge=g[Ge+4>>2]&-1040385,ke=Tt(T|0,0,45)|0,Ge=Ge|(se()|0),T=S,g[T>>2]=be|ke,g[T+4>>2]=Ge,T=0}else T=1;while(!1);return Ge=T,oe=Ee,Ge|0}function Kb(m,A,y,S,T,C){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0,C=C|0;var P=0,N=0;return N=oe,oe=oe+16|0,P=N,T?m=15:(m=Ba(m,A,y,S,P)|0,m||(su(P,C),m=0)),oe=N,m|0}function Jb(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0;return P=oe,oe=oe+16|0,C=P,S?y=15:(y=Nc(y,C)|0,y||(y=Mv(m,A,C,T)|0)),oe=P,y|0}function Zb(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0;return z=oe,oe=oe+32|0,P=z+12|0,N=z,C=Ba(m,A,m,A,P)|0,C|0?(N=C,oe=z,N|0):(m=Ba(m,A,y,S,N)|0,m|0?(N=m,oe=z,N|0):(P=yo(P,N)|0,N=T,g[N>>2]=P,g[N+4>>2]=((P|0)<0)<<31>>31,N=0,oe=z,N|0))}function ew(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0;return z=oe,oe=oe+32|0,P=z+12|0,N=z,C=Ba(m,A,m,A,P)|0,!C&&(C=Ba(m,A,y,S,N)|0,!C)?(S=yo(P,N)|0,S=Pn(S|0,((S|0)<0)<<31>>31|0,1,0)|0,P=se()|0,N=T,g[N>>2]=S,g[N+4>>2]=P,N=0,oe=z,N|0):(N=C,oe=z,N|0)}function tw(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0,Ge=0,Re=0,Lt=0,Ut=0,bt=0,It=0;if(bt=oe,oe=oe+48|0,P=bt+24|0,N=bt+12|0,Ut=bt,C=Ba(m,A,m,A,P)|0,!C&&(C=Ba(m,A,y,S,N)|0,!C)){Re=yo(P,N)|0,Lt=((Re|0)<0)<<31>>31,g[P>>2]=0,g[P+4>>2]=0,g[P+8>>2]=0,g[N>>2]=0,g[N+4>>2]=0,g[N+8>>2]=0,Ba(m,A,m,A,P)|0&&lt(23313,23090,691,23299),Ba(m,A,y,S,N)|0&&lt(23313,23090,696,23299),Tm(P),Tm(N),Re?(ue=g[P>>2]|0,Ae=+(Re|0),be=P+4|0,me=g[be>>2]|0,ke=P+8|0,_e=g[ke>>2]|0,Ge=P,S=ue,C=me,y=_e,Ee=+((g[N>>2]|0)-ue|0)/Ae,Je=+((g[N+4>>2]|0)-me|0)/Ae,Ae=+((g[N+8>>2]|0)-_e|0)/Ae):(C=P+4|0,y=P+8|0,be=C,ke=y,Ge=P,S=g[P>>2]|0,C=g[C>>2]|0,y=g[y>>2]|0,Ee=0,Je=0,Ae=0),g[Ut>>2]=S,_e=Ut+4|0,g[_e>>2]=C,me=Ut+8|0,g[me>>2]=y;e:do if((Re|0)<0)C=0;else for(J=0,ue=0,C=S;;){V=+(ue>>>0)+4294967296*+(J|0),It=Ee*V+ +(C|0),z=Je*V+ +(g[be>>2]|0),V=Ae*V+ +(g[ke>>2]|0),y=~~+gA(+It),P=~~+gA(+z),C=~~+gA(+V),It=+re(+(+(y|0)-It)),z=+re(+(+(P|0)-z)),V=+re(+(+(C|0)-V));do if(It>z&It>V)y=0-(P+C)|0,S=P;else if(N=0-y|0,z>V){S=N-C|0;break}else{S=P,C=N-P|0;break}while(!1);if(g[Ut>>2]=y,g[_e>>2]=S,g[me>>2]=C,Hb(Ut),C=Mv(m,A,Ut,T+(ue<<3)|0)|0,C|0)break e;if(!((J|0)<(Lt|0)|(J|0)==(Lt|0)&ue>>>0<Re>>>0)){C=0;break e}C=Pn(ue|0,J|0,1,0)|0,N=se()|0,J=N,ue=C,C=g[Ge>>2]|0}while(!1);return Ut=C,oe=bt,Ut|0}return Ut=C,oe=bt,Ut|0}function uu(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0;if((y|0)==0&(S|0)==0)return T=0,C=1,Dt(T|0),C|0;C=m,T=A,m=1,A=0;do P=(y&1|0)==0&!0,m=Ls((P?1:C)|0,(P?0:T)|0,m|0,A|0)|0,A=se()|0,y=Os(y|0,S|0,1)|0,S=se()|0,C=Ls(C|0,T|0,C|0,T|0)|0,T=se()|0;while(!((y|0)==0&(S|0)==0));return Dt(A|0),m|0}function pd(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0;if(!(lA(A,y)|0)||(A=zb(A)|0,S=+le[y>>3],T=+le[y+8>>3],T=A&T<0?T+6.283185307179586:T,me=g[m>>2]|0,(me|0)<=0))return me=0,me|0;if(ue=g[m+4>>2]|0,A){A=0,J=T,y=-1,m=0;e:for(;;){for(V=m;P=+le[ue+(V<<4)>>3],T=+le[ue+(V<<4)+8>>3],m=(y+2|0)%(me|0)|0,C=+le[ue+(m<<4)>>3],N=+le[ue+(m<<4)+8>>3],P>C?(z=P,P=N):(z=C,C=P,P=T,T=N),S=S==C|S==z?S+2220446049250313e-31:S,!!(S<C|S>z);)if(y=V+1|0,(y|0)>=(me|0)){y=22;break e}else m=V,V=y,y=m;if(N=P<0?P+6.283185307179586:P,P=T<0?T+6.283185307179586:T,J=N==J|P==J?J+-2220446049250313e-31:J,z=N+(P-N)*((S-C)/(z-C)),(z<0?z+6.283185307179586:z)>J&&(A=A^1),m=V+1|0,(m|0)>=(me|0)){y=22;break}else y=V}if((y|0)==22)return A|0}else{A=0,J=T,y=-1,m=0;e:for(;;){for(V=m;P=+le[ue+(V<<4)>>3],T=+le[ue+(V<<4)+8>>3],m=(y+2|0)%(me|0)|0,C=+le[ue+(m<<4)>>3],N=+le[ue+(m<<4)+8>>3],P>C?(z=P,P=N):(z=C,C=P,P=T,T=N),S=S==C|S==z?S+2220446049250313e-31:S,!!(S<C|S>z);)if(y=V+1|0,(y|0)>=(me|0)){y=22;break e}else m=V,V=y,y=m;if(J=P==J|T==J?J+-2220446049250313e-31:J,P+(T-P)*((S-C)/(z-C))>J&&(A=A^1),m=V+1|0,(m|0)>=(me|0)){y=22;break}else y=V}if((y|0)==22)return A|0}return 0}function Tv(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0;if(Ae=g[m>>2]|0,!Ae){g[A>>2]=0,g[A+4>>2]=0,g[A+8>>2]=0,g[A+12>>2]=0,g[A+16>>2]=0,g[A+20>>2]=0,g[A+24>>2]=0,g[A+28>>2]=0;return}if(Ee=A+8|0,le[Ee>>3]=17976931348623157e292,Je=A+24|0,le[Je>>3]=17976931348623157e292,le[A>>3]=-17976931348623157e292,be=A+16|0,le[be>>3]=-17976931348623157e292,!((Ae|0)<=0)){for(me=g[m+4>>2]|0,V=17976931348623157e292,J=-17976931348623157e292,ue=0,m=-1,C=17976931348623157e292,P=17976931348623157e292,z=-17976931348623157e292,S=-17976931348623157e292,_e=0;y=+le[me+(_e<<4)>>3],N=+le[me+(_e<<4)+8>>3],m=m+2|0,T=+le[me+(((m|0)==(Ae|0)?0:m)<<4)+8>>3],y<C&&(le[Ee>>3]=y,C=y),N<P&&(le[Je>>3]=N,P=N),y>z?le[A>>3]=y:y=z,N>S&&(le[be>>3]=N,S=N),V=N>0&N<V?N:V,J=N<0&N>J?N:J,ue=ue|+re(+(N-T))>3.141592653589793,m=_e+1|0,(m|0)!=(Ae|0);)ke=_e,z=y,_e=m,m=ke;ue&&(le[be>>3]=J,le[Je>>3]=V)}}function Nm(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0,Ge=0,Re=0,Lt=0,Ut=0,bt=0;if(Ae=g[m>>2]|0,Ae){if(Ee=A+8|0,le[Ee>>3]=17976931348623157e292,Je=A+24|0,le[Je>>3]=17976931348623157e292,le[A>>3]=-17976931348623157e292,be=A+16|0,le[be>>3]=-17976931348623157e292,(Ae|0)>0){for(T=g[m+4>>2]|0,me=17976931348623157e292,_e=-17976931348623157e292,S=0,y=-1,z=17976931348623157e292,V=17976931348623157e292,ue=-17976931348623157e292,P=-17976931348623157e292,ke=0;C=+le[T+(ke<<4)>>3],J=+le[T+(ke<<4)+8>>3],Ut=y+2|0,N=+le[T+(((Ut|0)==(Ae|0)?0:Ut)<<4)+8>>3],C<z&&(le[Ee>>3]=C,z=C),J<V&&(le[Je>>3]=J,V=J),C>ue?le[A>>3]=C:C=ue,J>P&&(le[be>>3]=J,P=J),me=J>0&J<me?J:me,_e=J<0&J>_e?J:_e,S=S|+re(+(J-N))>3.141592653589793,y=ke+1|0,(y|0)!=(Ae|0);)Ut=ke,ue=C,ke=y,y=Ut;S&&(le[be>>3]=_e,le[Je>>3]=me)}}else g[A>>2]=0,g[A+4>>2]=0,g[A+8>>2]=0,g[A+12>>2]=0,g[A+16>>2]=0,g[A+20>>2]=0,g[A+24>>2]=0,g[A+28>>2]=0;if(Ut=m+8|0,y=g[Ut>>2]|0,!((y|0)<=0)){Lt=m+12|0,Re=0;do if(T=g[Lt>>2]|0,S=Re,Re=Re+1|0,Je=A+(Re<<5)|0,be=g[T+(S<<3)>>2]|0,be){if(ke=A+(Re<<5)+8|0,le[ke>>3]=17976931348623157e292,m=A+(Re<<5)+24|0,le[m>>3]=17976931348623157e292,le[Je>>3]=-17976931348623157e292,Ge=A+(Re<<5)+16|0,le[Ge>>3]=-17976931348623157e292,(be|0)>0){for(Ae=g[T+(S<<3)+4>>2]|0,me=17976931348623157e292,_e=-17976931348623157e292,T=0,S=-1,Ee=0,z=17976931348623157e292,V=17976931348623157e292,J=-17976931348623157e292,P=-17976931348623157e292;C=+le[Ae+(Ee<<4)>>3],ue=+le[Ae+(Ee<<4)+8>>3],S=S+2|0,N=+le[Ae+(((S|0)==(be|0)?0:S)<<4)+8>>3],C<z&&(le[ke>>3]=C,z=C),ue<V&&(le[m>>3]=ue,V=ue),C>J?le[Je>>3]=C:C=J,ue>P&&(le[Ge>>3]=ue,P=ue),me=ue>0&ue<me?ue:me,_e=ue<0&ue>_e?ue:_e,T=T|+re(+(ue-N))>3.141592653589793,S=Ee+1|0,(S|0)!=(be|0);)bt=Ee,Ee=S,J=C,S=bt;T&&(le[Ge>>3]=_e,le[m>>3]=me)}}else g[Je>>2]=0,g[Je+4>>2]=0,g[Je+8>>2]=0,g[Je+12>>2]=0,g[Je+16>>2]=0,g[Je+20>>2]=0,g[Je+24>>2]=0,g[Je+28>>2]=0,y=g[Ut>>2]|0;while((Re|0)<(y|0))}}function Dm(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0;if(!(pd(m,A,y)|0))return T=0,T|0;if(T=m+8|0,(g[T>>2]|0)<=0)return T=1,T|0;for(S=m+12|0,m=0;;){if(C=m,m=m+1|0,pd((g[S>>2]|0)+(C<<3)|0,A+(m<<5)|0,y)|0){m=0,S=6;break}if((m|0)>=(g[T>>2]|0)){m=1,S=6;break}}return(S|0)==6?m|0:0}function Ev(){return 8}function AA(){return 16}function nw(){return 168}function iw(){return 8}function rw(){return 16}function sw(){return 12}function Cv(){return 8}function ow(m){return m=m|0,+(+((g[m>>2]|0)>>>0)+4294967296*+(g[m+4>>2]|0))}function aw(m){m=m|0;var A=0,y=0;return y=+le[m>>3],A=+le[m+8>>3],+ +xe(+(y*y+A*A))}function lw(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0;V=+le[m>>3],z=+le[A>>3]-V,N=+le[m+8>>3],P=+le[A+8>>3]-N,ue=+le[y>>3],C=+le[S>>3]-ue,me=+le[y+8>>3],J=+le[S+8>>3]-me,C=(C*(N-me)-(V-ue)*J)/(z*J-P*C),le[T>>3]=V+z*C,le[T+8>>3]=N+P*C}function Rv(m,A){return m=m|0,A=A|0,+re(+(+le[m>>3]-+le[A>>3]))<11920928955078125e-23?(A=+re(+(+le[m+8>>3]-+le[A+8>>3]))<11920928955078125e-23,A|0):(A=0,A|0)}function Dr(m,A){m=m|0,A=A|0;var y=0,S=0,T=0;return T=+le[m>>3]-+le[A>>3],S=+le[m+8>>3]-+le[A+8>>3],y=+le[m+16>>3]-+le[A+16>>3],+(T*T+S*S+y*y)}function x5(m,A){m=m|0,A=A|0;var y=0,S=0,T=0;y=+le[m>>3],S=+Ne(+y),y=+ve(+y),le[A+16>>3]=y,y=+le[m+8>>3],T=S*+Ne(+y),le[A>>3]=T,y=S*+ve(+y),le[A+8>>3]=y}function uw(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0;if(C=oe,oe=oe+16|0,T=C,S=Ri(m,A)|0,(y+-1|0)>>>0>5||(S=(S|0)!=0,(y|0)==1&S))return T=-1,oe=C,T|0;do if(Ad(m,A,T)|0)S=-1;else if(S){S=((g[21936+(y<<2)>>2]|0)+5-(g[T>>2]|0)|0)%5|0;break}else{S=((g[21968+(y<<2)>>2]|0)+6-(g[T>>2]|0)|0)%6|0;break}while(!1);return T=S,oe=C,T|0}function Ad(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0,V=0;if(V=oe,oe=oe+32|0,P=V+16|0,N=V,S=Bh(m,A,P)|0,S|0)return y=S,oe=V,y|0;C=ou(m,A)|0,z=Qs(m,A)|0,kb(C,N),S=p5(C,g[P>>2]|0)|0;e:do if(Ci(C)|0){do switch(C|0){case 4:{m=0;break}case 14:{m=1;break}case 24:{m=2;break}case 38:{m=3;break}case 49:{m=4;break}case 58:{m=5;break}case 63:{m=6;break}case 72:{m=7;break}case 83:{m=8;break}case 97:{m=9;break}case 107:{m=10;break}case 117:{m=11;break}default:{S=1;break e}}while(!1);if(T=g[22e3+(m*24|0)+8>>2]|0,A=g[22e3+(m*24|0)+16>>2]|0,m=g[P>>2]|0,(m|0)!=(g[N>>2]|0)&&(N=ui(C)|0,m=g[P>>2]|0,N|(m|0)==(A|0)&&(S=(S+1|0)%6|0)),(z|0)==3&(m|0)==(A|0)){S=(S+5|0)%6|0,T=22;break}(z|0)==5&(m|0)==(T|0)&&(S=(S+1|0)%6|0),T=22}else T=22;while(!1);return(T|0)==22&&(g[y>>2]=S,S=0),y=S,oe=V,y|0}function Zo(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0,Ge=0;if(Ge=oe,oe=oe+32|0,ke=Ge+24|0,Je=Ge+20|0,Ae=Ge+8|0,_e=Ge+16|0,me=Ge,z=(Ri(m,A)|0)==0,z=z?6:5,J=ht(m|0,A|0,52)|0,se()|0,J=J&15,z>>>0<=y>>>0)return S=2,oe=Ge,S|0;ue=(J|0)==0,!ue&&(Ee=Tt(7,0,(J^15)*3|0)|0,(Ee&m|0)==0&((se()|0)&A|0)==0)?T=y:C=4;e:do if((C|0)==4){if(T=(Ri(m,A)|0)!=0,((T?4:5)|0)<(y|0)||Ad(m,A,ke)|0||(C=(g[ke>>2]|0)+y|0,T?T=22288+(((C|0)%5|0)<<2)|0:T=22320+(((C|0)%6|0)<<2)|0,Ee=g[T>>2]|0,(Ee|0)==7))return S=1,oe=Ge,S|0;g[Je>>2]=0,T=lr(m,A,Ee,Je,Ae)|0;do if(!T){if(N=Ae,V=g[N>>2]|0,N=g[N+4>>2]|0,P=N>>>0<A>>>0|(N|0)==(A|0)&V>>>0<m>>>0,C=P?V:m,P=P?N:A,!ue&&(ue=Tt(7,0,(J^15)*3|0)|0,(V&ue|0)==0&(N&(se()|0)|0)==0))T=y;else{if(N=(y+-1+z|0)%(z|0)|0,T=Ri(m,A)|0,(N|0)<0&&lt(23313,23315,245,23324),z=(T|0)!=0,((z?4:5)|0)<(N|0)&&lt(23313,23315,245,23324),Ad(m,A,ke)|0&&lt(23313,23315,245,23324),T=(g[ke>>2]|0)+N|0,z?T=22288+(((T|0)%5|0)<<2)|0:T=22320+(((T|0)%6|0)<<2)|0,N=g[T>>2]|0,(N|0)==7&&lt(23313,23315,245,23324),g[_e>>2]=0,T=lr(m,A,N,_e,me)|0,T|0)break;V=me,z=g[V>>2]|0,V=g[V+4>>2]|0;do if(V>>>0<P>>>0|(V|0)==(P|0)&z>>>0<C>>>0){if(Ri(z,V)|0?C=nd(z,V,m,A)|0:C=g[22384+((((g[_e>>2]|0)+(g[22352+(N<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,T=Ri(z,V)|0,(C+-1|0)>>>0>5){T=-1,C=z,P=V;break}if(T=(T|0)!=0,(C|0)==1&T){T=-1,C=z,P=V;break}do if(Ad(z,V,ke)|0)T=-1;else if(T){T=((g[21936+(C<<2)>>2]|0)+5-(g[ke>>2]|0)|0)%5|0;break}else{T=((g[21968+(C<<2)>>2]|0)+6-(g[ke>>2]|0)|0)%6|0;break}while(!1);C=z,P=V}else T=y;while(!1);N=Ae,V=g[N>>2]|0,N=g[N+4>>2]|0}if((C|0)==(V|0)&(P|0)==(N|0)){if(z=(Ri(V,N)|0)!=0,z?m=nd(V,N,m,A)|0:m=g[22384+((((g[Je>>2]|0)+(g[22352+(Ee<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,T=Ri(V,N)|0,(m+-1|0)>>>0<=5&&(be=(T|0)!=0,!((m|0)==1&be)))do if(Ad(V,N,ke)|0)T=-1;else if(be){T=((g[21936+(m<<2)>>2]|0)+5-(g[ke>>2]|0)|0)%5|0;break}else{T=((g[21968+(m<<2)>>2]|0)+6-(g[ke>>2]|0)|0)%6|0;break}while(!1);else T=-1;T=T+1|0,T=(T|0)==6|z&(T|0)==5?0:T}A=P,m=C;break e}while(!1);return S=T,oe=Ge,S|0}while(!1);return be=Tt(T|0,0,56)|0,ke=se()|0|A&-2130706433|536870912,g[S>>2]=be|m,g[S+4>>2]=ke,S=0,oe=Ge,S|0}function cw(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0;return C=(Ri(m,A)|0)==0,S=Zo(m,A,0,y)|0,T=(S|0)==0,C?!T||(S=Zo(m,A,1,y+8|0)|0,S|0)||(S=Zo(m,A,2,y+16|0)|0,S|0)||(S=Zo(m,A,3,y+24|0)|0,S|0)||(S=Zo(m,A,4,y+32|0)|0,S)?(C=S,C|0):Zo(m,A,5,y+40|0)|0:!T||(S=Zo(m,A,1,y+8|0)|0,S|0)||(S=Zo(m,A,2,y+16|0)|0,S|0)||(S=Zo(m,A,3,y+24|0)|0,S|0)||(S=Zo(m,A,4,y+32|0)|0,S|0)?(C=S,C|0):(C=y+40|0,g[C>>2]=0,g[C+4>>2]=0,C=0,C|0)}function Lm(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0,N=0,z=0;return z=oe,oe=oe+192|0,T=z,C=z+168|0,P=ht(m|0,A|0,56)|0,se()|0,P=P&7,N=A&-2130706433|134217728,S=Bh(m,N,C)|0,S|0?(N=S,oe=z,N|0):(A=ht(m|0,A|0,52)|0,se()|0,A=A&15,Ri(m,N)|0?Lc(C,A,P,1,T):vo(C,A,P,1,T),N=T+8|0,g[y>>2]=g[N>>2],g[y+4>>2]=g[N+4>>2],g[y+8>>2]=g[N+8>>2],g[y+12>>2]=g[N+12>>2],N=0,oe=z,N|0)}function b5(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0;return T=oe,oe=oe+16|0,y=T,!(!0&(A&2013265920|0)==536870912)||(S=A&-2130706433|134217728,!(fl(m,S)|0))?(S=0,oe=T,S|0):(C=ht(m|0,A|0,56)|0,se()|0,C=(Zo(m,S,C&7,y)|0)==0,S=y,S=C&((g[S>>2]|0)==(m|0)?(g[S+4>>2]|0)==(A|0):0)&1,oe=T,S|0)}function hw(m,A,y){m=m|0,A=A|0,y=y|0;var S=0;(A|0)>0?(S=xo(A,4)|0,g[m>>2]=S,S||lt(23337,23360,40,23374)):g[m>>2]=0,g[m+4>>2]=A,g[m+8>>2]=0,g[m+12>>2]=y}function fw(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0;T=m+4|0,C=m+12|0,P=m+8|0;e:for(;;){for(y=g[T>>2]|0,A=0;;){if((A|0)>=(y|0))break e;if(S=g[m>>2]|0,N=g[S+(A<<2)>>2]|0,!N)A=A+1|0;else break}A=S+(~~(+re(+(+qe(10,+ +(15-(g[C>>2]|0)|0))*(+le[N>>3]+ +le[N+8>>3])))%+(y|0))>>>0<<2)|0,y=g[A>>2]|0;t:do if(y|0){if(S=N+32|0,(y|0)==(N|0))g[A>>2]=g[S>>2];else{if(y=y+32|0,A=g[y>>2]|0,!A)break;for(;(A|0)!=(N|0);)if(y=A+32|0,A=g[y>>2]|0,!A)break t;g[y>>2]=g[S>>2]}gn(N),g[P>>2]=(g[P>>2]|0)+-1}while(!1)}gn(g[m>>2]|0)}function Om(m){m=m|0;var A=0,y=0,S=0;for(S=g[m+4>>2]|0,y=0;;){if((y|0)>=(S|0)){A=0,y=4;break}if(A=g[(g[m>>2]|0)+(y<<2)>>2]|0,!A)y=y+1|0;else{y=4;break}}return(y|0)==4?A|0:0}function Fm(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0;if(y=~~(+re(+(+qe(10,+ +(15-(g[m+12>>2]|0)|0))*(+le[A>>3]+ +le[A+8>>3])))%+(g[m+4>>2]|0))>>>0,y=(g[m>>2]|0)+(y<<2)|0,S=g[y>>2]|0,!S)return C=1,C|0;C=A+32|0;do if((S|0)!=(A|0)){if(y=g[S+32>>2]|0,!y)return C=1,C|0;for(T=y;;){if((T|0)==(A|0)){T=8;break}if(y=g[T+32>>2]|0,y)S=T,T=y;else{y=1,T=10;break}}if((T|0)==8){g[S+32>>2]=g[C>>2];break}else if((T|0)==10)return y|0}else g[y>>2]=g[C>>2];while(!1);return gn(A),C=m+8|0,g[C>>2]=(g[C>>2]|0)+-1,C=0,C|0}function w5(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0;C=jr(40)|0,C||lt(23390,23360,98,23403),g[C>>2]=g[A>>2],g[C+4>>2]=g[A+4>>2],g[C+8>>2]=g[A+8>>2],g[C+12>>2]=g[A+12>>2],T=C+16|0,g[T>>2]=g[y>>2],g[T+4>>2]=g[y+4>>2],g[T+8>>2]=g[y+8>>2],g[T+12>>2]=g[y+12>>2],g[C+32>>2]=0,T=~~(+re(+(+qe(10,+ +(15-(g[m+12>>2]|0)|0))*(+le[A>>3]+ +le[A+8>>3])))%+(g[m+4>>2]|0))>>>0,T=(g[m>>2]|0)+(T<<2)|0,S=g[T>>2]|0;do if(!S)g[T>>2]=C;else{for(;!(Oc(S,A)|0&&Oc(S+16|0,y)|0);)if(T=g[S+32>>2]|0,S=T|0?T:S,!(g[S+32>>2]|0)){P=10;break}if((P|0)==10){g[S+32>>2]=C;break}return gn(C),P=S,P|0}while(!1);return P=m+8|0,g[P>>2]=(g[P>>2]|0)+1,P=C,P|0}function dw(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0;if(T=~~(+re(+(+qe(10,+ +(15-(g[m+12>>2]|0)|0))*(+le[A>>3]+ +le[A+8>>3])))%+(g[m+4>>2]|0))>>>0,T=g[(g[m>>2]|0)+(T<<2)>>2]|0,!T)return y=0,y|0;if(!y){for(m=T;;){if(Oc(m,A)|0){S=10;break}if(m=g[m+32>>2]|0,!m){m=0,S=10;break}}if((S|0)==10)return m|0}for(m=T;;){if(Oc(m,A)|0&&Oc(m+16|0,y)|0){S=10;break}if(m=g[m+32>>2]|0,!m){m=0,S=10;break}}return(S|0)==10?m|0:0}function pw(m,A){m=m|0,A=A|0;var y=0;if(y=~~(+re(+(+qe(10,+ +(15-(g[m+12>>2]|0)|0))*(+le[A>>3]+ +le[A+8>>3])))%+(g[m+4>>2]|0))>>>0,m=g[(g[m>>2]|0)+(y<<2)>>2]|0,!m)return y=0,y|0;for(;;){if(Oc(m,A)|0){A=5;break}if(m=g[m+32>>2]|0,!m){m=0,A=5;break}}return(A|0)==5?m|0:0}function Aw(){return 23424}function mw(m){return m=+m,+ +Gm(+m)}function ju(m){return m=+m,~~+mw(m)|0}function jr(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0,Ee=0,Je=0,be=0,ke=0,Ge=0,Re=0,Lt=0;Lt=oe,oe=oe+16|0,me=Lt;do if(m>>>0<245){if(V=m>>>0<11?16:m+11&-8,m=V>>>3,ue=g[5857]|0,y=ue>>>m,y&3|0)return A=(y&1^1)+m|0,m=23468+(A<<1<<2)|0,y=m+8|0,S=g[y>>2]|0,T=S+8|0,C=g[T>>2]|0,(C|0)==(m|0)?g[5857]=ue&~(1<<A):(g[C+12>>2]=m,g[y>>2]=C),Re=A<<3,g[S+4>>2]=Re|3,Re=S+Re+4|0,g[Re>>2]=g[Re>>2]|1,Re=T,oe=Lt,Re|0;if(J=g[5859]|0,V>>>0>J>>>0){if(y|0)return A=2<<m,A=y<<m&(A|0-A),A=(A&0-A)+-1|0,N=A>>>12&16,A=A>>>N,y=A>>>5&8,A=A>>>y,C=A>>>2&4,A=A>>>C,m=A>>>1&2,A=A>>>m,S=A>>>1&1,S=(y|N|C|m|S)+(A>>>S)|0,A=23468+(S<<1<<2)|0,m=A+8|0,C=g[m>>2]|0,N=C+8|0,y=g[N>>2]|0,(y|0)==(A|0)?(m=ue&~(1<<S),g[5857]=m):(g[y+12>>2]=A,g[m>>2]=y,m=ue),Re=S<<3,P=Re-V|0,g[C+4>>2]=V|3,T=C+V|0,g[T+4>>2]=P|1,g[C+Re>>2]=P,J|0&&(S=g[5862]|0,A=J>>>3,y=23468+(A<<1<<2)|0,A=1<<A,m&A?(m=y+8|0,A=g[m>>2]|0):(g[5857]=m|A,A=y,m=y+8|0),g[m>>2]=S,g[A+12>>2]=S,g[S+8>>2]=A,g[S+12>>2]=y),g[5859]=P,g[5862]=T,Re=N,oe=Lt,Re|0;if(C=g[5858]|0,C){for(y=(C&0-C)+-1|0,T=y>>>12&16,y=y>>>T,S=y>>>5&8,y=y>>>S,P=y>>>2&4,y=y>>>P,N=y>>>1&2,y=y>>>N,z=y>>>1&1,z=g[23732+((S|T|P|N|z)+(y>>>z)<<2)>>2]|0,y=z,N=z,z=(g[z+4>>2]&-8)-V|0;m=g[y+16>>2]|0,!(!m&&(m=g[y+20>>2]|0,!m));)P=(g[m+4>>2]&-8)-V|0,T=P>>>0<z>>>0,y=m,N=T?m:N,z=T?P:z;if(P=N+V|0,P>>>0>N>>>0){T=g[N+24>>2]|0,A=g[N+12>>2]|0;do if((A|0)==(N|0)){if(m=N+20|0,A=g[m>>2]|0,!A&&(m=N+16|0,A=g[m>>2]|0,!A)){y=0;break}for(;;)if(S=A+20|0,y=g[S>>2]|0,y)A=y,m=S;else if(S=A+16|0,y=g[S>>2]|0,y)A=y,m=S;else break;g[m>>2]=0,y=A}else y=g[N+8>>2]|0,g[y+12>>2]=A,g[A+8>>2]=y,y=A;while(!1);do if(T|0){if(A=g[N+28>>2]|0,m=23732+(A<<2)|0,(N|0)==(g[m>>2]|0)){if(g[m>>2]=y,!y){g[5858]=C&~(1<<A);break}}else if(Re=T+16|0,g[((g[Re>>2]|0)==(N|0)?Re:T+20|0)>>2]=y,!y)break;g[y+24>>2]=T,A=g[N+16>>2]|0,A|0&&(g[y+16>>2]=A,g[A+24>>2]=y),A=g[N+20>>2]|0,A|0&&(g[y+20>>2]=A,g[A+24>>2]=y)}while(!1);return z>>>0<16?(Re=z+V|0,g[N+4>>2]=Re|3,Re=N+Re+4|0,g[Re>>2]=g[Re>>2]|1):(g[N+4>>2]=V|3,g[P+4>>2]=z|1,g[P+z>>2]=z,J|0&&(S=g[5862]|0,A=J>>>3,y=23468+(A<<1<<2)|0,A=1<<A,A&ue?(m=y+8|0,A=g[m>>2]|0):(g[5857]=A|ue,A=y,m=y+8|0),g[m>>2]=S,g[A+12>>2]=S,g[S+8>>2]=A,g[S+12>>2]=y),g[5859]=z,g[5862]=P),Re=N+8|0,oe=Lt,Re|0}else ue=V}else ue=V}else ue=V}else if(m>>>0<=4294967231)if(m=m+11|0,V=m&-8,S=g[5858]|0,S){T=0-V|0,m=m>>>8,m?V>>>0>16777215?z=31:(ue=(m+1048320|0)>>>16&8,Ee=m<<ue,N=(Ee+520192|0)>>>16&4,Ee=Ee<<N,z=(Ee+245760|0)>>>16&2,z=14-(N|ue|z)+(Ee<<z>>>15)|0,z=V>>>(z+7|0)&1|z<<1):z=0,y=g[23732+(z<<2)>>2]|0;e:do if(!y)y=0,m=0,Ee=61;else for(m=0,N=V<<((z|0)==31?0:25-(z>>>1)|0),C=0;;){if(P=(g[y+4>>2]&-8)-V|0,P>>>0<T>>>0)if(P)m=y,T=P;else{m=y,T=0,Ee=65;break e}if(Ee=g[y+20>>2]|0,y=g[y+16+(N>>>31<<2)>>2]|0,C=(Ee|0)==0|(Ee|0)==(y|0)?C:Ee,y)N=N<<1;else{y=C,Ee=61;break}}while(!1);if((Ee|0)==61){if((y|0)==0&(m|0)==0){if(m=2<<z,m=(m|0-m)&S,!m){ue=V;break}ue=(m&0-m)+-1|0,P=ue>>>12&16,ue=ue>>>P,C=ue>>>5&8,ue=ue>>>C,N=ue>>>2&4,ue=ue>>>N,z=ue>>>1&2,ue=ue>>>z,y=ue>>>1&1,m=0,y=g[23732+((C|P|N|z|y)+(ue>>>y)<<2)>>2]|0}y?Ee=65:(N=m,P=T)}if((Ee|0)==65)for(C=y;;)if(ue=(g[C+4>>2]&-8)-V|0,y=ue>>>0<T>>>0,T=y?ue:T,m=y?C:m,y=g[C+16>>2]|0,y||(y=g[C+20>>2]|0),y)C=y;else{N=m,P=T;break}if(N|0&&P>>>0<((g[5859]|0)-V|0)>>>0&&(J=N+V|0,J>>>0>N>>>0)){C=g[N+24>>2]|0,A=g[N+12>>2]|0;do if((A|0)==(N|0)){if(m=N+20|0,A=g[m>>2]|0,!A&&(m=N+16|0,A=g[m>>2]|0,!A)){A=0;break}for(;;)if(T=A+20|0,y=g[T>>2]|0,y)A=y,m=T;else if(T=A+16|0,y=g[T>>2]|0,y)A=y,m=T;else break;g[m>>2]=0}else Re=g[N+8>>2]|0,g[Re+12>>2]=A,g[A+8>>2]=Re;while(!1);do if(C){if(m=g[N+28>>2]|0,y=23732+(m<<2)|0,(N|0)==(g[y>>2]|0)){if(g[y>>2]=A,!A){S=S&~(1<<m),g[5858]=S;break}}else if(Re=C+16|0,g[((g[Re>>2]|0)==(N|0)?Re:C+20|0)>>2]=A,!A)break;g[A+24>>2]=C,m=g[N+16>>2]|0,m|0&&(g[A+16>>2]=m,g[m+24>>2]=A),m=g[N+20>>2]|0,m&&(g[A+20>>2]=m,g[m+24>>2]=A)}while(!1);e:do if(P>>>0<16)Re=P+V|0,g[N+4>>2]=Re|3,Re=N+Re+4|0,g[Re>>2]=g[Re>>2]|1;else{if(g[N+4>>2]=V|3,g[J+4>>2]=P|1,g[J+P>>2]=P,A=P>>>3,P>>>0<256){y=23468+(A<<1<<2)|0,m=g[5857]|0,A=1<<A,m&A?(m=y+8|0,A=g[m>>2]|0):(g[5857]=m|A,A=y,m=y+8|0),g[m>>2]=J,g[A+12>>2]=J,g[J+8>>2]=A,g[J+12>>2]=y;break}if(A=P>>>8,A?P>>>0>16777215?y=31:(Ge=(A+1048320|0)>>>16&8,Re=A<<Ge,ke=(Re+520192|0)>>>16&4,Re=Re<<ke,y=(Re+245760|0)>>>16&2,y=14-(ke|Ge|y)+(Re<<y>>>15)|0,y=P>>>(y+7|0)&1|y<<1):y=0,A=23732+(y<<2)|0,g[J+28>>2]=y,m=J+16|0,g[m+4>>2]=0,g[m>>2]=0,m=1<<y,!(S&m)){g[5858]=S|m,g[A>>2]=J,g[J+24>>2]=A,g[J+12>>2]=J,g[J+8>>2]=J;break}A=g[A>>2]|0;t:do if((g[A+4>>2]&-8|0)!=(P|0)){for(S=P<<((y|0)==31?0:25-(y>>>1)|0);y=A+16+(S>>>31<<2)|0,m=g[y>>2]|0,!!m;)if((g[m+4>>2]&-8|0)==(P|0)){A=m;break t}else S=S<<1,A=m;g[y>>2]=J,g[J+24>>2]=A,g[J+12>>2]=J,g[J+8>>2]=J;break e}while(!1);Ge=A+8|0,Re=g[Ge>>2]|0,g[Re+12>>2]=J,g[Ge>>2]=J,g[J+8>>2]=Re,g[J+12>>2]=A,g[J+24>>2]=0}while(!1);return Re=N+8|0,oe=Lt,Re|0}else ue=V}else ue=V;else ue=-1;while(!1);if(y=g[5859]|0,y>>>0>=ue>>>0)return A=y-ue|0,m=g[5862]|0,A>>>0>15?(Re=m+ue|0,g[5862]=Re,g[5859]=A,g[Re+4>>2]=A|1,g[m+y>>2]=A,g[m+4>>2]=ue|3):(g[5859]=0,g[5862]=0,g[m+4>>2]=y|3,Re=m+y+4|0,g[Re>>2]=g[Re>>2]|1),Re=m+8|0,oe=Lt,Re|0;if(P=g[5860]|0,P>>>0>ue>>>0)return ke=P-ue|0,g[5860]=ke,Re=g[5863]|0,Ge=Re+ue|0,g[5863]=Ge,g[Ge+4>>2]=ke|1,g[Re+4>>2]=ue|3,Re=Re+8|0,oe=Lt,Re|0;if(g[5975]|0?m=g[5977]|0:(g[5977]=4096,g[5976]=4096,g[5978]=-1,g[5979]=-1,g[5980]=0,g[5968]=0,g[5975]=me&-16^1431655768,m=4096),N=ue+48|0,z=ue+47|0,C=m+z|0,T=0-m|0,V=C&T,V>>>0<=ue>>>0||(m=g[5967]|0,m|0&&(J=g[5965]|0,me=J+V|0,me>>>0<=J>>>0|me>>>0>m>>>0)))return Re=0,oe=Lt,Re|0;e:do if(g[5968]&4)A=0,Ee=143;else{y=g[5863]|0;t:do if(y){for(S=23876;me=g[S>>2]|0,!(me>>>0<=y>>>0&&(me+(g[S+4>>2]|0)|0)>>>0>y>>>0);)if(m=g[S+8>>2]|0,m)S=m;else{Ee=128;break t}if(A=C-P&T,A>>>0<2147483647)if(m=$u(A|0)|0,(m|0)==((g[S>>2]|0)+(g[S+4>>2]|0)|0)){if((m|0)!=-1){P=A,C=m,Ee=145;break e}}else S=m,Ee=136;else A=0}else Ee=128;while(!1);do if((Ee|0)==128)if(y=$u(0)|0,(y|0)!=-1&&(A=y,_e=g[5976]|0,Ae=_e+-1|0,A=(Ae&A|0?(Ae+A&0-_e)-A|0:0)+V|0,_e=g[5965]|0,Ae=A+_e|0,A>>>0>ue>>>0&A>>>0<2147483647)){if(me=g[5967]|0,me|0&&Ae>>>0<=_e>>>0|Ae>>>0>me>>>0){A=0;break}if(m=$u(A|0)|0,(m|0)==(y|0)){P=A,C=y,Ee=145;break e}else S=m,Ee=136}else A=0;while(!1);do if((Ee|0)==136){if(y=0-A|0,!(N>>>0>A>>>0&(A>>>0<2147483647&(S|0)!=-1)))if((S|0)==-1){A=0;break}else{P=A,C=S,Ee=145;break e}if(m=g[5977]|0,m=z-A+m&0-m,m>>>0>=2147483647){P=A,C=S,Ee=145;break e}if(($u(m|0)|0)==-1){$u(y|0)|0,A=0;break}else{P=m+A|0,C=S,Ee=145;break e}}while(!1);g[5968]=g[5968]|4,Ee=143}while(!1);if((Ee|0)==143&&V>>>0<2147483647&&(ke=$u(V|0)|0,Ae=$u(0)|0,Je=Ae-ke|0,be=Je>>>0>(ue+40|0)>>>0,!((ke|0)==-1|be^1|ke>>>0<Ae>>>0&((ke|0)!=-1&(Ae|0)!=-1)^1))&&(P=be?Je:A,C=ke,Ee=145),(Ee|0)==145){A=(g[5965]|0)+P|0,g[5965]=A,A>>>0>(g[5966]|0)>>>0&&(g[5966]=A),z=g[5863]|0;e:do if(z){for(A=23876;;){if(m=g[A>>2]|0,y=g[A+4>>2]|0,(C|0)==(m+y|0)){Ee=154;break}if(S=g[A+8>>2]|0,S)A=S;else break}if((Ee|0)==154&&(Ge=A+4|0,(g[A+12>>2]&8|0)==0)&&C>>>0>z>>>0&m>>>0<=z>>>0){g[Ge>>2]=y+P,Re=(g[5860]|0)+P|0,ke=z+8|0,ke=ke&7|0?0-ke&7:0,Ge=z+ke|0,ke=Re-ke|0,g[5863]=Ge,g[5860]=ke,g[Ge+4>>2]=ke|1,g[z+Re+4>>2]=40,g[5864]=g[5979];break}for(C>>>0<(g[5861]|0)>>>0&&(g[5861]=C),y=C+P|0,A=23876;;){if((g[A>>2]|0)==(y|0)){Ee=162;break}if(m=g[A+8>>2]|0,m)A=m;else break}if((Ee|0)==162&&!(g[A+12>>2]&8|0)){g[A>>2]=C,J=A+4|0,g[J>>2]=(g[J>>2]|0)+P,J=C+8|0,J=C+(J&7|0?0-J&7:0)|0,A=y+8|0,A=y+(A&7|0?0-A&7:0)|0,V=J+ue|0,N=A-J-ue|0,g[J+4>>2]=ue|3;t:do if((z|0)==(A|0))Re=(g[5860]|0)+N|0,g[5860]=Re,g[5863]=V,g[V+4>>2]=Re|1;else{if((g[5862]|0)==(A|0)){Re=(g[5859]|0)+N|0,g[5859]=Re,g[5862]=V,g[V+4>>2]=Re|1,g[V+Re>>2]=Re;break}if(m=g[A+4>>2]|0,(m&3|0)==1){P=m&-8,S=m>>>3;n:do if(m>>>0<256)if(m=g[A+8>>2]|0,y=g[A+12>>2]|0,(y|0)==(m|0)){g[5857]=g[5857]&~(1<<S);break}else{g[m+12>>2]=y,g[y+8>>2]=m;break}else{C=g[A+24>>2]|0,m=g[A+12>>2]|0;do if((m|0)==(A|0)){if(y=A+16|0,S=y+4|0,m=g[S>>2]|0,m)y=S;else if(m=g[y>>2]|0,!m){m=0;break}for(;;)if(T=m+20|0,S=g[T>>2]|0,S)m=S,y=T;else if(T=m+16|0,S=g[T>>2]|0,S)m=S,y=T;else break;g[y>>2]=0}else Re=g[A+8>>2]|0,g[Re+12>>2]=m,g[m+8>>2]=Re;while(!1);if(!C)break;y=g[A+28>>2]|0,S=23732+(y<<2)|0;do if((g[S>>2]|0)!=(A|0)){if(Re=C+16|0,g[((g[Re>>2]|0)==(A|0)?Re:C+20|0)>>2]=m,!m)break n}else{if(g[S>>2]=m,m|0)break;g[5858]=g[5858]&~(1<<y);break n}while(!1);if(g[m+24>>2]=C,y=A+16|0,S=g[y>>2]|0,S|0&&(g[m+16>>2]=S,g[S+24>>2]=m),y=g[y+4>>2]|0,!y)break;g[m+20>>2]=y,g[y+24>>2]=m}while(!1);A=A+P|0,T=P+N|0}else T=N;if(A=A+4|0,g[A>>2]=g[A>>2]&-2,g[V+4>>2]=T|1,g[V+T>>2]=T,A=T>>>3,T>>>0<256){y=23468+(A<<1<<2)|0,m=g[5857]|0,A=1<<A,m&A?(m=y+8|0,A=g[m>>2]|0):(g[5857]=m|A,A=y,m=y+8|0),g[m>>2]=V,g[A+12>>2]=V,g[V+8>>2]=A,g[V+12>>2]=y;break}A=T>>>8;do if(!A)S=0;else{if(T>>>0>16777215){S=31;break}Ge=(A+1048320|0)>>>16&8,Re=A<<Ge,ke=(Re+520192|0)>>>16&4,Re=Re<<ke,S=(Re+245760|0)>>>16&2,S=14-(ke|Ge|S)+(Re<<S>>>15)|0,S=T>>>(S+7|0)&1|S<<1}while(!1);if(A=23732+(S<<2)|0,g[V+28>>2]=S,m=V+16|0,g[m+4>>2]=0,g[m>>2]=0,m=g[5858]|0,y=1<<S,!(m&y)){g[5858]=m|y,g[A>>2]=V,g[V+24>>2]=A,g[V+12>>2]=V,g[V+8>>2]=V;break}A=g[A>>2]|0;n:do if((g[A+4>>2]&-8|0)!=(T|0)){for(S=T<<((S|0)==31?0:25-(S>>>1)|0);y=A+16+(S>>>31<<2)|0,m=g[y>>2]|0,!!m;)if((g[m+4>>2]&-8|0)==(T|0)){A=m;break n}else S=S<<1,A=m;g[y>>2]=V,g[V+24>>2]=A,g[V+12>>2]=V,g[V+8>>2]=V;break t}while(!1);Ge=A+8|0,Re=g[Ge>>2]|0,g[Re+12>>2]=V,g[Ge>>2]=V,g[V+8>>2]=Re,g[V+12>>2]=A,g[V+24>>2]=0}while(!1);return Re=J+8|0,oe=Lt,Re|0}for(A=23876;m=g[A>>2]|0,!(m>>>0<=z>>>0&&(Re=m+(g[A+4>>2]|0)|0,Re>>>0>z>>>0));)A=g[A+8>>2]|0;T=Re+-47|0,m=T+8|0,m=T+(m&7|0?0-m&7:0)|0,T=z+16|0,m=m>>>0<T>>>0?z:m,A=m+8|0,y=P+-40|0,ke=C+8|0,ke=ke&7|0?0-ke&7:0,Ge=C+ke|0,ke=y-ke|0,g[5863]=Ge,g[5860]=ke,g[Ge+4>>2]=ke|1,g[C+y+4>>2]=40,g[5864]=g[5979],y=m+4|0,g[y>>2]=27,g[A>>2]=g[5969],g[A+4>>2]=g[5970],g[A+8>>2]=g[5971],g[A+12>>2]=g[5972],g[5969]=C,g[5970]=P,g[5972]=0,g[5971]=A,A=m+24|0;do Ge=A,A=A+4|0,g[A>>2]=7;while((Ge+8|0)>>>0<Re>>>0);if((m|0)!=(z|0)){if(C=m-z|0,g[y>>2]=g[y>>2]&-2,g[z+4>>2]=C|1,g[m>>2]=C,A=C>>>3,C>>>0<256){y=23468+(A<<1<<2)|0,m=g[5857]|0,A=1<<A,m&A?(m=y+8|0,A=g[m>>2]|0):(g[5857]=m|A,A=y,m=y+8|0),g[m>>2]=z,g[A+12>>2]=z,g[z+8>>2]=A,g[z+12>>2]=y;break}if(A=C>>>8,A?C>>>0>16777215?S=31:(Ge=(A+1048320|0)>>>16&8,Re=A<<Ge,ke=(Re+520192|0)>>>16&4,Re=Re<<ke,S=(Re+245760|0)>>>16&2,S=14-(ke|Ge|S)+(Re<<S>>>15)|0,S=C>>>(S+7|0)&1|S<<1):S=0,y=23732+(S<<2)|0,g[z+28>>2]=S,g[z+20>>2]=0,g[T>>2]=0,A=g[5858]|0,m=1<<S,!(A&m)){g[5858]=A|m,g[y>>2]=z,g[z+24>>2]=y,g[z+12>>2]=z,g[z+8>>2]=z;break}A=g[y>>2]|0;t:do if((g[A+4>>2]&-8|0)!=(C|0)){for(S=C<<((S|0)==31?0:25-(S>>>1)|0);y=A+16+(S>>>31<<2)|0,m=g[y>>2]|0,!!m;)if((g[m+4>>2]&-8|0)==(C|0)){A=m;break t}else S=S<<1,A=m;g[y>>2]=z,g[z+24>>2]=A,g[z+12>>2]=z,g[z+8>>2]=z;break e}while(!1);Ge=A+8|0,Re=g[Ge>>2]|0,g[Re+12>>2]=z,g[Ge>>2]=z,g[z+8>>2]=Re,g[z+12>>2]=A,g[z+24>>2]=0}}else Re=g[5861]|0,(Re|0)==0|C>>>0<Re>>>0&&(g[5861]=C),g[5969]=C,g[5970]=P,g[5972]=0,g[5866]=g[5975],g[5865]=-1,g[5870]=23468,g[5869]=23468,g[5872]=23476,g[5871]=23476,g[5874]=23484,g[5873]=23484,g[5876]=23492,g[5875]=23492,g[5878]=23500,g[5877]=23500,g[5880]=23508,g[5879]=23508,g[5882]=23516,g[5881]=23516,g[5884]=23524,g[5883]=23524,g[5886]=23532,g[5885]=23532,g[5888]=23540,g[5887]=23540,g[5890]=23548,g[5889]=23548,g[5892]=23556,g[5891]=23556,g[5894]=23564,g[5893]=23564,g[5896]=23572,g[5895]=23572,g[5898]=23580,g[5897]=23580,g[5900]=23588,g[5899]=23588,g[5902]=23596,g[5901]=23596,g[5904]=23604,g[5903]=23604,g[5906]=23612,g[5905]=23612,g[5908]=23620,g[5907]=23620,g[5910]=23628,g[5909]=23628,g[5912]=23636,g[5911]=23636,g[5914]=23644,g[5913]=23644,g[5916]=23652,g[5915]=23652,g[5918]=23660,g[5917]=23660,g[5920]=23668,g[5919]=23668,g[5922]=23676,g[5921]=23676,g[5924]=23684,g[5923]=23684,g[5926]=23692,g[5925]=23692,g[5928]=23700,g[5927]=23700,g[5930]=23708,g[5929]=23708,g[5932]=23716,g[5931]=23716,Re=P+-40|0,ke=C+8|0,ke=ke&7|0?0-ke&7:0,Ge=C+ke|0,ke=Re-ke|0,g[5863]=Ge,g[5860]=ke,g[Ge+4>>2]=ke|1,g[C+Re+4>>2]=40,g[5864]=g[5979];while(!1);if(A=g[5860]|0,A>>>0>ue>>>0)return ke=A-ue|0,g[5860]=ke,Re=g[5863]|0,Ge=Re+ue|0,g[5863]=Ge,g[Ge+4>>2]=ke|1,g[Re+4>>2]=ue|3,Re=Re+8|0,oe=Lt,Re|0}return Re=Aw()|0,g[Re>>2]=12,Re=0,oe=Lt,Re|0}function gn(m){m=m|0;var A=0,y=0,S=0,T=0,C=0,P=0,N=0,z=0;if(m){y=m+-8|0,T=g[5861]|0,m=g[m+-4>>2]|0,A=m&-8,z=y+A|0;do if(m&1)N=y,P=y;else{if(S=g[y>>2]|0,!(m&3)||(P=y+(0-S)|0,C=S+A|0,P>>>0<T>>>0))return;if((g[5862]|0)==(P|0)){if(m=z+4|0,A=g[m>>2]|0,(A&3|0)!=3){N=P,A=C;break}g[5859]=C,g[m>>2]=A&-2,g[P+4>>2]=C|1,g[P+C>>2]=C;return}if(y=S>>>3,S>>>0<256)if(m=g[P+8>>2]|0,A=g[P+12>>2]|0,(A|0)==(m|0)){g[5857]=g[5857]&~(1<<y),N=P,A=C;break}else{g[m+12>>2]=A,g[A+8>>2]=m,N=P,A=C;break}T=g[P+24>>2]|0,m=g[P+12>>2]|0;do if((m|0)==(P|0)){if(A=P+16|0,y=A+4|0,m=g[y>>2]|0,m)A=y;else if(m=g[A>>2]|0,!m){m=0;break}for(;;)if(S=m+20|0,y=g[S>>2]|0,y)m=y,A=S;else if(S=m+16|0,y=g[S>>2]|0,y)m=y,A=S;else break;g[A>>2]=0}else N=g[P+8>>2]|0,g[N+12>>2]=m,g[m+8>>2]=N;while(!1);if(T){if(A=g[P+28>>2]|0,y=23732+(A<<2)|0,(g[y>>2]|0)==(P|0)){if(g[y>>2]=m,!m){g[5858]=g[5858]&~(1<<A),N=P,A=C;break}}else if(N=T+16|0,g[((g[N>>2]|0)==(P|0)?N:T+20|0)>>2]=m,!m){N=P,A=C;break}g[m+24>>2]=T,A=P+16|0,y=g[A>>2]|0,y|0&&(g[m+16>>2]=y,g[y+24>>2]=m),A=g[A+4>>2]|0,A?(g[m+20>>2]=A,g[A+24>>2]=m,N=P,A=C):(N=P,A=C)}else N=P,A=C}while(!1);if(!(P>>>0>=z>>>0)&&(m=z+4|0,S=g[m>>2]|0,!!(S&1))){if(S&2)g[m>>2]=S&-2,g[N+4>>2]=A|1,g[P+A>>2]=A,T=A;else{if((g[5863]|0)==(z|0)){if(z=(g[5860]|0)+A|0,g[5860]=z,g[5863]=N,g[N+4>>2]=z|1,(N|0)!=(g[5862]|0))return;g[5862]=0,g[5859]=0;return}if((g[5862]|0)==(z|0)){z=(g[5859]|0)+A|0,g[5859]=z,g[5862]=P,g[N+4>>2]=z|1,g[P+z>>2]=z;return}T=(S&-8)+A|0,y=S>>>3;do if(S>>>0<256)if(A=g[z+8>>2]|0,m=g[z+12>>2]|0,(m|0)==(A|0)){g[5857]=g[5857]&~(1<<y);break}else{g[A+12>>2]=m,g[m+8>>2]=A;break}else{C=g[z+24>>2]|0,m=g[z+12>>2]|0;do if((m|0)==(z|0)){if(A=z+16|0,y=A+4|0,m=g[y>>2]|0,m)A=y;else if(m=g[A>>2]|0,!m){y=0;break}for(;;)if(S=m+20|0,y=g[S>>2]|0,y)m=y,A=S;else if(S=m+16|0,y=g[S>>2]|0,y)m=y,A=S;else break;g[A>>2]=0,y=m}else y=g[z+8>>2]|0,g[y+12>>2]=m,g[m+8>>2]=y,y=m;while(!1);if(C|0){if(m=g[z+28>>2]|0,A=23732+(m<<2)|0,(g[A>>2]|0)==(z|0)){if(g[A>>2]=y,!y){g[5858]=g[5858]&~(1<<m);break}}else if(S=C+16|0,g[((g[S>>2]|0)==(z|0)?S:C+20|0)>>2]=y,!y)break;g[y+24>>2]=C,m=z+16|0,A=g[m>>2]|0,A|0&&(g[y+16>>2]=A,g[A+24>>2]=y),m=g[m+4>>2]|0,m|0&&(g[y+20>>2]=m,g[m+24>>2]=y)}}while(!1);if(g[N+4>>2]=T|1,g[P+T>>2]=T,(N|0)==(g[5862]|0)){g[5859]=T;return}}if(m=T>>>3,T>>>0<256){y=23468+(m<<1<<2)|0,A=g[5857]|0,m=1<<m,A&m?(A=y+8|0,m=g[A>>2]|0):(g[5857]=A|m,m=y,A=y+8|0),g[A>>2]=N,g[m+12>>2]=N,g[N+8>>2]=m,g[N+12>>2]=y;return}m=T>>>8,m?T>>>0>16777215?S=31:(P=(m+1048320|0)>>>16&8,z=m<<P,C=(z+520192|0)>>>16&4,z=z<<C,S=(z+245760|0)>>>16&2,S=14-(C|P|S)+(z<<S>>>15)|0,S=T>>>(S+7|0)&1|S<<1):S=0,m=23732+(S<<2)|0,g[N+28>>2]=S,g[N+20>>2]=0,g[N+16>>2]=0,A=g[5858]|0,y=1<<S;e:do if(!(A&y))g[5858]=A|y,g[m>>2]=N,g[N+24>>2]=m,g[N+12>>2]=N,g[N+8>>2]=N;else{m=g[m>>2]|0;t:do if((g[m+4>>2]&-8|0)!=(T|0)){for(S=T<<((S|0)==31?0:25-(S>>>1)|0);y=m+16+(S>>>31<<2)|0,A=g[y>>2]|0,!!A;)if((g[A+4>>2]&-8|0)==(T|0)){m=A;break t}else S=S<<1,m=A;g[y>>2]=N,g[N+24>>2]=m,g[N+12>>2]=N,g[N+8>>2]=N;break e}while(!1);P=m+8|0,z=g[P>>2]|0,g[z+12>>2]=N,g[P>>2]=N,g[N+8>>2]=z,g[N+12>>2]=m,g[N+24>>2]=0}while(!1);if(z=(g[5865]|0)+-1|0,g[5865]=z,!(z|0)){for(m=23884;m=g[m>>2]|0,m;)m=m+8|0;g[5865]=-1}}}}function xo(m,A){m=m|0,A=A|0;var y=0;return m?(y=Kt(A,m)|0,(A|m)>>>0>65535&&(y=((y>>>0)/(m>>>0)|0|0)==(A|0)?y:-1)):y=0,m=jr(y)|0,!m||!(g[m+-4>>2]&3)||kc(m|0,0,y|0)|0,m|0}function Pn(m,A,y,S){return m=m|0,A=A|0,y=y|0,S=S|0,y=m+y>>>0,Dt(A+S+(y>>>0<m>>>0|0)>>>0|0),y|0|0}function $r(m,A,y,S){return m=m|0,A=A|0,y=y|0,S=S|0,S=A-S-(y>>>0>m>>>0|0)>>>0,Dt(S|0),m-y>>>0|0|0}function mA(m){return m=m|0,(m?31-(Xn(m^m-1)|0)|0:32)|0}function km(m,A,y,S,T){m=m|0,A=A|0,y=y|0,S=S|0,T=T|0;var C=0,P=0,N=0,z=0,V=0,J=0,ue=0,me=0,_e=0,Ae=0;if(J=m,z=A,V=z,P=y,me=S,N=me,!V)return C=(T|0)!=0,N?C?(g[T>>2]=m|0,g[T+4>>2]=A&0,me=0,T=0,Dt(me|0),T|0):(me=0,T=0,Dt(me|0),T|0):(C&&(g[T>>2]=(J>>>0)%(P>>>0),g[T+4>>2]=0),me=0,T=(J>>>0)/(P>>>0)>>>0,Dt(me|0),T|0);C=(N|0)==0;do if(P){if(!C){if(C=(Xn(N|0)|0)-(Xn(V|0)|0)|0,C>>>0<=31){ue=C+1|0,N=31-C|0,A=C-31>>31,P=ue,m=J>>>(ue>>>0)&A|V<<N,A=V>>>(ue>>>0)&A,C=0,N=J<<N;break}return T?(g[T>>2]=m|0,g[T+4>>2]=z|A&0,me=0,T=0,Dt(me|0),T|0):(me=0,T=0,Dt(me|0),T|0)}if(C=P-1|0,C&P|0){N=(Xn(P|0)|0)+33-(Xn(V|0)|0)|0,Ae=64-N|0,ue=32-N|0,z=ue>>31,_e=N-32|0,A=_e>>31,P=N,m=ue-1>>31&V>>>(_e>>>0)|(V<<ue|J>>>(N>>>0))&A,A=A&V>>>(N>>>0),C=J<<Ae&z,N=(V<<Ae|J>>>(_e>>>0))&z|J<<ue&N-33>>31;break}return T|0&&(g[T>>2]=C&J,g[T+4>>2]=0),(P|0)==1?(_e=z|A&0,Ae=m|0|0,Dt(_e|0),Ae|0):(Ae=mA(P|0)|0,_e=V>>>(Ae>>>0)|0,Ae=V<<32-Ae|J>>>(Ae>>>0)|0,Dt(_e|0),Ae|0)}else{if(C)return T|0&&(g[T>>2]=(V>>>0)%(P>>>0),g[T+4>>2]=0),_e=0,Ae=(V>>>0)/(P>>>0)>>>0,Dt(_e|0),Ae|0;if(!J)return T|0&&(g[T>>2]=0,g[T+4>>2]=(V>>>0)%(N>>>0)),_e=0,Ae=(V>>>0)/(N>>>0)>>>0,Dt(_e|0),Ae|0;if(C=N-1|0,!(C&N))return T|0&&(g[T>>2]=m|0,g[T+4>>2]=C&V|A&0),_e=0,Ae=V>>>((mA(N|0)|0)>>>0),Dt(_e|0),Ae|0;if(C=(Xn(N|0)|0)-(Xn(V|0)|0)|0,C>>>0<=30){A=C+1|0,N=31-C|0,P=A,m=V<<N|J>>>(A>>>0),A=V>>>(A>>>0),C=0,N=J<<N;break}return T?(g[T>>2]=m|0,g[T+4>>2]=z|A&0,_e=0,Ae=0,Dt(_e|0),Ae|0):(_e=0,Ae=0,Dt(_e|0),Ae|0)}while(!1);if(!P)V=N,z=0,N=0;else{ue=y|0|0,J=me|S&0,V=Pn(ue|0,J|0,-1,-1)|0,y=se()|0,z=N,N=0;do S=z,z=C>>>31|z<<1,C=N|C<<1,S=m<<1|S>>>31|0,me=m>>>31|A<<1|0,$r(V|0,y|0,S|0,me|0)|0,Ae=se()|0,_e=Ae>>31|((Ae|0)<0?-1:0)<<1,N=_e&1,m=$r(S|0,me|0,_e&ue|0,(((Ae|0)<0?-1:0)>>31|((Ae|0)<0?-1:0)<<1)&J|0)|0,A=se()|0,P=P-1|0;while(P|0);V=z,z=0}return P=0,T|0&&(g[T>>2]=m,g[T+4>>2]=A),_e=(C|0)>>>31|(V|P)<<1|(P<<1|C>>>31)&0|z,Ae=(C<<1|0)&-2|N,Dt(_e|0),Ae|0}function Al(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0,V=0;return V=A>>31|((A|0)<0?-1:0)<<1,z=((A|0)<0?-1:0)>>31|((A|0)<0?-1:0)<<1,C=S>>31|((S|0)<0?-1:0)<<1,T=((S|0)<0?-1:0)>>31|((S|0)<0?-1:0)<<1,N=$r(V^m|0,z^A|0,V|0,z|0)|0,P=se()|0,m=C^V,A=T^z,$r((km(N,P,$r(C^y|0,T^S|0,C|0,T|0)|0,se()|0,0)|0)^m|0,(se()|0)^A|0,m|0,A|0)|0}function Ds(m,A){m=m|0,A=A|0;var y=0,S=0,T=0,C=0;return C=m&65535,T=A&65535,y=Kt(T,C)|0,S=m>>>16,m=(y>>>16)+(Kt(T,S)|0)|0,T=A>>>16,A=Kt(T,C)|0,Dt((m>>>16)+(Kt(T,S)|0)+(((m&65535)+A|0)>>>16)|0),m+A<<16|y&65535|0|0}function Ls(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0;return T=m,C=y,y=Ds(T,C)|0,m=se()|0,Dt((Kt(A,C)|0)+(Kt(S,T)|0)+m|m&0|0),y|0|0|0}function Um(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0,P=0,N=0,z=0,V=0;return T=oe,oe=oe+16|0,N=T|0,P=A>>31|((A|0)<0?-1:0)<<1,C=((A|0)<0?-1:0)>>31|((A|0)<0?-1:0)<<1,V=S>>31|((S|0)<0?-1:0)<<1,z=((S|0)<0?-1:0)>>31|((S|0)<0?-1:0)<<1,m=$r(P^m|0,C^A|0,P|0,C|0)|0,A=se()|0,km(m,A,$r(V^y|0,z^S|0,V|0,z|0)|0,se()|0,N)|0,S=$r(g[N>>2]^P|0,g[N+4>>2]^C|0,P|0,C|0)|0,y=se()|0,oe=T,Dt(y|0),S|0}function ts(m,A,y,S){m=m|0,A=A|0,y=y|0,S=S|0;var T=0,C=0;return C=oe,oe=oe+16|0,T=C|0,km(m,A,y,S,T)|0,oe=C,Dt(g[T+4>>2]|0),g[T>>2]|0|0}function Os(m,A,y){return m=m|0,A=A|0,y=y|0,(y|0)<32?(Dt(A>>y|0),m>>>y|(A&(1<<y)-1)<<32-y):(Dt(((A|0)<0?-1:0)|0),A>>y-32|0)}function ht(m,A,y){return m=m|0,A=A|0,y=y|0,(y|0)<32?(Dt(A>>>y|0),m>>>y|(A&(1<<y)-1)<<32-y):(Dt(0),A>>>y-32|0)}function Tt(m,A,y){return m=m|0,A=A|0,y=y|0,(y|0)<32?(Dt(A<<y|(m&(1<<y)-1<<32-y)>>>32-y|0),m<<y):(Dt(m<<y-32|0),0)}function Pv(m,A){return m=+m,A=+A,m!=m?+A:A!=A?+m:+Ai(+m,+A)}function zm(m,A){return m=+m,A=+A,m!=m?+A:A!=A?+m:+ni(+m,+A)}function gA(m){return m=+m,m>=0?+Br(m+.5):+ln(m-.5)}function md(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0;if((y|0)>=8192)return Vr(m|0,A|0,y|0)|0,m|0;if(C=m|0,T=m+y|0,(m&3)==(A&3)){for(;m&3;){if(!y)return C|0;sn[m>>0]=sn[A>>0]|0,m=m+1|0,A=A+1|0,y=y-1|0}for(y=T&-4|0,S=y-64|0;(m|0)<=(S|0);)g[m>>2]=g[A>>2],g[m+4>>2]=g[A+4>>2],g[m+8>>2]=g[A+8>>2],g[m+12>>2]=g[A+12>>2],g[m+16>>2]=g[A+16>>2],g[m+20>>2]=g[A+20>>2],g[m+24>>2]=g[A+24>>2],g[m+28>>2]=g[A+28>>2],g[m+32>>2]=g[A+32>>2],g[m+36>>2]=g[A+36>>2],g[m+40>>2]=g[A+40>>2],g[m+44>>2]=g[A+44>>2],g[m+48>>2]=g[A+48>>2],g[m+52>>2]=g[A+52>>2],g[m+56>>2]=g[A+56>>2],g[m+60>>2]=g[A+60>>2],m=m+64|0,A=A+64|0;for(;(m|0)<(y|0);)g[m>>2]=g[A>>2],m=m+4|0,A=A+4|0}else for(y=T-4|0;(m|0)<(y|0);)sn[m>>0]=sn[A>>0]|0,sn[m+1>>0]=sn[A+1>>0]|0,sn[m+2>>0]=sn[A+2>>0]|0,sn[m+3>>0]=sn[A+3>>0]|0,m=m+4|0,A=A+4|0;for(;(m|0)<(T|0);)sn[m>>0]=sn[A>>0]|0,m=m+1|0,A=A+1|0;return C|0}function kc(m,A,y){m=m|0,A=A|0,y=y|0;var S=0,T=0,C=0,P=0;if(C=m+y|0,A=A&255,(y|0)>=67){for(;m&3;)sn[m>>0]=A,m=m+1|0;for(S=C&-4|0,P=A|A<<8|A<<16|A<<24,T=S-64|0;(m|0)<=(T|0);)g[m>>2]=P,g[m+4>>2]=P,g[m+8>>2]=P,g[m+12>>2]=P,g[m+16>>2]=P,g[m+20>>2]=P,g[m+24>>2]=P,g[m+28>>2]=P,g[m+32>>2]=P,g[m+36>>2]=P,g[m+40>>2]=P,g[m+44>>2]=P,g[m+48>>2]=P,g[m+52>>2]=P,g[m+56>>2]=P,g[m+60>>2]=P,m=m+64|0;for(;(m|0)<(S|0);)g[m>>2]=P,m=m+4|0}for(;(m|0)<(C|0);)sn[m>>0]=A,m=m+1|0;return C-y|0}function Gm(m){return m=+m,m>=0?+Br(m+.5):+ln(m-.5)}function $u(m){m=m|0;var A=0,y=0,S=0;return S=wn()|0,y=g[pi>>2]|0,A=y+m|0,(m|0)>0&(A|0)<(y|0)|(A|0)<0?(Ei(A|0)|0,ii(12),-1):(A|0)>(S|0)&&!(Xo(A|0)|0)?(ii(12),-1):(g[pi>>2]=A,y|0)}return{___divdi3:Al,___muldi3:Ls,___remdi3:Um,___uremdi3:ts,_areNeighborCells:zu,_bitshift64Ashr:Os,_bitshift64Lshr:ht,_bitshift64Shl:Tt,_calloc:xo,_cellAreaKm2:dA,_cellAreaM2:_5,_cellAreaRads2:Dh,_cellToBoundary:au,_cellToCenterChild:Jo,_cellToChildPos:hd,_cellToChildren:vv,_cellToChildrenSize:uA,_cellToLatLng:ud,_cellToLocalIj:Kb,_cellToParent:Hu,_cellToVertex:Zo,_cellToVertexes:cw,_cellsToDirectedEdge:Dc,_cellsToLinkedMultiPolygon:d5,_childPosToCell:lu,_compactCells:Yi,_destroyLinkedMultiPolygon:pl,_directedEdgeToBoundary:rd,_directedEdgeToCells:Vb,_edgeLengthKm:bv,_edgeLengthM:wv,_edgeLengthRads:Ns,_emscripten_replace_memory:Wi,_free:gn,_getBaseCellNumber:ou,_getDirectedEdgeDestination:qb,_getDirectedEdgeOrigin:Em,_getHexagonAreaAvgKm2:Pa,_getHexagonAreaAvgM2:dd,_getHexagonEdgeLengthAvgKm:ur,_getHexagonEdgeLengthAvgM:Is,_getIcosahedronFaces:cd,_getNumCells:Nr,_getPentagons:Ih,_getRes0Cells:gv,_getResolution:Rh,_greatCircleDistanceKm:Fc,_greatCircleDistanceM:_v,_greatCircleDistanceRads:er,_gridDisk:rA,_gridDiskDistances:Fb,_gridDistance:Zb,_gridPathCells:tw,_gridPathCellsSize:ew,_gridRingUnsafe:h5,_i64Add:Pn,_i64Subtract:$r,_isPentagon:Ri,_isResClassIII:Xb,_isValidCell:fl,_isValidDirectedEdge:Cm,_isValidVertex:b5,_latLngToCell:ad,_llvm_maxnum_f64:Pv,_llvm_minnum_f64:zm,_llvm_round_f64:gA,_localIjToCell:Jb,_malloc:jr,_maxFaceCount:Qb,_maxGridDiskSize:dv,_maxPolygonToCellsSize:f5,_memcpy:md,_memset:kc,_originToDirectedEdges:jb,_pentagonCount:Ra,_polygonToCells:pv,_readInt64AsDoubleFromPointer:ow,_res0CellCount:A5,_round:Gm,_sbrk:$u,_sizeOfCellBoundary:nw,_sizeOfCoordIJ:Cv,_sizeOfGeoLoop:iw,_sizeOfGeoPolygon:rw,_sizeOfH3Index:Ev,_sizeOfLatLng:AA,_sizeOfLinkedGeoPolygon:sw,_uncompactCells:cA,_uncompactCellsSize:dl,_vertexToLatLng:Lm,establishStackSpace:Ys,stackAlloc:cl,stackRestore:Xs,stackSave:Bc}}(at,jt,U);e.___divdi3=Le.___divdi3,e.___muldi3=Le.___muldi3,e.___remdi3=Le.___remdi3,e.___uremdi3=Le.___uremdi3,e._areNeighborCells=Le._areNeighborCells,e._bitshift64Ashr=Le._bitshift64Ashr,e._bitshift64Lshr=Le._bitshift64Lshr,e._bitshift64Shl=Le._bitshift64Shl,e._calloc=Le._calloc,e._cellAreaKm2=Le._cellAreaKm2,e._cellAreaM2=Le._cellAreaM2,e._cellAreaRads2=Le._cellAreaRads2,e._cellToBoundary=Le._cellToBoundary,e._cellToCenterChild=Le._cellToCenterChild,e._cellToChildPos=Le._cellToChildPos,e._cellToChildren=Le._cellToChildren,e._cellToChildrenSize=Le._cellToChildrenSize,e._cellToLatLng=Le._cellToLatLng,e._cellToLocalIj=Le._cellToLocalIj,e._cellToParent=Le._cellToParent,e._cellToVertex=Le._cellToVertex,e._cellToVertexes=Le._cellToVertexes,e._cellsToDirectedEdge=Le._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=Le._cellsToLinkedMultiPolygon,e._childPosToCell=Le._childPosToCell,e._compactCells=Le._compactCells,e._destroyLinkedMultiPolygon=Le._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=Le._directedEdgeToBoundary,e._directedEdgeToCells=Le._directedEdgeToCells,e._edgeLengthKm=Le._edgeLengthKm,e._edgeLengthM=Le._edgeLengthM,e._edgeLengthRads=Le._edgeLengthRads;var _n=e._emscripten_replace_memory=Le._emscripten_replace_memory;e._free=Le._free,e._getBaseCellNumber=Le._getBaseCellNumber,e._getDirectedEdgeDestination=Le._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=Le._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=Le._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=Le._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=Le._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=Le._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=Le._getIcosahedronFaces,e._getNumCells=Le._getNumCells,e._getPentagons=Le._getPentagons,e._getRes0Cells=Le._getRes0Cells,e._getResolution=Le._getResolution,e._greatCircleDistanceKm=Le._greatCircleDistanceKm,e._greatCircleDistanceM=Le._greatCircleDistanceM,e._greatCircleDistanceRads=Le._greatCircleDistanceRads,e._gridDisk=Le._gridDisk,e._gridDiskDistances=Le._gridDiskDistances,e._gridDistance=Le._gridDistance,e._gridPathCells=Le._gridPathCells,e._gridPathCellsSize=Le._gridPathCellsSize,e._gridRingUnsafe=Le._gridRingUnsafe,e._i64Add=Le._i64Add,e._i64Subtract=Le._i64Subtract,e._isPentagon=Le._isPentagon,e._isResClassIII=Le._isResClassIII,e._isValidCell=Le._isValidCell,e._isValidDirectedEdge=Le._isValidDirectedEdge,e._isValidVertex=Le._isValidVertex,e._latLngToCell=Le._latLngToCell,e._llvm_maxnum_f64=Le._llvm_maxnum_f64,e._llvm_minnum_f64=Le._llvm_minnum_f64,e._llvm_round_f64=Le._llvm_round_f64,e._localIjToCell=Le._localIjToCell,e._malloc=Le._malloc,e._maxFaceCount=Le._maxFaceCount,e._maxGridDiskSize=Le._maxGridDiskSize,e._maxPolygonToCellsSize=Le._maxPolygonToCellsSize,e._memcpy=Le._memcpy,e._memset=Le._memset,e._originToDirectedEdges=Le._originToDirectedEdges,e._pentagonCount=Le._pentagonCount,e._polygonToCells=Le._polygonToCells,e._readInt64AsDoubleFromPointer=Le._readInt64AsDoubleFromPointer,e._res0CellCount=Le._res0CellCount,e._round=Le._round,e._sbrk=Le._sbrk,e._sizeOfCellBoundary=Le._sizeOfCellBoundary,e._sizeOfCoordIJ=Le._sizeOfCoordIJ,e._sizeOfGeoLoop=Le._sizeOfGeoLoop,e._sizeOfGeoPolygon=Le._sizeOfGeoPolygon,e._sizeOfH3Index=Le._sizeOfH3Index,e._sizeOfLatLng=Le._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=Le._sizeOfLinkedGeoPolygon,e._uncompactCells=Le._uncompactCells,e._uncompactCellsSize=Le._uncompactCellsSize,e._vertexToLatLng=Le._vertexToLatLng,e.establishStackSpace=Le.establishStackSpace;var li=e.stackAlloc=Le.stackAlloc,ar=e.stackRestore=Le.stackRestore,kn=e.stackSave=Le.stackSave;if(e.asm=Le,e.cwrap=E,e.setValue=d,e.getValue=p,te){Te(te)||(te=s(te));{Rt();var qi=function(Ue){Ue.byteLength&&(Ue=new Uint8Array(Ue)),X.set(Ue,f),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,fe()},es=function(){o(te,qi,function(){throw"could not load memory initializer "+te})},nA=$e(te);if(nA)qi(nA.buffer);else if(e.memoryInitializerRequest){var iA=function(){var Ue=e.memoryInitializerRequest,tt=Ue.response;if(Ue.status!==200&&Ue.status!==0){var Et=$e(e.memoryInitializerRequestURL);if(Et)tt=Et.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+Ue.status+", retrying "+te),es();return}}qi(tt)};e.memoryInitializerRequest.response?setTimeout(iA,0):e.memoryInitializerRequest.addEventListener("load",iA)}else es()}}var Ma;Wt=function Ue(){Ma||Pc(),Ma||(Wt=Ue)};function Pc(Ue){if(ft>0||(it(),ft>0))return;function tt(){Ma||(Ma=!0,!v&&(Ct(),qt(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),xt()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),tt()},1)):tt()}e.run=Pc;function Ta(Ue){throw e.onAbort&&e.onAbort(Ue),Ue+="",a(Ue),l(Ue),v=!0,"abort("+Ue+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=Ta,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Pc(),i}(typeof ci=="object"?ci:{}),On="number",yn=On,_2=On,Mn=On,Tn=On,Ro=On,rn=On,uRe=[["sizeOfH3Index",On],["sizeOfLatLng",On],["sizeOfCellBoundary",On],["sizeOfGeoLoop",On],["sizeOfGeoPolygon",On],["sizeOfLinkedGeoPolygon",On],["sizeOfCoordIJ",On],["readInt64AsDoubleFromPointer",On],["isValidCell",_2,[Mn,Tn]],["latLngToCell",yn,[On,On,Ro,rn]],["cellToLatLng",yn,[Mn,Tn,rn]],["cellToBoundary",yn,[Mn,Tn,rn]],["maxGridDiskSize",yn,[On,rn]],["gridDisk",yn,[Mn,Tn,On,rn]],["gridDiskDistances",yn,[Mn,Tn,On,rn,rn]],["gridRingUnsafe",yn,[Mn,Tn,On,rn]],["maxPolygonToCellsSize",yn,[rn,Ro,On,rn]],["polygonToCells",yn,[rn,Ro,On,rn]],["cellsToLinkedMultiPolygon",yn,[rn,On,rn]],["destroyLinkedMultiPolygon",null,[rn]],["compactCells",yn,[rn,rn,On,On]],["uncompactCells",yn,[rn,On,On,rn,On,Ro]],["uncompactCellsSize",yn,[rn,On,On,Ro,rn]],["isPentagon",_2,[Mn,Tn]],["isResClassIII",_2,[Mn,Tn]],["getBaseCellNumber",On,[Mn,Tn]],["getResolution",On,[Mn,Tn]],["maxFaceCount",yn,[Mn,Tn,rn]],["getIcosahedronFaces",yn,[Mn,Tn,rn]],["cellToParent",yn,[Mn,Tn,Ro,rn]],["cellToChildren",yn,[Mn,Tn,Ro,rn]],["cellToCenterChild",yn,[Mn,Tn,Ro,rn]],["cellToChildrenSize",yn,[Mn,Tn,Ro,rn]],["cellToChildPos",yn,[Mn,Tn,Ro,rn]],["childPosToCell",yn,[On,On,Mn,Tn,Ro,rn]],["areNeighborCells",yn,[Mn,Tn,Mn,Tn,rn]],["cellsToDirectedEdge",yn,[Mn,Tn,Mn,Tn,rn]],["getDirectedEdgeOrigin",yn,[Mn,Tn,rn]],["getDirectedEdgeDestination",yn,[Mn,Tn,rn]],["isValidDirectedEdge",_2,[Mn,Tn]],["directedEdgeToCells",yn,[Mn,Tn,rn]],["originToDirectedEdges",yn,[Mn,Tn,rn]],["directedEdgeToBoundary",yn,[Mn,Tn,rn]],["gridDistance",yn,[Mn,Tn,Mn,Tn,rn]],["gridPathCells",yn,[Mn,Tn,Mn,Tn,rn]],["gridPathCellsSize",yn,[Mn,Tn,Mn,Tn,rn]],["cellToLocalIj",yn,[Mn,Tn,Mn,Tn,On,rn]],["localIjToCell",yn,[Mn,Tn,rn,On,rn]],["getHexagonAreaAvgM2",yn,[Ro,rn]],["getHexagonAreaAvgKm2",yn,[Ro,rn]],["getHexagonEdgeLengthAvgM",yn,[Ro,rn]],["getHexagonEdgeLengthAvgKm",yn,[Ro,rn]],["greatCircleDistanceM",On,[rn,rn]],["greatCircleDistanceKm",On,[rn,rn]],["greatCircleDistanceRads",On,[rn,rn]],["cellAreaM2",yn,[Mn,Tn,rn]],["cellAreaKm2",yn,[Mn,Tn,rn]],["cellAreaRads2",yn,[Mn,Tn,rn]],["edgeLengthM",yn,[Mn,Tn,rn]],["edgeLengthKm",yn,[Mn,Tn,rn]],["edgeLengthRads",yn,[Mn,Tn,rn]],["getNumCells",yn,[Ro,rn]],["getRes0Cells",yn,[rn]],["res0CellCount",On],["getPentagons",yn,[On,rn]],["pentagonCount",On],["cellToVertex",yn,[Mn,Tn,On,rn]],["cellToVertexes",yn,[Mn,Tn,rn]],["vertexToLatLng",yn,[Mn,Tn,rn]],["isValidVertex",_2,[Mn,Tn]]],cRe=0,hRe=1,fRe=2,dRe=3,ste=4,pRe=5,ARe=6,mRe=7,gRe=8,yRe=9,vRe=10,_Re=11,xRe=12,bRe=13,wRe=14,SRe=15,go={};go[cRe]="Success";go[hRe]="The operation failed but a more specific error is not available";go[fRe]="Argument was outside of acceptable range";go[dRe]="Latitude or longitude arguments were outside of acceptable range";go[ste]="Resolution argument was outside of acceptable range";go[pRe]="Cell argument was not valid";go[ARe]="Directed edge argument was not valid";go[mRe]="Undirected edge argument was not valid";go[gRe]="Vertex argument was not valid";go[yRe]="Pentagon distortion was encountered";go[vRe]="Duplicate input";go[_Re]="Cell arguments were not neighbors";go[xRe]="Cell arguments had incompatible resolutions";go[bRe]="Memory allocation failed";go[wRe]="Bounds of provided memory were insufficient";go[SRe]="Mode or flags argument was not valid";var MRe=1e3,ote=1001,ate=1002,H4={};H4[MRe]="Unknown unit";H4[ote]="Array length out of bounds";H4[ate]="Got unexpected null value for H3 index";var TRe="Unknown error";function lte(i,e,t){var n=t&&"value"in t,r=new Error((i[e]||TRe)+" (code: "+e+(n?", value: "+t.value:"")+")");return r.code=e,r}function ute(i,e){var t=arguments.length===2?{value:e}:{};return lte(go,i,t)}function cte(i,e){var t=arguments.length===2?{value:e}:{};return lte(H4,i,t)}function Bx(i){if(i!==0)throw ute(i)}var il={};uRe.forEach(function(e){il[e[0]]=ci.cwrap.apply(ci,e)});var _1=16,Ix=4,By=8,ERe=8,tC=il.sizeOfH3Index(),ZO=il.sizeOfLatLng(),CRe=il.sizeOfCellBoundary(),RRe=il.sizeOfGeoPolygon(),E_=il.sizeOfGeoLoop();il.sizeOfLinkedGeoPolygon();il.sizeOfCoordIJ();function PRe(i){if(typeof i!="number"||i<0||i>15||Math.floor(i)!==i)throw ute(ste,i);return i}function BRe(i){if(!i)throw cte(ate);return i}var IRe=Math.pow(2,32)-1;function NRe(i){if(i>IRe)throw cte(ote,i);return i}var DRe=/[^0-9a-fA-F]/;function hte(i){if(Array.isArray(i)&&i.length===2&&Number.isInteger(i[0])&&Number.isInteger(i[1]))return i;if(typeof i!="string"||DRe.test(i))return[0,0];var e=parseInt(i.substring(0,i.length-8),_1),t=parseInt(i.substring(i.length-8),_1);return[t,e]}function Lq(i){if(i>=0)return i.toString(_1);i=i&2147483647;var e=fte(8,i.toString(_1)),t=(parseInt(e[0],_1)+8).toString(_1);return e=t+e.substring(1),e}function LRe(i,e){return Lq(e)+fte(8,Lq(i))}function fte(i,e){for(var t=i-e.length,n="",r=0;r<t;r++)n+="0";return n=n+e,n}function Oq(i,e,t){for(var n=i.length,r=ci._calloc(n,ZO),s=t?1:0,o=t?0:1,a=0;a<n*2;a+=2)ci.HEAPF64.set([i[a/2][s],i[a/2][o]].map(mte),r/By+a);return ci.HEAPU32.set([n,r],e/Ix),e}function ORe(i,e){var t=i.length-1,n=ci._calloc(RRe),r=0,s=r+E_,o=s+Ix;Oq(i[0],n+r,e);var a;if(t>0){a=ci._calloc(t,E_);for(var l=0;l<t;l++)Oq(i[l+1],a+E_*l,e)}return ci.setValue(n+s,t,"i32"),ci.setValue(n+o,a,"i32"),n}function FRe(i){var e=0,t=e+E_,n=t+Ix,r=Ix;ci._free(ci.getValue(i+e+r,"i8*"));var s=ci.getValue(i+t,"i32");if(s>0){for(var o=ci.getValue(i+n,"i32"),a=0;a<s;a++)ci._free(ci.getValue(o+E_*a+r,"i8*"));ci._free(o)}ci._free(i)}function dte(i,e){e===void 0&&(e=0);var t=ci.getValue(i+tC*e,"i32"),n=ci.getValue(i+tC*e+Ix,"i32");return n?LRe(t,n):null}function kRe(i){return il.readInt64AsDoubleFromPointer(i)}function URe(i,e){for(var t=[],n=0;n<e;n++){var r=dte(i,n);r!==null&&t.push(r)}return t}function nC(i){return VRe(ci.getValue(i,"double"))}function zRe(i){return[nC(i),nC(i+By)]}function GRe(i){return[nC(i+By),nC(i)]}function HRe(i,e,t){for(var n=ci.getValue(i,"i32"),r=i+By,s=[],o=GRe,a=0;a<n*2;a+=2)s.push(o(r+By*a));return s.push(s[0]),s}function qRe(i,e,t){var n=ci._malloc(ZO);ci.HEAPF64.set([i,e].map(mte),n/By);var r=ci._malloc(tC);try{return Bx(il.latLngToCell(n,t,r)),BRe(dte(r))}finally{ci._free(r),ci._free(n)}}function pte(i){var e=ci._malloc(ZO),t=hte(i),n=t[0],r=t[1];try{return Bx(il.cellToLatLng(n,r,e)),zRe(e)}finally{ci._free(e)}}function Ate(i,e){var t=ci._malloc(CRe),n=hte(i),r=n[0],s=n[1];try{return Bx(il.cellToBoundary(r,s,t)),HRe(t,e,e)}finally{ci._free(t)}}function Fq(i,e,t){if(PRe(e),t=!!t,i.length===0||i[0].length===0)return[];var n=typeof i[0][0]=="number"?[i]:i,r=ORe(n,t),s=ci._malloc(ERe);try{Bx(il.maxPolygonToCellsSize(r,e,0,s));var o=NRe(kRe(s)),a=ci._calloc(o,tC);try{return Bx(il.polygonToCells(r,e,0,a)),URe(a,o)}finally{ci._free(a)}}finally{ci._free(s),FRe(r)}}function mte(i){return i*Math.PI/180}function VRe(i){return i*180/Math.PI}function jRe(i){return i=Math.max(0,Math.min(1,i)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+i*(1172.33-i*(10793.56-i*(33300.12-i*(38394.49-i*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+i*(557.33+i*(1225.33-i*(3574.96-i*(1073.77+i*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+i*(3211.1-i*(15327.97-i*(27814-i*(22569.18-i*6838.66)))))))+")"}var gte=yte;function yte(i,e,t,n){this.x=typeof i=="number"?i:0,this.y=typeof e=="number"?e:0,this.z=typeof t=="number"?t:0,this.half=typeof n=="number"?n:0}yte.prototype.contains=function(e,t,n){var r=this.half;return this.x-r<=e&&e<this.x+r&&this.y-r<=t&&t<this.y+r&&this.z-r<=n&&n<this.z+r};var Dd=gte,$Re=4,WRe=yu;function yu(i){this.bounds=i,this.q0=null,this.q1=null,this.q2=null,this.q3=null,this.q4=null,this.q5=null,this.q6=null,this.q7=null,this.items=null}yu.prototype.subdivide=function(){var e=this.bounds,t=e.half/2;this.q0=new yu(new Dd(e.x-t,e.y-t,e.z-t,t)),this.q1=new yu(new Dd(e.x+t,e.y-t,e.z-t,t)),this.q2=new yu(new Dd(e.x-t,e.y+t,e.z-t,t)),this.q3=new yu(new Dd(e.x+t,e.y+t,e.z-t,t)),this.q4=new yu(new Dd(e.x-t,e.y-t,e.z+t,t)),this.q5=new yu(new Dd(e.x+t,e.y-t,e.z+t,t)),this.q6=new yu(new Dd(e.x-t,e.y+t,e.z+t,t)),this.q7=new yu(new Dd(e.x+t,e.y+t,e.z+t,t))};yu.prototype.insert=function(e,t,n){var r=this.q0===null;if(r){if(this.items===null?this.items=[e]:this.items.push(e),this.items.length>=$Re&&n<16){this.subdivide();for(var s=0;s<this.items.length;++s)this.insert(this.items[s],t,n+1);this.items=null}}else{var o=t[e],a=t[e+1],l=t[e+2],u=this.bounds,c=0;o>u.x&&(c+=1),a>u.y&&(c+=2),l>u.z&&(c+=4);var h=XRe(this,c);h.insert(e,t,n+1)}};yu.prototype.query=function(e,t,n,r){if(n(this.bounds)){var s=this.items,o=typeof r=="function";if(s)for(var a=0;a<s.length;++a){var l=s[a];o?r(t[l],t[l+1],t[l+2])&&e.push(l):e.push(l)}this.q0&&(this.q0.query(e,t,n,r),this.q1.query(e,t,n,r),this.q2.query(e,t,n,r),this.q3.query(e,t,n,r),this.q4.query(e,t,n,r),this.q5.query(e,t,n,r),this.q6.query(e,t,n,r),this.q7.query(e,t,n,r))}};function XRe(i,e){if(e===0)return i.q0;if(e===1)return i.q1;if(e===2)return i.q2;if(e===3)return i.q3;if(e===4)return i.q4;if(e===5)return i.q5;if(e===6)return i.q6;if(e===7)return i.q7}var YRe=QRe;function QRe(i,e,t,n){var r=0,s=0;n=n||{};var o=n.step||1,a=n.maxTimeMS||8,l=n.probeElements||5e3;setTimeout(u,0);function u(){var c=Math.min(i.length,r+l),h=r,f=new Date;for(h=r;h<c;h+=o)e(i[h],h,i);h<i.length?(s+=new Date-f,r=h,l=Math.round(r*a/s),setTimeout(u,0)):t(i)}}var hN=gte,kq=WRe,KRe=new hN,JRe=YRe,ZRe=e8e;function e8e(i){var e=[],t,n,r={initAsync:c,init:u,bounds:f,intersectRay:l,intersectSphere:o,getRoot:s};return r;function s(){return t}function o(p,v,b,_){if(!t)return e;var M=[],E=_*_;return t.query(M,n,R,L),M;function R(I){var D=E,k=I.half;return p<I.x-k?D-=a(p-(I.x-k)):p>I.x+k&&(D-=a(p-(I.x+k))),v<I.y-k?D-=a(v-(I.y-k)):v>I.y+k&&(D-=a(v-(I.y+k))),b<I.z-k?D-=a(b-(I.z-k)):b>I.z+k&&(D-=a(b-(I.z+k))),D>0}function L(I,D,k){return a(I-p)+a(D-v)+a(k-b)<E}}function a(p){return p*p}function l(p,v,b,_){if(!t)return e;b===void 0&&(b=0),_===void 0&&(_=Number.POSITIVE_INFINITY),b*=b,_*=_;var M=[];return t.query(M,n,E,R),M.sort(L);function E(I){var D=I.half,k=(I.x-D-p.x)/v.x,G=(I.x+D-p.x)/v.x,O=(I.y+D-p.y)/v.y,U=(I.y-D-p.y)/v.y,Q=(I.z-D-p.z)/v.z,X=(I.z+D-p.z)/v.z,ee=Math.min(Math.min(Math.max(k,G),Math.max(O,U)),Math.max(Q,X)),K;return ee<0?!1:(K=Math.max(Math.max(Math.min(k,G),Math.min(O,U)),Math.min(Q,X)),K<=ee&&K<=_)}function R(I,D,k){var G=(I-p.x)*(I-p.x)+(D-p.y)*(D-p.y)+(k-p.z)*(k-p.z);return b<=G&&G<=_}function L(I,D){var k=p[I],G=p[I+1],O=p[I+2],U=(k-p.x)*(k-p.x)+(G-p.y)*(G-p.y)+(O-p.z)*(O-p.z),Q=p[D],X=p[D+1],ee=p[D+2],K=(Q-p.x)*(Q-p.x)+(X-p.y)*(X-p.y)+(ee-p.z)*(ee-p.z);return U-K}}function u(p){h(p),n=p,t=d(p);for(var v=0;v<p.length;v+=3)t.insert(v,n,0)}function c(p,v){h(p);var b=d(p);JRe(p,_,M,{step:3});function _(E,R){b.insert(R,p,0)}function M(){n=p,t=b,typeof v=="function"&&v(r)}}function h(p){if(!p)throw new Error("Points array is required for quadtree to work");if(typeof p.length!="number")throw new Error("Points should be array-like object");if(p.length%3!==0)throw new Error("Points array should consist of series of x,y,z coordinates and be multiple of 3")}function f(){return t?t.bounds:KRe}function d(p){if(p.length===0){var v=new hN;return new kq(v)}for(var b=Number.POSITIVE_INFINITY,_=Number.POSITIVE_INFINITY,M=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,R=Number.NEGATIVE_INFINITY,L=Number.NEGATIVE_INFINITY,I=0;I<p.length;I+=3){var D=p[I],k=p[I+1],G=p[I+2];D<b&&(b=D),D>E&&(E=D),k<_&&(_=k),k>R&&(R=k),G<M&&(M=G),G>L&&(L=G)}var O=Math.max(Math.max(E-b,R-_),L-M);O+=2,b-=1,_-=1,M-=1;var U=O/2,Q=new hN(b+U,_+U,M+U,U);return new kq(Q)}}const t8e=xh(ZRe),Uq=new Zr,m3=new ne;class vte extends kL{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new Ht(e,3)),this.setAttribute("uv",new Ht(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new ZT(t,6,1);return this.setAttribute("instanceStart",new Ol(n,3,0)),this.setAttribute("instanceEnd",new Ol(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new ZT(t,6,1);return this.setAttribute("instanceColorStart",new Ol(n,3,0)),this.setAttribute("instanceColorEnd",new Ol(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new IL(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zr);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),Uq.setFromBufferAttribute(t),this.boundingBox.union(Uq))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ds),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)m3.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(m3)),m3.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(m3));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}Ot.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new je(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};ua.line={uniforms:eb.merge([Ot.common,Ot.fog,Ot.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class eF extends po{constructor(e){super({type:"LineMaterial",uniforms:eb.clone(ua.line.uniforms),vertexShader:ua.line.vertexShader,fragmentShader:ua.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const iP=new In,zq=new ne,Gq=new ne,Js=new In,Zs=new In,Gc=new In,rP=new ne,sP=new kt,io=new sQ,Hq=new ne,g3=new Zr,y3=new ds,Hc=new In;let Qc,B0;function qq(i,e,t){return Hc.set(0,0,-e,1).applyMatrix4(i.projectionMatrix),Hc.multiplyScalar(1/Hc.w),Hc.x=B0/t.width,Hc.y=B0/t.height,Hc.applyMatrix4(i.projectionMatrixInverse),Hc.multiplyScalar(1/Hc.w),Math.abs(Math.max(Hc.x,Hc.y))}function n8e(i,e){const t=i.matrixWorld,n=i.geometry,r=n.attributes.instanceStart,s=n.attributes.instanceEnd,o=Math.min(n.instanceCount,r.count);for(let a=0,l=o;a<l;a++){io.start.fromBufferAttribute(r,a),io.end.fromBufferAttribute(s,a),io.applyMatrix4(t);const u=new ne,c=new ne;Qc.distanceSqToSegment(io.start,io.end,c,u),c.distanceTo(u)<B0*.5&&e.push({point:c,pointOnLine:u,distance:Qc.origin.distanceTo(c),object:i,face:null,faceIndex:a,uv:null,uv1:null})}}function i8e(i,e,t){const n=e.projectionMatrix,s=i.material.resolution,o=i.matrixWorld,a=i.geometry,l=a.attributes.instanceStart,u=a.attributes.instanceEnd,c=Math.min(a.instanceCount,l.count),h=-e.near;Qc.at(1,Gc),Gc.w=1,Gc.applyMatrix4(e.matrixWorldInverse),Gc.applyMatrix4(n),Gc.multiplyScalar(1/Gc.w),Gc.x*=s.x/2,Gc.y*=s.y/2,Gc.z=0,rP.copy(Gc),sP.multiplyMatrices(e.matrixWorldInverse,o);for(let f=0,d=c;f<d;f++){if(Js.fromBufferAttribute(l,f),Zs.fromBufferAttribute(u,f),Js.w=1,Zs.w=1,Js.applyMatrix4(sP),Zs.applyMatrix4(sP),Js.z>h&&Zs.z>h)continue;if(Js.z>h){const E=Js.z-Zs.z,R=(Js.z-h)/E;Js.lerp(Zs,R)}else if(Zs.z>h){const E=Zs.z-Js.z,R=(Zs.z-h)/E;Zs.lerp(Js,R)}Js.applyMatrix4(n),Zs.applyMatrix4(n),Js.multiplyScalar(1/Js.w),Zs.multiplyScalar(1/Zs.w),Js.x*=s.x/2,Js.y*=s.y/2,Zs.x*=s.x/2,Zs.y*=s.y/2,io.start.copy(Js),io.start.z=0,io.end.copy(Zs),io.end.z=0;const v=io.closestPointToPointParameter(rP,!0);io.at(v,Hq);const b=lo.lerp(Js.z,Zs.z,v),_=b>=-1&&b<=1,M=rP.distanceTo(Hq)<B0*.5;if(_&&M){io.start.fromBufferAttribute(l,f),io.end.fromBufferAttribute(u,f),io.start.applyMatrix4(o),io.end.applyMatrix4(o);const E=new ne,R=new ne;Qc.distanceSqToSegment(io.start,io.end,R,E),t.push({point:R,pointOnLine:E,distance:Qc.origin.distanceTo(R),object:i,face:null,faceIndex:f,uv:null,uv1:null})}}}class r8e extends fi{constructor(e=new vte,t=new eF({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)zq.fromBufferAttribute(t,o),Gq.fromBufferAttribute(n,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+zq.distanceTo(Gq);const s=new ZT(r,2,1);return e.setAttribute("instanceDistanceStart",new Ol(s,1,0)),e.setAttribute("instanceDistanceEnd",new Ol(s,1,1)),this}raycast(e,t){const n=this.material.worldUnits,r=e.camera;r===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Qc=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;B0=l.linewidth+s,a.boundingSphere===null&&a.computeBoundingSphere(),y3.copy(a.boundingSphere).applyMatrix4(o);let u;if(n)u=B0*.5;else{const h=Math.max(r.near,y3.distanceToPoint(Qc.origin));u=qq(r,h,l.resolution)}if(y3.radius+=u,Qc.intersectsSphere(y3)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),g3.copy(a.boundingBox).applyMatrix4(o);let c;if(n)c=B0*.5;else{const h=Math.max(r.near,g3.distanceToPoint(Qc.origin));c=qq(r,h,l.resolution)}g3.expandByScalar(c),Qc.intersectsBox(g3)!==!1&&(n?n8e(this,t):i8e(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(iP),this.material.uniforms.resolution.value.set(iP.z,iP.w))}}class _te extends vte{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setColors(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class s8e extends r8e{constructor(e=new _te,t=new eF({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}class Vq extends sb{constructor(e,t={}){const n=t.font;if(n===void 0)super();else{const r=n.generateShapes(e,t.size);t.depth===void 0&&t.height!==void 0&&console.warn("THREE.TextGeometry: .height is now depreciated. Please use .depth instead"),t.depth=t.depth!==void 0?t.depth:t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}class o8e{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=a8e(e,t,this.data);for(let s=0,o=r.length;s<o;s++)n.push(...r[s].toShapes());return n}}function a8e(i,e,t){const n=Array.from(i),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,o=[];let a=0,l=0;for(let u=0;u<n.length;u++){const c=n[u];if(c===`
`)a=0,l-=s;else{const h=l8e(c,r,a,l,t);a+=h.offsetX,o.push(h.path)}}return o}function l8e(i,e,t,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");return}const o=new aQ;let a,l,u,c,h,f,d,p;if(s.o){const v=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let b=0,_=v.length;b<_;)switch(v[b++]){case"m":a=v[b++]*e+t,l=v[b++]*e+n,o.moveTo(a,l);break;case"l":a=v[b++]*e+t,l=v[b++]*e+n,o.lineTo(a,l);break;case"q":u=v[b++]*e+t,c=v[b++]*e+n,h=v[b++]*e+t,f=v[b++]*e+n,o.quadraticCurveTo(h,f,u,c);break;case"b":u=v[b++]*e+t,c=v[b++]*e+n,h=v[b++]*e+t,f=v[b++]*e+n,d=v[b++]*e+t,p=v[b++]*e+n,o.bezierCurveTo(h,f,d,p,u,c);break}}return{offsetX:s.ha*e,path:o}}function fN(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function u8e(i){if(Array.isArray(i))return i}function c8e(i){if(Array.isArray(i))return fN(i)}function tF(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function h8e(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function xte(i,e,t){return e=iC(e),_8e(i,rF()?Reflect.construct(e,t||[],iC(i).constructor):e.apply(i,t))}function bte(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function nF(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function v3(i,e){return i.get(tF(i,e))}function oP(i,e,t){bte(i,e),e.set(i,t)}function aP(i,e,t){return i.set(tF(i,e),t),t}function f8e(i,e){bte(i,e),e.add(i)}function wte(i,e,t){if(rF())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(i.bind.apply(i,n));return r}function d8e(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,Mte(n.key),n)}}function iF(i,e,t){return e&&d8e(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Wo(i,e,t){return(e=Mte(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function iC(i){return iC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},iC(i)}function Ste(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&dN(i,e)}function rF(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rF=function(){return!!i})()}function p8e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function A8e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function m8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jq(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Bi(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jq(Object(t),!0).forEach(function(n){Wo(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):jq(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function y8e(i,e){if(i==null)return{};var t,n,r=v8e(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function v8e(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}function _8e(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h8e(i)}function dN(i,e){return dN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},dN(i,e)}function fs(i,e){return u8e(i)||A8e(i,e)||Tte(i,e)||m8e()}function Fi(i){return c8e(i)||p8e(i)||Tte(i)||g8e()}function x8e(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Mte(i){var e=x8e(i,"string");return typeof e=="symbol"?e:e+""}function Tte(i,e){if(i){if(typeof i=="string")return fN(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?fN(i,e):void 0}}var Ete=function(e){e instanceof Array?e.forEach(Ete):(e.map&&e.map.dispose(),e.dispose())},sF=function(e){e.geometry&&e.geometry.dispose(),e.material&&Ete(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(sF)},Ar=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),sF(t)}};function ul(i,e){var t=new e;return{linkProp:function(r){return{default:t[r](),onChange:function(o,a){a[i][r](o)},triggerUpdate:!1}},linkMethod:function(r){return function(s){for(var o=s[i],a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];var c=o[r].apply(o,l);return c===o?this:c}}}}var ms=100;function $q(){return ms}function rl(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180,s=ms*(1+t);return{x:s*Math.sin(n)*Math.cos(r),y:s*Math.cos(n),z:s*Math.sin(n)*Math.sin(r)}}function Cte(i){var e=i.x,t=i.y,n=i.z,r=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/r),o=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-o*180/Math.PI-(o<-Math.PI/2?360:0),altitude:r/ms-1}}function n0(i){return i*Math.PI/180}var Nx=window.THREE?window.THREE:{BackSide:ho,BufferAttribute:Kn,Color:vt,Mesh:fi,ShaderMaterial:po},b8e=`
uniform vec3 color;
uniform float coefficient;
uniform float power;
varying vec3 vVertexNormal;
varying vec3 vVertexWorldPosition;
void main() {
  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;
  vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
  viewCameraToVertex = normalize(viewCameraToVertex);
  float intensity	= pow(
    coefficient + dot(vVertexNormal, viewCameraToVertex),
    power
  );
  gl_FragColor = vec4(color, intensity);
}`,w8e=`
varying vec3 vVertexWorldPosition;
varying vec3 vVertexNormal;
void main() {
  vVertexNormal	= normalize(normalMatrix * normal);
  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;
  gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,S8e={backside:!0,coefficient:.5,color:"gold",size:2,power:1};function M8e(i,e,t){return new Nx.ShaderMaterial({depthWrite:!1,fragmentShader:b8e,transparent:!0,uniforms:{coefficient:{value:i},color:{value:new Nx.Color(e)},power:{value:t}},vertexShader:w8e})}function T8e(i,e){for(var t=i.clone(),n=new Float32Array(i.attributes.position.count*3),r=0,s=n.length;r<s;r++){var o=i.attributes.normal.array[r],a=i.attributes.position.array[r];n[r]=a+o*e}return t.setAttribute("position",new Nx.BufferAttribute(n,3)),t}function E8e(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S8e,t=e.backside,n=e.coefficient,r=e.color,s=e.size,o=e.power,a=T8e(i,s),l=M8e(n,r,o);return t&&(l.side=Nx.BackSide),new Nx.Mesh(a,l)}var jh=window.THREE?window.THREE:{Color:vt,LineBasicMaterial:ys,LineSegments:Ql,Mesh:fi,MeshPhongMaterial:O1,SphereGeometry:Xp,SRGBColorSpace:Ua,TextureLoader:Yp},Rte=mo({props:{globeImageUrl:{},bumpImageUrl:{},showGlobe:{default:!0,onChange:function(e,t){t.globeObj.visible=!!e},triggerUpdate:!1},showGraticules:{default:!1,onChange:function(e,t){t.graticulesObj.visible=!!e},triggerUpdate:!1},showAtmosphere:{default:!0,onChange:function(e,t){t.atmosphereObj&&(t.atmosphereObj.visible=!!e)},triggerUpdate:!1},atmosphereColor:{default:"lightskyblue"},atmosphereAltitude:{default:.15},onReady:{default:function(){},triggerUpdate:!1}},methods:{globeMaterial:function(e,t){return t!==void 0?(e.globeObj.material=t||e.defaultGlobeMaterial,this):e.globeObj.material},_destructor:function(e){Ar(e.globeObj),Ar(e.graticulesObj)}},stateInit:function(){var e=new jh.SphereGeometry(ms,75,75),t=new jh.MeshPhongMaterial({color:0}),n=new jh.Mesh(e,t);n.rotation.y=-Math.PI/2,n.__globeObjType="globe";var r=new jh.LineSegments(new kee(IEe(),ms,2),new jh.LineBasicMaterial({color:"lightgrey",transparent:!0,opacity:.1}));return{globeObj:n,graticulesObj:r,defaultGlobeMaterial:t}},init:function(e,t){Ar(e),t.scene=e,t.scene.add(t.globeObj),t.scene.add(t.graticulesObj),t.ready=!1},update:function(e,t){var n=e.globeObj.material;if(t.hasOwnProperty("globeImageUrl")&&(e.globeImageUrl?new jh.TextureLoader().load(e.globeImageUrl,function(s){s.colorSpace=jh.SRGBColorSpace,n.map=s,n.color=null,n.needsUpdate=!0,!e.ready&&(e.ready=!0)&&setTimeout(e.onReady)}):!n.color&&(n.color=new jh.Color(0))),t.hasOwnProperty("bumpImageUrl")&&(e.bumpImageUrl?e.bumpImageUrl&&new jh.TextureLoader().load(e.bumpImageUrl,function(s){n.bumpMap=s,n.needsUpdate=!0}):(n.bumpMap=null,n.needsUpdate=!0)),(t.hasOwnProperty("atmosphereColor")||t.hasOwnProperty("atmosphereAltitude"))&&(e.atmosphereObj&&(e.scene.remove(e.atmosphereObj),Ar(e.atmosphereObj)),e.atmosphereColor&&e.atmosphereAltitude)){var r=e.atmosphereObj=E8e(e.globeObj.geometry,{backside:!0,color:e.atmosphereColor,size:ms*e.atmosphereAltitude,power:3.5,coefficient:.1});r.visible=!!e.showAtmosphere,r.__globeObjType="atmosphere",e.scene.add(r)}!e.ready&&!e.globeImageUrl&&(e.ready=!0,e.onReady())}}),$f=function(e){return isNaN(e)?parseInt(cn(e).toHex(),16):e},ch=function(e){return e&&isNaN(e)?Z0(e).opacity:1},Lp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r,s=1,o=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.eE+-]+)\s*\)$/.exec(e.trim().toLowerCase());if(o){var a=o.slice(1),l=fs(a,4),u=l[0],c=l[1],h=l[2],f=l[3];r=new vt("rgb(".concat(+u,",").concat(+c,",").concat(+h,")")),s=Math.min(+f,1)}else r=new vt(e);n&&r.convertLinearToSRGB();var d=r.toArray();return t?[].concat(Fi(d),[s]):d};function C8e(i,e,t){return i.opacity=e,i.transparent=e<1,i.depthWrite=e>=1,i}var R8e=window.THREE?window.THREE:{Float32BufferAttribute:Ht};function Op(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R8e.Float32BufferAttribute,n=new t(i.length*e,e);return e===1?i.forEach(function(r,s){return n.setX(s,r)}):i.forEach(function(r,s){return n.set(r,s*e)}),n}function P8e(i){for(var e=i.itemSize,t=[],n=0;n<i.count;n++)t.push(i.array.slice(n*e,(n+1)*e));return t}function Jl(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=n.removeDelay,s=r===void 0?0:r;return w4e(i,e.children,function(o){return e.add(o)},function(o){var a=function(){e.remove(o),Ar(o),o&&o.hasOwnProperty("__data")&&delete o.__data.__currentTargetD};s?setTimeout(a,s):a()},Bi({objBindAttr:"__threeObj"},t))}var Zu=window.THREE?window.THREE:{BufferGeometry:fn,Color:vt,CylinderGeometry:hm,Matrix4:kt,Mesh:fi,MeshLambertMaterial:bh,Object3D:Qn,Vector3:ne},Wq=Object.assign({},qO),Xq=Wq.BufferGeometryUtils||Wq,Pte=mo({props:{pointsData:{default:[]},pointLat:{default:"lat"},pointLng:{default:"lng"},pointColor:{default:function(){return"#ffffaa"}},pointAltitude:{default:.1},pointRadius:{default:.25},pointResolution:{default:12,triggerUpdate:!1},pointsMerge:{default:!1},pointsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Ar(e),t.scene=e,t.tweenGroup=r},update:function(e){var t=gt(e.pointLat),n=gt(e.pointLng),r=gt(e.pointAltitude),s=gt(e.pointRadius),o=gt(e.pointColor),a=new Zu.CylinderGeometry(1,1,1,e.pointResolution);a.applyMatrix4(new Zu.Matrix4().makeRotationX(Math.PI/2)),a.applyMatrix4(new Zu.Matrix4().makeTranslation(0,0,-.5));var l=2*Math.PI*ms/360,u={},c=e.pointsMerge?new Zu.Object3D:e.scene;if(Jl(e.pointsData,c,{createObj:d,updateObj:p}),e.pointsMerge){var h=e.pointsData.length?(Xq.mergeGeometries||Xq.mergeBufferGeometries)(e.pointsData.map(function(v){var b=v.__threeObj;v.__threeObj=void 0;var _=b.geometry.clone();b.updateMatrix(),_.applyMatrix4(b.matrix);var M=Lp(o(v));return _.setAttribute("color",Op(Fi(new Array(_.getAttribute("position").count)).map(function(){return M}),4)),_})):new Zu.BufferGeometry,f=new Zu.Mesh(h,new Zu.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0}));f.__globeObjType="points",f.__data=e.pointsData,Ar(e.scene),e.scene.add(f)}function d(){var v=new Zu.Mesh(a);return v.__globeObjType="point",v}function p(v,b){var _=function(k){var G=v.__currentTargetD=k,O=G.r,U=G.alt,Q=G.lat,X=G.lng;Object.assign(v.position,rl(Q,X));var ee=e.pointsMerge?new Zu.Vector3(0,0,0):e.scene.localToWorld(new Zu.Vector3(0,0,0));v.lookAt(ee),v.scale.x=v.scale.y=Math.min(30,O)*l,v.scale.z=Math.max(U*ms,.1)},M={alt:+r(b),r:+s(b),lat:+t(b),lng:+n(b)},E=v.__currentTargetD||Object.assign({},M,{alt:-.001});if(Object.keys(M).some(function(D){return E[D]!==M[D]})&&(e.pointsMerge||!e.pointsTransitionDuration||e.pointsTransitionDuration<0?_(M):e.tweenGroup.add(new jo(E).to(M,e.pointsTransitionDuration).easing(As.Quadratic.InOut).onUpdate(_).start())),!e.pointsMerge){var R=o(b),L=R?ch(R):0,I=!!L;v.visible=I,I&&(u.hasOwnProperty(R)||(u[R]=new Zu.MeshLambertMaterial({color:$f(R),transparent:L<1,opacity:L})),v.material=u[R])}}}}),B8e=["stroke"],ec=window.THREE?window.THREE:{BufferGeometry:fn,CubicBezierCurve3:CL,Curve:Kl,Group:Cs,Line:Vl,Mesh:fi,NormalBlending:_f,QuadraticBezierCurve3:h4,ShaderMaterial:po,TubeGeometry:ab,Vector3:ne},I8e=Ry.default||Ry,N8e={uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:`
    uniform float dashTranslate; 

    attribute vec4 vertexColor;
    varying vec4 vColor;
    
    attribute float vertexRelDistance;
    varying float vRelDistance;

    void main() {
      // pass through colors and distances
      vColor = vertexColor;
      vRelDistance = vertexRelDistance + dashTranslate;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `,fragmentShader:`
    uniform float dashOffset; 
    uniform float dashSize;
    uniform float gapSize; 
    
    varying vec4 vColor;
    varying float vRelDistance;
    
    void main() {
      // ignore pixels in the gap
      if (vRelDistance < dashOffset) discard;
      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;
    
      // set px color: [r, g, b, a], interpolated between vertices 
      gl_FragColor = vColor; 
    }
  `},Bte=mo({props:{arcsData:{default:[]},arcStartLat:{default:"startLat"},arcStartLng:{default:"startLng"},arcEndLat:{default:"endLat"},arcEndLng:{default:"endLng"},arcColor:{default:function(){return"#ffffaa"}},arcAltitude:{},arcAltitudeAutoScale:{default:.5},arcStroke:{},arcCurveResolution:{default:64,triggerUpdate:!1},arcCircularResolution:{default:6,triggerUpdate:!1},arcDashLength:{default:1},arcDashGap:{default:0},arcDashInitialGap:{default:0},arcDashAnimateTime:{default:0},arcsTransitionDuration:{default:1e3,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},init:function(e,t,n){var r=n.tweenGroup;Ar(e),t.scene=e,t.tweenGroup=r,t.ticker=new I8e,t.ticker.onTick.add(function(s,o){t.arcsData.filter(function(a){return a.__threeObj&&a.__threeObj.children.length&&a.__threeObj.children[0].material&&a.__threeObj.children[0].__dashAnimateStep}).forEach(function(a){var l=a.__threeObj.children[0],u=l.__dashAnimateStep*o,c=l.material.uniforms.dashTranslate.value%1e9;l.material.uniforms.dashTranslate.value=c+u})})},update:function(e){var t=gt(e.arcStartLat),n=gt(e.arcStartLng),r=gt(e.arcEndLat),s=gt(e.arcEndLng),o=gt(e.arcAltitude),a=gt(e.arcAltitudeAutoScale),l=gt(e.arcStroke),u=gt(e.arcColor),c=gt(e.arcDashLength),h=gt(e.arcDashGap),f=gt(e.arcDashInitialGap),d=gt(e.arcDashAnimateTime),p=new ec.ShaderMaterial(Bi(Bi({},N8e),{},{transparent:!0,blending:ec.NormalBlending}));Jl(e.arcsData,e.scene,{createObj:function(){var E=new ec.Group;return E.__globeObjType="arc",E},updateObj:function(E,R){var L=l(R),I=L!=null;if(!E.children.length||I!==(E.children[0].type==="Mesh")){Ar(E);var D=I?new ec.Mesh:new ec.Line(new ec.BufferGeometry);D.material=p.clone(),E.add(D)}var k=E.children[0];Object.assign(k.material.uniforms,{dashSize:{value:c(R)},gapSize:{value:h(R)},dashOffset:{value:f(R)}});var G=d(R);k.__dashAnimateStep=G>0?1e3/G:0;var O=b(u(R),e.arcCurveResolution,I?e.arcCircularResolution+1:1),U=_(e.arcCurveResolution,I?e.arcCircularResolution+1:1,!0);k.geometry.setAttribute("vertexColor",O),k.geometry.setAttribute("vertexRelDistance",U);var Q=function(Z){var he=R.__currentTargetD=Z,j=he.stroke,ie=y8e(he,B8e),ae=v(ie);I?(k.geometry&&k.geometry.dispose(),k.geometry=new ec.TubeGeometry(ae,e.arcCurveResolution,j/2,e.arcCircularResolution),k.geometry.setAttribute("vertexColor",O),k.geometry.setAttribute("vertexRelDistance",U)):k.geometry.setFromPoints(ae.getPoints(e.arcCurveResolution))},X={stroke:L,alt:o(R),altAutoScale:+a(R),startLat:+t(R),startLng:+n(R),endLat:+r(R),endLng:+s(R)},ee=R.__currentTargetD||Object.assign({},X,{altAutoScale:-.001});Object.keys(X).some(function(K){return ee[K]!==X[K]})&&(!e.arcsTransitionDuration||e.arcsTransitionDuration<0?Q(X):e.tweenGroup.add(new jo(ee).to(X,e.arcsTransitionDuration).easing(As.Quadratic.InOut).onUpdate(Q).start()))}});function v(M){var E=M.alt,R=M.altAutoScale,L=M.startLat,I=M.startLng,D=M.endLat,k=M.endLng,G=function(Pe){var He=fs(Pe,3),Se=He[0],Oe=He[1],Ye=He[2],it=rl(Oe,Se,Ye),Ct=it.x,qt=it.y,xt=it.z;return new ec.Vector3(Ct,qt,xt)},O=[I,L],U=[k,D],Q=E;if(Q==null&&(Q=Dp(O,U)/2*R),Q){var X=zO(O,U),ee=[.25,.75].map(function(pe){return[].concat(Fi(X(pe)),[Q*1.5])}),K=fs(ee,2),Z=K[0],he=K[1],j=wte(ec.CubicBezierCurve3,Fi([O,Z,he,U].map(G)));return j}else{var ie=.001;return ae.apply(void 0,Fi([[].concat(O,[ie]),[].concat(U,[ie])].map(G)))}function ae(pe,Pe){var He=pe.angleTo(Pe),Se=He===0?function(){return pe.clone()}:function(Ye){return new ec.Vector3().addVectors(pe.clone().multiplyScalar(Math.sin((1-Ye)*He)),Pe.clone().multiplyScalar(Math.sin(Ye*He))).divideScalar(Math.sin(He))},Oe=new ec.Curve;return Oe.getPoint=Se,Oe}}function b(M,E){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,L=E+1,I;if(M instanceof Array||M instanceof Function){var D=M instanceof Array?em().domain(M.map(function(ee,K){return K/(M.length-1)})).range(M):M;I=function(K){return Lp(D(K),!0,!0)}}else{var k=Lp(M,!0,!0);I=function(){return k}}for(var G=[],O=0,U=L;O<U;O++)for(var Q=I(O/(U-1)),X=0;X<R;X++)G.push(Q);return Op(G,4)}function _(M){for(var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,L=M+1,I=[],D=0,k=L;D<k;D++)for(var G=D/(k-1),O=0;O<E;O++)I.push(G);return R&&I.reverse(),Op(I,1)}}}),Ld=window.THREE?window.THREE:{BufferGeometry:fn,Color:vt,DoubleSide:ao,Mesh:fi,MeshLambertMaterial:bh,Object3D:Qn},Yq=Object.assign({},qO),Qq=Yq.BufferGeometryUtils||Yq,Ite=mo({props:{hexBinPointsData:{default:[]},hexBinPointLat:{default:"lat"},hexBinPointLng:{default:"lng"},hexBinPointWeight:{default:1},hexBinResolution:{default:4},hexMargin:{default:.2},hexTopCurvatureResolution:{default:5},hexTopColor:{default:function(){return"#ffffaa"}},hexSideColor:{default:function(){return"#ffffaa"}},hexAltitude:{default:function(e){var t=e.sumWeight;return t*.01}},hexBinMerge:{default:!1},hexTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Ar(e),t.scene=e,t.tweenGroup=r},update:function(e){var t=gt(e.hexBinPointLat),n=gt(e.hexBinPointLng),r=gt(e.hexBinPointWeight),s=gt(e.hexAltitude),o=gt(e.hexTopColor),a=gt(e.hexSideColor),l=gt(e.hexMargin),u=iN(e.hexBinPointsData.map(function(_){return Bi(Bi({},_),{},{h3Idx:qRe(t(_),n(_),e.hexBinResolution)})}),"h3Idx"),c=Object.entries(u).map(function(_){var M=fs(_,2),E=M[0],R=M[1];return{h3Idx:E,points:R,sumWeight:R.reduce(function(L,I){return L+ +r(I)},0)}}),h={},f=e.hexBinMerge?new Ld.Object3D:e.scene;if(Jl(c,f,{createObj:v,updateObj:b,idAccessor:function(M){return M.h3Idx}}),e.hexBinMerge){var d=c.length?(Qq.mergeGeometries||Qq.mergeBufferGeometries)(c.map(function(_){var M=_.__threeObj;_.__threeObj=void 0;var E=M.geometry.toNonIndexed();M.updateMatrix(),E.applyMatrix4(M.matrix);var R=Lp(o(_)),L=Lp(a(_)),I=E.getAttribute("position").count,D=E.groups[0].count;return E.setAttribute("color",Op(Fi(new Array(I)).map(function(k,G){return G>=D?R:L}),4)),E})):new Ld.BufferGeometry,p=new Ld.Mesh(d,new Ld.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0,side:Ld.DoubleSide}));p.__globeObjType="hexBinPoints",p.__data=c,Ar(e.scene),e.scene.add(p)}function v(_){var M=new Ld.Mesh;M.__hexCenter=pte(_.h3Idx),M.__hexGeoJson=Ate(_.h3Idx,!0).reverse();var E=M.__hexCenter[1];return M.__hexGeoJson.forEach(function(R){var L=R[0];Math.abs(E-L)>170&&(R[0]+=E>L?360:-360)}),M.__globeObjType="hexbin",M}function b(_,M){var E=function(Z,he,j){return Z-(Z-he)*j},R=Math.max(0,Math.min(1,+l(M))),L=fs(_.__hexCenter,2),I=L[0],D=L[1],k=R===0?_.__hexGeoJson:_.__hexGeoJson.map(function(K){var Z=fs(K,2),he=Z[0],j=Z[1];return[[he,D],[j,I]].map(function(ie){var ae=fs(ie,2),pe=ae[0],Pe=ae[1];return E(pe,Pe,R)})}),G=e.hexTopCurvatureResolution;_.geometry&&_.geometry.dispose(),_.geometry=new JO([k],0,ms,!1,!0,!0,G);var O={alt:+s(M)},U=function(Z){var he=_.__currentTargetD=Z,j=he.alt;_.scale.x=_.scale.y=_.scale.z=1+j},Q=_.__currentTargetD||Object.assign({},O,{alt:-.001});if(Object.keys(O).some(function(K){return Q[K]!==O[K]})&&(e.hexBinMerge||!e.hexTransitionDuration||e.hexTransitionDuration<0?U(O):e.tweenGroup.add(new jo(Q).to(O,e.hexTransitionDuration).easing(As.Quadratic.InOut).onUpdate(U).start())),!e.hexBinMerge){var X=a(M),ee=o(M);[X,ee].forEach(function(K){if(!h.hasOwnProperty(K)){var Z=ch(K);h[K]=new Ld.MeshLambertMaterial({color:$f(K),transparent:Z<1,opacity:Z,side:Ld.DoubleSide})}}),_.material=[X,ee].map(function(K){return h[K]})}}}}),Nte=function(e){return e*e};function D8e(i,e){var t=Math.sqrt,n=Math.cos,r=function(h){return h*Math.PI/180},s=function(h){return Nte(Math.sin(h/2))},o=r(i[1]),a=r(e[1]),l=r(i[0]),u=r(e[0]);return 2*Math.asin(t(s(a-o)+n(o)*n(a)*s(u-l)))}var L8e=Math.sqrt(2*Math.PI);function O8e(i,e){return Math.exp(-Nte(i/e)/2)/(e*L8e)}var F8e=function(e){var t=fs(e,2),n=t[0],r=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.lngAccessor,l=a===void 0?function(b){return b[0]}:a,u=o.latAccessor,c=u===void 0?function(b){return b[1]}:u,h=o.weightAccessor,f=h===void 0?function(){return 1}:h,d=o.bandwidth,p=[n,r],v=d*Math.PI/180;return ZTe(s.map(function(b){var _=f(b);if(!_)return 0;var M=D8e(p,[l(b),c(b)]);return O8e(M,v)*_}))},_3=window.THREE?window.THREE:{Mesh:fi,MeshLambertMaterial:bh,SphereGeometry:Xp},k8e=3.5,U8e=.1,z8e=3.5,Kq=new WeakSet,lP=new WeakMap,x3=new WeakMap,uP=new WeakMap,G8e=function(){function i(e,t){nF(this,i),f8e(this,Kq),oP(this,lP,void 0),oP(this,x3,void 0),oP(this,uP,void 0),aP(lP,this,e),aP(x3,this,t8e()),v3(x3,this).init(e.map(function(n){return[n.x,n.y,n.z]}).flat()),aP(uP,this,tF(Kq,this,H8e).call(this,rl(0,0),rl(0,Math.min(180,t))))}return iF(i,[{key:"getNearPoints",value:function(t,n,r){var s=this;return v3(x3,this).intersectSphere(t,n,r,v3(uP,this)).map(function(o){return v3(lP,s)[o/3]})}}])}();function H8e(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)+Math.pow(i.z-e.z,2))}var q8e=function(e){var t=Z0(jRe(e));return t.opacity=Math.cbrt(e),t.formatRgb()},Dte=mo({props:{heatmapsData:{default:[]},heatmapPoints:{default:function(e){return e}},heatmapPointLat:{default:function(e){return e[0]}},heatmapPointLng:{default:function(e){return e[1]}},heatmapPointWeight:{default:1},heatmapBandwidth:{default:4},heatmapColorFn:{default:function(){return q8e}},heatmapColorSaturation:{default:1.5},heatmapBaseAltitude:{default:.01},heatmapTopAltitude:{},heatmapsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Ar(e),t.scene=e,t.tweenGroup=r},update:function(e){var t=gt(e.heatmapPoints),n=gt(e.heatmapPointLat),r=gt(e.heatmapPointLng),s=gt(e.heatmapPointWeight),o=gt(e.heatmapBandwidth),a=gt(e.heatmapColorFn),l=gt(e.heatmapColorSaturation),u=gt(e.heatmapBaseAltitude),c=gt(e.heatmapTopAltitude);Jl(e.heatmapsData,e.scene,{createObj:function(f){var d=new _3.Mesh(new _3.SphereGeometry(ms),new _3.MeshLambertMaterial({vertexColors:!0,transparent:!0}));return d.__globeObjType="heatmap",d},updateObj:function(f,d){var p=o(d),v=a(d),b=l(d),_=u(d),M=c(d),E=t(d).map(function(X){var ee=n(X),K=r(X),Z=rl(ee,K),he=Z.x,j=Z.y,ie=Z.z;return{x:he,y:j,z:ie,lat:ee,lng:K,weight:s(X)}}),R=Math.max(U8e,p/k8e),L=Math.ceil(360/(R||-1));f.geometry.parameters.widthSegments!==L&&(f.geometry.dispose(),f.geometry=new _3.SphereGeometry(ms,L,L/2));var I=P8e(f.geometry.getAttribute("position")),D=I.map(function(X){var ee=fs(X,3),K=ee[0],Z=ee[1],he=ee[2],j=Cte({x:K,y:Z,z:he}),ie=j.lng,ae=j.lat;return[ie,ae]}),k=new G8e(E,p*z8e),G=D.map(function(X,ee){var K=fs(I[ee],3),Z=K[0],he=K[1],j=K[2];return F8e(X,k.getNearPoints(Z,he,j),{latAccessor:function(ae){return ae.lat},lngAccessor:function(ae){return ae.lng},weightAccessor:function(ae){return ae.weight},bandwidth:p})}),O=function(ee){var K=f.__currentTargetD=ee,Z=K.kdeVals,he=K.topAlt,j=K.saturation,ie=QTe(Z.map(Math.abs))||1e-15;f.geometry.setAttribute("color",Op(Z.map(function(pe){return Lp(v(pe/ie*j))}),4));var ae=em([0,ie],[_,he||_]);f.geometry.setAttribute("position",Op(Z.map(function(pe,Pe){var He=fs(D[Pe],2),Se=He[0],Oe=He[1],Ye=ae(Math.abs(pe)),it=rl(Oe,Se,Ye);return[it.x,it.y,it.z]}),3))},U={kdeVals:G,topAlt:M,saturation:b},Q=f.__currentTargetD||Object.assign({},U,{kdeVals:G.map(function(){return 0}),topAlt:M&&_,saturation:.5});Q.kdeVals.length!==G.length&&(Q.kdeVals=G.slice()),Object.keys(U).some(function(X){return Q[X]!==U[X]})&&(!e.heatmapsTransitionDuration||e.heatmapsTransitionDuration<0?O(U):e.tweenGroup.add(new jo(Q).to(U,e.heatmapsTransitionDuration).easing(As.Quadratic.InOut).onUpdate(O).start()))}})}}),Od=window.THREE?window.THREE:{DoubleSide:ao,Group:Cs,LineBasicMaterial:ys,LineSegments:Ql,Mesh:fi,MeshBasicMaterial:va},Lte=mo({props:{polygonsData:{default:[]},polygonGeoJsonGeometry:{default:"geometry"},polygonSideColor:{default:function(){return"#ffffaa"}},polygonSideMaterial:{},polygonCapColor:{default:function(){return"#ffffaa"}},polygonCapMaterial:{},polygonStrokeColor:{},polygonAltitude:{default:.01},polygonCapCurvatureResolution:{default:5},polygonsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Ar(e),t.scene=e,t.tweenGroup=r},update:function(e){var t=gt(e.polygonGeoJsonGeometry),n=gt(e.polygonAltitude),r=gt(e.polygonCapCurvatureResolution),s=gt(e.polygonCapColor),o=gt(e.polygonCapMaterial),a=gt(e.polygonSideColor),l=gt(e.polygonSideMaterial),u=gt(e.polygonStrokeColor),c=[];e.polygonsData.forEach(function(h){var f={data:h,capColor:s(h),capMaterial:o(h),sideColor:a(h),sideMaterial:l(h),strokeColor:u(h),altitude:+n(h),capCurvatureResolution:+r(h)},d=t(h),p=h.__id||"".concat(Math.round(Math.random()*1e9));h.__id=p,d.type==="Polygon"?c.push(Bi({id:"".concat(p,"_0"),coords:d.coordinates},f)):d.type==="MultiPolygon"?c.push.apply(c,Fi(d.coordinates.map(function(v,b){return Bi({id:"".concat(p,"_").concat(b),coords:v},f)}))):console.warn("Unsupported GeoJson geometry type: ".concat(d.type,". Skipping geometry..."))}),Jl(c,e.scene,{idAccessor:function(f){return f.id},createObj:function(){var f=new Od.Group;return f.__defaultSideMaterial=new Od.MeshBasicMaterial({side:Od.DoubleSide,depthWrite:!0}),f.__defaultCapMaterial=new Od.MeshBasicMaterial({side:Od.DoubleSide,depthWrite:!0}),f.add(new Od.Mesh(void 0,[f.__defaultSideMaterial,f.__defaultCapMaterial])),f.add(new Od.LineSegments(void 0,new Od.LineBasicMaterial)),f.__globeObjType="polygon",f},updateObj:function(f,d){var p=d.coords,v=d.capColor,b=d.capMaterial,_=d.sideColor,M=d.sideMaterial,E=d.strokeColor,R=d.altitude,L=d.capCurvatureResolution,I=fs(f.children,2),D=I[0],k=I[1],G=!!E;if(k.visible=G,V8e(D.geometry.parameters||{},{polygonGeoJson:p,curvatureResolution:L})||(D.geometry&&D.geometry.dispose(),D.geometry=new JO(p,0,ms,!1,!0,!0,L)),G&&(!k.geometry.parameters||k.geometry.parameters.geoJson.coordinates!==p||k.geometry.parameters.resolution!==L)&&(k.geometry&&k.geometry.dispose(),k.geometry=new kee({type:"Polygon",coordinates:p},ms,L)),D.material[0]=M||f.__defaultSideMaterial,D.material[1]=b||f.__defaultCapMaterial,[!M&&_,!b&&v].forEach(function(K,Z){if(K){var he=D.material[Z],j=ch(K);he.color.set($f(K)),he.transparent=j<1,he.opacity=j}}),G){var O=k.material,U=ch(E);O.color.set($f(E)),O.transparent=U<1,O.opacity=U}var Q={alt:R},X=function(Z){var he=f.__currentTargetD=Z,j=he.alt;D.scale.x=D.scale.y=D.scale.z=1+j,G&&(k.scale.x=k.scale.y=k.scale.z=1+j+1e-4)},ee=f.__currentTargetD||Object.assign({},Q,{alt:-.001});Object.keys(Q).some(function(K){return ee[K]!==Q[K]})&&(!e.polygonsTransitionDuration||e.polygonsTransitionDuration<0||ee.alt===Q.alt?X(Q):e.tweenGroup.add(new jo(ee).to(Q,e.polygonsTransitionDuration).easing(As.Quadratic.InOut).onUpdate(X).start()))}})}});function V8e(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return function(n,r){return n===r}};return Object.entries(e).every(function(n){var r=fs(n,2),s=r[0],o=r[1];return i.hasOwnProperty(s)&&t(s)(i[s],o)})}var bg=window.THREE?window.THREE:{BufferGeometry:fn,CircleGeometry:cm,DoubleSide:ao,Mesh:fi,MeshLambertMaterial:bh,Vector3:ne},Jq=Object.assign({},qO),Zq=Jq.BufferGeometryUtils||Jq,Ote=mo({props:{hexPolygonsData:{default:[]},hexPolygonGeoJsonGeometry:{default:"geometry"},hexPolygonColor:{default:function(){return"#ffffaa"}},hexPolygonAltitude:{default:.001},hexPolygonResolution:{default:3},hexPolygonMargin:{default:.2},hexPolygonUseDots:{default:!1},hexPolygonCurvatureResolution:{default:5},hexPolygonDotResolution:{default:12},hexPolygonsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Ar(e),t.scene=e,t.tweenGroup=r},update:function(e){var t=gt(e.hexPolygonGeoJsonGeometry),n=gt(e.hexPolygonColor),r=gt(e.hexPolygonAltitude),s=gt(e.hexPolygonResolution),o=gt(e.hexPolygonMargin),a=gt(e.hexPolygonUseDots),l=gt(e.hexPolygonCurvatureResolution),u=gt(e.hexPolygonDotResolution);Jl(e.hexPolygonsData,e.scene,{createObj:function(h){var f=new bg.Mesh(void 0,new bg.MeshLambertMaterial({side:bg.DoubleSide}));return f.__globeObjType="hexPolygon",f},updateObj:function(h,f){var d=t(f),p=s(f),v=r(f),b=Math.max(0,Math.min(1,+o(f))),_=a(f),M=l(f),E=u(f),R=n(f),L=ch(R);h.material.color.set($f(R)),h.material.transparent=L<1,h.material.opacity=L;var I={alt:v,margin:b,curvatureResolution:M},D={geoJson:d,h3Res:p},k=h.__currentTargetD||Object.assign({},I,{alt:-.001}),G=h.__currentMemD||D;if(Object.keys(I).some(function(X){return k[X]!==I[X]})||Object.keys(D).some(function(X){return G[X]!==D[X]})){h.__currentMemD=D;var O=[];d.type==="Polygon"?Fq(d.coordinates,p,!0).forEach(function(X){return O.push(X)}):d.type==="MultiPolygon"?d.coordinates.forEach(function(X){return Fq(X,p,!0).forEach(function(ee){return O.push(ee)})}):console.warn("Unsupported GeoJson geometry type: ".concat(d.type,". Skipping geometry..."));var U=O.map(function(X){var ee=pte(X),K=Ate(X,!0).reverse(),Z=ee[1];return K.forEach(function(he){var j=he[0];Math.abs(Z-j)>170&&(he[0]+=Z>j?360:-360)}),{h3Idx:X,hexCenter:ee,hexGeoJson:K}}),Q=function(ee){var K=h.__currentTargetD=ee,Z=K.alt,he=K.margin,j=K.curvatureResolution;h.geometry&&h.geometry.dispose(),h.geometry=U.length?(Zq.mergeGeometries||Zq.mergeBufferGeometries)(U.map(function(ie){var ae=fs(ie.hexCenter,2),pe=ae[0],Pe=ae[1];if(_){var He=rl(pe,Pe,Z),Se=rl(ie.hexGeoJson[0][1],ie.hexGeoJson[0][0],Z),Oe=.85*(1-he)*new bg.Vector3(He.x,He.y,He.z).distanceTo(new bg.Vector3(Se.x,Se.y,Se.z)),Ye=new cm(Oe,E);return Ye.rotateX(n0(-pe)),Ye.rotateY(n0(Pe)),Ye.translate(He.x,He.y,He.z),Ye}else{var it=function(xt,yt,Qe){return xt-(xt-yt)*Qe},Ct=he===0?ie.hexGeoJson:ie.hexGeoJson.map(function(qt){var xt=fs(qt,2),yt=xt[0],Qe=xt[1];return[[yt,Pe],[Qe,pe]].map(function(ce){var dt=fs(ce,2),pt=dt[0],ut=dt[1];return it(pt,ut,he)})});return new JO([Ct],ms,ms*(1+Z),!1,!0,!1,j)}})):new bg.BufferGeometry};!e.hexPolygonsTransitionDuration||e.hexPolygonsTransitionDuration<0?Q(I):e.tweenGroup.add(new jo(k).to(I,e.hexPolygonsTransitionDuration).easing(As.Quadratic.InOut).onUpdate(Q).start())}}})}}),j8e=window.THREE?window.THREE:{Vector3:ne};function $8e(i,e){var t=function(o,a){var l=o[o.length-1];return[].concat(Fi(o),Fi(Fi(new Array(a-o.length)).map(function(){return l})))},n=Math.max(i.length,e.length),r=R4e.apply(void 0,Fi([i,e].map(function(s){return s.map(function(o){var a=o.x,l=o.y,u=o.z;return[a,l,u]})}).map(function(s){return t(s,n)})));return function(s){return s===0?i:s===1?e:r(s).map(function(o){var a=fs(o,3),l=a[0],u=a[1],c=a[2];return new j8e.Vector3(l,u,c)})}}var UA=window.THREE?window.THREE:{BufferGeometry:fn,Color:vt,Group:Cs,Line:Vl,NormalBlending:_f,ShaderMaterial:po,Vector3:ne},W8e=Ry.default||Ry,X8e={uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:`
    uniform float dashTranslate;

    attribute vec4 vertexColor;
    varying vec4 vColor;

    attribute float vertexRelDistance;
    varying float vRelDistance;

    void main() {
      // pass through colors and distances
      vColor = vertexColor;
      vRelDistance = vertexRelDistance + dashTranslate;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `,fragmentShader:`
    uniform float dashOffset;
    uniform float dashSize;
    uniform float gapSize;

    varying vec4 vColor;
    varying float vRelDistance;

    void main() {
      // ignore pixels in the gap
      if (vRelDistance < dashOffset) discard;
      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;

      // set px color: [r, g, b, a], interpolated between vertices
      gl_FragColor = vColor;
    }
  `},Fte=mo({props:{pathsData:{default:[]},pathPoints:{default:function(e){return e}},pathPointLat:{default:function(e){return e[0]}},pathPointLng:{default:function(e){return e[1]}},pathPointAlt:{default:.001},pathResolution:{default:2},pathColor:{default:function(){return"#ffffaa"}},pathStroke:{},pathDashLength:{default:1},pathDashGap:{default:0},pathDashInitialGap:{default:0},pathDashAnimateTime:{default:0},pathTransitionDuration:{default:1e3,triggerUpdate:!1},rendererSize:{}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},init:function(e,t,n){var r=n.tweenGroup;Ar(e),t.scene=e,t.tweenGroup=r,t.ticker=new W8e,t.ticker.onTick.add(function(s,o){t.pathsData.filter(function(a){return a.__threeObj&&a.__threeObj.children.length&&a.__threeObj.children[0].material&&a.__threeObj.children[0].__dashAnimateStep}).forEach(function(a){var l=a.__threeObj.children[0],u=l.__dashAnimateStep*o;if(l.type==="Line"){var c=l.material.uniforms.dashTranslate.value%1e9;l.material.uniforms.dashTranslate.value=c+u}else if(l.type==="Line2"){for(var h=l.material.dashOffset-u,f=l.material.dashSize+l.material.gapSize;h<=-f;)h+=f;l.material.dashOffset=h}})})},update:function(e){var t=gt(e.pathPoints),n=gt(e.pathPointLat),r=gt(e.pathPointLng),s=gt(e.pathPointAlt),o=gt(e.pathStroke),a=gt(e.pathColor),l=gt(e.pathDashLength),u=gt(e.pathDashGap),c=gt(e.pathDashInitialGap),h=gt(e.pathDashAnimateTime),f=new UA.ShaderMaterial(Bi(Bi({},X8e),{},{transparent:!0,blending:UA.NormalBlending}));Jl(e.pathsData,e.scene,{createObj:function(){var M=new UA.Group;return M.__globeObjType="path",M},updateObj:function(M,E){var R=o(E),L=R!=null;if(!M.children.length||L===(M.children[0].type==="Line")){Ar(M);var I=L?new s8e(new _te,new eF):new UA.Line(new UA.BufferGeometry,f.clone());M.add(I)}var D=M.children[0],k=p(t(E),n,r,s,e.pathResolution),G=h(E);if(D.__dashAnimateStep=G>0?1e3/G:0,L){D.material.resolution=e.rendererSize;{var Q=l(E),X=u(E),ee=c(E);D.material.dashed=X>0,D.material.dashed?D.material.defines.USE_DASH="":delete D.material.defines.USE_DASH,D.material.dashed&&(D.material.dashScale=1/d(k),D.material.dashSize=Q,D.material.gapSize=X,D.material.dashOffset=-ee)}{var K=a(E);if(K instanceof Array){var Z=v(a(E),k.length-1,1,!1);D.geometry.setColors(Z.array),D.material.vertexColors=!0}else{var he=K,j=ch(he);D.material.color=new UA.Color($f(he)),D.material.transparent=j<1,D.material.opacity=j,D.material.vertexColors=!1}}D.material.needsUpdate=!0}else{Object.assign(D.material.uniforms,{dashSize:{value:l(E)},gapSize:{value:u(E)},dashOffset:{value:c(E)}});var O=v(a(E),k.length),U=b(k.length,1,!0);D.geometry.setAttribute("vertexColor",O),D.geometry.setAttribute("vertexRelDistance",U)}var ie=$8e(E.__currentTargetD&&E.__currentTargetD.points||[k[0]],k),ae=function(Se){var Oe=E.__currentTargetD=Se,Ye=Oe.stroke,it=Oe.interpolK,Ct=E.__currentTargetD.points=ie(it);if(L){var qt;D.geometry.setPositions((qt=[]).concat.apply(qt,Fi(Ct.map(function(xt){var yt=xt.x,Qe=xt.y,ce=xt.z;return[yt,Qe,ce]})))),D.material.linewidth=Ye,D.material.dashed&&D.computeLineDistances()}else D.geometry.setFromPoints(Ct),D.geometry.computeBoundingSphere()},pe={stroke:R,interpolK:1},Pe=Object.assign({},E.__currentTargetD||pe,{interpolK:0});Object.keys(pe).some(function(He){return Pe[He]!==pe[He]})&&(!e.pathTransitionDuration||e.pathTransitionDuration<0?ae(pe):e.tweenGroup.add(new jo(Pe).to(pe,e.pathTransitionDuration).easing(As.Quadratic.InOut).onUpdate(ae).start()))}});function d(_){var M=0,E;return _.forEach(function(R){E&&(M+=E.distanceTo(R)),E=R}),M}function p(_,M,E,R,L){var I=function(O,U,Q){for(var X=[],ee=1;ee<=Q;ee++)X.push(O+(U-O)*ee/(Q+1));return X},D=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Q=[],X=null;return O.forEach(function(ee){if(X){for(;Math.abs(X[1]-ee[1])>180;)X[1]+=360*(X[1]<ee[1]?1:-1);var K=Math.sqrt(Math.pow(ee[0]-X[0],2)+Math.pow(ee[1]-X[1],2));if(K>U)for(var Z=Math.floor(K/U),he=I(X[0],ee[0],Z),j=I(X[1],ee[1],Z),ie=I(X[2],ee[2],Z),ae=0,pe=he.length;ae<pe;ae++)Q.push([he[ae],j[ae],ie[ae]])}Q.push(X=ee)}),Q},k=function(O){var U=fs(O,3),Q=U[0],X=U[1],ee=U[2],K=rl(Q,X,ee),Z=K.x,he=K.y,j=K.z;return new UA.Vector3(Z,he,j)};return D(_.map(function(G){return[M(G),E(G),R(G)]}),L).map(k)}function v(_,M){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,L=M+1,I;if(_ instanceof Array||_ instanceof Function){var D=_ instanceof Array?em().domain(_.map(function(ee,K){return K/(_.length-1)})).range(_):_;I=function(K){return Lp(D(K),R,!0)}}else{var k=Lp(_,R,!0);I=function(){return k}}for(var G=[],O=0,U=L;O<U;O++)for(var Q=I(O/(U-1)),X=0;X<E;X++)G.push(Q);return Op(G,R?4:3)}function b(_){for(var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,R=_+1,L=[],I=0,D=R;I<D;I++)for(var k=I/(D-1),G=0;G<M;G++)L.push(k);return E&&L.reverse(),Op(L,1)}}}),b3=window.THREE?window.THREE:{Euler:Jr,Mesh:fi,MeshLambertMaterial:bh,SphereGeometry:Xp},kte=mo({props:{tilesData:{default:[]},tileLat:{default:"lat"},tileLng:{default:"lng"},tileAltitude:{default:.01},tileWidth:{default:1},tileHeight:{default:1},tileUseGlobeProjection:{default:!0},tileMaterial:{default:function(){return new b3.MeshLambertMaterial({color:"#ffbb88",opacity:.4,transparent:!0})}},tileCurvatureResolution:{default:5},tilesTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Ar(e),t.scene=e,t.tweenGroup=r},update:function(e){var t=gt(e.tileLat),n=gt(e.tileLng),r=gt(e.tileAltitude),s=gt(e.tileWidth),o=gt(e.tileHeight),a=gt(e.tileUseGlobeProjection),l=gt(e.tileMaterial),u=gt(e.tileCurvatureResolution);Jl(e.tilesData,e.scene,{createObj:function(){var h=new b3.Mesh;return h.__globeObjType="tile",h},updateObj:function(h,f){h.material=l(f);var d=a(f),p=u(f),v=function(E){var R=h.__currentTargetD=E,L=R.lat,I=R.lng,D=R.alt,k=R.width,G=R.height,O=wg(I),U=wg(-L);h.geometry&&h.geometry.dispose(),h.geometry=new b3.SphereGeometry(ms*(1+D),Math.ceil(k/(p||-1)),Math.ceil(G/(p||-1)),wg(90-k/2)+(d?O:0),wg(k),wg(90-G/2)+(d?U:0),wg(G)),d||h.setRotationFromEuler(new b3.Euler(U,O,0,"YXZ"))},b={lat:+t(f),lng:+n(f),alt:+r(f),width:+s(f),height:+o(f)},_=h.__currentTargetD||Object.assign({},b,{width:0,height:0});Object.keys(b).some(function(M){return _[M]!==b[M]})&&(!e.tilesTransitionDuration||e.tilesTransitionDuration<0?v(b):e.tweenGroup.add(new jo(_).to(b,e.tilesTransitionDuration).easing(As.Quadratic.InOut).onUpdate(v).start()))}})}}),wg=function(e){return e*Math.PI/180},Y8e={0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},ο:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"¦":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},Τ:{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},Π:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},ΐ:{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"²":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"–":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},Κ:{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},ƒ:{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},ό:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"»":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"©":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},ώ:{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"«":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"∙":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},ÿ:{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},µ:{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},Ι:{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},Ύ:{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"’":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},Ν:{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},ς:{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},Ψ:{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},ι:{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},Ά:{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},ε:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},Δ:{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"‰":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"—":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},ρ:{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},"¯":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},Η:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},Α:{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"…":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},ν:{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"¶":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},β:{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},Μ:{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},Ό:{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},Ή:{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"•":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"¥":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},γ:{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},α:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"­":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},Χ:{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"†":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"°":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},Ξ:{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "}," ":{x_min:0,x_max:0,ha:853},Ϋ:{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},"”":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},Ί:{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},Β:{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},υ:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},χ:{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},ί:{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},Ζ:{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"¨":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"‹":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"„":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},δ:{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},έ:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},ω:{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"´":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"±":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},ϋ:{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"§":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},Ω:{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},ύ:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"™":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},ή:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},Θ:{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"®":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},Ε:{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"³":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},σ:{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},ζ:{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},θ:{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},Ο:{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},Γ:{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},Έ:{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},Ώ:{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},Ϊ:{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"½":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},Ρ:{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},ª:{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"΅":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},Φ:{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"⁋":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},Σ:{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},"›":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"£":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"¬":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},λ:{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},τ:{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},ξ:{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},Λ:{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},ΰ:{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"·":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},Υ:{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},μ:{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},φ:{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"“":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},"‘":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},ϊ:{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},π:{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},ά:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"¤":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},κ:{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"‡":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},ψ:{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},η:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},Q8e="normal",K8e=1189,J8e=-100,Z8e="normal",ePe={yMin:-334,xMin:-111,yMax:1189,xMax:1672},tPe=1e3,nPe={postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) Μagenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"Μagenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:`Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r
\r
Permission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r
\r
The above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r
\r
The Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r
\r
This License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r
\r
The Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r
\r
THE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.`,manufacturer_name:"Μagenta ltd",font_sub_family_name:"Regular"},iPe=-334,rPe="Helvetiker",sPe=1522,oPe=50,aPe={glyphs:Y8e,cssFontWeight:Q8e,ascender:K8e,underlinePosition:J8e,cssFontStyle:Z8e,boundingBox:ePe,resolution:tPe,original_font_information:nPe,descender:iPe,familyName:rPe,lineHeight:sPe,underlineThickness:oPe},tc=Bi(Bi({},window.THREE?window.THREE:{BoxGeometry:qy,CircleGeometry:cm,DoubleSide:ao,Group:Cs,Mesh:fi,MeshLambertMaterial:bh,TextGeometry:Vq,Vector3:ne}),{},{Font:o8e,TextGeometry:Vq}),Ute=mo({props:{labelsData:{default:[]},labelLat:{default:"lat"},labelLng:{default:"lng"},labelAltitude:{default:0},labelText:{default:"text"},labelSize:{default:.5},labelTypeFace:{default:aPe,onChange:function(e,t){t.font=new tc.Font(e)}},labelColor:{default:function(){return"lightgrey"}},labelRotation:{default:0},labelResolution:{default:3},labelIncludeDot:{default:!0},labelDotRadius:{default:.1},labelDotOrientation:{default:function(){return"bottom"}},labelsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Ar(e),t.scene=e,t.tweenGroup=r},update:function(e){var t=gt(e.labelLat),n=gt(e.labelLng),r=gt(e.labelAltitude),s=gt(e.labelText),o=gt(e.labelSize),a=gt(e.labelRotation),l=gt(e.labelColor),u=gt(e.labelIncludeDot),c=gt(e.labelDotRadius),h=gt(e.labelDotOrientation),f=new Set(["right","top","bottom"]),d=2*Math.PI*ms/360,p=new tc.CircleGeometry(1,16);Jl(e.labelsData,e.scene,{createObj:function(){var b=new tc.MeshLambertMaterial;b.side=ao;var _=new tc.Group;_.add(new tc.Mesh(p,b));var M=new tc.Mesh(void 0,b);_.add(M);var E=new tc.Mesh;return E.visible=!1,M.add(E),_.__globeObjType="label",_},updateObj:function(b,_){var M=fs(b.children,2),E=M[0],R=M[1],L=fs(R.children,1),I=L[0],D=l(_),k=ch(D);R.material.color.set($f(D)),R.material.transparent=k<1,R.material.opacity=k;var G=u(_),O=h(_);!G||!f.has(O)&&(O="bottom");var U=G?+c(_)*d:1e-12;E.scale.x=E.scale.y=U;var Q=+o(_)*d;if(R.geometry&&R.geometry.dispose(),R.geometry=new tc.TextGeometry(s(_),{font:e.font,size:Q,depth:0,height:0,curveSegments:e.labelResolution}),I.geometry&&I.geometry.dispose(),R.geometry.computeBoundingBox(),I.geometry=wte(tc.BoxGeometry,Fi(new tc.Vector3().subVectors(R.geometry.boundingBox.max,R.geometry.boundingBox.min).toArray())),O!=="right"&&R.geometry.center(),G){var X=U+Q/2;O==="right"&&(R.position.x=X),R.position.y={right:-Q/2,top:X+Q/2,bottom:-X-Q/2}[O]}var ee=function(j){var ie=b.__currentTargetD=j,ae=ie.lat,pe=ie.lng,Pe=ie.alt,He=ie.rot,Se=ie.scale;Object.assign(b.position,rl(ae,pe,Pe)),b.lookAt(e.scene.localToWorld(new tc.Vector3(0,0,0))),b.rotateY(Math.PI),b.rotateZ(-He*Math.PI/180),b.scale.x=b.scale.y=b.scale.z=Se},K={lat:+t(_),lng:+n(_),alt:+r(_),rot:+a(_),scale:1},Z=b.__currentTargetD||Object.assign({},K,{scale:1e-12});Object.keys(K).some(function(he){return Z[he]!==K[he]})&&(!e.labelsTransitionDuration||e.labelsTransitionDuration<0?ee(K):e.tweenGroup.add(new jo(Z).to(K,e.labelsTransitionDuration).easing(As.Quadratic.InOut).onUpdate(ee).start()))}})}}),lPe=window.THREE?window.THREE:{BufferGeometry:fn},uPe=function(i){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32;nF(this,e),t=xte(this,e),t.type="CircleLineGeometry",t.parameters={radius:n,segmentCount:r};for(var s=[],o=0;o<=r;o++){var a=(o/r-.25)*Math.PI*2;s.push({x:Math.cos(a)*n,y:Math.sin(a)*n,z:0})}return t.setFromPoints(s),t}return Ste(e,i),iF(e)}(lPe.BufferGeometry),Sg=window.THREE?window.THREE:{Color:vt,Group:Cs,Line:Vl,LineBasicMaterial:ys,Vector3:ne},cPe=Ry.default||Ry,zte=mo({props:{ringsData:{default:[]},ringLat:{default:"lat"},ringLng:{default:"lng"},ringAltitude:{default:.0015},ringColor:{default:function(){return"#ffffaa"},triggerUpdate:!1},ringResolution:{default:64,triggerUpdate:!1},ringMaxRadius:{default:2,triggerUpdate:!1},ringPropagationSpeed:{default:1,triggerUpdate:!1},ringRepeatPeriod:{default:700,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},init:function(e,t,n){var r=n.tweenGroup;Ar(e),t.scene=e,t.tweenGroup=r,t.ticker=new cPe,t.ticker.onTick.add(function(s){if(t.ringsData.length){var o=gt(t.ringColor),a=gt(t.ringAltitude),l=gt(t.ringMaxRadius),u=gt(t.ringPropagationSpeed),c=gt(t.ringRepeatPeriod);t.ringsData.filter(function(h){return h.__threeObj}).forEach(function(h){var f=h.__threeObj;if((f.__nextRingTime||0)<=s){var d=c(h)/1e3;f.__nextRingTime=s+(d<=0?1/0:d);var p=new Sg.Line(new uPe(1,t.ringResolution),new Sg.LineBasicMaterial),v=o(h),b=v instanceof Array||v instanceof Function,_;b?v instanceof Array?(_=em().domain(v.map(function(G,O){return O/(v.length-1)})).range(v),p.material.transparent=v.some(function(G){return ch(G)<1})):(_=v,p.material.transparent=!0):(p.material.color=new Sg.Color($f(v)),C8e(p.material,ch(v)));var M=ms*(1+a(h)),E=l(h),R=E*Math.PI/180,L=u(h),I=L<=0,D=function(O){var U=O.t,Q=(I?1-U:U)*R;if(p.scale.x=p.scale.y=M*Math.sin(Q),p.position.z=M*(1-Math.cos(Q)),b){var X=_(U);p.material.color=new Sg.Color($f(X)),p.material.transparent&&(p.material.opacity=ch(X))}};if(L===0)D({t:0}),f.add(p);else{var k=Math.abs(E/L)*1e3;t.tweenGroup.add(new jo({t:0}).to({t:1},k).onUpdate(D).onStart(function(){return f.add(p)}).onComplete(function(){f.remove(p),sF(p)}).start())}}})}})},update:function(e){var t=gt(e.ringLat),n=gt(e.ringLng),r=gt(e.ringAltitude),s=e.scene.localToWorld(new Sg.Vector3(0,0,0));Jl(e.ringsData,e.scene,{createObj:function(){var a=new Sg.Group;return a.__globeObjType="ring",a},updateObj:function(a,l){var u=t(l),c=n(l),h=r(l);Object.assign(a.position,rl(u,c,h)),a.lookAt(s)}},{removeDelay:3e4})}}),hPe=Bi(Bi({},window.THREE?window.THREE:{}),{},{CSS2DObject:zMe}),Gte=mo({props:{htmlElementsData:{default:[]},htmlLat:{default:"lat"},htmlLng:{default:"lng"},htmlAltitude:{default:0},htmlElement:{},htmlTransitionDuration:{default:1e3,triggerUpdate:!1},isBehindGlobe:{onChange:function(){this.updateObjVisibility()},triggerUpdate:!1}},methods:{updateObjVisibility:function(e,t){var n=t?[t]:e.htmlElementsData.map(function(r){return r.__threeObj}).filter(function(r){return r});n.forEach(function(r){return r.visible=!e.isBehindGlobe||!e.isBehindGlobe(r.position)})}},init:function(e,t,n){var r=n.tweenGroup;Ar(e),t.scene=e,t.tweenGroup=r},update:function(e,t){var n=this,r=gt(e.htmlLat),s=gt(e.htmlLng),o=gt(e.htmlAltitude),a=gt(e.htmlElement);Jl(e.htmlElementsData,e.scene,{purge:t.hasOwnProperty("htmlElement"),createObj:function(u){var c=a(u),h=new hPe.CSS2DObject(c);return h.__globeObjType="html",h},updateObj:function(u,c){var h=function(p){var v=u.__currentTargetD=p,b=v.alt,_=v.lat,M=v.lng;Object.assign(u.position,rl(_,M,b)),n.updateObjVisibility(u)},f={lat:+r(c),lng:+s(c),alt:+o(c)};!e.htmlTransitionDuration||e.htmlTransitionDuration<0||!u.__currentTargetD?h(f):e.tweenGroup.add(new jo(u.__currentTargetD).to(f,e.htmlTransitionDuration).easing(As.Quadratic.InOut).onUpdate(h).start())}})}}),w3=window.THREE?window.THREE:{Euler:Jr,Group:Cs,Mesh:fi,MeshLambertMaterial:bh,SphereGeometry:Xp},Hte=mo({props:{objectsData:{default:[]},objectLat:{default:"lat"},objectLng:{default:"lng"},objectAltitude:{default:.01},objectFacesSurface:{default:!0},objectRotation:{},objectThreeObject:{default:new w3.Mesh(new w3.SphereGeometry(1,16,8),new w3.MeshLambertMaterial({color:"#ffffaa",transparent:!0,opacity:.7}))}},init:function(e,t){Ar(e),t.scene=e},update:function(e,t){var n=gt(e.objectLat),r=gt(e.objectLng),s=gt(e.objectAltitude),o=gt(e.objectFacesSurface),a=gt(e.objectRotation),l=gt(e.objectThreeObject);Jl(e.objectsData,e.scene,{purge:t.hasOwnProperty("objectThreeObject"),createObj:function(c){var h=l(c);e.objectThreeObject===h&&(h=h.clone());var f=new w3.Group;return f.add(h),f.__globeObjType="object",f},updateObj:function(c,h){var f=+n(h),d=+r(h),p=+s(h);Object.assign(c.position,rl(f,d,p)),o(h)?c.setRotationFromEuler(new Jr(n0(-f),n0(d),0,"YXZ")):c.rotation.set(0,0,0);var v=c.children[0],b=a(h);b&&v.setRotationFromEuler(new Jr(n0(b.x||0),n0(b.y||0),n0(b.z||0)))}})}}),qte=mo({props:{customLayerData:{default:[]},customThreeObject:{},customThreeObjectUpdate:{triggerUpdate:!1}},init:function(e,t){Ar(e),t.scene=e},update:function(e,t){e.customThreeObjectUpdate||Ar(e.scene);var n=gt(e.customThreeObject),r=gt(e.customThreeObjectUpdate);Jl(e.customLayerData,e.scene,{purge:t.hasOwnProperty("customThreeObject"),createObj:function(o){var a=n(o,ms);return a&&(e.customThreeObject===a&&(a=a.clone()),a.__globeObjType="custom"),a},updateObj:function(o,a){return r(o,a,ms)}})}}),cP=window.THREE?window.THREE:{Group:Cs,Vector2:je,Vector3:ne},fPe=["globeLayer","pointsLayer","arcsLayer","hexBinLayer","heatmapsLayer","polygonsLayer","hexedPolygonsLayer","pathsLayer","tilesLayer","labelsLayer","ringsLayer","htmlElementsLayer","objectsLayer","customLayer"],Vte=ul("globeLayer",Rte),dPe=Object.assign.apply(Object,Fi(["globeImageUrl","bumpImageUrl","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude"].map(function(i){return Wo({},i,Vte.linkProp(i))}))),pPe=Object.assign.apply(Object,Fi(["globeMaterial"].map(function(i){return Wo({},i,Vte.linkMethod(i))}))),APe=ul("pointsLayer",Pte),mPe=Object.assign.apply(Object,Fi(["pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration"].map(function(i){return Wo({},i,APe.linkProp(i))}))),gPe=ul("arcsLayer",Bte),yPe=Object.assign.apply(Object,Fi(["arcsData","arcStartLat","arcStartLng","arcEndLat","arcEndLng","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration"].map(function(i){return Wo({},i,gPe.linkProp(i))}))),vPe=ul("hexBinLayer",Ite),_Pe=Object.assign.apply(Object,Fi(["hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration"].map(function(i){return Wo({},i,vPe.linkProp(i))}))),xPe=ul("heatmapsLayer",Dte),bPe=Object.assign.apply(Object,Fi(["heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration"].map(function(i){return Wo({},i,xPe.linkProp(i))}))),wPe=ul("hexedPolygonsLayer",Ote),SPe=Object.assign.apply(Object,Fi(["hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration"].map(function(i){return Wo({},i,wPe.linkProp(i))}))),MPe=ul("polygonsLayer",Lte),TPe=Object.assign.apply(Object,Fi(["polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration"].map(function(i){return Wo({},i,MPe.linkProp(i))}))),EPe=ul("pathsLayer",Fte),CPe=Object.assign.apply(Object,Fi(["pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration"].map(function(i){return Wo({},i,EPe.linkProp(i))}))),RPe=ul("tilesLayer",kte),PPe=Object.assign.apply(Object,Fi(["tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration"].map(function(i){return Wo({},i,RPe.linkProp(i))}))),BPe=ul("labelsLayer",Ute),IPe=Object.assign.apply(Object,Fi(["labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration"].map(function(i){return Wo({},i,BPe.linkProp(i))}))),NPe=ul("ringsLayer",zte),DPe=Object.assign.apply(Object,Fi(["ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod"].map(function(i){return Wo({},i,NPe.linkProp(i))}))),LPe=ul("htmlElementsLayer",Gte),OPe=Object.assign.apply(Object,Fi(["htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlTransitionDuration"].map(function(i){return Wo({},i,LPe.linkProp(i))}))),FPe=ul("objectsLayer",Hte),kPe=Object.assign.apply(Object,Fi(["objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject"].map(function(i){return Wo({},i,FPe.linkProp(i))}))),UPe=ul("customLayer",qte),zPe=Object.assign.apply(Object,Fi(["customLayerData","customThreeObject","customThreeObjectUpdate"].map(function(i){return Wo({},i,UPe.linkProp(i))}))),GPe=mo({props:Bi(Bi(Bi(Bi(Bi(Bi(Bi(Bi(Bi(Bi(Bi(Bi(Bi(Bi({onGlobeReady:{triggerUpdate:!1},rendererSize:{default:new cP.Vector2(window.innerWidth,window.innerHeight),onChange:function(e,t){t.pathsLayer.rendererSize(e)},triggerUpdate:!1}},dPe),mPe),yPe),_Pe),bPe),TPe),SPe),CPe),PPe),IPe),DPe),OPe),kPe),zPe),methods:Bi({getGlobeRadius:$q,getCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rl.apply(void 0,n)},toGeoCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Cte.apply(void 0,n)},setPointOfView:function(e,t,n){var r=void 0;if(t){var s=$q(),o=n?t.clone().sub(n):t,a,l,u;r=function(h){a===void 0&&(a=o.length()),l===void 0&&(l=Math.sqrt(Math.pow(a,2)-Math.pow(s,2))),u===void 0&&(u=Math.acos(l/a));var f=o.distanceTo(h);if(f<l)return!1;var d=h.length(),p=Math.acos((Math.pow(a,2)+Math.pow(f,2)-Math.pow(d,2))/(2*a*f));return p<u}}e.layersThatNeedBehindGlobeChecker.forEach(function(c){return c.isBehindGlobe(r)})},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),e.pausableLayers.forEach(function(t){var n;return(n=t.pauseAnimation)===null||n===void 0?void 0:n.call(t)}),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),e.pausableLayers.forEach(function(t){var n;return(n=t.resumeAnimation)===null||n===void 0?void 0:n.call(t)}),this},_animationCycle:function(e){e.animationFrameRequestId=requestAnimationFrame(this._animationCycle),e.tweenGroup.update()},_destructor:function(e){this.pauseAnimation(),e.destructableLayers.forEach(function(t){return t._destructor()})}},pPe),stateInit:function(){var e=new k4,t={tweenGroup:e},n={globeLayer:Rte(t),pointsLayer:Pte(t),arcsLayer:Bte(t),hexBinLayer:Ite(t),heatmapsLayer:Dte(t),polygonsLayer:Lte(t),hexedPolygonsLayer:Ote(t),pathsLayer:Fte(t),tilesLayer:kte(t),labelsLayer:Ute(t),ringsLayer:zte(t),htmlElementsLayer:Gte(t),objectsLayer:Hte(t),customLayer:qte(t)};return Bi(Bi({tweenGroup:e},n),{},{layersThatNeedBehindGlobeChecker:Object.values(n).filter(function(r){return r.hasOwnProperty("isBehindGlobe")}),destructableLayers:Object.values(n).filter(function(r){return r.hasOwnProperty("_destructor")}),pausableLayers:Object.values(n).filter(function(r){return r.hasOwnProperty("pauseAnimation")})})},init:function(e,t,n){var r=n.animateIn,s=r===void 0?!0:r,o=n.waitForGlobeReady,a=o===void 0?!0:o;Ar(e),t.scene=e,t.scene.visible=!1,fPe.forEach(function(u){var c=new cP.Group;t.scene.add(c),t[u](c)});var l=function(){if(s){t.scene.scale.set(1e-6,1e-6,1e-6),t.tweenGroup.add(new jo({k:1e-6}).to({k:1},600).easing(As.Quadratic.Out).onUpdate(function(h){var f=h.k;return t.scene.scale.set(f,f,f)}).start());var c=new cP.Vector3(0,1,0);t.tweenGroup.add(new jo({rot:Math.PI*2}).to({rot:0},1200).easing(As.Quintic.Out).onUpdate(function(h){var f=h.rot;return t.scene.setRotationFromAxisAngle(c,f)}).start())}t.scene.visible=!0,t.onGlobeReady&&t.onGlobeReady()};a?t.globeLayer.onReady(l):l(),this._animationCycle()},update:function(e){}});function HPe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=function(r){function s(){var o;nF(this,s);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return o=xte(this,s,[].concat(l)),o.__kapsuleInstance=i.apply(void 0,l).apply(void 0,[].concat(Fi(t?[o]:[]),l)),o}return Ste(s,r),iF(s)}(e);return Object.keys(i()).forEach(function(r){return n.prototype[r]=function(){var s,o=(s=this.__kapsuleInstance)[r].apply(s,arguments);return o===this.__kapsuleInstance?this:o}}),n}var qPe=window.THREE?window.THREE:{Group:Cs},jte=HPe(GPe,qPe.Group,!0);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const q4="169",VPe=0,jPe=1,$Pe=2,WPe=1,S3=3,Dx=0,Jf=1,rC=2,Iy=0,_p=1,sC=2,oC=3,aC=4,$te=5,tp=100,Wte=101,Xte=102,XPe=103,YPe=104,Yte=200,Qte=201,Kte=202,Jte=203,lC=204,uC=205,Zte=206,ene=207,tne=208,nne=209,ine=210,rne=0,sne=1,one=2,cC=3,ane=4,lne=5,une=6,cne=7,V4=0,QPe=1,KPe=2,$1=0,JPe=1,ZPe=2,e6e=3,t6e=4,n6e=6,i6e=7,hne=300,tm=301,Ny=302,Mb=303,Tb=304,pN=306,hC=1e3,x1=1001,fC=1002,uo=1003,AN=1004,W1=1005,sl=1006,mN=1007,Tf=1008,gf=1009,C_=1010,R_=1011,b1=1012,da=1013,ro=1014,Dl=1015,Ef=1016,r6e=1017,s6e=1018,Eb=1020,fne=35902,o6e=1021,oF=1022,sv=1023,a6e=1024,l6e=1025,I0=1026,Dy=1027,aF=1028,lF=1029,Lx=1030,uF=1031,u6e=1032,cF=1033,hP=33776,OM=33777,FM=33778,kM=33779,eV=35840,tV=35841,nV=35842,iV=35843,rV=36196,gN=37492,yN=37496,vN=37808,_N=37809,xN=37810,bN=37811,wN=37812,SN=37813,MN=37814,TN=37815,EN=37816,CN=37817,RN=37818,PN=37819,BN=37820,IN=37821,fP=36492,c6e=36283,sV=36284,oV=36285,aV=36286,Fp=0,h6e=1,nm="",pn="srgb",Bu="srgb-linear",f6e="display-p3",dne="display-p3-linear",NN="linear",lV="srgb",uV="rec709",cV="p3",d6e=0,KA=7680,p6e=7681,A6e=7682,m6e=7683,g6e=34055,y6e=34056,v6e=5386,_6e=512,x6e=513,b6e=514,w6e=515,S6e=516,M6e=517,T6e=518,DN=519,pne=512,hF=513,Ane=514,mne=515,gne=516,yne=517,vne=518,_ne=519,dC=35044,w1=35048,mc=2e3,im=2001;class ov{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Po=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let hV=1234567;const P_=Math.PI/180,Ox=180/Math.PI;function Cf(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Po[i&255]+Po[i>>8&255]+Po[i>>16&255]+Po[i>>24&255]+"-"+Po[e&255]+Po[e>>8&255]+"-"+Po[e>>16&15|64]+Po[e>>24&255]+"-"+Po[t&63|128]+Po[t>>8&255]+"-"+Po[t>>16&255]+Po[t>>24&255]+Po[n&255]+Po[n>>8&255]+Po[n>>16&255]+Po[n>>24&255]).toLowerCase()}function so(i,e,t){return Math.max(e,Math.min(t,i))}function fF(i,e){return(i%e+e)%e}function E6e(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function C6e(i,e,t){return i!==e?(t-i)/(e-i):0}function B_(i,e,t){return(1-t)*i+t*e}function R6e(i,e,t,n){return B_(i,e,1-Math.exp(-t*n))}function P6e(i,e=1){return e-Math.abs(fF(i,e*2)-e)}function B6e(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function I6e(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function N6e(i,e){return i+Math.floor(Math.random()*(e-i+1))}function D6e(i,e){return i+Math.random()*(e-i)}function L6e(i){return i*(.5-Math.random())}function O6e(i){i!==void 0&&(hV=i);let e=hV+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function F6e(i){return i*P_}function k6e(i){return i*Ox}function U6e(i){return(i&i-1)===0&&i!==0}function z6e(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function G6e(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function H6e(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+n)/2),c=o((e+n)/2),h=s((e-n)/2),f=o((e-n)/2),d=s((n-e)/2),p=o((n-e)/2);switch(r){case"XYX":i.set(a*c,l*h,l*f,a*u);break;case"YZY":i.set(l*f,a*c,l*h,a*u);break;case"ZXZ":i.set(l*h,l*f,a*c,a*u);break;case"XZX":i.set(a*c,l*p,l*d,a*u);break;case"YXY":i.set(l*d,a*c,l*p,a*u);break;case"ZYZ":i.set(l*p,l*d,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ma(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function zn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const q6e={DEG2RAD:P_,RAD2DEG:Ox,generateUUID:Cf,clamp:so,euclideanModulo:fF,mapLinear:E6e,inverseLerp:C6e,lerp:B_,damp:R6e,pingpong:P6e,smoothstep:B6e,smootherstep:I6e,randInt:N6e,randFloat:D6e,randFloatSpread:L6e,seededRandom:O6e,degToRad:F6e,radToDeg:k6e,isPowerOfTwo:U6e,ceilPowerOfTwo:z6e,floorPowerOfTwo:G6e,setQuaternionFromProperEuler:H6e,normalize:zn,denormalize:ma};class gi{constructor(e=0,t=0){gi.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(so(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Zl{constructor(e,t,n,r,s,o,a,l,u){Zl.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,u)}set(e,t,n,r,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=n,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],u=n[1],c=n[4],h=n[7],f=n[2],d=n[5],p=n[8],v=r[0],b=r[3],_=r[6],M=r[1],E=r[4],R=r[7],L=r[2],I=r[5],D=r[8];return s[0]=o*v+a*M+l*L,s[3]=o*b+a*E+l*I,s[6]=o*_+a*R+l*D,s[1]=u*v+c*M+h*L,s[4]=u*b+c*E+h*I,s[7]=u*_+c*R+h*D,s[2]=f*v+d*M+p*L,s[5]=f*b+d*E+p*I,s[8]=f*_+d*R+p*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-n*s*c+n*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=c*o-a*u,f=a*l-c*s,d=u*s-o*l,p=t*h+n*f+r*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/p;return e[0]=h*v,e[1]=(r*u-c*n)*v,e[2]=(a*n-r*o)*v,e[3]=f*v,e[4]=(c*t-r*l)*v,e[5]=(r*s-a*t)*v,e[6]=d*v,e[7]=(n*l-u*t)*v,e[8]=(o*t-n*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(n*l,n*u,-n*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(dP.makeScale(e,t)),this}rotate(e){return this.premultiply(dP.makeRotation(-e)),this}translate(e,t){return this.premultiply(dP.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const dP=new Zl;function V6e(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function LN(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function j6e(){const i=LN("canvas");return i.style.display="block",i}const fV={};function $6e(i){i in fV||(fV[i]=!0,console.warn(i))}const dV=new Zl().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),pV=new Zl().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),x2={[Bu]:{transfer:NN,primaries:uV,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i,fromReference:i=>i},[pn]:{transfer:lV,primaries:uV,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[dne]:{transfer:NN,primaries:cV,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.applyMatrix3(pV),fromReference:i=>i.applyMatrix3(dV)},[f6e]:{transfer:lV,primaries:cV,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.convertSRGBToLinear().applyMatrix3(pV),fromReference:i=>i.applyMatrix3(dV).convertLinearToSRGB()}},W6e=new Set([Bu,dne]),Sl={enabled:!0,_workingColorSpace:Bu,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!W6e.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;const n=x2[e].toReference,r=x2[t].fromReference;return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this._workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this._workingColorSpace)},getPrimaries:function(i){return x2[i].primaries},getTransfer:function(i){return i===nm?NN:x2[i].transfer},getLuminanceCoefficients:function(i,e=this._workingColorSpace){return i.fromArray(x2[e].luminanceCoefficients)}};function X1(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function pP(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Mg;class X6e{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Mg===void 0&&(Mg=LN("canvas")),Mg.width=e.width,Mg.height=e.height;const n=Mg.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Mg}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=LN("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=X1(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(X1(t[n]/255)*255):t[n]=X1(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Y6e=0;class xne{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Y6e++}),this.uuid=Cf(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(AP(r[o].image)):s.push(AP(r[o]))}else s=AP(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function AP(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?X6e.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Q6e=0;class ba extends ov{constructor(e=ba.DEFAULT_IMAGE,t=ba.DEFAULT_MAPPING,n=x1,r=x1,s=sl,o=Tf,a=sv,l=gf,u=ba.DEFAULT_ANISOTROPY,c=nm){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Q6e++}),this.uuid=Cf(),this.name="",this.source=new xne(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new gi(0,0),this.repeat=new gi(1,1),this.center=new gi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zl,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==hne)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case hC:e.x=e.x-Math.floor(e.x);break;case x1:e.x=e.x<0?0:1;break;case fC:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case hC:e.y=e.y-Math.floor(e.y);break;case x1:e.y=e.y<0?0:1;break;case fC:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ba.DEFAULT_IMAGE=null;ba.DEFAULT_MAPPING=hne;ba.DEFAULT_ANISOTROPY=1;class Ni{constructor(e=0,t=0,n=0,r=1){Ni.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,u=l[0],c=l[4],h=l[8],f=l[1],d=l[5],p=l[9],v=l[2],b=l[6],_=l[10];if(Math.abs(c-f)<.01&&Math.abs(h-v)<.01&&Math.abs(p-b)<.01){if(Math.abs(c+f)<.1&&Math.abs(h+v)<.1&&Math.abs(p+b)<.1&&Math.abs(u+d+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(u+1)/2,R=(d+1)/2,L=(_+1)/2,I=(c+f)/4,D=(h+v)/4,k=(p+b)/4;return E>R&&E>L?E<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(E),r=I/n,s=D/n):R>L?R<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(R),n=I/r,s=k/r):L<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(L),n=D/s,r=k/s),this.set(n,r,s,t),this}let M=Math.sqrt((b-p)*(b-p)+(h-v)*(h-v)+(f-c)*(f-c));return Math.abs(M)<.001&&(M=1),this.x=(b-p)/M,this.y=(h-v)/M,this.z=(f-c)/M,this.w=Math.acos((u+d+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class av extends ov{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ni(0,0,e,t),this.scissorTest=!1,this.viewport=new Ni(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:sl,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new ba(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new xne(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class K6e extends av{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class J6e extends ba{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=uo,this.minFilter=uo,this.wrapR=x1,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Cb{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],u=n[r+1],c=n[r+2],h=n[r+3];const f=s[o+0],d=s[o+1],p=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h;return}if(a===1){e[t+0]=f,e[t+1]=d,e[t+2]=p,e[t+3]=v;return}if(h!==v||l!==f||u!==d||c!==p){let b=1-a;const _=l*f+u*d+c*p+h*v,M=_>=0?1:-1,E=1-_*_;if(E>Number.EPSILON){const L=Math.sqrt(E),I=Math.atan2(L,_*M);b=Math.sin(b*I)/L,a=Math.sin(a*I)/L}const R=a*M;if(l=l*b+f*R,u=u*b+d*R,c=c*b+p*R,h=h*b+v*R,b===1-a){const L=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=L,u*=L,c*=L,h*=L}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],u=n[r+2],c=n[r+3],h=s[o],f=s[o+1],d=s[o+2],p=s[o+3];return e[t]=a*p+c*h+l*d-u*f,e[t+1]=l*p+c*f+u*h-a*d,e[t+2]=u*p+c*d+a*f-l*h,e[t+3]=c*p-a*h-l*f-u*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(n/2),c=a(r/2),h=a(s/2),f=l(n/2),d=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=f*c*h+u*d*p,this._y=u*d*h-f*c*p,this._z=u*c*p+f*d*h,this._w=u*c*h-f*d*p;break;case"YXZ":this._x=f*c*h+u*d*p,this._y=u*d*h-f*c*p,this._z=u*c*p-f*d*h,this._w=u*c*h+f*d*p;break;case"ZXY":this._x=f*c*h-u*d*p,this._y=u*d*h+f*c*p,this._z=u*c*p+f*d*h,this._w=u*c*h-f*d*p;break;case"ZYX":this._x=f*c*h-u*d*p,this._y=u*d*h+f*c*p,this._z=u*c*p-f*d*h,this._w=u*c*h+f*d*p;break;case"YZX":this._x=f*c*h+u*d*p,this._y=u*d*h+f*c*p,this._z=u*c*p-f*d*h,this._w=u*c*h-f*d*p;break;case"XZY":this._x=f*c*h-u*d*p,this._y=u*d*h-f*c*p,this._z=u*c*p+f*d*h,this._w=u*c*h+f*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],h=t[10],f=n+a+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-l)*d,this._y=(s-u)*d,this._z=(o-r)*d}else if(n>a&&n>h){const d=2*Math.sqrt(1+n-a-h);this._w=(c-l)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(s+u)/d}else if(a>h){const d=2*Math.sqrt(1+a-n-h);this._w=(s-u)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+h-n-a);this._w=(o-r)/d,this._x=(s+u)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(so(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=n*c+o*a+r*u-s*l,this._y=r*c+o*l+s*a-n*u,this._z=s*c+o*u+n*l-r*a,this._w=o*c-n*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*n+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),h=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=o*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ze{constructor(e=0,t=0,n=0){ze.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(AV.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(AV.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*n),c=2*(a*t-s*r),h=2*(s*n-o*t);return this.x=t+l*u+o*h-a*c,this.y=n+l*c+a*u-s*h,this.z=r+l*h+s*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return mP.copy(this).projectOnVector(e),this.sub(mP)}reflect(e){return this.sub(mP.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(so(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const mP=new ze,AV=new Cb;class Rb{constructor(e=new ze(1/0,1/0,1/0),t=new ze(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(nc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(nc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=nc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,nc):nc.fromBufferAttribute(s,o),nc.applyMatrix4(e.matrixWorld),this.expandByPoint(nc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),M3.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),M3.copy(n.boundingBox)),M3.applyMatrix4(e.matrixWorld),this.union(M3)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,nc),nc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(b2),T3.subVectors(this.max,b2),Tg.subVectors(e.a,b2),Eg.subVectors(e.b,b2),Cg.subVectors(e.c,b2),Fd.subVectors(Eg,Tg),kd.subVectors(Cg,Eg),zA.subVectors(Tg,Cg);let t=[0,-Fd.z,Fd.y,0,-kd.z,kd.y,0,-zA.z,zA.y,Fd.z,0,-Fd.x,kd.z,0,-kd.x,zA.z,0,-zA.x,-Fd.y,Fd.x,0,-kd.y,kd.x,0,-zA.y,zA.x,0];return!gP(t,Tg,Eg,Cg,T3)||(t=[1,0,0,0,1,0,0,0,1],!gP(t,Tg,Eg,Cg,T3))?!1:(E3.crossVectors(Fd,kd),t=[E3.x,E3.y,E3.z],gP(t,Tg,Eg,Cg,T3))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,nc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(nc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:($h[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$h[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$h[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$h[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$h[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$h[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$h[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$h[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($h),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const $h=[new ze,new ze,new ze,new ze,new ze,new ze,new ze,new ze],nc=new ze,M3=new Rb,Tg=new ze,Eg=new ze,Cg=new ze,Fd=new ze,kd=new ze,zA=new ze,b2=new ze,T3=new ze,E3=new ze,GA=new ze;function gP(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){GA.fromArray(i,s);const a=r.x*Math.abs(GA.x)+r.y*Math.abs(GA.y)+r.z*Math.abs(GA.z),l=e.dot(GA),u=t.dot(GA),c=n.dot(GA);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const Z6e=new Rb,w2=new ze,yP=new ze;class dF{constructor(e=new ze,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Z6e.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;w2.subVectors(e,this.center);const t=w2.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(w2,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(yP.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(w2.copy(e.center).add(yP)),this.expandByPoint(w2.copy(e.center).sub(yP))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Wh=new ze,vP=new ze,C3=new ze,Ud=new ze,_P=new ze,R3=new ze,xP=new ze;class eBe{constructor(e=new ze,t=new ze(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Wh)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Wh.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Wh.copy(this.origin).addScaledVector(this.direction,t),Wh.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){vP.copy(e).add(t).multiplyScalar(.5),C3.copy(t).sub(e).normalize(),Ud.copy(this.origin).sub(vP);const s=e.distanceTo(t)*.5,o=-this.direction.dot(C3),a=Ud.dot(this.direction),l=-Ud.dot(C3),u=Ud.lengthSq(),c=Math.abs(1-o*o);let h,f,d,p;if(c>0)if(h=o*l-a,f=o*a-l,p=s*c,h>=0)if(f>=-p)if(f<=p){const v=1/c;h*=v,f*=v,d=h*(h+o*f+2*a)+f*(o*h+f+2*l)+u}else f=s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+u;else f=-s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+u;else f<=-p?(h=Math.max(0,-(-o*s+a)),f=h>0?-s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+u):f<=p?(h=0,f=Math.min(Math.max(-s,-l),s),d=f*(f+2*l)+u):(h=Math.max(0,-(o*s+a)),f=h>0?s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+u);else f=o>0?-s:s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(vP).addScaledVector(C3,f),d}intersectSphere(e,t){Wh.subVectors(e.center,this.origin);const n=Wh.dot(this.direction),r=Wh.dot(Wh)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,f=this.origin;return u>=0?(n=(e.min.x-f.x)*u,r=(e.max.x-f.x)*u):(n=(e.max.x-f.x)*u,r=(e.min.x-f.x)*u),c>=0?(s=(e.min.y-f.y)*c,o=(e.max.y-f.y)*c):(s=(e.max.y-f.y)*c,o=(e.min.y-f.y)*c),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),n>l||a>r)||((a>n||n!==n)&&(n=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Wh)!==null}intersectTriangle(e,t,n,r,s){_P.subVectors(t,e),R3.subVectors(n,e),xP.crossVectors(_P,R3);let o=this.direction.dot(xP),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ud.subVectors(this.origin,e);const l=a*this.direction.dot(R3.crossVectors(Ud,R3));if(l<0)return null;const u=a*this.direction.dot(_P.cross(Ud));if(u<0||l+u>o)return null;const c=-a*Ud.dot(xP);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Rr{constructor(e,t,n,r,s,o,a,l,u,c,h,f,d,p,v,b){Rr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,u,c,h,f,d,p,v,b)}set(e,t,n,r,s,o,a,l,u,c,h,f,d,p,v,b){const _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=u,_[6]=c,_[10]=h,_[14]=f,_[3]=d,_[7]=p,_[11]=v,_[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Rr().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Rg.setFromMatrixColumn(e,0).length(),s=1/Rg.setFromMatrixColumn(e,1).length(),o=1/Rg.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),u=Math.sin(r),c=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=o*c,d=o*h,p=a*c,v=a*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=d+p*u,t[5]=f-v*u,t[9]=-a*l,t[2]=v-f*u,t[6]=p+d*u,t[10]=o*l}else if(e.order==="YXZ"){const f=l*c,d=l*h,p=u*c,v=u*h;t[0]=f+v*a,t[4]=p*a-d,t[8]=o*u,t[1]=o*h,t[5]=o*c,t[9]=-a,t[2]=d*a-p,t[6]=v+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*c,d=l*h,p=u*c,v=u*h;t[0]=f-v*a,t[4]=-o*h,t[8]=p+d*a,t[1]=d+p*a,t[5]=o*c,t[9]=v-f*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*c,d=o*h,p=a*c,v=a*h;t[0]=l*c,t[4]=p*u-d,t[8]=f*u+v,t[1]=l*h,t[5]=v*u+f,t[9]=d*u-p,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,d=o*u,p=a*l,v=a*u;t[0]=l*c,t[4]=v-f*h,t[8]=p*h+d,t[1]=h,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=d*h+p,t[10]=f-v*h}else if(e.order==="XZY"){const f=o*l,d=o*u,p=a*l,v=a*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=f*h+v,t[5]=o*c,t[9]=d*h-p,t[2]=p*h-d,t[6]=a*c,t[10]=v*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(tBe,e,nBe)}lookAt(e,t,n){const r=this.elements;return vl.subVectors(e,t),vl.lengthSq()===0&&(vl.z=1),vl.normalize(),zd.crossVectors(n,vl),zd.lengthSq()===0&&(Math.abs(n.z)===1?vl.x+=1e-4:vl.z+=1e-4,vl.normalize(),zd.crossVectors(n,vl)),zd.normalize(),P3.crossVectors(vl,zd),r[0]=zd.x,r[4]=P3.x,r[8]=vl.x,r[1]=zd.y,r[5]=P3.y,r[9]=vl.y,r[2]=zd.z,r[6]=P3.z,r[10]=vl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],u=n[12],c=n[1],h=n[5],f=n[9],d=n[13],p=n[2],v=n[6],b=n[10],_=n[14],M=n[3],E=n[7],R=n[11],L=n[15],I=r[0],D=r[4],k=r[8],G=r[12],O=r[1],U=r[5],Q=r[9],X=r[13],ee=r[2],K=r[6],Z=r[10],he=r[14],j=r[3],ie=r[7],ae=r[11],pe=r[15];return s[0]=o*I+a*O+l*ee+u*j,s[4]=o*D+a*U+l*K+u*ie,s[8]=o*k+a*Q+l*Z+u*ae,s[12]=o*G+a*X+l*he+u*pe,s[1]=c*I+h*O+f*ee+d*j,s[5]=c*D+h*U+f*K+d*ie,s[9]=c*k+h*Q+f*Z+d*ae,s[13]=c*G+h*X+f*he+d*pe,s[2]=p*I+v*O+b*ee+_*j,s[6]=p*D+v*U+b*K+_*ie,s[10]=p*k+v*Q+b*Z+_*ae,s[14]=p*G+v*X+b*he+_*pe,s[3]=M*I+E*O+R*ee+L*j,s[7]=M*D+E*U+R*K+L*ie,s[11]=M*k+E*Q+R*Z+L*ae,s[15]=M*G+E*X+R*he+L*pe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],h=e[6],f=e[10],d=e[14],p=e[3],v=e[7],b=e[11],_=e[15];return p*(+s*l*h-r*u*h-s*a*f+n*u*f+r*a*d-n*l*d)+v*(+t*l*d-t*u*f+s*o*f-r*o*d+r*u*c-s*l*c)+b*(+t*u*h-t*a*d-s*o*h+n*o*d+s*a*c-n*u*c)+_*(-r*a*c-t*l*h+t*a*f+r*o*h-n*o*f+n*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],b=e[14],_=e[15],M=h*b*u-v*f*u+v*l*d-a*b*d-h*l*_+a*f*_,E=p*f*u-c*b*u-p*l*d+o*b*d+c*l*_-o*f*_,R=c*v*u-p*h*u+p*a*d-o*v*d-c*a*_+o*h*_,L=p*h*l-c*v*l-p*a*f+o*v*f+c*a*b-o*h*b,I=t*M+n*E+r*R+s*L;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/I;return e[0]=M*D,e[1]=(v*f*s-h*b*s-v*r*d+n*b*d+h*r*_-n*f*_)*D,e[2]=(a*b*s-v*l*s+v*r*u-n*b*u-a*r*_+n*l*_)*D,e[3]=(h*l*s-a*f*s-h*r*u+n*f*u+a*r*d-n*l*d)*D,e[4]=E*D,e[5]=(c*b*s-p*f*s+p*r*d-t*b*d-c*r*_+t*f*_)*D,e[6]=(p*l*s-o*b*s-p*r*u+t*b*u+o*r*_-t*l*_)*D,e[7]=(o*f*s-c*l*s+c*r*u-t*f*u-o*r*d+t*l*d)*D,e[8]=R*D,e[9]=(p*h*s-c*v*s-p*n*d+t*v*d+c*n*_-t*h*_)*D,e[10]=(o*v*s-p*a*s+p*n*u-t*v*u-o*n*_+t*a*_)*D,e[11]=(c*a*s-o*h*s-c*n*u+t*h*u+o*n*d-t*a*d)*D,e[12]=L*D,e[13]=(c*v*r-p*h*r+p*n*f-t*v*f-c*n*b+t*h*b)*D,e[14]=(p*a*r-o*v*r-p*n*l+t*v*l+o*n*b-t*a*b)*D,e[15]=(o*h*r-c*a*r+c*n*l-t*h*l-o*n*f+t*a*f)*D,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+n,u*a-r*l,u*l+r*a,0,u*a+r*l,c*a+n,c*l-r*o,0,u*l-r*a,c*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,h=a+a,f=s*u,d=s*c,p=s*h,v=o*c,b=o*h,_=a*h,M=l*u,E=l*c,R=l*h,L=n.x,I=n.y,D=n.z;return r[0]=(1-(v+_))*L,r[1]=(d+R)*L,r[2]=(p-E)*L,r[3]=0,r[4]=(d-R)*I,r[5]=(1-(f+_))*I,r[6]=(b+M)*I,r[7]=0,r[8]=(p+E)*D,r[9]=(b-M)*D,r[10]=(1-(f+v))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=Rg.set(r[0],r[1],r[2]).length();const o=Rg.set(r[4],r[5],r[6]).length(),a=Rg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ic.copy(this);const u=1/s,c=1/o,h=1/a;return ic.elements[0]*=u,ic.elements[1]*=u,ic.elements[2]*=u,ic.elements[4]*=c,ic.elements[5]*=c,ic.elements[6]*=c,ic.elements[8]*=h,ic.elements[9]*=h,ic.elements[10]*=h,t.setFromRotationMatrix(ic),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o,a=mc){const l=this.elements,u=2*s/(t-e),c=2*s/(n-r),h=(t+e)/(t-e),f=(n+r)/(n-r);let d,p;if(a===mc)d=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===im)d=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,o,a=mc){const l=this.elements,u=1/(t-e),c=1/(n-r),h=1/(o-s),f=(t+e)*u,d=(n+r)*c;let p,v;if(a===mc)p=(o+s)*h,v=-2*h;else if(a===im)p=s*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=v,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Rg=new ze,ic=new Rr,tBe=new ze(0,0,0),nBe=new ze(1,1,1),zd=new ze,P3=new ze,vl=new ze,mV=new Rr,gV=new Cb;class yh{constructor(e=0,t=0,n=0,r=yh.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],c=r[9],h=r[2],f=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(so(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-so(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(so(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-so(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(so(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-so(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return mV.makeRotationFromQuaternion(e),this.setFromRotationMatrix(mV,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return gV.setFromEuler(this),this.setFromQuaternion(gV,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}yh.DEFAULT_ORDER="XYZ";class iBe{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let rBe=0;const yV=new ze,Pg=new Cb,Xh=new Rr,B3=new ze,S2=new ze,sBe=new ze,oBe=new Cb,vV=new ze(1,0,0),_V=new ze(0,1,0),xV=new ze(0,0,1),bV={type:"added"},aBe={type:"removed"},Bg={type:"childadded",child:null},bP={type:"childremoved",child:null};class js extends ov{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:rBe++}),this.uuid=Cf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=js.DEFAULT_UP.clone();const e=new ze,t=new yh,n=new Cb,r=new ze(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Rr},normalMatrix:{value:new Zl}}),this.matrix=new Rr,this.matrixWorld=new Rr,this.matrixAutoUpdate=js.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=js.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new iBe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Pg.setFromAxisAngle(e,t),this.quaternion.multiply(Pg),this}rotateOnWorldAxis(e,t){return Pg.setFromAxisAngle(e,t),this.quaternion.premultiply(Pg),this}rotateX(e){return this.rotateOnAxis(vV,e)}rotateY(e){return this.rotateOnAxis(_V,e)}rotateZ(e){return this.rotateOnAxis(xV,e)}translateOnAxis(e,t){return yV.copy(e).applyQuaternion(this.quaternion),this.position.add(yV.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(vV,e)}translateY(e){return this.translateOnAxis(_V,e)}translateZ(e){return this.translateOnAxis(xV,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Xh.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?B3.copy(e):B3.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),S2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xh.lookAt(S2,B3,this.up):Xh.lookAt(B3,S2,this.up),this.quaternion.setFromRotationMatrix(Xh),r&&(Xh.extractRotation(r.matrixWorld),Pg.setFromRotationMatrix(Xh),this.quaternion.premultiply(Pg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(bV),Bg.child=e,this.dispatchEvent(Bg),Bg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(aBe),bP.child=e,this.dispatchEvent(bP),bP.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Xh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xh.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xh),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(bV),Bg.child=e,this.dispatchEvent(Bg),Bg.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(S2,e,sBe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(S2,oBe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),h=o(e.shapes),f=o(e.skeletons),d=o(e.animations),p=o(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),c.length>0&&(n.images=c),h.length>0&&(n.shapes=h),f.length>0&&(n.skeletons=f),d.length>0&&(n.animations=d),p.length>0&&(n.nodes=p)}return n.object=r,n;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}js.DEFAULT_UP=new ze(0,1,0);js.DEFAULT_MATRIX_AUTO_UPDATE=!0;js.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const rc=new ze,Yh=new ze,wP=new ze,Qh=new ze,Ig=new ze,Ng=new ze,wV=new ze,SP=new ze,MP=new ze,TP=new ze,EP=new Ni,CP=new Ni,RP=new Ni;class dc{constructor(e=new ze,t=new ze,n=new ze){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),rc.subVectors(e,t),r.cross(rc);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){rc.subVectors(r,t),Yh.subVectors(n,t),wP.subVectors(e,t);const o=rc.dot(rc),a=rc.dot(Yh),l=rc.dot(wP),u=Yh.dot(Yh),c=Yh.dot(wP),h=o*u-a*a;if(h===0)return s.set(0,0,0),null;const f=1/h,d=(u*l-a*c)*f,p=(o*c-a*l)*f;return s.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Qh)===null?!1:Qh.x>=0&&Qh.y>=0&&Qh.x+Qh.y<=1}static getInterpolation(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,Qh)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Qh.x),l.addScaledVector(o,Qh.y),l.addScaledVector(a,Qh.z),l)}static getInterpolatedAttribute(e,t,n,r,s,o){return EP.setScalar(0),CP.setScalar(0),RP.setScalar(0),EP.fromBufferAttribute(e,t),CP.fromBufferAttribute(e,n),RP.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(EP,s.x),o.addScaledVector(CP,s.y),o.addScaledVector(RP,s.z),o}static isFrontFacing(e,t,n,r){return rc.subVectors(n,t),Yh.subVectors(e,t),rc.cross(Yh).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return rc.subVectors(this.c,this.b),Yh.subVectors(this.a,this.b),rc.cross(Yh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return dc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return dc.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return dc.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return dc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return dc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;Ig.subVectors(r,n),Ng.subVectors(s,n),SP.subVectors(e,n);const l=Ig.dot(SP),u=Ng.dot(SP);if(l<=0&&u<=0)return t.copy(n);MP.subVectors(e,r);const c=Ig.dot(MP),h=Ng.dot(MP);if(c>=0&&h<=c)return t.copy(r);const f=l*h-c*u;if(f<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(n).addScaledVector(Ig,o);TP.subVectors(e,s);const d=Ig.dot(TP),p=Ng.dot(TP);if(p>=0&&d<=p)return t.copy(s);const v=d*u-l*p;if(v<=0&&u>=0&&p<=0)return a=u/(u-p),t.copy(n).addScaledVector(Ng,a);const b=c*p-d*h;if(b<=0&&h-c>=0&&d-p>=0)return wV.subVectors(s,r),a=(h-c)/(h-c+(d-p)),t.copy(r).addScaledVector(wV,a);const _=1/(b+v+f);return o=v*_,a=f*_,t.copy(n).addScaledVector(Ig,o).addScaledVector(Ng,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const bne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Gd={h:0,s:0,l:0},I3={h:0,s:0,l:0};function PP(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Di{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=pn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Sl.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Sl.workingColorSpace){return this.r=e,this.g=t,this.b=n,Sl.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Sl.workingColorSpace){if(e=fF(e,1),t=so(t,0,1),n=so(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=PP(o,s,e+1/3),this.g=PP(o,s,e),this.b=PP(o,s,e-1/3)}return Sl.toWorkingColorSpace(this,r),this}setStyle(e,t=pn){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=pn){const n=bne[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=X1(e.r),this.g=X1(e.g),this.b=X1(e.b),this}copyLinearToSRGB(e){return this.r=pP(e.r),this.g=pP(e.g),this.b=pP(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=pn){return Sl.fromWorkingColorSpace(Bo.copy(this),e),Math.round(so(Bo.r*255,0,255))*65536+Math.round(so(Bo.g*255,0,255))*256+Math.round(so(Bo.b*255,0,255))}getHexString(e=pn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Sl.workingColorSpace){Sl.fromWorkingColorSpace(Bo.copy(this),t);const n=Bo.r,r=Bo.g,s=Bo.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const h=o-a;switch(u=c<=.5?h/(o+a):h/(2-o-a),o){case n:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-n)/h+2;break;case s:l=(n-r)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Sl.workingColorSpace){return Sl.fromWorkingColorSpace(Bo.copy(this),t),e.r=Bo.r,e.g=Bo.g,e.b=Bo.b,e}getStyle(e=pn){Sl.fromWorkingColorSpace(Bo.copy(this),e);const t=Bo.r,n=Bo.g,r=Bo.b;return e!==pn?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Gd),this.setHSL(Gd.h+e,Gd.s+t,Gd.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Gd),e.getHSL(I3);const n=B_(Gd.h,I3.h,t),r=B_(Gd.s,I3.s,t),s=B_(Gd.l,I3.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Bo=new Di;Di.NAMES=bne;let lBe=0;class ol extends ov{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:lBe++}),this.uuid=Cf(),this.name="",this.type="Material",this.blending=_p,this.side=Dx,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=lC,this.blendDst=uC,this.blendEquation=tp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Di(0,0,0),this.blendAlpha=0,this.depthFunc=cC,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=DN,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KA,this.stencilZFail=KA,this.stencilZPass=KA,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==_p&&(n.blending=this.blending),this.side!==Dx&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==lC&&(n.blendSrc=this.blendSrc),this.blendDst!==uC&&(n.blendDst=this.blendDst),this.blendEquation!==tp&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==cC&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==DN&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KA&&(n.stencilFail=this.stencilFail),this.stencilZFail!==KA&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==KA&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class j4 extends ol{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Di(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yh,this.combine=V4,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ff=uBe();function uBe(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(n[l]=0,n[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(n[l]=1024>>-u-14,n[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(n[l]=u+15<<10,n[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(n[l]=31744,n[l|256]=64512,r[l]=24,r[l|256]=24):(n[l]=31744,n[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function _l(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=so(i,-65504,65504),ff.floatView[0]=i;const e=ff.uint32View[0],t=e>>23&511;return ff.baseTable[t]+((e&8388607)>>ff.shiftTable[t])}function N3(i){const e=i>>10;return ff.uint32View[0]=ff.mantissaTable[ff.offsetTable[e]+(i&1023)]+ff.exponentTable[e],ff.floatView[0]}const ss=new ze,D3=new gi;class Iu{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=dC,this.updateRanges=[],this.gpuType=Dl,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)D3.fromBufferAttribute(this,t),D3.applyMatrix3(e),this.setXY(t,D3.x,D3.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.applyMatrix3(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.applyMatrix4(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.applyNormalMatrix(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.transformDirection(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ma(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=zn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ma(t,this.array)),t}setX(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ma(t,this.array)),t}setY(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ma(t,this.array)),t}setZ(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ma(t,this.array)),t}setW(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array),r=zn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array),r=zn(r,this.array),s=zn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==dC&&(e.usage=this.usage),e}}class wne extends Iu{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Sne extends Iu{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Mne extends Iu{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=N3(this.array[e*this.itemSize]);return this.normalized&&(t=ma(t,this.array)),t}setX(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize]=_l(t),this}getY(e){let t=N3(this.array[e*this.itemSize+1]);return this.normalized&&(t=ma(t,this.array)),t}setY(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+1]=_l(t),this}getZ(e){let t=N3(this.array[e*this.itemSize+2]);return this.normalized&&(t=ma(t,this.array)),t}setZ(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+2]=_l(t),this}getW(e){let t=N3(this.array[e*this.itemSize+3]);return this.normalized&&(t=ma(t,this.array)),t}setW(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+3]=_l(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array)),this.array[e+0]=_l(t),this.array[e+1]=_l(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array),r=zn(r,this.array)),this.array[e+0]=_l(t),this.array[e+1]=_l(n),this.array[e+2]=_l(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array),r=zn(r,this.array),s=zn(s,this.array)),this.array[e+0]=_l(t),this.array[e+1]=_l(n),this.array[e+2]=_l(r),this.array[e+3]=_l(s),this}}class Rf extends Iu{constructor(e,t,n){super(new Float32Array(e),t,n)}}let cBe=0;const Au=new Rr,BP=new js,Dg=new ze,xl=new Rb,M2=new Rb,Us=new ze;class gm extends ov{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:cBe++}),this.uuid=Cf(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(V6e(e)?Sne:wne)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Zl().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Au.makeRotationFromQuaternion(e),this.applyMatrix4(Au),this}rotateX(e){return Au.makeRotationX(e),this.applyMatrix4(Au),this}rotateY(e){return Au.makeRotationY(e),this.applyMatrix4(Au),this}rotateZ(e){return Au.makeRotationZ(e),this.applyMatrix4(Au),this}translate(e,t,n){return Au.makeTranslation(e,t,n),this.applyMatrix4(Au),this}scale(e,t,n){return Au.makeScale(e,t,n),this.applyMatrix4(Au),this}lookAt(e){return BP.lookAt(e),BP.updateMatrix(),this.applyMatrix4(BP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Dg).negate(),this.translate(Dg.x,Dg.y,Dg.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Rf(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Rb);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ze(-1/0,-1/0,-1/0),new ze(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];xl.setFromBufferAttribute(s),this.morphTargetsRelative?(Us.addVectors(this.boundingBox.min,xl.min),this.boundingBox.expandByPoint(Us),Us.addVectors(this.boundingBox.max,xl.max),this.boundingBox.expandByPoint(Us)):(this.boundingBox.expandByPoint(xl.min),this.boundingBox.expandByPoint(xl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new dF);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ze,1/0);return}if(e){const n=this.boundingSphere.center;if(xl.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];M2.setFromBufferAttribute(a),this.morphTargetsRelative?(Us.addVectors(xl.min,M2.min),xl.expandByPoint(Us),Us.addVectors(xl.max,M2.max),xl.expandByPoint(Us)):(xl.expandByPoint(M2.min),xl.expandByPoint(M2.max))}xl.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)Us.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Us));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)Us.fromBufferAttribute(a,u),l&&(Dg.fromBufferAttribute(e,u),Us.add(Dg)),r=Math.max(r,n.distanceToSquared(Us))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Iu(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let k=0;k<n.count;k++)a[k]=new ze,l[k]=new ze;const u=new ze,c=new ze,h=new ze,f=new gi,d=new gi,p=new gi,v=new ze,b=new ze;function _(k,G,O){u.fromBufferAttribute(n,k),c.fromBufferAttribute(n,G),h.fromBufferAttribute(n,O),f.fromBufferAttribute(s,k),d.fromBufferAttribute(s,G),p.fromBufferAttribute(s,O),c.sub(u),h.sub(u),d.sub(f),p.sub(f);const U=1/(d.x*p.y-p.x*d.y);isFinite(U)&&(v.copy(c).multiplyScalar(p.y).addScaledVector(h,-d.y).multiplyScalar(U),b.copy(h).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(U),a[k].add(v),a[G].add(v),a[O].add(v),l[k].add(b),l[G].add(b),l[O].add(b))}let M=this.groups;M.length===0&&(M=[{start:0,count:e.count}]);for(let k=0,G=M.length;k<G;++k){const O=M[k],U=O.start,Q=O.count;for(let X=U,ee=U+Q;X<ee;X+=3)_(e.getX(X+0),e.getX(X+1),e.getX(X+2))}const E=new ze,R=new ze,L=new ze,I=new ze;function D(k){L.fromBufferAttribute(r,k),I.copy(L);const G=a[k];E.copy(G),E.sub(L.multiplyScalar(L.dot(G))).normalize(),R.crossVectors(I,G);const U=R.dot(l[k])<0?-1:1;o.setXYZW(k,E.x,E.y,E.z,U)}for(let k=0,G=M.length;k<G;++k){const O=M[k],U=O.start,Q=O.count;for(let X=U,ee=U+Q;X<ee;X+=3)D(e.getX(X+0)),D(e.getX(X+1)),D(e.getX(X+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Iu(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let f=0,d=n.count;f<d;f++)n.setXYZ(f,0,0,0);const r=new ze,s=new ze,o=new ze,a=new ze,l=new ze,u=new ze,c=new ze,h=new ze;if(e)for(let f=0,d=e.count;f<d;f+=3){const p=e.getX(f+0),v=e.getX(f+1),b=e.getX(f+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,b),c.subVectors(o,s),h.subVectors(r,s),c.cross(h),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,v),u.fromBufferAttribute(n,b),a.add(c),l.add(c),u.add(c),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(b,u.x,u.y,u.z)}else for(let f=0,d=t.count;f<d;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),c.subVectors(o,s),h.subVectors(r,s),c.cross(h),n.setXYZ(f+0,c.x,c.y,c.z),n.setXYZ(f+1,c.x,c.y,c.z),n.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Us.fromBufferAttribute(e,t),Us.normalize(),e.setXYZ(t,Us.x,Us.y,Us.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,h=a.normalized,f=new u.constructor(l.length*c);let d=0,p=0;for(let v=0,b=l.length;v<b;v++){a.isInterleavedBufferAttribute?d=l[v]*a.data.stride+a.offset:d=l[v]*c;for(let _=0;_<c;_++)f[p++]=u[d++]}return new Iu(f,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gm,n=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,n);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,h=u.length;c<h;c++){const f=u[c],d=e(f,n);l.push(d)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const u=n[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,f=u.length;h<f;h++){const d=u[h];c.push(d.toJSON(e.data))}c.length>0&&(r[l]=c,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const u in r){const c=r[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],h=s[u];for(let f=0,d=h.length;f<d;f++)c.push(h[f].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const SV=new Rr,HA=new eBe,L3=new dF,MV=new ze,O3=new ze,F3=new ze,k3=new ze,IP=new ze,U3=new ze,TV=new ze,z3=new ze;class rm extends js{constructor(e=new gm,t=new j4){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){U3.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],h=s[l];c!==0&&(IP.fromBufferAttribute(h,e),o?U3.addScaledVector(IP,c):U3.addScaledVector(IP.sub(t),c))}t.add(U3)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),L3.copy(n.boundingSphere),L3.applyMatrix4(s),HA.copy(e.ray).recast(e.near),!(L3.containsPoint(HA.origin)===!1&&(HA.intersectSphere(L3,MV)===null||HA.origin.distanceToSquared(MV)>(e.far-e.near)**2))&&(SV.copy(s).invert(),HA.copy(e.ray).applyMatrix4(SV),!(n.boundingBox!==null&&HA.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,HA)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,h=s.attributes.normal,f=s.groups,d=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,v=f.length;p<v;p++){const b=f[p],_=o[b.materialIndex],M=Math.max(b.start,d.start),E=Math.min(a.count,Math.min(b.start+b.count,d.start+d.count));for(let R=M,L=E;R<L;R+=3){const I=a.getX(R),D=a.getX(R+1),k=a.getX(R+2);r=G3(this,_,e,n,u,c,h,I,D,k),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const p=Math.max(0,d.start),v=Math.min(a.count,d.start+d.count);for(let b=p,_=v;b<_;b+=3){const M=a.getX(b),E=a.getX(b+1),R=a.getX(b+2);r=G3(this,o,e,n,u,c,h,M,E,R),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,v=f.length;p<v;p++){const b=f[p],_=o[b.materialIndex],M=Math.max(b.start,d.start),E=Math.min(l.count,Math.min(b.start+b.count,d.start+d.count));for(let R=M,L=E;R<L;R+=3){const I=R,D=R+1,k=R+2;r=G3(this,_,e,n,u,c,h,I,D,k),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const p=Math.max(0,d.start),v=Math.min(l.count,d.start+d.count);for(let b=p,_=v;b<_;b+=3){const M=b,E=b+1,R=b+2;r=G3(this,o,e,n,u,c,h,M,E,R),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}}}function hBe(i,e,t,n,r,s,o,a){let l;if(e.side===Jf?l=n.intersectTriangle(o,s,r,!0,a):l=n.intersectTriangle(r,s,o,e.side===Dx,a),l===null)return null;z3.copy(a),z3.applyMatrix4(i.matrixWorld);const u=t.ray.origin.distanceTo(z3);return u<t.near||u>t.far?null:{distance:u,point:z3.clone(),object:i}}function G3(i,e,t,n,r,s,o,a,l,u){i.getVertexPosition(a,O3),i.getVertexPosition(l,F3),i.getVertexPosition(u,k3);const c=hBe(i,e,t,n,O3,F3,k3,TV);if(c){const h=new ze;dc.getBarycoord(TV,O3,F3,k3,h),r&&(c.uv=dc.getInterpolatedAttribute(r,a,l,u,h,new gi)),s&&(c.uv1=dc.getInterpolatedAttribute(s,a,l,u,h,new gi)),o&&(c.normal=dc.getInterpolatedAttribute(o,a,l,u,h,new ze),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const f={a,b:l,c:u,normal:new ze,materialIndex:0};dc.getNormal(O3,F3,k3,f.normal),c.face=f,c.barycoord=h}return c}class Pb extends gm{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],h=[];let f=0,d=0;p("z","y","x",-1,-1,n,t,e,o,s,0),p("z","y","x",1,-1,n,t,-e,o,s,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,s,4),p("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new Rf(u,3)),this.setAttribute("normal",new Rf(c,3)),this.setAttribute("uv",new Rf(h,2));function p(v,b,_,M,E,R,L,I,D,k,G){const O=R/D,U=L/k,Q=R/2,X=L/2,ee=I/2,K=D+1,Z=k+1;let he=0,j=0;const ie=new ze;for(let ae=0;ae<Z;ae++){const pe=ae*U-X;for(let Pe=0;Pe<K;Pe++){const He=Pe*O-Q;ie[v]=He*M,ie[b]=pe*E,ie[_]=ee,u.push(ie.x,ie.y,ie.z),ie[v]=0,ie[b]=0,ie[_]=I>0?1:-1,c.push(ie.x,ie.y,ie.z),h.push(Pe/D),h.push(1-ae/k),he+=1}}for(let ae=0;ae<k;ae++)for(let pe=0;pe<D;pe++){const Pe=f+pe+K*ae,He=f+pe+K*(ae+1),Se=f+(pe+1)+K*(ae+1),Oe=f+(pe+1)+K*ae;l.push(Pe,He,Oe),l.push(He,Se,Oe),j+=6}a.addGroup(d,j,G),d+=j,f+=he}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pb(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Tne(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function fBe(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}var dBe=`
void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
`,pBe=`
void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}
`;class ABe extends ol{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=dBe,this.fragmentShader=pBe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Tne(e.uniforms),this.uniformsGroups=fBe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Ene extends js{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Rr,this.projectionMatrix=new Rr,this.projectionMatrixInverse=new Rr,this.coordinateSystem=mc}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Hd=new ze,EV=new gi,CV=new gi;class of extends Ene{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ox*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(P_*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ox*2*Math.atan(Math.tan(P_*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Hd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Hd.x,Hd.y).multiplyScalar(-e/Hd.z),Hd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Hd.x,Hd.y).multiplyScalar(-e/Hd.z)}getViewSize(e,t){return this.getViewBounds(e,EV,CV),t.subVectors(CV,EV)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(P_*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/u,r*=o.width/l,n*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Lg=-90,Og=1;class Cne extends js{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new of(Lg,Og,e,t);r.layers=this.layers,this.add(r);const s=new of(Lg,Og,e,t);s.layers=this.layers,this.add(s);const o=new of(Lg,Og,e,t);o.layers=this.layers,this.add(o);const a=new of(Lg,Og,e,t);a.layers=this.layers,this.add(a);const l=new of(Lg,Og,e,t);l.layers=this.layers,this.add(l);const u=new of(Lg,Og,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===mc)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===im)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,c]=this.children,h=e.getRenderTarget(),f=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const v=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,l),e.setRenderTarget(n,4,r),e.render(t,u),n.texture.generateMipmaps=v,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(h,f,d),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class pF extends ba{constructor(e,t,n,r,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:tm,super(e,t,n,r,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class mBe extends K6e{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new pF(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:sl}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Pb(5,5,5),s=new ABe({name:"CubemapFromEquirect",uniforms:Tne(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Jf,blending:Iy});s.uniforms.tEquirect.value=t;const o=new rm(r,s),a=t.minFilter;return t.minFilter===Tf&&(t.minFilter=sl),new Cne(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}class Rne extends js{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new yh,this.environmentIntensity=1,this.environmentRotation=new yh,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Pne{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=dC,this.updateRanges=[],this.version=0,this.uuid=Cf()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Cf()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Cf()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ra=new ze;class AF{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ra.fromBufferAttribute(this,t),ra.applyMatrix4(e),this.setXYZ(t,ra.x,ra.y,ra.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ra.fromBufferAttribute(this,t),ra.applyNormalMatrix(e),this.setXYZ(t,ra.x,ra.y,ra.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ra.fromBufferAttribute(this,t),ra.transformDirection(e),this.setXYZ(t,ra.x,ra.y,ra.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=ma(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=zn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=zn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ma(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ma(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ma(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ma(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array),r=zn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array),r=zn(r,this.array),s=zn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Iu(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new AF(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Bne extends ol{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Di(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class gBe extends ba{constructor(e=null,t=1,n=1,r,s,o,a,l,u=uo,c=uo,h,f){super(null,o,a,l,u,c,r,s,h,f),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class yBe extends Iu{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const NP=new ze,vBe=new ze,_Be=new Zl;class Yd{constructor(e=new ze(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=NP.subVectors(n,t).cross(vBe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(NP),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||_Be.getNormalMatrix(e),r=this.coplanarPoint(NP).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const qA=new dF,H3=new ze;class Ine{constructor(e=new Yd,t=new Yd,n=new Yd,r=new Yd,s=new Yd,o=new Yd){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=mc){const n=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],c=r[5],h=r[6],f=r[7],d=r[8],p=r[9],v=r[10],b=r[11],_=r[12],M=r[13],E=r[14],R=r[15];if(n[0].setComponents(l-s,f-u,b-d,R-_).normalize(),n[1].setComponents(l+s,f+u,b+d,R+_).normalize(),n[2].setComponents(l+o,f+c,b+p,R+M).normalize(),n[3].setComponents(l-o,f-c,b-p,R-M).normalize(),n[4].setComponents(l-a,f-h,b-v,R-E).normalize(),t===mc)n[5].setComponents(l+a,f+h,b+v,R+E).normalize();else if(t===im)n[5].setComponents(a,h,v,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),qA.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),qA.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(qA)}intersectsSprite(e){return qA.center.set(0,0,0),qA.radius=.7071067811865476,qA.applyMatrix4(e.matrixWorld),this.intersectsSphere(qA)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(H3.x=r.normal.x>0?e.max.x:e.min.x,H3.y=r.normal.y>0?e.max.y:e.min.y,H3.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(H3)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class mF extends ol{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Di(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}class Nne extends ol{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Di(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class xBe extends ba{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=uo,this.minFilter=uo,this.generateMipmaps=!1,this.needsUpdate=!0}}class Bb extends ba{constructor(e,t,n,r,s,o,a,l,u,c=I0){if(c!==I0&&c!==Dy)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===I0&&(n=ro),n===void 0&&c===Dy&&(n=Eb),super(null,r,s,o,a,l,c,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:uo,this.minFilter=l!==void 0?l:uo,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class gF extends gm{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let u=0;const c=[],h=new ze,f=new ze,d=[],p=[],v=[],b=[];for(let _=0;_<=n;_++){const M=[],E=_/n;let R=0;_===0&&o===0?R=.5/t:_===n&&l===Math.PI&&(R=-.5/t);for(let L=0;L<=t;L++){const I=L/t;h.x=-e*Math.cos(r+I*s)*Math.sin(o+E*a),h.y=e*Math.cos(o+E*a),h.z=e*Math.sin(r+I*s)*Math.sin(o+E*a),p.push(h.x,h.y,h.z),f.copy(h).normalize(),v.push(f.x,f.y,f.z),b.push(I+R,1-E),M.push(u++)}c.push(M)}for(let _=0;_<n;_++)for(let M=0;M<t;M++){const E=c[_][M+1],R=c[_][M],L=c[_+1][M],I=c[_+1][M+1];(_!==0||o>0)&&d.push(E,R,I),(_!==n-1||l<Math.PI)&&d.push(R,L,I)}this.setIndex(d),this.setAttribute("position",new Rf(p,3)),this.setAttribute("normal",new Rf(v,3)),this.setAttribute("uv",new Rf(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gF(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Dne extends ol{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Di(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class yF extends ol{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Di(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fp,this.normalScale=new gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yh,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Lne extends yF{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new gi(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return so(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Di(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Di(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Di(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class One extends ol{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Di(16777215),this.specular=new Di(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fp,this.normalScale=new gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yh,this.combine=V4,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Fne extends ol{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Di(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fp,this.normalScale=new gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class kne extends ol{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fp,this.normalScale=new gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Une extends ol{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Di(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fp,this.normalScale=new gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yh,this.combine=V4,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zne extends ol{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Di(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fp,this.normalScale=new gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Gne extends mF{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}class ym extends js{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Di(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class bBe extends ym{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(js.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Di(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const DP=new Rr,RV=new ze,PV=new ze;class vF{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new gi(512,512),this.map=null,this.mapPass=null,this.matrix=new Rr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ine,this._frameExtents=new gi(1,1),this._viewportCount=1,this._viewports=[new Ni(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;RV.setFromMatrixPosition(e.matrixWorld),t.position.copy(RV),PV.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(PV),t.updateMatrixWorld(),DP.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DP),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(DP)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class wBe extends vF{constructor(){super(new of(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Ox*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Hne extends ym{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(js.DEFAULT_UP),this.updateMatrix(),this.target=new js,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new wBe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const BV=new Rr,T2=new ze,LP=new ze;class SBe extends vF{constructor(){super(new of(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new gi(4,2),this._viewportCount=6,this._viewports=[new Ni(2,1,1,1),new Ni(0,1,1,1),new Ni(3,1,1,1),new Ni(1,1,1,1),new Ni(3,0,1,1),new Ni(1,0,1,1)],this._cubeDirections=[new ze(1,0,0),new ze(-1,0,0),new ze(0,0,1),new ze(0,0,-1),new ze(0,1,0),new ze(0,-1,0)],this._cubeUps=[new ze(0,1,0),new ze(0,1,0),new ze(0,1,0),new ze(0,1,0),new ze(0,0,1),new ze(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),T2.setFromMatrixPosition(e.matrixWorld),n.position.copy(T2),LP.copy(n.position),LP.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(LP),n.updateMatrixWorld(),r.makeTranslation(-T2.x,-T2.y,-T2.z),BV.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(BV)}}class MBe extends ym{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new SBe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class _F extends Ene{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class TBe extends vF{constructor(){super(new _F(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class EBe extends ym{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(js.DEFAULT_UP),this.updateMatrix(),this.target=new js,this.shadow=new TBe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class CBe extends ym{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class RBe extends ym{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class PBe{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ze)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class BBe extends ym{constructor(e=new PBe,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class IBe extends Pne{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}const NBe=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveMap","envMap","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"];class DBe{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=NBe,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}getRenderObjectData(e){let t=this.renderObjects.get(e);return t===void 0&&(t={material:this.getMaterialData(e.material),worldMatrix:e.object.matrixWorld.clone()},e.object.center&&(t.center=e.object.center.clone()),e.object.morphTargetInfluences&&(t.morphTargetInfluences=e.object.morphTargetInfluences.slice()),e.bundle!==null&&(t.version=e.bundle.version),this.renderObjects.set(e,t)),t}containsNode(e){const t=e.material;for(const n in t)if(t[n]&&t[n].isNode)return!0;return e.renderer.nodes.modelViewMatrix!==null||e.renderer.nodes.modelNormalViewMatrix!==null}getMaterialData(e){const t={};for(const n of this.refreshUniforms){const r=e[n];r!=null&&(typeof r=="object"&&r.clone!==void 0?r.isTexture===!0?t[n]={id:r.id,version:r.version}:t[n]=r.clone():t[n]=r)}return t}equals(e){const{object:t,material:n}=e,r=this.getRenderObjectData(e);if(r.worldMatrix.equals(t.matrixWorld)!==!0)return r.worldMatrix.copy(t.matrixWorld),!1;const s=r.material;for(const o in s){const a=s[o],l=n[o];if(a.equals!==void 0){if(a.equals(l)===!1)return a.copy(l),!1}else if(l.isTexture===!0){if(a.id!==l.id||a.version!==l.version)return a.id=l.id,a.version=l.version,!1}else if(a!==l)return s[o]=l,!1}if(r.morphTargetInfluences){let o=!1;for(let a=0;a<r.morphTargetInfluences.length;a++)r.morphTargetInfluences[a]!==t.morphTargetInfluences[a]&&(o=!0);if(o)return!0}return r.center&&r.center.equals(t.center)===!1?(r.center.copy(t.center),!0):(e.bundle!==null&&(r.version=e.bundle.version),!0)}needsRefresh(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e))return!0;const{renderId:n}=t;if(this.renderId!==n)return this.renderId=n,!0;const r=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;return r||s?!1:this.equals(e)!==!0}}function Fx(i,e=0){let t=3735928559^e,n=1103547991^e;if(i instanceof Array)for(let r=0,s;r<i.length;r++)s=i[r],t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);else for(let r=0,s;r<i.length;r++)s=i.charCodeAt(r),t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}const LBe=i=>Fx(i),qne=i=>Fx(i),pC=(...i)=>Fx(i);function Vne(i,e=!1){const t=[];i.isNode===!0&&(t.push(i.id),i=i.getSelf());for(const{property:n,childNode:r}of AC(i))t.push(t,Fx(n.slice(0,-4)),r.getCacheKey(e));return Fx(t)}function*AC(i,e=!1){for(const t in i){if(t.startsWith("_")===!0)continue;const n=i[t];if(Array.isArray(n)===!0)for(let r=0;r<n.length;r++){const s=n[r];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:r,childNode:s})}else if(n&&n.isNode===!0)yield{property:t,childNode:n};else if(typeof n=="object")for(const r in n){const s=n[r];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:r,childNode:s})}}}function mC(i){if(i==null)return null;const e=typeof i;return i.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":i.isVector2===!0?"vec2":i.isVector3===!0?"vec3":i.isVector4===!0?"vec4":i.isMatrix3===!0?"mat3":i.isMatrix4===!0?"mat4":i.isColor===!0?"color":i instanceof ArrayBuffer?"ArrayBuffer":null}function jne(i,...e){const t=i?i.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),i==="color"?new Di(...e):t==="vec2"?new gi(...e):t==="vec3"?new ze(...e):t==="vec4"?new Ni(...e):t==="mat3"?new Zl(...e):t==="mat4"?new Rr(...e):i==="bool"?e[0]||!1:i==="float"||i==="int"||i==="uint"?e[0]||0:i==="string"?e[0]||"":i==="ArrayBuffer"?FBe(e[0]):null}function OBe(i){let e="";const t=new Uint8Array(i);for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function FBe(i){return Uint8Array.from(atob(i),e=>e.charCodeAt(0)).buffer}const IV={VERTEX:"vertex",FRAGMENT:"fragment"},Wn={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},kBe=["fragment","vertex"],NV=["setup","analyze","generate"],DV=[...kBe,"compute"],lv=["x","y","z","w"];let UBe=0,Gn=class extends ov{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=Wn.NONE,this.updateBeforeType=Wn.NONE,this.updateAfterType=Wn.NONE,this.uuid=q6e.generateUUID(),this.version=0,this._cacheKey=null,this._cacheKeyVersion=0,this.global=!1,this.isNode=!0,Object.defineProperty(this,"id",{value:UBe++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,Wn.FRAME)}onRenderUpdate(e){return this.onUpdate(e,Wn.RENDER)}onObjectUpdate(e){return this.onUpdate(e,Wn.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of AC(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=Vne(this,e),this._cacheKeyVersion=this.version),this._cacheKey}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}setup(e){const t=e.getNodeProperties(this);let n=0;for(const r of this.getChildren())t["node"+n++]=r;return null}analyze(e){if(e.increaseUsage(this)===1){const n=e.getNodeProperties(this);for(const r of Object.values(n))r&&r.isNode===!0&&r.build(e)}}generate(e,t){const{outputNode:n}=e.getNodeProperties(this);if(n&&n.isNode===!0)return n.build(e,t)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,t=null){const n=this.getShared(e);if(this!==n)return n.build(e,t);e.addNode(this),e.addChain(this);let r=null;const s=e.getBuildStage();if(s==="setup"){this.updateReference(e);const o=e.getNodeProperties(this);if(o.initialized!==!0){const a=e.stack.nodes.length;o.initialized=!0,o.outputNode=this.setup(e),o.outputNode!==null&&e.stack.nodes.length;for(const l of Object.values(o))l&&l.isNode===!0&&l.build(e)}}else if(s==="analyze")this.analyze(e);else if(s==="generate")if(this.generate.length===1){const a=this.getNodeType(e),l=e.getDataFromNode(this);r=l.snippet,r===void 0?(r=this.generate(e)||"",l.snippet=r):l.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),r=e.format(r,a,t)}else r=this.generate(e,t)||"";return e.removeChain(this),r}getSerializeChildren(){return AC(this)}serialize(e){const t=this.getSerializeChildren(),n={};for(const{property:r,index:s,childNode:o}of t)s!==void 0?(n[r]===void 0&&(n[r]=Number.isInteger(s)?[]:{}),n[r][s]=o.toJSON(e.meta).uuid):n[r]=o.toJSON(e.meta).uuid;Object.keys(n).length>0&&(e.inputNodes=n)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const n in e.inputNodes)if(Array.isArray(e.inputNodes[n])){const r=[];for(const s of e.inputNodes[n])r.push(t[s]);this[n]=r}else if(typeof e.inputNodes[n]=="object"){const r={};for(const s in e.inputNodes[n]){const o=e.inputNodes[n][s];r[s]=t[o]}this[n]=r}else{const r=e.inputNodes[n];this[n]=t[r]}}}toJSON(e){const{uuid:t,type:n}=this,r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[t];s===void 0&&(s={uuid:t,type:n,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},r!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}if(r){const a=o(e.textures),l=o(e.images),u=o(e.nodes);a.length>0&&(s.textures=a),l.length>0&&(s.images=l),u.length>0&&(s.nodes=u)}return s}};class Ib extends Gn{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=this.node.build(e),n=this.indexNode.build(e,"uint");return`${t}[ ${n} ]`}}class $ne extends Gn{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let n=null;for(const r of this.convertTo.split("|"))(n===null||e.getTypeLength(t)===e.getTypeLength(r))&&(n=r);return n}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const n=this.node,r=this.getNodeType(e),s=n.build(e,r);return e.format(s,r,t)}}class vs extends Gn{static get type(){return"TempNode"}constructor(e){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const r=e.getVectorType(this.getNodeType(e,t)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,r,t);if(r!=="void"&&t!=="void"&&this.hasDependencies(e)){const o=super.build(e,r),a=e.getVarFromNode(this,null,r),l=e.getPropertyName(a);return e.addLineFlowCode(`${l} = ${o}`,this),s.snippet=o,s.propertyName=l,e.format(s.propertyName,r,t)}}return super.build(e,t)}}class zBe extends vs{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,n)=>t+e.getTypeLength(n.getNodeType(e)),0))}generate(e,t){const n=this.getNodeType(e),r=this.nodes,s=e.getComponentType(n),o=[];for(const l of r){let u=l.build(e);const c=e.getComponentType(l.getNodeType(e));c!==s&&(u=e.format(u,c,s)),o.push(u)}const a=`${e.getType(n)}( ${o.join(", ")} )`;return e.format(a,n,t)}}const GBe=lv.join("");class LV extends Gn{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(lv.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,t){const n=this.node,r=e.getTypeLength(n.getNodeType(e));let s=null;if(r>1){let o=null;this.getVectorLength()>=r&&(o=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const l=n.build(e,o);this.components.length===r&&this.components===GBe.slice(0,this.components.length)?s=e.format(l,o,t):s=e.format(`${l}.${this.components}`,this.getNodeType(e),t)}else s=n.build(e,t);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class HBe extends vs{static get type(){return"SetNode"}constructor(e,t,n){super(),this.sourceNode=e,this.components=t,this.targetNode=n}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:n,targetNode:r}=this,s=this.getNodeType(e),o=e.getTypeFromLength(n.length,r.getNodeType(e)),a=r.build(e,o),l=t.build(e,s),u=e.getTypeLength(s),c=[];for(let h=0;h<u;h++){const f=lv[h];f===n[0]?(c.push(a),h+=n.length-1):c.push(l+"."+f)}return`${e.getType(s)}( ${c.join(", ")} )`}}class qBe extends vs{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:t,sourceNode:n}=this,r=this.getNodeType(e),s=n.build(e),o=e.getVarFromNode(this),a=e.getPropertyName(o);e.addLineFlowCode(a+" = "+s,this);const l=e.getTypeLength(r),u=[];let c=0;for(let h=0;h<l;h++){const f=lv[h];f===t[c]?(u.push("1.0 - "+(a+"."+f)),c++):u.push(a+"."+f)}return`${e.getType(r)}( ${u.join(", ")} )`}}class xF extends Gn{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?mC(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=mC(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=OBe(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?jne(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}class Zf extends xF{static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const n=this.getNodeType(e);return e.format(this.generateConst(e),n,t)}}let Ly=null;const S1=new Map;function nt(i,e){if(S1.has(i)){console.warn(`Redefinition of method chaining ${i}`);return}if(typeof e!="function")throw new Error(`Node element ${i} is not a function`);S1.set(i,e)}const Wne=i=>i.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),OV=i=>Wne(i).split("").sort().join(""),Xne={setup(i,e){const t=e.shift();return i(X4(t),...e)},get(i,e,t){if(typeof e=="string"&&i[e]===void 0){if(i.isStackNode!==!0&&e==="assign")return(...n)=>(Ly.assign(t,...n),t);if(S1.has(e)){const n=S1.get(e);return i.isStackNode?(...r)=>t.add(n(...r)):(...r)=>n(t,...r)}else{if(e==="self")return i;if(e.endsWith("Assign")&&S1.has(e.slice(0,e.length-6))){const n=S1.get(e.slice(0,e.length-6));return i.isStackNode?(...r)=>t.assign(r[0],n(...r)):(...r)=>t.assign(n(t,...r))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=Wne(e),Mt(new LV(t,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=OV(e.slice(3).toLowerCase()),n=>Mt(new HBe(i,e,n));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=OV(e.slice(4).toLowerCase()),()=>Mt(new qBe(Mt(i),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),Mt(new LV(i,e));if(/^\d+$/.test(e)===!0)return Mt(new Ib(t,new Zf(Number(e),"uint")))}}}return Reflect.get(i,e,t)},set(i,e,t,n){return typeof e=="string"&&i[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(n[e].assign(t),!0):Reflect.set(i,e,t,n)}},OP=new WeakMap,FV=new WeakMap,VBe=function(i,e=null){const t=mC(i);if(t==="node"){let n=OP.get(i);return n===void 0&&(n=new Proxy(i,Xne),OP.set(i,n),OP.set(n,n)),n}else{if(e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string")return Mt(ON(i,e));if(t==="shader")return $t(i)}return i},jBe=function(i,e=null){for(const t in i)i[t]=Mt(i[t],e);return i},$Be=function(i,e=null){const t=i.length;for(let n=0;n<t;n++)i[n]=Mt(i[n],e);return i},WBe=function(i,e=null,t=null,n=null){const r=s=>Mt(n!==null?Object.assign(s,n):s);return e===null?(...s)=>r(new i(...Y1(s))):t!==null?(t=Mt(t),(...s)=>r(new i(e,...Y1(s),t))):(...s)=>r(new i(e,...Y1(s)))},XBe=function(i,...e){return Mt(new i(...Y1(e)))};class YBe extends Gn{constructor(e,t){super(),this.shaderNode=e,this.inputNodes=t}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}call(e){const{shaderNode:t,inputNodes:n}=this,r=e.getNodeProperties(t);if(r.onceOutput)return r.onceOutput;let s=null;if(t.layout){let o=FV.get(e.constructor);o===void 0&&(o=new WeakMap,FV.set(e.constructor,o));let a=o.get(t);a===void 0&&(a=Mt(e.buildFunctionNode(t)),o.set(t,a)),e.currentFunctionNode!==null&&e.currentFunctionNode.includes.push(a),s=Mt(a.call(n))}else{const o=t.jsFunc,a=n!==null?o(n,e):o(e);s=Mt(a)}return t.once&&(r.onceOutput=s),s}getOutputNode(e){const t=e.getNodeProperties(this);return t.outputNode===null&&(t.outputNode=this.setupOutput(e)),t.outputNode}setup(e){return this.getOutputNode(e)}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,t){return this.getOutputNode(e).build(e,t)}}class QBe extends Gn{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return X4(e),Mt(new YBe(this,e))}setup(){return this.call()}}const KBe=[!1,!0],JBe=[0,1,2,3],ZBe=[-1,-2],Yne=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],bF=new Map;for(const i of KBe)bF.set(i,new Zf(i));const wF=new Map;for(const i of JBe)wF.set(i,new Zf(i,"uint"));const SF=new Map([...wF].map(i=>new Zf(i.value,"int")));for(const i of ZBe)SF.set(i,new Zf(i,"int"));const $4=new Map([...SF].map(i=>new Zf(i.value)));for(const i of Yne)$4.set(i,new Zf(i));for(const i of Yne)$4.set(-i,new Zf(-i));const W4={bool:bF,uint:wF,ints:SF,float:$4},kV=new Map([...bF,...$4]),ON=(i,e)=>kV.has(i)?kV.get(i):i.isNode===!0?i:new Zf(i,e),eIe=i=>{try{return i.getNodeType()}catch{return}},_s=function(i,e=null){return(...t)=>{if((t.length===0||!["bool","float","int","uint"].includes(i)&&t.every(r=>typeof r!="object"))&&(t=[jne(i,...t)]),t.length===1&&e!==null&&e.has(t[0]))return Mt(e.get(t[0]));if(t.length===1){const r=ON(t[0],i);return eIe(r)===i?Mt(r):Mt(new $ne(r,i))}const n=t.map(r=>ON(r));return Mt(new zBe(n,i))}},UV=i=>typeof i=="object"&&i!==null?i.value:i,tIe=i=>i!=null?i.nodeType||i.convertTo||(typeof i=="string"?i:null):null;function UM(i,e){return new Proxy(new QBe(i,e),Xne)}const Mt=(i,e=null)=>VBe(i,e),X4=(i,e=null)=>new jBe(i,e),Y1=(i,e=null)=>new $Be(i,e),ot=(...i)=>new WBe(...i),Pt=(...i)=>new XBe(...i),$t=(i,e)=>{const t=new UM(i,e),n=(...r)=>{let s;return X4(r),r[0]&&r[0].isNode?s=[...r]:s=r[0],t.call(s)};return n.shaderNode=t,n.setLayout=r=>(t.setLayout(r),n),n.once=()=>(t.once=!0,n),n};nt("toGlobal",i=>(i.global=!0,i));const gC=i=>{Ly=i},Qne=()=>Ly,Ho=(...i)=>Ly.If(...i);function nIe(i){return Ly&&Ly.add(i),i}nt("append",nIe);const iIe=new _s("color"),st=new _s("float",W4.float),zr=new _s("int",W4.ints),rIe=new _s("uint",W4.uint),sIe=new _s("bool",W4.bool),Yt=new _s("vec2"),af=new _s("ivec2"),oIe=new _s("uvec2"),aIe=new _s("bvec2"),rt=new _s("vec3"),lIe=new _s("ivec3"),uIe=new _s("uvec3"),cIe=new _s("bvec3"),Vn=new _s("vec4"),hIe=new _s("ivec4"),fIe=new _s("uvec4"),dIe=new _s("bvec4"),MF=new _s("mat2"),al=new _s("mat3"),Q1=new _s("mat4");nt("toColor",iIe);nt("toFloat",st);nt("toInt",zr);nt("toUint",rIe);nt("toBool",sIe);nt("toVec2",Yt);nt("toIVec2",af);nt("toUVec2",oIe);nt("toBVec2",aIe);nt("toVec3",rt);nt("toIVec3",lIe);nt("toUVec3",uIe);nt("toBVec3",cIe);nt("toVec4",Vn);nt("toIVec4",hIe);nt("toUVec4",fIe);nt("toBVec4",dIe);nt("toMat2",MF);nt("toMat3",al);nt("toMat4",Q1);const pIe=ot(Ib),AIe=(i,e)=>Mt(new $ne(Mt(i),e));nt("element",pIe);nt("convert",AIe);class Kne extends Gn{static get type(){return"UniformGroupNode"}constructor(e,t=!1,n=1){super("string"),this.name=e,this.version=0,this.shared=t,this.order=n,this.isUniformGroup=!0}set needsUpdate(e){e===!0&&this.version++}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const mIe=i=>new Kne(i),Jne=(i,e=0)=>new Kne(i,!0,e),gIe=Jne("frame"),hi=Jne("render"),Zne=mIe("object");class uv extends xF{static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=Zne}label(e){return this.name=e,this}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){const n=this.getSelf();return e=e.bind(n),super.onUpdate(r=>{const s=e(r,n);s!==void 0&&(this.value=s)},t)}generate(e,t){const n=this.getNodeType(e),r=this.getUniformHash(e);let s=e.getNodeFromHash(r);s===void 0&&(e.setHashNode(this,r),s=this);const o=s.getInputType(e),a=e.getUniformFromNode(s,o,e.shaderStage,this.name||e.context.label),l=e.getPropertyName(a);return e.context.label!==void 0&&delete e.context.label,e.format(l,n,t)}}const jn=(i,e)=>{const t=tIe(e||i),n=i&&i.isNode===!0?i.node&&i.node.value||i.value:i;return Mt(new uv(n,t))};class Li extends Gn{static get type(){return"PropertyNode"}constructor(e,t=null,n=!1){super(e),this.name=t,this.varying=n,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const Wg=(i,e)=>Mt(new Li(i,e)),yC=(i,e)=>Mt(new Li(i,e,!0)),Ii=Pt(Li,"vec4","DiffuseColor"),zV=Pt(Li,"vec3","EmissiveColor"),df=Pt(Li,"float","Roughness"),vC=Pt(Li,"float","Metalness"),FN=Pt(Li,"float","Clearcoat"),_C=Pt(Li,"float","ClearcoatRoughness"),M1=Pt(Li,"vec3","Sheen"),TF=Pt(Li,"float","SheenRoughness"),EF=Pt(Li,"float","Iridescence"),eie=Pt(Li,"float","IridescenceIOR"),tie=Pt(Li,"float","IridescenceThickness"),kN=Pt(Li,"float","AlphaT"),JA=Pt(Li,"float","Anisotropy"),zM=Pt(Li,"vec3","AnisotropyT"),K1=Pt(Li,"vec3","AnisotropyB"),Ml=Pt(Li,"color","SpecularColor"),xC=Pt(Li,"float","SpecularF90"),UN=Pt(Li,"float","Shininess"),yIe=Pt(Li,"vec4","Output"),FP=Pt(Li,"float","dashSize"),GV=Pt(Li,"float","gapSize"),GM=Pt(Li,"float","IOR"),zN=Pt(Li,"float","Transmission"),nie=Pt(Li,"float","Thickness"),iie=Pt(Li,"float","AttenuationDistance"),rie=Pt(Li,"color","AttenuationColor"),sie=Pt(Li,"float","Dispersion");class vIe extends vs{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const n=e.getTypeLength(t.node.getNodeType(e));return lv.join("").slice(0,n)!==t.components}return!1}generate(e,t){const{targetNode:n,sourceNode:r}=this,s=this.needsSplitAssign(e),o=n.getNodeType(e),a=n.context({assign:!0}).build(e),l=r.build(e,o),u=r.getNodeType(e),c=e.getDataFromNode(this);let h;if(c.initialized===!0)t!=="void"&&(h=a);else if(s){const f=e.getVarFromNode(this,null,o),d=e.getPropertyName(f);e.addLineFlowCode(`${d} = ${l}`,this);const p=n.node.context({assign:!0}).build(e);for(let v=0;v<n.components.length;v++){const b=n.components[v];e.addLineFlowCode(`${p}.${b} = ${d}[ ${v} ]`,this)}t!=="void"&&(h=a)}else h=`${a} = ${l}`,(t==="void"||u==="void")&&(e.addLineFlowCode(h,this),t!=="void"&&(h=a));return c.initialized=!0,e.format(h,o,t)}}const _Ie=ot(vIe);nt("assign",_Ie);class xIe extends vs{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const t=[],n=this.functionNode,r=n.getInputs(e),s=this.parameters;if(Array.isArray(s))for(let a=0;a<s.length;a++){const l=r[a],u=s[a];t.push(u.build(e,l.type))}else for(const a of r){const l=s[a.name];if(l!==void 0)t.push(l.build(e,a.type));else throw new Error(`FunctionCallNode: Input '${a.name}' not found in FunctionNode.`)}return`${n.build(e,"property")}( ${t.join(", ")} )`}}const bIe=(i,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?Y1(e):X4(e[0]),Mt(new xIe(Mt(i),e)));nt("call",bIe);class mr extends vs{static get type(){return"OperatorNode"}constructor(e,t,n,...r){if(super(),r.length>0){let s=new mr(e,t,n);for(let o=0;o<r.length-1;o++)s=new mr(e,s,r[o]);t=s,n=r[r.length-1]}this.op=e,this.aNode=t,this.bNode=n}getNodeType(e,t){const n=this.op,r=this.aNode,s=this.bNode,o=r.getNodeType(e),a=typeof s<"u"?s.getNodeType(e):null;if(o==="void"||a==="void")return"void";if(n==="%")return o;if(n==="~"||n==="&"||n==="|"||n==="^"||n===">>"||n==="<<")return e.getIntegerType(o);if(n==="!"||n==="=="||n==="&&"||n==="||"||n==="^^")return"bool";if(n==="<"||n===">"||n==="<="||n===">="){const l=t?e.getTypeLength(t):Math.max(e.getTypeLength(o),e.getTypeLength(a));return l>1?`bvec${l}`:"bool"}else return o==="float"&&e.isMatrix(a)?a:e.isMatrix(o)&&e.isVector(a)?e.getVectorFromMatrix(o):e.isVector(o)&&e.isMatrix(a)?e.getVectorFromMatrix(a):e.getTypeLength(a)>e.getTypeLength(o)?a:o}generate(e,t){const n=this.op,r=this.aNode,s=this.bNode,o=this.getNodeType(e,t);let a=null,l=null;o!=="void"?(a=r.getNodeType(e),l=typeof s<"u"?s.getNodeType(e):null,n==="<"||n===">"||n==="<="||n===">="||n==="=="?e.isVector(a)?l=a:a!==l&&(a=l="float"):n===">>"||n==="<<"?(a=o,l=e.changeComponentType(l,"uint")):e.isMatrix(a)&&e.isVector(l)?l=e.getVectorFromMatrix(a):e.isVector(a)&&e.isMatrix(l)?a=e.getVectorFromMatrix(l):a=l=o):a=l=o;const u=r.build(e,a),c=typeof s<"u"?s.build(e,l):null,h=e.getTypeLength(t),f=e.getFunctionOperator(n);if(t!=="void")return n==="<"&&h>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThan",t)}( ${u}, ${c} )`,o,t):e.format(`( ${u} < ${c} )`,o,t):n==="<="&&h>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThanEqual",t)}( ${u}, ${c} )`,o,t):e.format(`( ${u} <= ${c} )`,o,t):n===">"&&h>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThan",t)}( ${u}, ${c} )`,o,t):e.format(`( ${u} > ${c} )`,o,t):n===">="&&h>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThanEqual",t)}( ${u}, ${c} )`,o,t):e.format(`( ${u} >= ${c} )`,o,t):n==="!"||n==="~"?e.format(`(${n}${u})`,a,t):f?e.format(`${f}( ${u}, ${c} )`,o,t):e.format(`( ${u} ${n} ${c} )`,o,t);if(a!=="void")return f?e.format(`${f}( ${u}, ${c} )`,o,t):e.format(`${u} ${n} ${c}`,o,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const Wl=ot(mr,"+"),N0=ot(mr,"-"),Oi=ot(mr,"*"),kp=ot(mr,"/"),oie=ot(mr,"%"),wIe=ot(mr,"=="),SIe=ot(mr,"!="),MIe=ot(mr,"<"),TIe=ot(mr,">"),EIe=ot(mr,"<="),CIe=ot(mr,">="),RIe=ot(mr,"&&"),PIe=ot(mr,"||"),BIe=ot(mr,"!"),IIe=ot(mr,"^^"),NIe=ot(mr,"&"),DIe=ot(mr,"~"),LIe=ot(mr,"|"),OIe=ot(mr,"^"),FIe=ot(mr,"<<"),kIe=ot(mr,">>");nt("add",Wl);nt("sub",N0);nt("mul",Oi);nt("div",kp);nt("modInt",oie);nt("equal",wIe);nt("notEqual",SIe);nt("lessThan",MIe);nt("greaterThan",TIe);nt("lessThanEqual",EIe);nt("greaterThanEqual",CIe);nt("and",RIe);nt("or",PIe);nt("not",BIe);nt("xor",IIe);nt("bitAnd",NIe);nt("bitNot",DIe);nt("bitOr",LIe);nt("bitXor",OIe);nt("shiftLeft",FIe);nt("shiftRight",kIe);const UIe=(...i)=>(console.warn("TSL.OperatorNode: .remainder() has been renamed to .modInt()."),oie(...i));nt("remainder",UIe);class Be extends vs{static get type(){return"MathNode"}constructor(e,t,n=null,r=null){super(),this.method=e,this.aNode=t,this.bNode=n,this.cNode=r}getInputType(e){const t=this.aNode.getNodeType(e),n=this.bNode?this.bNode.getNodeType(e):null,r=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(t)?0:e.getTypeLength(t),o=e.isMatrix(n)?0:e.getTypeLength(n),a=e.isMatrix(r)?0:e.getTypeLength(r);return s>o&&s>a?t:o>a?n:a>s?r:t}getNodeType(e){const t=this.method;return t===Be.LENGTH||t===Be.DISTANCE||t===Be.DOT?"float":t===Be.CROSS?"vec3":t===Be.ALL?"bool":t===Be.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):t===Be.MOD?this.aNode.getNodeType(e):this.getInputType(e)}generate(e,t){const n=this.method,r=this.getNodeType(e),s=this.getInputType(e),o=this.aNode,a=this.bNode,l=this.cNode,u=e.renderer.isWebGLRenderer===!0;if(n===Be.TRANSFORM_DIRECTION){let c=o,h=a;e.isMatrix(c.getNodeType(e))?h=Vn(rt(h),0):c=Vn(rt(c),0);const f=Oi(c,h).xyz;return kx(f).build(e,t)}else{if(n===Be.NEGATE)return e.format("( - "+o.build(e,s)+" )",r,t);if(n===Be.ONE_MINUS)return N0(1,o).build(e,t);if(n===Be.RECIPROCAL)return kp(1,o).build(e,t);if(n===Be.DIFFERENCE)return Wc(N0(o,a)).build(e,t);{const c=[];return n===Be.CROSS||n===Be.MOD?c.push(o.build(e,r),a.build(e,r)):u&&n===Be.STEP?c.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":s),a.build(e,s)):u&&(n===Be.MIN||n===Be.MAX)||n===Be.MOD?c.push(o.build(e,s),a.build(e,e.getTypeLength(a.getNodeType(e))===1?"float":s)):n===Be.REFRACT?c.push(o.build(e,s),a.build(e,s),l.build(e,"float")):n===Be.MIX?c.push(o.build(e,s),a.build(e,s),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":s)):(c.push(o.build(e,s)),a!==null&&c.push(a.build(e,s)),l!==null&&c.push(l.build(e,s))),e.format(`${e.getMethod(n,r)}( ${c.join(", ")} )`,r,t)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Be.ALL="all";Be.ANY="any";Be.EQUALS="equals";Be.RADIANS="radians";Be.DEGREES="degrees";Be.EXP="exp";Be.EXP2="exp2";Be.LOG="log";Be.LOG2="log2";Be.SQRT="sqrt";Be.INVERSE_SQRT="inversesqrt";Be.FLOOR="floor";Be.CEIL="ceil";Be.NORMALIZE="normalize";Be.FRACT="fract";Be.SIN="sin";Be.COS="cos";Be.TAN="tan";Be.ASIN="asin";Be.ACOS="acos";Be.ATAN="atan";Be.ABS="abs";Be.SIGN="sign";Be.LENGTH="length";Be.NEGATE="negate";Be.ONE_MINUS="oneMinus";Be.DFDX="dFdx";Be.DFDY="dFdy";Be.ROUND="round";Be.RECIPROCAL="reciprocal";Be.TRUNC="trunc";Be.FWIDTH="fwidth";Be.BITCAST="bitcast";Be.TRANSPOSE="transpose";Be.ATAN2="atan2";Be.MIN="min";Be.MAX="max";Be.MOD="mod";Be.STEP="step";Be.REFLECT="reflect";Be.DISTANCE="distance";Be.DIFFERENCE="difference";Be.DOT="dot";Be.CROSS="cross";Be.POW="pow";Be.TRANSFORM_DIRECTION="transformDirection";Be.MIX="mix";Be.CLAMP="clamp";Be.REFRACT="refract";Be.SMOOTHSTEP="smoothstep";Be.FACEFORWARD="faceforward";const zIe=st(1e-6),GIe=st(Math.PI),aie=ot(Be,Be.ALL),HIe=ot(Be,Be.ANY),qIe=ot(Be,Be.EQUALS),VIe=ot(Be,Be.RADIANS),jIe=ot(Be,Be.DEGREES),lie=ot(Be,Be.EXP),GN=ot(Be,Be.EXP2),uie=ot(Be,Be.LOG),Y4=ot(Be,Be.LOG2),CF=ot(Be,Be.SQRT),$Ie=ot(Be,Be.INVERSE_SQRT),Q4=ot(Be,Be.FLOOR),cie=ot(Be,Be.CEIL),kx=ot(Be,Be.NORMALIZE),cv=ot(Be,Be.FRACT),lf=ot(Be,Be.SIN),Qd=ot(Be,Be.COS),WIe=ot(Be,Be.TAN),XIe=ot(Be,Be.ASIN),YIe=ot(Be,Be.ACOS),QIe=ot(Be,Be.ATAN),Wc=ot(Be,Be.ABS),hie=ot(Be,Be.SIGN),J1=ot(Be,Be.LENGTH),KIe=ot(Be,Be.NEGATE),JIe=ot(Be,Be.ONE_MINUS),ZIe=ot(Be,Be.DFDX),eNe=ot(Be,Be.DFDY),tNe=ot(Be,Be.ROUND),nNe=ot(Be,Be.RECIPROCAL),iNe=ot(Be,Be.TRUNC),rNe=ot(Be,Be.FWIDTH);Be.BITCAST;const sNe=ot(Be,Be.TRANSPOSE),oNe=ot(Be,Be.ATAN2),bC=ot(Be,Be.MIN),Mc=ot(Be,Be.MAX),fie=ot(Be,Be.MOD),die=ot(Be,Be.STEP),aNe=ot(Be,Be.REFLECT),lNe=ot(Be,Be.DISTANCE),uNe=ot(Be,Be.DIFFERENCE),RF=ot(Be,Be.DOT),pie=ot(Be,Be.CROSS),K4=ot(Be,Be.POW),Aie=ot(Be,Be.POW,2),cNe=ot(Be,Be.POW,3),hNe=ot(Be,Be.POW,4),fNe=ot(Be,Be.TRANSFORM_DIRECTION),dNe=i=>Oi(hie(i),K4(Wc(i),1/3)),pNe=i=>RF(i,i),nr=ot(Be,Be.MIX),Up=(i,e=0,t=1)=>Mt(new Be(Be.CLAMP,Mt(i),Mt(e),Mt(t))),ANe=i=>Up(i),mie=ot(Be,Be.REFRACT),sm=ot(Be,Be.SMOOTHSTEP),mNe=ot(Be,Be.FACEFORWARD),gNe=$t(([i])=>{const n=43758.5453,r=RF(i.xy,Yt(12.9898,78.233)),s=fie(r,GIe);return cv(lf(s).mul(n))}),yNe=(i,e,t)=>nr(e,t,i),vNe=(i,e,t)=>sm(e,t,i);nt("all",aie);nt("any",HIe);nt("equals",qIe);nt("radians",VIe);nt("degrees",jIe);nt("exp",lie);nt("exp2",GN);nt("log",uie);nt("log2",Y4);nt("sqrt",CF);nt("inverseSqrt",$Ie);nt("floor",Q4);nt("ceil",cie);nt("normalize",kx);nt("fract",cv);nt("sin",lf);nt("cos",Qd);nt("tan",WIe);nt("asin",XIe);nt("acos",YIe);nt("atan",QIe);nt("abs",Wc);nt("sign",hie);nt("length",J1);nt("lengthSq",pNe);nt("negate",KIe);nt("oneMinus",JIe);nt("dFdx",ZIe);nt("dFdy",eNe);nt("round",tNe);nt("reciprocal",nNe);nt("trunc",iNe);nt("fwidth",rNe);nt("atan2",oNe);nt("min",bC);nt("max",Mc);nt("mod",fie);nt("step",die);nt("reflect",aNe);nt("distance",lNe);nt("dot",RF);nt("cross",pie);nt("pow",K4);nt("pow2",Aie);nt("pow3",cNe);nt("pow4",hNe);nt("transformDirection",fNe);nt("mix",yNe);nt("clamp",Up);nt("refract",mie);nt("smoothstep",vNe);nt("faceForward",mNe);nt("difference",uNe);nt("saturate",ANe);nt("cbrt",dNe);nt("transpose",sNe);nt("rand",gNe);class _Ne extends Gn{static get type(){return"ConditionalNode"}constructor(e,t,n=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=n}getNodeType(e){const t=this.ifNode.getNodeType(e);if(this.elseNode!==null){const n=this.elseNode.getNodeType(e);if(e.getTypeLength(n)>e.getTypeLength(t))return n}return t}setup(e){const t=this.condNode.cache(),n=this.ifNode.cache(),r=this.elseNode?this.elseNode.cache():null,s=e.context.nodeBlock;e.getDataFromNode(n).parentNodeBlock=s,r!==null&&(e.getDataFromNode(r).parentNodeBlock=s);const o=e.getNodeProperties(this);o.condNode=t,o.ifNode=n.context({nodeBlock:n}),o.elseNode=r?r.context({nodeBlock:r}):null}generate(e,t){const n=this.getNodeType(e),r=e.getDataFromNode(this);if(r.nodeProperty!==void 0)return r.nodeProperty;const{condNode:s,ifNode:o,elseNode:a}=e.getNodeProperties(this),l=t!=="void",u=l?Wg(n).build(e):"";r.nodeProperty=u;const c=s.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${c} ) {

`).addFlowTab();let h=o.build(e,n);if(h&&(l?h=u+" = "+h+";":h="return "+h+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+h+`

`+e.tab+"}"),a!==null){e.addFlowCode(` else {

`).addFlowTab();let f=a.build(e,n);f&&(l?f=u+" = "+f+";":f="return "+f+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+f+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(u,n,t)}}const $a=ot(_Ne);nt("select",$a);const xNe=(...i)=>(console.warn("TSL.ConditionalNode: cond() has been renamed to select()."),$a(...i));nt("cond",xNe);class gie extends Gn{static get type(){return"ContextNode"}constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){this.node.build(e)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.value});const n=this.node.build(e);return e.setContext(t),n}generate(e,t){const n=e.getContext();e.setContext({...e.context,...this.value});const r=this.node.build(e,t);return e.setContext(n),r}}const PF=ot(gie),bNe=(i,e)=>PF(i,{label:e});nt("context",PF);nt("label",bNe);class wNe extends Gn{static get type(){return"VarNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:t,name:n}=this,r=e.getVarFromNode(this,n,e.getVectorType(this.getNodeType(e))),s=e.getPropertyName(r),o=t.build(e,r.type);return e.addLineFlowCode(`${s} = ${o}`,this),s}}const yie=ot(wNe);nt("temp",yie);nt("toVar",(...i)=>yie(...i).append());class SNe extends Gn{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let n=t.varying;if(n===void 0){const r=this.name,s=this.getNodeType(e);t.varying=n=e.getVaryingFromNode(this,r,s),t.node=this.node}return n.needsInterpolation||(n.needsInterpolation=e.shaderStage==="fragment"),n}setup(e){this.setupVarying(e)}analyze(e){return this.setupVarying(e),this.node.analyze(e)}generate(e){const t=e.getNodeProperties(this),n=this.setupVarying(e);if(t.propertyName===void 0){const r=this.getNodeType(e),s=e.getPropertyName(n,IV.VERTEX);e.flowNodeFromShaderStage(IV.VERTEX,this.node,r,s),t.propertyName=s}return e.getPropertyName(n)}}const ed=ot(SNe);nt("varying",ed);const Nb="WorkingColorSpace",BF="OutputColorSpace";function HV(i){let e=null;return i===Bu?e="Linear":i===pn&&(e="sRGB"),e}function HN(i,e){return HV(i)+"To"+HV(e)}class J4 extends vs{static get type(){return"ColorSpaceNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.source=t,this.target=n}getColorSpace(e,t){return t===Nb?Sl.workingColorSpace:t===BF?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){const{renderer:t}=e,{colorNode:n}=this,r=this.getColorSpace(e,this.source),s=this.getColorSpace(e,this.target);if(r===s)return n;const o=HN(r,s);let a=null;const l=t.nodes.library.getColorSpaceFunction(o);return l!==null?a=Vn(l(n.rgb),n.a):(console.error("ColorSpaceNode: Unsupported Color Space configuration.",o),a=n),a}}const MNe=i=>Mt(new J4(Mt(i),Nb,BF)),TNe=i=>Mt(new J4(Mt(i),BF,Nb)),ENe=(i,e)=>Mt(new J4(Mt(i),Nb,e)),vie=(i,e)=>Mt(new J4(Mt(i),e,Nb));nt("toOutputColorSpace",MNe);nt("toWorkingColorSpace",TNe);nt("workingToColorSpace",ENe);nt("colorSpaceToWorking",vie);let CNe=class extends Ib{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),r=this.getNodeType();return e.format(t,n,r)}};class _ie extends Gn{static get type(){return"ReferenceBaseNode"}constructor(e,t,n=null,r=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=r,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.updateType=Wn.OBJECT}setGroup(e){return this.group=e,this}element(e){return Mt(new CNe(this,Mt(e)))}setNodeType(e){const t=jn(null,e).getSelf();this.group!==null&&t.setGroup(this.group),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let r=1;r<t.length;r++)n=n[t[r]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const RNe=(i,e,t)=>Mt(new _ie(i,e,t));class PNe extends _ie{static get type(){return"RendererReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.renderer=n,this.setGroup(hi)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const BNe=(i,e,t)=>Mt(new PNe(i,e,t));class INe extends vs{static get type(){return"ToneMappingNode"}constructor(e,t=DNe,n=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=n}getCacheKey(){return pC(super.getCacheKey(),this.toneMapping)}setup(e){const t=this.colorNode||e.context.color,n=this.toneMapping;if(n===$1)return t;let r=null;const s=e.renderer.nodes.library.getToneMappingFunction(n);return s!==null?r=Vn(s(t.rgb,this.exposureNode),t.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",n),r=t),r}}const NNe=(i,e,t)=>Mt(new INe(i,Mt(e),Mt(t))),DNe=BNe("toneMappingExposure","float");nt("toneMapping",(i,e,t)=>NNe(e,t,i));class LNe extends xF{static get type(){return"BufferAttributeNode"}constructor(e,t=null,n=0,r=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=n,this.bufferOffset=r,this.usage=dC,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),n=this.value,r=e.getTypeLength(t),s=this.bufferStride||r,o=this.bufferOffset,a=n.isInterleavedBuffer===!0?n:new Pne(n,s),l=new AF(a,r,o);a.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),n=e.getBufferAttributeFromNode(this,t),r=e.getPropertyName(n);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=r,s=r):s=ed(this).build(e,t),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const IF=(i,e,t,n)=>Mt(new LNe(i,e,t,n)),ONe=(i,e,t,n)=>IF(i,e,t,n).setUsage(w1),qV=(i,e,t,n)=>IF(i,e,t,n).setInstanced(!0),VV=(i,e,t,n)=>ONe(i,e,t,n).setInstanced(!0);nt("toAttribute",i=>IF(i.value));class FNe extends Gn{static get type(){return"ComputeNode"}constructor(e,t,n=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=t,this.workgroupSize=n,this.dispatchCount=0,this.version=1,this.updateBeforeType=Wn.OBJECT,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}updateDispatchCount(){const{count:e,workgroupSize:t}=this;let n=t[0];for(let r=1;r<t.length;r++)n*=t[r];this.dispatchCount=Math.ceil(e/n)}onInit(){}updateBefore({renderer:e}){e.compute(this)}generate(e){const{shaderStage:t}=e;if(t==="compute"){const n=this.computeNode.build(e,"void");n!==""&&e.addLineFlowCode(n,this)}}}const kNe=(i,e,t)=>Mt(new FNe(Mt(i),e,t));nt("compute",kNe);class UNe extends Gn{static get type(){return"CacheNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isCacheNode=!0}getNodeType(e){return this.node.getNodeType(e)}build(e,...t){const n=e.getCache(),r=e.getCacheFromNode(this,this.parent);e.setCache(r);const s=this.node.build(e,...t);return e.setCache(n),s}}const HM=(i,...e)=>Mt(new UNe(Mt(i),...e));nt("cache",HM);class zNe extends Gn{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}const GNe=ot(zNe);nt("bypass",GNe);class xie extends Gn{static get type(){return"RemapNode"}constructor(e,t,n,r=st(0),s=st(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=n,this.outLowNode=r,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:n,outLowNode:r,outHighNode:s,doClamp:o}=this;let a=e.sub(t).div(n.sub(t));return o===!0&&(a=a.clamp()),a.mul(s.sub(r)).add(r)}}const HNe=ot(xie,null,null,{doClamp:!1}),qNe=ot(xie);nt("remap",HNe);nt("remapClamp",qNe);class VNe extends Gn{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const n=this.getNodeType(e),r=this.snippet;if(n==="void")e.addLineFlowCode(r,this);else return e.format(`( ${r} )`,n,t)}}const Ux=ot(VNe),jNe=i=>(i?$a(i,Ux("discard")):Ux("discard")).append();nt("discard",jNe);class $Ne extends vs{static get type(){return"RenderOutputNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.toneMapping=t,this.outputColorSpace=n,this.isRenderOutput=!0}setup({context:e}){let t=this.colorNode||e.color;const n=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||$1,r=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||nm;return n!==$1&&(t=t.toneMapping(n)),r!==nm&&r!==Sl.workingColorSpace&&(t=t.workingToColorSpace(r)),t}}const WNe=(i,e=null,t=null)=>Mt(new $Ne(Mt(i),e,t));nt("renderOutput",WNe);class XNe extends Gn{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(t===null){const n=this.getAttributeName(e);if(e.hasGeometryAttribute(n)){const r=e.geometry.getAttribute(n);t=e.getTypeFromAttribute(r)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),n=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const s=e.geometry.getAttribute(t),o=e.getTypeFromAttribute(s),a=e.getAttribute(t,o);return e.shaderStage==="vertex"?e.format(a.name,o,n):ed(this).build(e,n)}else return console.warn(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(n)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const Wf=(i,e)=>Mt(new XNe(i,e)),Z4=i=>Wf("uv"+(i>0?i:""),"vec2");class YNe extends Gn{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const n=this.textureNode.build(e,"property"),r=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${n}, ${r} )`,this.getNodeType(e),t)}}const I_=ot(YNe);class QNe extends uv{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=Wn.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,t=e.images,n=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(n&&n.width!==void 0){const{width:r,height:s}=n;this.value=Math.log2(Math.max(r,s))}}}const KNe=ot(QNe);class Db extends uv{static get type(){return"TextureNode"}constructor(e,t=null,n=null,r=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=n,this.biasNode=r,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=Wn.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===ro?"uvec4":this.value.type===da?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return Z4(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=jn(this.value.matrix)),this._matrixUniform.mul(rt(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?Wn.FRAME:Wn.NONE,this}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0||n.isDepthTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(zr(I_(this,this.levelNode).y).sub(t.y).sub(1))),t}setup(e){const t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;let n=this.uvNode;(n===null||e.context.forceUVContext===!0)&&e.context.getUV&&(n=e.context.getUV(this)),n||(n=this.getDefaultUV()),this.updateMatrix===!0&&(n=this.getTransformedUV(n)),n=this.setupUV(e,n);let r=this.levelNode;r===null&&e.context.getTextureLevel&&(r=e.context.getTextureLevel(this)),t.uvNode=n,t.levelNode=r,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,t,n,r,s,o,a,l){const u=this.value;let c;return r?c=e.generateTextureLevel(u,t,n,r,o):s?c=e.generateTextureBias(u,t,n,s,o):l?c=e.generateTextureGrad(u,t,n,l,o):a?c=e.generateTextureCompare(u,t,n,a,o):this.sampler===!1?c=e.generateTextureLoad(u,t,n,o):c=e.generateTexture(u,t,n,o),c}generate(e,t){const n=e.getNodeProperties(this),r=this.value;if(!r||r.isTexture!==!0)throw new Error("TextureNode: Need a three.js texture.");const s=super.generate(e,"property");if(t==="sampler")return s+"_sampler";if(e.isReference(t))return s;{const o=e.getDataFromNode(this);let a=o.propertyName;if(a===void 0){const{uvNode:c,levelNode:h,biasNode:f,compareNode:d,depthNode:p,gradNode:v}=n,b=this.generateUV(e,c),_=h?h.build(e,"float"):null,M=f?f.build(e,"float"):null,E=p?p.build(e,"int"):null,R=d?d.build(e,"float"):null,L=v?[v[0].build(e,"vec2"),v[1].build(e,"vec2")]:null,I=e.getVarFromNode(this);a=e.getPropertyName(I);const D=this.generateSnippet(e,s,b,_,M,E,R,L);e.addLineFlowCode(`${a} = ${D}`,this),o.snippet=D,o.propertyName=a}let l=a;const u=this.getNodeType(e);return e.needsToWorkingColorSpace(r)&&(l=vie(Ux(l,u),r.colorSpace).setup(e).build(e,u)),e.format(l,u,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){const t=this.clone();return t.uvNode=Mt(e),t.referenceNode=this.getSelf(),Mt(t)}blur(e){const t=this.clone();return t.biasNode=Mt(e).mul(KNe(t)),t.referenceNode=this.getSelf(),Mt(t)}level(e){const t=this.clone();return t.levelNode=Mt(e),t.referenceNode=this.getSelf(),Mt(t)}size(e){return I_(this,e)}bias(e){const t=this.clone();return t.biasNode=Mt(e),t.referenceNode=this.getSelf(),Mt(t)}compare(e){const t=this.clone();return t.compareNode=Mt(e),t.referenceNode=this.getSelf(),Mt(t)}grad(e,t){const n=this.clone();return n.gradNode=[Mt(e),Mt(t)],n.referenceNode=this.getSelf(),Mt(n)}depth(e){const t=this.clone();return t.depthNode=Mt(e),t.referenceNode=this.getSelf(),Mt(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,t=this._matrixUniform;t!==null&&(t.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e}}const Hr=ot(Db),ac=(...i)=>Hr(...i).setSampler(!1),E2=jn("float").label("cameraNear").setGroup(hi).onRenderUpdate(({camera:i})=>i.near),C2=jn("float").label("cameraFar").setGroup(hi).onRenderUpdate(({camera:i})=>i.far),JNe=jn("float").label("cameraLogDepth").setGroup(hi).onRenderUpdate(({camera:i})=>2/(Math.log(i.far+1)/Math.LN2)),NF=jn("mat4").label("cameraProjectionMatrix").setGroup(hi).onRenderUpdate(({camera:i})=>i.projectionMatrix),td=jn("mat4").label("cameraViewMatrix").setGroup(hi).onRenderUpdate(({camera:i})=>i.matrixWorldInverse),ZNe=jn(new ze).label("cameraPosition").setGroup(hi).onRenderUpdate(({camera:i},e)=>e.value.setFromMatrixPosition(i.matrixWorld));class Si extends Gn{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=Wn.OBJECT,this._uniformNode=new uv(null)}getNodeType(){const e=this.scope;if(e===Si.WORLD_MATRIX)return"mat4";if(e===Si.POSITION||e===Si.VIEW_POSITION||e===Si.DIRECTION||e===Si.SCALE)return"vec3"}update(e){const t=this.object3d,n=this._uniformNode,r=this.scope;if(r===Si.WORLD_MATRIX)n.value=t.matrixWorld;else if(r===Si.POSITION)n.value=n.value||new ze,n.value.setFromMatrixPosition(t.matrixWorld);else if(r===Si.SCALE)n.value=n.value||new ze,n.value.setFromMatrixScale(t.matrixWorld);else if(r===Si.DIRECTION)n.value=n.value||new ze,t.getWorldDirection(n.value);else if(r===Si.VIEW_POSITION){const s=e.camera;n.value=n.value||new ze,n.value.setFromMatrixPosition(t.matrixWorld),n.value.applyMatrix4(s.matrixWorldInverse)}}generate(e){const t=this.scope;return t===Si.WORLD_MATRIX?this._uniformNode.nodeType="mat4":(t===Si.POSITION||t===Si.VIEW_POSITION||t===Si.DIRECTION||t===Si.SCALE)&&(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}Si.WORLD_MATRIX="worldMatrix";Si.POSITION="position";Si.SCALE="scale";Si.VIEW_POSITION="viewPosition";Si.DIRECTION="direction";Si.DIRECTION;Si.WORLD_MATRIX;Si.POSITION;Si.SCALE;Si.VIEW_POSITION;class vh extends Si{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}vh.DIRECTION;const om=Pt(vh,vh.WORLD_MATRIX);vh.POSITION;vh.SCALE;vh.VIEW_POSITION;const eDe=jn(new Zl).onObjectUpdate(({object:i},e)=>e.value.getNormalMatrix(i.matrixWorld)),e5=td.mul(om).toVar("modelViewMatrix"),bie=Wf("position","vec3"),qo=bie.varying("positionLocal"),jV=bie.varying("positionPrevious"),qN=om.mul(qo).xyz.varying("v_positionWorld"),wie=qo.transformDirection(om).varying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),Uo=e5.mul(qo).xyz.varying("v_positionView"),br=Uo.negate().varying("v_positionViewDirection").normalize().toVar("positionViewDirection");class tDe extends Gn{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:t,material:n}=e;return t.coordinateSystem===mc&&n.side===Jf?"false":e.getFrontFacing()}}const nDe=Pt(tDe),t5=st(nDe).mul(2).sub(1),Sie=Wf("normal","vec3"),_h=$t(i=>i.geometry.hasAttribute("normal")===!1?(console.warn('TSL.NormalNode: Vertex attribute "normal" not found on geometry.'),rt(0,1,0)):Sie,"vec3").once()().toVar("normalLocal"),iDe=Uo.dFdx().cross(Uo.dFdy()).normalize().toVar("normalFlat"),Tc=$t(i=>{let e;return i.material.flatShading===!0?e=iDe:e=ed(Tie(_h),"v_normalView").normalize(),e},"vec3").once()().toVar("normalView"),n5=ed(Tc.transformDirection(td),"v_normalWorld").normalize().toVar("normalWorld"),cs=$t(i=>i.context.setupNormal(),"vec3").once()().mul(t5).toVar("transformedNormalView"),Mie=cs.transformDirection(td).toVar("transformedNormalWorld"),K2=$t(i=>i.context.setupClearcoatNormal(),"vec3").once()().mul(t5).toVar("transformedClearcoatNormalView"),rDe=$t(([i,e=om])=>{const t=al(e),n=i.div(rt(t[0].dot(t[0]),t[1].dot(t[1]),t[2].dot(t[2])));return t.mul(n).xyz}),Tie=$t(([i],e)=>{const t=e.renderer.nodes.modelNormalViewMatrix;if(t!==null)return t.transformDirection(i);const n=eDe.mul(i);return td.transformDirection(n)}),sDe=jn(0).onReference(({material:i})=>i).onRenderUpdate(({material:i})=>i.refractionRatio),oDe=br.negate().reflect(cs),aDe=br.negate().refract(cs,sDe),lDe=oDe.transformDirection(td).toVar("reflectVector"),uDe=aDe.transformDirection(td).toVar("reflectVector");class cDe extends Db{static get type(){return"CubeTextureNode"}constructor(e,t=null,n=null,r=null){super(e,t,n,r),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===tm?lDe:e.mapping===Ny?uDe:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),rt(0,0,0))}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return e.renderer.coordinateSystem===im||!n.isRenderTargetTexture?rt(t.x.negate(),t.yz):t}generateUV(e,t){return t.build(e,"vec3")}}const zx=ot(cDe);class Eie extends uv{static get type(){return"BufferNode"}constructor(e,t,n=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=n}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const DF=(i,e,t)=>Mt(new Eie(i,e,t));class hDe extends Ib{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){const t=super.generate(e),n=this.getNodeType();return e.format(t,"vec4",n)}}class fDe extends Eie{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null,"vec4"),this.array=e,this.elementType=t,this._elementType=null,this._elementLength=0,this.updateType=Wn.RENDER,this.isArrayBufferNode=!0}getElementType(){return this.elementType||this._elementType}getElementLength(){return this._elementLength}update(){const{array:e,value:t}=this,n=this.getElementLength(),r=this.getElementType();if(n===1)for(let s=0;s<e.length;s++){const o=s*4;t[o]=e[s]}else if(r==="color")for(let s=0;s<e.length;s++){const o=s*4,a=e[s];t[o]=a.r,t[o+1]=a.g,t[o+2]=a.b||0}else for(let s=0;s<e.length;s++){const o=s*4,a=e[s];t[o]=a.x,t[o+1]=a.y,t[o+2]=a.z||0,t[o+3]=a.w||0}}setup(e){const t=this.array.length;this._elementType=this.elementType===null?mC(this.array[0]):this.elementType,this._elementLength=e.getTypeLength(this._elementType);let n=Float32Array;return this._elementType.charAt(0)==="i"?n=Int32Array:this._elementType.charAt(0)==="u"&&(n=Uint32Array),this.value=new n(t*4),this.bufferCount=t,this.bufferType=e.changeComponentType("vec4",e.getComponentType(this._elementType)),super.setup(e)}element(e){return Mt(new hDe(this,Mt(e)))}}const Gx=(i,e)=>Mt(new fDe(i,e));class dDe extends Ib{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),r=this.getNodeType();return e.format(t,n,r)}}class LF extends Gn{static get type(){return"ReferenceNode"}constructor(e,t,n=null,r=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=r,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.name=null,this.updateType=Wn.OBJECT}element(e){return Mt(new dDe(this,Mt(e)))}setGroup(e){return this.group=e,this}label(e){return this.name=e,this}setNodeType(e){let t=null;this.count!==null?t=DF(null,e,this.count):Array.isArray(this.getValueFromReference())?t=Gx(null,e):e==="texture"?t=Hr(null):e==="cubeTexture"?t=zx(null):t=jn(null,e),this.group!==null&&t.setGroup(this.group),this.name!==null&&t.label(this.name),this.node=t.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let r=1;r<t.length;r++)n=n[t[r]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const wr=(i,e,t)=>Mt(new LF(i,e,t)),$V=(i,e,t,n)=>Mt(new LF(i,e,n,t));class pDe extends LF{static get type(){return"MaterialReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.material=n,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const np=(i,e,t)=>Mt(new pDe(i,e,t)),Cie=$t(i=>(i.geometry.hasAttribute("tangent")===!1&&i.geometry.computeTangents(),Wf("tangent","vec4")))(),OF=Cie.xyz.toVar("tangentLocal"),Rie=e5.mul(Vn(OF,0)).xyz.varying("v_tangentView").normalize().toVar("tangentView"),ADe=i=>i.mul(Cie.w).xyz,mDe=ed(ADe(Tc.cross(Rie)),"v_bitangentView").normalize().toVar("bitangentView"),J2=al(Rie,mDe,Tc),gDe=(()=>{let i=K1.cross(br);return i=i.cross(K1).normalize(),i=nr(i,cs,JA.mul(df.oneMinus()).oneMinus().pow2().pow2()).normalize(),i})(),yDe=$t(i=>{const{eye_pos:e,surf_norm:t,mapN:n,uv:r}=i,s=e.dFdx(),o=e.dFdy(),a=r.dFdx(),l=r.dFdy(),u=t,c=o.cross(u),h=u.cross(s),f=c.mul(a.x).add(h.mul(l.x)),d=c.mul(a.y).add(h.mul(l.y)),p=f.dot(f).max(d.dot(d)),v=t5.mul(p.inverseSqrt());return Wl(f.mul(n.x,v),d.mul(n.y,v),u.mul(n.z)).normalize()});class vDe extends vs{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=Fp}setup(e){const{normalMapType:t,scaleNode:n}=this;let r=this.node.mul(2).sub(1);n!==null&&(r=rt(r.xy.mul(n),r.z));let s=null;return t===h6e?s=Tie(r):t===Fp&&(e.hasGeometryAttribute("tangent")===!0?s=J2.mul(r).normalize():s=yDe({eye_pos:Uo,surf_norm:Tc,mapN:r,uv:Z4()})),s}}const WV=ot(vDe),_De=$t(({textureNode:i,bumpScale:e})=>{const t=r=>i.cache().context({getUV:s=>r(s.uvNode||Z4()),forceUVContext:!0}),n=st(t(r=>r));return Yt(st(t(r=>r.add(r.dFdx()))).sub(n),st(t(r=>r.add(r.dFdy()))).sub(n)).mul(e)}),xDe=$t(i=>{const{surf_pos:e,surf_norm:t,dHdxy:n}=i,r=e.dFdx().normalize(),s=e.dFdy().normalize(),o=t,a=s.cross(o),l=o.cross(r),u=r.dot(a).mul(t5),c=u.sign().mul(n.x.mul(a).add(n.y.mul(l)));return u.abs().mul(t).sub(c).normalize()});class bDe extends vs{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=_De({textureNode:this.textureNode,bumpScale:e});return xDe({surf_pos:Uo,surf_norm:Tc,dHdxy:t})}}const wDe=ot(bDe),XV=new Map;class Ke extends Gn{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let n=XV.get(e);return n===void 0&&(n=np(e,t),XV.set(e,n)),n}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,n=this.scope;let r=null;if(n===Ke.COLOR){const s=t.color!==void 0?this.getColor(n):rt();t.map&&t.map.isTexture===!0?r=s.mul(this.getTexture("map")):r=s}else if(n===Ke.OPACITY){const s=this.getFloat(n);t.alphaMap&&t.alphaMap.isTexture===!0?r=s.mul(this.getTexture("alpha")):r=s}else if(n===Ke.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?r=this.getTexture("specular").r:r=st(1);else if(n===Ke.SPECULAR_INTENSITY){const s=this.getFloat(n);t.specularMap?r=s.mul(this.getTexture(n).a):r=s}else if(n===Ke.SPECULAR_COLOR){const s=this.getColor(n);t.specularColorMap&&t.specularColorMap.isTexture===!0?r=s.mul(this.getTexture(n).rgb):r=s}else if(n===Ke.ROUGHNESS){const s=this.getFloat(n);t.roughnessMap&&t.roughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).g):r=s}else if(n===Ke.METALNESS){const s=this.getFloat(n);t.metalnessMap&&t.metalnessMap.isTexture===!0?r=s.mul(this.getTexture(n).b):r=s}else if(n===Ke.EMISSIVE){const s=this.getFloat("emissiveIntensity"),o=this.getColor(n).mul(s);t.emissiveMap&&t.emissiveMap.isTexture===!0?r=o.mul(this.getTexture(n)):r=o}else if(n===Ke.NORMAL)t.normalMap?(r=WV(this.getTexture("normal"),this.getCache("normalScale","vec2")),r.normalMapType=t.normalMapType):t.bumpMap?r=wDe(this.getTexture("bump").r,this.getFloat("bumpScale")):r=Tc;else if(n===Ke.CLEARCOAT){const s=this.getFloat(n);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?r=s.mul(this.getTexture(n).r):r=s}else if(n===Ke.CLEARCOAT_ROUGHNESS){const s=this.getFloat(n);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).r):r=s}else if(n===Ke.CLEARCOAT_NORMAL)t.clearcoatNormalMap?r=WV(this.getTexture(n),this.getCache(n+"Scale","vec2")):r=Tc;else if(n===Ke.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?r=s.mul(this.getTexture("sheenColor").rgb):r=s}else if(n===Ke.SHEEN_ROUGHNESS){const s=this.getFloat(n);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).a):r=s,r=r.clamp(.07,1)}else if(n===Ke.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const s=this.getTexture(n);r=MF(R2.x,R2.y,R2.y.negate(),R2.x).mul(s.rg.mul(2).sub(Yt(1)).normalize().mul(s.b))}else r=R2;else if(n===Ke.IRIDESCENCE_THICKNESS){const s=wr("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const o=wr("0","float",t.iridescenceThicknessRange);r=s.sub(o).mul(this.getTexture(n).g).add(o)}else r=s}else if(n===Ke.TRANSMISSION){const s=this.getFloat(n);t.transmissionMap?r=s.mul(this.getTexture(n).r):r=s}else if(n===Ke.THICKNESS){const s=this.getFloat(n);t.thicknessMap?r=s.mul(this.getTexture(n).g):r=s}else if(n===Ke.IOR)r=this.getFloat(n);else if(n===Ke.LIGHT_MAP)r=this.getTexture(n).rgb.mul(this.getFloat("lightMapIntensity"));else if(n===Ke.AO_MAP)r=this.getTexture(n).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else{const s=this.getNodeType(e);r=this.getCache(n,s)}return r}}Ke.ALPHA_TEST="alphaTest";Ke.COLOR="color";Ke.OPACITY="opacity";Ke.SHININESS="shininess";Ke.SPECULAR="specular";Ke.SPECULAR_STRENGTH="specularStrength";Ke.SPECULAR_INTENSITY="specularIntensity";Ke.SPECULAR_COLOR="specularColor";Ke.REFLECTIVITY="reflectivity";Ke.ROUGHNESS="roughness";Ke.METALNESS="metalness";Ke.NORMAL="normal";Ke.CLEARCOAT="clearcoat";Ke.CLEARCOAT_ROUGHNESS="clearcoatRoughness";Ke.CLEARCOAT_NORMAL="clearcoatNormal";Ke.EMISSIVE="emissive";Ke.ROTATION="rotation";Ke.SHEEN="sheen";Ke.SHEEN_ROUGHNESS="sheenRoughness";Ke.ANISOTROPY="anisotropy";Ke.IRIDESCENCE="iridescence";Ke.IRIDESCENCE_IOR="iridescenceIOR";Ke.IRIDESCENCE_THICKNESS="iridescenceThickness";Ke.IOR="ior";Ke.TRANSMISSION="transmission";Ke.THICKNESS="thickness";Ke.ATTENUATION_DISTANCE="attenuationDistance";Ke.ATTENUATION_COLOR="attenuationColor";Ke.LINE_SCALE="scale";Ke.LINE_DASH_SIZE="dashSize";Ke.LINE_GAP_SIZE="gapSize";Ke.LINE_WIDTH="linewidth";Ke.LINE_DASH_OFFSET="dashOffset";Ke.POINT_WIDTH="pointWidth";Ke.DISPERSION="dispersion";Ke.LIGHT_MAP="light";Ke.AO_MAP="ao";const SDe=Pt(Ke,Ke.ALPHA_TEST),MDe=Pt(Ke,Ke.COLOR),TDe=Pt(Ke,Ke.SHININESS),EDe=Pt(Ke,Ke.EMISSIVE),Pie=Pt(Ke,Ke.OPACITY),CDe=Pt(Ke,Ke.SPECULAR),YV=Pt(Ke,Ke.SPECULAR_INTENSITY),RDe=Pt(Ke,Ke.SPECULAR_COLOR),qM=Pt(Ke,Ke.SPECULAR_STRENGTH),kP=Pt(Ke,Ke.REFLECTIVITY),PDe=Pt(Ke,Ke.ROUGHNESS),BDe=Pt(Ke,Ke.METALNESS),IDe=Pt(Ke,Ke.NORMAL).context({getUV:null}),NDe=Pt(Ke,Ke.CLEARCOAT),DDe=Pt(Ke,Ke.CLEARCOAT_ROUGHNESS),LDe=Pt(Ke,Ke.CLEARCOAT_NORMAL).context({getUV:null}),ODe=Pt(Ke,Ke.ROTATION),FDe=Pt(Ke,Ke.SHEEN),kDe=Pt(Ke,Ke.SHEEN_ROUGHNESS),UDe=Pt(Ke,Ke.ANISOTROPY),zDe=Pt(Ke,Ke.IRIDESCENCE),GDe=Pt(Ke,Ke.IRIDESCENCE_IOR),HDe=Pt(Ke,Ke.IRIDESCENCE_THICKNESS),qDe=Pt(Ke,Ke.TRANSMISSION),VDe=Pt(Ke,Ke.THICKNESS),jDe=Pt(Ke,Ke.IOR),$De=Pt(Ke,Ke.ATTENUATION_DISTANCE),WDe=Pt(Ke,Ke.ATTENUATION_COLOR),XDe=Pt(Ke,Ke.LINE_SCALE),YDe=Pt(Ke,Ke.LINE_DASH_SIZE),QDe=Pt(Ke,Ke.LINE_GAP_SIZE);Ke.LINE_WIDTH;Ke.LINE_DASH_OFFSET;Ke.POINT_WIDTH;const KDe=Pt(Ke,Ke.DISPERSION),Bie=Pt(Ke,Ke.LIGHT_MAP),JDe=Pt(Ke,Ke.AO_MAP),R2=jn(new gi).onReference(function(i){return i.material}).onRenderUpdate(function({material:i}){this.value.set(i.anisotropy*Math.cos(i.anisotropyRotation),i.anisotropy*Math.sin(i.anisotropyRotation))});class ZDe extends vs{static get type(){return"ModelViewProjectionNode"}constructor(e=null){super("vec4"),this.positionNode=e}setup(e){if(e.shaderStage==="fragment")return ed(e.context.mvp);const t=this.positionNode||qo,n=e.renderer.nodes.modelViewMatrix||e5;return NF.mul(n).mul(t)}}const VN=ot(ZDe);class ir extends Gn{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isInstanceIndexNode=!0}generate(e){const t=this.getNodeType(e),n=this.scope;let r;if(n===ir.VERTEX)r=e.getVertexIndex();else if(n===ir.INSTANCE)r=e.getInstanceIndex();else if(n===ir.DRAW)r=e.getDrawIndex();else if(n===ir.INVOCATION_LOCAL)r=e.getInvocationLocalIndex();else if(n===ir.INVOCATION_SUBGROUP)r=e.getInvocationSubgroupIndex();else if(n===ir.SUBGROUP)r=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+n);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=r:s=ed(this).build(e,t),s}}ir.VERTEX="vertex";ir.INSTANCE="instance";ir.SUBGROUP="subgroup";ir.INVOCATION_LOCAL="invocationLocal";ir.INVOCATION_SUBGROUP="invocationSubgroup";ir.DRAW="draw";const eLe=Pt(ir,ir.VERTEX),FF=Pt(ir,ir.INSTANCE);ir.SUBGROUP;ir.INVOCATION_SUBGROUP;ir.INVOCATION_LOCAL;const tLe=Pt(ir,ir.DRAW);class nLe extends Gn{static get type(){return"InstanceNode"}constructor(e){super("void"),this.instanceMesh=e,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=Wn.FRAME,this.buffer=null,this.bufferColor=null}setup(e){let t=this.instanceMatrixNode,n=this.instanceColorNode;const r=this.instanceMesh;if(t===null){const a=r.instanceMatrix;if(r.count<=1e3)t=DF(a.array,"mat4",Math.max(r.count,1)).element(FF);else{const l=new IBe(a.array,16,1);this.buffer=l;const u=a.usage===w1?VV:qV,c=[u(l,"vec4",16,0),u(l,"vec4",16,4),u(l,"vec4",16,8),u(l,"vec4",16,12)];t=Q1(...c)}this.instanceMatrixNode=t}const s=r.instanceColor;if(s&&n===null){const a=new yBe(s.array,3),l=s.usage===w1?VV:qV;this.bufferColor=a,n=rt(l(a,"vec3",3,0)),this.instanceColorNode=n}const o=t.mul(qo).xyz;if(qo.assign(o),e.hasGeometryAttribute("normal")){const a=rDe(_h,t);_h.assign(a)}this.instanceColorNode!==null&&yC("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMesh.instanceMatrix.usage!==w1&&this.buffer!=null&&this.instanceMesh.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMesh.instanceMatrix.version),this.instanceMesh.instanceColor&&this.instanceMesh.instanceColor.usage!==w1&&this.bufferColor!=null&&this.instanceMesh.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceMesh.instanceColor.version)}}const iLe=ot(nLe);class rLe extends Gn{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=FF:this.batchingIdNode=tLe);const n=$t(([p])=>{const v=I_(ac(this.batchMesh._indirectTexture),0),b=zr(p).modInt(zr(v)),_=zr(p).div(zr(v));return ac(this.batchMesh._indirectTexture,af(b,_)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(zr(this.batchingIdNode)),r=this.batchMesh._matricesTexture,s=I_(ac(r),0),o=st(n).mul(4).toInt().toVar(),a=o.modInt(s),l=o.div(zr(s)),u=Q1(ac(r,af(a,l)),ac(r,af(a.add(1),l)),ac(r,af(a.add(2),l)),ac(r,af(a.add(3),l))),c=this.batchMesh._colorsTexture;if(c!==null){const v=$t(([b])=>{const _=I_(ac(c),0).x,M=b,E=M.modInt(_),R=M.div(_);return ac(c,af(E,R)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(n);yC("vec3","vBatchColor").assign(v)}const h=al(u);qo.assign(u.mul(qo));const f=_h.div(rt(h[0].dot(h[0]),h[1].dot(h[1]),h[2].dot(h[2]))),d=h.mul(f).xyz;_h.assign(d),e.hasGeometryAttribute("tangent")&&OF.mulAssign(h)}}const sLe=ot(rLe),QV=new WeakMap;class oLe extends Gn{static get type(){return"SkinningNode"}constructor(e,t=!1){super("void"),this.skinnedMesh=e,this.useReference=t,this.updateType=Wn.OBJECT,this.skinIndexNode=Wf("skinIndex","uvec4"),this.skinWeightNode=Wf("skinWeight","vec4");let n,r,s;t?(n=wr("bindMatrix","mat4"),r=wr("bindMatrixInverse","mat4"),s=$V("skeleton.boneMatrices","mat4",e.skeleton.bones.length)):(n=jn(e.bindMatrix,"mat4"),r=jn(e.bindMatrixInverse,"mat4"),s=DF(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)),this.bindMatrixNode=n,this.bindMatrixInverseNode=r,this.boneMatricesNode=s,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,t=qo){const{skinIndexNode:n,skinWeightNode:r,bindMatrixNode:s,bindMatrixInverseNode:o}=this,a=e.element(n.x),l=e.element(n.y),u=e.element(n.z),c=e.element(n.w),h=s.mul(t),f=Wl(a.mul(r.x).mul(h),l.mul(r.y).mul(h),u.mul(r.z).mul(h),c.mul(r.w).mul(h));return o.mul(f).xyz}getSkinnedNormal(e=this.boneMatricesNode,t=_h){const{skinIndexNode:n,skinWeightNode:r,bindMatrixNode:s,bindMatrixInverseNode:o}=this,a=e.element(n.x),l=e.element(n.y),u=e.element(n.z),c=e.element(n.w);let h=Wl(r.x.mul(a),r.y.mul(l),r.z.mul(u),r.w.mul(c));return h=o.mul(h).mul(s),h.transformDirection(t).xyz}getPreviousSkinnedPosition(e){const t=e.object;return this.previousBoneMatricesNode===null&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=$V("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,jV)}needsPreviousBoneMatrices(e){const t=e.renderer.getMRT();return t&&t.has("velocity")}setup(e){this.needsPreviousBoneMatrices(e)&&jV.assign(this.getPreviousSkinnedPosition(e));const t=this.getSkinnedPosition();if(qo.assign(t),e.hasGeometryAttribute("normal")){const n=this.getSkinnedNormal();_h.assign(n),e.hasGeometryAttribute("tangent")&&OF.assign(n)}}generate(e,t){if(t!=="void")return qo.build(e,t)}update(e){const n=(this.useReference?e.object:this.skinnedMesh).skeleton;QV.get(n)!==e.frameId&&(QV.set(n,e.frameId),this.previousBoneMatricesNode!==null&&n.previousBoneMatrices.set(n.boneMatrices),n.update())}}const aLe=i=>Mt(new oLe(i,!0));class lLe extends Gn{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const n={};for(let s=0,o=this.params.length-1;s<o;s++){const a=this.params[s],l=a.isNode!==!0&&a.name||this.getVarName(s),u=a.isNode!==!0&&a.type||"int";n[l]=Ux(l,u)}const r=e.addStack();return t.returnsNode=this.params[this.params.length-1](n,r,e),t.stackNode=r,e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),n=this.params,r=t.stackNode;for(let a=0,l=n.length-1;a<l;a++){const u=n[a];let c=null,h=null,f=null,d=null,p=null,v=null;u.isNode?(d="int",f=this.getVarName(a),c="0",h=u.build(e,d),p="<"):(d=u.type||"int",f=u.name||this.getVarName(a),c=u.start,h=u.end,p=u.condition,v=u.update,typeof c=="number"?c=c.toString():c&&c.isNode&&(c=c.build(e,d)),typeof h=="number"?h=h.toString():h&&h.isNode&&(h=h.build(e,d)),c!==void 0&&h===void 0?(c=c+" - 1",h="0",p=">="):h!==void 0&&c===void 0&&(c="0",p="<"),p===void 0&&(Number(c)>Number(h)?p=">=":p="<"));const b={start:c,end:h,condition:p},_=b.start,M=b.end;let E="",R="",L="";v||(d==="int"||d==="uint"?p.includes("<")?v="++":v="--":p.includes("<")?v="+= 1.":v="-= 1."),E+=e.getVar(d,f)+" = "+_,R+=f+" "+p+" "+M,L+=f+" "+v;const I=`for ( ${E}; ${R}; ${L} )`;e.addFlowCode((a===0?`
`:"")+e.tab+I+` {

`).addFlowTab()}const s=r.build(e,"void"),o=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let a=0,l=this.params.length-1;a<l;a++)e.addFlowCode((a===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),o}}const yf=(...i)=>Mt(new lLe(Y1(i,"int"))).append(),uLe=()=>Ux("break").append(),UP=new WeakMap,bl=new Ni,KV=$t(({bufferMap:i,influence:e,stride:t,width:n,depth:r,offset:s})=>{const o=zr(eLe).mul(t).add(s),a=o.div(n),l=o.sub(a.mul(n));return ac(i,af(l,a)).depth(r).mul(e)});function cLe(i){const e=i.morphAttributes.position!==void 0,t=i.morphAttributes.normal!==void 0,n=i.morphAttributes.color!==void 0,r=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,s=r!==void 0?r.length:0;let o=UP.get(i);if(o===void 0||o.count!==s){let _=function(){v.dispose(),UP.delete(i),i.removeEventListener("dispose",_)};o!==void 0&&o.texture.dispose();const a=i.morphAttributes.position||[],l=i.morphAttributes.normal||[],u=i.morphAttributes.color||[];let c=0;e===!0&&(c=1),t===!0&&(c=2),n===!0&&(c=3);let h=i.attributes.position.count*c,f=1;const d=4096;h>d&&(f=Math.ceil(h/d),h=d);const p=new Float32Array(h*f*4*s),v=new J6e(p,h,f,s);v.type=Dl,v.needsUpdate=!0;const b=c*4;for(let M=0;M<s;M++){const E=a[M],R=l[M],L=u[M],I=h*f*4*M;for(let D=0;D<E.count;D++){const k=D*b;e===!0&&(bl.fromBufferAttribute(E,D),p[I+k+0]=bl.x,p[I+k+1]=bl.y,p[I+k+2]=bl.z,p[I+k+3]=0),t===!0&&(bl.fromBufferAttribute(R,D),p[I+k+4]=bl.x,p[I+k+5]=bl.y,p[I+k+6]=bl.z,p[I+k+7]=0),n===!0&&(bl.fromBufferAttribute(L,D),p[I+k+8]=bl.x,p[I+k+9]=bl.y,p[I+k+10]=bl.z,p[I+k+11]=L.itemSize===4?bl.w:1)}}o={count:s,texture:v,stride:c,size:new gi(h,f)},UP.set(i,o),i.addEventListener("dispose",_)}return o}class hLe extends Gn{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=jn(1),this.updateType=Wn.OBJECT}setup(e){const{geometry:t}=e,n=t.morphAttributes.position!==void 0,r=t.hasAttribute("normal")&&t.morphAttributes.normal!==void 0,s=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,o=s!==void 0?s.length:0,{texture:a,stride:l,size:u}=cLe(t);n===!0&&qo.mulAssign(this.morphBaseInfluence),r===!0&&_h.mulAssign(this.morphBaseInfluence);const c=zr(u.width);yf(o,({i:h})=>{const f=st(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?f.assign(ac(this.mesh.morphTexture,af(zr(h).add(1),zr(FF))).r):f.assign(wr("morphTargetInfluences","float").element(h).toVar()),n===!0&&qo.addAssign(KV({bufferMap:a,influence:f,stride:l,width:c,depth:h,offset:zr(0)})),r===!0&&_h.addAssign(KV({bufferMap:a,influence:f,stride:l,width:c,depth:h,offset:zr(1)}))})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,n)=>t+n,0)}}const fLe=ot(hLe),dLe=i=>i.sort((e,t)=>e.id-t.id),pLe=(i,e)=>{for(const t of e)if(t.isAnalyticLightNode&&t.light.id===i)return t;return null},zP=new WeakMap;class Iie extends Gn{static get type(){return"LightsNode"}constructor(e=[]){super("vec3"),this.totalDiffuseNode=rt().toVar("totalDiffuse"),this.totalSpecularNode=rt().toVar("totalSpecular"),this.outgoingLightNode=rt().toVar("outgoingLight"),this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this.global=!0}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const t=[];for(const n of this._lightNodes)t.push(n.getHash());this._lightNodesHash="lights-"+t.join(",")}return this._lightNodesHash}analyze(e){const t=e.getDataFromNode(this);for(const n of t.nodes)n.build(e)}setupLightsNode(e){const t=[],n=this._lightNodes,r=dLe(this._lights),s=e.renderer.nodes.library;for(const o of r)if(o.isNode)t.push(Mt(o));else{let a=null;if(n!==null&&(a=pLe(o.id,n)),a===null){const l=s.getLightNodeClass(o.constructor);if(l===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${o.constructor.name}`);continue}let u=null;zP.has(o)?u=zP.get(o):(u=new l(o),zP.set(o,u)),t.push(u)}}this._lightNodes=t}setup(e){this._lightNodes===null&&this.setupLightsNode(e);const t=e.context,n=t.lightingModel;let r=this.outgoingLightNode;if(n){const{_lightNodes:s,totalDiffuseNode:o,totalSpecularNode:a}=this;t.outgoingLight=r;const l=e.addStack(),u=e.getDataFromNode(this);u.nodes=l.nodes,n.start(t,l,e);for(const _ of s)_.build(e);n.indirect(t,l,e);const{backdrop:c,backdropAlpha:h}=t,{directDiffuse:f,directSpecular:d,indirectDiffuse:p,indirectSpecular:v}=t.reflectedLight;let b=f.add(p);c!==null&&(h!==null?b=rt(h.mix(b,c)):b=rt(c),t.material.transparent=!0),o.assign(b),a.assign(d.add(v)),r.assign(o.add(a)),n.finish(t,l,e),r=r.bypass(e.removeStack())}return r}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}}const ALe=ot(Iie);class hv extends Gn{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}generate(){console.warn("Abstract function.")}}class mLe extends hv{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class gLe extends gie{static get type(){return"LightingContextNode"}constructor(e,t=null,n=null,r=null){super(e),this.lightingModel=t,this.backdropNode=n,this.backdropAlphaNode=r,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,n=rt().toVar("directDiffuse"),r=rt().toVar("directSpecular"),s=rt().toVar("indirectDiffuse"),o=rt().toVar("indirectSpecular"),a={directDiffuse:n,directSpecular:r,indirectDiffuse:s,indirectSpecular:o};return{radiance:rt().toVar("radiance"),irradiance:rt().toVar("irradiance"),iblIrradiance:rt().toVar("iblIrradiance"),ambientOcclusion:st(1).toVar("ambientOcclusion"),reflectedLight:a,backdrop:e,backdropAlpha:t}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const yLe=ot(gLe);class vLe extends hv{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let P2,B2;class ls extends Gn{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===ls.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=Wn.NONE;return(this.scope===ls.SIZE||this.scope===ls.VIEWPORT)&&(e=Wn.RENDER),this.updateType=e,e}update({renderer:e}){const t=e.getRenderTarget();this.scope===ls.VIEWPORT?t!==null?B2.copy(t.viewport):(e.getViewport(B2),B2.multiplyScalar(e.getPixelRatio())):t!==null?(P2.width=t.width,P2.height=t.height):e.getDrawingBufferSize(P2)}setup(){const e=this.scope;let t=null;return e===ls.SIZE?t=jn(P2||(P2=new gi)):e===ls.VIEWPORT?t=jn(B2||(B2=new Ni)):t=Yt(i5.div(jN)),t}generate(e){if(this.scope===ls.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const n=e.getNodeProperties(jN).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${n}.y - ${t}.y )`}return t}return super.generate(e)}}ls.COORDINATE="coordinate";ls.VIEWPORT="viewport";ls.SIZE="size";ls.UV="uv";const Hx=Pt(ls,ls.UV),jN=Pt(ls,ls.SIZE),i5=Pt(ls,ls.COORDINATE),Nie=Pt(ls,ls.VIEWPORT);Nie.zw;Nie.xy;const I2=new gi;class Die extends Db{static get type(){return"ViewportTextureNode"}constructor(e=Hx,t=null,n=null){n===null&&(n=new xBe,n.minFilter=Tf),super(n,e,t),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=Wn.FRAME}updateBefore(e){const t=e.renderer;t.getDrawingBufferSize(I2);const n=this.value;(n.image.width!==I2.width||n.image.height!==I2.height)&&(n.image.width=I2.width,n.image.height=I2.height,n.needsUpdate=!0);const r=n.generateMipmaps;n.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(n),n.generateMipmaps=r}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const _Le=ot(Die,null,null,{generateMipmaps:!0});let GP=null;class xLe extends Die{static get type(){return"ViewportDepthTextureNode"}constructor(e=Hx,t=null){GP===null&&(GP=new Bb),super(e,t,GP)}}const bLe=ot(xLe);class Wa extends Gn{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===Wa.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:t}=this,n=this.valueNode;let r=null;if(t===Wa.DEPTH_BASE)n!==null&&(r=Oie().assign(n));else if(t===Wa.DEPTH)e.isPerspectiveCamera?r=wLe(Uo.z,E2,C2):r=VM(Uo.z,E2,C2);else if(t===Wa.LINEAR_DEPTH)if(n!==null)if(e.isPerspectiveCamera){const s=Lie(n,E2,C2);r=VM(s,E2,C2)}else r=n;else r=VM(Uo.z,E2,C2);return r}}Wa.DEPTH_BASE="depthBase";Wa.DEPTH="depth";Wa.LINEAR_DEPTH="linearDepth";const VM=(i,e,t)=>i.add(e).div(e.sub(t)),wLe=(i,e,t)=>e.add(i).mul(t).div(t.sub(e).mul(i)),Lie=(i,e,t)=>e.mul(t).div(t.sub(e).mul(i).sub(t)),Oie=ot(Wa,Wa.DEPTH_BASE),Fie=Pt(Wa,Wa.DEPTH),SLe=ot(Wa,Wa.LINEAR_DEPTH);bLe();Fie.assign=i=>Oie(i);class zp extends Gn{static get type(){return"ClippingNode"}constructor(e=zp.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{localClipIntersection:n,localClippingCount:r,globalClippingCount:s}=t,o=s+r,a=n?o-r:o;return this.scope===zp.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(t.planes,o,a):this.setupDefault(t.planes,o,a)}setupAlphaToCoverage(e,t,n){return $t(()=>{const r=Gx(e),s=Wg("float","distanceToPlane"),o=Wg("float","distanceToGradient"),a=Wg("float","clipOpacity");a.assign(1);let l;if(yf(n,({i:u})=>{l=r.element(u),s.assign(Uo.dot(l.xyz).negate().add(l.w)),o.assign(s.fwidth().div(2)),a.mulAssign(sm(o.negate(),o,s)),a.equal(0).discard()}),n<t){const u=Wg("float","unionclipOpacity");u.assign(1),yf({start:n,end:t},({i:c})=>{l=r.element(c),s.assign(Uo.dot(l.xyz).negate().add(l.w)),o.assign(s.fwidth().div(2)),u.mulAssign(sm(o.negate(),o,s).oneMinus())}),a.mulAssign(u.oneMinus())}Ii.a.mulAssign(a),Ii.a.equal(0).discard()})()}setupDefault(e,t,n){return $t(()=>{const r=Gx(e);let s;if(yf(n,({i:o})=>{s=r.element(o),Uo.dot(s.xyz).greaterThan(s.w).discard()}),n<t){const o=Wg("bool","clipped");o.assign(!0),yf({start:n,end:t},({i:a})=>{s=r.element(a),o.assign(Uo.dot(s.xyz).greaterThan(s.w).and(o))}),o.discard()}})()}}zp.ALPHA_TO_COVERAGE="alphaToCoverage";zp.DEFAULT="default";const MLe=()=>Mt(new zp),TLe=()=>Mt(new zp(zp.ALPHA_TO_COVERAGE));class gs extends ol{static get type(){return"NodeMaterial"}constructor(){super(),this.isNodeMaterial=!0,this.type=this.constructor.type,this.forceSinglePass=!1,this.fog=!0,this.lights=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.depthNode=null,this.shadowNode=null,this.shadowPositionNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+Vne(this)}build(e){this.setup(e)}setupObserver(e){return new DBe(e)}setup(e){e.context.setupNormal=()=>this.setupNormal(e),e.addStack(),e.stack.outputNode=this.vertexNode||this.setupPosition(e),e.addFlow("vertex",e.removeStack()),e.addStack();let t;const n=this.setupClipping(e);if(this.depthWrite===!0&&this.setupDepth(e),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const r=this.setupLighting(e);n!==null&&e.stack.add(n);const s=Vn(r,Ii.a).max(0);if(t=this.setupOutput(e,s),yIe.assign(t),this.outputNode!==null&&(t=this.outputNode),e.renderer.getRenderTarget()!==null){const a=e.renderer.getMRT(),l=this.mrtNode;a!==null?(t=a,l!==null&&(t=a.merge(l))):l!==null&&(t=l)}}else{let r=this.fragmentNode;r.isOutputStructNode!==!0&&(r=Vn(r)),t=this.setupOutput(e,r)}e.stack.outputNode=t,e.addFlow("fragment",e.removeStack()),e.monitor=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{globalClippingCount:t,localClippingCount:n}=e.clippingContext;let r=null;if(t||n){const s=e.renderer.samples;this.alphaToCoverage&&s>1?r=TLe():e.stack.add(MLe())}return r}setupDepth(e){const{renderer:t}=e;let n=this.depthNode;if(n===null){const r=t.getMRT();r&&r.has("depth")?n=r.get("depth"):t.logarithmicDepthBuffer===!0&&(n=VN().w.add(1).log2().mul(JNe).mul(.5))}n!==null&&Fie.assign(n).append()}setupPosition(e){const{object:t}=e,n=t.geometry;if(e.addStack(),(n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color)&&fLe(t).append(),t.isSkinnedMesh===!0&&aLe(t).append(),this.displacementMap){const s=np("displacementMap","texture"),o=np("displacementScale","float"),a=np("displacementBias","float");qo.addAssign(_h.normalize().mul(s.x.mul(o).add(a)))}t.isBatchedMesh&&sLe(t).append(),t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&iLe(t).append(),this.positionNode!==null&&qo.assign(this.positionNode);const r=VN();return e.context.vertex=e.removeStack(),e.context.mvp=r,r}setupDiffuseColor({object:e,geometry:t}){let n=this.colorNode?Vn(this.colorNode):MDe;this.vertexColors===!0&&t.hasAttribute("color")&&(n=Vn(n.xyz.mul(Wf("color","vec3")),n.a)),e.instanceColor&&(n=yC("vec3","vInstanceColor").mul(n)),e.isBatchedMesh&&e._colorsTexture&&(n=yC("vec3","vBatchColor").mul(n)),Ii.assign(n);const r=this.opacityNode?st(this.opacityNode):Pie;if(Ii.a.assign(Ii.a.mul(r)),this.alphaTestNode!==null||this.alphaTest>0){const s=this.alphaTestNode!==null?st(this.alphaTestNode):SDe;Ii.a.lessThanEqual(s).discard()}this.transparent===!1&&this.blending===_p&&this.alphaToCoverage===!1&&Ii.a.assign(1)}setupVariants(){}setupOutgoingLight(){return this.lights===!0?rt(0):Ii.rgb}setupNormal(){return this.normalNode?rt(this.normalNode):IDe}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?np("envMap","cubeTexture"):np("envMap","texture")),e}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new vLe(Bie)),t}setupLights(e){const t=[],n=this.setupEnvironment(e);n&&n.isLightingNode&&t.push(n);const r=this.setupLightMap(e);if(r&&r.isLightingNode&&t.push(r),this.aoNode!==null||e.material.aoMap){const o=this.aoNode!==null?this.aoNode:JDe;t.push(new mLe(o))}let s=this.lightsNode||e.lightsNode;return t.length>0&&(s=ALe([...s.getLights(),...t])),s}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:n,backdropAlphaNode:r,emissiveNode:s}=this,a=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let l=this.setupOutgoingLight(e);if(a&&a.getScope().getLights().length>0){const u=this.setupLightingModel(e);l=yLe(a,u,n,r)}else n!==null&&(l=rt(r!==null?nr(l,n,r):n));return(s&&s.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(zV.assign(rt(s||EDe)),l=l.add(zV)),l}setupOutput(e,t){if(this.fog===!0){const n=e.fogNode;n&&(t=Vn(n.mix(t.rgb,n.colorNode),t.a))}return t}setDefaultValues(e){for(const n in e){const r=e[n];this[n]===void 0&&(this[n]=r,r&&r.clone&&(this[n]=r.clone()))}const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const n in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,n)===void 0&&t[n].get!==void 0&&Object.defineProperty(this.constructor.prototype,n,t[n])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const n=ol.prototype.toJSON.call(this,e),r=AC(this);n.inputNodes={};for(const{property:o,childNode:a}of r)n.inputNodes[o]=a.toJSON(e).uuid;function s(o){const a=[];for(const l in o){const u=o[l];delete u.metadata,a.push(u)}return a}if(t){const o=s(e.textures),a=s(e.images),l=s(e.nodes);o.length>0&&(n.textures=o),a.length>0&&(n.images=a),l.length>0&&(n.nodes=l)}return n}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.depthNode=e.depthNode,this.shadowNode=e.shadowNode,this.shadowPositionNode=e.shadowPositionNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const ELe=new mF;class CLe extends gs{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.lights=!1,this.setDefaultValues(ELe),this.setValues(e)}}const RLe=new Gne;class PLe extends gs{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.lights=!1,this.setDefaultValues(RLe),this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode,t=this.dashScaleNode?st(this.dashScaleNode):XDe,n=this.dashSizeNode?st(this.dashSizeNode):YDe,r=this.dashSizeNode?st(this.dashGapNode):QDe;FP.assign(n),GV.assign(r);const s=ed(Wf("lineDistance").mul(t));(e?s.add(e):s).mod(FP.add(GV)).greaterThan(FP).discard()}}const BLe=i=>Mt(i).mul(.5).add(.5),ILe=new kne;class NLe extends gs{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(ILe),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?st(this.opacityNode):Pie;Ii.assign(Vn(BLe(cs),e))}}class DLe extends vs{static get type(){return"EquirectUVNode"}constructor(e=wie){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,t=e.z.atan2(e.x).mul(1/(Math.PI*2)).add(.5),n=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return Yt(t,n)}}const kie=ot(DLe);class Uie extends mBe{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const n=t.minFilter,r=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s=new Pb(5,5,5),o=kie(wie),a=new gs;a.colorNode=Hr(t,o,0),a.side=Jf,a.blending=Iy;const l=new rm(s,a),u=new Rne;u.add(l),t.minFilter===Tf&&(t.minFilter=sl);const c=new Cne(1,10,this),h=e.getMRT();return e.setMRT(null),c.update(e,u),e.setMRT(h),t.minFilter=n,t.currentGenerateMipmaps=r,l.geometry.dispose(),l.material.dispose(),this}}const N_=new WeakMap;class LLe extends vs{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=zx();const t=new pF;t.isRenderTargetTexture=!0,this._defaultTexture=t,this.updateBeforeType=Wn.RENDER}updateBefore(e){const{renderer:t,material:n}=e,r=this.envNode;if(r.isTextureNode||r.isMaterialReferenceNode){const s=r.isTextureNode?r.value:n[r.property];if(s&&s.isTexture){const o=s.mapping;if(o===Mb||o===Tb){if(N_.has(s)){const a=N_.get(s);JV(a,s.mapping),this._cubeTexture=a}else{const a=s.image;if(OLe(a)){const l=new Uie(a.height);l.fromEquirectangularTexture(t,s),JV(l.texture,s.mapping),this._cubeTexture=l.texture,N_.set(s,l.texture),s.addEventListener("dispose",zie)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function OLe(i){return i==null?!1:i.height>0}function zie(i){const e=i.target;e.removeEventListener("dispose",zie);const t=N_.get(e);t!==void 0&&(N_.delete(e),t.dispose())}function JV(i,e){e===Mb?i.mapping=tm:e===Tb&&(i.mapping=Ny)}const Gie=ot(LLe);class kF extends hv{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=Gie(this.envNode)}}class FLe extends hv{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const t=st(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}class r5{start(){}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class Hie extends r5{constructor(){super()}indirect(e,t,n){const r=e.ambientOcclusion,s=e.reflectedLight,o=n.context.irradianceLightMap;s.indirectDiffuse.assign(Vn(0)),o?s.indirectDiffuse.addAssign(o):s.indirectDiffuse.addAssign(Vn(1,1,1,0)),s.indirectDiffuse.mulAssign(r),s.indirectDiffuse.mulAssign(Ii.rgb)}finish(e,t,n){const r=n.material,s=e.outgoingLight,o=n.context.environment;if(o)switch(r.combine){case V4:s.rgb.assign(nr(s.rgb,s.rgb.mul(o.rgb),qM.mul(kP)));break;case QPe:s.rgb.assign(nr(s.rgb,o.rgb,qM.mul(kP)));break;case KPe:s.rgb.addAssign(o.rgb.mul(qM.mul(kP)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",r.combine);break}}}const kLe=new j4;class ULe extends gs{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(kLe),this.setValues(e)}setupNormal(){return Tc}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new kF(t):null}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new FLe(Bie)),t}setupOutgoingLight(){return Ii.rgb}setupLightingModel(){return new Hie}}const qx=$t(({f0:i,f90:e,dotVH:t})=>{const n=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return i.mul(n.oneMinus()).add(e.mul(n))}),Oy=$t(i=>i.diffuseColor.mul(1/Math.PI)),zLe=()=>st(.25),GLe=$t(({dotNH:i})=>UN.mul(st(.5)).add(1).mul(st(1/Math.PI)).mul(i.pow(UN))),HLe=$t(({lightDirection:i})=>{const e=i.add(br).normalize(),t=cs.dot(e).clamp(),n=br.dot(e).clamp(),r=qx({f0:Ml,f90:1,dotVH:n}),s=zLe(),o=GLe({dotNH:t});return r.mul(s).mul(o)});class qie extends Hie{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=cs.dot(e).clamp().mul(t);n.directDiffuse.addAssign(s.mul(Oy({diffuseColor:Ii.rgb}))),this.specular===!0&&n.directSpecular.addAssign(s.mul(HLe({lightDirection:e})).mul(qM))}indirect({ambientOcclusion:e,irradiance:t,reflectedLight:n}){n.indirectDiffuse.addAssign(t.mul(Oy({diffuseColor:Ii}))),n.indirectDiffuse.mulAssign(e)}}const qLe=new Une;class VLe extends gs{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(qLe),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new kF(t):null}setupLightingModel(){return new qie(!1)}}const jLe=new One;class $Le extends gs{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(jLe),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new kF(t):null}setupLightingModel(){return new qie}setupVariants(){const e=(this.shininessNode?st(this.shininessNode):TDe).max(1e-4);UN.assign(e);const t=this.specularNode||CDe;Ml.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const WLe=$t(()=>{const i=Tc.dFdx().abs().max(Tc.dFdy().abs());return i.x.max(i.y).max(i.z)}),Vie=$t(i=>{const{roughness:e}=i,t=WLe();let n=e.max(.0525);return n=n.add(t),n=n.min(1),n}),XLe=$t(({alpha:i,dotNL:e,dotNV:t})=>{const n=i.pow2(),r=e.mul(n.add(n.oneMinus().mul(t.pow2())).sqrt()),s=t.mul(n.add(n.oneMinus().mul(e.pow2())).sqrt());return kp(.5,r.add(s).max(zIe))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),YLe=$t(({alphaT:i,alphaB:e,dotTV:t,dotBV:n,dotTL:r,dotBL:s,dotNV:o,dotNL:a})=>{const l=a.mul(rt(i.mul(t),e.mul(n),o).length()),u=o.mul(rt(i.mul(r),e.mul(s),a).length());return kp(.5,l.add(u)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),QLe=$t(({alpha:i,dotNH:e})=>{const t=i.pow2(),n=e.pow2().mul(t.oneMinus()).oneMinus();return t.div(n.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),KLe=st(1/Math.PI),JLe=$t(({alphaT:i,alphaB:e,dotNH:t,dotTH:n,dotBH:r})=>{const s=i.mul(e),o=rt(e.mul(n),i.mul(r),s.mul(t)),a=o.dot(o),l=s.div(a);return KLe.mul(s.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),ZV=$t(i=>{const{lightDirection:e,f0:t,f90:n,roughness:r,f:s,USE_IRIDESCENCE:o,USE_ANISOTROPY:a}=i,l=i.normalView||cs,u=r.pow2(),c=e.add(br).normalize(),h=l.dot(e).clamp(),f=l.dot(br).clamp(),d=l.dot(c).clamp(),p=br.dot(c).clamp();let v=qx({f0:t,f90:n,dotVH:p}),b,_;if(UV(o)&&(v=EF.mix(v,s)),UV(a)){const M=zM.dot(e),E=zM.dot(br),R=zM.dot(c),L=K1.dot(e),I=K1.dot(br),D=K1.dot(c);b=YLe({alphaT:kN,alphaB:u,dotTV:E,dotBV:I,dotTL:M,dotBL:L,dotNV:f,dotNL:h}),_=JLe({alphaT:kN,alphaB:u,dotNH:d,dotTH:R,dotBH:D})}else b=XLe({alpha:u,dotNL:h,dotNV:f}),_=QLe({alpha:u,dotNH:d});return v.mul(b).mul(_)}),jie=$t(({roughness:i,dotNV:e})=>{const t=Vn(-1,-.0275,-.572,.022),n=Vn(1,.0425,1.04,-.04),r=i.mul(t).add(n),s=r.x.mul(r.x).min(e.mul(-9.28).exp2()).mul(r.x).add(r.y);return Yt(-1.04,1.04).mul(s).add(r.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),$ie=$t(i=>{const{dotNV:e,specularColor:t,specularF90:n,roughness:r}=i,s=jie({dotNV:e,roughness:r});return t.mul(s.x).add(n.mul(s.y))}),ZLe=$t(({f:i,f90:e,dotVH:t})=>{const n=t.oneMinus().saturate(),r=n.mul(n),s=n.mul(r,r).clamp(0,.9999);return i.sub(rt(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),eOe=$t(({roughness:i,dotNH:e})=>{const t=i.pow2(),n=st(1).div(t),s=e.pow2().oneMinus().max(.0078125);return st(2).add(n).mul(s.pow(n.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),tOe=$t(({dotNV:i,dotNL:e})=>st(1).div(st(4).mul(e.add(i).sub(e.mul(i))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),nOe=$t(({lightDirection:i})=>{const e=i.add(br).normalize(),t=cs.dot(i).clamp(),n=cs.dot(br).clamp(),r=cs.dot(e).clamp(),s=eOe({roughness:TF,dotNH:r}),o=tOe({dotNV:n,dotNL:t});return M1.mul(s).mul(o)}),iOe=$t(({N:i,V:e,roughness:t})=>{const s=.0078125,o=i.dot(e).saturate(),a=Yt(t,o.oneMinus().sqrt());return a.assign(a.mul(.984375).add(s)),a}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),rOe=$t(({f:i})=>{const e=i.length();return Mc(e.mul(e).add(i.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),q3=$t(({v1:i,v2:e})=>{const t=i.dot(e),n=t.abs().toVar(),r=n.mul(.0145206).add(.4965155).mul(n).add(.8543985).toVar(),s=n.add(4.1616724).mul(n).add(3.417594).toVar(),o=r.div(s),a=t.greaterThan(0).select(o,Mc(t.mul(t).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(o));return i.cross(e).mul(a)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),ej=$t(({N:i,V:e,P:t,mInv:n,p0:r,p1:s,p2:o,p3:a})=>{const l=s.sub(r).toVar(),u=a.sub(r).toVar(),c=l.cross(u),h=rt().toVar();return Ho(c.dot(t.sub(r)).greaterThanEqual(0),()=>{const f=e.sub(i.mul(e.dot(i))).normalize(),d=i.cross(f).negate(),p=n.mul(al(f,d,i).transpose()).toVar(),v=p.mul(r.sub(t)).normalize().toVar(),b=p.mul(s.sub(t)).normalize().toVar(),_=p.mul(o.sub(t)).normalize().toVar(),M=p.mul(a.sub(t)).normalize().toVar(),E=rt(0).toVar();E.addAssign(q3({v1:v,v2:b})),E.addAssign(q3({v1:b,v2:_})),E.addAssign(q3({v1:_,v2:M})),E.addAssign(q3({v1:M,v2:v})),h.assign(rt(rOe({f:E})))}),h}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),s5=1/6,Wie=i=>Oi(s5,Oi(i,Oi(i,i.negate().add(3)).sub(3)).add(1)),$N=i=>Oi(s5,Oi(i,Oi(i,Oi(3,i).sub(6))).add(4)),Xie=i=>Oi(s5,Oi(i,Oi(i,Oi(-3,i).add(3)).add(3)).add(1)),WN=i=>Oi(s5,K4(i,3)),tj=i=>Wie(i).add($N(i)),nj=i=>Xie(i).add(WN(i)),ij=i=>Wl(-1,$N(i).div(Wie(i).add($N(i)))),rj=i=>Wl(1,WN(i).div(Xie(i).add(WN(i)))),sj=(i,e,t)=>{const n=i.uvNode,r=Oi(n,e.zw).add(.5),s=Q4(r),o=cv(r),a=tj(o.x),l=nj(o.x),u=ij(o.x),c=rj(o.x),h=ij(o.y),f=rj(o.y),d=Yt(s.x.add(u),s.y.add(h)).sub(.5).mul(e.xy),p=Yt(s.x.add(c),s.y.add(h)).sub(.5).mul(e.xy),v=Yt(s.x.add(u),s.y.add(f)).sub(.5).mul(e.xy),b=Yt(s.x.add(c),s.y.add(f)).sub(.5).mul(e.xy),_=tj(o.y).mul(Wl(a.mul(i.uv(d).level(t)),l.mul(i.uv(p).level(t)))),M=nj(o.y).mul(Wl(a.mul(i.uv(v).level(t)),l.mul(i.uv(b).level(t))));return _.add(M)},sOe=$t(([i,e=st(3)])=>{const t=Yt(i.size(zr(e))),n=Yt(i.size(zr(e.add(1)))),r=kp(1,t),s=kp(1,n),o=sj(i,Vn(r,t),Q4(e)),a=sj(i,Vn(s,n),cie(e));return cv(e).mix(o,a)}),oj=$t(([i,e,t,n,r])=>{const s=rt(mie(e.negate(),kx(i),kp(1,n))),o=rt(J1(r[0].xyz),J1(r[1].xyz),J1(r[2].xyz));return kx(s).mul(t.mul(o))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),oOe=$t(([i,e])=>i.mul(Up(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),aOe=_Le(),aj=$t(([i,e,t])=>{const n=aOe.uv(i),r=Y4(st(jN.x)).mul(oOe(e,t));return sOe(n,r)}),lj=$t(([i,e,t])=>(Ho(t.notEqual(0),()=>{const n=uie(e).negate().div(t);return lie(n.negate().mul(i))}),rt(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),lOe=$t(([i,e,t,n,r,s,o,a,l,u,c,h,f,d,p])=>{let v,b;if(p){v=Vn().toVar(),b=rt().toVar();const L=c.sub(1).mul(p.mul(.025)),I=rt(c.sub(L),c,c.add(L));yf({start:0,end:3},({i:D})=>{const k=I.element(D),G=oj(i,e,h,k,a),O=o.add(G),U=u.mul(l.mul(Vn(O,1))),Q=Yt(U.xy.div(U.w)).toVar();Q.addAssign(1),Q.divAssign(2),Q.assign(Yt(Q.x,Q.y.oneMinus()));const X=aj(Q,t,k);v.element(D).assign(X.element(D)),v.a.addAssign(X.a),b.element(D).assign(n.element(D).mul(lj(J1(G),f,d).element(D)))}),v.a.divAssign(3)}else{const L=oj(i,e,h,c,a),I=o.add(L),D=u.mul(l.mul(Vn(I,1))),k=Yt(D.xy.div(D.w)).toVar();k.addAssign(1),k.divAssign(2),k.assign(Yt(k.x,k.y.oneMinus())),v=aj(k,t,c),b=n.mul(lj(J1(L),f,d))}const _=b.rgb.mul(v.rgb),M=i.dot(e).clamp(),E=rt($ie({dotNV:M,specularColor:r,specularF90:s,roughness:t})),R=b.r.add(b.g,b.b).div(3);return Vn(E.oneMinus().mul(_),v.a.oneMinus().mul(R).oneMinus())}),uOe=al(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),cOe=i=>{const e=i.sqrt();return rt(1).add(e).div(rt(1).sub(e))},uj=(i,e)=>i.sub(e).div(i.add(e)).pow2(),hOe=(i,e)=>{const t=i.mul(2*Math.PI*1e-9),n=rt(54856e-17,44201e-17,52481e-17),r=rt(1681e3,1795300,2208400),s=rt(43278e5,93046e5,66121e5),o=st(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let a=n.mul(s.mul(2*Math.PI).sqrt()).mul(r.mul(t).add(e).cos()).mul(t.pow2().negate().mul(s).exp());return a=rt(a.x.add(o),a.y,a.z).div(10685e-11),uOe.mul(a)},fOe=$t(({outsideIOR:i,eta2:e,cosTheta1:t,thinFilmThickness:n,baseF0:r})=>{const s=nr(i,e,sm(0,.03,n)),o=i.div(s).pow2().mul(st(1).sub(t.pow2())),l=st(1).sub(o).sqrt(),u=uj(s,i),c=qx({f0:u,f90:1,dotVH:t}),h=c.oneMinus(),f=s.lessThan(i).select(Math.PI,0),d=st(Math.PI).sub(f),p=cOe(r.clamp(0,.9999)),v=uj(p,s.toVec3()),b=qx({f0:v,f90:1,dotVH:l}),_=rt(p.x.lessThan(s).select(Math.PI,0),p.y.lessThan(s).select(Math.PI,0),p.z.lessThan(s).select(Math.PI,0)),M=s.mul(n,l,2),E=rt(d).add(_),R=c.mul(b).clamp(1e-5,.9999),L=R.sqrt(),I=h.pow2().mul(b).div(rt(1).sub(R));let k=c.add(I),G=I.sub(h);for(let O=1;O<=2;++O){G=G.mul(L);const U=hOe(st(O).mul(M),st(O).mul(E)).mul(2);k=k.add(G.mul(U))}return k.max(rt(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),dOe=$t(({normal:i,viewDir:e,roughness:t})=>{const n=i.dot(e).saturate(),r=t.pow2(),s=$a(t.lessThan(.25),st(-339.2).mul(r).add(st(161.4).mul(t)).sub(25.9),st(-8.48).mul(r).add(st(14.3).mul(t)).sub(9.95)),o=$a(t.lessThan(.25),st(44).mul(r).sub(st(23.7).mul(t)).add(3.26),st(1.97).mul(r).sub(st(3.27).mul(t)).add(.72));return $a(t.lessThan(.25),0,st(.1).mul(t).sub(.025)).add(s.mul(n).add(o).exp()).mul(1/Math.PI).saturate()}),HP=rt(.04),qP=st(1);class Yie extends r5{constructor(e=!1,t=!1,n=!1,r=!1,s=!1,o=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=n,this.anisotropy=r,this.transmission=s,this.dispersion=o,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=rt().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=rt().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=rt().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=rt().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=rt().toVar("sheenSpecularIndirect")),this.iridescence===!0){const t=cs.dot(br).clamp();this.iridescenceFresnel=fOe({outsideIOR:st(1),eta2:eie,cosTheta1:t,thinFilmThickness:tie,baseF0:Ml}),this.iridescenceF0=ZLe({f:this.iridescenceFresnel,f90:1,dotVH:t})}if(this.transmission===!0){const t=qN,n=ZNe.sub(qN).normalize(),r=Mie;e.backdrop=lOe(r,n,df,Ii,Ml,xC,t,om,td,NF,GM,nie,rie,iie,this.dispersion?sie:null),e.backdropAlpha=zN,Ii.a.mulAssign(nr(1,e.backdrop.a,zN))}}computeMultiscattering(e,t,n){const r=cs.dot(br).clamp(),s=jie({roughness:df,dotNV:r}),a=(this.iridescenceF0?EF.mix(Ml,this.iridescenceF0):Ml).mul(s.x).add(n.mul(s.y)),u=s.x.add(s.y).oneMinus(),c=Ml.add(Ml.oneMinus().mul(.047619)),h=a.mul(c).div(u.mul(c).oneMinus());e.addAssign(a),t.addAssign(h.mul(u))}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=cs.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(nOe({lightDirection:e}))),this.clearcoat===!0){const a=K2.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(a.mul(ZV({lightDirection:e,f0:HP,f90:qP,roughness:_C,normalView:K2})))}n.directDiffuse.addAssign(s.mul(Oy({diffuseColor:Ii.rgb}))),n.directSpecular.addAssign(s.mul(ZV({lightDirection:e,f0:Ml,f90:1,roughness:df,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:t,halfWidth:n,halfHeight:r,reflectedLight:s,ltc_1:o,ltc_2:a}){const l=t.add(n).sub(r),u=t.sub(n).sub(r),c=t.sub(n).add(r),h=t.add(n).add(r),f=cs,d=br,p=Uo.toVar(),v=iOe({N:f,V:d,roughness:df}),b=o.uv(v).toVar(),_=a.uv(v).toVar(),M=al(rt(b.x,0,b.y),rt(0,1,0),rt(b.z,0,b.w)).toVar(),E=Ml.mul(_.x).add(Ml.oneMinus().mul(_.y)).toVar();s.directSpecular.addAssign(e.mul(E).mul(ej({N:f,V:d,P:p,mInv:M,p0:l,p1:u,p2:c,p3:h}))),s.directDiffuse.addAssign(e.mul(Ii).mul(ej({N:f,V:d,P:p,mInv:al(1,0,0,0,1,0,0,0,1),p0:l,p1:u,p2:c,p3:h})))}indirect(e,t,n){this.indirectDiffuse(e,t,n),this.indirectSpecular(e,t,n),this.ambientOcclusion(e,t,n)}indirectDiffuse({irradiance:e,reflectedLight:t}){t.indirectDiffuse.addAssign(e.mul(Oy({diffuseColor:Ii})))}indirectSpecular({radiance:e,iblIrradiance:t,reflectedLight:n}){if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(t.mul(M1,dOe({normal:cs,viewDir:br,roughness:TF}))),this.clearcoat===!0){const u=K2.dot(br).clamp(),c=$ie({dotNV:u,specularColor:HP,specularF90:qP,roughness:_C});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(c))}const r=rt().toVar("singleScattering"),s=rt().toVar("multiScattering"),o=t.mul(1/Math.PI);this.computeMultiscattering(r,s,xC);const a=r.add(s),l=Ii.mul(a.r.max(a.g).max(a.b).oneMinus());n.indirectSpecular.addAssign(e.mul(r)),n.indirectSpecular.addAssign(s.mul(o)),n.indirectDiffuse.addAssign(l.mul(o))}ambientOcclusion({ambientOcclusion:e,reflectedLight:t}){const r=cs.dot(br).clamp().add(e),s=df.mul(-16).oneMinus().negate().exp2(),o=e.sub(r.pow(s).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(e),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(e),t.indirectDiffuse.mulAssign(e),t.indirectSpecular.mulAssign(o)}finish(e){const{outgoingLight:t}=e;if(this.clearcoat===!0){const n=K2.dot(br).clamp(),r=qx({dotVH:n,f0:HP,f90:qP}),s=t.mul(FN.mul(r).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(FN));t.assign(s)}if(this.sheen===!0){const n=M1.r.max(M1.g).max(M1.b).mul(.157).oneMinus(),r=t.mul(n).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(r)}}}const cj=st(1),XN=st(-2),V3=st(.8),VP=st(-1),j3=st(.4),jP=st(2),$3=st(.305),$P=st(3),hj=st(.21),pOe=st(4),fj=st(4),AOe=st(16),mOe=$t(([i])=>{const e=rt(Wc(i)).toVar(),t=st(-1).toVar();return Ho(e.x.greaterThan(e.z),()=>{Ho(e.x.greaterThan(e.y),()=>{t.assign($a(i.x.greaterThan(0),0,3))}).Else(()=>{t.assign($a(i.y.greaterThan(0),1,4))})}).Else(()=>{Ho(e.z.greaterThan(e.y),()=>{t.assign($a(i.z.greaterThan(0),2,5))}).Else(()=>{t.assign($a(i.y.greaterThan(0),1,4))})}),t}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),gOe=$t(([i,e])=>{const t=Yt().toVar();return Ho(e.equal(0),()=>{t.assign(Yt(i.z,i.y).div(Wc(i.x)))}).ElseIf(e.equal(1),()=>{t.assign(Yt(i.x.negate(),i.z.negate()).div(Wc(i.y)))}).ElseIf(e.equal(2),()=>{t.assign(Yt(i.x.negate(),i.y).div(Wc(i.z)))}).ElseIf(e.equal(3),()=>{t.assign(Yt(i.z.negate(),i.y).div(Wc(i.x)))}).ElseIf(e.equal(4),()=>{t.assign(Yt(i.x.negate(),i.z).div(Wc(i.y)))}).Else(()=>{t.assign(Yt(i.x,i.y).div(Wc(i.z)))}),Oi(.5,t.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),yOe=$t(([i])=>{const e=st(0).toVar();return Ho(i.greaterThanEqual(V3),()=>{e.assign(cj.sub(i).mul(VP.sub(XN)).div(cj.sub(V3)).add(XN))}).ElseIf(i.greaterThanEqual(j3),()=>{e.assign(V3.sub(i).mul(jP.sub(VP)).div(V3.sub(j3)).add(VP))}).ElseIf(i.greaterThanEqual($3),()=>{e.assign(j3.sub(i).mul($P.sub(jP)).div(j3.sub($3)).add(jP))}).ElseIf(i.greaterThanEqual(hj),()=>{e.assign($3.sub(i).mul(pOe.sub($P)).div($3.sub(hj)).add($P))}).Else(()=>{e.assign(st(-2).mul(Y4(Oi(1.16,i))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),vOe=$t(([i,e])=>{const t=i.toVar();t.assign(Oi(2,t).sub(1));const n=rt(t,1).toVar();return Ho(e.equal(0),()=>{n.assign(n.zyx)}).ElseIf(e.equal(1),()=>{n.assign(n.xzy),n.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{n.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{n.assign(n.zyx),n.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{n.assign(n.xzy),n.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{n.z.mulAssign(-1)}),n}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),_Oe=$t(([i,e,t,n,r,s])=>{const o=st(t),a=rt(e),l=Up(yOe(o),XN,s),u=cv(l),c=Q4(l),h=rt(YN(i,a,c,n,r,s)).toVar();return Ho(u.notEqual(0),()=>{const f=rt(YN(i,a,c.add(1),n,r,s)).toVar();h.assign(nr(h,f,u))}),h}),YN=$t(([i,e,t,n,r,s])=>{const o=st(t).toVar(),a=rt(e),l=st(mOe(a)).toVar(),u=st(Mc(fj.sub(o),0)).toVar();o.assign(Mc(o,fj));const c=st(GN(o)).toVar(),h=Yt(gOe(a,l).mul(c.sub(2)).add(1)).toVar();return Ho(l.greaterThan(2),()=>{h.y.addAssign(c),l.subAssign(3)}),h.x.addAssign(l.mul(c)),h.x.addAssign(u.mul(Oi(3,AOe))),h.y.addAssign(Oi(4,GN(s).sub(c))),h.x.mulAssign(n),h.y.mulAssign(r),i.uv(h).grad(Yt(),Yt())}),WP=$t(({envMap:i,mipInt:e,outputDirection:t,theta:n,axis:r,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:o,CUBEUV_MAX_MIP:a})=>{const l=Qd(n),u=t.mul(l).add(r.cross(t).mul(lf(n))).add(r.mul(r.dot(t).mul(l.oneMinus())));return YN(i,u,e,s,o,a)}),xOe=$t(({n:i,latitudinal:e,poleAxis:t,outputDirection:n,weights:r,samples:s,dTheta:o,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h})=>{const f=rt($a(e,t,pie(t,n))).toVar();Ho(aie(f.equals(rt(0))),()=>{f.assign(rt(n.z,0,n.x.negate()))}),f.assign(kx(f));const d=rt().toVar();return d.addAssign(r.element(zr(0)).mul(WP({theta:0,axis:f,outputDirection:n,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h}))),yf({start:zr(1),end:i},({i:p})=>{Ho(p.greaterThanEqual(s),()=>{uLe()});const v=st(o.mul(st(p))).toVar();d.addAssign(r.element(p).mul(WP({theta:v.mul(-1),axis:f,outputDirection:n,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h}))),d.addAssign(r.element(p).mul(WP({theta:v,axis:f,outputDirection:n,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h})))}),Vn(d,1)});let wC=null;const dj=new WeakMap;function bOe(i){const e=Math.log2(i)-2,t=1/i;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:t,maxMip:e}}function wOe(i){let e=dj.get(i);if((e!==void 0?e.pmremVersion:-1)!==i.pmremVersion){const n=i.image;if(i.isCubeTexture)if(MOe(n))e=wC.fromCubemap(i,e);else return null;else if(TOe(n))e=wC.fromEquirectangular(i,e);else return null;e.pmremVersion=i.pmremVersion,dj.set(i,e)}return e.texture}class SOe extends vs{static get type(){return"PMREMNode"}constructor(e,t=null,n=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=n,this._generator=null;const r=new ba;r.isRenderTargetTexture=!0,this._texture=Hr(r),this._width=jn(0),this._height=jn(0),this._maxMip=jn(0),this.updateBeforeType=Wn.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=bOe(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(){let e=this._pmrem;const t=e?e.pmremVersion:-1,n=this._value;t!==n.pmremVersion&&(n.isPMREMTexture===!0?e=n:e=wOe(n),e!==null&&(this._pmrem=e,this.updateFromTexture(e)))}setup(e){wC===null&&(wC=e.createPMREMGenerator()),this.updateBefore(e);let t=this.uvNode;t===null&&e.context.getUV&&(t=e.context.getUV(this));const n=this.value;e.renderer.coordinateSystem===mc&&n.isPMREMTexture!==!0&&n.isRenderTargetTexture===!0&&(t=rt(t.x.negate(),t.yz));let r=this.levelNode;return r===null&&e.context.getTextureLevel&&(r=e.context.getTextureLevel(this)),_Oe(this._texture,t,r,this._width,this._height,this._maxMip)}}function MOe(i){if(i==null)return!1;let e=0;const t=6;for(let n=0;n<t;n++)i[n]!==void 0&&e++;return e===t}function TOe(i){return i==null?!1:i.height>0}const Qie=ot(SOe),pj=new WeakMap;class EOe extends hv{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:t}=e;let n=this.envNode;if(n.isTextureNode||n.isMaterialReferenceNode){const d=n.isTextureNode?n.value:t[n.property];let p=pj.get(d);p===void 0&&(p=Qie(d),pj.set(d,p)),n=p}const s=t.envMap?wr("envMapIntensity","float",e.material):wr("environmentIntensity","float",e.scene),a=t.useAnisotropy===!0||t.anisotropy>0?gDe:cs,l=n.context(Aj(df,a)).mul(s),u=n.context(COe(Mie)).mul(Math.PI).mul(s),c=HM(l),h=HM(u);e.context.radiance.addAssign(c),e.context.iblIrradiance.addAssign(h);const f=e.context.lightingModel.clearcoatRadiance;if(f){const d=n.context(Aj(_C,K2)).mul(s),p=HM(d);f.addAssign(p)}}}const Aj=(i,e)=>{let t=null;return{getUV:()=>(t===null&&(t=br.negate().reflect(e),t=i.mul(i).mix(t,e).normalize(),t=t.transformDirection(td)),t),getTextureLevel:()=>i}},COe=i=>({getUV:()=>i,getTextureLevel:()=>st(1)}),ROe=new yF;class Kie extends gs{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(ROe),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t===null&&e.environmentNode&&(t=e.environmentNode),t?new EOe(t):null}setupLightingModel(){return new Yie}setupSpecular(){const e=nr(rt(.04),Ii.rgb,vC);Ml.assign(e),xC.assign(1)}setupVariants(){const e=this.metalnessNode?st(this.metalnessNode):BDe;vC.assign(e);let t=this.roughnessNode?st(this.roughnessNode):PDe;t=Vie({roughness:t}),df.assign(t),this.setupSpecular(),Ii.assign(Vn(Ii.rgb.mul(e.oneMinus()),Ii.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const POe=new Lne;class BOe extends Kie{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(POe),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?st(this.iorNode):jDe;GM.assign(e),Ml.assign(nr(bC(Aie(GM.sub(1).div(GM.add(1))).mul(RDe),rt(1)).mul(YV),Ii.rgb,vC)),xC.assign(nr(YV,1,vC))}setupLightingModel(){return new Yie(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const t=this.clearcoatNode?st(this.clearcoatNode):NDe,n=this.clearcoatRoughnessNode?st(this.clearcoatRoughnessNode):DDe;FN.assign(t),_C.assign(Vie({roughness:n}))}if(this.useSheen){const t=this.sheenNode?rt(this.sheenNode):FDe,n=this.sheenRoughnessNode?st(this.sheenRoughnessNode):kDe;M1.assign(t),TF.assign(n)}if(this.useIridescence){const t=this.iridescenceNode?st(this.iridescenceNode):zDe,n=this.iridescenceIORNode?st(this.iridescenceIORNode):GDe,r=this.iridescenceThicknessNode?st(this.iridescenceThicknessNode):HDe;EF.assign(t),eie.assign(n),tie.assign(r)}if(this.useAnisotropy){const t=(this.anisotropyNode?Yt(this.anisotropyNode):UDe).toVar();JA.assign(t.length()),Ho(JA.equal(0),()=>{t.assign(Yt(1,0))}).Else(()=>{t.divAssign(Yt(JA)),JA.assign(JA.saturate())}),kN.assign(JA.pow2().mix(df.pow2(),1)),zM.assign(J2[0].mul(t.x).add(J2[1].mul(t.y))),K1.assign(J2[1].mul(t.x).sub(J2[0].mul(t.y)))}if(this.useTransmission){const t=this.transmissionNode?st(this.transmissionNode):qDe,n=this.thicknessNode?st(this.thicknessNode):VDe,r=this.attenuationDistanceNode?st(this.attenuationDistanceNode):$De,s=this.attenuationColorNode?rt(this.attenuationColorNode):WDe;if(zN.assign(t),nie.assign(n),iie.assign(r),rie.assign(s),this.useDispersion){const o=this.dispersionNode?st(this.dispersionNode):KDe;sie.assign(o)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?rt(this.clearcoatNormalNode):LDe}setup(e){e.context.setupClearcoatNormal=()=>this.setupClearcoatNormal(e),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const IOe=$t(({normal:i,lightDirection:e,builder:t})=>{const n=i.dot(e),r=Yt(n.mul(.5).add(.5),0);if(t.material.gradientMap){const s=np("gradientMap","texture").context({getUV:()=>r});return rt(s.r)}else{const s=r.fwidth().mul(.5);return nr(rt(.7),rt(1),sm(st(.7).sub(s.x),st(.7).add(s.x),r.x))}});class NOe extends r5{direct({lightDirection:e,lightColor:t,reflectedLight:n},r,s){const o=IOe({normal:Sie,lightDirection:e,builder:s}).mul(t);n.directDiffuse.addAssign(o.mul(Oy({diffuseColor:Ii.rgb})))}indirect({ambientOcclusion:e,irradiance:t,reflectedLight:n}){n.indirectDiffuse.addAssign(t.mul(Oy({diffuseColor:Ii}))),n.indirectDiffuse.mulAssign(e)}}const DOe=new Fne;class LOe extends gs{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(DOe),this.setValues(e)}setupLightingModel(){return new NOe}}class OOe extends vs{static get type(){return"MatcapUVNode"}constructor(){super("vec2")}setup(){const e=rt(br.z,0,br.x.negate()).normalize(),t=br.cross(e);return Yt(e.dot(cs),t.dot(cs)).mul(.495).add(.5)}}const FOe=Pt(OOe),kOe=new zne;class UOe extends gs{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(kOe),this.setValues(e)}setupVariants(e){const t=FOe;let n;e.material.matcap?n=np("matcap","texture").context({getUV:()=>t}):n=rt(nr(.2,.8,t.y)),Ii.rgb.mulAssign(n.rgb)}}const zOe=new Nne;class GOe extends gs{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.isPointsNodeMaterial=!0,this.lights=!1,this.transparent=!0,this.sizeNode=null,this.setDefaultValues(zOe),this.setValues(e)}copy(e){return this.sizeNode=e.sizeNode,super.copy(e)}}class HOe extends vs{static get type(){return"RotateNode"}constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:n}=this;if(this.getNodeType(e)==="vec2"){const s=t.cos(),o=t.sin();return MF(s,o,o.negate(),s).mul(n)}else{const s=t,o=Q1(Vn(1,0,0,0),Vn(0,Qd(s.x),lf(s.x).negate(),0),Vn(0,lf(s.x),Qd(s.x),0),Vn(0,0,0,1)),a=Q1(Vn(Qd(s.y),0,lf(s.y),0),Vn(0,1,0,0),Vn(lf(s.y).negate(),0,Qd(s.y),0),Vn(0,0,0,1)),l=Q1(Vn(Qd(s.z),lf(s.z).negate(),0,0),Vn(lf(s.z),Qd(s.z),0,0),Vn(0,0,1,0),Vn(0,0,0,1));return o.mul(a).mul(l).mul(Vn(n,1)).xyz}}}const qOe=ot(HOe),VOe=new Bne;class jOe extends gs{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this.lights=!1,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues(VOe),this.setValues(e)}setupPosition({object:e,camera:t,context:n}){const r=this.sizeAttenuation,{positionNode:s,rotationNode:o,scaleNode:a}=this,l=qo;let u=e5.mul(rt(s||0)),c=Yt(om[0].xyz.length(),om[1].xyz.length());a!==null&&(c=c.mul(a)),!r&&t.isPerspectiveCamera&&(c=c.mul(u.z.negate()));let h=l.xy;if(e.center&&e.center.isVector2===!0){const v=RNe("center","vec2");h=h.sub(v.sub(.5))}h=h.mul(c);const f=st(o||ODe),d=qOe(h,f);u=Vn(u.xy.add(d),u.zw);const p=NF.mul(u);return n.vertex=l,p}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}class $Oe extends r5{constructor(){super(),this.shadowNode=st(1).toVar("shadowMask")}direct({shadowMask:e}){this.shadowNode.mulAssign(e)}finish(e){Ii.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(Ii.rgb)}}const WOe=new Dne;class XOe extends gs{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.setDefaultValues(WOe),this.setValues(e)}setupLightingModel(){return new $Oe}}$t(({texture:i,uv:e})=>{const n=rt().toVar();return Ho(e.x.lessThan(1e-4),()=>{n.assign(rt(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{n.assign(rt(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{n.assign(rt(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{n.assign(rt(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{n.assign(rt(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{n.assign(rt(0,0,-1))}).Else(()=>{const s=i.uv(e.add(rt(-.01,0,0))).r.sub(i.uv(e.add(rt(.01,0,0))).r),o=i.uv(e.add(rt(0,-.01,0))).r.sub(i.uv(e.add(rt(0,.01,0))).r),a=i.uv(e.add(rt(0,0,-.01))).r.sub(i.uv(e.add(rt(0,0,.01))).r);n.assign(rt(s,o,a))}),n.normalize()});class YOe{constructor(e,t){this.nodes=e,this.info=t,this.animationLoop=null,this.requestId=null,this._init()}_init(){const e=(t,n)=>{this.requestId=self.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this.animationLoop!==null&&this.animationLoop(t,n)};e()}dispose(){self.cancelAnimationFrame(this.requestId),this.requestId=null}setAnimationLoop(e){this.animationLoop=e}}class Xf{constructor(){this.weakMap=new WeakMap}get(e){let t=this.weakMap;for(let n=0;n<e.length;n++)if(t=t.get(e[n]),t===void 0)return;return t.get(e[e.length-1])}set(e,t){let n=this.weakMap;for(let r=0;r<e.length;r++){const s=e[r];n.has(s)===!1&&n.set(s,new WeakMap),n=n.get(s)}return n.set(e[e.length-1],t)}delete(e){let t=this.weakMap;for(let n=0;n<e.length;n++)if(t=t.get(e[n]),t===void 0)return!1;return t.delete(e[e.length-1])}}const XP=new Yd;class QN{constructor(){this.version=0,this.globalClippingCount=0,this.localClippingCount=0,this.localClippingEnabled=!1,this.localClipIntersection=!1,this.planes=[],this.parentVersion=0,this.viewNormalMatrix=new Zl,this.cacheKey=0}projectPlanes(e,t){const n=e.length,r=this.planes;for(let s=0;s<n;s++){XP.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const o=r[t+s],a=XP.normal;o.x=-a.x,o.y=-a.y,o.z=-a.z,o.w=XP.constant}}updateGlobal(e,t){const n=e.clippingPlanes;this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix);let r=!1;if(Array.isArray(n)&&n.length!==0){const s=n.length;if(s!==this.globalClippingCount){const o=[];for(let a=0;a<s;a++)o.push(new Ni);this.globalClippingCount=s,this.planes=o,r=!0}this.projectPlanes(n,0)}else this.globalClippingCount!==0&&(this.globalClippingCount=0,this.planes=[],r=!0);e.localClippingEnabled!==this.localClippingEnabled&&(this.localClippingEnabled=e.localClippingEnabled,r=!0),r&&(this.version++,this.cacheKey=pC(this.globalClippingCount,this.localClippingEnabled===!0?1:0))}update(e,t){let n=!1;if(this!==e&&e.version!==this.parentVersion&&(this.globalClippingCount=t.isShadowNodeMaterial?0:e.globalClippingCount,this.localClippingEnabled=e.localClippingEnabled,this.planes=Array.from(e.planes),this.parentVersion=e.version,this.viewMatrix=e.viewMatrix,this.viewNormalMatrix=e.viewNormalMatrix,n=!0),this.localClippingEnabled){const r=t.clippingPlanes;if(Array.isArray(r)&&r.length!==0){const s=r.length,o=this.planes,a=this.globalClippingCount;if(n||s!==this.localClippingCount){o.length=a+s;for(let l=0;l<s;l++)o[a+l]=new Ni;this.localClippingCount=s,n=!0}this.projectPlanes(r,a)}else this.localClippingCount!==0&&(this.localClippingCount=0,n=!0);this.localClipIntersection!==t.clipIntersection&&(this.localClipIntersection=t.clipIntersection,n=!0)}n&&(this.version+=e.version,this.cacheKey=pC(e.cacheKey,this.localClippingCount,this.localClipIntersection===!0?1:0))}}let QOe=0;function KOe(i){const e=Object.keys(i);let t=Object.getPrototypeOf(i);for(;t;){const n=Object.getOwnPropertyDescriptors(t);for(const r in n)if(n[r]!==void 0){const s=n[r];s&&typeof s.get=="function"&&e.push(r)}t=Object.getPrototypeOf(t)}return e}class JOe{constructor(e,t,n,r,s,o,a,l,u){this._nodes=e,this._geometries=t,this.id=QOe++,this.renderer=n,this.object=r,this.material=s,this.scene=o,this.camera=a,this.lightsNode=l,this.context=u,this.geometry=r.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.pipeline=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.updateClipping(u.clippingContext),this.clippingContextVersion=this.clippingContext.version,this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}updateClipping(e){const t=this.material;let n=this.clippingContext;Array.isArray(t.clippingPlanes)?((n===e||!n)&&(n=new QN,this.clippingContext=n),n.update(e,t)):this.clippingContext!==e&&(this.clippingContext=e)}get clippingNeedsUpdate(){return this.clippingContext.version===this.clippingContextVersion?!1:(this.clippingContextVersion=this.clippingContext.version,!0)}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().monitor)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getIndex(){return this._geometries.getIndex(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,n=[],r=new Set;for(const s of e){const o=s.node&&s.node.attribute?s.node.attribute:t.getAttribute(s.name);if(o===void 0)continue;n.push(o);const a=o.isInterleavedBufferAttribute?o.data:o;r.add(a)}return this.attributes=n,this.vertexBuffers=Array.from(r.values()),n}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:t,geometry:n,group:r,drawRange:s}=this,o=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),a=this.getIndex(),l=a!==null,u=n.isInstancedBufferGeometry?n.instanceCount:e.count>1?e.count:1;if(u===0)return null;if(o.instanceCount=u,e.isBatchedMesh===!0)return o;let c=1;t.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(c=2);let h=s.start*c,f=(s.start+s.count)*c;r!==null&&(h=Math.max(h,r.start*c),f=Math.min(f,(r.start+r.count)*c));const d=l===!0?a.count:n.attributes.position.count;h=Math.max(h,0),f=Math.min(f,d);const p=f-h;return p<0||p===1/0?null:(o.vertexCount=p,o.firstVertex=h,o)}getGeometryCacheKey(){const{geometry:e}=this;let t="";for(const n of Object.keys(e.attributes).sort()){const r=e.attributes[n];t+=n+",",r.data&&(t+=r.data.stride+","),r.offset&&(t+=r.offset+","),r.itemSize&&(t+=r.itemSize+","),r.normalized&&(t+="n,")}return e.index&&(t+="index,"),t}getMaterialCacheKey(){const{object:e,material:t}=this;let n=t.customProgramCacheKey();for(const r of KOe(t)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(r))continue;const s=t[r];let o;if(s!==null){const a=typeof s;a==="number"?o=s!==0?"1":"0":a==="object"?(o="{",s.isTexture&&(o+=s.mapping),o+="}"):o=String(s)}else o=String(s);n+=o+","}return n+=this.clippingContext.cacheKey+",",e.geometry&&(n+=this.getGeometryCacheKey()),e.skeleton&&(n+=e.skeleton.bones.length+","),e.morphTargetInfluences&&(n+=e.morphTargetInfluences.length+","),e.isBatchedMesh&&(n+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(n+=e._colorsTexture.uuid+",")),e.count>1&&(n+=e.uuid+","),LBe(n)}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=this._nodes.getCacheKey(this.scene,this.lightsNode);return this.object.receiveShadow&&(e+=1),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}const Fg=[];class ZOe{constructor(e,t,n,r,s,o){this.renderer=e,this.nodes=t,this.geometries=n,this.pipelines=r,this.bindings=s,this.info=o,this.chainMaps={}}get(e,t,n,r,s,o,a){const l=this.getChainMap(a);Fg[0]=e,Fg[1]=t,Fg[2]=o,Fg[3]=s;let u=l.get(Fg);return u===void 0?(u=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,n,r,s,o,a),l.set(Fg,u)):(u.updateClipping(o.clippingContext),(u.version!==t.version||u.needsUpdate)&&(u.initialCacheKey!==u.getCacheKey()?(u.dispose(),u=this.get(e,t,n,r,s,o,a)):u.version=t.version)),u}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new Xf)}dispose(){this.chainMaps={}}createRenderObject(e,t,n,r,s,o,a,l,u,c){const h=this.getChainMap(c),f=new JOe(e,t,n,r,s,o,a,l,u);return f.onDispose=()=>{this.pipelines.delete(f),this.bindings.delete(f),this.nodes.delete(f),h.delete(f.getChainArray())},f}}class Zp{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const D0={VERTEX:1,INDEX:2,STORAGE:4},ip=16,eFe=211,tFe=212;class nFe extends Zp{constructor(e){super(),this.backend=e}delete(e){const t=super.delete(e);return t!==void 0&&this.backend.destroyAttribute(e),t}update(e,t){const n=this.get(e);if(n.version===void 0)t===D0.VERTEX?this.backend.createAttribute(e):t===D0.INDEX?this.backend.createIndexAttribute(e):t===D0.STORAGE&&this.backend.createStorageAttribute(e),n.version=this._getBufferAttribute(e).version;else{const r=this._getBufferAttribute(e);(n.version<r.version||r.usage===w1)&&(this.backend.updateAttribute(e),n.version=r.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function iFe(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function Jie(i){return i.index!==null?i.index.version:i.attributes.position.version}function mj(i){const e=[],t=i.index,n=i.attributes.position;if(t!==null){const s=t.array;for(let o=0,a=s.length;o<a;o+=3){const l=s[o+0],u=s[o+1],c=s[o+2];e.push(l,u,u,c,c,l)}}else{const s=n.array;for(let o=0,a=s.length/3-1;o<a;o+=3){const l=o+0,u=o+1,c=o+2;e.push(l,u,u,c,c,l)}}const r=new(iFe(e)?Sne:wne)(e,1);return r.version=Jie(i),r}class rFe extends Zp{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,n=this.get(t);n.initialized=!0,this.info.memory.geometries++;const r=()=>{this.info.memory.geometries--;const s=t.index,o=e.getAttributes();s!==null&&this.attributes.delete(s);for(const l of o)this.attributes.delete(l);const a=this.wireframes.get(t);a!==void 0&&this.attributes.delete(a),t.removeEventListener("dispose",r)};t.addEventListener("dispose",r)}updateAttributes(e){const t=e.getAttributes();for(const r of t)r.isStorageBufferAttribute||r.isStorageInstancedBufferAttribute?this.updateAttribute(r,D0.STORAGE):this.updateAttribute(r,D0.VERTEX);const n=this.getIndex(e);n!==null&&this.updateAttribute(n,D0.INDEX)}updateAttribute(e,t){const n=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,t),this.attributeCall.set(e,n)):this.attributeCall.get(e.data)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e.data,n),this.attributeCall.set(e,n)):this.attributeCall.get(e)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e,n))}getIndex(e){const{geometry:t,material:n}=e;let r=t.index;if(n.wireframe===!0){const s=this.wireframes;let o=s.get(t);o===void 0?(o=mj(t),s.set(t,o)):o.version!==Jie(t)&&(this.attributes.delete(o),o=mj(t),s.set(t,o)),r=o}return r}}class sFe{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.compute={calls:0,frameCalls:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.memory={geometries:0,textures:0}}update(e,t,n){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=n*(t/3):e.isPoints?this.render.points+=n*t:e.isLineSegments?this.render.lines+=n*(t/2):e.isLine?this.render.lines+=n*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}updateTimestamp(e,t){this[e].timestampCalls===0&&(this[e].timestamp=0),this[e].timestamp+=t,this[e].timestampCalls++,this[e].timestampCalls>=this[e].previousFrameCalls&&(this[e].timestampCalls=0)}reset(){const e=this.render.frameCalls;this.render.previousFrameCalls=e;const t=this.compute.frameCalls;this.compute.previousFrameCalls=t,this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class Zie{constructor(e){this.cacheKey=e,this.usedTimes=0}}class oFe extends Zie{constructor(e,t,n){super(e),this.vertexProgram=t,this.fragmentProgram=n}}class aFe extends Zie{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}let lFe=0;class YP{constructor(e,t,n=null,r=null){this.id=lFe++,this.code=e,this.stage=t,this.transforms=n,this.attributes=r,this.usedTimes=0}}class uFe extends Zp{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:n}=this,r=this.get(e);if(this._needsComputeUpdate(e)){const s=r.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const o=this.nodes.getForCompute(e);let a=this.programs.compute.get(o.computeShader);a===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),a=new YP(o.computeShader,"compute",o.transforms,o.nodeAttributes),this.programs.compute.set(o.computeShader,a),n.createProgram(a));const l=this._getComputeCacheKey(e,a);let u=this.caches.get(l);u===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),u=this._getComputePipeline(e,a,l,t)),u.usedTimes++,a.usedTimes++,r.version=e.version,r.pipeline=u}return r.pipeline}getForRender(e,t=null){const{backend:n}=this,r=this.get(e);if(this._needsRenderUpdate(e)){const s=r.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const o=e.getNodeBuilderState();let a=this.programs.vertex.get(o.vertexShader);a===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),a=new YP(o.vertexShader,"vertex"),this.programs.vertex.set(o.vertexShader,a),n.createProgram(a));let l=this.programs.fragment.get(o.fragmentShader);l===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),l=new YP(o.fragmentShader,"fragment"),this.programs.fragment.set(o.fragmentShader,l),n.createProgram(l));const u=this._getRenderCacheKey(e,a,l);let c=this.caches.get(u);c===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),c=this._getRenderPipeline(e,a,l,u,t)):e.pipeline=c,c.usedTimes++,a.usedTimes++,l.usedTimes++,r.pipeline=c}return r.pipeline}delete(e){const t=this.get(e).pipeline;return t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,n,r){n=n||this._getComputeCacheKey(e,t);let s=this.caches.get(n);return s===void 0&&(s=new aFe(n,t),this.caches.set(n,s),this.backend.createComputePipeline(s,r)),s}_getRenderPipeline(e,t,n,r,s){r=r||this._getRenderCacheKey(e,t,n);let o=this.caches.get(r);return o===void 0&&(o=new oFe(r,t,n),this.caches.set(r,o),e.pipeline=o,this.backend.createRenderPipeline(e,s)),o}_getComputeCacheKey(e,t){return e.id+","+t.id}_getRenderCacheKey(e,t,n){return t.id+","+n.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,n=e.stage;this.programs[n].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class cFe extends Zp{constructor(e,t,n,r,s,o){super(),this.backend=e,this.textures=n,this.pipelines=s,this.attributes=r,this.nodes=t,this.info=o,this.pipelines.bindings=this}getForRender(e){const t=e.getBindings();for(const n of t){const r=this.get(n);r.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t),r.bindGroup=n)}return t}getForCompute(e){const t=this.nodes.getForCompute(e).bindings;for(const n of t){const r=this.get(n);r.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t),r.bindGroup=n)}return t}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const t of e)this._update(t,e)}_init(e){for(const t of e.bindings)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isStorageBuffer){const n=t.attribute;this.attributes.update(n,D0.STORAGE)}}_update(e,t){const{backend:n}=this;let r=!1;for(const s of e.bindings)if(!(s.isNodeUniformsGroup&&!this.nodes.updateGroup(s))){if(s.isUniformBuffer)s.update()&&n.updateBinding(s);else if(s.isSampler)s.update();else if(s.isSampledTexture){s.needsBindingsUpdate(this.textures.get(s.texture).generation)&&(r=!0);const o=s.update(),a=s.texture;o&&this.textures.updateTexture(a);const l=n.get(a);if(n.isWebGPUBackend===!0&&l.texture===void 0&&l.externalTexture===void 0&&(console.error("Bindings._update: binding should be available:",s,o,a,s.textureNode.value,r),this.textures.updateTexture(a),r=!0),a.isStorageTexture===!0){const u=this.get(a);s.store===!0?u.needsMipmap=!0:a.generateMipmaps===!0&&this.textures.needsMipmaps(a)&&u.needsMipmap===!0&&(this.backend.generateMipmaps(a),u.needsMipmap=!1)}}}r===!0&&this.backend.updateBindings(e,t)}}class gj{constructor(e,t,n=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=n}}class hFe{constructor(e,t,n){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=n.getSelf()}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class ere{constructor(e,t){this.isNodeVar=!0,this.name=e,this.type=t}}class fFe extends ere{constructor(e,t){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0}}class dFe{constructor(e,t,n=""){this.name=e,this.type=t,this.code=n,Object.defineProperty(this,"isNodeCode",{value:!0})}}let pFe=0;class QP{constructor(e=null){this.id=pFe++,this.nodesData=new WeakMap,this.parent=e}getData(e){let t=this.nodesData.get(e);return t===void 0&&this.parent!==null&&(t=this.parent.getData(e)),t}setData(e,t){this.nodesData.set(e,t)}}class AFe extends Li{static get type(){return"ParameterNode"}constructor(e,t=null){super(e,t),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}class Io extends Gn{static get type(){return"CodeNode"}constructor(e="",t=[],n=""){super("code"),this.isCodeNode=!0,this.code=e,this.language=n,this.includes=t}isGlobal(){return!0}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const r of t)r.build(e);const n=e.getCodeFromNode(this,this.getNodeType(e));return n.code=this.code,n.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}class mFe extends Io{static get type(){return"FunctionNode"}constructor(e="",t=[],n=""){super(e,t,n)}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let n=t.nodeFunction;return n===void 0&&(n=e.parser.parseFunction(this.code),t.nodeFunction=n),n}generate(e,t){super.generate(e);const n=this.getNodeFunction(e),r=n.name,s=n.type,o=e.getCodeFromNode(this,s);r!==""&&(o.name=r);const a=e.getPropertyName(o),l=this.getNodeFunction(e).getCode(a);return o.code=l+`
`,t==="property"?a:e.format(`${a}()`,s,t)}}class vm{constructor(e,t){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class gFe extends vm{constructor(e,t=0){super(e,t),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class yFe extends vm{constructor(e,t=new gi){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class vFe extends vm{constructor(e,t=new ze){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class _Fe extends vm{constructor(e,t=new Ni){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class xFe extends vm{constructor(e,t=new Di){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class bFe extends vm{constructor(e,t=new Zl){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class wFe extends vm{constructor(e,t=new Rr){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class SFe extends gFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class MFe extends yFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class TFe extends vFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class EFe extends _Fe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class CFe extends xFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class RFe extends bFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class PFe extends wFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class BFe extends Gn{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}add(e){return this.nodes.push(e),this}If(e,t){const n=new UM(t);return this._currentCond=$a(e,n),this.add(this._currentCond)}ElseIf(e,t){const n=new UM(t),r=$a(e,n);return this._currentCond.elseNode=r,this._currentCond=r,this}Else(e){return this._currentCond.elseNode=new UM(e),this}build(e,...t){const n=Qne();gC(this);for(const r of this.nodes)r.build(e,"void");return gC(n),this.outputNode?this.outputNode.build(e,...t):super.build(e,...t)}else(...e){return console.warn("TSL.StackNode: .else() has been renamed to .Else()."),this.Else(...e)}elseif(...e){return console.warn("TSL.StackNode: .elseif() has been renamed to .ElseIf()."),this.ElseIf(...e)}}const KP=ot(BFe),T1=4,yj=[.125,.215,.35,.446,.526,.582],i0=20,JP=new _F(-1,1,1,-1,0,1),IFe=new of(90,1),vj=new Di;let ZP=null,e6=0,t6=0;const ZA=(1+Math.sqrt(5))/2,kg=1/ZA,_j=[new ze(-ZA,kg,0),new ze(ZA,kg,0),new ze(-kg,0,ZA),new ze(kg,0,ZA),new ze(0,ZA,-kg),new ze(0,ZA,kg),new ze(-1,1,-1),new ze(1,1,-1),new ze(-1,1,1),new ze(1,1,1)],NFe=[3,1,5,0,4,2],n6=vOe(Z4(),Wf("faceIndex")).normalize(),UF=rt(n6.x,n6.y.negate(),n6.z);class DFe{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}fromScene(e,t=0,n=.1,r=100){ZP=this._renderer.getRenderTarget(),e6=this._renderer.getActiveCubeFace(),t6=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=bj(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=wj(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ZP,e6,t6),e.scissorTest=!1,W3(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===tm||e.mapping===Ny?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ZP=this._renderer.getRenderTarget(),e6=this._renderer.getActiveCubeFace(),t6=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:sl,minFilter:sl,generateMipmaps:!1,type:Ef,format:sv,colorSpace:Bu},r=xj(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=xj(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=LFe(s)),this._blurMaterial=OFe(s,e,t)}return r}async _compileMaterial(e){const t=new rm(this._lodPlanes[0],e);await this._renderer.compile(t,JP)}_sceneToCubeUV(e,t,n,r){const s=IFe;s.near=t,s.far=n;const o=[-1,1,-1,-1,-1,-1],a=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear;l.getClearColor(vj),l.autoClear=!1;let c=this._backgroundBox;if(c===null){const d=new j4({name:"PMREM.Background",side:Jf,depthWrite:!1,depthTest:!1});c=new rm(new Pb,d)}let h=!1;const f=e.background;f?f.isColor&&(c.material.color.copy(f),e.background=null,h=!0):(c.material.color.copy(vj),h=!0),l.setRenderTarget(r),l.clear(),h&&l.render(c,s);for(let d=0;d<6;d++){const p=d%3;p===0?(s.up.set(0,o[d],0),s.lookAt(a[d],0,0)):p===1?(s.up.set(0,0,o[d]),s.lookAt(0,a[d],0)):(s.up.set(0,o[d],0),s.lookAt(0,0,a[d]));const v=this._cubeSize;W3(r,p*v,d>2?v:0,v,v),l.render(e,s)}l.autoClear=u,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===tm||e.mapping===Ny;r?this._cubemapMaterial===null&&(this._cubemapMaterial=bj(e)):this._equirectMaterial===null&&(this._equirectMaterial=wj(e));const s=r?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const o=this._lodMeshes[0];o.material=s;const a=this._cubeSize;W3(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,JP)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=_j[(r-s-1)%_j.length];this._blur(e,s-1,s,o,a)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=this._lodMeshes[r];h.material=u;const f=u.uniforms,d=this._sizeLods[n]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*i0-1),v=s/p,b=isFinite(s)?1+Math.floor(c*v):i0;b>i0&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${i0}`);const _=[];let M=0;for(let D=0;D<i0;++D){const k=D/v,G=Math.exp(-k*k/2);_.push(G),D===0?M+=G:D<b&&(M+=2*G)}for(let D=0;D<_.length;D++)_[D]=_[D]/M;e.texture.frame=(e.texture.frame||0)+1,f.envMap.value=e.texture,f.samples.value=b,f.weights.array=_,f.latitudinal.value=o==="latitudinal"?1:0,a&&(f.poleAxis.value=a);const{_lodMax:E}=this;f.dTheta.value=p,f.mipInt.value=E-n;const R=this._sizeLods[r],L=3*R*(r>E-T1?r-E+T1:0),I=4*(this._cubeSize-R);W3(t,L,I,3*R,2*R),l.setRenderTarget(t),l.render(h,JP)}}function LFe(i){const e=[],t=[],n=[],r=[];let s=i;const o=i-T1+1+yj.length;for(let a=0;a<o;a++){const l=Math.pow(2,s);t.push(l);let u=1/l;a>i-T1?u=yj[a-i+T1-1]:a===0&&(u=0),n.push(u);const c=1/(l-2),h=-c,f=1+c,d=[h,h,f,h,f,f,h,h,f,f,h,f],p=6,v=6,b=3,_=2,M=1,E=new Float32Array(b*v*p),R=new Float32Array(_*v*p),L=new Float32Array(M*v*p);for(let D=0;D<p;D++){const k=D%3*2/3-1,G=D>2?0:-1,O=[k,G,0,k+2/3,G,0,k+2/3,G+1,0,k,G,0,k+2/3,G+1,0,k,G+1,0],U=NFe[D];E.set(O,b*v*U),R.set(d,_*v*U);const Q=[U,U,U,U,U,U];L.set(Q,M*v*U)}const I=new gm;I.setAttribute("position",new Iu(E,b)),I.setAttribute("uv",new Iu(R,_)),I.setAttribute("faceIndex",new Iu(L,M)),e.push(I),r.push(new rm(I,null)),s>T1&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n,lodMeshes:r}}function xj(i,e,t){const n=new av(i,e,t);return n.texture.mapping=pN,n.texture.name="PMREM.cubeUv",n.texture.isPMREMTexture=!0,n.scissorTest=!0,n}function W3(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function zF(i){const e=new gs;return e.depthTest=!1,e.depthWrite=!1,e.blending=Iy,e.name=`PMREM_${i}`,e}function OFe(i,e,t){const n=Gx(new Array(i0).fill(0)),r=jn(new ze(0,1,0)),s=jn(0),o=st(i0),a=jn(0),l=jn(1),u=Hr(null),c=jn(0),h=st(1/e),f=st(1/t),d=st(i),p={n:o,latitudinal:a,weights:n,poleAxis:r,outputDirection:UF,dTheta:s,samples:l,envMap:u,mipInt:c,CUBEUV_TEXEL_WIDTH:h,CUBEUV_TEXEL_HEIGHT:f,CUBEUV_MAX_MIP:d},v=zF("blur");return v.uniforms=p,v.fragmentNode=xOe({...p,latitudinal:a.equal(1)}),v}function bj(i){const e=zF("cubemap");return e.fragmentNode=zx(i,UF),e}function wj(i){const e=zF("equirect");return e.fragmentNode=Hr(i,kie(UF),0),e}let FFe=0;class KN{constructor(e="",t=[],n=0,r=[]){this.name=e,this.bindings=t,this.index=n,this.bindingsReference=r,this.id=FFe++}}const Sj=new WeakMap,kFe=new Map([[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),UFe=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),X3=i=>(i=Number(i),i+(i%1?"":".0"));class tre{constructor(e,t,n){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=n,this.scene=null,this.camera=null,this.nodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.monitor=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.flow={code:""},this.chaining=[],this.stack=KP(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new QP,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.useComparisonMethod=!1}getBindGroupsCache(){let e=Sj.get(this.renderer);return e===void 0&&(e=new Xf,Sj.set(this.renderer,e)),e}createRenderTarget(e,t,n){return new av(e,t,n)}createCubeRenderTarget(e,t){return new Uie(e,t)}createPMREMGenerator(){return new DFe(this.renderer)}includes(e){return this.nodes.includes(e)}_getBindGroup(e,t){const n=this.getBindGroupsCache(),r=[];let s=!0;for(const a of t)r.push(a),s=s&&a.groupNode.shared!==!0;let o;return s?(o=n.get(r),o===void 0&&(o=new KN(e,r,this.bindingsIndexes[e].group,r),n.set(r,o))):o=new KN(e,r,this.bindingsIndexes[e].group,r),o}getBindGroupArray(e,t){const n=this.bindings[t];let r=n[e];return r===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),n[e]=r=[]),r}getBindings(){let e=this.bindGroups;if(e===null){const t={},n=this.bindings;for(const r of DV)for(const s in n[r]){const o=n[r][s];(t[s]||(t[s]=[])).push(...o)}e=[];for(const r in t){const s=t[r],o=this._getBindGroup(r,s);e.push(o)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((t,n)=>t.bindings[0].groupNode.order-n.bindings[0].groupNode.order);for(let t=0;t<e.length;t++){const n=e[t];this.bindingsIndexes[n.name].group=t,n.index=t}}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}buildUpdateNodes(){for(const e of this.nodes){const t=e.getUpdateType(),n=e.getUpdateBeforeType(),r=e.getUpdateAfterType();t!==Wn.NONE&&this.updateNodes.push(e.getSelf()),n!==Wn.NONE&&this.updateBeforeNodes.push(e.getSelf()),r!==Wn.NONE&&this.updateAfterNodes.push(e.getSelf())}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===sl||e.magFilter===mN||e.magFilter===W1||e.magFilter===Tf||e.minFilter===sl||e.minFilter===mN||e.minFilter===W1||e.minFilter===Tf}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,t=!0){const n=this.getDataFromNode(e);return n.cache===void 0&&(n.cache=new QP(t?this.getCache():null)),n.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const t=this.getDataFromNode(e);return t.usageCount=t.usageCount===void 0?1:t.usageCount+1,t.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new Di:e==="vec2"?t=new gi:e==="vec3"?t=new ze:e==="vec4"&&(t=new Ni)),e==="float")return X3(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${X3(t.r)}, ${X3(t.g)}, ${X3(t.b)} )`;const n=this.getTypeLength(e),r=this.getComponentType(e),s=o=>this.generateConst(r,o);if(n===2)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)} )`;if(n===3)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)} )`;if(n===4)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)}, ${s(t.w)} )`;if(n>4&&t&&(t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(s).join(", ")} )`;if(n>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const n=this.attributes;for(const s of n)if(s.name===e)return s;const r=new gj(e,t);return n.push(r),r}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const t=e.type;if(e.isDataTexture){if(t===da)return"int";if(t===ro)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;const n=kFe.get(e);return(t==="float"?"":t[0])+n}getTypeFromArray(e){return UFe.get(e.constructor)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const n=t.array,r=e.itemSize,s=e.normalized;let o;return!(e instanceof Mne)&&s!==!0&&(o=this.getTypeFromArray(n)),this.getTypeFromLength(r,o)}getTypeLength(e){const t=this.getVectorType(e),n=/vec([2-4])/.exec(t);return n!==null?Number(n[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=KP(this.stack),this.stacks.push(Qne()||this.stack),gC(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,gC(this.stacks.pop()),e}getDataFromNode(e,t=this.shaderStage,n=null){n=n===null?e.isGlobal(this)?this.globalCache:this.cache:n;let r=n.getData(e);return r===void 0&&(r={},n.setData(e,r)),r[t]===void 0&&(r[t]={}),r[t]}getNodeProperties(e,t="any"){const n=this.getDataFromNode(e,t);return n.properties||(n.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const n=this.getDataFromNode(e);let r=n.bufferAttribute;if(r===void 0){const s=this.uniforms.index++;r=new gj("nodeAttribute"+s,t,e),this.bufferAttributes.push(r),n.bufferAttribute=r}return r}getStructTypeFromNode(e,t=this.shaderStage){const n=this.getDataFromNode(e,t);if(n.structType===void 0){const r=this.structs.index++;e.name=`StructType${r}`,this.structs[t].push(e),n.structType=e}return e}getUniformFromNode(e,t,n=this.shaderStage,r=null){const s=this.getDataFromNode(e,n,this.globalCache);let o=s.uniform;if(o===void 0){const a=this.uniforms.index++;o=new hFe(r||"nodeUniform"+a,t,e),this.uniforms[n].push(o),s.uniform=o}return o}getVarFromNode(e,t=null,n=e.getNodeType(this),r=this.shaderStage){const s=this.getDataFromNode(e,r);let o=s.variable;if(o===void 0){const a=this.vars[r]||(this.vars[r]=[]);t===null&&(t="nodeVar"+a.length),o=new ere(t,n),a.push(o),s.variable=o}return o}getVaryingFromNode(e,t=null,n=e.getNodeType(this)){const r=this.getDataFromNode(e,"any");let s=r.varying;if(s===void 0){const o=this.varyings,a=o.length;t===null&&(t="nodeVarying"+a),s=new fFe(t,n),o.push(s),r.varying=s}return s}getCodeFromNode(e,t,n=this.shaderStage){const r=this.getDataFromNode(e);let s=r.code;if(s===void 0){const o=this.codes[n]||(this.codes[n]=[]),a=o.length;s=new dFe("nodeCode"+a,t),o.push(s),r.code=s}return s}addFlowCodeHierarchy(e,t){const{flowCodes:n,flowCodeBlock:r}=this.getDataFromNode(e);let s=!0,o=t;for(;o;){if(r.get(o)===!0){s=!1;break}o=this.getDataFromNode(o).parentNodeBlock}if(s)for(const a of n)this.addLineFlowCode(a)}addLineFlowCodeBlock(e,t,n){const r=this.getDataFromNode(e),s=r.flowCodes||(r.flowCodes=[]),o=r.flowCodeBlock||(r.flowCodeBlock=new WeakMap);s.push(t),o.set(n,!0)}addLineFlowCode(e,t=null){return e===""?this:(t!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),n=this.flowChildNode(e,t);return this.flowsData.set(e,n),n}buildFunctionNode(e){const t=new mFe,n=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=n,t}flowShaderNode(e){const t=e.layout,n={[Symbol.iterator](){let o=0;const a=Object.values(this);return{next:()=>({value:a[o],done:o++>=a.length})}}};for(const o of t.inputs)n[o.name]=new AFe(o.type,o.name);e.layout=null;const r=e.call(n),s=this.flowStagesNode(r,t.type);return e.layout=t,s}flowStagesNode(e,t=null){const n=this.flow,r=this.vars,s=this.cache,o=this.buildStage,a=this.stack,l={code:""};this.flow=l,this.vars={},this.cache=new QP,this.stack=KP();for(const u of NV)this.setBuildStage(u),l.result=e.build(this,t);return l.vars=this.getVars(this.shaderStage),this.flow=n,this.vars=r,this.cache=s,this.stack=a,this.setBuildStage(o),l}getFunctionOperator(){return null}flowChildNode(e,t=null){const n=this.flow,r={code:""};return this.flow=r,r.result=e.build(this,t),this.flow=n,r}flowNodeFromShaderStage(e,t,n=null,r=null){const s=this.shaderStage;this.setShaderStage(e);const o=this.flowChildNode(t,n);return r!==null&&(o.code+=`${this.tab+r} = ${o.result};
`),this.flowCode[e]=this.flowCode[e]+o.code,this.setShaderStage(s),o}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,t){return`${this.getType(e)} ${t}`}getVars(e){let t="";const n=this.vars[e];if(n!==void 0)for(const r of n)t+=`${this.getVar(r.type,r.name)}; `;return t}getUniforms(){console.warn("Abstract function.")}getCodes(e){const t=this.codes[e];let n="";if(t!==void 0)for(const r of t)n+=r.code+`
`;return n}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){const{object:e,material:t,renderer:n}=this;if(t!==null){let r=n.nodes.library.fromMaterial(t);r===null&&(console.error(`NodeMaterial: Material "${t.type}" is not compatible.`),r=new gs),r.build(this)}else this.addFlow("compute",e);for(const r of NV){this.setBuildStage(r),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of DV){this.setShaderStage(s);const o=this.flowNodes[s];for(const a of o)r==="generate"?this.flowNode(a):a.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if(t==="float"||t==="int"||t==="uint")return new SFe(e);if(t==="vec2"||t==="ivec2"||t==="uvec2")return new MFe(e);if(t==="vec3"||t==="ivec3"||t==="uvec3")return new TFe(e);if(t==="vec4"||t==="ivec4"||t==="uvec4")return new EFe(e);if(t==="color")return new CFe(e);if(t==="mat3")return new RFe(e);if(t==="mat4")return new PFe(e);throw new Error(`Uniform "${t}" not declared.`)}createNodeMaterial(e="NodeMaterial"){throw new Error(`THREE.NodeBuilder: createNodeMaterial() was deprecated. Use new ${e}() instead.`)}format(e,t,n){if(t=this.getVectorType(t),n=this.getVectorType(n),t===n||n===null||this.isReference(n))return e;const r=this.getTypeLength(t),s=this.getTypeLength(n);return r===16&&s===9?`${this.getType(n)}(${e}[0].xyz, ${e}[1].xyz, ${e}[2].xyz)`:r===9&&s===4?`${this.getType(n)}(${e}[0].xy, ${e}[1].xy)`:r>4||s>4||s===0?e:r===s?`${this.getType(n)}( ${e} )`:r>s?this.format(`${e}.${"xyz".slice(0,s)}`,this.getTypeFromLength(s,this.getComponentType(t)),n):s===4&&r>1?`${this.getType(n)}( ${this.format(e,t,"vec3")}, 1.0 )`:r===2?`${this.getType(n)}( ${this.format(e,t,"vec2")}, 0.0 )`:(r===1&&s>1&&t!==this.getComponentType(n)&&(e=`${this.getType(this.getComponentType(n))}( ${e} )`),`${this.getType(n)}( ${e} )`)}getSignature(){return`// Three.js r${q4} - Node System
`}}class Mj{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.startTime=null,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let n=e.get(t);return n===void 0&&(n={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,n)),n}updateBeforeNode(e){const t=e.getUpdateBeforeType(),n=e.updateReference(this);if(t===Wn.FRAME){const{frameMap:r}=this._getMaps(this.updateBeforeMap,n);r.get(n)!==this.frameId&&e.updateBefore(this)!==!1&&r.set(n,this.frameId)}else if(t===Wn.RENDER){const{renderMap:r}=this._getMaps(this.updateBeforeMap,n);r.get(n)!==this.renderId&&e.updateBefore(this)!==!1&&r.set(n,this.renderId)}else t===Wn.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const t=e.getUpdateAfterType(),n=e.updateReference(this);if(t===Wn.FRAME){const{frameMap:r}=this._getMaps(this.updateAfterMap,n);r.get(n)!==this.frameId&&e.updateAfter(this)!==!1&&r.set(n,this.frameId)}else if(t===Wn.RENDER){const{renderMap:r}=this._getMaps(this.updateAfterMap,n);r.get(n)!==this.renderId&&e.updateAfter(this)!==!1&&r.set(n,this.renderId)}else t===Wn.OBJECT&&e.updateAfter(this)}updateNode(e){const t=e.getUpdateType(),n=e.updateReference(this);if(t===Wn.FRAME){const{frameMap:r}=this._getMaps(this.updateMap,n);r.get(n)!==this.frameId&&e.update(this)!==!1&&r.set(n,this.frameId)}else if(t===Wn.RENDER){const{renderMap:r}=this._getMaps(this.updateMap,n);r.get(n)!==this.renderId&&e.update(this)!==!1&&r.set(n,this.renderId)}else t===Wn.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class GF{constructor(e,t,n=null,r="",s=!1){this.type=e,this.name=t,this.count=n,this.qualifier=r,this.isConst=s}}GF.isNodeFunctionInput=!0;class gc extends uv{static get type(){return"TimerNode"}constructor(e=gc.LOCAL,t=1,n=0){super(n),this.scope=e,this.scale=t,this.updateType=Wn.FRAME}update(e){const t=this.scope,n=this.scale;t===gc.LOCAL?this.value+=e.deltaTime*n:t===gc.DELTA?this.value=e.deltaTime*n:t===gc.FRAME?this.value=e.frameId:this.value=e.time*n}serialize(e){super.serialize(e),e.scope=this.scope,e.scale=this.scale}deserialize(e){super.deserialize(e),this.scope=e.scope,this.scale=e.scale}}gc.LOCAL="local";gc.GLOBAL="global";gc.DELTA="delta";gc.FRAME="frame";const zFe=(i,e=0)=>Mt(new gc(gc.LOCAL,i,e));class qs extends Gn{static get type(){return"OscNode"}constructor(e=qs.SINE,t=zFe()){super(),this.method=e,this.timeNode=t}getNodeType(e){return this.timeNode.getNodeType(e)}setup(){const e=this.method,t=Mt(this.timeNode);let n=null;return e===qs.SINE?n=t.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5):e===qs.SQUARE?n=t.fract().round():e===qs.TRIANGLE?n=t.add(.5).fract().mul(2).sub(1).abs():e===qs.SAWTOOTH&&(n=t.fract()),n}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}qs.SINE="sine";qs.SQUARE="square";qs.TRIANGLE="triangle";qs.SAWTOOTH="sawtooth";qs.SINE;qs.SQUARE;qs.TRIANGLE;qs.SAWTOOTH;new Yd;new ze;new ze;new ze;new Rr;new ze(0,0,-1);new Ni;new ze;new ze;new Ni;new gi;new av;Hx.flipX();const i6=new _F(-1,1,1,-1,0,1);class GFe extends gm{constructor(e=!1){super();const t=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new Rf([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Rf(t,2))}}const HFe=new GFe;class nre extends rm{constructor(e=null){super(HFe,e),this.camera=i6,this.isQuadMesh=!0}renderAsync(e){return e.renderAsync(this,i6)}render(e){e.render(this,i6)}}class hh extends Gn{static get type(){return"SceneNode"}constructor(e=hh.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,n=this.scene!==null?this.scene:e.scene;let r;return t===hh.BACKGROUND_BLURRINESS?r=wr("backgroundBlurriness","float",n):t===hh.BACKGROUND_INTENSITY?r=wr("backgroundIntensity","float",n):console.error("THREE.SceneNode: Unknown scope:",t),r}}hh.BACKGROUND_BLURRINESS="backgroundBlurriness";hh.BACKGROUND_INTENSITY="backgroundIntensity";const qFe=Pt(hh,hh.BACKGROUND_BLURRINESS),Tj=Pt(hh,hh.BACKGROUND_INTENSITY),E1={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},eo={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},to={Store:"store",Discard:"discard"},os={Load:"load",Clear:"clear"},r6={CCW:"ccw",CW:"cw"},s6={None:"none",Front:"front",Back:"back"},Fy={Uint16:"uint16",Uint32:"uint32"},we={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10uFloat:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Stencil8:"stencil8",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},o6={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},SC={Linear:"linear",Nearest:"nearest"},Bn={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDstColor:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},VA={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},Ej={None:0,Red:1,Green:2,Blue:4,Alpha:8,All:15},qd={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},JN={Uniform:"uniform",Storage:"storage",ReadOnlyStorage:"read-only-storage"},Cj={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},N2={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},Rj={OneD:"1d",TwoD:"2d",ThreeD:"3d"},vu={OneD:"1d",TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",CubeArray:"cube-array",ThreeD:"3d"},VFe={All:"all",StencilOnly:"stencil-only",DepthOnly:"depth-only"},Y3={Vertex:"vertex",Instance:"instance"},ZN={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups"},jFe=new gi;class $Fe extends Db{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return e.object.isQuadMesh&&this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class Pj extends $Fe{static get type(){return"PassMultipleTextureNode"}constructor(e,t,n=!1){super(e,null),this.textureName=t,this.previousTexture=n}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}class o5 extends vs{static get type(){return"PassNode"}constructor(e,t,n,r={}){super("vec4"),this.scope=e,this.scene=t,this.camera=n,this.options=r,this._pixelRatio=1,this._width=1,this._height=1;const s=new Bb;s.isRenderTargetTexture=!0,s.name="depth";const o=new av(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Ef,...r});o.texture.name="output",o.depthTexture=s,this.renderTarget=o,this.updateBeforeType=Wn.FRAME,this._textures={output:o.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=jn(0),this._cameraFar=jn(0),this._mrt=null,this.isPassNode=!0}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}isGlobal(){return!0}getTexture(e){let t=this._textures[e];return t===void 0&&(t=this.renderTarget.texture.clone(),t.isRenderTargetTexture=!0,t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return t===void 0&&(t=this.getTexture(e).clone(),t.isRenderTargetTexture=!0,this._previousTextures[e]=t),t}toggleTexture(e){const t=this._previousTextures[e];if(t!==void 0){const n=this._textures[e],r=this.renderTarget.textures.indexOf(n);this.renderTarget.textures[r]=t,this._textures[e]=t,this._previousTextures[e]=n,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return t===void 0&&(this._textureNodes[e]=t=Mt(new Pj(this,e)),this._textureNodes[e].updateTexture()),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return t===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),this._previousTextureNodes[e]=t=Mt(new Pj(this,e,!0)),this._previousTextureNodes[e].updateTexture()),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(t===void 0){const n=this._cameraNear,r=this._cameraFar;this._viewZNodes[e]=t=Lie(this.getTextureNode(e),n,r)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(t===void 0){const n=this._cameraNear,r=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=t=VM(s,n,r)}return t}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,e.backend.isWebGLBackend===!0&&(this.renderTarget.samples=0),this.renderTarget.depthTexture.isMultisampleRenderTargetTexture=this.renderTarget.samples>1,this.scope===o5.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:n,camera:r}=this;this._pixelRatio=t.getPixelRatio();const s=t.getSize(jFe);this.setSize(s.width,s.height);const o=t.getRenderTarget(),a=t.getMRT();this._cameraNear.value=r.near,this._cameraFar.value=r.far;for(const l in this._previousTextures)this.toggleTexture(l);t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.render(n,r),t.setRenderTarget(o),t.setMRT(a)}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget.setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}o5.COLOR="color";o5.DEPTH="depth";class ire extends Gn{static get type(){return"FogNode"}constructor(e,t){super("float"),this.isFogNode=!0,this.colorNode=e,this.factorNode=t}getViewZNode(e){let t;const n=e.context.getViewZ;return n!==void 0&&(t=n(this)),(t||Uo.z).negate()}setup(){return this.factorNode}}class WFe extends ire{static get type(){return"FogRangeNode"}constructor(e,t,n){super(e),this.isFogRangeNode=!0,this.nearNode=t,this.farNode=n}setup(e){const t=this.getViewZNode(e);return sm(this.nearNode,this.farNode,t)}}const XFe=ot(WFe);class YFe extends ire{static get type(){return"FogExp2Node"}constructor(e,t){super(e),this.isFogExp2Node=!0,this.densityNode=t}setup(e){const t=this.getViewZNode(e),n=this.densityNode;return n.mul(n,t,t).negate().exp().oneMinus()}}const QFe=ot(YFe),KFe=$t(({depthTexture:i,shadowCoord:e})=>Hr(i,e.xy).compare(e.z)),JFe=$t(({depthTexture:i,shadowCoord:e,shadow:t})=>{const n=(v,b)=>Hr(i,v).compare(b),r=wr("mapSize","vec2",t).setGroup(hi),s=wr("radius","float",t).setGroup(hi),o=Yt(1).div(r),a=o.x.negate().mul(s),l=o.y.negate().mul(s),u=o.x.mul(s),c=o.y.mul(s),h=a.div(2),f=l.div(2),d=u.div(2),p=c.div(2);return Wl(n(e.xy.add(Yt(a,l)),e.z),n(e.xy.add(Yt(0,l)),e.z),n(e.xy.add(Yt(u,l)),e.z),n(e.xy.add(Yt(h,f)),e.z),n(e.xy.add(Yt(0,f)),e.z),n(e.xy.add(Yt(d,f)),e.z),n(e.xy.add(Yt(a,0)),e.z),n(e.xy.add(Yt(h,0)),e.z),n(e.xy,e.z),n(e.xy.add(Yt(d,0)),e.z),n(e.xy.add(Yt(u,0)),e.z),n(e.xy.add(Yt(h,p)),e.z),n(e.xy.add(Yt(0,p)),e.z),n(e.xy.add(Yt(d,p)),e.z),n(e.xy.add(Yt(a,c)),e.z),n(e.xy.add(Yt(0,c)),e.z),n(e.xy.add(Yt(u,c)),e.z)).mul(1/17)}),ZFe=$t(({depthTexture:i,shadowCoord:e,shadow:t})=>{const n=(c,h)=>Hr(i,c).compare(h),r=wr("mapSize","vec2",t).setGroup(hi),s=Yt(1).div(r),o=s.x,a=s.y,l=e.xy,u=cv(l.mul(r).add(.5));return l.subAssign(u.mul(s)),Wl(n(l,e.z),n(l.add(Yt(o,0)),e.z),n(l.add(Yt(0,a)),e.z),n(l.add(s),e.z),nr(n(l.add(Yt(o.negate(),0)),e.z),n(l.add(Yt(o.mul(2),0)),e.z),u.x),nr(n(l.add(Yt(o.negate(),a)),e.z),n(l.add(Yt(o.mul(2),a)),e.z),u.x),nr(n(l.add(Yt(0,a.negate())),e.z),n(l.add(Yt(0,a.mul(2))),e.z),u.y),nr(n(l.add(Yt(o,a.negate())),e.z),n(l.add(Yt(o,a.mul(2))),e.z),u.y),nr(nr(n(l.add(Yt(o.negate(),a.negate())),e.z),n(l.add(Yt(o.mul(2),a.negate())),e.z),u.x),nr(n(l.add(Yt(o.negate(),a.mul(2))),e.z),n(l.add(Yt(o.mul(2),a.mul(2))),e.z),u.x),u.y)).mul(1/9)}),eke=$t(({depthTexture:i,shadowCoord:e})=>{const t=st(1).toVar(),n=Hr(i).uv(e.xy).rg,r=die(e.z,n.x);return Ho(r.notEqual(st(1)),()=>{const s=e.z.sub(n.x),o=Mc(0,n.y.mul(n.y));let a=o.div(o.add(s.mul(s)));a=Up(N0(a,.3).div(.95-.3)),t.assign(Up(Mc(r,a)))}),t}),tke=$t(({samples:i,radius:e,size:t,shadowPass:n})=>{const r=st(0).toVar(),s=st(0).toVar(),o=i.lessThanEqual(st(1)).select(st(0),st(2).div(i.sub(1))),a=i.lessThanEqual(st(1)).select(st(0),st(-1));yf({start:zr(0),end:zr(i),type:"int",condition:"<"},({i:u})=>{const c=a.add(st(u).mul(o)),h=n.uv(Wl(i5.xy,Yt(0,c).mul(e)).div(t)).x;r.addAssign(h),s.addAssign(h.mul(h))}),r.divAssign(i),s.divAssign(i);const l=CF(s.sub(r.mul(r)));return Yt(r,l)}),nke=$t(({samples:i,radius:e,size:t,shadowPass:n})=>{const r=st(0).toVar(),s=st(0).toVar(),o=i.lessThanEqual(st(1)).select(st(0),st(2).div(i.sub(1))),a=i.lessThanEqual(st(1)).select(st(0),st(-1));yf({start:zr(0),end:zr(i),type:"int",condition:"<"},({i:u})=>{const c=a.add(st(u).mul(o)),h=n.uv(Wl(i5.xy,Yt(c,0).mul(e)).div(t));r.addAssign(h.x),s.addAssign(Wl(h.y.mul(h.y),h.x.mul(h.x)))}),r.divAssign(i),s.divAssign(i);const l=CF(s.sub(r.mul(r)));return Yt(r,l)}),ike=[KFe,JFe,ZFe,eke];let Ug=null;const Q3=new nre;class _m extends hv{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.updateType=Wn.FRAME,this.light=e,this.color=new Di,this.colorNode=jn(this.color).setGroup(hi),this.baseColorNode=null,this.shadowMap=null,this.shadowNode=null,this.shadowColorNode=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this.isAnalyticLightNode=!0}getCacheKey(){return pC(super.getCacheKey(),this.light.id,this.light.castShadow?1:0)}getHash(){return this.light.uuid}setupShadow(e){const{object:t,renderer:n}=e;if(n.shadowMap.enabled===!1)return;let r=this.shadowColorNode;if(r===null){Ug===null&&(Ug=new gs,Ug.fragmentNode=Vn(0,0,0,1),Ug.isShadowNodeMaterial=!0,Ug.name="ShadowMaterial");const s=n.shadowMap.type,o=this.light.shadow,a=new Bb;a.compareFunction=hF;const l=e.createRenderTarget(o.mapSize.width,o.mapSize.height);if(l.depthTexture=a,o.camera.updateProjectionMatrix(),s===S3){a.compareFunction=null,this.vsmShadowMapVertical=e.createRenderTarget(o.mapSize.width,o.mapSize.height,{format:Lx,type:Ef}),this.vsmShadowMapHorizontal=e.createRenderTarget(o.mapSize.width,o.mapSize.height,{format:Lx,type:Ef});const E=Hr(a),R=Hr(this.vsmShadowMapVertical.texture),L=wr("blurSamples","float",o).setGroup(hi),I=wr("radius","float",o).setGroup(hi),D=wr("mapSize","vec2",o).setGroup(hi);let k=this.vsmMaterialVertical||(this.vsmMaterialVertical=new gs);k.fragmentNode=tke({samples:L,radius:I,size:D,shadowPass:E}).context(e.getSharedContext()),k.name="VSMVertical",k=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new gs),k.fragmentNode=nke({samples:L,radius:I,size:D,shadowPass:R}).context(e.getSharedContext()),k.name="VSMHorizontal"}const u=wr("intensity","float",o).setGroup(hi),c=wr("bias","float",o).setGroup(hi),h=wr("normalBias","float",o).setGroup(hi),f=t.material.shadowPositionNode||qN;let d=jn(o.matrix).setGroup(hi).mul(f.add(n5.mul(h)));d=d.xyz.div(d.w);let p=d.z.add(c);n.coordinateSystem===im&&(p=p.mul(2).sub(1)),d=rt(d.x,d.y.oneMinus(),p);const v=d.x.greaterThanEqual(0).and(d.x.lessThanEqual(1)).and(d.y.greaterThanEqual(0)).and(d.y.lessThanEqual(1)).and(d.z.lessThanEqual(1)),b=o.filterNode||ike[n.shadowMap.type]||null;if(b===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const _=Hr(l.texture,d),M=v.select(b({depthTexture:s===S3?this.vsmShadowMapHorizontal.texture:a,shadowCoord:d,shadow:o}),st(1));this.shadowMap=l,this.light.shadow.map=l,this.shadowNode=M,this.shadowColorNode=r=this.colorNode.mul(nr(1,M.rgb.mix(_,1),u.mul(_.a))),this.baseColorNode=this.colorNode}this.colorNode=r,this.updateBeforeType=Wn.RENDER}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&this.disposeShadow()}updateShadow(e){const{shadowMap:t,light:n}=this,{renderer:r,scene:s,camera:o}=e,a=r.shadowMap.type,l=t.depthTexture.version;this._depthVersionCached=l;const u=s.overrideMaterial;s.overrideMaterial=Ug,t.setSize(n.shadow.mapSize.width,n.shadow.mapSize.height),n.shadow.updateMatrices(n),n.shadow.camera.layers.mask=o.layers.mask;const c=r.getRenderTarget(),h=r.getRenderObjectFunction();r.setRenderObjectFunction((f,...d)=>{(f.castShadow===!0||f.receiveShadow&&a===S3)&&r.renderObject(f,...d)}),r.setRenderTarget(t),r.render(s,n.shadow.camera),r.setRenderObjectFunction(h),n.isPointLight!==!0&&a===S3&&this.vsmPass(e,n),r.setRenderTarget(c),s.overrideMaterial=u}vsmPass(e,t){const{renderer:n}=e;this.vsmShadowMapVertical.setSize(t.shadow.mapSize.width,t.shadow.mapSize.height),this.vsmShadowMapHorizontal.setSize(t.shadow.mapSize.width,t.shadow.mapSize.height),n.setRenderTarget(this.vsmShadowMapVertical),Q3.material=this.vsmMaterialVertical,Q3.render(n),n.setRenderTarget(this.vsmShadowMapHorizontal),Q3.material=this.vsmMaterialHorizontal,Q3.render(n)}disposeShadow(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),this.shadowNode=null,this.shadowColorNode=null,this.baseColorNode=null,this.updateBeforeType=Wn.NONE}updateBefore(e){const t=this.light.shadow;(t.needsUpdate||t.autoUpdate)&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const rre=$t(i=>{const{lightDistance:e,cutoffDistance:t,decayExponent:n}=i,r=e.pow(n).max(.01).reciprocal();return t.greaterThan(0).select(r.mul(e.div(t).pow4().oneMinus().clamp().pow2()),r)});let K3;function HF(i){K3=K3||new WeakMap;let e=K3.get(i);return e===void 0&&K3.set(i,e={}),e}function sre(i){const e=HF(i);return e.position||(e.position=jn(new ze).setGroup(hi).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.matrixWorld)))}function rke(i){const e=HF(i);return e.targetPosition||(e.targetPosition=jn(new ze).setGroup(hi).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.target.matrixWorld)))}function qF(i){const e=HF(i);return e.viewPosition||(e.viewPosition=jn(new ze).setGroup(hi).onRenderUpdate(({camera:t},n)=>{n.value=n.value||new ze,n.value.setFromMatrixPosition(i.matrixWorld),n.value.applyMatrix4(t.matrixWorldInverse)}))}const ore=i=>td.transformDirection(sre(i).sub(rke(i))),ske=$t(([i])=>{const e=i.mul(.9478672986).add(.0521327014).pow(2.4),t=i.mul(.0773993808),n=i.lessThanEqual(.04045);return nr(e,t,n)}).setLayout({name:"sRGBToLinearSRGB",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),oke=$t(([i])=>{const e=i.pow(.41666).mul(1.055).sub(.055),t=i.mul(12.92),n=i.lessThanEqual(.0031308);return nr(e,t,n)}).setLayout({name:"linearSRGBTosRGB",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),ake=$t(([i,e])=>i.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),lke=$t(([i,e])=>(i=i.mul(e),i.div(i.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),uke=$t(([i,e])=>{i=i.mul(e),i=i.sub(.004).max(0);const t=i.mul(i.mul(6.2).add(.5)),n=i.mul(i.mul(6.2).add(1.7)).add(.06);return t.div(n).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),cke=$t(([i])=>{const e=i.mul(i.add(.0245786)).sub(90537e-9),t=i.mul(i.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),hke=$t(([i,e])=>{const t=al(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),n=al(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return i=i.mul(e).div(.6),i=t.mul(i),i=cke(i),i=n.mul(i),i.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),fke=al(rt(1.6605,-.1246,-.0182),rt(-.5876,1.1329,-.1006),rt(-.0728,-.0083,1.1187)),dke=al(rt(.6274,.0691,.0164),rt(.3293,.9195,.088),rt(.0433,.0113,.8956)),pke=$t(([i])=>{const e=rt(i).toVar(),t=rt(e.mul(e)).toVar(),n=rt(t.mul(t)).toVar();return st(15.5).mul(n.mul(t)).sub(Oi(40.14,n.mul(e))).add(Oi(31.96,n).sub(Oi(6.868,t.mul(e))).add(Oi(.4298,t).add(Oi(.1191,e).sub(.00232))))}),Ake=$t(([i,e])=>{const t=rt(i).toVar(),n=al(rt(.856627153315983,.137318972929847,.11189821299995),rt(.0951212405381588,.761241990602591,.0767994186031903),rt(.0482516061458583,.101439036467562,.811302368396859)),r=al(rt(1.1271005818144368,-.1413297634984383,-.14132976349843826),rt(-.11060664309660323,1.157823702216272,-.11060664309660294),rt(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=st(-12.47393),o=st(4.026069);return t.mulAssign(e),t.assign(dke.mul(t)),t.assign(n.mul(t)),t.assign(Mc(t,1e-10)),t.assign(Y4(t)),t.assign(t.sub(s).div(o.sub(s))),t.assign(Up(t,0,1)),t.assign(pke(t)),t.assign(r.mul(t)),t.assign(K4(Mc(rt(0),t),rt(2.2))),t.assign(fke.mul(t)),t.assign(Up(t,0,1)),t}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),mke=$t(([i,e])=>{const t=st(.76),n=st(.15);i=i.mul(e);const r=bC(i.r,bC(i.g,i.b)),s=$a(r.lessThan(.08),r.sub(Oi(6.25,r.mul(r))),.04);i.subAssign(s);const o=Mc(i.r,Mc(i.g,i.b));Ho(o.lessThan(t),()=>i);const a=N0(1,t),l=N0(1,a.mul(a).div(o.add(a.sub(t))));i.mulAssign(l.div(o));const u=N0(1,kp(1,n.mul(o.sub(l)).add(1)));return nr(i,rt(l),u)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class gke extends Gn{constructor(e){super(),this.scope=e}generate(e){const{scope:t}=this,{renderer:n}=e;n.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}}ot(gke);class Sh extends vs{static get type(){return"AtomicFunctionNode"}constructor(e,t,n,r=null){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=n,this.storeNode=r}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const t=this.method,n=this.getNodeType(e),r=this.getInputType(e),s=this.pointerNode,o=this.valueNode,a=[];a.push(`&${s.build(e,r)}`),a.push(o.build(e,r));const l=`${e.getMethod(t,n)}( ${a.join(", ")} )`;if(this.storeNode!==null){const u=this.storeNode.build(e,r);e.addLineFlowCode(`${u} = ${l}`,this)}else e.addLineFlowCode(l,this)}}Sh.ATOMIC_LOAD="atomicLoad";Sh.ATOMIC_STORE="atomicStore";Sh.ATOMIC_ADD="atomicAdd";Sh.ATOMIC_SUB="atomicSub";Sh.ATOMIC_MAX="atomicMax";Sh.ATOMIC_MIN="atomicMin";Sh.ATOMIC_AND="atomicAnd";Sh.ATOMIC_OR="atomicOr";Sh.ATOMIC_XOR="atomicXor";ot(Sh);const yke=$t(([i,e])=>{const t=i.x,n=i.y,r=i.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(n)),s=s.add(e.element(2).mul(2*.511664).mul(r)),s=s.add(e.element(3).mul(2*.511664).mul(t)),s=s.add(e.element(4).mul(2*.429043).mul(t).mul(n)),s=s.add(e.element(5).mul(2*.429043).mul(n).mul(r)),s=s.add(e.element(6).mul(r.mul(r).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(t).mul(r)),s=s.add(e.element(8).mul(.429043).mul(Oi(t,t).sub(Oi(n,n)))),s});class vke extends _m{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=jn(0).setGroup(hi),this.decayExponentNode=jn(0).setGroup(hi)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setup(e){const{colorNode:t,cutoffDistanceNode:n,decayExponentNode:r,light:s}=this,o=e.context.lightingModel,a=qF(s).sub(Uo),l=a.normalize(),u=a.length(),c=rre({lightDistance:u,cutoffDistance:n,decayExponent:r}),h=t.mul(c),f=e.context.reflectedLight;o.direct({lightDirection:l,lightColor:h,reflectedLight:f},e.stack,e)}}class _ke extends _m{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setup(e){super.setup(e);const t=e.context.lightingModel,n=this.colorNode,r=ore(this.light),s=e.context.reflectedLight;t.direct({lightDirection:r,lightColor:n,reflectedLight:s},e.stack,e)}}const a6=new Rr,J3=new Rr;let D2=null;class xke extends _m{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=jn(new ze).setGroup(hi),this.halfWidth=jn(new ze).setGroup(hi)}update(e){super.update(e);const{light:t}=this,n=e.camera.matrixWorldInverse;J3.identity(),a6.copy(t.matrixWorld),a6.premultiply(n),J3.extractRotation(a6),this.halfWidth.value.set(t.width*.5,0,0),this.halfHeight.value.set(0,t.height*.5,0),this.halfWidth.value.applyMatrix4(J3),this.halfHeight.value.applyMatrix4(J3)}setup(e){super.setup(e);let t,n;e.isAvailable("float32Filterable")?(t=Hr(D2.LTC_FLOAT_1),n=Hr(D2.LTC_FLOAT_2)):(t=Hr(D2.LTC_HALF_1),n=Hr(D2.LTC_HALF_2));const{colorNode:r,light:s}=this,o=e.context.lightingModel,a=qF(s),l=e.context.reflectedLight;o.directRectArea({lightColor:r,lightPosition:a,halfWidth:this.halfWidth,halfHeight:this.halfHeight,reflectedLight:l,ltc_1:t,ltc_2:n},e.stack,e)}static setLTC(e){D2=e}}class are extends _m{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=jn(0).setGroup(hi),this.penumbraCosNode=jn(0).setGroup(hi),this.cutoffDistanceNode=jn(0).setGroup(hi),this.decayExponentNode=jn(0).setGroup(hi)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e){const{coneCosNode:t,penumbraCosNode:n}=this;return sm(t,n,e)}setup(e){super.setup(e);const t=e.context.lightingModel,{colorNode:n,cutoffDistanceNode:r,decayExponentNode:s,light:o}=this,a=qF(o).sub(Uo),l=a.normalize(),u=l.dot(ore(o)),c=this.getSpotAttenuation(u),h=a.length(),f=rre({lightDistance:h,cutoffDistance:r,decayExponent:s}),d=n.mul(c).mul(f),p=e.context.reflectedLight;t.direct({lightDirection:l,lightColor:d,reflectedLight:p},e.stack,e)}}class bke extends are{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e){const t=this.light.iesMap;let n=null;if(t&&t.isTexture===!0){const r=e.acos().mul(1/Math.PI);n=Hr(t,Yt(r,0),0).r}else n=super.getSpotAttenuation(e);return n}}class wke extends _m{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class Ske extends _m{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=sre(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=jn(new Di).setGroup(hi)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:n,lightDirectionNode:r}=this,o=Tc.dot(r).mul(.5).add(.5),a=nr(n,t,o);e.context.irradiance.addAssign(a)}}class Mke extends _m{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const t=[];for(let n=0;n<9;n++)t.push(new ze);this.lightProbe=Gx(t)}update(e){const{light:t}=this;super.update(e);for(let n=0;n<9;n++)this.lightProbe.array[n].copy(t.sh.coefficients[n]).multiplyScalar(t.intensity)}setup(e){const t=yke(n5,this.lightProbe);e.context.irradiance.addAssign(t)}}class lre{parseFunction(){console.warn("Abstract function.")}}class VF{constructor(e,t,n="",r=""){this.type=e,this.inputs=t,this.name=n,this.precision=r}getCode(){console.warn("Abstract function.")}}VF.isNodeFunction=!0;const Tke=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,Eke=/[a-z_0-9]+/ig,Bj="#pragma main",Cke=i=>{i=i.trim();const e=i.indexOf(Bj),t=e!==-1?i.slice(e+Bj.length):i,n=t.match(Tke);if(n!==null&&n.length===5){const r=n[4],s=[];let o=null;for(;(o=Eke.exec(r))!==null;)s.push(o);const a=[];let l=0;for(;l<s.length;){const p=s[l][0]==="const";p===!0&&l++;let v=s[l][0];v==="in"||v==="out"||v==="inout"?l++:v="";const b=s[l++][0];let _=Number.parseInt(s[l][0]);Number.isNaN(_)===!1?l++:_=null;const M=s[l++][0];a.push(new GF(b,M,_,v,p))}const u=t.substring(n[0].length),c=n[3]!==void 0?n[3]:"",h=n[2],f=n[1]!==void 0?n[1]:"",d=e!==-1?i.slice(0,e):"";return{type:h,inputs:a,name:c,precision:f,inputsCode:r,blockCode:u,headerCode:d}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class Rke extends VF{constructor(e){const{type:t,inputs:n,name:r,precision:s,inputsCode:o,blockCode:a,headerCode:l}=Cke(e);super(t,n,r,s),this.inputsCode=o,this.blockCode=a,this.headerCode=l}getCode(e=this.name){let t;const n=this.blockCode;if(n!==""){const{type:r,inputsCode:s,headerCode:o,precision:a}=this;let l=`${r} ${e} ( ${s.trim()} )`;a!==""&&(l=`${a} ${l}`),t=o+l+n}else t="";return t}}class Pke extends lre{parseFunction(e){return new Rke(e)}}function Bke(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function Ike(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}class Nke{constructor(){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparent=[],this.bundles=[],this.lightsNode=new Iie([]),this.lightsArray=[],this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,n,r,s,o){let a=this.renderItems[this.renderItemsIndex];return a===void 0?(a={id:e.id,object:e,geometry:t,material:n,groupOrder:r,renderOrder:e.renderOrder,z:s,group:o},this.renderItems[this.renderItemsIndex]=a):(a.id=e.id,a.object=e,a.geometry=t,a.material=n,a.groupOrder=r,a.renderOrder=e.renderOrder,a.z=s,a.group=o),this.renderItemsIndex++,a}push(e,t,n,r,s,o){const a=this.getNextRenderItem(e,t,n,r,s,o);e.occlusionTest===!0&&this.occlusionQueryCount++,(n.transparent===!0||n.transmission>0?this.transparent:this.opaque).push(a)}unshift(e,t,n,r,s,o){const a=this.getNextRenderItem(e,t,n,r,s,o);(n.transparent===!0?this.transparent:this.opaque).unshift(a)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}getLightsNode(){return this.lightsNode.fromLights(this.lightsArray)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||Bke),this.transparent.length>1&&this.transparent.sort(t||Ike)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const n=this.renderItems[e];if(n.id===null)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.groupOrder=null,n.renderOrder=null,n.z=null,n.group=null}}}class Dke{constructor(){this.lists=new Xf}get(e,t){const n=this.lists,r=[e,t];let s=n.get(r);return s===void 0&&(s=new Nke,n.set(r,s)),s}dispose(){this.lists=new Xf}}let Lke=0;class Oke{constructor(){this.id=Lke++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new Ni,this.scissor=!1,this.scissorValue=new Ni,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.sampleCount=1,this.width=0,this.height=0,this.isRenderContext=!0}getCacheKey(){return ure(this)}}function ure(i){const{textures:e,activeCubeFace:t}=i,n=[t];for(const r of e)n.push(r.id);return qne(n)}class Fke{constructor(){this.chainMaps={}}get(e,t,n=null){const r=[e,t];let s;if(n===null)s="default";else{const l=n.texture.format;s=`${n.textures.length}:${l}:${n.samples}:${n.depthBuffer}:${n.stencilBuffer}`}const o=this.getChainMap(s);let a=o.get(r);return a===void 0&&(a=new Oke,o.set(r,a)),n!==null&&(a.sampleCount=n.samples===0?1:n.samples),a}getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new Xf)}dispose(){this.chainMaps={}}}const kke=new ze;class Uke extends Zp{constructor(e,t,n){super(),this.renderer=e,this.backend=t,this.info=n}updateRenderTarget(e,t=0){const n=this.get(e),r=e.samples===0?1:e.samples,s=n.depthTextureMips||(n.depthTextureMips={}),o=e.textures,a=this.getSize(o[0]),l=a.width>>t,u=a.height>>t;let c=e.depthTexture||s[t],h=!1;c===void 0&&(c=new Bb,c.format=e.stencilBuffer?Dy:I0,c.type=e.stencilBuffer?Eb:ro,c.image.width=l,c.image.height=u,s[t]=c),(n.width!==a.width||a.height!==n.height)&&(h=!0,c.needsUpdate=!0,c.image.width=l,c.image.height=u),n.width=a.width,n.height=a.height,n.textures=o,n.depthTexture=c,n.depth=e.depthBuffer,n.stencil=e.stencilBuffer,n.renderTarget=e,n.sampleCount!==r&&(h=!0,c.needsUpdate=!0,n.sampleCount=r);const f={sampleCount:r};for(let d=0;d<o.length;d++){const p=o[d];h&&(p.needsUpdate=!0),this.updateTexture(p,f)}if(this.updateTexture(c,f),n.initialized!==!0){n.initialized=!0;const d=()=>{e.removeEventListener("dispose",d);for(let p=0;p<o.length;p++)this._destroyTexture(o[p]);this._destroyTexture(c),this.delete(e)};e.addEventListener("dispose",d)}}updateTexture(e,t={}){const n=this.get(e);if(n.initialized===!0&&n.version===e.version)return;const r=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(r&&n.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e)),e.isFramebufferTexture){const c=this.renderer.getRenderTarget();c?e.type=c.texture.type:e.type=gf}const{width:o,height:a,depth:l}=this.getSize(e);if(t.width=o,t.height=a,t.depth=l,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,o,a):1,r||e.isStorageTexture===!0)s.createSampler(e),s.createTexture(e,t),n.generation=e.version;else if(n.initialized!==!0&&s.createSampler(e),e.version>0){const c=e.image;if(c===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(c.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const h=[];for(const f of e.images)h.push(f);t.images=h}else t.image=c;(n.isDefaultTexture===void 0||n.isDefaultTexture===!0)&&(s.createTexture(e,t),n.isDefaultTexture=!1,n.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,t),t.needsMipmaps&&e.mipmaps.length===0&&s.generateMipmaps(e)}}else s.createDefaultTexture(e),n.isDefaultTexture=!0,n.generation=e.version;if(n.initialized!==!0){n.initialized=!0,n.generation=e.version,this.info.memory.textures++;const u=()=>{e.removeEventListener("dispose",u),this._destroyTexture(e),this.info.memory.textures--};e.addEventListener("dispose",u)}n.version=e.version}getSize(e,t=kke){let n=e.images?e.images[0]:e.image;return n?(n.image!==void 0&&(n=n.image),t.width=n.width,t.height=n.height,t.depth=e.isCubeTexture?6:n.depth||1):t.width=t.height=t.depth=1,t}getMipLevels(e,t,n){let r;return e.isCompressedTexture?r=e.mipmaps.length:r=Math.floor(Math.log2(Math.max(t,n)))+1,r}needsMipmaps(e){return this.isEnvironmentTexture(e)?!0:e.isCompressedTexture===!0||e.minFilter!==uo&&e.minFilter!==sl}isEnvironmentTexture(e){const t=e.mapping;return t===Mb||t===Tb||t===tm||t===Ny}_destroyTexture(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}class jF extends Di{constructor(e,t,n,r=1){super(e,t,n),this.a=r}set(e,t,n,r=1){return this.a=r,super.set(e,t,n)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}const sc=new jF;class zke extends Zp{constructor(e,t){super(),this.renderer=e,this.nodes=t}update(e,t,n){const r=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let o=!1;if(s===null)r._clearColor.getRGB(sc,Bu),sc.a=r._clearColor.a;else if(s.isColor===!0)s.getRGB(sc,Bu),sc.a=1,o=!0;else if(s.isNode===!0){const a=this.get(e),l=s;sc.copy(r._clearColor);let u=a.backgroundMesh;if(u===void 0){const h=PF(Vn(l).mul(Tj),{getUV:()=>n5,getTextureLevel:()=>qFe});let f=VN();f=f.setZ(f.w);const d=new gs;d.name="Background.material",d.side=Jf,d.depthTest=!1,d.depthWrite=!1,d.fog=!1,d.lights=!1,d.vertexNode=f,d.colorNode=h,a.backgroundMeshNode=h,a.backgroundMesh=u=new rm(new gF(1,32,32),d),u.frustumCulled=!1,u.name="Background.mesh",u.onBeforeRender=function(p,v,b){this.matrixWorld.copyPosition(b.matrixWorld)}}const c=l.getCacheKey();a.backgroundCacheKey!==c&&(a.backgroundMeshNode.node=Vn(l).mul(Tj),a.backgroundMeshNode.needsUpdate=!0,u.material.needsUpdate=!0,a.backgroundCacheKey=c),t.unshift(u,u.geometry,u.material,0,0,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);if(r.autoClear===!0||o===!0){sc.multiplyScalar(sc.a);const a=n.clearColorValue;a.r=sc.r,a.g=sc.g,a.b=sc.b,a.a=sc.a,n.depthClearValue=r._clearDepth,n.stencilClearValue=r._clearStencil,n.clearColor=r.autoClearColor===!0,n.clearDepth=r.autoClearDepth===!0,n.clearStencil=r.autoClearStencil===!0}else n.clearColor=!1,n.clearDepth=!1,n.clearStencil=!1}}class Gke{constructor(e,t,n,r,s,o,a,l,u,c=[]){this.vertexShader=e,this.fragmentShader=t,this.computeShader=n,this.transforms=c,this.nodeAttributes=r,this.bindings=s,this.updateNodes=o,this.updateBeforeNodes=a,this.updateAfterNodes=l,this.monitor=u,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)if(t.bindings[0].groupNode.shared!==!0){const r=new KN(t.name,[],t.index,t);e.push(r);for(const s of t.bindings)r.bindings.push(s.clone())}else e.push(t);return e}}const Ij=new WeakMap;class Hke extends Zp{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new Mj,this.nodeBuilderCache=new Map,this.callHashCache=new Xf,this.groupsData=new Xf}updateGroup(e){const t=e.groupNode,n=t.name;if(n===Zne.name)return!0;if(n===hi.name){const o=this.get(e),a=this.nodeFrame.renderId;return o.renderId!==a?(o.renderId=a,!0):!1}if(n===gIe.name){const o=this.get(e),a=this.nodeFrame.frameId;return o.frameId!==a?(o.frameId=a,!0):!1}const r=[t,e];let s=this.groupsData.get(r);return s===void 0&&this.groupsData.set(r,s={}),s.version!==t.version?(s.version=t.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const{nodeBuilderCache:r}=this,s=this.getForRenderCacheKey(e);if(n=r.get(s),n===void 0){const o=this.backend.createNodeBuilder(e.object,this.renderer);o.scene=e.scene,o.material=e.material,o.camera=e.camera,o.context.material=e.material,o.lightsNode=e.lightsNode,o.environmentNode=this.getEnvironmentNode(e.scene),o.fogNode=this.getFogNode(e.scene),o.clippingContext=e.clippingContext,o.build(),n=this._createNodeBuilderState(o),r.set(s,n)}n.usedTimes++,t.nodeBuilderState=n}return n}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const r=this.backend.createNodeBuilder(e,this.renderer);r.build(),n=this._createNodeBuilderState(r),t.nodeBuilderState=n}return n}_createNodeBuilderState(e){return new Gke(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.monitor,e.transforms)}getEnvironmentNode(e){return e.environmentNode||this.get(e).environmentNode||null}getBackgroundNode(e){return e.backgroundNode||this.get(e).backgroundNode||null}getFogNode(e){return e.fogNode||this.get(e).fogNode||null}getCacheKey(e,t){const n=[e,t],r=this.renderer.info.calls;let s=this.callHashCache.get(n);if(s===void 0||s.callId!==r){const o=this.getEnvironmentNode(e),a=this.getFogNode(e),l=[];t&&l.push(t.getCacheKey(!0)),o&&l.push(o.getCacheKey()),a&&l.push(a.getCacheKey()),l.push(this.renderer.shadowMap.enabled?1:0),s={callId:r,cacheKey:qne(l)},this.callHashCache.set(n,s)}return s.cacheKey}updateScene(e){this.updateEnvironment(e),this.updateFog(e),this.updateBackground(e)}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const t=this.get(e),n=e.background;if(n){const r=e.backgroundBlurriness===0&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&t.backgroundBlurriness===0;if(t.background!==n||r){let s=null;if(n.isCubeTexture===!0||n.mapping===Mb||n.mapping===Tb||n.mapping===pN)if(e.backgroundBlurriness>0||n.mapping===pN)s=Qie(n,n5);else{let o;n.isCubeTexture===!0?o=zx(n):o=Hr(n),s=Gie(o)}else n.isTexture===!0?s=Hr(n,Hx.flipY()).setUpdateMatrix(!0):n.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",n);t.backgroundNode=s,t.background=n,t.backgroundBlurriness=e.backgroundBlurriness}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}updateFog(e){const t=this.get(e),n=e.fog;if(n){if(t.fog!==n){let r=null;if(n.isFogExp2){const s=wr("color","color",n).setGroup(hi),o=wr("density","float",n).setGroup(hi);r=QFe(s,o)}else if(n.isFog){const s=wr("color","color",n).setGroup(hi),o=wr("near","float",n).setGroup(hi),a=wr("far","float",n).setGroup(hi);r=XFe(s,o,a)}else console.error("WebGPUNodes: Unsupported fog configuration.",n);t.fogNode=r,t.fog=n}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),n=e.environment;if(n){if(t.environment!==n){let r=null;n.isCubeTexture===!0?r=zx(n):n.isTexture===!0?r=Hr(n):console.error("Nodes: Unsupported environment configuration.",n),t.environmentNode=r,t.environment=n}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e=this.renderer,t=null,n=null,r=null,s=null){const o=this.nodeFrame;return o.renderer=e,o.scene=t,o.object=n,o.camera=r,o.material=s,o}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace}hasOutputChange(e){return Ij.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const t=this.renderer,n=this.getOutputCacheKey(),r=Hr(e,Hx).renderOutput(t.toneMapping,t.currentColorSpace);return Ij.set(e,n),r}updateBefore(e){const t=e.getNodeBuilderState();for(const n of t.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(n)}updateAfter(e){const t=e.getNodeBuilderState();for(const n of t.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(n)}updateForCompute(e){const t=this.getNodeFrame(),n=this.getForCompute(e);for(const r of n.updateNodes)t.updateNode(r)}updateForRender(e){const t=this.getNodeFrameForRender(e),n=e.getNodeBuilderState();for(const r of n.updateNodes)t.updateNode(r)}needsRefresh(e){const t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}dispose(){super.dispose(),this.nodeFrame=new Mj,this.nodeBuilderCache=new Map}}class qke{constructor(e,t){this.scene=e,this.camera=t}clone(){return Object.assign(new this.constructor,this)}}class Vke{constructor(){this.lists=new Xf}get(e,t){const n=this.lists,r=[e,t];let s=n.get(r);return s===void 0&&(s=new qke(e,t),n.set(r,s)),s}dispose(){this.lists=new Xf}}class cre{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map,this.colorSpaceNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let t=null;const n=this.getMaterialNodeClass(e.type);if(n!==null){t=new n;for(const r in e)t[r]=e[r]}return t}addColorSpace(e,t){this.addType(e,t,this.colorSpaceNodes)}getColorSpaceFunction(e){return this.colorSpaceNodes.get(e)||null}addToneMapping(e,t){this.addType(e,t,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,t){this.addType(e,t.name,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,t){this.addClass(e,t,this.lightNodes)}addType(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t=="function"||typeof t=="object")throw new Error(`Base class ${t} is not a class.`);n.set(t,e)}addClass(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t!="function")throw new Error(`Base class ${t.name} is not a class.`);n.set(t,e)}}const Nj=new Rne,Z3=new gi,l6=new Ni,u6=new Ine,eM=new Rr,zg=new Ni;class jke{constructor(e,t={}){this.isRenderer=!0;const{logarithmicDepthBuffer:n=!1,alpha:r=!0,depth:s=!0,stencil:o=!1,antialias:a=!1,samples:l=0,getFallback:u=null}=t;this.domElement=e.getDomElement(),this.backend=e,this.samples=l||a===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=r,this.logarithmicDepthBuffer=n,this.outputColorSpace=pn,this.toneMapping=$1,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=o,this.clippingPlanes=[],this.info=new sFe,this.nodes={library:new cre,modelViewMatrix:null,modelNormalViewMatrix:null},this._getFallback=u,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new Ni(0,0,this._width,this._height),this._scissor=new Ni(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new nre(new gs),this._quad.material.type="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const c=this.alpha===!0?0:1;this._clearColor=new jF(0,0,0,c),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:WPe},this.xr={enabled:!1},this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(h,f,d)=>{await this.compileAsync(h,f);const p=this._renderLists.get(h,f),v=this._renderContexts.get(h,f,this._renderTarget),b=h.overrideMaterial||d.material,_=this._objects.get(d,b,h,f,p.lightsNode,v),{fragmentShader:M,vertexShader:E}=_.getNodeBuilderState();return{fragmentShader:M,vertexShader:E}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{let n=this.backend;try{await n.init(this)}catch(r){if(this._getFallback!==null)try{this.backend=n=this._getFallback(r),await n.init(this)}catch(s){t(s);return}else{t(r);return}}this._nodes=new Hke(this,n),this._animation=new YOe(this._nodes,this.info),this._attributes=new nFe(n),this._background=new zke(this,this._nodes),this._geometries=new rFe(this._attributes,this.info),this._textures=new Uke(this,n,this.info),this._pipelines=new uFe(n,this._nodes),this._bindings=new cFe(n,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new ZOe(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new Dke,this._bundles=new Vke,this._renderContexts=new Fke,this._initialized=!0,e()}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,t,n=null){this._initialized===!1&&await this.init();const r=this._nodes.nodeFrame,s=r.renderId,o=this._currentRenderContext,a=this._currentRenderObjectFunction,l=this._compilationPromises,u=e.isScene===!0?e:Nj;n===null&&(n=e);const c=this._renderTarget,h=this._renderContexts.get(n,t,c),f=this._activeMipmapLevel,d=[];this._currentRenderContext=h,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=d,r.renderId++,r.update(),h.depth=this.depth,h.stencil=this.stencil,h.clippingContext||(h.clippingContext=new QN),h.clippingContext.updateGlobal(this,t),u.onBeforeRender(this,e,t,c);const p=this._renderLists.get(e,t);if(p.begin(),this._projectObject(e,t,0,p),n!==e&&n.traverseVisible(function(M){M.isLight&&M.layers.test(t.layers)&&p.pushLight(M)}),p.finish(),c!==null){this._textures.updateRenderTarget(c,f);const M=this._textures.get(c);h.textures=M.textures,h.depthTexture=M.depthTexture}else h.textures=null,h.depthTexture=null;this._nodes.updateScene(u),this._background.update(u,p,h);const v=p.opaque,b=p.transparent,_=p.lightsNode;this.opaque===!0&&v.length>0&&this._renderObjects(v,t,u,_),this.transparent===!0&&b.length>0&&this._renderObjects(b,t,u,_),r.renderId=s,this._currentRenderContext=o,this._currentRenderObjectFunction=a,this._compilationPromises=l,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(d)}async renderAsync(e,t){this._initialized===!1&&await this.init();const n=this._renderScene(e,t);await this.backend.resolveTimestampAsync(n,"render")}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}_renderBundle(e,t,n){const{bundleGroup:r,camera:s,renderList:o}=e,a=this._currentRenderContext,l=this._bundles.get(r,s),u=this.backend.get(l);u.renderContexts===void 0&&(u.renderContexts=new Set);const c=r.version!==u.version,h=u.renderContexts.has(a)===!1||c;if(u.renderContexts.add(a),h){this.backend.beginBundle(a),(u.renderObjects===void 0||c)&&(u.renderObjects=[]),this._currentRenderBundle=l;const f=o.opaque;f.length>0&&this._renderObjects(f,s,t,n),this._currentRenderBundle=null,this.backend.finishBundle(a,l),u.version=r.version}else{const{renderObjects:f}=u;for(let d=0,p=f.length;d<p;d++){const v=f[d];this._nodes.needsRefresh(v)&&(this._nodes.updateBefore(v),this._nodes.updateForRender(v),this._bindings.updateForRender(v),this._nodes.updateAfter(v))}}this.backend.addBundle(a,l)}render(e,t){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,t);this._renderScene(e,t)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:t}=this;if(e!==$1===!1&&t!==Bu===!1)return null;const{width:s,height:o}=this.getDrawingBufferSize(Z3),{depth:a,stencil:l}=this;let u=this._frameBufferTarget;return u===null&&(u=new av(s,o,{depthBuffer:a,stencilBuffer:l,type:Ef,format:sv,colorSpace:Bu,generateMipmaps:!1,minFilter:sl,magFilter:sl,samples:this.samples}),u.isPostProcessingRenderTarget=!0,this._frameBufferTarget=u),u.depthBuffer=a,u.stencilBuffer=l,u.setSize(s,o),u.viewport.copy(this._viewport),u.scissor.copy(this._scissor),u.viewport.multiplyScalar(this._pixelRatio),u.scissor.multiplyScalar(this._pixelRatio),u.scissorTest=this._scissorTest,u}_renderScene(e,t,n=!0){const r=n?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,o=s.renderId,a=this._currentRenderContext,l=this._currentRenderObjectFunction,u=e.isScene===!0?e:Nj,c=this._renderTarget,h=this._activeCubeFace,f=this._activeMipmapLevel;let d;r!==null?(d=r,this.setRenderTarget(d)):d=c;const p=this._renderContexts.get(e,t,d);this._currentRenderContext=p,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls;const v=this.coordinateSystem;t.coordinateSystem!==v&&(t.coordinateSystem=v,t.updateProjectionMatrix()),e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld();let b=this._viewport,_=this._scissor,M=this._pixelRatio;d!==null&&(b=d.viewport,_=d.scissor,M=1),this.getDrawingBufferSize(Z3),l6.set(0,0,Z3.width,Z3.height);const E=b.minDepth===void 0?0:b.minDepth,R=b.maxDepth===void 0?1:b.maxDepth;p.viewportValue.copy(b).multiplyScalar(M).floor(),p.viewportValue.width>>=f,p.viewportValue.height>>=f,p.viewportValue.minDepth=E,p.viewportValue.maxDepth=R,p.viewport=p.viewportValue.equals(l6)===!1,p.scissorValue.copy(_).multiplyScalar(M).floor(),p.scissor=this._scissorTest&&p.scissorValue.equals(l6)===!1,p.scissorValue.width>>=f,p.scissorValue.height>>=f,p.clippingContext||(p.clippingContext=new QN),p.clippingContext.updateGlobal(this,t),u.onBeforeRender(this,e,t,d),eM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),u6.setFromProjectionMatrix(eM,v);const L=this._renderLists.get(e,t);if(L.begin(),this._projectObject(e,t,0,L),L.finish(),this.sortObjects===!0&&L.sort(this._opaqueSort,this._transparentSort),d!==null){this._textures.updateRenderTarget(d,f);const O=this._textures.get(d);p.textures=O.textures,p.depthTexture=O.depthTexture,p.width=O.width,p.height=O.height,p.renderTarget=d,p.depth=d.depthBuffer,p.stencil=d.stencilBuffer}else p.textures=null,p.depthTexture=null,p.width=this.domElement.width,p.height=this.domElement.height,p.depth=this.depth,p.stencil=this.stencil;p.width>>=f,p.height>>=f,p.activeCubeFace=h,p.activeMipmapLevel=f,p.occlusionQueryCount=L.occlusionQueryCount,this._nodes.updateScene(u),this._background.update(u,L,p),this.backend.beginRender(p);const{bundles:I,lightsNode:D,transparent:k,opaque:G}=L;if(I.length>0&&this._renderBundles(I,u,D),this.opaque===!0&&G.length>0&&this._renderObjects(G,t,u,D),this.transparent===!0&&k.length>0&&this._renderObjects(k,t,u,D),this.backend.finishRender(p),s.renderId=o,this._currentRenderContext=a,this._currentRenderObjectFunction=l,r!==null){this.setRenderTarget(c,h,f);const O=this._quad;this._nodes.hasOutputChange(d.texture)&&(O.material.fragmentNode=this._nodes.getOutputNode(d.texture),O.material.needsUpdate=!0),this._renderScene(O,O.camera,!1)}return u.onAfterRender(this,e,t,d),p}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio=e,this.setSize(this._width,this._height,!1)}setDrawingBufferSize(e,t,n){this._width=e,this._height=t,this._pixelRatio=n,this.domElement.width=Math.floor(e*n),this.domElement.height=Math.floor(t*n),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}setSize(e,t,n=!0){this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),n===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,n,r){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,t,n,r)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,n,r,s=0,o=1){const a=this._viewport;e.isVector4?a.copy(e):a.set(e,t,n,r),a.minDepth=s,a.maxDepth=o}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearColor.a=t}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,n=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,t,n);const r=this._renderTarget||this._getFrameBufferTarget();let s=null;if(r!==null&&(this._textures.updateRenderTarget(r),s=this._textures.get(r)),this.backend.clear(e,t,n,s),r!==null&&this._renderTarget===null){const o=this._quad;this._nodes.hasOutputChange(r.texture)&&(o.material.fragmentNode=this._nodes.getOutputNode(r.texture),o.material.needsUpdate=!0),this._renderScene(o,o.camera,!1)}}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,t=!0,n=!0){this._initialized===!1&&await this.init(),this.clear(e,t,n)}clearColorAsync(){return this.clearAsync(!0,!1,!1)}clearDepthAsync(){return this.clearAsync(!1,!0,!1)}clearStencilAsync(){return this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this._renderTarget!==null?$1:this.toneMapping}get currentColorSpace(){return this._renderTarget!==null?Bu:this.outputColorSpace}dispose(){this.info.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,n=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=n}getRenderTarget(){return this._renderTarget}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}async computeAsync(e){this._initialized===!1&&await this.init();const t=this._nodes.nodeFrame,n=t.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,t.renderId=this.info.calls;const r=this.backend,s=this._pipelines,o=this._bindings,a=this._nodes,l=Array.isArray(e)?e:[e];if(l[0]===void 0||l[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");r.beginCompute(e);for(const u of l){if(s.has(u)===!1){const f=()=>{u.removeEventListener("dispose",f),s.delete(u),o.delete(u),a.delete(u)};u.addEventListener("dispose",f),u.onInit({renderer:this})}a.updateForCompute(u),o.updateForCompute(u);const c=o.getForCompute(u),h=s.getForCompute(u,c);r.compute(e,u,c,h)}r.finishCompute(e),await this.backend.resolveTimestampAsync(e,"compute"),t.renderId=n}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}copyFramebufferToTexture(e,t=null){const n=this._currentRenderContext;this._textures.updateTexture(e),t=t===null?zg.set(0,0,e.image.width,e.image.height):t,this.backend.copyFramebufferToTexture(e,n,t)}copyTextureToTexture(e,t,n=null,r=null,s=0){this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,n,r,s)}readRenderTargetPixelsAsync(e,t,n,r,s,o=0,a=0){return this.backend.copyTextureToBuffer(e.textures[o],t,n,r,s,a)}_projectObject(e,t,n,r){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder;else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)r.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||u6.intersectsSprite(e)){this.sortObjects===!0&&zg.setFromMatrixPosition(e.matrixWorld).applyMatrix4(eM);const{geometry:a,material:l}=e;l.visible&&r.push(e,a,l,n,zg.z,null)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||u6.intersectsObject(e))){const{geometry:a,material:l}=e;if(this.sortObjects===!0&&(a.boundingSphere===null&&a.computeBoundingSphere(),zg.copy(a.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(eM)),Array.isArray(l)){const u=a.groups;for(let c=0,h=u.length;c<h;c++){const f=u[c],d=l[f.materialIndex];d&&d.visible&&r.push(e,a,d,n,zg.z,f)}}else l.visible&&r.push(e,a,l,n,zg.z,null)}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const a=r;r=this._renderLists.get(e,t),r.begin(),a.pushBundle({bundleGroup:e,camera:t,renderList:r}),r.finish()}const o=e.children;for(let a=0,l=o.length;a<l;a++)this._projectObject(o[a],t,n,r)}_renderBundles(e,t,n){for(const r of e)this._renderBundle(r,t,n)}_renderObjects(e,t,n,r){for(let s=0,o=e.length;s<o;s++){const a=e[s],{object:l,geometry:u,material:c,group:h}=a;if(t.isArrayCamera){const f=t.cameras;for(let d=0,p=f.length;d<p;d++){const v=f[d];if(l.layers.test(v.layers)){const b=v.viewport,_=b.minDepth===void 0?0:b.minDepth,M=b.maxDepth===void 0?1:b.maxDepth,E=this._currentRenderContext.viewportValue;E.copy(b).multiplyScalar(this._pixelRatio).floor(),E.minDepth=_,E.maxDepth=M,this.backend.updateViewport(this._currentRenderContext),this._currentRenderObjectFunction(l,n,v,u,c,h,r)}}}else this._currentRenderObjectFunction(l,n,t,u,c,h,r)}}renderObject(e,t,n,r,s,o,a){let l,u,c;if(e.onBeforeRender(this,t,n,r,s,o),t.overrideMaterial!==null){const h=t.overrideMaterial;s.positionNode&&s.positionNode.isNode&&(l=h.positionNode,h.positionNode=s.positionNode),h.isShadowNodeMaterial&&(h.side=s.shadowSide===null?s.side:s.shadowSide,s.depthNode&&s.depthNode.isNode&&(c=h.depthNode,h.depthNode=s.depthNode),s.shadowNode&&s.shadowNode.isNode&&(u=h.fragmentNode,h.fragmentNode=s.shadowNode),this.localClippingEnabled&&(s.clipShadows?(h.clippingPlanes!==s.clippingPlanes&&(h.clippingPlanes=s.clippingPlanes,h.needsUpdate=!0),h.clipIntersection!==s.clipIntersection&&(h.clipIntersection=s.clipIntersection)):Array.isArray(h.clippingPlanes)&&(h.clippingPlanes=null,h.needsUpdate=!0))),s=h}s.transparent===!0&&s.side===rC&&s.forceSinglePass===!1?(s.side=Jf,this._handleObjectFunction(e,s,t,n,a,o,"backSide"),s.side=Dx,this._handleObjectFunction(e,s,t,n,a,o),s.side=rC):this._handleObjectFunction(e,s,t,n,a,o),l!==void 0&&(t.overrideMaterial.positionNode=l),c!==void 0&&(t.overrideMaterial.depthNode=c),u!==void 0&&(t.overrideMaterial.fragmentNode=u),e.onAfterRender(this,t,n,r,s,o)}_renderObjectDirect(e,t,n,r,s,o,a){const l=this._objects.get(e,t,n,r,s,this._currentRenderContext,a);l.drawRange=e.geometry.drawRange,l.group=o;const u=this._nodes.needsRefresh(l);u&&(this._nodes.updateBefore(l),this._geometries.updateForRender(l),this._nodes.updateForRender(l),this._bindings.updateForRender(l)),this._pipelines.updateForRender(l),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(l),l.bundle=this._currentRenderBundle.scene),this.backend.draw(l,this.info),u&&this._nodes.updateAfter(l)}_createObjectPipeline(e,t,n,r,s,o){const a=this._objects.get(e,t,n,r,s,this._currentRenderContext,o);this._nodes.updateBefore(a),this._geometries.updateForRender(a),this._nodes.updateForRender(a),this._bindings.updateForRender(a),this._pipelines.getForRender(a,this._compilationPromises),this._nodes.updateAfter(a)}get compute(){return this.computeAsync}get compile(){return this.compileAsync}}class $F{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function $ke(i){return i+(ip-i%ip)%ip}class hre extends $F{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){return $ke(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class fre extends hre{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}let Wke=0;class dre extends fre{constructor(e,t){super("UniformBuffer_"+Wke++,e?e.value:null),this.nodeUniform=e,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class Xke extends fre{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){let e=0;for(let t=0,n=this.uniforms.length;t<n;t++){const r=this.uniforms[t],{boundary:s,itemSize:o}=r,a=e%ip,l=ip-a;a!==0&&l-s<0?e+=ip-a:a%s!==0&&(e+=a%s),r.offset=e/this.bytesPerElement,e+=o*this.bytesPerElement}return Math.ceil(e/ip)*ip}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset;if(n[s]!==r){const o=this.buffer;o[s]=n[s]=r,t=!0}return t}updateVector2(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset;if(n[s+0]!==r.x||n[s+1]!==r.y){const o=this.buffer;o[s+0]=n[s+0]=r.x,o[s+1]=n[s+1]=r.y,t=!0}return t}updateVector3(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset;if(n[s+0]!==r.x||n[s+1]!==r.y||n[s+2]!==r.z){const o=this.buffer;o[s+0]=n[s+0]=r.x,o[s+1]=n[s+1]=r.y,o[s+2]=n[s+2]=r.z,t=!0}return t}updateVector4(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset;if(n[s+0]!==r.x||n[s+1]!==r.y||n[s+2]!==r.z||n[s+4]!==r.w){const o=this.buffer;o[s+0]=n[s+0]=r.x,o[s+1]=n[s+1]=r.y,o[s+2]=n[s+2]=r.z,o[s+3]=n[s+3]=r.w,t=!0}return t}updateColor(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset;if(n[s+0]!==r.r||n[s+1]!==r.g||n[s+2]!==r.b){const o=this.buffer;o[s+0]=n[s+0]=r.r,o[s+1]=n[s+1]=r.g,o[s+2]=n[s+2]=r.b,t=!0}return t}updateMatrix3(e){let t=!1;const n=this.values,r=e.getValue().elements,s=e.offset;if(n[s+0]!==r[0]||n[s+1]!==r[1]||n[s+2]!==r[2]||n[s+4]!==r[3]||n[s+5]!==r[4]||n[s+6]!==r[5]||n[s+8]!==r[6]||n[s+9]!==r[7]||n[s+10]!==r[8]){const o=this.buffer;o[s+0]=n[s+0]=r[0],o[s+1]=n[s+1]=r[1],o[s+2]=n[s+2]=r[2],o[s+4]=n[s+4]=r[3],o[s+5]=n[s+5]=r[4],o[s+6]=n[s+6]=r[5],o[s+8]=n[s+8]=r[6],o[s+9]=n[s+9]=r[7],o[s+10]=n[s+10]=r[8],t=!0}return t}updateMatrix4(e){let t=!1;const n=this.values,r=e.getValue().elements,s=e.offset;return Qke(n,r,s)===!1&&(this.buffer.set(r,s),Yke(n,r,s),t=!0),t}}function Yke(i,e,t){for(let n=0,r=e.length;n<r;n++)i[t+n]=e[n]}function Qke(i,e,t){for(let n=0,r=e.length;n<r;n++)if(i[t+n]!==e[n])return!1;return!0}let Kke=0;class pre extends Xke{constructor(e,t){super(e),this.id=Kke++,this.groupNode=t,this.isNodeUniformsGroup=!0}getNodes(){const e=[];for(const t of this.uniforms){const n=t.nodeUniform.node;if(!n)throw new Error("NodeUniformsGroup: Uniform has no node.");e.push(n)}return e}}let Jke=0;class Zke extends $F{constructor(e,t){super(e),this.id=Jke++,this.texture=t,this.version=t?t.version:0,this.store=!1,this.generation=null,this.isSampledTexture=!0}needsBindingsUpdate(e){const{texture:t}=this;return e!==this.generation?(this.generation=e,!0):t.isVideoTexture}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}}class a5 extends Zke{constructor(e,t,n,r=null){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n,this.access=r}needsBindingsUpdate(e){return this.textureNode.value!==this.texture||super.needsBindingsUpdate(e)}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class Are extends a5{constructor(e,t,n,r){super(e,t,n,r),this.isSampledCubeTexture=!0}}class mre extends a5{constructor(e,t,n,r){super(e,t,n,r),this.isSampledTexture3D=!0}}const e9e={atan2:"atan",textureDimensions:"textureSize",equals:"equal"},t9e={low:"lowp",medium:"mediump",high:"highp"},Dj={swizzleAssign:!0,storageBuffer:!1},Lj=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
`;class n9e extends tre{constructor(e,t){super(e,t,new Pke),this.uniformGroups={},this.transforms=[],this.extensions={},this.useComparisonMethod=!0}needsColorSpaceToLinearSRGB(e){return e.isVideoTexture===!0&&e.colorSpace!==nm}getMethod(e){return e9e[e]||e}getOutputStructName(){return""}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),r=[];for(const o of t.inputs)r.push(this.getType(o.type)+" "+o.name);return`${this.getType(t.type)} ${t.name}( ${r.join(", ")} ) {

	${n.vars}

${n.code}
	return ${n.result};

}`}setupPBO(e){const t=e.value;if(t.pbo===void 0){const n=t.array,r=t.count*t.itemSize,{itemSize:s}=t,o=t.array.constructor.name.toLowerCase().includes("int");let a=o?lF:aF;s===2?a=o?uF:Lx:s===3?a=o?u6e:oF:s===4&&(a=o?cF:sv);const l={Float32Array:Dl,Uint8Array:gf,Uint16Array:b1,Uint32Array:ro,Int8Array:C_,Int16Array:R_,Int32Array:da,Uint8ClampedArray:gf},u=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(r/s))));let c=Math.ceil(r/s/u);u*c*s<r&&c++;const h=u*c*s,f=new n.constructor(h);f.set(n,0),t.array=f;const d=new gBe(t.array,u,c,a,l[t.array.constructor.name]||Dl);d.needsUpdate=!0,d.isPBOTexture=!0;const p=new Db(d,null,null);p.setPrecision("high"),t.pboNode=p,t.pbo=p.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.label)}}getPropertyName(e,t=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?t.charAt(0)+"_"+e.name:super.getPropertyName(e,t)}generatePBO(e){const{node:t,indexNode:n}=e,r=t.value;if(this.renderer.backend.has(r)){const c=this.renderer.backend.get(r);c.pbo=r.pbo}const s=this.getUniformFromNode(r.pboNode,"texture",this.shaderStage,this.context.label),o=this.getPropertyName(s);this.increaseUsage(n);const a=n.build(this,"uint"),l=this.getDataFromNode(e);let u=l.propertyName;if(u===void 0){const c=this.getVarFromNode(e);u=this.getPropertyName(c);const h=this.getDataFromNode(t);let f=h.propertySizeName;f===void 0&&(f=u+"Size",this.getVarFromNode(t,f,"uint"),this.addLineFlowCode(`${f} = uint( textureSize( ${o}, 0 ).x )`,e),h.propertySizeName=f);const{itemSize:d}=r,p="."+lv.join("").slice(0,d),v=`ivec2(${a} % ${f}, ${a} / ${f})`,b=this.generateTextureLoad(null,o,v,null,"0");let _="vec4";r.pbo.type===ro?_="uvec4":r.pbo.type===da&&(_="ivec4"),this.addLineFlowCode(`${u} = ${_}(${b})${p}`,e),l.propertyName=u}return u}generateTextureLoad(e,t,n,r,s="0"){return r?`texelFetch( ${t}, ivec3( ${n}, ${r} ), ${s} )`:`texelFetch( ${t}, ${n}, ${s} )`}generateTexture(e,t,n,r){return e.isDepthTexture?`texture( ${t}, ${n} ).x`:(r&&(n=`vec3( ${n}, ${r} )`),`texture( ${t}, ${n} )`)}generateTextureLevel(e,t,n,r){return`textureLod( ${t}, ${n}, ${r} )`}generateTextureBias(e,t,n,r){return`texture( ${t}, ${n}, ${r} )`}generateTextureGrad(e,t,n,r){return`textureGrad( ${t}, ${n}, ${r[0]}, ${r[1]} )`}generateTextureCompare(e,t,n,r,s,o=this.shaderStage){if(o==="fragment")return`texture( ${t}, vec3( ${n}, ${r} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const r of n)t.push(`${this.getVar(r.type,r.name)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],n=[],r={};for(const o of t){let a=null,l=!1;if(o.type==="texture"){const c=o.node.value;let h="";c.isDataTexture===!0&&(c.type===ro?h="u":c.type===da&&(h="i")),c.compareFunction?a=`sampler2DShadow ${o.name};`:c.isDataArrayTexture===!0||c.isCompressedArrayTexture===!0?a=`${h}sampler2DArray ${o.name};`:a=`${h}sampler2D ${o.name};`}else if(o.type==="cubeTexture")a=`samplerCube ${o.name};`;else if(o.type==="texture3D")a=`sampler3D ${o.name};`;else if(o.type==="buffer"){const c=o.node,h=this.getType(c.bufferType),f=c.bufferCount,d=f>0?f:"";a=`${c.name} {
	${h} ${o.name}[${d}];
};
`}else a=`${this.getVectorType(o.type)} ${this.getPropertyName(o,e)};`,l=!0;const u=o.node.precision;if(u!==null&&(a=t9e[u]+" "+a),l){a="	"+a;const c=o.groupNode.name;(r[c]||(r[c]=[])).push(a)}else a="uniform "+a,n.push(a)}let s="";for(const o in r){const a=r[o];s+=this._getGLSLUniformStruct(e+"_"+o,a.join(`
`))+`
`}return s+=n.join(`
`),s}getTypeFromAttribute(e){let t=super.getTypeFromAttribute(e);if(/^[iu]/.test(t)&&e.gpuType!==da){let n=e;e.isInterleavedBufferAttribute&&(n=e.data);const r=n.array;r instanceof Uint32Array||r instanceof Int32Array||(t=t.slice(1))}return t}getAttributes(e){let t="";if(e==="vertex"||e==="compute"){const n=this.getAttributesArray();let r=0;for(const s of n)t+=`layout( location = ${r++} ) in ${s.type} ${s.name};
`}return t}getStructMembers(e){const t=[],n=e.getMemberTypes();for(let r=0;r<n.length;r++){const s=n[r];t.push(`layout( location = ${r} ) out ${s} m${r};`)}return t.join(`
`)}getStructs(e){const t=[],n=this.structs[e];if(n.length===0)return`layout( location = 0 ) out vec4 fragColor;
`;for(let r=0,s=n.length;r<s;r++){const o=n[r];let a=`
`;a+=this.getStructMembers(o),a+=`
`,t.push(a)}return t.join(`

`)}getVaryings(e){let t="";const n=this.varyings;if(e==="vertex"||e==="compute")for(const r of n){e==="compute"&&(r.needsInterpolation=!0);const s=r.type,o=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${o}${r.needsInterpolation?"out":"/*out*/"} ${s} ${r.name};
`}else if(e==="fragment"){for(const r of n)if(r.needsInterpolation){const s=r.type,o=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${o}in ${s} ${r.name};
`}}return t}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((n,r)=>n*r,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,t,n=this.shaderStage){const r=this.extensions[n]||(this.extensions[n]=new Map);r.has(e)===!1&&r.set(e,{name:e,behavior:t})}getExtensions(e){const t=[];if(e==="vertex"){const r=this.renderer.backend.extensions;this.object.isBatchedMesh&&r.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const n=this.extensions[e];if(n!==void 0)for(const{name:r,behavior:s}of n.values())t.push(`#extension ${r} : ${s}`);return t.join(`
`)}isAvailable(e){let t=Dj[e];if(t===void 0){if(e==="float32Filterable"){const n=this.renderer.backend.extensions;n.has("OES_texture_float_linear")?(n.get("OES_texture_float_linear"),t=!0):t=!1}Dj[e]=t}return t}isFlipY(){return!0}registerTransform(e,t){this.transforms.push({varyingName:e,attributeNode:t})}getTransforms(){const e=this.transforms;let t="";for(let n=0;n<e.length;n++){const r=e[n],s=this.getPropertyName(r.attributeNode);t+=`${r.varyingName} = ${s};
	`}return t}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions 
${e.extensions}

// precision
${Lj}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// precision
${Lj}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){let n=`// code

`;n+=this.flowCode[t];const r=this.flowNodes[t],s=r[r.length-1];for(const a of r){const l=this.getFlowData(a),u=a.name;u&&(n.length>0&&(n+=`
`),n+=`	// flow -> ${u}
	`),n+=`${l.code}
	`,a===s&&t!=="compute"&&(n+=`// result
	`,t==="vertex"?(n+="gl_Position = ",n+=`${l.result};`):t==="fragment"&&(a.outputNode.isOutputStructNode||(n+="fragColor = ",n+=`${l.result};`)))}const o=e[t];o.extensions=this.getExtensions(t),o.uniforms=this.getUniforms(t),o.attributes=this.getAttributes(t),o.varyings=this.getVaryings(t),o.vars=this.getVars(t),o.structs=this.getStructs(t),o.codes=this.getCodes(t),o.transforms=this.getTransforms(t),o.flow=n}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,t,n,r=null){const s=super.getUniformFromNode(e,t,n,r),o=this.getDataFromNode(e,n,this.globalCache);let a=o.uniformGPU;if(a===void 0){const l=e.groupNode,u=l.name,c=this.getBindGroupArray(u,n);if(t==="texture")a=new a5(s.name,s.node,l),c.push(a);else if(t==="cubeTexture")a=new Are(s.name,s.node,l),c.push(a);else if(t==="texture3D")a=new mre(s.name,s.node,l),c.push(a);else if(t==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const h=new dre(e,l);h.name=e.name,c.push(h),a=h}else{const h=this.uniformGroups[n]||(this.uniformGroups[n]={});let f=h[u];f===void 0&&(f=new pre(n+"_"+u,l),h[u]=f,c.push(f)),a=this.getNodeUniform(s,t),f.addUniform(a)}o.uniformGPU=a}return s}}let c6=null,h6=null,Gg=null;class gre{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null}async init(e){this.renderer=e}begin(){}finish(){}draw(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}createRenderPipeline(){}createComputePipeline(){}destroyPipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}createDefaultTexture(){}createTexture(){}copyTextureToBuffer(){}createAttribute(){}createIndexAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}resolveTimestampAsync(){}hasFeatureAsync(){}hasFeature(){}getInstanceCount(e){const{object:t,geometry:n}=e;return n.isInstancedBufferGeometry?n.instanceCount:t.count>1?t.count:1}getDrawingBufferSize(){return c6=c6||new gi,this.renderer.getDrawingBufferSize(c6)}getScissor(){return h6=h6||new Ni,this.renderer.getScissor(h6)}setScissorTest(){}getClearColor(){const e=this.renderer;return Gg=Gg||new jF,e.getClearColor(Gg),Gg.getRGB(Gg,this.renderer.currentColorSpace),Gg}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:j6e(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${q4} webgpu`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}}let i9e=0;class r9e{constructor(e,t){this.buffers=[e.bufferGPU,t],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class s9e{constructor(e){this.backend=e}createAttribute(e,t){const n=this.backend,{gl:r}=n,s=e.array,o=e.usage||r.STATIC_DRAW,a=e.isInterleavedBufferAttribute?e.data:e,l=n.get(a);let u=l.bufferGPU;u===void 0&&(u=this._createBuffer(r,t,s,o),l.bufferGPU=u,l.bufferType=t,l.version=a.version);let c;if(s instanceof Float32Array)c=r.FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?c=r.HALF_FLOAT:c=r.UNSIGNED_SHORT;else if(s instanceof Int16Array)c=r.SHORT;else if(s instanceof Uint32Array)c=r.UNSIGNED_INT;else if(s instanceof Int32Array)c=r.INT;else if(s instanceof Int8Array)c=r.BYTE;else if(s instanceof Uint8Array)c=r.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)c=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let h={bufferGPU:u,bufferType:t,type:c,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:c===r.INT||c===r.UNSIGNED_INT||e.gpuType===da,id:i9e++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const f=this._createBuffer(r,t,s,o);h=new r9e(h,f)}n.set(e,h)}updateAttribute(e){const t=this.backend,{gl:n}=t,r=e.array,s=e.isInterleavedBufferAttribute?e.data:e,o=t.get(s),a=o.bufferType,l=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(n.bindBuffer(a,o.bufferGPU),l.length===0)n.bufferSubData(a,0,r);else{for(let u=0,c=l.length;u<c;u++){const h=l[u];n.bufferSubData(a,h.start*r.BYTES_PER_ELEMENT,r,h.start,h.count)}s.clearUpdateRanges()}n.bindBuffer(a,null),o.version=s.version}destroyAttribute(e){const t=this.backend,{gl:n}=t;e.isInterleavedBufferAttribute&&t.delete(e.data);const r=t.get(e);n.deleteBuffer(r.bufferGPU),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,{gl:n}=t,r=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=t.get(r),o=e.array,a=o.byteLength;n.bindBuffer(n.COPY_READ_BUFFER,s);const l=n.createBuffer();n.bindBuffer(n.COPY_WRITE_BUFFER,l),n.bufferData(n.COPY_WRITE_BUFFER,a,n.STREAM_READ),n.copyBufferSubData(n.COPY_READ_BUFFER,n.COPY_WRITE_BUFFER,0,0,a),await t.utils._clientWaitAsync();const u=new e.array.constructor(o.length);return n.bindBuffer(n.COPY_WRITE_BUFFER,l),n.getBufferSubData(n.COPY_WRITE_BUFFER,0,u),n.deleteBuffer(l),n.bindBuffer(n.COPY_READ_BUFFER,null),n.bindBuffer(n.COPY_WRITE_BUFFER,null),u.buffer}_createBuffer(e,t,n,r){const s=e.createBuffer();return e.bindBuffer(t,s),e.bufferData(t,n,r),e.bindBuffer(t,null),s}}let Oj=!1,f6,L2;class o9e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},Oj===!1&&(this._init(this.gl),Oj=!0)}_init(e){f6={[tp]:e.FUNC_ADD,[Wte]:e.FUNC_SUBTRACT,[Xte]:e.FUNC_REVERSE_SUBTRACT},L2={[Yte]:e.ZERO,[Qte]:e.ONE,[Kte]:e.SRC_COLOR,[lC]:e.SRC_ALPHA,[ine]:e.SRC_ALPHA_SATURATE,[tne]:e.DST_COLOR,[Zte]:e.DST_ALPHA,[Jte]:e.ONE_MINUS_SRC_COLOR,[uC]:e.ONE_MINUS_SRC_ALPHA,[nne]:e.ONE_MINUS_DST_COLOR,[ene]:e.ONE_MINUS_DST_ALPHA}}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==VPe?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===jPe?t.cullFace(t.BACK):e===$Pe?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:t,gl:n}=this;e!==t&&(n.lineWidth(e),this.currentLineWidth=e)}setBlending(e,t,n,r,s,o,a,l){const{gl:u}=this;if(e===Iy){this.currentBlendingEnabled===!0&&(this.disable(u.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(u.BLEND),this.currentBlendingEnabled=!0),e!==$te){if(e!==this.currentBlending||l!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==tp||this.currentBlendEquationAlpha!==tp)&&(u.blendEquation(u.FUNC_ADD),this.currentBlendEquation=tp,this.currentBlendEquationAlpha=tp),l)switch(e){case _p:u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case sC:u.blendFunc(u.ONE,u.ONE);break;case oC:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case aC:u.blendFuncSeparate(u.ZERO,u.SRC_COLOR,u.ZERO,u.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case _p:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case sC:u.blendFunc(u.SRC_ALPHA,u.ONE);break;case oC:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case aC:u.blendFunc(u.ZERO,u.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=l}return}s=s||t,o=o||n,a=a||r,(t!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(u.blendEquationSeparate(f6[t],f6[s]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=s),(n!==this.currentBlendSrc||r!==this.currentBlendDst||o!==this.currentBlendSrcAlpha||a!==this.currentBlendDstAlpha)&&(u.blendFuncSeparate(L2[n],L2[r],L2[o],L2[a]),this.currentBlendSrc=n,this.currentBlendDst=r,this.currentBlendSrcAlpha=o,this.currentBlendDstAlpha=a),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case rne:t.depthFunc(t.NEVER);break;case sne:t.depthFunc(t.ALWAYS);break;case one:t.depthFunc(t.LESS);break;case cC:t.depthFunc(t.LEQUAL);break;case ane:t.depthFunc(t.EQUAL);break;case lne:t.depthFunc(t.GEQUAL);break;case une:t.depthFunc(t.GREATER);break;case cne:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,n){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==n)&&(this.gl.stencilFunc(e,t,n),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=n)}setStencilOp(e,t,n){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==n)&&(this.gl.stencilOp(e,t,n),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=n)}setMaterial(e,t){const{gl:n}=this;e.side===rC?this.disable(n.CULL_FACE):this.enable(n.CULL_FACE);let r=e.side===Jf;t&&(r=!r),this.setFlipSided(r),e.blending===_p&&e.transparent===!1?this.setBlending(Iy):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const s=e.stencilWrite;this.setStencilTest(s),s&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(n.SAMPLE_ALPHA_TO_COVERAGE):this.disable(n.SAMPLE_ALPHA_TO_COVERAGE)}setPolygonOffset(e,t,n){const{gl:r}=this;e?(this.enable(r.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==n)&&(r.polygonOffset(t,n),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=n)):this.disable(r.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}bindFramebuffer(e,t){const{gl:n,currentBoundFramebuffers:r}=this;return r[e]!==t?(n.bindFramebuffer(e,t),r[e]=t,e===n.DRAW_FRAMEBUFFER&&(r[n.FRAMEBUFFER]=t),e===n.FRAMEBUFFER&&(r[n.DRAW_FRAMEBUFFER]=t),!0):!1}drawBuffers(e,t){const{gl:n}=this;let r=[],s=!1;if(e.textures!==null){r=this.currentDrawbuffers.get(t),r===void 0&&(r=[],this.currentDrawbuffers.set(t,r));const o=e.textures;if(r.length!==o.length||r[0]!==n.COLOR_ATTACHMENT0){for(let a=0,l=o.length;a<l;a++)r[a]=n.COLOR_ATTACHMENT0+a;r.length=o.length,s=!0}}else r[0]!==n.BACK&&(r[0]=n.BACK,s=!0);s&&n.drawBuffers(r)}activeTexture(e){const{gl:t,currentTextureSlot:n,maxTextures:r}=this;e===void 0&&(e=t.TEXTURE0+r-1),n!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t,n){const{gl:r,currentTextureSlot:s,currentBoundTextures:o,maxTextures:a}=this;n===void 0&&(s===null?n=r.TEXTURE0+a-1:n=s);let l=o[n];l===void 0&&(l={type:void 0,texture:void 0},o[n]=l),(l.type!==e||l.texture!==t)&&(s!==n&&(r.activeTexture(n),this.currentTextureSlot=n),r.bindTexture(e,t),l.type=e,l.texture=t)}bindBufferBase(e,t,n){const{gl:r}=this,s=`${e}-${t}`;return this.currentBoundBufferBases[s]!==n?(r.bindBufferBase(e,t,n),this.currentBoundBufferBases[s]=n,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:t,currentBoundTextures:n}=this,r=n[t];r!==void 0&&r.type!==void 0&&(e.bindTexture(r.type,null),r.type=void 0,r.texture=void 0)}}class a9e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=nm){const{gl:n,extensions:r}=this;let s;if(e===gf)return n.UNSIGNED_BYTE;if(e===r6e)return n.UNSIGNED_SHORT_4_4_4_4;if(e===s6e)return n.UNSIGNED_SHORT_5_5_5_1;if(e===fne)return n.UNSIGNED_INT_5_9_9_9_REV;if(e===C_)return n.BYTE;if(e===R_)return n.SHORT;if(e===b1)return n.UNSIGNED_SHORT;if(e===da)return n.INT;if(e===ro)return n.UNSIGNED_INT;if(e===Dl)return n.FLOAT;if(e===Ef)return n.HALF_FLOAT;if(e===o6e)return n.ALPHA;if(e===oF)return n.RGB;if(e===sv)return n.RGBA;if(e===a6e)return n.LUMINANCE;if(e===l6e)return n.LUMINANCE_ALPHA;if(e===I0)return n.DEPTH_COMPONENT;if(e===Dy)return n.DEPTH_STENCIL;if(e===aF)return n.RED;if(e===lF)return n.RED_INTEGER;if(e===Lx)return n.RG;if(e===uF)return n.RG_INTEGER;if(e===cF)return n.RGBA_INTEGER;if(e===hP||e===OM||e===FM||e===kM)if(t===pn)if(s=r.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===hP)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===OM)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===FM)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===kM)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=r.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===hP)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===OM)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===FM)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===kM)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===eV||e===tV||e===nV||e===iV)if(s=r.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===eV)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===tV)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===nV)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===iV)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===rV||e===gN||e===yN)if(s=r.get("WEBGL_compressed_texture_etc"),s!==null){if(e===rV||e===gN)return t===pn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===yN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===vN||e===_N||e===xN||e===bN||e===wN||e===SN||e===MN||e===TN||e===EN||e===CN||e===RN||e===PN||e===BN||e===IN)if(s=r.get("WEBGL_compressed_texture_astc"),s!==null){if(e===vN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===_N)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===xN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===bN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===wN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===SN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===MN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===TN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===EN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===CN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===RN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===PN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===BN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===IN)return t===pn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===fP)if(s=r.get("EXT_texture_compression_bptc"),s!==null){if(e===fP)return t===pn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===c6e||e===sV||e===oV||e===aV)if(s=r.get("EXT_texture_compression_rgtc"),s!==null){if(e===fP)return s.COMPRESSED_RED_RGTC1_EXT;if(e===sV)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===oV)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===aV)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===Eb?n.UNSIGNED_INT_24_8:n[e]!==void 0?n[e]:null}_clientWaitAsync(){const{gl:e}=this,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((n,r)=>{function s(){const o=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(o===e.WAIT_FAILED){e.deleteSync(t),r();return}if(o===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(t),n()}s()})}}let Fj=!1,tM,d6,kj;class l9e{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},Fj===!1&&(this._init(this.gl),Fj=!0)}_init(e){tM={[hC]:e.REPEAT,[x1]:e.CLAMP_TO_EDGE,[fC]:e.MIRRORED_REPEAT},d6={[uo]:e.NEAREST,[AN]:e.NEAREST_MIPMAP_NEAREST,[W1]:e.NEAREST_MIPMAP_LINEAR,[sl]:e.LINEAR,[mN]:e.LINEAR_MIPMAP_NEAREST,[Tf]:e.LINEAR_MIPMAP_LINEAR},kj={[pne]:e.NEVER,[_ne]:e.ALWAYS,[hF]:e.LESS,[mne]:e.LEQUAL,[Ane]:e.EQUAL,[vne]:e.GEQUAL,[gne]:e.GREATER,[yne]:e.NOTEQUAL}}filterFallback(e){const{gl:t}=this;return e===uo||e===AN||e===W1?t.NEAREST:t.LINEAR}getGLTextureType(e){const{gl:t}=this;let n;return e.isCubeTexture===!0?n=t.TEXTURE_CUBE_MAP:e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?n=t.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?n=t.TEXTURE_3D:n=t.TEXTURE_2D,n}getInternalFormat(e,t,n,r,s=!1){const{gl:o,extensions:a}=this;if(e!==null){if(o[e]!==void 0)return o[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let l=t;return t===o.RED&&(n===o.FLOAT&&(l=o.R32F),n===o.HALF_FLOAT&&(l=o.R16F),n===o.UNSIGNED_BYTE&&(l=o.R8),n===o.UNSIGNED_SHORT&&(l=o.R16),n===o.UNSIGNED_INT&&(l=o.R32UI),n===o.BYTE&&(l=o.R8I),n===o.SHORT&&(l=o.R16I),n===o.INT&&(l=o.R32I)),t===o.RED_INTEGER&&(n===o.UNSIGNED_BYTE&&(l=o.R8UI),n===o.UNSIGNED_SHORT&&(l=o.R16UI),n===o.UNSIGNED_INT&&(l=o.R32UI),n===o.BYTE&&(l=o.R8I),n===o.SHORT&&(l=o.R16I),n===o.INT&&(l=o.R32I)),t===o.RG&&(n===o.FLOAT&&(l=o.RG32F),n===o.HALF_FLOAT&&(l=o.RG16F),n===o.UNSIGNED_BYTE&&(l=o.RG8),n===o.UNSIGNED_SHORT&&(l=o.RG16),n===o.UNSIGNED_INT&&(l=o.RG32UI),n===o.BYTE&&(l=o.RG8I),n===o.SHORT&&(l=o.RG16I),n===o.INT&&(l=o.RG32I)),t===o.RG_INTEGER&&(n===o.UNSIGNED_BYTE&&(l=o.RG8UI),n===o.UNSIGNED_SHORT&&(l=o.RG16UI),n===o.UNSIGNED_INT&&(l=o.RG32UI),n===o.BYTE&&(l=o.RG8I),n===o.SHORT&&(l=o.RG16I),n===o.INT&&(l=o.RG32I)),t===o.RGB&&(n===o.FLOAT&&(l=o.RGB32F),n===o.HALF_FLOAT&&(l=o.RGB16F),n===o.UNSIGNED_BYTE&&(l=o.RGB8),n===o.UNSIGNED_SHORT&&(l=o.RGB16),n===o.UNSIGNED_INT&&(l=o.RGB32UI),n===o.BYTE&&(l=o.RGB8I),n===o.SHORT&&(l=o.RGB16I),n===o.INT&&(l=o.RGB32I),n===o.UNSIGNED_BYTE&&(l=r===pn&&s===!1?o.SRGB8:o.RGB8),n===o.UNSIGNED_SHORT_5_6_5&&(l=o.RGB565),n===o.UNSIGNED_SHORT_5_5_5_1&&(l=o.RGB5_A1),n===o.UNSIGNED_SHORT_4_4_4_4&&(l=o.RGB4),n===o.UNSIGNED_INT_5_9_9_9_REV&&(l=o.RGB9_E5)),t===o.RGB_INTEGER&&(n===o.UNSIGNED_BYTE&&(l=o.RGB8UI),n===o.UNSIGNED_SHORT&&(l=o.RGB16UI),n===o.UNSIGNED_INT&&(l=o.RGB32UI),n===o.BYTE&&(l=o.RGB8I),n===o.SHORT&&(l=o.RGB16I),n===o.INT&&(l=o.RGB32I)),t===o.RGBA&&(n===o.FLOAT&&(l=o.RGBA32F),n===o.HALF_FLOAT&&(l=o.RGBA16F),n===o.UNSIGNED_BYTE&&(l=o.RGBA8),n===o.UNSIGNED_SHORT&&(l=o.RGBA16),n===o.UNSIGNED_INT&&(l=o.RGBA32UI),n===o.BYTE&&(l=o.RGBA8I),n===o.SHORT&&(l=o.RGBA16I),n===o.INT&&(l=o.RGBA32I),n===o.UNSIGNED_BYTE&&(l=r===pn&&s===!1?o.SRGB8_ALPHA8:o.RGBA8),n===o.UNSIGNED_SHORT_4_4_4_4&&(l=o.RGBA4),n===o.UNSIGNED_SHORT_5_5_5_1&&(l=o.RGB5_A1)),t===o.RGBA_INTEGER&&(n===o.UNSIGNED_BYTE&&(l=o.RGBA8UI),n===o.UNSIGNED_SHORT&&(l=o.RGBA16UI),n===o.UNSIGNED_INT&&(l=o.RGBA32UI),n===o.BYTE&&(l=o.RGBA8I),n===o.SHORT&&(l=o.RGBA16I),n===o.INT&&(l=o.RGBA32I)),t===o.DEPTH_COMPONENT&&(n===o.UNSIGNED_INT&&(l=o.DEPTH24_STENCIL8),n===o.FLOAT&&(l=o.DEPTH_COMPONENT32F)),t===o.DEPTH_STENCIL&&n===o.UNSIGNED_INT_24_8&&(l=o.DEPTH24_STENCIL8),(l===o.R16F||l===o.R32F||l===o.RG16F||l===o.RG32F||l===o.RGBA16F||l===o.RGBA32F)&&a.get("EXT_color_buffer_float"),l}setTextureParameters(e,t){const{gl:n,extensions:r,backend:s}=this;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,t.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),n.texParameteri(e,n.TEXTURE_WRAP_S,tM[t.wrapS]),n.texParameteri(e,n.TEXTURE_WRAP_T,tM[t.wrapT]),(e===n.TEXTURE_3D||e===n.TEXTURE_2D_ARRAY)&&n.texParameteri(e,n.TEXTURE_WRAP_R,tM[t.wrapR]),n.texParameteri(e,n.TEXTURE_MAG_FILTER,d6[t.magFilter]);const o=t.mipmaps!==void 0&&t.mipmaps.length>0,a=t.minFilter===sl&&o?Tf:t.minFilter;if(n.texParameteri(e,n.TEXTURE_MIN_FILTER,d6[a]),t.compareFunction&&(n.texParameteri(e,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(e,n.TEXTURE_COMPARE_FUNC,kj[t.compareFunction])),r.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===uo||t.minFilter!==W1&&t.minFilter!==Tf||t.type===Dl&&r.has("OES_texture_float_linear")===!1)return;if(t.anisotropy>1){const l=r.get("EXT_texture_filter_anisotropic");n.texParameterf(e,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:t,backend:n,defaultTextures:r}=this,s=this.getGLTextureType(e);let o=r[s];o===void 0&&(o=t.createTexture(),n.state.bindTexture(s,o),t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST),r[s]=o),n.set(e,{textureGPU:o,glTextureType:s,isDefault:!0})}createTexture(e,t){const{gl:n,backend:r}=this,{levels:s,width:o,height:a,depth:l}=t,u=r.utils.convert(e.format,e.colorSpace),c=r.utils.convert(e.type),h=this.getInternalFormat(e.internalFormat,u,c,e.colorSpace,e.isVideoTexture),f=n.createTexture(),d=this.getGLTextureType(e);r.state.bindTexture(d,f),this.setTextureParameters(d,e),e.isDataArrayTexture||e.isCompressedArrayTexture?n.texStorage3D(n.TEXTURE_2D_ARRAY,s,h,o,a,l):e.isData3DTexture?n.texStorage3D(n.TEXTURE_3D,s,h,o,a,l):e.isVideoTexture||n.texStorage2D(d,s,h,o,a),r.set(e,{textureGPU:f,glTextureType:d,glFormat:u,glType:c,glInternalFormat:h})}copyBufferToTexture(e,t){const{gl:n,backend:r}=this,{textureGPU:s,glTextureType:o,glFormat:a,glType:l}=r.get(t),{width:u,height:c}=t.source.data;n.bindBuffer(n.PIXEL_UNPACK_BUFFER,e),r.state.bindTexture(o,s),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texSubImage2D(o,0,0,0,u,c,a,l,0),n.bindBuffer(n.PIXEL_UNPACK_BUFFER,null),r.state.unbindTexture()}updateTexture(e,t){const{gl:n}=this,{width:r,height:s}=t,{textureGPU:o,glTextureType:a,glFormat:l,glType:u,glInternalFormat:c}=this.backend.get(e);if(e.isRenderTargetTexture||o===void 0)return;const h=f=>f.isDataTexture?f.image.data:f instanceof ImageBitmap||f instanceof OffscreenCanvas||f instanceof HTMLImageElement||f instanceof HTMLCanvasElement?f:f.data;if(this.backend.state.bindTexture(a,o),this.setTextureParameters(a,e),e.isCompressedTexture){const f=e.mipmaps,d=t.image;for(let p=0;p<f.length;p++){const v=f[p];e.isCompressedArrayTexture?e.format!==n.RGBA?l!==null?n.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,p,0,0,0,v.width,v.height,d.depth,l,v.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texSubImage3D(n.TEXTURE_2D_ARRAY,p,0,0,0,v.width,v.height,d.depth,l,u,v.data):l!==null?n.compressedTexSubImage2D(n.TEXTURE_2D,p,0,0,v.width,v.height,l,v.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const f=t.images;for(let d=0;d<6;d++){const p=h(f[d]);n.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,0,0,r,s,l,u,p)}}else if(e.isDataArrayTexture){const f=t.image;n.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,f.width,f.height,f.depth,l,u,f.data)}else if(e.isData3DTexture){const f=t.image;n.texSubImage3D(n.TEXTURE_3D,0,0,0,0,f.width,f.height,f.depth,l,u,f.data)}else if(e.isVideoTexture)e.update(),n.texImage2D(a,0,c,l,u,t.image);else{const f=h(t.image);n.texSubImage2D(a,0,0,0,r,s,l,u,f)}}generateMipmaps(e){const{gl:t,backend:n}=this,{textureGPU:r,glTextureType:s}=n.get(e);n.state.bindTexture(s,r),t.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:t,backend:n}=this;if(e){const r=n.get(e);if(r.renderBufferStorageSetup=void 0,r.framebuffers){for(const s in r.framebuffers)t.deleteFramebuffer(r.framebuffers[s]);delete r.framebuffers}if(r.depthRenderbuffer&&(t.deleteRenderbuffer(r.depthRenderbuffer),delete r.depthRenderbuffer),r.stencilRenderbuffer&&(t.deleteRenderbuffer(r.stencilRenderbuffer),delete r.stencilRenderbuffer),r.msaaFrameBuffer&&(t.deleteFramebuffer(r.msaaFrameBuffer),delete r.msaaFrameBuffer),r.msaaRenderbuffers){for(let s=0;s<r.msaaRenderbuffers.length;s++)t.deleteRenderbuffer(r.msaaRenderbuffers[s]);delete r.msaaRenderbuffers}}}destroyTexture(e){const{gl:t,backend:n}=this,{textureGPU:r,renderTarget:s}=n.get(e);this.deallocateRenderBuffers(s),t.deleteTexture(r),n.delete(e)}copyTextureToTexture(e,t,n=null,r=null,s=0){const{gl:o,backend:a}=this,{state:l}=this.backend,{textureGPU:u,glTextureType:c,glType:h,glFormat:f}=a.get(t);let d,p,v,b,_,M;n!==null?(d=n.max.x-n.min.x,p=n.max.y-n.min.y,v=n.min.x,b=n.min.y):(d=e.image.width,p=e.image.height,v=0,b=0),r!==null?(_=r.x,M=r.y):(_=0,M=0),l.bindTexture(c,u),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment);const E=o.getParameter(o.UNPACK_ROW_LENGTH),R=o.getParameter(o.UNPACK_IMAGE_HEIGHT),L=o.getParameter(o.UNPACK_SKIP_PIXELS),I=o.getParameter(o.UNPACK_SKIP_ROWS),D=o.getParameter(o.UNPACK_SKIP_IMAGES),k=e.isCompressedTexture?e.mipmaps[s]:e.image;o.pixelStorei(o.UNPACK_ROW_LENGTH,k.width),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,k.height),o.pixelStorei(o.UNPACK_SKIP_PIXELS,v),o.pixelStorei(o.UNPACK_SKIP_ROWS,b),e.isDataTexture?o.texSubImage2D(o.TEXTURE_2D,s,_,M,d,p,f,h,k.data):e.isCompressedTexture?o.compressedTexSubImage2D(o.TEXTURE_2D,s,_,M,k.width,k.height,f,k.data):o.texSubImage2D(o.TEXTURE_2D,s,_,M,d,p,f,h,k),o.pixelStorei(o.UNPACK_ROW_LENGTH,E),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,R),o.pixelStorei(o.UNPACK_SKIP_PIXELS,L),o.pixelStorei(o.UNPACK_SKIP_ROWS,I),o.pixelStorei(o.UNPACK_SKIP_IMAGES,D),s===0&&t.generateMipmaps&&o.generateMipmap(o.TEXTURE_2D),l.unbindTexture()}copyFramebufferToTexture(e,t,n){const{gl:r}=this,{state:s}=this.backend,{textureGPU:o}=this.backend.get(e),{x:a,y:l,z:u,w:c}=n,h=e.isDepthTexture===!0||t.renderTarget&&t.renderTarget.samples>0,f=t.renderTarget?t.renderTarget.height:this.backend.gerDrawingBufferSize().y;if(h){const d=a!==0||l!==0;let p,v;if(e.isDepthTexture===!0?(p=r.DEPTH_BUFFER_BIT,v=r.DEPTH_ATTACHMENT,t.stencil&&(p|=r.STENCIL_BUFFER_BIT)):(p=r.COLOR_BUFFER_BIT,v=r.COLOR_ATTACHMENT0),d){const b=this.backend.get(t.renderTarget),_=b.framebuffers[t.getCacheKey()],M=b.msaaFrameBuffer;s.bindFramebuffer(r.DRAW_FRAMEBUFFER,_),s.bindFramebuffer(r.READ_FRAMEBUFFER,M);const E=f-l-c;r.blitFramebuffer(a,E,a+u,E+c,a,E,a+u,E+c,p,r.NEAREST),s.bindFramebuffer(r.READ_FRAMEBUFFER,_),s.bindTexture(r.TEXTURE_2D,o),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,a,E,u,c),s.unbindTexture()}else{const b=r.createFramebuffer();s.bindFramebuffer(r.DRAW_FRAMEBUFFER,b),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,v,r.TEXTURE_2D,o,0),r.blitFramebuffer(0,0,u,c,0,0,u,c,p,r.NEAREST),r.deleteFramebuffer(b)}}else s.bindTexture(r.TEXTURE_2D,o),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,a,f-c-l,u,c),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}setupRenderBufferStorage(e,t){const{gl:n}=this,r=t.renderTarget,{samples:s,depthTexture:o,depthBuffer:a,stencilBuffer:l,width:u,height:c}=r;if(n.bindRenderbuffer(n.RENDERBUFFER,e),a&&!l){let h=n.DEPTH_COMPONENT24;s>0?(o&&o.isDepthTexture&&o.type===n.FLOAT&&(h=n.DEPTH_COMPONENT32F),n.renderbufferStorageMultisample(n.RENDERBUFFER,s,h,u,c)):n.renderbufferStorage(n.RENDERBUFFER,h,u,c),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e)}else a&&l&&(s>0?n.renderbufferStorageMultisample(n.RENDERBUFFER,s,n.DEPTH24_STENCIL8,u,c):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,u,c),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,e))}async copyTextureToBuffer(e,t,n,r,s,o){const{backend:a,gl:l}=this,{textureGPU:u,glFormat:c,glType:h}=this.backend.get(e),f=l.createFramebuffer();l.bindFramebuffer(l.READ_FRAMEBUFFER,f);const d=e.isCubeTexture?l.TEXTURE_CUBE_MAP_POSITIVE_X+o:l.TEXTURE_2D;l.framebufferTexture2D(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,d,u,0);const p=this._getTypedArrayType(h),v=this._getBytesPerTexel(h,c),_=r*s*v,M=l.createBuffer();l.bindBuffer(l.PIXEL_PACK_BUFFER,M),l.bufferData(l.PIXEL_PACK_BUFFER,_,l.STREAM_READ),l.readPixels(t,n,r,s,c,h,0),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),await a.utils._clientWaitAsync();const E=new p(_/p.BYTES_PER_ELEMENT);return l.bindBuffer(l.PIXEL_PACK_BUFFER,M),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,E),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),l.deleteFramebuffer(f),E}_getTypedArrayType(e){const{gl:t}=this;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4||e===t.UNSIGNED_SHORT_5_5_5_1||e===t.UNSIGNED_SHORT_5_6_5||e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,t){const{gl:n}=this;let r=0;if(e===n.UNSIGNED_BYTE&&(r=1),(e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5||e===n.UNSIGNED_SHORT||e===n.HALF_FLOAT)&&(r=2),(e===n.UNSIGNED_INT||e===n.FLOAT)&&(r=4),t===n.RGBA)return r*4;if(t===n.RGB)return r*3;if(t===n.ALPHA)return r}}class u9e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let t=this.extensions[e];return t===void 0&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}has(e){return this.availableExtensions.includes(e)}}class c9e{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,t=this.backend.extensions;if(t.has("EXT_texture_filter_anisotropic")===!0){const n=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const Uj={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query"};class h9e{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,t){const{gl:n,mode:r,object:s,type:o,info:a,index:l}=this;l!==0?n.drawElements(r,t,o,e):n.drawArrays(r,e,t),a.update(s,t,r,1)}renderInstances(e,t,n){const{gl:r,mode:s,type:o,index:a,object:l,info:u}=this;n!==0&&(a!==0?r.drawElementsInstanced(s,t,o,e,n):r.drawArraysInstanced(s,e,t,n),u.update(l,t,s,n))}renderMultiDraw(e,t,n){const{extensions:r,mode:s,object:o,info:a}=this;if(n===0)return;const l=r.get("WEBGL_multi_draw");if(l===null)for(let u=0;u<n;u++)this.render(e[u],t[u]);else{this.index!==0?l.multiDrawElementsWEBGL(s,t,0,this.type,e,0,n):l.multiDrawArraysWEBGL(s,e,0,t,0,n);let u=0;for(let c=0;c<n;c++)u+=t[c];a.update(o,u,s,1)}}renderMultiDrawInstances(e,t,n,r){const{extensions:s,mode:o,object:a,info:l}=this;if(n===0)return;const u=s.get("WEBGL_multi_draw");if(u===null)for(let c=0;c<n;c++)this.renderInstances(e[c],t[c],r[c]);else{this.index!==0?u.multiDrawElementsInstancedWEBGL(o,t,0,this.type,e,0,r,0,n):u.multiDrawArraysInstancedWEBGL(o,e,0,t,0,r,0,n);let c=0;for(let h=0;h<n;h++)c+=t[h];for(let h=0;h<r.length;h++)l.update(a,c,o,r[h])}}}class zj extends gre{constructor(e={}){super(e),this.isWebGLBackend=!0}init(e){super.init(e);const t=this.parameters,n=t.context!==void 0?t.context:e.domElement.getContext("webgl2");this.gl=n,this.extensions=new u9e(this),this.capabilities=new c9e(this),this.attributeUtils=new s9e(this),this.textureUtils=new l9e(this),this.bufferRenderer=new h9e(this),this.state=new o9e(this),this.utils=new a9e(this),this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.trackTimestamp=t.trackTimestamp===!0,this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile"),this._currentContext=null}get coordinateSystem(){return mc}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}initTimestampQuery(e){if(!this.disjoint||!this.trackTimestamp)return;const t=this.get(e);if(this.queryRunning){t.queryQueue||(t.queryQueue=[]),t.queryQueue.push(e);return}t.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),t.activeQuery=null),t.activeQuery=this.gl.createQuery(),t.activeQuery!==null&&(this.gl.beginQuery(this.disjoint.TIME_ELAPSED_EXT,t.activeQuery),this.queryRunning=!0)}prepareTimestampBuffer(e){if(!this.disjoint||!this.trackTimestamp)return;const t=this.get(e);if(t.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),t.gpuQueries||(t.gpuQueries=[]),t.gpuQueries.push({query:t.activeQuery}),t.activeQuery=null,this.queryRunning=!1,t.queryQueue&&t.queryQueue.length>0)){const n=t.queryQueue.shift();this.initTimestampQuery(n)}}async resolveTimestampAsync(e,t="render"){if(!this.disjoint||!this.trackTimestamp)return;const n=this.get(e);n.gpuQueries||(n.gpuQueries=[]);for(let r=0;r<n.gpuQueries.length;r++){const s=n.gpuQueries[r],o=this.gl.getQueryParameter(s.query,this.gl.QUERY_RESULT_AVAILABLE),a=this.gl.getParameter(this.disjoint.GPU_DISJOINT_EXT);if(o&&!a){const l=this.gl.getQueryParameter(s.query,this.gl.QUERY_RESULT),u=Number(l)/1e6;this.gl.deleteQuery(s.query),n.gpuQueries.splice(r,1),r--,this.renderer.info.updateTimestamp(t,u)}}}getContext(){return this.gl}beginRender(e){const{gl:t}=this,n=this.get(e);if(this.initTimestampQuery(e),n.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1),e.viewport?this.updateViewport(e):t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.scissor){const{x:s,y:o,width:a,height:l}=e.scissorValue;t.scissor(s,e.height-l-o,a,l)}const r=e.occlusionQueryCount;r>0&&(n.currentOcclusionQueries=n.occlusionQueries,n.currentOcclusionQueryObjects=n.occlusionQueryObjects,n.lastOcclusionObject=null,n.occlusionQueries=new Array(r),n.occlusionQueryObjects=new Array(r),n.occlusionQueryIndex=0)}finishRender(e){const{gl:t,state:n}=this,r=this.get(e),s=r.previousContext,o=e.occlusionQueryCount;o>0&&(o>r.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const a=e.textures;if(a!==null)for(let l=0;l<a.length;l++){const u=a[l];u.generateMipmaps&&this.generateMipmaps(u)}if(this._currentContext=s,e.textures!==null&&e.renderTarget){const l=this.get(e.renderTarget),{samples:u}=e.renderTarget;if(u>0){const c=l.framebuffers[e.getCacheKey()],h=t.COLOR_BUFFER_BIT,f=l.msaaFrameBuffer,d=e.textures;n.bindFramebuffer(t.READ_FRAMEBUFFER,f),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,c);for(let p=0;p<d.length;p++)if(e.scissor){const{x:v,y:b,width:_,height:M}=e.scissorValue,E=e.height-M-b;t.blitFramebuffer(v,E,v+_,E+M,v,E,v+_,E+M,h,t.NEAREST),t.invalidateSubFramebuffer(t.READ_FRAMEBUFFER,l.invalidationArray,v,E,_,M)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,h,t.NEAREST),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l.invalidationArray)}}s!==null&&(this._setFramebuffer(s),s.viewport?this.updateViewport(s):t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)),this.prepareTimestampBuffer(e)}resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueries:n,currentOcclusionQueryObjects:r}=t;if(n&&r){const s=new WeakSet,{gl:o}=this;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;const a=()=>{let l=0;for(let u=0;u<n.length;u++){const c=n[u];c!==null&&o.getQueryParameter(c,o.QUERY_RESULT_AVAILABLE)&&(o.getQueryParameter(c,o.QUERY_RESULT)>0&&s.add(r[u]),n[u]=null,o.deleteQuery(c),l++)}l<n.length?requestAnimationFrame(a):t.occluded=s};a()}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}updateViewport(e){const t=this.gl,{x:n,y:r,width:s,height:o}=e.viewportValue;t.viewport(n,e.height-o-r,s,o)}setScissorTest(e){const t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)}clear(e,t,n,r=null,s=!0){const{gl:o}=this;r===null&&(r={textures:null,clearColorValue:this.getClearColor()});let a=0;if(e&&(a|=o.COLOR_BUFFER_BIT),t&&(a|=o.DEPTH_BUFFER_BIT),n&&(a|=o.STENCIL_BUFFER_BIT),a!==0){const l=r.clearColorValue||this.getClearColor();if(l.r*=l.a,l.g*=l.a,l.b*=l.a,t&&this.state.setDepthMask(!0),r.textures===null)o.clearColor(l.r,l.g,l.b,l.a),o.clear(a);else{if(s&&this._setFramebuffer(r),e)for(let u=0;u<r.textures.length;u++)o.clearBufferfv(o.COLOR,u,[l.r,l.g,l.b,l.a]);t&&n?o.clearBufferfi(o.DEPTH_STENCIL,0,1,0):t?o.clearBufferfv(o.DEPTH,0,[1]):n&&o.clearBufferiv(o.STENCIL,0,[0])}}}beginCompute(e){const{state:t,gl:n}=this;t.bindFramebuffer(n.FRAMEBUFFER,null),this.initTimestampQuery(e)}compute(e,t,n,r){const{state:s,gl:o}=this;this.discard||(o.enable(o.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:a,transformBuffers:l,attributes:u}=this.get(r),c=this._getVaoKey(null,u),h=this.vaoCache[c];h===void 0?this._createVao(null,u):o.bindVertexArray(h),s.useProgram(a),this._bindUniforms(n);const f=this._getTransformFeedback(l);o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,f),o.beginTransformFeedback(o.POINTS),u[0].isStorageInstancedBufferAttribute?o.drawArraysInstanced(o.POINTS,0,1,t.count):o.drawArrays(o.POINTS,0,t.count),o.endTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null);for(let d=0;d<l.length;d++){const p=l[d];p.pbo&&this.textureUtils.copyBufferToTexture(p.transformBuffer,p.pbo),p.switchBuffers()}}finishCompute(e){const t=this.gl;this.discard=!1,t.disable(t.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e)}draw(e){const{object:t,pipeline:n,material:r,context:s}=e,{programGPU:o}=this.get(n),{gl:a,state:l}=this,u=this.get(s),c=e.getDrawParameters();if(c===null)return;this._bindUniforms(e.getBindings());const h=t.isMesh&&t.matrixWorld.determinant()<0;l.setMaterial(r,h),l.useProgram(o);let f=e.staticVao;if(f===void 0){const E=this._getVaoKey(e.getIndex(),e.getAttributes());if(f=this.vaoCache[E],f===void 0){let R;({vaoGPU:f,staticVao:R}=this._createVao(e.getIndex(),e.getAttributes())),R&&(e.staticVao=f)}}a.bindVertexArray(f);const d=e.getIndex(),p=u.lastOcclusionObject;if(p!==t&&p!==void 0){if(p!==null&&p.occlusionTest===!0&&(a.endQuery(a.ANY_SAMPLES_PASSED),u.occlusionQueryIndex++),t.occlusionTest===!0){const E=a.createQuery();a.beginQuery(a.ANY_SAMPLES_PASSED,E),u.occlusionQueries[u.occlusionQueryIndex]=E,u.occlusionQueryObjects[u.occlusionQueryIndex]=t}u.lastOcclusionObject=t}const v=this.bufferRenderer;t.isPoints?v.mode=a.POINTS:t.isLineSegments?v.mode=a.LINES:t.isLine?v.mode=a.LINE_STRIP:t.isLineLoop?v.mode=a.LINE_LOOP:r.wireframe===!0?(l.setLineWidth(r.wireframeLinewidth*this.renderer.getPixelRatio()),v.mode=a.LINES):v.mode=a.TRIANGLES;const{vertexCount:b,instanceCount:_}=c;let{firstVertex:M}=c;if(v.object=t,d!==null){M*=d.array.BYTES_PER_ELEMENT;const E=this.get(d);v.index=d.count,v.type=E.type}else v.index=0;t.isBatchedMesh?t._multiDrawInstances!==null?v.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances):this.hasFeature("WEBGL_multi_draw")?v.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):$6e("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):_>1?v.renderInstances(M,b,_):v.render(M,b),a.bindVertexArray(null)}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,t,n,r,s,o){return this.textureUtils.copyTextureToBuffer(e,t,n,r,s,o)}createSampler(){}destroySampler(){}createNodeBuilder(e,t){return new n9e(e,t)}createProgram(e){const t=this.gl,{stage:n,code:r}=e,s=n==="fragment"?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(s,r),t.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(){console.warn("Abstract class.")}createRenderPipeline(e,t){const n=this.gl,r=e.pipeline,{fragmentProgram:s,vertexProgram:o}=r,a=n.createProgram(),l=this.get(s).shaderGPU,u=this.get(o).shaderGPU;if(n.attachShader(a,l),n.attachShader(a,u),n.linkProgram(a),this.set(r,{programGPU:a,fragmentShader:l,vertexShader:u}),t!==null&&this.parallel){const c=new Promise(h=>{const f=this.parallel,d=()=>{n.getProgramParameter(a,f.COMPLETION_STATUS_KHR)?(this._completeCompile(e,r),h()):requestAnimationFrame(d)};d()});t.push(c);return}this._completeCompile(e,r)}_handleSource(e,t){const n=e.split(`
`),r=[],s=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let a=s;a<o;a++){const l=a+1;r.push(`${l===t?">":" "} ${l}: ${n[a]}`)}return r.join(`
`)}_getShaderErrors(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),s=e.getShaderInfoLog(t).trim();if(r&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return n.toUpperCase()+`

`+s+`

`+this._handleSource(e.getShaderSource(t),a)}else return s}_logProgramError(e,t,n){if(this.renderer.debug.checkShaderErrors){const r=this.gl,s=r.getProgramInfoLog(e).trim();if(r.getProgramParameter(e,r.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(r,e,n,t);else{const o=this._getShaderErrors(r,n,"vertex"),a=this._getShaderErrors(r,t,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(e,r.VALIDATE_STATUS)+`

Program Info Log: `+s+`
`+o+`
`+a)}else s!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",s)}}_completeCompile(e,t){const{state:n,gl:r}=this,s=this.get(t),{programGPU:o,fragmentShader:a,vertexShader:l}=s;r.getProgramParameter(o,r.LINK_STATUS)===!1&&this._logProgramError(o,a,l),n.useProgram(o);const u=e.getBindings();this._setupBindings(u,o),this.set(t,{programGPU:o})}createComputePipeline(e,t){const{state:n,gl:r}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:o}=e,a=r.createProgram(),l=this.get(s).shaderGPU,u=this.get(o).shaderGPU,c=o.transforms,h=[],f=[];for(let b=0;b<c.length;b++){const _=c[b];h.push(_.varyingName),f.push(_.attributeNode)}r.attachShader(a,l),r.attachShader(a,u),r.transformFeedbackVaryings(a,h,r.SEPARATE_ATTRIBS),r.linkProgram(a),r.getProgramParameter(a,r.LINK_STATUS)===!1&&this._logProgramError(a,l,u),n.useProgram(a),this.createBindings(null,t),this._setupBindings(t,a);const d=o.attributes,p=[],v=[];for(let b=0;b<d.length;b++){const _=d[b].node.attribute;p.push(_),this.has(_)||this.attributeUtils.createAttribute(_,r.ARRAY_BUFFER)}for(let b=0;b<f.length;b++){const _=f[b].attribute;this.has(_)||this.attributeUtils.createAttribute(_,r.ARRAY_BUFFER);const M=this.get(_);v.push(M)}this.set(e,{programGPU:a,transformBuffers:v,attributes:p})}createBindings(e,t){this.updateBindings(e,t)}updateBindings(e,t){if(!e)return;const{gl:n}=this,r=this.get(t),s=this.get(e);r.textureIndex===void 0&&(r.textureIndex=0),s.textureIndex===void 0?s.textureIndex=r.textureIndex:r.textureIndex=s.textureIndex;let o=0;for(const a of e.bindings)if(a.isUniformsGroup||a.isUniformBuffer){const l=a.buffer,u=n.createBuffer();n.bindBuffer(n.UNIFORM_BUFFER,u),n.bufferData(n.UNIFORM_BUFFER,l,n.DYNAMIC_DRAW),this.set(a,{index:e.index*2+o++,bufferGPU:u})}else if(a.isSampledTexture){const{textureGPU:l,glTextureType:u}=this.get(a.texture);this.set(a,{index:r.textureIndex++,textureGPU:l,glTextureType:u})}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const r=this.get(e).bufferGPU,s=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,s,t.DYNAMIC_DRAW)}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){}hasFeature(e){const t=Object.keys(Uj).filter(r=>Uj[r]===e),n=this.extensions;for(let r=0;r<t.length;r++)if(n.has(t[r]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,t,n,r){this.textureUtils.copyTextureToTexture(e,t,n,r)}copyFramebufferToTexture(e,t,n){this.textureUtils.copyFramebufferToTexture(e,t,n)}_setFramebuffer(e){const{gl:t,state:n}=this;let r=null;if(e.textures!==null){const s=e.renderTarget,o=this.get(s),{samples:a,depthBuffer:l,stencilBuffer:u}=s,c=s.isWebGLCubeRenderTarget===!0;let h=o.msaaFrameBuffer,f=o.depthRenderbuffer;const d=ure(e);let p;if(c?(o.cubeFramebuffers||(o.cubeFramebuffers={}),p=o.cubeFramebuffers[d]):(o.framebuffers||(o.framebuffers={}),p=o.framebuffers[d]),p===void 0){p=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,p);const v=e.textures;if(c){o.cubeFramebuffers[d]=p;const{textureGPU:b}=this.get(v[0]),_=this.renderer._activeCubeFace;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+_,b,0)}else{o.framebuffers[d]=p;for(let b=0;b<v.length;b++){const _=v[b],M=this.get(_);M.renderTarget=e.renderTarget;const E=t.COLOR_ATTACHMENT0+b;t.framebufferTexture2D(t.FRAMEBUFFER,E,t.TEXTURE_2D,M.textureGPU,0)}n.drawBuffers(e,p)}if(e.depthTexture!==null){const b=this.get(e.depthTexture),_=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.framebufferTexture2D(t.FRAMEBUFFER,_,t.TEXTURE_2D,b.textureGPU,0)}}if(a>0){if(h===void 0){const v=[];h=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,h);const b=[],_=e.textures;for(let M=0;M<_.length;M++){if(b[M]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,b[M]),v.push(t.COLOR_ATTACHMENT0+M),l){const L=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;v.push(L)}const E=e.textures[M],R=this.get(E);t.renderbufferStorageMultisample(t.RENDERBUFFER,a,R.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+M,t.RENDERBUFFER,b[M])}if(o.msaaFrameBuffer=h,o.msaaRenderbuffers=b,f===void 0){f=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(f,e),o.depthRenderbuffer=f;const M=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;v.push(M)}o.invalidationArray=v}r=o.msaaFrameBuffer}else r=p}n.bindFramebuffer(t.FRAMEBUFFER,r)}_getVaoKey(e,t){let n=[];if(e!==null){const r=this.get(e);n+=":"+r.id}for(let r=0;r<t.length;r++){const s=this.get(t[r]);n+=":"+s.id}return n}_createVao(e,t){const{gl:n}=this,r=n.createVertexArray();let s="",o=!0;if(n.bindVertexArray(r),e!==null){const a=this.get(e);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,a.bufferGPU),s+=":"+a.id}for(let a=0;a<t.length;a++){const l=t[a],u=this.get(l);s+=":"+u.id,n.bindBuffer(n.ARRAY_BUFFER,u.bufferGPU),n.enableVertexAttribArray(a),(l.isStorageBufferAttribute||l.isStorageInstancedBufferAttribute)&&(o=!1);let c,h;l.isInterleavedBufferAttribute===!0?(c=l.data.stride*u.bytesPerElement,h=l.offset*u.bytesPerElement):(c=0,h=0),u.isInteger?n.vertexAttribIPointer(a,l.itemSize,u.type,c,h):n.vertexAttribPointer(a,l.itemSize,u.type,l.normalized,c,h),l.isInstancedBufferAttribute&&!l.isInterleavedBufferAttribute?n.vertexAttribDivisor(a,l.meshPerAttribute):l.isInterleavedBufferAttribute&&l.data.isInstancedInterleavedBuffer&&n.vertexAttribDivisor(a,l.data.meshPerAttribute)}return n.bindBuffer(n.ARRAY_BUFFER,null),this.vaoCache[s]=r,{vaoGPU:r,staticVao:o}}_getTransformFeedback(e){let t="";for(let s=0;s<e.length;s++)t+=":"+e[s].id;let n=this.transformFeedbackCache[t];if(n!==void 0)return n;const{gl:r}=this;n=r.createTransformFeedback(),r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n);for(let s=0;s<e.length;s++){const o=e[s];r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,s,o.transformBuffer)}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=n,n}_setupBindings(e,t){const n=this.gl;for(const r of e)for(const s of r.bindings){const a=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const l=n.getUniformBlockIndex(t,s.name);n.uniformBlockBinding(t,l,a)}else if(s.isSampledTexture){const l=n.getUniformLocation(t,s.name);n.uniform1i(l,a)}}}_bindUniforms(e){const{gl:t,state:n}=this;for(const r of e)for(const s of r.bindings){const o=this.get(s),a=o.index;s.isUniformsGroup||s.isUniformBuffer?n.bindBufferBase(t.UNIFORM_BUFFER,a,o.bufferGPU):s.isSampledTexture&&n.bindTexture(o.glTextureType,o.textureGPU,t.TEXTURE0+a)}}}class f9e extends $F{constructor(e,t){super(e),this.texture=t,this.version=t?t.version:0,this.isSampler=!0}}class d9e extends f9e{constructor(e,t,n){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n}update(){this.texture=this.textureNode.value}}class p9e extends hre{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}let A9e=0;class m9e extends p9e{constructor(e,t){super("StorageBuffer_"+A9e++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:JN.Storage,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class g9e extends Zp{constructor(e){super(),this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,n=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,r=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:SC.Linear}),this.flipYSampler=e.createSampler({minFilter:SC.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:n}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:r})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:E1.TriangleStrip,stripIndexFormat:Fy.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:E1.TriangleStrip,stripIndexFormat:Fy.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,n=0){const r=t.format,{width:s,height:o}=t.size,a=this.getTransferPipeline(r),l=this.getFlipYPipeline(r),u=this.device.createTexture({size:{width:s,height:o,depthOrArrayLayers:1},format:r,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),c=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:vu.TwoD,baseArrayLayer:n}),h=u.createView({baseMipLevel:0,mipLevelCount:1,dimension:vu.TwoD,baseArrayLayer:0}),f=this.device.createCommandEncoder({}),d=(p,v,b)=>{const _=p.getBindGroupLayout(0),M=this.device.createBindGroup({layout:_,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:v}]}),E=f.beginRenderPass({colorAttachments:[{view:b,loadOp:os.Clear,storeOp:to.Store,clearValue:[0,0,0,0]}]});E.setPipeline(p),E.setBindGroup(0,M),E.draw(4,1,0,0),E.end()};d(a,c,h),d(l,h,c),this.device.queue.submit([f.finish()]),u.destroy()}generateMipmaps(e,t,n=0){const r=this.get(e);r.useCount===void 0&&(r.useCount=0,r.layers=[]);const s=r.layers[n]||this._mipmapCreateBundles(e,t,n),o=this.device.createCommandEncoder({});this._mipmapRunBundles(o,s),this.device.queue.submit([o.finish()]),r.useCount!==0&&(r.layers[n]=s),r.useCount++}_mipmapCreateBundles(e,t,n){const r=this.getTransferPipeline(t.format),s=r.getBindGroupLayout(0);let o=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:vu.TwoD,baseArrayLayer:n});const a=[];for(let l=1;l<t.mipLevelCount;l++){const u=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:o}]}),c=e.createView({baseMipLevel:l,mipLevelCount:1,dimension:vu.TwoD,baseArrayLayer:n}),h={colorAttachments:[{view:c,loadOp:os.Clear,storeOp:to.Store,clearValue:[0,0,0,0]}]},f=this.device.createRenderBundleEncoder({colorFormats:[t.format]});f.setPipeline(r),f.setBindGroup(0,u),f.draw(4,1,0,0),a.push({renderBundles:[f.finish()],passDescriptor:h}),o=c}return a}_mipmapRunBundles(e,t){const n=t.length;for(let r=0;r<n;r++){const s=t[r],o=e.beginRenderPass(s.passDescriptor);o.executeBundles(s.renderBundles),o.end()}}}const y9e={[pne]:"never",[hF]:"less",[Ane]:"equal",[mne]:"less-equal",[gne]:"greater",[vne]:"greater-equal",[_ne]:"always",[yne]:"not-equal"},v9e=[0,1,3,2,4,5];class _9e{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new Bb,this.depthTexture.name="depthBuffer"}createSampler(e){const t=this.backend,n=t.device,r=t.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:e.anisotropy};e.isDepthTexture&&e.compareFunction!==null&&(s.compare=y9e[e.compareFunction]),r.sampler=n.createSampler(s)}createDefaultTexture(e){let t;const n=eD(e);e.isCubeTexture?t=this._getDefaultCubeTextureGPU(n):e.isVideoTexture?this.backend.get(e).externalTexture=this._getDefaultVideoFrame():t=this._getDefaultTextureGPU(n),this.backend.get(e).texture=t}createTexture(e,t={}){const n=this.backend,r=n.get(e);if(r.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:s,height:o,depth:a,levels:l}=t,u=this._getDimension(e),c=e.internalFormat||t.format||eD(e,n.device);r.format=c;let h=t.sampleCount!==void 0?t.sampleCount:1;h=n.utils.getSampleCount(h);const f=e.isRenderTargetTexture&&!e.isMultisampleRenderTargetTexture?1:h;let d=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(d|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&(d|=GPUTextureUsage.RENDER_ATTACHMENT);const p={label:e.name,size:{width:s,height:o,depthOrArrayLayers:a},mipLevelCount:l,sampleCount:f,dimension:u,format:c,usage:d};if(e.isVideoTexture){const v=e.source.data,b=new VideoFrame(v);p.size.width=b.displayWidth,p.size.height=b.displayHeight,b.close(),r.externalTexture=v}else{if(c===void 0)return console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);r.texture=n.device.createTexture(p)}if(e.isRenderTargetTexture&&h>1&&!e.isMultisampleRenderTargetTexture){const v=Object.assign({},p);v.label=v.label+"-msaa",v.sampleCount=h,r.msaaTexture=n.device.createTexture(v)}r.initialized=!0,r.textureDescriptorGPU=p}destroyTexture(e){const t=this.backend,n=t.get(e);n.texture.destroy(),n.msaaTexture!==void 0&&n.msaaTexture.destroy(),t.delete(e)}destroySampler(e){const n=this.backend.get(e);delete n.sampler}generateMipmaps(e){const t=this.backend.get(e);if(e.isCubeTexture)for(let n=0;n<6;n++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,n);else{const n=e.image.depth||1;for(let r=0;r<n;r++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,r)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:t,height:n}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:t,height:n,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,t=!1){const n=this.backend,{width:r,height:s}=n.getDrawingBufferSize(),o=this.depthTexture,a=n.get(o).texture;let l,u;if(t?(l=Dy,u=Eb):e&&(l=I0,u=ro),a!==void 0){if(o.image.width===r&&o.image.height===s&&o.format===l&&o.type===u)return a;this.destroyTexture(o)}return o.name="depthBuffer",o.format=l,o.type=u,o.image.width=r,o.image.height=s,this.createTexture(o,{sampleCount:n.utils.getSampleCount(n.renderer.samples),width:r,height:s}),n.get(o).texture}updateTexture(e,t){const n=this.backend.get(e),{textureDescriptorGPU:r}=n;if(!(e.isRenderTargetTexture||r===void 0)){if(e.isDataTexture)this._copyBufferToTexture(t.image,n.texture,r,0,e.flipY);else if(e.isDataArrayTexture||e.isData3DTexture)for(let s=0;s<t.image.depth;s++)this._copyBufferToTexture(t.image,n.texture,r,s,e.flipY,s);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,n.texture,r);else if(e.isCubeTexture)this._copyCubeMapToTexture(t.images,n.texture,r,e.flipY);else if(e.isVideoTexture){const s=e.source.data;n.externalTexture=s}else this._copyImageToTexture(t.image,n.texture,r,0,e.flipY);n.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,t,n,r,s,o){const a=this.backend.device,l=this.backend.get(e),u=l.texture,c=l.textureDescriptorGPU.format,h=this._getBytesPerTexel(c);let f=r*h;f=Math.ceil(f/256)*256;const d=a.createBuffer({size:r*s*h,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),p=a.createCommandEncoder();p.copyTextureToBuffer({texture:u,origin:{x:t,y:n,z:o}},{buffer:d,bytesPerRow:f},{width:r,height:s});const v=this._getTypedArrayType(c);a.queue.submit([p.finish()]),await d.mapAsync(GPUMapMode.READ);const b=d.getMappedRange();return new v(b)}_isEnvironmentTexture(e){const t=e.mapping;return t===Mb||t===Tb||t===tm||t===Ny}_getDefaultTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new ba;n.minFilter=uo,n.magFilter=uo,this.createTexture(n,{width:1,height:1,format:e}),this.defaultTexture[e]=t=n}return this.backend.get(t).texture}_getDefaultCubeTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new pF;n.minFilter=uo,n.magFilter=uo,this.createTexture(n,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=n}return this.backend.get(t).texture}_getDefaultVideoFrame(){let e=this.defaultVideoFrame;if(e===null){const t={timestamp:0,codedWidth:1,codedHeight:1,format:"RGBA"};this.defaultVideoFrame=e=new VideoFrame(new Uint8Array([0,0,0,255]),t)}return e}_copyCubeMapToTexture(e,t,n,r){for(let s=0;s<6;s++){const o=e[s],a=r===!0?v9e[s]:s;o.isDataTexture?this._copyBufferToTexture(o.image,t,n,a,r):this._copyImageToTexture(o,t,n,a,r)}}_copyImageToTexture(e,t,n,r,s){this.backend.device.queue.copyExternalImageToTexture({source:e},{texture:t,mipLevel:0,origin:{x:0,y:0,z:r}},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,n,r)}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new g9e(this.backend.device)),e}_generateMipmaps(e,t,n=0){this._getPassUtils().generateMipmaps(e,t,n)}_flipY(e,t,n=0){this._getPassUtils().flipY(e,t,n)}_copyBufferToTexture(e,t,n,r,s,o=0){const a=this.backend.device,l=e.data,u=this._getBytesPerTexel(n.format),c=e.width*u;a.queue.writeTexture({texture:t,mipLevel:0,origin:{x:0,y:0,z:r}},l,{offset:e.width*e.height*u*o,bytesPerRow:c},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,n,r)}_copyCompressedBufferToTexture(e,t,n){const r=this.backend.device,s=this._getBlockData(n.format),o=n.size.depthOrArrayLayers>1;for(let a=0;a<e.length;a++){const l=e[a],u=l.width,c=l.height,h=o?n.size.depthOrArrayLayers:1,f=Math.ceil(u/s.width)*s.byteLength,d=f*Math.ceil(c/s.height);for(let p=0;p<h;p++)r.queue.writeTexture({texture:t,mipLevel:a,origin:{x:0,y:0,z:p}},l.data,{offset:p*d,bytesPerRow:f,rowsPerImage:Math.ceil(c/s.height)},{width:Math.ceil(u/s.width)*s.width,height:Math.ceil(c/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===we.BC1RGBAUnorm||e===we.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===we.BC2RGBAUnorm||e===we.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===we.BC3RGBAUnorm||e===we.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===we.BC4RUnorm||e===we.BC4RSNorm)return{byteLength:8,width:4,height:4};if(e===we.BC5RGUnorm||e===we.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===we.BC6HRGBUFloat||e===we.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===we.BC7RGBAUnorm||e===we.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===we.ETC2RGB8Unorm||e===we.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===we.ETC2RGB8A1Unorm||e===we.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===we.ETC2RGBA8Unorm||e===we.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===we.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===we.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===we.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===we.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===we.ASTC4x4Unorm||e===we.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===we.ASTC5x4Unorm||e===we.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===we.ASTC5x5Unorm||e===we.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===we.ASTC6x5Unorm||e===we.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===we.ASTC6x6Unorm||e===we.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===we.ASTC8x5Unorm||e===we.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===we.ASTC8x6Unorm||e===we.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===we.ASTC8x8Unorm||e===we.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===we.ASTC10x5Unorm||e===we.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===we.ASTC10x6Unorm||e===we.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===we.ASTC10x8Unorm||e===we.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===we.ASTC10x10Unorm||e===we.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===we.ASTC12x10Unorm||e===we.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===we.ASTC12x12Unorm||e===we.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=o6.ClampToEdge;return e===hC?t=o6.Repeat:e===fC&&(t=o6.MirrorRepeat),t}_convertFilterMode(e){let t=SC.Linear;return(e===uo||e===AN||e===W1)&&(t=SC.Nearest),t}_getBytesPerTexel(e){if(e===we.R8Unorm||e===we.R8Snorm||e===we.R8Uint||e===we.R8Sint)return 1;if(e===we.R16Uint||e===we.R16Sint||e===we.R16Float||e===we.RG8Unorm||e===we.RG8Snorm||e===we.RG8Uint||e===we.RG8Sint)return 2;if(e===we.R32Uint||e===we.R32Sint||e===we.R32Float||e===we.RG16Uint||e===we.RG16Sint||e===we.RG16Float||e===we.RGBA8Unorm||e===we.RGBA8UnormSRGB||e===we.RGBA8Snorm||e===we.RGBA8Uint||e===we.RGBA8Sint||e===we.BGRA8Unorm||e===we.BGRA8UnormSRGB||e===we.RGB9E5UFloat||e===we.RGB10A2Unorm||e===we.RG11B10UFloat||e===we.Depth32Float||e===we.Depth24Plus||e===we.Depth24PlusStencil8||e===we.Depth32FloatStencil8)return 4;if(e===we.RG32Uint||e===we.RG32Sint||e===we.RG32Float||e===we.RGBA16Uint||e===we.RGBA16Sint||e===we.RGBA16Float)return 8;if(e===we.RGBA32Uint||e===we.RGBA32Sint||e===we.RGBA32Float)return 16}_getTypedArrayType(e){if(e===we.R8Uint)return Uint8Array;if(e===we.R8Sint)return Int8Array;if(e===we.R8Unorm)return Uint8Array;if(e===we.R8Snorm)return Int8Array;if(e===we.RG8Uint)return Uint8Array;if(e===we.RG8Sint)return Int8Array;if(e===we.RG8Unorm)return Uint8Array;if(e===we.RG8Snorm)return Int8Array;if(e===we.RGBA8Uint)return Uint8Array;if(e===we.RGBA8Sint)return Int8Array;if(e===we.RGBA8Unorm)return Uint8Array;if(e===we.RGBA8Snorm)return Int8Array;if(e===we.R16Uint)return Uint16Array;if(e===we.R16Sint)return Int16Array;if(e===we.RG16Uint)return Uint16Array;if(e===we.RG16Sint)return Int16Array;if(e===we.RGBA16Uint)return Uint16Array;if(e===we.RGBA16Sint)return Int16Array;if(e===we.R16Float||e===we.RG16Float||e===we.RGBA16Float)return Uint16Array;if(e===we.R32Uint)return Uint32Array;if(e===we.R32Sint)return Int32Array;if(e===we.R32Float)return Float32Array;if(e===we.RG32Uint)return Uint32Array;if(e===we.RG32Sint)return Int32Array;if(e===we.RG32Float)return Float32Array;if(e===we.RGBA32Uint)return Uint32Array;if(e===we.RGBA32Sint)return Int32Array;if(e===we.RGBA32Float)return Float32Array;if(e===we.BGRA8Unorm||e===we.BGRA8UnormSRGB)return Uint8Array;if(e===we.RGB10A2Unorm||e===we.RGB9E5UFloat||e===we.RG11B10UFloat)return Uint32Array;if(e===we.Depth32Float)return Float32Array;if(e===we.Depth24Plus||e===we.Depth24PlusStencil8)return Uint32Array;if(e===we.Depth32FloatStencil8)return Float32Array}_getDimension(e){let t;return e.isData3DTexture?t=Rj.ThreeD:t=Rj.TwoD,t}}function eD(i,e=null){const t=i.format,n=i.type,r=i.colorSpace;let s;if(i.isFramebufferTexture===!0&&i.type===gf)s=we.BGRA8Unorm;else if(i.isCompressedTexture===!0||i.isCompressedArrayTexture===!0)switch(t){case OM:s=r===pn?we.BC1RGBAUnormSRGB:we.BC1RGBAUnorm;break;case FM:s=r===pn?we.BC2RGBAUnormSRGB:we.BC2RGBAUnorm;break;case kM:s=r===pn?we.BC3RGBAUnormSRGB:we.BC3RGBAUnorm;break;case gN:s=r===pn?we.ETC2RGB8UnormSRGB:we.ETC2RGB8Unorm;break;case yN:s=r===pn?we.ETC2RGBA8UnormSRGB:we.ETC2RGBA8Unorm;break;case vN:s=r===pn?we.ASTC4x4UnormSRGB:we.ASTC4x4Unorm;break;case _N:s=r===pn?we.ASTC5x4UnormSRGB:we.ASTC5x4Unorm;break;case xN:s=r===pn?we.ASTC5x5UnormSRGB:we.ASTC5x5Unorm;break;case bN:s=r===pn?we.ASTC6x5UnormSRGB:we.ASTC6x5Unorm;break;case wN:s=r===pn?we.ASTC6x6UnormSRGB:we.ASTC6x6Unorm;break;case SN:s=r===pn?we.ASTC8x5UnormSRGB:we.ASTC8x5Unorm;break;case MN:s=r===pn?we.ASTC8x6UnormSRGB:we.ASTC8x6Unorm;break;case TN:s=r===pn?we.ASTC8x8UnormSRGB:we.ASTC8x8Unorm;break;case EN:s=r===pn?we.ASTC10x5UnormSRGB:we.ASTC10x5Unorm;break;case CN:s=r===pn?we.ASTC10x6UnormSRGB:we.ASTC10x6Unorm;break;case RN:s=r===pn?we.ASTC10x8UnormSRGB:we.ASTC10x8Unorm;break;case PN:s=r===pn?we.ASTC10x10UnormSRGB:we.ASTC10x10Unorm;break;case BN:s=r===pn?we.ASTC12x10UnormSRGB:we.ASTC12x10Unorm;break;case IN:s=r===pn?we.ASTC12x12UnormSRGB:we.ASTC12x12Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case sv:switch(n){case C_:s=we.RGBA8Snorm;break;case R_:s=we.RGBA16Sint;break;case b1:s=we.RGBA16Uint;break;case ro:s=we.RGBA32Uint;break;case da:s=we.RGBA32Sint;break;case gf:s=r===pn?we.RGBA8UnormSRGB:we.RGBA8Unorm;break;case Ef:s=we.RGBA16Float;break;case Dl:s=we.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",n)}break;case oF:switch(n){case fne:s=we.RGB9E5UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",n)}break;case aF:switch(n){case C_:s=we.R8Snorm;break;case R_:s=we.R16Sint;break;case b1:s=we.R16Uint;break;case ro:s=we.R32Uint;break;case da:s=we.R32Sint;break;case gf:s=we.R8Unorm;break;case Ef:s=we.R16Float;break;case Dl:s=we.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",n)}break;case Lx:switch(n){case C_:s=we.RG8Snorm;break;case R_:s=we.RG16Sint;break;case b1:s=we.RG16Uint;break;case ro:s=we.RG32Uint;break;case da:s=we.RG32Sint;break;case gf:s=we.RG8Unorm;break;case Ef:s=we.RG16Float;break;case Dl:s=we.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",n)}break;case I0:switch(n){case b1:s=we.Depth16Unorm;break;case ro:s=we.Depth24Plus;break;case Dl:s=we.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",n)}break;case Dy:switch(n){case Eb:s=we.Depth24PlusStencil8;break;case Dl:e&&e.features.has(ZN.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),s=we.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",n)}break;case lF:switch(n){case da:s=we.R32Sint;break;case ro:s=we.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",n)}break;case uF:switch(n){case da:s=we.RG32Sint;break;case ro:s=we.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",n)}break;case cF:switch(n){case da:s=we.RGBA32Sint;break;case ro:s=we.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",n)}break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}return s}const x9e=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,b9e=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,Gj={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},w9e=i=>{i=i.trim();const e=i.match(x9e);if(e!==null&&e.length===4){const t=e[2],n=[];let r=null;for(;(r=b9e.exec(t))!==null;)n.push({name:r[1],type:r[2]});const s=[];for(let c=0;c<n.length;c++){const{name:h,type:f}=n[c];let d=f;d.startsWith("texture")&&(d=f.split("<")[0]),d=Gj[d]||d,s.push(new GF(d,h))}const o=i.substring(e[0].length),a=e[3]||"void",l=e[1]!==void 0?e[1]:"";return{type:Gj[a]||a,inputs:s,name:l,inputsCode:t,blockCode:o,outputType:a}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class S9e extends VF{constructor(e){const{type:t,inputs:n,name:r,inputsCode:s,blockCode:o,outputType:a}=w9e(e);super(t,n,r),this.inputsCode=s,this.blockCode=o,this.outputType=a}getCode(e=this.name){const t=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}class M9e extends lre{parseFunction(e){return new S9e(e)}}const Hg=self.GPUShaderStage,nM={vertex:Hg?Hg.VERTEX:1,fragment:Hg?Hg.FRAGMENT:2,compute:Hg?Hg.COMPUTE:4},Hj={instance:!0,swizzleAssign:!1,storageBuffer:!0},T9e={"^^":"tsl_xor"},E9e={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",imat2:"mat2x2<i32>",umat2:"mat2x2<u32>",bmat2:"mat2x2<bool>",mat3:"mat3x3<f32>",imat3:"mat3x3<i32>",umat3:"mat3x3<u32>",bmat3:"mat3x3<bool>",mat4:"mat4x4<f32>",imat4:"mat4x4<i32>",umat4:"mat4x4<u32>",bmat4:"mat4x4<bool>"},ef={tsl_xor:new Io("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new Io("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new Io("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new Io("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new Io("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new Io("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new Io("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new Io("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new Io("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping:new Io(`
fn tsl_repeatWrapping( uv : vec2<f32>, dimension : vec2<u32> ) -> vec2<u32> {

	let uvScaled = vec2<u32>( uv * vec2<f32>( dimension ) );

	return ( ( uvScaled % dimension ) + dimension ) % dimension;

}
`),biquadraticTexture:new Io(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, level : i32 ) -> vec4f {

	let iRes = vec2i( textureDimensions( map, level ) );
	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2i( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2i( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2i( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2i( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},Z2={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};/Windows/g.test(navigator.userAgent)&&(ef.pow_float=new Io("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),ef.pow_vec2=new Io("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[ef.pow_float]),ef.pow_vec3=new Io("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[ef.pow_float]),ef.pow_vec4=new Io("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[ef.pow_float]),Z2.pow_float="tsl_pow_float",Z2.pow_vec2="tsl_pow_vec2",Z2.pow_vec3="tsl_pow_vec3",Z2.pow_vec4="tsl_pow_vec4");let yre="";/Firefox/g.test(navigator.userAgent)!==!0&&(yre+=`diagnostic( off, derivative_uniformity );
`);class C9e extends tre{constructor(e,t){super(e,t,new M9e),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==nm}_generateTextureSample(e,t,n,r,s=this.shaderStage){return s==="fragment"?r?`textureSample( ${t}, ${t}_sampler, ${n}, ${r} )`:`textureSample( ${t}, ${t}_sampler, ${n} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n):this.generateTextureLod(e,t,n,"0")}_generateVideoSample(e,t,n=this.shaderStage){if(n==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${t}.x, 1.0 - ${t}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${n} shader.`)}_generateTextureSampleLevel(e,t,n,r,s,o=this.shaderStage){return o==="fragment"&&this.isUnfilterable(e)===!1?`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${r} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,r):this.generateTextureLod(e,t,n,r)}generateFilteredTexture(e,t,n,r="0"){return this._include("biquadraticTexture"),`tsl_biquadraticTexture( ${t}, ${n}, i32( ${r} ) )`}generateTextureLod(e,t,n,r="0"){this._include("repeatWrapping");const s=e.isMultisampleRenderTargetTexture===!0?`textureDimensions( ${t} )`:`textureDimensions( ${t}, 0 )`;return`textureLoad( ${t}, tsl_repeatWrapping( ${n}, ${s} ), i32( ${r} ) )`}generateTextureLoad(e,t,n,r,s="0u"){return r?`textureLoad( ${t}, ${n}, ${r}, ${s} )`:`textureLoad( ${t}, ${n}, ${s} )`}generateTextureStore(e,t,n,r){return`textureStore( ${t}, ${n}, ${r} )`}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===Dl||e.isMultisampleRenderTargetTexture===!0}generateTexture(e,t,n,r,s=this.shaderStage){let o=null;return e.isVideoTexture===!0?o=this._generateVideoSample(t,n,s):this.isUnfilterable(e)?o=this.generateTextureLod(e,t,n,"0",r,s):o=this._generateTextureSample(e,t,n,r,s),o}generateTextureGrad(e,t,n,r,s,o=this.shaderStage){if(o==="fragment")return`textureSampleGrad( ${t}, ${t}_sampler, ${n},  ${r[0]}, ${r[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${o} shader.`)}generateTextureCompare(e,t,n,r,s,o=this.shaderStage){if(o==="fragment")return`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${r} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}generateTextureLevel(e,t,n,r,s,o=this.shaderStage){let a=null;return e.isVideoTexture===!0?a=this._generateVideoSample(t,n,o):a=this._generateTextureSampleLevel(e,t,n,r,s,o),a}generateTextureBias(e,t,n,r,s,o=this.shaderStage){if(o==="fragment")return`textureSampleBias( ${t}, ${t}_sampler, ${n}, ${r} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${o} shader.`)}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const n=e.name,r=e.type;return r==="texture"||r==="cubeTexture"||r==="storageTexture"||r==="texture3D"?n:r==="buffer"||r==="storageBuffer"?`NodeBuffer_${e.id}.${n}`:e.groupNode.name+"."+n}return super.getPropertyName(e)}getOutputStructName(){return"output"}_getUniformGroupCount(e){return Object.keys(this.uniforms[e]).length}getFunctionOperator(e){const t=T9e[e];return t!==void 0?(this._include(t),t):null}getStorageAccess(e){if(e.isStorageTextureNode)switch(e.access){case Cj.ReadOnly:return"read";case Cj.WriteOnly:return"write";default:return"read_write"}else switch(e.access){case JN.Storage:return"read_write";case JN.ReadOnlyStorage:return"read";default:return"write"}}getUniformFromNode(e,t,n,r=null){const s=super.getUniformFromNode(e,t,n,r),o=this.getDataFromNode(e,n,this.globalCache);if(o.uniformGPU===void 0){let a;const l=e.groupNode,u=l.name,c=this.getBindGroupArray(u,n);if(t==="texture"||t==="cubeTexture"||t==="storageTexture"||t==="texture3D"){let h=null;if(t==="texture"||t==="storageTexture"?h=new a5(s.name,s.node,l,e.access?e.access:null):t==="cubeTexture"?h=new Are(s.name,s.node,l,e.access?e.access:null):t==="texture3D"&&(h=new mre(s.name,s.node,l,e.access?e.access:null)),h.store=e.isStorageTextureNode===!0,h.setVisibility(nM[n]),n==="fragment"&&this.isUnfilterable(e.value)===!1&&h.store===!1){const f=new d9e(`${s.name}_sampler`,s.node,l);f.setVisibility(nM[n]),c.push(f,h),a=[f,h]}else c.push(h),a=[h]}else if(t==="buffer"||t==="storageBuffer"){const h=t==="storageBuffer"?m9e:dre,f=new h(e,l);f.setVisibility(nM[n]),c.push(f),a=f}else{const h=this.uniformGroups[n]||(this.uniformGroups[n]={});let f=h[u];f===void 0&&(f=new pre(u,l),f.setVisibility(nM[n]),h[u]=f,c.push(f)),a=this.getNodeUniform(s,t),f.addUniform(a)}o.uniformGPU=a}return s}getBuiltin(e,t,n,r=this.shaderStage){const s=this.builtins[r]||(this.builtins[r]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:t,type:n}),t}hasBuiltin(e,t=this.shaderStage){return this.builtins[t]!==void 0&&this.builtins[t].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),r=[];for(const o of t.inputs)r.push(o.name+" : "+this.getType(o.type));let s=`fn ${t.name}( ${r.join(", ")} ) -> ${this.getType(t.type)} {
${n.vars}
${n.code}
`;return n.result&&(s+=`	return ${n.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}isFlipY(){return!1}enableDirective(e,t=this.shaderStage){(this.directives[t]||(this.directives[t]=new Set)).add(e)}getDirectives(e){const t=[],n=this.directives[e];if(n!==void 0)for(const r of n)t.push(`enable ${r};`);return t.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}getBuiltins(e){const t=[],n=this.builtins[e];if(n!==void 0)for(const{name:r,property:s,type:o}of n.values())t.push(`@builtin( ${r} ) ${s} : ${o}`);return t.join(`,
	`)}getScopedArray(e,t,n,r){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:n,bufferCount:r}),e}getScopedArrays(e){if(e!=="compute")return;const t=[];for(const{name:n,scope:r,bufferType:s,bufferCount:o}of this.scopedArrays.values()){const a=this.getType(s);t.push(`var<${r}> ${n}: array< ${a}, ${o} >;`)}return t.join(`
`)}getAttributes(e){const t=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","id","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const n=this.getBuiltins("attribute");n&&t.push(n);const r=this.getAttributesArray();for(let s=0,o=r.length;s<o;s++){const a=r[s],l=a.name,u=this.getType(a.type);t.push(`@location( ${s} ) ${l} : ${u}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[],n=e.getMemberTypes();for(let s=0;s<n.length;s++){const o=n[s];t.push(`	@location( ${s} ) m${s} : ${o}<f32>`)}const r=this.getBuiltins("output");return r&&t.push("	"+r),t.join(`,
`)}getStructs(e){const t=[],n=this.structs[e];for(let r=0,s=n.length;r<s;r++){const o=n[r],a=o.name;let l=`struct ${a} {
`;l+=this.getStructMembers(o),l+=`
}`,t.push(l),t.push(`
var<private> output : ${a};

`)}return t.join(`

`)}getVar(e,t){return`var ${t} : ${this.getType(e)}`}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const r of n)t.push(`	${this.getVar(r.type,r.name)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,o=this.vars[e];for(let a=0;a<s.length;a++){const l=s[a];if(l.needsInterpolation){let u=`@location( ${a} )`;/^(int|uint|ivec|uvec)/.test(l.type)&&(u+=" @interpolate( flat )"),t.push(`${u} ${l.name} : ${this.getType(l.type)}`)}else e==="vertex"&&o.includes(l)===!1&&o.push(l)}}const n=this.getBuiltins(e);n&&t.push(n);const r=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+r):r}getUniforms(e){const t=this.uniforms[e],n=[],r=[],s=[],o={};for(const l of t){const u=l.groupNode.name,c=this.bindingsIndexes[u];if(l.type==="texture"||l.type==="cubeTexture"||l.type==="storageTexture"||l.type==="texture3D"){const h=l.node.value;e==="fragment"&&this.isUnfilterable(h)===!1&&l.node.isStorageTextureNode!==!0&&(h.isDepthTexture===!0&&h.compareFunction!==null?n.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var ${l.name}_sampler : sampler_comparison;`):n.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var ${l.name}_sampler : sampler;`));let f,d="";if(h.isMultisampleRenderTargetTexture===!0&&(d="_multisampled"),h.isCubeTexture===!0)f="texture_cube<f32>";else if(h.isDataArrayTexture===!0||h.isCompressedArrayTexture===!0)f="texture_2d_array<f32>";else if(h.isDepthTexture===!0)f=`texture_depth${d}_2d`;else if(h.isVideoTexture===!0)f="texture_external";else if(h.isData3DTexture===!0)f="texture_3d<f32>";else if(l.node.isStorageTextureNode===!0){const p=eD(h),v=this.getStorageAccess(l.node);f=`texture_storage_2d<${p}, ${v}>`}else{const p=this.getComponentTypeFromTexture(h).charAt(0);f=`texture${d}_2d<${p}32>`}n.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var ${l.name} : ${f};`)}else if(l.type==="buffer"||l.type==="storageBuffer"){const h=l.node,f=this.getType(h.bufferType),d=h.bufferCount,p=d>0?", "+d:"",v=h.isAtomic?`atomic<${f}>`:`${f}`,b=`	${l.name} : array< ${v}${p} >
`,_=h.isStorageBufferNode?`storage, ${this.getStorageAccess(h)}`:"uniform";r.push(this._getWGSLStructBinding("NodeBuffer_"+h.id,b,_,c.binding++,c.group))}else{const h=this.getType(this.getVectorType(l.type)),f=l.groupNode.name;(o[f]||(o[f]={index:c.binding++,id:c.group,snippets:[]})).snippets.push(`	${l.name} : ${h}`)}}for(const l in o){const u=o[l];s.push(this._getWGSLStructBinding(l,u.snippets.join(`,
`),"uniform",u.index,u.id))}let a=n.join(`
`);return a+=r.join(`
`),a+=s.join(`
`),a}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){const n=e[t];n.uniforms=this.getUniforms(t),n.attributes=this.getAttributes(t),n.varyings=this.getVaryings(t),n.structs=this.getStructs(t),n.vars=this.getVars(t),n.codes=this.getCodes(t),n.directives=this.getDirectives(t),n.scopedArrays=this.getScopedArrays(t);let r=`// code

`;r+=this.flowCode[t];const s=this.flowNodes[t],o=s[s.length-1],a=o.outputNode,l=a!==void 0&&a.isOutputStructNode===!0;for(const u of s){const c=this.getFlowData(u),h=u.name;if(h&&(r.length>0&&(r+=`
`),r+=`	// flow -> ${h}
	`),r+=`${c.code}
	`,u===o&&t!=="compute"){if(r+=`// result

	`,t==="vertex")r+=`varyings.Vertex = ${c.result};`;else if(t==="fragment")if(l)n.returnType=a.nodeType,r+=`return ${c.result};`;else{let f="	@location(0) color: vec4<f32>";const d=this.getBuiltins("output");d&&(f+=`,
	`+d),n.returnType="OutputStruct",n.structs+=this._getWGSLStruct("OutputStruct",f),n.structs+=`
var<private> output : OutputStruct;

`,r+=`output.color = ${c.result};

	return output;`}}}n.flow=r}this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e,t=null){let n;return t!==null&&(n=this._getWGSLMethod(e+"_"+t)),n===void 0&&(n=this._getWGSLMethod(e)),n||e}getType(e){return E9e[e]||e}isAvailable(e){let t=Hj[e];return t===void 0&&(e==="float32Filterable"&&(t=this.renderer.hasFeature("float32-filterable")),Hj[e]=t),t}_getWGSLMethod(e){return ef[e]!==void 0&&this._include(e),Z2[e]}_include(e){const t=ef[e];return t.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(t),t}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${yre}

// uniforms
${e.uniforms}

// structs
${e.structs}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${t} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = id.x + id.y * numWorkgroups.x * u32(${t}) + id.z * numWorkgroups.x * numWorkgroups.y * u32(${t});

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,n,r=0,s=0){const o=e+"Struct";return`${this._getWGSLStruct(o,t)}
@binding( ${r} ) @group( ${s} )
var<${n}> ${e} : ${o};`}}class R9e{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=we.Depth24PlusStencil8:e.depth&&(t=we.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).format}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=this.getPreferredCanvasFormat(),t}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return E1.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return E1.LineList;if(e.isLine)return E1.LineStrip;if(e.isMesh)return E1.TriangleList}getSampleCount(e){let t=1;return e>1&&(t=Math.pow(2,Math.floor(Math.log2(e))),t===2&&(t=4)),t}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){return navigator.userAgent.includes("Quest")?we.BGRA8Unorm:navigator.gpu.getPreferredCanvasFormat()}}const P9e=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),B9e=new Map([[Mne,["float16"]]]),I9e=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class N9e{constructor(e){this.backend=e}createAttribute(e,t){const n=this._getBufferAttribute(e),r=this.backend,s=r.get(n);let o=s.buffer;if(o===void 0){const a=r.device;let l=n.array;if(e.normalized===!1&&(l.constructor===Int16Array||l.constructor===Uint16Array)){const c=new Uint32Array(l.length);for(let h=0;h<l.length;h++)c[h]=l[h];l=c}if(n.array=l,(n.isStorageBufferAttribute||n.isStorageInstancedBufferAttribute)&&n.itemSize===3){l=new l.constructor(n.count*4);for(let c=0;c<n.count;c++)l.set(n.array.subarray(c*3,c*3+3),c*4);n.itemSize=4,n.array=l}const u=l.byteLength+(4-l.byteLength%4)%4;o=a.createBuffer({label:n.name,size:u,usage:t,mappedAtCreation:!0}),new l.constructor(o.getMappedRange()).set(l),o.unmap(),s.buffer=o}}updateAttribute(e){const t=this._getBufferAttribute(e),n=this.backend,r=n.device,s=n.get(t).buffer,o=t.array,a=t.updateRanges;if(a.length===0)r.queue.writeBuffer(s,0,o,0);else{for(let l=0,u=a.length;l<u;l++){const c=a[l];r.queue.writeBuffer(s,0,o,c.start*o.BYTES_PER_ELEMENT,c.count*o.BYTES_PER_ELEMENT)}t.clearUpdateRanges()}}createShaderVertexBuffers(e){const t=e.getAttributes(),n=new Map;for(let r=0;r<t.length;r++){const s=t[r],o=s.array.BYTES_PER_ELEMENT,a=this._getBufferAttribute(s);let l=n.get(a);if(l===void 0){let h,f;s.isInterleavedBufferAttribute===!0?(h=s.data.stride*o,f=s.data.isInstancedInterleavedBuffer?Y3.Instance:Y3.Vertex):(h=s.itemSize*o,f=s.isInstancedBufferAttribute?Y3.Instance:Y3.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(h=4),l={arrayStride:h,attributes:[],stepMode:f},n.set(a,l)}const u=this._getVertexFormat(s),c=s.isInterleavedBufferAttribute===!0?s.offset*o:0;l.attributes.push({shaderLocation:r,offset:c,format:u})}return Array.from(n.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,n=t.device,s=t.get(this._getBufferAttribute(e)).buffer,o=s.size,a=n.createBuffer({label:e.name,size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),l=n.createCommandEncoder({});l.copyBufferToBuffer(s,0,a,0,o),a.unmap();const u=l.finish();return n.queue.submit([u]),await a.mapAsync(GPUMapMode.READ),a.getMappedRange()}_getVertexFormat(e){const{itemSize:t,normalized:n}=e,r=e.array.constructor,s=e.constructor;let o;if(t==1)o=I9e.get(r);else{const l=(B9e.get(s)||P9e.get(r))[n?1:0];if(l){const u=r.BYTES_PER_ELEMENT*t,h=Math.floor((u+3)/4)*4/r.BYTES_PER_ELEMENT;if(h%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");o=`${l}x${h}`}}return o||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),o}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class D9e{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const n=this.backend.device,r=[];let s=0;for(const o of e.bindings){const a={binding:s++,visibility:o.visibility};if(o.isUniformBuffer||o.isStorageBuffer){const l={};o.isStorageBuffer&&(l.type=o.access),a.buffer=l}else if(o.isSampler){const l={};o.texture.isDepthTexture&&o.texture.compareFunction!==null&&(l.type="comparison"),a.sampler=l}else if(o.isSampledTexture&&o.texture.isVideoTexture)a.externalTexture={};else if(o.isSampledTexture&&o.store){const l=this.backend.get(o.texture).texture.format,u=o.access;a.storageTexture={format:l,access:u}}else if(o.isSampledTexture){const l={};if(o.texture.isMultisampleRenderTargetTexture===!0&&(l.multisampled=!0),o.texture.isDepthTexture)l.sampleType=N2.Depth;else if(o.texture.isDataTexture||o.texture.isDataArrayTexture||o.texture.isData3DTexture){const u=o.texture.type;u===da?l.sampleType=N2.SInt:u===ro?l.sampleType=N2.UInt:u===Dl&&(this.backend.hasFeature("float32-filterable")?l.sampleType=N2.Float:l.sampleType=N2.UnfilterableFloat)}o.isSampledCubeTexture?l.viewDimension=vu.Cube:o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?l.viewDimension=vu.TwoDArray:o.isSampledTexture3D&&(l.viewDimension=vu.ThreeD),a.texture=l}else console.error(`WebGPUBindingUtils: Unsupported binding "${o}".`);r.push(a)}return n.createBindGroupLayout({entries:r})}createBindings(e){const{backend:t,bindGroupLayoutCache:n}=this,r=t.get(e);let s=n.get(e.bindingsReference);s===void 0&&(s=this.createBindingsLayout(e),n.set(e.bindingsReference,s));const o=this.createBindGroup(e,s);r.layout=s,r.group=o}updateBinding(e){const t=this.backend,n=t.device,r=e.buffer,s=t.get(e).buffer;n.queue.writeBuffer(s,0,r,0)}createBindGroup(e,t){const n=this.backend,r=n.device;let s=0;const o=[];for(const a of e.bindings){if(a.isUniformBuffer){const l=n.get(a);if(l.buffer===void 0){const u=a.byteLength,c=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,h=r.createBuffer({label:"bindingBuffer_"+a.name,size:u,usage:c});l.buffer=h}o.push({binding:s,resource:{buffer:l.buffer}})}else if(a.isStorageBuffer){const l=n.get(a);if(l.buffer===void 0){const u=a.attribute;l.buffer=n.get(u).buffer}o.push({binding:s,resource:{buffer:l.buffer}})}else if(a.isSampler){const l=n.get(a.texture);o.push({binding:s,resource:l.sampler})}else if(a.isSampledTexture){const l=n.get(a.texture);let u;if(l.externalTexture!==void 0)u=r.importExternalTexture({source:l.externalTexture});else{const c=a.store?1:l.texture.mipLevelCount,h=`view-${l.texture.width}-${l.texture.height}-${c}`;if(u=l[h],u===void 0){const f=VFe.All;let d;a.isSampledCubeTexture?d=vu.Cube:a.isSampledTexture3D?d=vu.ThreeD:a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?d=vu.TwoDArray:d=vu.TwoD,u=l[h]=l.texture.createView({aspect:f,dimension:d,mipLevelCount:c})}}o.push({binding:s,resource:u})}s++}return r.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:o})}}class L9e{constructor(e){this.backend=e}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,t){const{object:n,material:r,geometry:s,pipeline:o}=e,{vertexProgram:a,fragmentProgram:l}=o,u=this.backend,c=u.device,h=u.utils,f=u.get(o),d=[];for(const O of e.getBindings()){const U=u.get(O);d.push(U.layout)}const p=u.attributeUtils.createShaderVertexBuffers(e);let v;r.transparent===!0&&r.blending!==Iy&&(v=this._getBlending(r));let b={};r.stencilWrite===!0&&(b={compare:this._getStencilCompare(r),failOp:this._getStencilOperation(r.stencilFail),depthFailOp:this._getStencilOperation(r.stencilZFail),passOp:this._getStencilOperation(r.stencilZPass)});const _=this._getColorWriteMask(r),M=[];if(e.context.textures!==null){const O=e.context.textures;for(let U=0;U<O.length;U++){const Q=h.getTextureFormatGPU(O[U]);M.push({format:Q,blend:v,writeMask:_})}}else{const O=h.getCurrentColorFormat(e.context);M.push({format:O,blend:v,writeMask:_})}const E=u.get(a).module,R=u.get(l).module,L=this._getPrimitiveState(n,s,r),I=this._getDepthCompare(r),D=h.getCurrentDepthStencilFormat(e.context),k=this._getSampleCount(e.context),G={label:`renderPipeline_${r.name||r.type}_${r.id}`,vertex:Object.assign({},E,{buffers:p}),fragment:Object.assign({},R,{targets:M}),primitive:L,depthStencil:{format:D,depthWriteEnabled:r.depthWrite,depthCompare:I,stencilFront:b,stencilBack:{},stencilReadMask:r.stencilFuncMask,stencilWriteMask:r.stencilWriteMask},multisample:{count:k,alphaToCoverageEnabled:r.alphaToCoverage&&k>1},layout:c.createPipelineLayout({bindGroupLayouts:d})};if(t===null)f.pipeline=c.createRenderPipeline(G);else{const O=new Promise(U=>{c.createRenderPipelineAsync(G).then(Q=>{f.pipeline=Q,U()})});t.push(O)}}createBundleEncoder(e){const t=this.backend,{utils:n,device:r}=t,s=n.getCurrentDepthStencilFormat(e),o=n.getCurrentColorFormat(e),a=this._getSampleCount(e),l={label:"renderBundleEncoder",colorFormats:[o],depthStencilFormat:s,sampleCount:a};return r.createRenderBundleEncoder(l)}createComputePipeline(e,t){const n=this.backend,r=n.device,s=n.get(e.computeProgram).module,o=n.get(e),a=[];for(const l of t){const u=n.get(l);a.push(u.layout)}o.pipeline=r.createComputePipeline({compute:s,layout:r.createPipelineLayout({bindGroupLayouts:a})})}_getBlending(e){let t,n;const r=e.blending,s=e.blendSrc,o=e.blendDst,a=e.blendEquation;if(r===$te){const l=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,u=e.blendDstAlpha!==null?e.blendDstAlpha:o,c=e.blendEquationAlpha!==null?e.blendEquationAlpha:a;t={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(o),operation:this._getBlendOperation(a)},n={srcFactor:this._getBlendFactor(l),dstFactor:this._getBlendFactor(u),operation:this._getBlendOperation(c)}}else{const l=e.premultipliedAlpha,u=(c,h,f,d)=>{t={srcFactor:c,dstFactor:h,operation:VA.Add},n={srcFactor:f,dstFactor:d,operation:VA.Add}};if(l)switch(r){case _p:u(Bn.One,Bn.OneMinusSrcAlpha,Bn.One,Bn.OneMinusSrcAlpha);break;case sC:u(Bn.One,Bn.One,Bn.One,Bn.One);break;case oC:u(Bn.Zero,Bn.OneMinusSrc,Bn.Zero,Bn.One);break;case aC:u(Bn.Zero,Bn.Src,Bn.Zero,Bn.SrcAlpha);break}else switch(r){case _p:u(Bn.SrcAlpha,Bn.OneMinusSrcAlpha,Bn.One,Bn.OneMinusSrcAlpha);break;case sC:u(Bn.SrcAlpha,Bn.One,Bn.SrcAlpha,Bn.One);break;case oC:u(Bn.Zero,Bn.OneMinusSrc,Bn.Zero,Bn.One);break;case aC:u(Bn.Zero,Bn.Src,Bn.Zero,Bn.Src);break}}if(t!==void 0&&n!==void 0)return{color:t,alpha:n};console.error("THREE.WebGPURenderer: Invalid blending: ",r)}_getBlendFactor(e){let t;switch(e){case Yte:t=Bn.Zero;break;case Qte:t=Bn.One;break;case Kte:t=Bn.Src;break;case Jte:t=Bn.OneMinusSrc;break;case lC:t=Bn.SrcAlpha;break;case uC:t=Bn.OneMinusSrcAlpha;break;case tne:t=Bn.Dst;break;case nne:t=Bn.OneMinusDstColor;break;case Zte:t=Bn.DstAlpha;break;case ene:t=Bn.OneMinusDstAlpha;break;case ine:t=Bn.SrcAlphaSaturated;break;case eFe:t=Bn.Constant;break;case tFe:t=Bn.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const n=e.stencilFunc;switch(n){case _6e:t=eo.Never;break;case DN:t=eo.Always;break;case x6e:t=eo.Less;break;case w6e:t=eo.LessEqual;break;case b6e:t=eo.Equal;break;case T6e:t=eo.GreaterEqual;break;case S6e:t=eo.Greater;break;case M6e:t=eo.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",n)}return t}_getStencilOperation(e){let t;switch(e){case KA:t=qd.Keep;break;case d6e:t=qd.Zero;break;case p6e:t=qd.Replace;break;case v6e:t=qd.Invert;break;case A6e:t=qd.IncrementClamp;break;case m6e:t=qd.DecrementClamp;break;case g6e:t=qd.IncrementWrap;break;case y6e:t=qd.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case tp:t=VA.Add;break;case Wte:t=VA.Subtract;break;case Xte:t=VA.ReverseSubtract;break;case XPe:t=VA.Min;break;case YPe:t=VA.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,n){const r={},s=this.backend.utils;switch(r.topology=s.getPrimitiveTopology(e,n),t.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(r.stripIndexFormat=t.index.array instanceof Uint16Array?Fy.Uint16:Fy.Uint32),n.side){case Dx:r.frontFace=r6.CCW,r.cullMode=s6.Back;break;case Jf:r.frontFace=r6.CCW,r.cullMode=s6.Front;break;case rC:r.frontFace=r6.CCW,r.cullMode=s6.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",n.side);break}return r}_getColorWriteMask(e){return e.colorWrite===!0?Ej.All:Ej.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=eo.Always;else{const n=e.depthFunc;switch(n){case rne:t=eo.Never;break;case sne:t=eo.Always;break;case one:t=eo.Less;break;case cC:t=eo.LessEqual;break;case ane:t=eo.Equal;break;case lne:t=eo.GreaterEqual;break;case une:t=eo.Greater;break;case cne:t=eo.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",n)}}return t}}class O9e extends gre{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.trackTimestamp=e.trackTimestamp===!0,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new R9e(this),this.attributeUtils=new N9e(this),this.bindingUtils=new D9e(this),this.pipelineUtils=new L9e(this),this.textureUtils=new _9e(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters;let n;if(t.device===void 0){const o={powerPreference:t.powerPreference},a=await navigator.gpu.requestAdapter(o);if(a===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const l=Object.values(ZN),u=[];for(const h of l)a.features.has(h)&&u.push(h);const c={requiredFeatures:u,requiredLimits:t.requiredLimits};n=await a.requestDevice(c)}else n=t.device;const r=t.context!==void 0?t.context:e.domElement.getContext("webgpu");this.device=n,this.context=r;const s=t.alpha?"premultiplied":"opaque";this.trackTimestamp=this.trackTimestamp&&this.hasFeature(ZN.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s}),this.updateSize()}get coordinateSystem(){return im}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const n=this.renderer;e={colorAttachments:[{view:null}],depthStencilAttachment:{view:this.textureUtils.getDepthBuffer(n.depth,n.stencil).createView()}};const r=e.colorAttachments[0];this.renderer.samples>0?r.view=this.colorBuffer.createView():r.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const t=e.colorAttachments[0];return this.renderer.samples>0?t.resolveTarget=this.context.getCurrentTexture().createView():t.view=this.context.getCurrentTexture().createView(),e}_getRenderPassDescriptor(e){const t=e.renderTarget,n=this.get(t);let r=n.descriptors;if(r===void 0||n.width!==t.width||n.height!==t.height||n.activeMipmapLevel!==t.activeMipmapLevel||n.samples!==t.samples){r={},n.descriptors=r;const a=()=>{t.removeEventListener("dispose",a),this.delete(t)};t.addEventListener("dispose",a)}const s=e.getCacheKey();let o=r[s];if(o===void 0){const a=e.textures,l=[];for(let h=0;h<a.length;h++){const f=this.get(a[h]),d=f.texture.createView({baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,dimension:vu.TwoD});let p,v;f.msaaTexture!==void 0?(p=f.msaaTexture.createView(),v=d):(p=d,v=void 0),l.push({view:p,resolveTarget:v,loadOp:os.Load,storeOp:to.Store})}const c={view:this.get(e.depthTexture).texture.createView()};o={colorAttachments:l,depthStencilAttachment:c},r[s]=o,n.width=t.width,n.height=t.height,n.samples=t.samples,n.activeMipmapLevel=t.activeMipmapLevel}return o}beginRender(e){const t=this.get(e),n=this.device,r=e.occlusionQueryCount;let s;r>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,s=n.createQuerySet({type:"occlusion",count:r}),t.occlusionQuerySet=s,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(r),t.lastOcclusionObject=null);let o;e.textures===null?o=this._getDefaultRenderPassDescriptor():o=this._getRenderPassDescriptor(e),this.initTimestampQuery(e,o),o.occlusionQuerySet=s;const a=o.depthStencilAttachment;if(e.textures!==null){const c=o.colorAttachments;for(let h=0;h<c.length;h++){const f=c[h];e.clearColor?(f.clearValue=h===0?e.clearColorValue:{r:0,g:0,b:0,a:1},f.loadOp=os.Clear,f.storeOp=to.Store):(f.loadOp=os.Load,f.storeOp=to.Store)}}else{const c=o.colorAttachments[0];e.clearColor?(c.clearValue=e.clearColorValue,c.loadOp=os.Clear,c.storeOp=to.Store):(c.loadOp=os.Load,c.storeOp=to.Store)}e.depth&&(e.clearDepth?(a.depthClearValue=e.clearDepthValue,a.depthLoadOp=os.Clear,a.depthStoreOp=to.Store):(a.depthLoadOp=os.Load,a.depthStoreOp=to.Store)),e.stencil&&(e.clearStencil?(a.stencilClearValue=e.clearStencilValue,a.stencilLoadOp=os.Clear,a.stencilStoreOp=to.Store):(a.stencilLoadOp=os.Load,a.stencilStoreOp=to.Store));const l=n.createCommandEncoder({label:"renderContext_"+e.id}),u=l.beginRenderPass(o);if(t.descriptor=o,t.encoder=l,t.currentPass=u,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.renderBundles=[],e.viewport&&this.updateViewport(e),e.scissor){const{x:c,y:h,width:f,height:d}=e.scissorValue;u.setScissorRect(c,h,f,d)}}finishRender(e){const t=this.get(e),n=e.occlusionQueryCount;if(t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),n>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery(),t.currentPass.end(),n>0){const r=n*8;let s=this.occludedResolveCache.get(r);s===void 0&&(s=this.device.createBuffer({size:r,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(r,s));const o=this.device.createBuffer({size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,n,s,0),t.encoder.copyBufferToBuffer(s,0,o,0,r),t.occlusionQueryBuffer=o,this.resolveOccludedAsync(e)}if(this.prepareTimestampBuffer(e,t.encoder),this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const r=e.textures;for(let s=0;s<r.length;s++){const o=r[s];o.generateMipmaps===!0&&this.textureUtils.generateMipmaps(o)}}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:n,currentOcclusionQueryObjects:r}=t;if(n&&r){const s=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await n.mapAsync(GPUMapMode.READ);const o=n.getMappedRange(),a=new BigUint64Array(o);for(let l=0;l<r.length;l++)a[l]!==BigInt(0)&&s.add(r[l]);n.destroy(),t.occluded=s}}updateViewport(e){const{currentPass:t}=this.get(e),{x:n,y:r,width:s,height:o,minDepth:a,maxDepth:l}=e.viewportValue;t.setViewport(n,r,s,o,a,l)}clear(e,t,n,r=null){const s=this.device,o=this.renderer;let a=[],l,u,c,h;if(e){const p=this.getClearColor();if(this.renderer.alpha===!0){const v=p.a;u={r:p.r*v,g:p.g*v,b:p.b*v,a:v}}else u={r:p.r,g:p.g,b:p.b,a:p.a}}if(r===null){c=o.depth,h=o.stencil;const p=this._getDefaultRenderPassDescriptor();if(e){a=p.colorAttachments;const v=a[0];v.clearValue=u,v.loadOp=os.Clear,v.storeOp=to.Store}(c||h)&&(l=p.depthStencilAttachment)}else{if(c=r.depth,h=r.stencil,e)for(const p of r.textures){const v=this.get(p),b=v.texture.createView();let _,M;v.msaaTexture!==void 0?(_=v.msaaTexture.createView(),M=b):(_=b,M=void 0),a.push({view:_,resolveTarget:M,clearValue:u,loadOp:os.Clear,storeOp:to.Store})}(c||h)&&(l={view:this.get(r.depthTexture).texture.createView()})}c&&(t?(l.depthLoadOp=os.Clear,l.depthClearValue=o.getClearDepth(),l.depthStoreOp=to.Store):(l.depthLoadOp=os.Load,l.depthStoreOp=to.Store)),h&&(n?(l.stencilLoadOp=os.Clear,l.stencilClearValue=o.getClearStencil(),l.stencilStoreOp=to.Store):(l.stencilLoadOp=os.Load,l.stencilStoreOp=to.Store));const f=s.createCommandEncoder({});f.beginRenderPass({colorAttachments:a,depthStencilAttachment:l}).end(),s.queue.submit([f.finish()])}beginCompute(e){const t=this.get(e),n={};this.initTimestampQuery(e,n),t.cmdEncoderGPU=this.device.createCommandEncoder(),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(n)}compute(e,t,n,r){const{passEncoderGPU:s}=this.get(e),o=this.get(r).pipeline;s.setPipeline(o);for(let c=0,h=n.length;c<h;c++){const f=n[c],d=this.get(f);s.setBindGroup(c,d.group)}const a=this.device.limits.maxComputeWorkgroupsPerDimension,l=this.get(t);l.dispatchSize===void 0&&(l.dispatchSize={x:0,y:1,z:1});const{dispatchSize:u}=l;t.dispatchCount>a?(u.x=Math.min(t.dispatchCount,a),u.y=Math.ceil(t.dispatchCount/a)):u.x=t.dispatchCount,s.dispatchWorkgroups(u.x,u.y,u.z)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.prepareTimestampBuffer(e,t.cmdEncoderGPU),this.device.queue.submit([t.cmdEncoderGPU.finish()])}draw(e,t){const{object:n,context:r,pipeline:s}=e,o=e.getBindings(),a=this.get(r),l=this.get(s).pipeline,u=a.currentSets,c=a.currentPass,h=e.getDrawParameters();if(h===null)return;u.pipeline!==l&&(c.setPipeline(l),u.pipeline=l);const f=u.bindingGroups;for(let b=0,_=o.length;b<_;b++){const M=o[b],E=this.get(M);f[M.index]!==M.id&&(c.setBindGroup(M.index,E.group),f[M.index]=M.id)}const d=e.getIndex(),p=d!==null;if(p===!0&&u.index!==d){const b=this.get(d).buffer,_=d.array instanceof Uint16Array?Fy.Uint16:Fy.Uint32;c.setIndexBuffer(b,_),u.index=d}const v=e.getVertexBuffers();for(let b=0,_=v.length;b<_;b++){const M=v[b];if(u.attributes[b]!==M){const E=this.get(M).buffer;c.setVertexBuffer(b,E),u.attributes[b]=M}}if(a.occlusionQuerySet!==void 0){const b=a.lastOcclusionObject;b!==n&&(b!==null&&b.occlusionTest===!0&&(c.endOcclusionQuery(),a.occlusionQueryIndex++),n.occlusionTest===!0&&(c.beginOcclusionQuery(a.occlusionQueryIndex),a.occlusionQueryObjects[a.occlusionQueryIndex]=n),a.lastOcclusionObject=n)}if(n.isBatchedMesh===!0){const b=n._multiDrawStarts,_=n._multiDrawCounts,M=n._multiDrawCount,E=n._multiDrawInstances,R=p?d.array.BYTES_PER_ELEMENT:1;for(let L=0;L<M;L++){const I=E?E[L]:1,D=I>1?0:L;c.drawIndexed(_[L],I,b[L]/R,0,D)}}else if(p===!0){const{vertexCount:b,instanceCount:_,firstVertex:M}=h;c.drawIndexed(b,_,M,0,0),t.update(n,b,_)}else{const{vertexCount:b,instanceCount:_,firstVertex:M}=h;c.draw(b,_,M,0),t.update(n,b,_)}}needsRenderUpdate(e){const t=this.get(e),{object:n,material:r}=e,s=this.utils,o=s.getSampleCountRenderContext(e.context),a=s.getCurrentColorSpace(e.context),l=s.getCurrentColorFormat(e.context),u=s.getCurrentDepthStencilFormat(e.context),c=s.getPrimitiveTopology(n,r);let h=!1;return(t.material!==r||t.materialVersion!==r.version||t.transparent!==r.transparent||t.blending!==r.blending||t.premultipliedAlpha!==r.premultipliedAlpha||t.blendSrc!==r.blendSrc||t.blendDst!==r.blendDst||t.blendEquation!==r.blendEquation||t.blendSrcAlpha!==r.blendSrcAlpha||t.blendDstAlpha!==r.blendDstAlpha||t.blendEquationAlpha!==r.blendEquationAlpha||t.colorWrite!==r.colorWrite||t.depthWrite!==r.depthWrite||t.depthTest!==r.depthTest||t.depthFunc!==r.depthFunc||t.stencilWrite!==r.stencilWrite||t.stencilFunc!==r.stencilFunc||t.stencilFail!==r.stencilFail||t.stencilZFail!==r.stencilZFail||t.stencilZPass!==r.stencilZPass||t.stencilFuncMask!==r.stencilFuncMask||t.stencilWriteMask!==r.stencilWriteMask||t.side!==r.side||t.alphaToCoverage!==r.alphaToCoverage||t.sampleCount!==o||t.colorSpace!==a||t.colorFormat!==l||t.depthStencilFormat!==u||t.primitiveTopology!==c||t.clippingContextCacheKey!==e.clippingContext.cacheKey)&&(t.material=r,t.materialVersion=r.version,t.transparent=r.transparent,t.blending=r.blending,t.premultipliedAlpha=r.premultipliedAlpha,t.blendSrc=r.blendSrc,t.blendDst=r.blendDst,t.blendEquation=r.blendEquation,t.blendSrcAlpha=r.blendSrcAlpha,t.blendDstAlpha=r.blendDstAlpha,t.blendEquationAlpha=r.blendEquationAlpha,t.colorWrite=r.colorWrite,t.depthWrite=r.depthWrite,t.depthTest=r.depthTest,t.depthFunc=r.depthFunc,t.stencilWrite=r.stencilWrite,t.stencilFunc=r.stencilFunc,t.stencilFail=r.stencilFail,t.stencilZFail=r.stencilZFail,t.stencilZPass=r.stencilZPass,t.stencilFuncMask=r.stencilFuncMask,t.stencilWriteMask=r.stencilWriteMask,t.side=r.side,t.alphaToCoverage=r.alphaToCoverage,t.sampleCount=o,t.colorSpace=a,t.colorFormat=l,t.depthStencilFormat=u,t.primitiveTopology=c,t.clippingContextCacheKey=e.clippingContext.cacheKey,h=!0),h}getRenderCacheKey(e){const{object:t,material:n}=e,r=this.utils,s=e.context;return[n.transparent,n.blending,n.premultipliedAlpha,n.blendSrc,n.blendDst,n.blendEquation,n.blendSrcAlpha,n.blendDstAlpha,n.blendEquationAlpha,n.colorWrite,n.depthWrite,n.depthTest,n.depthFunc,n.stencilWrite,n.stencilFunc,n.stencilFail,n.stencilZFail,n.stencilZPass,n.stencilFuncMask,n.stencilWriteMask,n.side,r.getSampleCountRenderContext(s),r.getCurrentColorSpace(s),r.getCurrentColorFormat(s),r.getCurrentDepthStencilFormat(s),r.getPrimitiveTopology(t,n),e.clippingContext.cacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,t,n,r,s,o){return this.textureUtils.copyTextureToBuffer(e,t,n,r,s,o)}initTimestampQuery(e,t){if(!this.trackTimestamp)return;const n=this.get(e);if(!n.timeStampQuerySet){const r=this.device.createQuerySet({type:"timestamp",count:2});Object.assign(t,{timestampWrites:{querySet:r,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1}}),n.timeStampQuerySet=r}}prepareTimestampBuffer(e,t){if(!this.trackTimestamp)return;const n=this.get(e),r=2*BigInt64Array.BYTES_PER_ELEMENT;n.currentTimestampQueryBuffers===void 0&&(n.currentTimestampQueryBuffers={resolveBuffer:this.device.createBuffer({label:"timestamp resolve buffer",size:r,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),resultBuffer:this.device.createBuffer({label:"timestamp result buffer",size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),isMappingPending:!1});const{resolveBuffer:s,resultBuffer:o,isMappingPending:a}=n.currentTimestampQueryBuffers;a!==!0&&(t.resolveQuerySet(n.timeStampQuerySet,0,2,s,0),t.copyBufferToBuffer(s,0,o,0,r))}async resolveTimestampAsync(e,t="render"){if(!this.trackTimestamp)return;const n=this.get(e);if(n.currentTimestampQueryBuffers===void 0)return;const{resultBuffer:r,isMappingPending:s}=n.currentTimestampQueryBuffers;s!==!0&&(n.currentTimestampQueryBuffers.isMappingPending=!0,r.mapAsync(GPUMapMode.READ).then(()=>{const o=new BigUint64Array(r.getMappedRange()),a=Number(o[1]-o[0])/1e6;this.renderer.info.updateTimestamp(t,a),r.unmap(),n.currentTimestampQueryBuffers.isMappingPending=!1}))}createNodeBuilder(e,t){return new C9e(e,t)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){this.pipelineUtils.createRenderPipeline(e,t)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}beginBundle(e){const t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,t){const n=this.get(e),s=n.currentPass.finish();this.get(t).bundleGPU=s,n.currentSets=n._currentSets,n.currentPass=n._currentPass}addBundle(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}createBindings(e){this.bindingUtils.createBindings(e)}updateBindings(e){this.bindingUtils.createBindings(e)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,t,n=null,r=null,s=0){let o=0,a=0,l=0,u=0,c=0,h=0,f=e.image.width,d=e.image.height;n!==null&&(u=n.x,c=n.y,h=n.z||0,f=n.width,d=n.height),r!==null&&(o=r.x,a=r.y,l=r.z||0);const p=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),v=this.get(e).texture,b=this.get(t).texture;p.copyTextureToTexture({texture:v,mipLevel:s,origin:{x:u,y:c,z:h}},{texture:b,mipLevel:s,origin:{x:o,y:a,z:l}},[f,d,1]),this.device.queue.submit([p.finish()])}copyFramebufferToTexture(e,t,n){const r=this.get(t),{encoder:s,descriptor:o}=r;let a=null;t.renderTarget?e.isDepthTexture?a=this.get(t.depthTexture).texture:a=this.get(t.textures[0]).texture:e.isDepthTexture?a=this.textureUtils.getDepthBuffer(t.depth,t.stencil):a=this.context.getCurrentTexture();const l=this.get(e).texture;if(a.format!==l.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",a.format,l.format);return}r.currentPass.end(),s.copyTextureToTexture({texture:a,origin:{x:n.x,y:n.y,z:0}},{texture:l},[n.z,n.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e);for(let u=0;u<o.colorAttachments.length;u++)o.colorAttachments[u].loadOp=os.Load;t.depth&&(o.depthStencilAttachment.depthLoadOp=os.Load),t.stencil&&(o.depthStencilAttachment.stencilLoadOp=os.Load),r.currentPass=s.beginRenderPass(o),r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null}}}class F9e extends Hne{constructor(e,t,n,r,s,o){super(e,t,n,r,s,o),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class k9e extends cre{constructor(){super(),this.addMaterial($Le,One),this.addMaterial(Kie,yF),this.addMaterial(BOe,Lne),this.addMaterial(LOe,Fne),this.addMaterial(ULe,j4),this.addMaterial(VLe,Une),this.addMaterial(NLe,kne),this.addMaterial(UOe,zne),this.addMaterial(CLe,mF),this.addMaterial(PLe,Gne),this.addMaterial(GOe,Nne),this.addMaterial(jOe,Bne),this.addMaterial(XOe,Dne),this.addLight(vke,MBe),this.addLight(_ke,EBe),this.addLight(xke,RBe),this.addLight(are,Hne),this.addLight(wke,CBe),this.addLight(Ske,bBe),this.addLight(Mke,BBe),this.addLight(bke,F9e),this.addToneMapping(ake,JPe),this.addToneMapping(lke,ZPe),this.addToneMapping(uke,e6e),this.addToneMapping(hke,t6e),this.addToneMapping(Ake,n6e),this.addToneMapping(mke,i6e),this.addColorSpace(oke,HN(Bu,pn)),this.addColorSpace(ske,HN(pn,Bu))}}class U9e extends jke{constructor(e={}){let t;e.forceWebGL?t=zj:(t=O9e,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new zj(e)));const n=new t(e);super(n,e),this.nodes.library=new k9e,this.isWebGPURenderer=!0}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:q4}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=q4);const p6={type:"change"},WF={type:"start"},XF={type:"end"},qj=1e-6,Ti={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},iM=new je,Vd=new je,z9e=new ne,rM=new ne,A6=new ne,qg=new xi,Vj=new ne,sM=new ne,m6=new ne,oM=new ne;class G9e extends M4{constructor(e,t=null){super(e,t),this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:us.ROTATE,MIDDLE:us.DOLLY,RIGHT:us.PAN},this.state=Ti.NONE,this.keyState=Ti.NONE,this.target=new ne,this._lastPosition=new ne,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new ne,this._movePrev=new je,this._moveCurr=new je,this._lastAxis=new ne,this._zoomStart=new je,this._zoomEnd=new je,this._panStart=new je,this._panEnd=new je,this._pointers=[],this._pointerPositions={},this._onPointerMove=q9e.bind(this),this._onPointerDown=H9e.bind(this),this._onPointerUp=V9e.bind(this),this._onPointerCancel=j9e.bind(this),this._onContextMenu=J9e.bind(this),this._onMouseWheel=K9e.bind(this),this._onKeyDown=W9e.bind(this),this._onKeyUp=$9e.bind(this),this._onTouchStart=Z9e.bind(this),this._onTouchMove=e7e.bind(this),this._onTouchEnd=t7e.bind(this),this._onMouseDown=X9e.bind(this),this._onMouseMove=Y9e.bind(this),this._onMouseUp=Q9e.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,t!==null&&(this.connect(),this.handleResize()),this.update()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>qj&&(this.dispatchEvent(p6),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>qj||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(p6),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=Ti.NONE,this.keyState=Ti.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(p6),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(Vd.copy(this._panEnd).sub(this._panStart),Vd.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,t=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;Vd.x*=e,Vd.y*=t}Vd.multiplyScalar(this._eye.length()*this.panSpeed),rM.copy(this._eye).cross(this.object.up).setLength(Vd.x),rM.add(z9e.copy(this.object.up).setLength(Vd.y)),this.object.position.add(rM),this.target.add(rM),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(Vd.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){oM.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=oM.length();e?(this._eye.copy(this.object.position).sub(this.target),Vj.copy(this._eye).normalize(),sM.copy(this.object.up).normalize(),m6.crossVectors(sM,Vj).normalize(),sM.setLength(this._moveCurr.y-this._movePrev.y),m6.setLength(this._moveCurr.x-this._movePrev.x),oM.copy(sM.add(m6)),A6.crossVectors(oM,this._eye).normalize(),e*=this.rotateSpeed,qg.setFromAxisAngle(A6,e),this._eye.applyQuaternion(qg),this.object.up.applyQuaternion(qg),this._lastAxis.copy(A6),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),qg.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(qg),this.object.up.applyQuaternion(qg)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===Ti.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=lo.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=lo.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,t){return iM.set((e-this.screen.left)/this.screen.width,(t-this.screen.top)/this.screen.height),iM}_getMouseOnCircle(e,t){return iM.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-t))/this.screen.width),iM}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t].pointerId==e.pointerId){this._pointers.splice(t,1);return}}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new je,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[t.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function H9e(i){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(i),i.pointerType==="touch"?this._onTouchStart(i):this._onMouseDown(i))}function q9e(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchMove(i):this._onMouseMove(i))}function V9e(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchEnd(i):this._onMouseUp(),this._removePointer(i),this._pointers.length===0&&(this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function j9e(i){this._removePointer(i)}function $9e(){this.enabled!==!1&&(this.keyState=Ti.NONE,window.addEventListener("keydown",this._onKeyDown))}function W9e(i){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===Ti.NONE&&(i.code===this.keys[Ti.ROTATE]&&!this.noRotate?this.keyState=Ti.ROTATE:i.code===this.keys[Ti.ZOOM]&&!this.noZoom?this.keyState=Ti.ZOOM:i.code===this.keys[Ti.PAN]&&!this.noPan&&(this.keyState=Ti.PAN)))}function X9e(i){let e;switch(i.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case us.DOLLY:this.state=Ti.ZOOM;break;case us.ROTATE:this.state=Ti.ROTATE;break;case us.PAN:this.state=Ti.PAN;break;default:this.state=Ti.NONE}const t=this.keyState!==Ti.NONE?this.keyState:this.state;t===Ti.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr)):t===Ti.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(i.pageX,i.pageY)),this._zoomEnd.copy(this._zoomStart)):t===Ti.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(i.pageX,i.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(WF)}function Y9e(i){const e=this.keyState!==Ti.NONE?this.keyState:this.state;e===Ti.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY))):e===Ti.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(i.pageX,i.pageY)):e===Ti.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(i.pageX,i.pageY))}function Q9e(){this.state=Ti.NONE,this.dispatchEvent(XF)}function K9e(i){if(this.enabled!==!1&&this.noZoom!==!0){switch(i.preventDefault(),i.deltaMode){case 2:this._zoomStart.y-=i.deltaY*.025;break;case 1:this._zoomStart.y-=i.deltaY*.01;break;default:this._zoomStart.y-=i.deltaY*25e-5;break}this.dispatchEvent(WF),this.dispatchEvent(XF)}}function J9e(i){this.enabled!==!1&&i.preventDefault()}function Z9e(i){switch(this._trackPointer(i),this._pointers.length){case 1:this.state=Ti.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=Ti.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,t=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+t*t);const n=(this._pointers[0].pageX+this._pointers[1].pageX)/2,r=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(n,r)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(WF)}function e7e(i){switch(this._trackPointer(i),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY));break;default:const e=this._getSecondPointerPosition(i),t=i.pageX-e.x,n=i.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(t*t+n*n);const r=(i.pageX+e.x)/2,s=(i.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(r,s));break}}function t7e(i){switch(this._pointers.length){case 0:this.state=Ti.NONE;break;case 1:this.state=Ti.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=Ti.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==i.pointerId){const t=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(t.x,t.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(XF)}const jj={type:"change"},YF={type:"start"},vre={type:"end"},aM=new $p,$j=new jc,n7e=Math.cos(70*lo.DEG2RAD),Ss=new ne,La=2*Math.PI,zi={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},g6=1e-6;class i7e extends M4{constructor(e,t=null){super(e,t),this.state=zi.NONE,this.enabled=!0,this.target=new ne,this.cursor=new ne,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:us.ROTATE,MIDDLE:us.DOLLY,RIGHT:us.PAN},this.touches={ONE:Pl.ROTATE,TWO:Pl.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new ne,this._lastQuaternion=new xi,this._lastTargetPosition=new ne,this._quat=new xi().setFromUnitVectors(e.up,new ne(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new j0,this._sphericalDelta=new j0,this._scale=1,this._panOffset=new ne,this._rotateStart=new je,this._rotateEnd=new je,this._rotateDelta=new je,this._panStart=new je,this._panEnd=new je,this._panDelta=new je,this._dollyStart=new je,this._dollyEnd=new je,this._dollyDelta=new je,this._dollyDirection=new ne,this._mouse=new je,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=s7e.bind(this),this._onPointerDown=r7e.bind(this),this._onPointerUp=o7e.bind(this),this._onContextMenu=d7e.bind(this),this._onMouseWheel=u7e.bind(this),this._onKeyDown=c7e.bind(this),this._onTouchStart=h7e.bind(this),this._onTouchMove=f7e.bind(this),this._onMouseDown=a7e.bind(this),this._onMouseMove=l7e.bind(this),this._interceptControlDown=p7e.bind(this),this._interceptControlUp=A7e.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(jj),this.update(),this.state=zi.NONE}update(e=null){const t=this.object.position;Ss.copy(t).sub(this.target),Ss.applyQuaternion(this._quat),this._spherical.setFromVector3(Ss),this.autoRotate&&this.state===zi.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(n)&&isFinite(r)&&(n<-Math.PI?n+=La:n>Math.PI&&(n-=La),r<-Math.PI?r+=La:r>Math.PI&&(r-=La),n<=r?this._spherical.theta=Math.max(n,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+r)/2?Math.max(n,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(Ss.setFromSpherical(this._spherical),Ss.applyQuaternion(this._quatInverse),t.copy(this.target).add(Ss),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const a=Ss.length();o=this._clampDistance(a*this._scale);const l=a-o;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const a=new ne(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const u=new ne(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(a),this.object.updateMatrixWorld(),o=Ss.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(aM.origin.copy(this.object.position),aM.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(aM.direction))<n7e?this.object.lookAt(this.target):($j.setFromNormalAndCoplanarPoint(this.object.up,this.target),aM.intersectPlane($j,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>g6||8*(1-this._lastQuaternion.dot(this.object.quaternion))>g6||this._lastTargetPosition.distanceToSquared(this.target)>g6?(this.dispatchEvent(jj),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?La/60*this.autoRotateSpeed*e:La/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Ss.setFromMatrixColumn(t,0),Ss.multiplyScalar(-e),this._panOffset.add(Ss)}_panUp(e,t){this.screenSpacePanning===!0?Ss.setFromMatrixColumn(t,1):(Ss.setFromMatrixColumn(t,0),Ss.crossVectors(this.object.up,Ss)),Ss.multiplyScalar(e),this._panOffset.add(Ss)}_pan(e,t){const n=this.domElement;if(this.object.isPerspectiveCamera){const r=this.object.position;Ss.copy(r).sub(this.target);let s=Ss.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/n.clientHeight,this.object.matrix),this._panUp(2*t*s/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),r=e-n.left,s=t-n.top,o=n.width,a=n.height;this._mouse.x=r/o*2-1,this._mouse.y=-(s/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(La*this._rotateDelta.x/t.clientHeight),this._rotateUp(La*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(La*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(-La*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(La*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(-La*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(n,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(n,r)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(n*n+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._rotateEnd.set(r,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(La*this._rotateDelta.x/t.clientHeight),this._rotateUp(La*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(n,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(n*n+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(o,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new je,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function r7e(i){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(i)&&(this._addPointer(i),i.pointerType==="touch"?this._onTouchStart(i):this._onMouseDown(i)))}function s7e(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchMove(i):this._onMouseMove(i))}function o7e(i){switch(this._removePointer(i),this._pointers.length){case 0:this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(vre),this.state=zi.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function a7e(i){let e;switch(i.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case us.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(i),this.state=zi.DOLLY;break;case us.ROTATE:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=zi.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=zi.ROTATE}break;case us.PAN:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=zi.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=zi.PAN}break;default:this.state=zi.NONE}this.state!==zi.NONE&&this.dispatchEvent(YF)}function l7e(i){switch(this.state){case zi.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(i);break;case zi.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(i);break;case zi.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(i);break}}function u7e(i){this.enabled===!1||this.enableZoom===!1||this.state!==zi.NONE||(i.preventDefault(),this.dispatchEvent(YF),this._handleMouseWheel(this._customWheelEvent(i)),this.dispatchEvent(vre))}function c7e(i){this.enabled===!1||this.enablePan===!1||this._handleKeyDown(i)}function h7e(i){switch(this._trackPointer(i),this._pointers.length){case 1:switch(this.touches.ONE){case Pl.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(i),this.state=zi.TOUCH_ROTATE;break;case Pl.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(i),this.state=zi.TOUCH_PAN;break;default:this.state=zi.NONE}break;case 2:switch(this.touches.TWO){case Pl.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(i),this.state=zi.TOUCH_DOLLY_PAN;break;case Pl.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(i),this.state=zi.TOUCH_DOLLY_ROTATE;break;default:this.state=zi.NONE}break;default:this.state=zi.NONE}this.state!==zi.NONE&&this.dispatchEvent(YF)}function f7e(i){switch(this._trackPointer(i),this.state){case zi.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(i),this.update();break;case zi.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(i),this.update();break;case zi.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(i),this.update();break;case zi.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(i),this.update();break;default:this.state=zi.NONE}}function d7e(i){this.enabled!==!1&&i.preventDefault()}function p7e(i){i.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function A7e(i){i.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const m7e={type:"change"},Wj=1e-6,Xj=new xi;class g7e extends M4{constructor(e,t=null){super(e,t),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new ne(0,0,0),this._rotationVector=new ne(0,0,0),this._lastQuaternion=new xi,this._lastPosition=new ne,this._status=0,this._onKeyDown=y7e.bind(this),this._onKeyUp=v7e.bind(this),this._onPointerMove=x7e.bind(this),this._onPointerDown=_7e.bind(this),this._onPointerUp=b7e.bind(this),this._onPointerCancel=w7e.bind(this),this._onContextMenu=S7e.bind(this),t!==null&&this.connect()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const t=this.object,n=e*this.movementSpeed,r=e*this.rollSpeed;t.translateX(this._moveVector.x*n),t.translateY(this._moveVector.y*n),t.translateZ(this._moveVector.z*n),Xj.set(this._rotationVector.x*r,this._rotationVector.y*r,this._rotationVector.z*r,1).normalize(),t.quaternion.multiply(Xj),(this._lastPosition.distanceToSquared(t.position)>Wj||8*(1-this._lastQuaternion.dot(t.quaternion))>Wj)&&(this.dispatchEvent(m7e),this._lastQuaternion.copy(t.quaternion),this._lastPosition.copy(t.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function y7e(i){if(!(i.altKey||this.enabled===!1)){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function v7e(i){if(this.enabled!==!1){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function _7e(i){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(i.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function x7e(i){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),t=e.size[0]/2,n=e.size[1]/2;this._moveState.yawLeft=-(i.pageX-e.offset[0]-t)/t,this._moveState.pitchDown=(i.pageY-e.offset[1]-n)/n,this._updateRotationVector()}}function b7e(i){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(i.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function w7e(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function S7e(i){this.enabled!==!1&&i.preventDefault()}const M7e={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class l5{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const T7e=new qa(-1,1,1,-1,0,1);class E7e extends fn{constructor(){super(),this.setAttribute("position",new Ht([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Ht([0,2,0,0,2,0],2))}}const C7e=new E7e;class R7e{constructor(e){this._mesh=new fi(C7e,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,T7e)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class P7e extends l5{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof po?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=eb.clone(e.uniforms),this.material=new po({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new R7e(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Yj extends l5{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class B7e extends l5{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class I7e{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const n=e.getSize(new je);this._width=n.width,this._height=n.height,t=new ql(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Vp}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new P7e(M7e),this.copyPass.material.blending=nh,this.clock=new cb}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),o.needsSwap){if(n){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}Yj!==void 0&&(o instanceof Yj?n=!0:o instanceof B7e&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new je);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class N7e extends l5{constructor(e,t,n=null,r=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new vt}render(e,t,n){const r=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==null&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=o),e.autoClear=r}}function D7e(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Vx(i,e){return Vx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Vx(i,e)}function L7e(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,Vx(i,e)}function tD(i){return tD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tD(i)}function O7e(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}function _re(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_re=function(){return!!i})()}function F7e(i,e,t){if(_re())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(i.bind.apply(i,n));return t&&Vx(r,t.prototype),r}function nD(i){var e=typeof Map=="function"?new Map:void 0;return nD=function(n){if(n===null||!O7e(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return F7e(n,arguments,tD(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Vx(r,n)},nD(i)}var Zc=function(i){L7e(e,i);function e(t){var n;return n=i.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,D7e(n)}return e}(nD(Error));function y6(i){return Math.round(i*255)}function k7e(i,e,t){return y6(i)+","+y6(e)+","+y6(t)}function jx(i,e,t,n){if(n===void 0&&(n=k7e),e===0)return n(t,t,t);var r=(i%360+360)%360/60,s=(1-Math.abs(2*t-1))*e,o=s*(1-Math.abs(r%2-1)),a=0,l=0,u=0;r>=0&&r<1?(a=s,l=o):r>=1&&r<2?(a=o,l=s):r>=2&&r<3?(l=s,u=o):r>=3&&r<4?(l=o,u=s):r>=4&&r<5?(a=o,u=s):r>=5&&r<6&&(a=s,u=o);var c=t-s/2,h=a+c,f=l+c,d=u+c;return n(h,f,d)}var Qj={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function U7e(i){if(typeof i!="string")return i;var e=i.toLowerCase();return Qj[e]?"#"+Qj[e]:i}var z7e=/^#[a-fA-F0-9]{6}$/,G7e=/^#[a-fA-F0-9]{8}$/,H7e=/^#[a-fA-F0-9]{3}$/,q7e=/^#[a-fA-F0-9]{4}$/,v6=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,V7e=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,j7e=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,$7e=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function am(i){if(typeof i!="string")throw new Zc(3);var e=U7e(i);if(e.match(z7e))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(G7e)){var t=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:t}}if(e.match(H7e))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(q7e)){var n=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:n}}var r=v6.exec(e);if(r)return{red:parseInt(""+r[1],10),green:parseInt(""+r[2],10),blue:parseInt(""+r[3],10)};var s=V7e.exec(e.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var o=j7e.exec(e);if(o){var a=parseInt(""+o[1],10),l=parseInt(""+o[2],10)/100,u=parseInt(""+o[3],10)/100,c="rgb("+jx(a,l,u)+")",h=v6.exec(c);if(!h)throw new Zc(4,e,c);return{red:parseInt(""+h[1],10),green:parseInt(""+h[2],10),blue:parseInt(""+h[3],10)}}var f=$7e.exec(e.substring(0,50));if(f){var d=parseInt(""+f[1],10),p=parseInt(""+f[2],10)/100,v=parseInt(""+f[3],10)/100,b="rgb("+jx(d,p,v)+")",_=v6.exec(b);if(!_)throw new Zc(4,e,b);return{red:parseInt(""+_[1],10),green:parseInt(""+_[2],10),blue:parseInt(""+_[3],10),alpha:parseFloat(""+f[4])>1?parseFloat(""+f[4])/100:parseFloat(""+f[4])}}throw new Zc(5)}function W7e(i){var e=i.red/255,t=i.green/255,n=i.blue/255,r=Math.max(e,t,n),s=Math.min(e,t,n),o=(r+s)/2;if(r===s)return i.alpha!==void 0?{hue:0,saturation:0,lightness:o,alpha:i.alpha}:{hue:0,saturation:0,lightness:o};var a,l=r-s,u=o>.5?l/(2-r-s):l/(r+s);switch(r){case e:a=(t-n)/l+(t<n?6:0);break;case t:a=(n-e)/l+2;break;default:a=(e-t)/l+4;break}return a*=60,i.alpha!==void 0?{hue:a,saturation:u,lightness:o,alpha:i.alpha}:{hue:a,saturation:u,lightness:o}}function eA(i){return W7e(am(i))}var X7e=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},iD=X7e;function e0(i){var e=i.toString(16);return e.length===1?"0"+e:e}function _6(i){return e0(Math.round(i*255))}function Y7e(i,e,t){return iD("#"+_6(i)+_6(e)+_6(t))}function MC(i,e,t){return jx(i,e,t,Y7e)}function Q7e(i,e,t){if(typeof i=="number"&&typeof e=="number"&&typeof t=="number")return MC(i,e,t);if(typeof i=="object"&&e===void 0&&t===void 0)return MC(i.hue,i.saturation,i.lightness);throw new Zc(1)}function K7e(i,e,t,n){if(typeof i=="number"&&typeof e=="number"&&typeof t=="number"&&typeof n=="number")return n>=1?MC(i,e,t):"rgba("+jx(i,e,t)+","+n+")";if(typeof i=="object"&&e===void 0&&t===void 0&&n===void 0)return i.alpha>=1?MC(i.hue,i.saturation,i.lightness):"rgba("+jx(i.hue,i.saturation,i.lightness)+","+i.alpha+")";throw new Zc(2)}function rD(i,e,t){if(typeof i=="number"&&typeof e=="number"&&typeof t=="number")return iD("#"+e0(i)+e0(e)+e0(t));if(typeof i=="object"&&e===void 0&&t===void 0)return iD("#"+e0(i.red)+e0(i.green)+e0(i.blue));throw new Zc(6)}function u5(i,e,t,n){if(typeof i=="string"&&typeof e=="number"){var r=am(i);return"rgba("+r.red+","+r.green+","+r.blue+","+e+")"}else{if(typeof i=="number"&&typeof e=="number"&&typeof t=="number"&&typeof n=="number")return n>=1?rD(i,e,t):"rgba("+i+","+e+","+t+","+n+")";if(typeof i=="object"&&e===void 0&&t===void 0&&n===void 0)return i.alpha>=1?rD(i.red,i.green,i.blue):"rgba("+i.red+","+i.green+","+i.blue+","+i.alpha+")"}throw new Zc(7)}var J7e=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},Z7e=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},eUe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},tUe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function tA(i){if(typeof i!="object")throw new Zc(8);if(Z7e(i))return u5(i);if(J7e(i))return rD(i);if(tUe(i))return K7e(i);if(eUe(i))return Q7e(i);throw new Zc(8)}function xre(i,e,t){return function(){var r=t.concat(Array.prototype.slice.call(arguments));return r.length>=e?i.apply(this,r):xre(i,e,r)}}function eu(i){return xre(i,i.length,[])}function nUe(i,e){if(e==="transparent")return e;var t=eA(e);return tA($s({},t,{hue:t.hue+parseFloat(i)}))}eu(nUe);function fv(i,e,t){return Math.max(i,Math.min(e,t))}function iUe(i,e){if(e==="transparent")return e;var t=eA(e);return tA($s({},t,{lightness:fv(0,1,t.lightness-parseFloat(i))}))}eu(iUe);function rUe(i,e){if(e==="transparent")return e;var t=eA(e);return tA($s({},t,{saturation:fv(0,1,t.saturation-parseFloat(i))}))}eu(rUe);function sUe(i,e){if(e==="transparent")return e;var t=eA(e);return tA($s({},t,{lightness:fv(0,1,t.lightness+parseFloat(i))}))}eu(sUe);function oUe(i,e,t){if(e==="transparent")return t;if(t==="transparent")return e;if(i===0)return t;var n=am(e),r=$s({},n,{alpha:typeof n.alpha=="number"?n.alpha:1}),s=am(t),o=$s({},s,{alpha:typeof s.alpha=="number"?s.alpha:1}),a=r.alpha-o.alpha,l=parseFloat(i)*2-1,u=l*a===-1?l:l+a,c=1+l*a,h=(u/c+1)/2,f=1-h,d={red:Math.floor(r.red*h+o.red*f),green:Math.floor(r.green*h+o.green*f),blue:Math.floor(r.blue*h+o.blue*f),alpha:r.alpha*parseFloat(i)+o.alpha*(1-parseFloat(i))};return u5(d)}var aUe=eu(oUe),bre=aUe;function lUe(i,e){if(e==="transparent")return e;var t=am(e),n=typeof t.alpha=="number"?t.alpha:1,r=$s({},t,{alpha:fv(0,1,(n*100+parseFloat(i)*100)/100)});return u5(r)}var uUe=eu(lUe),cUe=uUe;function hUe(i,e){if(e==="transparent")return e;var t=eA(e);return tA($s({},t,{saturation:fv(0,1,t.saturation+parseFloat(i))}))}eu(hUe);function fUe(i,e){return e==="transparent"?e:tA($s({},eA(e),{hue:parseFloat(i)}))}eu(fUe);function dUe(i,e){return e==="transparent"?e:tA($s({},eA(e),{lightness:parseFloat(i)}))}eu(dUe);function pUe(i,e){return e==="transparent"?e:tA($s({},eA(e),{saturation:parseFloat(i)}))}eu(pUe);function AUe(i,e){return e==="transparent"?e:bre(parseFloat(i),"rgb(0, 0, 0)",e)}eu(AUe);function mUe(i,e){return e==="transparent"?e:bre(parseFloat(i),"rgb(255, 255, 255)",e)}eu(mUe);function gUe(i,e){if(e==="transparent")return e;var t=am(e),n=typeof t.alpha=="number"?t.alpha:1,r=$s({},t,{alpha:fv(0,1,+(n*100-parseFloat(i)*100).toFixed(2)/100)});return u5(r)}eu(gUe);function yUe(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var vUe=`.scene-nav-info {
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
}

.scene-tooltip {
  top: 0;
  color: lavender;
  font-size: 15px;
}

.scene-nav-info, .scene-tooltip {
  position: absolute;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;yUe(vUe);function sD(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function _Ue(i){if(Array.isArray(i))return i}function xUe(i){if(Array.isArray(i))return sD(i)}function bUe(i,e,t){return(e=RUe(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function wUe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function SUe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function MUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EUe(i,e){return _Ue(i)||SUe(i,e)||wre(i,e)||MUe()}function O2(i){return xUe(i)||wUe(i)||wre(i)||TUe()}function CUe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function RUe(i){var e=CUe(i,"string");return typeof e=="symbol"?e:e+""}function wre(i,e){if(i){if(typeof i=="string")return sD(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?sD(i,e):void 0}}var cr=window.THREE?window.THREE:{WebGLRenderer:xL,Scene:sx,PerspectiveCamera:$i,Raycaster:HL,SRGBColorSpace:Ua,TextureLoader:Yp,Vector2:je,Vector3:ne,Box3:Zr,Color:vt,Mesh:fi,SphereGeometry:Xp,MeshBasicMaterial:va,BackSide:ho,EventDispatcher:Fu,MOUSE:us,Quaternion:xi,Spherical:j0,Clock:cb},Sre=mo({props:{width:{default:window.innerWidth,onChange:function(e,t,n){isNaN(e)&&(t.width=n)}},height:{default:window.innerHeight,onChange:function(e,t,n){isNaN(e)&&(t.height=n)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null,t.toolTipElem&&(t.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(s){return s.render(e.scene,e.camera)}),e.enablePointerInteraction){var t=null;if(e.hoverDuringDrag||!e.isPointerDragging){var n=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter(function(s){return e.hoverFilter(s.object)}).sort(function(s,o){return e.hoverOrderComparator(s.object,o.object)}),r=n.length?n[0]:null;t=r?r.object:null,e.intersectionPoint=r?r.point:null}t!==e.hoverObj&&(e.onHover(t,e.hoverObj),e.toolTipElem.innerHTML=t&&gt(e.tooltipContent)(t)||"",e.hoverObj=t)}e.tweenGroup.update()}return this},getPointerPos:function(e){var t=e.pointerPos,n=t.x,r=t.y;return{x:n,y:r}},cameraPosition:function(e,t,n,r){var s=e.camera;if(t&&e.initialised){var o=t,a=n||{x:0,y:0,z:0};if(!r)c(o),h(a);else{var l=Object.assign({},s.position),u=f();e.tweenGroup.add(new jo(l).to(o,r).easing(As.Quadratic.Out).onUpdate(c).start()),e.tweenGroup.add(new jo(u).to(a,r/3).easing(As.Quadratic.Out).onUpdate(h).start())}return this}return Object.assign({},s.position,{lookAt:f()});function c(d){var p=d.x,v=d.y,b=d.z;p!==void 0&&(s.position.x=p),v!==void 0&&(s.position.y=v),b!==void 0&&(s.position.z=b)}function h(d){var p=new cr.Vector3(d.x,d.y,d.z);e.controls.target?e.controls.target=p:s.lookAt(p)}function f(){return Object.assign(new cr.Vector3(0,0,-1e3).applyQuaternion(s.quaternion).add(s.position))}},zoomToFit:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,r=arguments.length,s=new Array(r>3?r-3:0),o=3;o<r;o++)s[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,s),t,n)},fitToBbox:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,s=e.camera;if(t){var o=new cr.Vector3(0,0,0),a=Math.max.apply(Math,O2(Object.entries(t).map(function(d){var p=EUe(d,2),v=p[0],b=p[1];return Math.max.apply(Math,O2(b.map(function(_){return Math.abs(o[v]-_)})))})))*2,l=(1-r*2/e.height)*s.fov,u=a/Math.atan(l*Math.PI/180),c=u/s.aspect,h=Math.max(u,c);if(h>0){var f=o.clone().sub(s.position).normalize().multiplyScalar(-h);this.cameraPosition(f,o,n)}}return this},getBbox:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},n=new cr.Box3(new cr.Vector3(0,0,0),new cr.Vector3(0,0,0)),r=e.objects.filter(t);return r.length?(r.forEach(function(s){return n.expandByObject(s)}),Object.assign.apply(Object,O2(["x","y","z"].map(function(s){return bUe({},s,[n.min[s],n.max[s]])})))):null},getScreenCoords:function(e,t,n,r){var s=new cr.Vector3(t,n,r);return s.project(this.camera()),{x:(s.x+1)*e.width/2,y:-(s.y-1)*e.height/2}},getSceneCoords:function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=new cr.Vector2(t/e.width*2-1,-(n/e.height)*2+1),o=new cr.Raycaster;return o.setFromCamera(s,e.camera),Object.assign({},o.ray.at(r,new cr.Vector3))},intersectingObjects:function(e,t,n){var r=new cr.Vector2(t/e.width*2-1,-(n/e.height)*2+1),s=new cr.Raycaster;return s.params.Line.threshold=e.lineHoverPrecision,s.setFromCamera(r,e.camera),s.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new cr.Scene,camera:new cr.PerspectiveCamera,clock:new cr.Clock,tweenGroup:new k4}},init:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.controlType,s=r===void 0?"trackball":r,o=n.useWebGPU,a=o===void 0?!1:o,l=n.rendererConfig,u=l===void 0?{}:l,c=n.extraRenderers,h=c===void 0?[]:c,f=n.waitForLoadComplete,d=f===void 0?!0:f;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.className="scene-container",t.container.style.position="relative",t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="scene-nav-info",t.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[s]||"",t.navInfo.style.display=t.showNavInfo?null:"none",t.toolTipElem=document.createElement("div"),t.toolTipElem.classList.add("scene-tooltip"),t.container.appendChild(t.toolTipElem),t.pointerPos=new cr.Vector2,t.pointerPos.x=-2,t.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(p){return t.container.addEventListener(p,function(v){if(p==="pointerdown"&&(t.isPointerPressed=!0),!t.isPointerDragging&&v.type==="pointermove"&&(v.pressure>0||t.isPointerPressed)&&(v.pointerType!=="touch"||v.movementX===void 0||[v.movementX,v.movementY].some(function(M){return Math.abs(M)>1}))&&(t.isPointerDragging=!0),t.enablePointerInteraction){var b=_(t.container);t.pointerPos.x=v.pageX-b.left,t.pointerPos.y=v.pageY-b.top,t.toolTipElem.style.top="".concat(t.pointerPos.y,"px"),t.toolTipElem.style.left="".concat(t.pointerPos.x,"px"),t.toolTipElem.style.transform="translate(-".concat(t.pointerPos.x/t.width*100,"%, ").concat(t.height-t.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}function _(M){var E=M.getBoundingClientRect(),R=window.pageXOffset||document.documentElement.scrollLeft,L=window.pageYOffset||document.documentElement.scrollTop;return{top:E.top+L,left:E.left+R}}},{passive:!0})}),t.container.addEventListener("pointerup",function(p){t.isPointerPressed=!1,!(t.isPointerDragging&&(t.isPointerDragging=!1,!t.clickAfterDrag))&&requestAnimationFrame(function(){p.button===0&&t.onClick(t.hoverObj||null,p,t.intersectionPoint),p.button===2&&t.onRightClick&&t.onRightClick(t.hoverObj||null,p,t.intersectionPoint)})},{passive:!0,capture:!0}),t.container.addEventListener("contextmenu",function(p){t.onRightClick&&p.preventDefault()}),t.renderer=new(a?U9e:cr.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},u)),t.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.container.appendChild(t.renderer.domElement),t.extraRenderers=h,t.extraRenderers.forEach(function(p){p.domElement.style.position="absolute",p.domElement.style.top="0px",p.domElement.style.pointerEvents="none",t.container.appendChild(p.domElement)}),t.postProcessingComposer=new I7e(t.renderer),t.postProcessingComposer.addPass(new N7e(t.scene,t.camera)),t.controls=new{trackball:G9e,orbit:i7e,fly:g7e}[s](t.camera,t.renderer.domElement),s==="fly"&&(t.controls.movementSpeed=300,t.controls.rollSpeed=Math.PI/6,t.controls.dragToLook=!0),(s==="trackball"||s==="orbit")&&(t.controls.minDistance=.1,t.controls.maxDistance=t.skyRadius,t.controls.addEventListener("start",function(){t.controlsEngaged=!0}),t.controls.addEventListener("change",function(){t.controlsEngaged&&(t.controlsDragging=!0)}),t.controls.addEventListener("end",function(){t.controlsEngaged=!1,t.controlsDragging=!1})),[t.renderer,t.postProcessingComposer].concat(O2(t.extraRenderers)).forEach(function(p){return p.setSize(t.width,t.height)}),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix(),t.camera.position.z=1e3,t.scene.add(t.skysphere=new cr.Mesh),t.skysphere.visible=!1,t.loadComplete=t.scene.visible=!d,window.scene=t.scene},update:function(e,t){if(e.width&&e.height&&(t.hasOwnProperty("width")||t.hasOwnProperty("height"))&&(e.container.style.width="".concat(e.width,"px"),e.container.style.height="".concat(e.height,"px"),[e.renderer,e.postProcessingComposer].concat(O2(e.extraRenderers)).forEach(function(s){return s.setSize(e.width,e.height)}),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),t.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&t.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new cr.SphereGeometry(e.skyRadius)),t.hasOwnProperty("backgroundColor")){var n=am(e.backgroundColor).alpha;n===void 0&&(n=1),e.renderer.setClearColor(new cr.Color(cUe(1,e.backgroundColor)),n)}t.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new cr.TextureLoader().load(e.backgroundImageUrl,function(s){s.colorSpace=cr.SRGBColorSpace,e.skysphere.material=new cr.MeshBasicMaterial({map:s,side:cr.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&r()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&r())),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),t.hasOwnProperty("lights")&&((t.lights||[]).forEach(function(s){return e.scene.remove(s)}),e.lights.forEach(function(s){return e.scene.add(s)})),t.hasOwnProperty("objects")&&((t.objects||[]).forEach(function(s){return e.scene.remove(s)}),e.objects.forEach(function(s){return e.scene.add(s)}));function r(){e.loadComplete=e.scene.visible=!0}}});function PUe(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var BUe=`.scene-container .clickable {
  cursor: pointer;
}`;PUe(BUe);function oD(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function IUe(i){if(Array.isArray(i))return oD(i)}function Lb(i,e,t){return(e=kUe(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function NUe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function DUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kj(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function r0(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kj(Object(t),!0).forEach(function(n){Lb(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Kj(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function LUe(i,e){if(i==null)return{};var t,n,r=OUe(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function OUe(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}function c5(i){return IUe(i)||NUe(i)||UUe(i)||DUe()}function FUe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function kUe(i){var e=FUe(i,"string");return typeof e=="symbol"?e:e+""}function UUe(i,e){if(i){if(typeof i=="string")return oD(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?oD(i,e):void 0}}function Mre(i,e){var t=new e;return t._destructor&&t._destructor(),{linkProp:function(r){return{default:t[r](),onChange:function(o,a){a[i][r](o)},triggerUpdate:!1}},linkMethod:function(r){return function(s){for(var o=s[i],a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];var c=o[r].apply(o,l);return c===o?this:c}}}}var zUe=["rendererConfig","waitForGlobeReady"],F2=r0(r0({},window.THREE?window.THREE:{AmbientLight:w4,DirectionalLight:ub,Vector2:je,REVISION:Gy}),{},{CSS2DRenderer:GMe}),Tre=Mre("globe",jte),GUe=Object.assign.apply(Object,c5(["globeImageUrl","bumpImageUrl","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude","onGlobeReady","pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration","arcsData","arcStartLat","arcStartLng","arcEndLat","arcEndLng","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration","polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration","pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration","heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration","hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration","hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration","tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration","ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod","labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration","htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlTransitionDuration","objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject","customLayerData","customThreeObject","customThreeObjectUpdate"].map(function(i){return Lb({},i,Tre.linkProp(i))}))),HUe=Object.assign.apply(Object,c5(["globeMaterial","getGlobeRadius","getCoords","toGeoCoords"].map(function(i){return Lb({},i,Tre.linkMethod(i))}))),Ere=Mre("renderObjs",Sre),qUe=Object.assign.apply(Object,c5(["width","height","backgroundColor","backgroundImageUrl","enablePointerInteraction"].map(function(i){return Lb({},i,Ere.linkProp(i))}))),VUe=Object.assign.apply(Object,c5(["lights","postProcessingComposer"].map(function(i){return Lb({},i,Ere.linkMethod(i))}))),jUe=mo({props:r0(r0({onZoom:{triggerUpdate:!1},onGlobeClick:{triggerUpdate:!1},onGlobeRightClick:{triggerUpdate:!1},pointLabel:{default:"name",triggerUpdate:!1},onPointClick:{triggerUpdate:!1},onPointRightClick:{triggerUpdate:!1},onPointHover:{triggerUpdate:!1},arcLabel:{default:"name",triggerUpdate:!1},onArcClick:{triggerUpdate:!1},onArcRightClick:{triggerUpdate:!1},onArcHover:{triggerUpdate:!1},polygonLabel:{default:"name",triggerUpdate:!1},onPolygonClick:{triggerUpdate:!1},onPolygonRightClick:{triggerUpdate:!1},onPolygonHover:{triggerUpdate:!1},pathLabel:{default:"name",triggerUpdate:!1},onPathClick:{triggerUpdate:!1},onPathRightClick:{triggerUpdate:!1},onPathHover:{triggerUpdate:!1},onHeatmapClick:{triggerUpdate:!1},onHeatmapRightClick:{triggerUpdate:!1},onHeatmapHover:{triggerUpdate:!1},hexLabel:{triggerUpdate:!1},onHexClick:{triggerUpdate:!1},onHexRightClick:{triggerUpdate:!1},onHexHover:{triggerUpdate:!1},hexPolygonLabel:{triggerUpdate:!1},onHexPolygonClick:{triggerUpdate:!1},onHexPolygonRightClick:{triggerUpdate:!1},onHexPolygonHover:{triggerUpdate:!1},tileLabel:{default:"name",triggerUpdate:!1},onTileClick:{triggerUpdate:!1},onTileRightClick:{triggerUpdate:!1},onTileHover:{triggerUpdate:!1},labelLabel:{triggerUpdate:!1},onLabelClick:{triggerUpdate:!1},onLabelRightClick:{triggerUpdate:!1},onLabelHover:{triggerUpdate:!1},objectLabel:{default:"name",triggerUpdate:!1},onObjectClick:{triggerUpdate:!1},onObjectRightClick:{triggerUpdate:!1},onObjectHover:{triggerUpdate:!1},customLayerLabel:{default:"name",triggerUpdate:!1},onCustomLayerClick:{triggerUpdate:!1},onCustomLayerRightClick:{triggerUpdate:!1},onCustomLayerHover:{triggerUpdate:!1},pointerEventsFilter:{default:function(){return!0},triggerUpdate:!1,onChange:function(e,t){return t.renderObjs.hoverFilter(function(n){return e(n,n.__data)})}},lineHoverPrecision:{default:.2,triggerUpdate:!1,onChange:function(e,t){return t.renderObjs.lineHoverPrecision(e)}}},GUe),qUe),methods:r0(r0({pauseAnimation:function(e){var t;return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),(t=e.globe)===null||t===void 0||t.pauseAnimation(),this},resumeAnimation:function(e){var t;return e.animationFrameRequestId===null&&this._animationCycle(),(t=e.globe)===null||t===void 0||t.resumeAnimation(),this},_animationCycle:function(e){e.renderObjs.tick(),e.tweenGroup.update(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},pointOfView:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=o();if(t.lat===void 0&&t.lng===void 0&&t.altitude===void 0)return r;var s=Object.assign({},r,t);if(["lat","lng","altitude"].forEach(function(l){return s[l]=+s[l]}),!n)a(s);else{for(;r.lng-s.lng>180;)r.lng-=360;for(;r.lng-s.lng<-180;)r.lng+=360;e.tweenGroup.add(new jo(r).to(s,n).easing(As.Cubic.InOut).onUpdate(a).start())}return this;function o(){return e.globe.toGeoCoords(e.renderObjs.cameraPosition())}function a(l){var u=l.lat,c=l.lng,h=l.altitude;e.renderObjs.cameraPosition(e.globe.getCoords(u,c,h))}},getScreenCoords:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];var o=(t=e.globe).getCoords.apply(t,r);return e.renderObjs.getScreenCoords(o.x,o.y,o.z)},toGlobeCoords:function(e,t,n){var r=e.renderObjs.intersectingObjects(t,n).find(function(l){return l.object.__globeObjType==="globe"});if(!r)return null;var s=e.globe.toGeoCoords(r.point),o=s.lat,a=s.lng;return{lat:o,lng:a}},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},_destructor:function(e){e.globe._destructor(),this.pauseAnimation(),this.pointsData([]),this.arcsData([]),this.polygonsData([]),this.pathsData([]),this.heatmapsData([]),this.hexBinPointsData([]),this.hexPolygonsData([]),this.tilesData([]),this.labelsData([]),this.htmlElementsData([]),this.objectsData([]),this.customLayerData([])}},HUe),VUe),stateInit:function(e){var t=e.rendererConfig,n=e.waitForGlobeReady,r=n===void 0?!0:n,s=LUe(e,zUe),o=new jte(r0({waitForGlobeReady:r},s));return{globe:o,renderObjs:Sre({controlType:"orbit",rendererConfig:t,waitForLoadComplete:r,extraRenderers:[new F2.CSS2DRenderer]}).skyRadius(o.getGlobeRadius()*500).showNavInfo(!1).objects([o]).lights([new F2.AmbientLight(13421772,Math.PI),new F2.DirectionalLight(16777215,.6*Math.PI)]),tweenGroup:new k4}},init:function(e,t){var n=this;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative";var r=document.createElement("div");t.container.appendChild(r),t.renderObjs(r),t.globe.rendererSize(t.renderObjs.renderer().getSize(new F2.Vector2)),this.pointOfView({altitude:2.5});var s=t.globe.getGlobeRadius(),o=t.renderObjs.controls();o.minDistance=s*1.01,o.maxDistance=s*100,o.enablePan=!1,o.enableDamping=!0,o.dampingFactor=.1,o.rotateSpeed=.3,o.zoomSpeed=.3,o.addEventListener("change",function(){var u=n.pointOfView();o.rotateSpeed=u.altitude*.2,o.zoomSpeed=(u.altitude+1)*.1,t.globe.setPointOfView(t.renderObjs.camera().position),t.onZoom&&t.onZoom(u)});var a=function(c){for(var h=c;h&&!h.hasOwnProperty("__globeObjType");)h=h.parent;return h},l={point:function(c){return c},arc:function(c){return c},polygon:function(c){return c.data},path:function(c){return c},heatmap:function(c){return c},hexbin:function(c){return c},hexPolygon:function(c){return c},tile:function(c){return c},label:function(c){return c},object:function(c){return c},custom:function(c){return c}};F2.REVISION<155&&(t.renderObjs.renderer().useLegacyLights=!1),t.renderObjs.hoverOrderComparator(function(u,c){var h=a(u),f=a(c),d=function(v){return!v};return d(h)-d(f)}).tooltipContent(function(u){var c={point:t.pointLabel,arc:t.arcLabel,polygon:t.polygonLabel,path:t.pathLabel,hexbin:t.hexLabel,hexPolygon:t.hexPolygonLabel,tile:t.tileLabel,label:t.labelLabel,object:t.objectLabel,custom:t.customLayerLabel},h=a(u),f=h&&h.__globeObjType;return h&&f&&c.hasOwnProperty(f)&&l.hasOwnProperty(f)&&gt(c[f])(l[f](h.__data))||""}).onHover(function(u){var c={point:t.onPointHover,arc:t.onArcHover,polygon:t.onPolygonHover,path:t.onPathHover,heatmap:t.onHeatmapHover,hexbin:t.onHexHover,hexPolygon:t.onHexPolygonHover,tile:t.onTileHover,label:t.onLabelHover,object:t.onObjectHover,custom:t.onCustomLayerHover},h={globe:t.onGlobeClick,point:t.onPointClick,arc:t.onArcClick,polygon:t.onPolygonClick,path:t.onPathClick,heatmap:t.onHeatmapClick,hexbin:t.onHexClick,hexPolygon:t.onHexPolygonClick,tile:t.onTileClick,label:t.onLabelClick,object:t.onObjectClick,custom:t.onCustomLayerClick},f=a(u);if(f&&!c.hasOwnProperty(f.__globeObjType)&&(f=null),f!==t.hoverObj){var d=t.hoverObj?t.hoverObj.__globeObjType:null,p=t.hoverObj?l[d](t.hoverObj.__data):null,v=f?f.__globeObjType:null,b=f?l[v](f.__data):null;d&&d!==v&&c[d]&&c[d](null,p),v&&c[v]&&c[v](b,d===v?p:null),t.renderObjs.renderer().domElement.classList[v&&h[v]?"add":"remove"]("clickable"),t.hoverObj=f}}).onClick(function(u,c,h){if(u){var f={globe:t.onGlobeClick,point:t.onPointClick,arc:t.onArcClick,polygon:t.onPolygonClick,path:t.onPathClick,heatmap:t.onHeatmapClick,hexbin:t.onHexClick,hexPolygon:t.onHexPolygonClick,tile:t.onTileClick,label:t.onLabelClick,object:t.onObjectClick,custom:t.onCustomLayerClick},d=a(u),p=d.__globeObjType;if(d&&f.hasOwnProperty(p)&&f[p]){var v=[c];if(p==="globe"){var b=n.toGeoCoords(h),_=b.lat,M=b.lng;v.unshift({lat:_,lng:M})}else v.push(n.toGeoCoords(h));l.hasOwnProperty(p)&&v.unshift(l[p](d.__data)),f[p].apply(f,v)}}}).onRightClick(function(u,c,h){if(u){var f={globe:t.onGlobeRightClick,point:t.onPointRightClick,arc:t.onArcRightClick,polygon:t.onPolygonRightClick,path:t.onPathRightClick,heatmap:t.onHeatmapRightClick,hexbin:t.onHexRightClick,hexPolygon:t.onHexPolygonRightClick,tile:t.onTileRightClick,label:t.onLabelRightClick,object:t.onObjectRightClick,custom:t.onCustomLayerRightClick},d=a(u),p=d.__globeObjType;if(d&&f.hasOwnProperty(p)&&f[p]){var v=[c];if(p==="globe"){var b=n.toGeoCoords(h),_=b.lat,M=b.lng;v.unshift({lat:_,lng:M})}else v.push(n.toGeoCoords(h));l.hasOwnProperty(p)&&v.unshift(l[p](d.__data)),f[p].apply(f,v)}}}),this._animationCycle()}}),$Ue={width:q.number,height:q.number,backgroundColor:q.string,backgroundImageUrl:q.string,globeImageUrl:q.string,bumpImageUrl:q.string,showGlobe:q.bool,showGraticules:q.bool,showAtmosphere:q.bool,atmosphereColor:q.string,atmosphereAltitude:q.number,globeMaterial:q.object,onGlobeReady:q.func,onGlobeClick:q.func,onGlobeRightClick:q.func,pointsData:q.arrayOf(q.object),pointLat:q.oneOfType([q.number,q.string,q.func]),pointLng:q.oneOfType([q.number,q.string,q.func]),pointColor:q.oneOfType([q.string,q.func]),pointAltitude:q.oneOfType([q.number,q.string,q.func]),pointRadius:q.oneOfType([q.number,q.string,q.func]),pointResolution:q.number,pointsMerge:q.bool,pointsTransitionDuration:q.number,pointLabel:q.oneOfType([q.string,q.func]),onPointClick:q.func,onPointRightClick:q.func,onPointHover:q.func,arcsData:q.arrayOf(q.object),arcStartLat:q.oneOfType([q.number,q.string,q.func]),arcStartLng:q.oneOfType([q.number,q.string,q.func]),arcEndLat:q.oneOfType([q.number,q.string,q.func]),arcEndLng:q.oneOfType([q.number,q.string,q.func]),arcColor:q.oneOfType([q.string,q.arrayOf(q.string),q.func]),arcAltitude:q.oneOfType([q.number,q.string,q.func]),arcAltitudeAutoScale:q.oneOfType([q.number,q.string,q.func]),arcStroke:q.oneOfType([q.number,q.string,q.func]),arcCurveResolution:q.number,arcCircularResolution:q.number,arcDashLength:q.oneOfType([q.number,q.string,q.func]),arcDashGap:q.oneOfType([q.number,q.string,q.func]),arcDashInitialGap:q.oneOfType([q.number,q.string,q.func]),arcDashAnimateTime:q.oneOfType([q.number,q.string,q.func]),arcsTransitionDuration:q.number,arcLabel:q.oneOfType([q.string,q.func]),onArcClick:q.func,onArcRightClick:q.func,onArcHover:q.func,polygonsData:q.arrayOf(q.object),polygonGeoJsonGeometry:q.oneOfType([q.string,q.func]),polygonCapColor:q.oneOfType([q.string,q.func]),polygonCapMaterial:q.oneOfType([q.object,q.string,q.func]),polygonSideColor:q.oneOfType([q.string,q.func]),polygonSideMaterial:q.oneOfType([q.object,q.string,q.func]),polygonStrokeColor:q.oneOfType([q.string,q.func]),polygonAltitude:q.oneOfType([q.number,q.string,q.func]),polygonCapCurvatureResolution:q.oneOfType([q.number,q.string,q.func]),polygonsTransitionDuration:q.number,polygonLabel:q.oneOfType([q.string,q.func]),onPolygonClick:q.func,onPolygonRightClick:q.func,onPolygonHover:q.func,pathsData:q.array,pathPoints:q.oneOfType([q.array,q.string,q.func]),pathPointLat:q.oneOfType([q.number,q.string,q.func]),pathPointLng:q.oneOfType([q.number,q.string,q.func]),pathPointAlt:q.oneOfType([q.number,q.string,q.func]),pathResolution:q.number,pathColor:q.oneOfType([q.string,q.arrayOf(q.string),q.func]),pathStroke:q.oneOfType([q.number,q.string,q.func]),pathDashLength:q.oneOfType([q.number,q.string,q.func]),pathDashGap:q.oneOfType([q.number,q.string,q.func]),pathDashInitialGap:q.oneOfType([q.number,q.string,q.func]),pathDashAnimateTime:q.oneOfType([q.number,q.string,q.func]),pathTransitionDuration:q.number,pathLabel:q.oneOfType([q.string,q.func]),onPathClick:q.func,onPathRightClick:q.func,onPathHover:q.func,heatmapsData:q.array,heatmapPoints:q.oneOfType([q.array,q.string,q.func]),heatmapPointLat:q.oneOfType([q.number,q.string,q.func]),heatmapPointLng:q.oneOfType([q.number,q.string,q.func]),heatmapPointWeight:q.oneOfType([q.number,q.string,q.func]),heatmapBandwidth:q.oneOfType([q.number,q.string,q.func]),heatmapColorFn:q.oneOfType([q.string,q.func]),heatmapColorSaturation:q.oneOfType([q.number,q.string,q.func]),heatmapBaseAltitude:q.oneOfType([q.number,q.string,q.func]),heatmapTopAltitude:q.oneOfType([q.number,q.string,q.func]),heatmapsTransitionDuration:q.number,onHeatmapClick:q.func,onHeatmapRightClick:q.func,onHeatmapHover:q.func,hexBinPointsData:q.arrayOf(q.object),hexBinPointLat:q.oneOfType([q.number,q.string,q.func]),hexBinPointLng:q.oneOfType([q.number,q.string,q.func]),hexBinPointWeight:q.oneOfType([q.number,q.string,q.func]),hexBinResolution:q.number,hexMargin:q.oneOfType([q.number,q.func]),hexTopColor:q.func,hexSideColor:q.func,hexAltitude:q.oneOfType([q.number,q.func]),hexTopCurvatureResolution:q.number,hexBinMerge:q.bool,hexTransitionDuration:q.number,hexLabel:q.oneOfType([q.string,q.func]),onHexClick:q.func,onHexRightClick:q.func,onHexHover:q.func,hexPolygonsData:q.arrayOf(q.object),hexPolygonGeoJsonGeometry:q.oneOfType([q.string,q.func]),hexPolygonColor:q.oneOfType([q.string,q.func]),hexPolygonAltitude:q.oneOfType([q.number,q.string,q.func]),hexPolygonResolution:q.oneOfType([q.number,q.string,q.func]),hexPolygonMargin:q.oneOfType([q.number,q.string,q.func]),hexPolygonUseDots:q.oneOfType([q.bool,q.string,q.func]),hexPolygonCurvatureResolution:q.oneOfType([q.number,q.string,q.func]),hexPolygonDotResolution:q.oneOfType([q.number,q.string,q.func]),hexPolygonsTransitionDuration:q.number,hexPolygonLabel:q.oneOfType([q.string,q.func]),onHexPolygonClick:q.func,onHexPolygonRightClick:q.func,onHexPolygonHover:q.func,tilesData:q.arrayOf(q.object),tileLat:q.oneOfType([q.number,q.string,q.func]),tileLng:q.oneOfType([q.number,q.string,q.func]),tileAltitude:q.oneOfType([q.number,q.string,q.func]),tileWidth:q.oneOfType([q.number,q.string,q.func]),tileHeight:q.oneOfType([q.number,q.string,q.func]),tileUseGlobeProjection:q.oneOfType([q.bool,q.string,q.func]),tileMaterial:q.oneOfType([q.object,q.string,q.func]),tileCurvatureResolution:q.oneOfType([q.number,q.string,q.func]),tilesTransitionDuration:q.number,tileLabel:q.oneOfType([q.string,q.func]),onTileClick:q.func,onTileRightClick:q.func,onTileHover:q.func,ringsData:q.arrayOf(q.object),ringLat:q.oneOfType([q.number,q.string,q.func]),ringLng:q.oneOfType([q.number,q.string,q.func]),ringAltitude:q.oneOfType([q.number,q.string,q.func]),ringColor:q.oneOfType([q.string,q.arrayOf(q.string),q.func]),ringResolution:q.number,ringMaxRadius:q.oneOfType([q.number,q.string,q.func]),ringPropagationSpeed:q.oneOfType([q.number,q.string,q.func]),ringRepeatPeriod:q.oneOfType([q.number,q.string,q.func]),labelsData:q.arrayOf(q.object),labelLat:q.oneOfType([q.number,q.string,q.func]),labelLng:q.oneOfType([q.number,q.string,q.func]),labelAltitude:q.oneOfType([q.number,q.string,q.func]),labelRotation:q.oneOfType([q.number,q.string,q.func]),labelText:q.oneOfType([q.string,q.func]),labelSize:q.oneOfType([q.number,q.string,q.func]),labelTypeFace:q.object,labelColor:q.oneOfType([q.string,q.func]),labelResolution:q.number,labelIncludeDot:q.oneOfType([q.bool,q.string,q.func]),labelDotRadius:q.oneOfType([q.number,q.string,q.func]),labelDotOrientation:q.oneOfType([q.string,q.func]),labelsTransitionDuration:q.number,labelLabel:q.oneOfType([q.string,q.func]),onLabelClick:q.func,onLabelRightClick:q.func,onLabelHover:q.func,htmlElementsData:q.arrayOf(q.object),htmlLat:q.oneOfType([q.number,q.string,q.func]),htmlLng:q.oneOfType([q.number,q.string,q.func]),htmlAltitude:q.oneOfType([q.number,q.string,q.func]),htmlElement:q.oneOfType([q.string,q.func]),htmlTransitionDuration:q.number,objectsData:q.arrayOf(q.object),objectLat:q.oneOfType([q.number,q.string,q.func]),objectLng:q.oneOfType([q.number,q.string,q.func]),objectAltitude:q.oneOfType([q.number,q.string,q.func]),objectRotation:q.oneOfType([q.shape({x:q.number,y:q.number,z:q.number}),q.string,q.func]),objectFacesSurface:q.oneOfType([q.bool,q.string,q.func]),objectThreeObject:q.oneOfType([q.object,q.string,q.func]),objectLabel:q.oneOfType([q.string,q.func]),onObjectClick:q.func,onObjectRightClick:q.func,onObjectHover:q.func,customLayerData:q.arrayOf(q.object),customThreeObject:q.oneOfType([q.object,q.string,q.func]),customThreeObjectUpdate:q.oneOfType([q.string,q.func]),customLayerLabel:q.oneOfType([q.string,q.func]),onCustomLayerClick:q.func,onCustomLayerRightClick:q.func,onCustomLayerHover:q.func,enablePointerInteraction:q.bool,pointerEventsFilter:q.func,lineHoverPrecision:q.number,onZoom:q.func},QF=UMe(jUe,{methodNames:["pauseAnimation","resumeAnimation","pointOfView","lights","scene","camera","renderer","postProcessingComposer","controls","getGlobeRadius","getCoords","getScreenCoords","toGeoCoords","toGlobeCoords"],initPropNames:["animateIn","waitForGlobeReady","rendererConfig"]});QF.displayName="Globe";QF.propTypes=$Ue;const WUe=()=>{const[i,e]=W.useState(!1),t=()=>{navigator.clipboard.writeText("m7411086@gmail.com"),e(!0),setTimeout(()=>{e(!1)})};return Y.jsx("section",{className:"c-space my-20",id:"about",children:Y.jsxs("div",{className:"grid xl:grid-cols-3 xl:grid-rows-6 md:grid-cols-2 grid-cols-1 gap-5 h-full",children:[Y.jsx("div",{className:"clo-span-1 xl:row-span-3",children:Y.jsxs("div",{className:"grid-container",children:[Y.jsx("img",{src:"/assets/myself.jpg",alt:"grid-1",className:"w-full sm:[276px] h-fit object-contain rounded-md"}),Y.jsxs("div",{children:[Y.jsx("p",{className:"grid-headtext",children:"Hi, My name is Miguel"}),Y.jsx("p",{className:"grid-subtext",children:"I am a graduated with a degree in Computer Science from University of Houston-Downtown. Motivated and detail-oriented entry-level application developer with a strong foundation in programming, problem-solving, and analytical thinking. Adept at coding, testing, debugging, and troubleshooting software applications while adhering to industry standards. Passionate about learning new technologies and continuously improving technical skills to support enterprise systems effectively."})]})]})}),Y.jsx("div",{className:"col-span-1 xl:row-span-3",children:Y.jsxs("div",{className:"grid-container",children:[Y.jsx("img",{src:"/assets/technology.png",alt:"grid-2",className:"w-full sm:[276px] h-fit object-contain rounded-md"}),Y.jsxs("div",{children:[Y.jsx("p",{className:"grid-headtext",children:" Tech Stack and Skills"}),Y.jsx("p",{className:"grid-subtext",children:" I specialize in web development using HTML, CSS, JavaScript and React. Familiar with Java, C++, and Python. Experience with DBMS using MS SQL Server, and MySQL. Proficient in coding, testing, and debugging application programs. Proficient in coding, testing, and debugging application programs. Eager to learn and apply new technologies and methodologies."})]})]})}),Y.jsx("div",{className:"col-span-1 xl:row-span-4",children:Y.jsxs("div",{className:"grid-container",children:[Y.jsx("div",{className:"rounded-3xl w-full sm:h-[326px] h-fit flex justify-center items-center",children:Y.jsx(QF,{height:326,width:326,backgroundColor:"rgba(0,0,0,0)",backgroundImageOpacity:.5,showAtmosphere:!0,showGraticules:!0,globeImageUrl:"//unpkg.com/three-globe/example/img/earth-night.jpg",bumpImageUrl:"//unpkg.com/three-globe/example/img/earth-topology.png"})}),Y.jsxs("div",{children:[Y.jsx("p",{className:"grid-headtext",children:"I work remotely across most timezones"}),Y.jsx("p",{className:"grid-subtext",children:"I'm based in Houston Tx, with remote work available."}),Y.jsx(oee,{name:"Contact Me",isBeam:!0,containerClass:"w-full mt-10"})]})]})}),Y.jsx("div",{className:"xl:col-span-2 xl:row-span-3",children:Y.jsxs("div",{className:"grid-container",children:[Y.jsx("img",{src:"/assets/grid3.png",alt:"grid-3",className:"w-full sm:h-[266px] h-fit object-contain"}),Y.jsxs("div",{children:[Y.jsx("p",{className:"grid-headtext",children:"Relevant Courses"}),Y.jsx("p",{className:"grid-subtext",children:"Database Management Systems, Web Development, Operating Systems, Software Engineering, Data & Information Structures, Data Structures and Algorithms Object-Oriented Programming (Java), Machine Learning, Artificial Intelligence."})]})]})}),Y.jsx("div",{className:"xl:col-span-1 xl:row-span-2",children:Y.jsxs("div",{className:"grid-container",children:[Y.jsx("img",{src:"assets/grid4.png",alt:"grid-4",className:"w-full md:h-[126px] sm:h-[126px] h-fit object-cover sm:object-top"}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsx("p",{className:"grid-subtext text-center",children:"Contact Me"}),Y.jsxs("div",{className:"copy-container",onClick:t,children:[Y.jsx("img",{src:i?"assets/tick.svg":"assets/copy.svg",alt:"copy"}),Y.jsx("p",{className:"lg:text-2xl md:text-xl font-medium text-gray_gradient text-white",children:"M7411086@gmail.com"})]})]})]})})]})})},XUe=i=>{const e=W.useRef(),{nodes:t,materials:n}=ll("/models/computer.glb"),r=I1e(i.texture?i.texture:"/textures/project/project1.mp4");return W.useEffect(()=>{r&&(r.flipY=!1)},[r]),rv(()=>{iv.from(e.current.rotation,{y:Math.PI/2,duration:1,ease:"power3.out"})},[r]),Y.jsx("group",{ref:e,...i,dispose:null,children:Y.jsxs("group",{name:"Scene",children:[Y.jsx("mesh",{name:"monitor-screen",castShadow:!0,receiveShadow:!0,geometry:t["monitor-screen"].geometry,material:t["monitor-screen"].material,position:[.127,1.831,.511],rotation:[1.571,-.005,.031],scale:[.661,.608,.401],children:Y.jsx("meshBasicMaterial",{map:r})}),Y.jsxs("group",{name:"RootNode",position:[0,1.093,0],rotation:[-Math.PI/2,0,-.033],scale:.045,children:[Y.jsx("group",{name:"Screen001",position:[5.658,1.643,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen002",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen003",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen004",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen005",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen006",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen007",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen008",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen009",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen010",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen011",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen012",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen013",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen014",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen015",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen016",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen017",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen018",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen019",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen020",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen021",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen022",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen023",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen024",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen025",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen026",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen027",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen028",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen029",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen030",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen031",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen032",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen033",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen034",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen035",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen036",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen037",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen038",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen039",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen040",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen041",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen042",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen043",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen044",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen045",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen046",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen047",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen048",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen049",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen050",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen051",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen052",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen053",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen054",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen055",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen056",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen057",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen058",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen059",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen060",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen061",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen062",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen063",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen064",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen065",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen066",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen067",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen068",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen069",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen070",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen071",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen072",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen073",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen074",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen075",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen076",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen077",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen078",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen079",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen080",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen081",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen082",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen083",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen084",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen085",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen086",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen087",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen088",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen089",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen090",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen091",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen092",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen093",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen094",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen095",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen096",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen097",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen098",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen099",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen100",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen101",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen102",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen103",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen104",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen105",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen106",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen107",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen108",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen109",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen110",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen111",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen112",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen113",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen114",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen115",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen116",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen117",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen118",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen119",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen120",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen121",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen122",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen123",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen124",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen125",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen126",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen127",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen128",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen129",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen130",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen131",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen132",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen133",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen134",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen135",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen136",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen137",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen138",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen139",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen140",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen141",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen142",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen143",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen144",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen145",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen146",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen147",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Screen148",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),Y.jsx("group",{name:"Tower-light-007",position:[16.089,-3.47,-14.495],rotation:[Math.PI/2,0,0],scale:.963}),Y.jsx("group",{name:"Tower-light-008",position:[15.155,-3.47,-14.495],rotation:[Math.PI/2,0,0],scale:.963})]}),Y.jsxs("group",{name:"Monitor-B-_computer_0",position:[.266,1.132,.051],rotation:[0,-.033,0],scale:[.042,.045,.045],children:[Y.jsx("mesh",{name:"Monitor-B-_computer_0_1",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_1"].geometry,material:n.computer}),Y.jsx("mesh",{name:"Monitor-B-_computer_0_2",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_2"].geometry,material:n.base__0}),Y.jsx("mesh",{name:"Monitor-B-_computer_0_3",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_3"].geometry,material:n.Material_36}),Y.jsx("mesh",{name:"Monitor-B-_computer_0_4",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_4"].geometry,material:n.Material_35}),Y.jsx("mesh",{name:"Monitor-B-_computer_0_5",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_5"].geometry,material:n.Material_34}),Y.jsx("mesh",{name:"Monitor-B-_computer_0_6",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_6"].geometry,material:n.keys}),Y.jsx("mesh",{name:"Monitor-B-_computer_0_7",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_7"].geometry,material:n.keys2}),Y.jsx("mesh",{name:"Monitor-B-_computer_0_8",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_8"].geometry,material:n.Material_37})]})]})})};ll.preload("/models/computer.glb");const Jj=dB.length,YUe=()=>{const[i,e]=W.useState(0),t=dB[i],n=r=>{e(s=>r=="previous"?s==0?Jj-1:s-1:s==Jj-1?0:s+1)};return Y.jsxs("section",{className:"c-space my-20",id:"projects",children:[Y.jsx("p",{className:"head-text",children:" My Projects"}),Y.jsxs("div",{className:"grid lg:grid-cols-2 grid-cols-1 mt-12 gap-5 w-full",children:[Y.jsxs("div",{className:"flex flex-col gap-5 relative sm:p-10 py-10 px-5 shadow-2xl shadow-black-200",children:[Y.jsx("div",{className:"absolute top-0 right-0",children:Y.jsx("img",{src:t.spotlight,alt:"spotlight",className:" w-full h-96 object-cover rounded-xl"})}),Y.jsx("div",{className:"p-3 backdrop-filter backdrop-blur-3xl w-fit rounded-lg",style:dB[0].logoStyle,children:Y.jsx("img",{src:t.logo,alt:"logo",className:" w-10 h-10 shadow-sm"})}),Y.jsxs("div",{className:"flex flex-col gap-5 text-white-600 my-5",children:[Y.jsx("p",{className:"text-white text-2xl font-semibold animatedText",children:t.title}),Y.jsx("p",{className:"animatedText",children:t.desc}),Y.jsx("p",{className:"animatedText",children:t.subdesc})]}),Y.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-5",children:[Y.jsx("div",{className:"flex items-center justify-between gap-3",children:t.tags.map((r,s)=>Y.jsx("div",{className:"tech-logo",children:Y.jsx("img",{src:r.path,alt:r.name})},s))}),Y.jsxs("a",{className:"flex items-center gap-2 cursor-pointer text-white-600",href:t.href,target:"_blank",rel:"noreferrer",children:[Y.jsx("p",{children:"Check Live Project"}),Y.jsx("img",{src:"/assets/arrow-up.png ",className:"w-3 h-3 ",alt:"arrow"})]})]}),Y.jsxs("div",{className:"flex justify-between items-center mt-7",children:[Y.jsx("button",{className:"arrow-btn",onClick:()=>n("previous"),children:Y.jsx("img",{src:"/assets/left-arrow.png",alt:"left arrow",className:"w-4 h-4"})}),Y.jsx("button",{className:"arrow-btn",onClick:()=>n("next"),children:Y.jsx("img",{src:"/assets/right-arrow.png",alt:"right arrow",className:"w-4 h-4"})})]})]}),Y.jsx("div",{className:"border border-black-300 bg-black-200 rounded-lg h-96 md:h-full",children:Y.jsxs(WL,{children:[Y.jsx("ambientLight",{intensity:3.5}),Y.jsx("directionalLight",{position:[10,10,5]}),Y.jsx(oK,{children:Y.jsx(W.Suspense,{fallback:Y.jsx(hK,{}),children:Y.jsx("group",{scale:1.5,position:[-.2,-2.2,0],rotation:[0,0,0],children:Y.jsx(XUe,{texture:t.texture})})})}),Y.jsx(sK,{maxPolarAngle:Math.PI/2,enableZoom:!1})]})})]}),"Projects"]})},QUe=()=>Y.jsxs("section",{className:"x-space my-20",id:"clients",children:[Y.jsx("h3",{className:"head-text",children:"Hear from My Clients"}),Y.jsx("div",{className:"client-container",children:Cae.map(({id:i,name:e,review:t,img:n,position:r})=>Y.jsx("div",{className:"client-review",children:Y.jsxs("div",{children:[Y.jsx("p",{className:"text-white font-light",children:t}),Y.jsxs("div",{className:"client-content",children:[Y.jsxs("div",{className:"flex gap-3",children:[Y.jsx("img",{src:n,alt:e,className:"w-12 h-12 rounded-full"}),Y.jsxs("div",{className:"flex flex-col",children:[Y.jsx("p",{className:"font-semibold text-white-800",children:e}),Y.jsx("p",{className:"text-white-500 md:text-base tect-sm font-light",children:r})]})]}),Y.jsx("div",{className:"flex self-end items-center gap-2",children:Array.from({length:5}).map((s,o)=>Y.jsx("img",{src:"assets/star.png",alt:"star",className:"w-5 h-5"},o))})]})]})},i))})]});class Ob{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const KUe=()=>{if(!(typeof localStorage>"u"))return{get:i=>Promise.resolve(localStorage.getItem(i)),set:(i,e)=>Promise.resolve(localStorage.setItem(i,e)),remove:i=>Promise.resolve(localStorage.removeItem(i))}},oo={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:KUe()},KF=i=>i?typeof i=="string"?{publicKey:i}:i.toString()==="[object Object]"?i:{}:{},JUe=(i,e="https://api.emailjs.com")=>{if(!i)return;const t=KF(i);oo.publicKey=t.publicKey,oo.blockHeadless=t.blockHeadless,oo.storageProvider=t.storageProvider,oo.blockList=t.blockList,oo.limitRate=t.limitRate,oo.origin=t.origin||e},Cre=async(i,e,t={})=>{const n=await fetch(oo.origin+i,{method:"POST",headers:t,body:e}),r=await n.text(),s=new Ob(n.status,r);if(n.ok)return s;throw s},Rre=(i,e,t)=>{if(!i||typeof i!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},ZUe=i=>{if(i&&i.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},Pre=i=>i.webdriver||!i.languages||i.languages.length===0,Bre=()=>new Ob(451,"Unavailable For Headless Browser"),eze=(i,e)=>{if(!Array.isArray(i))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},tze=i=>{var e;return!((e=i.list)!=null&&e.length)||!i.watchVariable},nze=(i,e)=>i instanceof FormData?i.get(e):i[e],Ire=(i,e)=>{if(tze(i))return!1;eze(i.list,i.watchVariable);const t=nze(e,i.watchVariable);return typeof t!="string"?!1:i.list.includes(t)},Nre=()=>new Ob(403,"Forbidden"),ize=(i,e)=>{if(typeof i!="number"||i<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},rze=async(i,e,t)=>{const n=Number(await t.get(i)||0);return e-Date.now()+n},Dre=async(i,e,t)=>{if(!e.throttle||!t)return!1;ize(e.throttle,e.id);const n=e.id||i;return await rze(n,e.throttle,t)>0?!0:(await t.set(n,Date.now().toString()),!1)},Lre=()=>new Ob(429,"Too Many Requests"),sze=async(i,e,t,n)=>{const r=KF(n),s=r.publicKey||oo.publicKey,o=r.blockHeadless||oo.blockHeadless,a=r.storageProvider||oo.storageProvider,l={...oo.blockList,...r.blockList},u={...oo.limitRate,...r.limitRate};return o&&Pre(navigator)?Promise.reject(Bre()):(Rre(s,i,e),ZUe(t),t&&Ire(l,t)?Promise.reject(Nre()):await Dre(location.pathname,u,a)?Promise.reject(Lre()):Cre("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:i,template_id:e,template_params:t}),{"Content-type":"application/json"}))},oze=i=>{if(!i||i.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},aze=i=>typeof i=="string"?document.querySelector(i):i,lze=async(i,e,t,n)=>{const r=KF(n),s=r.publicKey||oo.publicKey,o=r.blockHeadless||oo.blockHeadless,a=oo.storageProvider||r.storageProvider,l={...oo.blockList,...r.blockList},u={...oo.limitRate,...r.limitRate};if(o&&Pre(navigator))return Promise.reject(Bre());const c=aze(t);Rre(s,i,e),oze(c);const h=new FormData(c);return Ire(l,h)?Promise.reject(Nre()):await Dre(location.pathname,u,a)?Promise.reject(Lre()):(h.append("lib_version","4.4.1"),h.append("service_id",i),h.append("template_id",e),h.append("user_id",s),Cre("/api/v1.0/email/send-form",h))},uze={init:JUe,send:sze,sendForm:lze,EmailJSResponseStatus:Ob},cze=()=>{const i=W.useRef(),[e,t]=W.useState(!1),[n,r]=W.useState({Name:"",Email:"",Message:""}),s=({name:a,value:l})=>{r({...n,[a]:l})},o=async a=>{a.preventDefault(),t(!0);try{await uze.send("service_oe4ddi4","template_b1dhg1a",{from_name:n.Name,to_name:"Miguel",from_email:n.Email,to_email:"m7411086@gmail.com",message:n.Message},"q1Tmk6sl4dIvxOp8V"),t(!1),alert("YOUR MESSAGE HAS BEEN SENT SUCCESSFULLY!"),r({name:"",email:"",message:""})}catch(l){t(!1),console.log(l),alert("Something went wrong!")}};return Y.jsx("section",{className:" c-space my-20",id:"contact",children:Y.jsxs("div",{className:"relative min-h-screen flex items-center justify-center flex-col",children:[Y.jsx("img",{src:"/assets/terminal.png",alt:"terminal background",className:"absolute inset-0 min-h-screen"}),Y.jsxs("div",{className:"contact-container",children:[Y.jsx("h3",{className:"head-text",children:"Contact Me"}),Y.jsx("p",{className:"text-lg text-white-600",children:"Whether you are looking to bild a new website, improve your existing platform, or bring a unique project to life I'm here to help."}),Y.jsxs("form",{ref:i,onSubmit:o,className:"mt-12 flex flex-col space-y-7",children:[Y.jsxs("label",{className:"space-y-3",children:[Y.jsx("span",{className:"field-label",children:"Your Name"}),Y.jsx("input",{type:"text",name:"name",value:n.name,onChange:s,required:!0,className:"field-input",placeholder:"ex., Jonh Doe"})]}),Y.jsxs("label",{className:"space-y-3",children:[Y.jsx("span",{className:"field-label",children:"Email address"}),Y.jsx("input",{type:"email",name:"email",value:n.email,onChange:s,required:!0,className:"field-input",placeholder:"ex., johndoe@gmail.com"})]}),Y.jsxs("label",{className:"space-y-3",children:[Y.jsx("span",{className:"field-label",children:"Your message"}),Y.jsx("textarea",{name:"message",value:n.message,onChange:s,required:!0,rows:5,className:"field-input",placeholder:"Share your thoughts or inquiries..."})]}),Y.jsxs("button",{className:"field-btn",type:"submit",disabled:e,children:[e?"Sending...":"Send Message",Y.jsx("img",{src:"/assets/arrow-up.png",alt:"arrow-up",className:"field-btn_arrow"})]})]})]})]})})},hze=()=>Y.jsxs("section",{className:"c-space pt-7 pb-3 border-t border-black-300 flex justify-between items-center flex-wrap gap-5",children:[Y.jsxs("div",{className:"text-white-500 flex gap-2",children:[Y.jsx("p",{children:"Terms & Conditions"}),Y.jsx("p",{children:"|"}),Y.jsx("p",{children:"Provacy Policy"})]}),Y.jsxs("div",{className:"flex gap-3",children:[Y.jsx("div",{className:"social-icon",children:Y.jsx("img",{src:"/assets/github.svg",alt:"github",className:"w-1/2 h-1/2"})}),Y.jsx("div",{className:"social-icon",children:Y.jsx("img",{src:"/assets/twitter.svg",alt:"github",className:"w-1/2 h-1/2"})}),Y.jsx("div",{className:"social-icon",children:Y.jsx("img",{src:"/assets/instagram.svg",alt:"github",className:"w-1/2 h-1/2"})})]}),Y.jsx("p",{className:"text-white-500",children:"(c) 2024 Miguel. All rights reserved."})]}),fze=({animationName:i="idle",...e})=>{const t=W.useRef(),{nodes:n,materials:r}=ll("/models/animations/developer.glb"),{animations:s}=h1("/models/animations/idle.fbx"),{animations:o}=h1("/models/animations/salute.fbx"),{animations:a}=h1("/models/animations/clapping.fbx"),{animations:l}=h1("/models/animations/victory.fbx");s[0].name="idle",o[0].name="salute",a[0].name="clapping",l[0].name="victory";const{actions:u}=N1e([s[0],o[0],a[0],l[0]],t);return W.useEffect(()=>(u[i].reset().fadeIn(.5).play(),()=>u[i].fadeOut(.5)),[i]),Y.jsxs("group",{...e,dispose:null,ref:t,children:[Y.jsx("primitive",{object:n.Hips}),Y.jsx("skinnedMesh",{name:"EyeLeft",geometry:n.EyeLeft.geometry,material:r.Wolf3D_Eye,skeleton:n.EyeLeft.skeleton,morphTargetDictionary:n.EyeLeft.morphTargetDictionary,morphTargetInfluences:n.EyeLeft.morphTargetInfluences}),Y.jsx("skinnedMesh",{name:"EyeRight",geometry:n.EyeRight.geometry,material:r.Wolf3D_Eye,skeleton:n.EyeRight.skeleton,morphTargetDictionary:n.EyeRight.morphTargetDictionary,morphTargetInfluences:n.EyeRight.morphTargetInfluences}),Y.jsx("skinnedMesh",{name:"Wolf3D_Head",geometry:n.Wolf3D_Head.geometry,material:r.Wolf3D_Skin,skeleton:n.Wolf3D_Head.skeleton,morphTargetDictionary:n.Wolf3D_Head.morphTargetDictionary,morphTargetInfluences:n.Wolf3D_Head.morphTargetInfluences}),Y.jsx("skinnedMesh",{name:"Wolf3D_Teeth",geometry:n.Wolf3D_Teeth.geometry,material:r.Wolf3D_Teeth,skeleton:n.Wolf3D_Teeth.skeleton,morphTargetDictionary:n.Wolf3D_Teeth.morphTargetDictionary,morphTargetInfluences:n.Wolf3D_Teeth.morphTargetInfluences}),Y.jsx("skinnedMesh",{geometry:n.Wolf3D_Hair.geometry,material:r.Wolf3D_Hair,skeleton:n.Wolf3D_Hair.skeleton}),Y.jsx("skinnedMesh",{geometry:n.Wolf3D_Outfit_Top.geometry,material:r.Wolf3D_Outfit_Top,skeleton:n.Wolf3D_Outfit_Top.skeleton}),Y.jsx("skinnedMesh",{geometry:n.Wolf3D_Outfit_Bottom.geometry,material:r.Wolf3D_Outfit_Bottom,skeleton:n.Wolf3D_Outfit_Bottom.skeleton}),Y.jsx("skinnedMesh",{geometry:n.Wolf3D_Outfit_Footwear.geometry,material:r.Wolf3D_Outfit_Footwear,skeleton:n.Wolf3D_Outfit_Footwear.skeleton}),Y.jsx("skinnedMesh",{geometry:n.Wolf3D_Body.geometry,material:r.Wolf3D_Body,skeleton:n.Wolf3D_Body.skeleton})]})};ll.preload("/models/animations/developer.glb");const dze=()=>{const[i,e]=W.useState("idle");return Y.jsx("section",{className:"c-space my-20",children:Y.jsxs("div",{className:"w-full text-white-600",children:[Y.jsx("h3",{className:"head-text",children:"My Work Experiece"}),Y.jsxs("div",{className:"work-container",id:"work",children:[Y.jsx("div",{className:"work-canvas",children:Y.jsxs(WL,{children:[Y.jsx("ambientLight",{intensity:7}),Y.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1}),Y.jsx("directionalLight",{position:[10,10,10],intensity:1}),Y.jsx(sK,{enableZoom:!1,maxPolarAngle:Math.PI/2}),Y.jsx(W.Suspense,{fallback:Y.jsx(hK,{}),children:Y.jsx(fze,{"position-y":-3,scale:3,animationName:i})})]})}),Y.jsx("div",{className:"work-content",children:Y.jsx("div",{className:"sm:py-10 sm:px-5 px-2.5",children:Pae.map(({id:t,name:n,pos:r,duration:s,icon:o,title:a,animation:l},u)=>Y.jsxs("div",{className:"work-content_container group",onClick:()=>e(l.toLowerCase()),onPointerOver:()=>e(l.toLowerCase()),onPointerOut:()=>e("idle"),children:[Y.jsxs("div",{className:"flex flex-col h-full justify-start items-center py-2",children:[Y.jsx("div",{className:"work-content_logo",children:Y.jsx("img",{src:o,alt:"logo",className:"w-full h-full"})}),Y.jsx("div",{className:"work-content_bar"})]}),Y.jsxs("div",{className:"sm:p-5 px-2.5 py-5",children:[Y.jsx("p",{className:"font-bold text-white-500",children:n}),Y.jsxs("p",{className:"text-sm mb-5",children:[r," -- ",s]}),Y.jsx("p",{className:"group-hover:text-white transition ease-in-out durarion-500",children:a})]})]},t))})})]})]})})},pze=()=>Y.jsxs("main",{className:"max-w-7xl mx-auto",children:[Y.jsx(Bae,{}),Y.jsx(_Me,{}),Y.jsx(WUe,{}),Y.jsx(YUe,{}),Y.jsx(dze,{}),Y.jsx(QUe,{}),Y.jsx(cze,{}),Y.jsx(hze,{})]});tL(document.getElementById("root")).render(Y.jsx(W.StrictMode,{children:Y.jsx(pze,{})}));export{Zre as c,xh as g};
